var version_="int99",_0x53d9a2=_0x20da;function _0x20da(n,e){var s=_0x21d7();return(_0x20da=function(e,t){var i=s[e-=201],o=(void 0===_0x20da.dhqUOk&&(_0x20da.ZyKfpJ=function(e,t){var i,o=[],a=0,n="";for(e=function(e){for(var t,i,o="",a="",n=0,s=0;i=e.charAt(s++);~i&&(t=n%4?64*t+i:i,n++%4)&&(o+=String.fromCharCode(255&t>>(-2*n&6))))i="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=".indexOf(i);for(var l=0,r=o.length;l<r;l++)a+="%"+("00"+o.charCodeAt(l).toString(16)).slice(-2);return decodeURIComponent(a)}(e),s=0;s<256;s++)o[s]=s;for(s=0;s<256;s++)a=(a+o[s]+t.charCodeAt(s%t.length))%256,i=o[s],o[s]=o[a],o[a]=i;for(var s=0,a=0,l=0;l<e.length;l++)a=(a+o[s=(s+1)%256])%256,i=o[s],o[s]=o[a],o[a]=i,n+=String.fromCharCode(e.charCodeAt(l)^o[(o[s]+o[a])%256]);return n},n=arguments,_0x20da.dhqUOk=!0),s[0]),o=e+o,a=n[o];return a?i=a:(void 0===_0x20da.uiCDvX&&(_0x20da.uiCDvX=!0),i=_0x20da.ZyKfpJ(i,t),n[o]=i),i})(n,e)}(function(e,t,i,o){o="hs";for(var a=_0x21d7,n=520382,s=function(e,t,i,o,a,n,s){return(e=(e=e[t="split"](""))[i="reverse"]("v"))[o="join"]("")},l=void 0,r=void 0,h=_0x20da,m=(o+="up",i=s((l="tfi")+"hs"),o=s(o),s=0,a());--e+n;)try{l=+parseInt(h(220,"Vz4C"))*(parseInt(h(233,"f%[b"))/2)+parseInt(h(225,"R)Ys"))/3+-parseInt(h(226,"&Y7Q"))/4+-parseInt(h(234,"R)Ys"))/5+-parseInt(h(206,"Qt#1"))/6*(parseInt(h(201,"9RHv"))/7)+-parseInt(h(217,"oR16"))/8*(-parseInt(h(232,"Y*CH"))/9)+-parseInt(h(205,"R)Ys"))/10}catch(e){l=s}finally{if(r=m[i](),202<=e)s?t?l=r:t=r:s=r;else if(s==t.replace(/[jEBaMUfxFbQyWvJkHPuR=]/g,"")){if(l===n){m["un"+i](r);break}m[o](r)}}})(204),_0x21d7&&(version_=_0x21d7);class ConvertH5Api{[_0x53d9a2(209,"$nLz")](o){var a=_0x53d9a2,n={ywscB:function(e,t){return e!==t},NFRQi:a(235,"9Htr"),pJQvc:a(203,"fMwA"),BycOi:function(e,t){return e(t)}};n[a(218,"tclU")](o,{code:1e4}),gameapi[a(216,"oInm")]((e,t)=>{var i=a;e?n[i(210,"Y*CH")](n.NFRQi,n.NFRQi)?_0x2f8bd5&&_0xa084a3({uID:121212}):o({code:10001}):window[i(228,"8dO5")][i(221,"*$$0")](n.pJQvc,2e3)})}["isLogin"](){return!0}[_0x53d9a2(208,"deQb")](){}[_0x53d9a2(211,"oInm")](){}[_0x53d9a2(204,"R)Ys")](e){e&&e({uID:121212})}["canPlayAd"](e){for(var t=_0x53d9a2,i={otEHW:t(212,"S*Tz"),olLFF:function(e,t){return e(t)}},o=i[t(207,"B3$[")].split("|"),a=0;;){switch(o[a++]){case"0":n[t(231,"Uy0D")]=999999;continue;case"1":e&&i[t(223,"9RHv")](e,n);continue;case"2":return!0;case"3":n[t(219,"xDYg")]=!0;continue;case"4":var n={};continue}break}}[_0x53d9a2(222,"oInm")](){}[_0x53d9a2(213,"Qt#1")](){}}function _0x21d7(){var e=[version_,"MfxWintH99FxvyPbuQkEUQWjbWFJaRB==","W7a0WOZdO8oiouT6W6O","imooW4BdTHpcH8kZ","dqu1W6LVbJ4","hCkXgY4NW6RcSCo9zHNcHLdcRq"].concat(["W4NdL3FdTqe","mXbtWR40DG","WOZcHZWhnchcISoEbK/dNbH+","wYNcNmkXgmoiqCo4WOKCWO/dSmkV","jCkJW6RdHatcT8k9W40","WR3dKM3cTmoxW7q"].concat(["WQvlAmoDpCopbZ3dOmoGW5vIyW","WPvunszCec0V","ewuumLPn","dSkHlmoQvMfhuG","ECoEW6ZcJSklCeyeWQRdJCoBFG","WOVcIdGgnYpdHSo0kK/dNbu"].concat(["WOWkW7tdUb0","WPxcJM/dUZ3dVCkTkG","WQfIW5tcISkrAGDAW6NcNCoiW7Ot","puxcG8kcW61kwCoSwu1MW7jre3tdHSo0W54Oi31eW5ZdQr/cOmo6W7qykGmyWRf8W7m","W5ldN21xBW","WONcGdSgnspdJ8orbvhdMqq"].concat(["WPddNNRcVg3dJKhdRWOjW4mO","WP/cUSoQsh0","W54Os8kMWRddLv7cL8k2BSoqWOVcQa","W4uDBt4vWR8","rmoGnCoWFa","hCkXgY4NW67cVmo5yHRcHa"].concat(["WOXiu1NcQc8TDYm","W5RcHsRdVJ0","oNhdNmo5WPxdThinWR/dUCk/W7O","WQRcPSkwuZe","hSk1fsaNW6RcPCoZEra","eZ1QW7acdSkBFHJdI8kjW48i"].concat(["daJdRmkJW6q"]))))));return(_0x21d7=function(){return e})()}window[_0x53d9a2(215,"Mp]W")]=new ConvertH5Api,(()=>{var t=class{constructor(){this.callList=[]}AddCallBack(t,i){if(null!=i&&null!=t){let e=new a;e.fun=i,e.target=t,this.callList.push(e)}}RemoveCallBack(t,i){for(let e=0;e<this.callList.length;e++)this.callList[e].target==t&&this.callList[e].fun==i&&this.callList.splice(e,1)}RemoveCallTarget(t){for(let e=this.callList.length;0<=e;e--)this.callList[e].target==t&&this.callList.splice(e,1)}Call(i,...o){for(let t=0;t<this.callList.length;t++){let e=this.callList[t];e.target&&e.fun.call(e.target,i,...o)}}CleanAllCallBack(){this.callList=[]}},a=class{},n=class{static IsNeedDebug(e,t){if(n.logLevel<=e){if(""==t)return!0;if(0==n.logModule.length)return!0;for(let e=0;e<n.logModule.length;e++)if(n.logModule[e]==t)return!0}return!1}static Init(e,t){n.logLevel=e,n.logModule=""==t?[]:t.split("|")}static WeakLog(e,...t){n.IsNeedDebug(0,"")&&(console.log(e,...t),n.onDebug.Call("",this.DebugLevel1,e,...t))}static M_WeakLog(e,t,...i){n.IsNeedDebug(0,e)&&(console.log("["+e+"]",t,...i),n.onDebug.Call(e,n.DebugLevel1,t,...i))}static Log(e,...t){n.IsNeedDebug(1,"")&&(console.log(e,...t),n.onDebug.Call("",n.DebugLevel2,e,...t))}static M_Log(e,t,...i){n.IsNeedDebug(1,e)&&(console.log("["+e+"]",t,...i),n.onDebug.Call(e,n.DebugLevel2,"",""))}static Warn(e,...t){n.IsNeedDebug(2,"")&&(console.warn(e,...t),n.onDebug.Call("",n.DebugLevel3,"",""))}static M_Warn(e,t,...i){n.IsNeedDebug(2,e)&&(console.warn("["+e+"]",t,...i),n.onDebug.Call(e,n.DebugLevel3,t,...i))}static Erro(e,...t){n.IsNeedDebug(3,"")&&(console.error(e,...t),n.onDebug.Call("",n.DebugLevel4,e,...t))}static M_Erro(e,t,...i){n.IsNeedDebug(3,e)&&(console.error("["+e+"]",t,...i),n.onDebug.Call(e,n.DebugLevel4,t,...i))}},b=n,l=(b.logLevel=0,b.logModule=[],b.onDebug=new t,b.DebugLevel1="WeakLog",b.DebugLevel2="Log",b.DebugLevel3="Warm",b.DebugLevel4="Erro",class{static get TimeDeltaNoScale(){var e=.001*Laya.timer.delta;return.1<e?.1:e}static get TimeDelta(){return.001*Laya.timer.delta*this.timeScale}static get FixedTimeDelta(){return this.FixedTime*this.timeScale}static get FixedTimeNoScaleDelta(){return this.FixedTime}static get LimitTimeDelta(){var e=l.TimeDelta;return.033<e?.033:e}static TimeScaleZoom(e,t,i=1){var o=this.timeScaleZoomDict[e];if(t&&null!=o)console.warn("TimeScaleZoom["+e+"]已存在，无效重复设置！");else{if(t||null!=o)return 0==i?void console.warn("TimeScaleZoom不能设置为0"):void(t?(this.timeScaleZoomDict[e]=i,this.timeScale*=i):(this.timeScale*=1/this.timeScaleZoomDict[e],this.timeScaleZoomDict[e]=null));console.warn("TimeScaleZoom["+e+"]不存在，无效恢复！")}}static get TimeScale(){return this.timeScale}static FreshStartTime(){this.timeData=new Date,l.startTime=l.timeData.getTime()}static GetLeftTime(){return Math.floor(1e3*l.startTime)}static SetSystemTime(e){l.systemTime=e,l.startTime=0}static GetNowDay(){let e=new Date;return e.setTime(l.SystemTime),e.getDate()}static get SystemTime(){return l.systemTime+l.GetLeftTime()}}),A=l,x=(A.timeScale=1,A.ExUpDateCount=1,A.FixedTime=.04,A.timeScaleZoomDict={},A.timeData=new Date,A.startTime=0,A.systemTime=0,class{static GetFairyGUI_Icon(e){return"ui://InGameUI/"+e}static GetIcon(e,t=".png"){return"res/items/"+e+t}static GetIcon2(e,t=".jpg"){return"res/items/"+e+t}static GetImage(e,t="png"){return"res/items/"+e+"."+t}static GetScene(e){return e+"/Conventional/"+e+".ls"}static GetSceneNav(e){return"3DRes/GameData/Scene/Nav"+e+".json"}static GetSceneMapData(e){return"3DRes/GameData/Scene/"+e+"Data.json"}static GetBodySkin(e){return"3DRes/Skin/Conventional/"+e+".lh"}static GetWeaponSkin(e){return"CDN/3DRes/LayaScene_Weapon/Conventional/"+e+".lh"}static GetSound2(e){let t=".mp3",i="Sound/MP3/InGame/"+e+t;return window.conchConfig&&(t="BGM1"!=e&&"CoverBgm"!=e?".wav":".mp3",i="Sound/WAV/InGame/"+e+t),i}static GetBGM(e){return"3DRes/"+e+".mp3"}static GetSound3(e){return"Sound/InGame/"+e+".ogg"}}),Y=(x.localizationJsonData="3DRes/GameData/LocalizationData.json",x.GameRuleData="3DRes/GameData/GameRuleData.json",x.propData="3DRes/GameData/PropsData.json",x.LotteryData="3DRes/GameData/LotteryData.json",x.ShopData="3DRes/GameData/ShopData.json",x.QuestData="3DRes/GameData/QuestData.json",x.PlatformSettingData="3DRes/GameData/PlatformSettingData.json",x.EventData="3DRes/GameData/EventData.json",x.WeaponSkinData="3DRes/GameData/WeaponSkinData.json",x.HeroLvlData="3DRes/GameData/HeroLvlData.json",x.SkillData="3DRes/GameData/SkillData.json",x.UserData="3DRes/GameData/UserData.json",x.UserData2="3DRes/GameData/UserData2.json",x.HeroData="3DRes/GameData/HeroData.json",x.WeaponData="3DRes/GameData/WeaponData.json",x.GearData="3DRes/GameData/GearData.json",x.MedalLevelData="3DRes/GameData/MedalLevelData.json",x.PlayerLvData="3DRes/GameData/PlayerLvData.json",x.EntryData="3DRes/GameData/EntryData.json",x.AIData="3DRes/GameData/AIData.json",x.PlayerNames_CN="3DRes/GameData/PlayerNames_CN.json",x.PlayerNames_EN="3DRes/GameData/PlayerNames_EN.json",x.ZombieData="3DRes/GameData/ZombieData.json",x.ZombieSchedule="3DRes/GameData/ZombieScheduleData.json",x.ItemData="3DRes/GameData/ItemData.json",x.ZModePassiveSkill="3DRes/GameData/ZModePassiveSkillData.json",x.Z_Quest="3DRes/GameData/Z_QuestData.json",class{static init(){BigNumber.config({DECIMAL_PLACES:10})}static jia(e,t){let i=this.toBigNumber(e),o=this.toBigNumber(t);return i.plus(o).toFixed(2)}static jian(e,t){let i=this.toBigNumber(e),o=this.toBigNumber(t);return i.minus(o).toFixed(10)}static cheng(e,t,i=10){let o=this.toBigNumber(e),a=this.toBigNumber(t);return o.times(a).toFixed(i)}static chu(e,t){let i=this.toBigNumber(e),o=this.toBigNumber(t);return i.div(o).toFixed(10)}static pow(e,t,i=10){let o=this.toBigNumber(e),a=this.toBigNumber(t);return o.pow(a).toFixed(i)}static compare(e,t){let i=this.toBigNumber(e),o=this.toBigNumber(t);return i.comparedTo(o)}static isGreaterThanOrEqualTo(e,t){let i=this.toBigNumber(e),o=this.toBigNumber(t);return i.isGreaterThanOrEqualTo(o)}static integerValue(e,t){let i=this.toBigNumber(e);return(arguments.length?i.integerValue(t):i.integerValue()).toFixed()}static toBigNumber(e){return BigNumber.isBigNumber(e)?e:new BigNumber(e)}static converStr(a,n=1,s=!1){if(null==a)return"0";if(-1!=(a+="").indexOf(".")){var e=a.split(".");if(e[0].length<=3)return s?(+a).toFixed(n):e[0];a=e[0]}s=a.length;if(s>this.UNITS.length)return`999.${[9,9,9,9,9,9,9,9,9].slice(0,n).join("")}zz`;if(3<s){let e,t,i,o=Math.floor(s/3);return i=s%3==0?(e=a.substring(0,3),t=a.substring(e.length,e.length+n),this.UNITS[o-1]):(e=a.substring(0,s-3*o),t=a.substring(e.length,e.length+n),this.UNITS[o]),e+"."+t+i}return a}}),r=(Y.UNITS=["","K","M","B","T","aa","ab","ac","ad","ae","af","ag","ah","ai","aj","ak","al","am","an","ao","ap","aq","ar","as","at","au","av","aw","ax","ay","az","ba","bb","bc","bd","be","bf","bg","bh","bi","bj","bk","bl","bm","bn","bo","bp","bq","br","bs","bt","bu","bv","bw","bx","by","bz","ca","cb","cc","cd","ce","cf","cg","ch","ci","cj","ck","cl","cm","cn","co","cp","cq","cr","cs","ct","cu","cv","cw","cx","cy","cz","da","db","dc","dd","de","df","dg","dh","di","dj","dk","dl","dm","dn","do","dp","dq","dr","ds","dt","du","dv","dw","dx","dy","dz","ea","eb","ec","ed","ee","ef","eg","eh","ei","ej","ek","el","em","en","eo","ep","eq","er","es","et","eu","ev","ew","ex","ey","ez","fa","fb","fc","fd","fe","ff","fg","fh","fi","fj","fk","fl","fm","fn","fo","fp","fq","fr","fs","ft","fu","fv","fw","fx","fy","fz","ga","gb","gc","gd","ge","gf","gg","gh","gi","gj","gk","gl","gm","gn","go","gp","gq","gr","gs","gt","gu","gv","gw","gx","gy","gz","ha","hb","hc","hd","he","hf","hg","hh","hi","hj","hk","hl","hm","hn","ho","hp","hq","hr","hs","ht","hu","hv","hw","hx","hy","hz","ia","ib","ic","id","ie","if","ig","ih","ii","ij","ik","il","im","in","io","ip","iq","ir","is","it","iu","iv","iw","ix","iy","iz","ja","jb","jc","jd","je","jf","jg","jh","ji","jj","jk","jl","jm","jn","jo","jp","jq","jr","js","jt","ju","jv","jw","jx","jy","jz","ka","kb","kc","kd","ke","kf","kg","kh","ki","kj","kk","kl","km","kn","ko","kp","kq","kr","ks","kt","ku","kv","kw","kx","ky","kz","la","lb","lc","ld","le","lf","lg","lh","li","lj","lk","ll","lm","ln","lo","lp","lq","lr","ls","lt","lu","lv","lw","lx","ly","lz","ma","mb","mc","md","me","mf","mg","mh","mi","mj","mk","ml","mm","mn","mo","mp","mq","mr","ms","mt","mu","mv","mw","mx","my","mz","na","nb","nc","nd","ne","nf","ng","nh","ni","nj","nk","nl","nm","nn","no","np","nq","nr","ns","nt","nu","nv","nw","nx","ny","nz","oa","ob","oc","od","oe","of","og","oh","oi","oj","ok","ol","om","on","oo","op","oq","or","os","ot","ou","ov","ow","ox","oy","oz","pa","pb","pc","pd","pe","pf","pg","ph","pi","pj","pk","pl","pm","pn","po","pp","pq","pr","ps","pt","pu","pv","pw","px","py","pz","qa","qb","qc","qd","qe","qf","qg","qh","qi","qj","qk","ql","qm","qn","qo","qp","qq","qr","qs","qt","qu","qv","qw","qx","qy","qz","ra","rb","rc","rd","re","rf","rg","rh","ri","rj","rk","rl","rm","rn","ro","rp","rq","rr","rs","rt","ru","rv","rw","rx","ry","rz","sa","sb","sc","sd","se","sf","sg","sh","si","sj","sk","sl","sm","sn","so","sp","sq","sr","ss","st","su","sv","sw","sx","sy","sz","ta","tb","tc","td","te","tf","tg","th","ti","tj","tk","tl","tm","tn","to","tp","tq","tr","ts","tt","tu","tv","tw","tx","ty","tz","ua","ub","uc","ud","ue","uf","ug","uh","ui","uj","uk","ul","um","un","uo","up","uq","ur","us","ut","uu","uv","uw","ux","uy","uz","va","vb","vc","vd","ve","vf","vg","vh","vi","vj","vk","vl","vm","vn","vo","vp","vq","vr","vs","vt","vu","vv","vw","vx","vy","vz","wa","wb","wc","wd","we","wf","wg","wh","wi","wj","wk","wl","wm","wn","wo","wp","wq","wr","ws","wt","wu","wv","ww","wx","wy","wz","xa","xb","xc","xd","xe","xf","xg","xh","xi","xj","xk","xl","xm","xn","xo","xp","xq","xr","xs","xt","xu","xv","xw","xx","xy","xz","ya","yb","yc","yd","ye","yf","yg","yh","yi","yj","yk","yl","ym","yn","yo","yp","yq","yr","ys","yt","yu","yv","yw","yx","yy","yz","za","zb","zc","zd","ze","zf","zg","zh","zi","zj","zk","zl","zm","zn","zo","zp","zq","zr","zs","zt","zu","zv","zw","zx","zy","zz"],class{static get IsIPhoneXScreen(){return 2<this.screenRatio}static get IS_233(){return"233"==window.ProjectSubCode}static get ProjectSubCode(){return"chuanqu"==window.ProjectSubCode}static get IS_KuaiShou(){return window.Platform==r.KUAISHOU}static get IS_PC(){if(!window.navigator||!window.navigator.userAgent)return!1;var e=navigator.userAgent,t=/(?:Windows Phone)/.test(e),t=/(?:SymbianOS)/.test(e)||t,i=/(?:Android)/.test(e),o=/(?:Firefox)/.test(e),o=(/(?:Chrome|CriOS)/.test(e),/(?:iPad|PlayBook)/.test(e)||i&&!/(?:Mobile)/.test(e)||o&&/(?:Tablet)/.test(e));return!(/(?:iPhone)/.test(e)&&!o||i||t)}static get IS_4399(){return window.Platform==r.H5_4399}static get IS_Native(){return!!window.conchConfig}static get IS_QQ_PLATFORM(){return window.Platform==r.QQ}static get IS_Android(){return!!window.conchConfig&&"Conch-android"==window.conchConfig.getOS()}static get IS_Ios(){return!!window.conchConfig&&("Conch-ios"==window.conchConfig.getOS()||void 0)}static get IS_WECHAT_PLATFORM(){return window.Platform==r.WECHAT&&0==window.IsInWebTest}static get IS_FACEBOOK_PLATFORM(){return!0}static get IS_TT_PLATFORM(){return null!=window.tt||null!=window.tt}static get Tt(){return window.tt}static get WX(){return window.wx}static get qq(){return window.qq}static get FaceBook(){return window.FBInstant}static get H54399(){return window.h5api}static VibrateShort(){this.IS_WECHAT_PLATFORM&&this.wx.vibrateShort()}static VibrateLong(){this.IS_WECHAT_PLATFORM&&this.wx.vibrateLong()}static TriggerGC(){}static get Oppo(){return window.qg}static get IS_OPPO_PLATFORM(){return!(null==window.qg&&null==window.qg||!window.qg.setLoadingProgress)}static get IS_VIVO_PLATFORM(){return(null!=window.qg||null!=window.qg)&&null==window.qg.setLoadingProgress}static get Vivo(){return window.qg}}),T=r,h=(T.WECHAT="WECHAT",T.OPPO="OPPO",T.VIVO="VIVO",T.H5="H5",T.QQ="QQ",T.QQSPACE="QQSPACE",T.JR="JR",T.H5_4399="H5_4399",T.ANDROID="ANDROID",T.IOS="IOS",T.TT="TT",T.KUAISHOU="KUAISHOU",T.FBINSTANT="FBINSTANT",T.wx=null,T.screenRatio=1.77,T.FaceBookRunPLATFORM="WEB",class{static Random(){h.m_z=36969*(65535&h.m_z)+(h.m_z>>16)&h.mask,h.m_w=18e3*(65535&h.m_w)+(h.m_w>>16)&h.mask;var e=(h.m_z<<16)+h.m_w&h.mask,e=(1e6*(e/=4294967296)+5e5)/1e6;return(e*=10)-Math.floor(e)}static SetSeed(e){h.m_w=e,h.m_z=987654321,h.mask=4294967295}}),m=h,d=(m.m_w=0,m.m_z=987654321,m.mask=4294967295,class{static get AuthorizationInterface(){return window.AuthorizationInterface}static get ProjectID(){let e=d.Platform;return(e=(e=(e=d.IsInWebTest?"wx":e)==T.QQ?"qq":e)==T.KUAISHOU?"ks":e)==T.TT&&(e="tt"),((e=T.IS_233?"233":e)+"_"+d.ProjectCode).toLocaleLowerCase()}static get SyncArchiveModule_SaveImmediateServerPath(){return d.Platform==T.QQ?"myurl://saveuser-ndskqa.ylkjgame.com/release/IOG_SaveUserArchive":"myurl://sh.fcapi.data-eye.cn/IOG_UserArchive/SaveUserArchive"}static get SyncArchiveModule_DownloadServerPath(){return d.Platform==T.QQ?"myurl://getuser-ndskqa.ylkjgame.com/release/IOG_GetUserArchive":"myurl://sh.fcapi.data-eye.cn/IOG_UserArchive/GetUserArchive"}static get SyncArchiveModule_DeleteServerPath(){return d.Platform==T.QQ?"myurl://deluser-ndskqa.ylkjgame.com/release/IOG_DelUserArchive":"myurl://sh.fcapi.data-eye.cn/IOG_UserArchive/DelUserArchive"}}),k=d,c=(k.v_release=window.v_release,k.v_releaseMark="",k.v=window.projectVersion,k.isNewTry=!1,k.isWxNew=!0,k.httpServerPath="myurl://192.168.1.165:8086",k.httpResServerPath=window.httpResServerPath,k.configKey="Config3",k.AbTest_IsMode1="2",k.guidance_tow=!0,k.debugLevel=2,k.useEditorLevel=!1,k.Platform=window.Platform,k.IsInWebTest=window.IsInWebTest,k.IsGM=window.IsGM,k.IsGmFromSever=window.IsGmFromSever,k.isTestLog=window.isTestLog,k.IsFreeVideo=!1,k.onlymerge=!1,k.isGuidance=window.isGuidance,k.IsOpenNewGameScene=!0,k.useRecord=!1,k.showAiInfo=!1,k.language=window.language,k.wx133ber_box=!1,k.debugModule="",k.isRW=!0,k.appid=window.appid,k.GameLineSwitchKey="GameLineSwitch",k.MpCheckChannelKey="MpCheckChannelKey",k.GameAuditSwitchKey="GameAuditSwitch",k.VersionKey="Version",k.useGmCode=window.useGmCode,k.useCDKey=window.useCDKey,k.use2021NewYear=window.use2021NewYear,k.isUseVer132=!0,k.isUseStartRandomSkill=!0,k.isUseGridBoxKey=!0,k.useNewYearKey=window.useNewYearKey,k.useHeroNoUnlock=!0,k.NewVer=!0,k.FightNian=!1,k.Hongbao=!0,k.WallBox=!0,k.HongbaoGift=!0,k.testVideo=!1,k.testSkill="",k.isIpad=!1,k.ingameBtnHide=!1,k.ingameInfoHide=!1,k.attVibrate=!1,k.banHideByCamera=!1,k.Chuanqu_OnTask=!1,k.useRate=window.useRate,k.ProjectCode="ndskqa",k.ProjectSubCode=window.ProjectSubCode,k.ProjectSubChannelCode=window.ProjectSubChannelCode,k.ProjectOverseas=window.ProjectOverseas,k.oppoLineKey="GameLineSwitch",k.oppoAuditKey="GameAuditSwitch",k.wxLineKey="GameLineSwitch",k.wxAuditKey="GameAuditSwitch",k.vivoLineKey="GameLineSwitch",k.vivoAuditKey="GameAuditSwitch",k.qqLineKey="GameLineSwitch",k.qqAuditKey="GameAuditSwitch",k.isNew2=!1,k.isQQurl=function(){let e="";return e=d.Platform==T.QQ?"ipv6.":e}(),k.isQQurl_Save=function(){let e="iog-userarchive"+(d.ProjectOverseas?"-uk.eu-west-1":".cn-shanghai")+".log.aliyuncs.com";return e=d.Platform==T.QQ?"iog-userarchive.data-eye.cn":e}(),k.isLineKey=!0,k.sellGarbageSwitch=!0,k.luandouNew=!1,k.isOpenNewInGameGuide=window.isOpenNewInGameGuide,k.shootMouseAim=window.shootMouseAim,k.DataProjectName=function(){let e="";switch(d.Platform){case T.QQ:e="iog-qq-"+d.ProjectCode;break;case T.WECHAT:e=d.IsInWebTest?"iog-test-"+d.ProjectCode:"iog-wx-"+d.ProjectCode;break;case T.KUAISHOU:e="iog-ks-"+d.ProjectCode;break;default:e="iog-"+d.Platform.toLocaleLowerCase()+"-"+d.ProjectCode}return d.ProjectSubCode&&(e+="-"+d.ProjectSubCode),e}(),k.DataReportModuleSW=window.EnableDataReport,k.DataReportModule_DataHubVersion=1,k.DataReportModule_LoghubUrl="myurl://iog-datahub"+(d.ProjectOverseas?"-uk.eu-west-1":".cn-shanghai")+".log.aliyuncs.com/logstores/"+d.DataProjectName+"-v"+d.DataReportModule_DataHubVersion+"/track",k.DataReportModule_AutoFlushDurationMs=3e4,k.DataReportModule_OnlineDurationReportCDMs=6e4,k.DataReportModule_MaxFlushConcurrentLogByteLen=10240,k.DataReportModule_ReportCompress=!1,k.DataReportModule_GetOpenID_WX_URL="myurl://"+d.isQQurl+"sh.fcapi.data-eye.cn/IOG_OpenID/WX_GetOpenID",k.LogModuleSW=window.LogModuleSW,k.LogModule_ShowConsole=!0,k.LogModule_CollectConsoleContext=!0,k.LogModule_AutoReport=!0,k.LogModule_LogHubVersion=1,k.LogModule_LoadLogHubConfig=!1,k.LogModule_LogHUbConfigPath="myurl://"+d.isQQurl+"loghub.cdn.data-eye.cn/"+d.DataProjectName+"/",k.LogModule_LogHubServerPath="myurl://"+d.isQQurl+"iog-loghub"+(d.ProjectOverseas?"-uk.eu-west-1":".cn-shanghai")+".log.aliyuncs.com/logstores/"+d.DataProjectName+"-v"+d.LogModule_LogHubVersion+"/track",k.LogModule_Test=!1,k.LogModule_LocalStorage=!0,k.LogModule_LocalStorage_AutoSave=-1,k.LogModule_ReportCompress=!1,k.SyncArchiveModuleSW=!0,k.SyncArchiveModule_HubVersion=1,k.SyncArchiveModule_UploadServerPath="myurl://"+d.isQQurl_Save+"/logstores/"+d.DataProjectName+"-v"+d.LogModule_LogHubVersion+"/track",k.SyncArchiveModule_Test=!1,class{static GetF1_F2RandomValue(e,t,i="floor"){"floor"==i&&(t+=1);let o=e+(t-e)*Math.random();return o="floor"==i?Math.floor(o):o}static GetRandomInt(e){return Math.floor(Math.random()*e)}static GetRandomRandomInt(e){return Math.floor(m.Random()*e)}static GetRandomValue(e){return!(100*Math.random()>e)}static NumTransition_(e){var e=e.split("-"),t=parseInt(e[0]),e=parseInt(e[1]);return c.GetF1_F2RandomValue(t,e)}static GetP(){return K.DataModule().GetPlatform().PlatformData}static GetWeightRandom(t,i=[]){if(0<i.length){t=[];for(let e=0;e<i.length;e++)t.push(parseInt(i[e]))}let o=0;for(let e=0;e<t.length;e++)o+=t[e];let a=Math.random(),n=0;for(let e=0;e<t.length;e++){if(a<t[e]/o+n)return e;n+=t[e]/o}return 0}static Text_AutoSize(e,t,i){e.text=i;i=e.width;t<i&&(e.scaleX=t/i)}static Text_AutoLength(e,t=6){let i=e;return i=i.length>t?e.substring(0,t)+"...":i}static GetRandomVec2(e,t,i,o,a,n=0,s=0){let l=0,r=0,h=[];for(l=n,r=s;r<t-o;){for(;l<e-i;){var m={x:l+=Math.random()*i,y:r};h.push(m),l+=i/2+a}r+=Math.random()*o/2+a+o/2,l=n}return h.sort(function(e,t){return.5<Math.random()?-1:1}),h}static List_Destop(t,i){console.log("删除",t,i);for(let e=0;e<t.length;e++)if(t[e]==i)return void t.splice(e,1)}static SetRandomList(t){if(null==t||t.length<1)return t;let i=[],o=[];for(let e=0;e<t.length;e++)o.push(1);for(let e=0;e<t.length;e++){var a=c.GetWeightRandom(o);o[a]=0,i.push(t[a])}return i}static SetBarValue(e,t,i,o=!0){let a=t,n=i;t<i&&(i=t),0==n&&(n=.1),e.max=a,o?e.tweenValue(n,.2):e.value=n,e.m_bar.visible=!(n<1)}static SetNumPriorityList(e){return null==e||e.length<1?null:(e.sort(function(e,t){return t-e}),e)}static RandomF1F2Num(t,i){let o=[];for(let e=0;e<=t;e++)o.push(e);o=this.SetRandomList(o);let a=[];for(let e=0;e<i;e++)a.push(o[e]);return a}static GetNewTime(){return(new Date).getTime()}static GetPlatform(){let e="null";var t;return window.wx&&(e="WX"),window.qq?e="QQ":window.qg&&(e="OPPO"),window.tt&&(e="TT"),window.conchConfig&&("Conch-ios"==(t=window.conchConfig.getOS())&&(e="IOS"),"Conch-android"==t&&(e="Android")),e=window.Navigator&&window.Location&&window.History?"H5":e}static Time_GetNowDayRemaining(){var e=A.SystemTime;return this.Time_SetTimeTransition(e)}static Time_SetTimeTransition(e){let t=new Date;return t.setTime(e),{day:t.getDay(),hour:t.getHours(),minute:t.getMinutes(),second:t.getSeconds()}}SetFairyGui_List_Opaque(e){e.opaque=!1}static Time_TransitionMinute(e){var t=Math.floor(e/1e3%60);return Math.floor(e/1e3/60%60)+K.DataModule().GetLz().GetText("Minute")+" "+t+K.DataModule().GetLz().GetText("Seconds")}static Time_MinuteTransitionTime(e,t,i){return 1e3*(i+60*t+60*e*60)}static Time_TransitionHour(e,t=!1,i=!0,o=!1){e<0&&(e=0);let a=Math.floor(e/1e3%60),n=Math.floor(e/1e3/60%60),s=Math.floor(e/1e3/60/60%24),l=(o&&(s=Math.floor(e/1e3/60/60%999)),a.toString()),r=(a<10&&(l="0"+a),n.toString()),h=(n<10&&(r="0"+n),s.toString()),m=(s<10&&(h="0"+s)," "+s+K.DataModule().GetLz().GetText("Hour")+" "+n+K.DataModule().GetLz().GetText("Minute")+" "+a+K.DataModule().GetLz().GetText("Seconds"));return t&&(m=s+":"+n+":"+a+"s"),m=i?h+":"+r+":"+l:m}static Time_TransitionDay(e){return Math.floor(e/864e5)+"天 "+Math.floor(e%864e5/36e5)+"时"}static Time_Day(e){return Math.floor(e/864e5)}static Time_Refresh_Interval(e,t){return t-(e+288e5)%864e5%t}static SetSortingOrder(e){e.sortingOrder=100}static For_My(e){for(var t in e)console.log(t,e[t])}static GoldTransition(e,t=0,i=2){return null==e?"0":Y.converStr(e.toString(),i)}static ClearSave_Web(){k.IsGM&&(Laya.LocalStorage.clear(),window.location.reload())}static ClearSave_Wx(){k.IsGM&&(Laya.LocalStorage.clear(),T.WX.exitMiniProgram())}static StringReplaceRegExp(e){e.replace(new RegExp("X","g"),"替换的字符")}static StringReplace(e,t,i){return e.replace(t,i)}static StringIsOwnEnglish(e){return!!/[a-zA-Z]/.test(e)}static String_keywordValueReplace(e,t,i,o,a){let n=e.split(a),s="";for(let e=0;e<n.length;e++)-1!=n[e].indexOf(t+i)?s+=n[e].split(i)[0]+i+o+a:s+=n[e]+a;return s=s.substring(0,s.length-1)}static EnumTransitionList(e){return Object.keys(e)}static PrioritySetShow(){if(c.nowPriorityIndex++,c.PriorityShowList.length<1||c.nowPriorityIndex>=c.PriorityShowList.length)c.PriorityShowList=[];else{let e=c.PriorityShowList[c.nowPriorityIndex];e.ishow?null!=e.succeedCall&&e.succeedCall.call(this):(null!=e.failCall&&e.failCall.call(this),c.PrioritySetShow())}}static PrioritySetAdd(e){function t(e,t){return t.priorityValue-e.priorityValue}c.nowPriorityIndex=-1;let i=e;i.sort(t),c.PriorityShowList=i.sort(t)}static String_StartAndEnd_Lst(e,t,i){let o=e,a=[],n=5e3;for(;-1!=o.indexOf(t)||n<0;){n--;var s=o.substring(o.indexOf(t),o.indexOf(i)+1);a.push(s),o=o.substring(o.indexOf(i)+1,o.length)}return a}static QQminiGame_IsShield(e){return e&&"qq"==e.AppPlatform?(console.log("返回是开放手Q接口"),!0):(console.log("返回不使用放手Q接口"),!1)}static QQminiGame_ChannelData(e){let t="";return-1!=e.indexOf("boodo")?t="波动":-1!=e.indexOf("bdxq")?t="波动app":2<e.length&&"kd"==e.substring(0,2)||-1!=e.indexOf("kandian")?t="看点":-1!=e.indexOf("lmx")?t="厘米秀":-1!=e.indexOf("lover")?t="情侣空间":-1!=e.indexOf("pupu")?t="PUPU阅读":-1!=e.indexOf("qqd")?t="黄钻":3<e.length&&"qqm"==e.substring(0,3)?t="会员":3<e.length&&"qqw"==e.substring(0,3)?t="QQ钱包":"kl_k"!=e&&"Ptu"!=e&&"sy_l"!=e||(t="天天P图"),console.log("返回渠道",t),t}static PrioritySetData(e,t,i=null,o=null){return{priorityValue:e,ishow:t,succeedCall:i,failCall:o}}static Ad_UpdeatUp(e,t=6e-4){this.Ad_UpdeatUp_Speed=t,this.Ad_UpdeatUp_isNowY?(e.scrollPane.percY+=this.Ad_UpdeatUp_Speed,1<=e.scrollPane.percY&&(this.Ad_UpdeatUp_isNowY=!1)):(e.scrollPane.percY-=this.Ad_UpdeatUp_Speed,e.scrollPane.percY<=0&&(this.Ad_UpdeatUp_isNowY=!0))}static Ad_UpdeatLeft(e,t=6e-4){this.Ad_UpdeatUp_SpeedX=t,this.Ad_UpdeatUp_isNowX?(e.scrollPane.percX+=this.Ad_UpdeatUp_SpeedX,1<=e.scrollPane.percX&&(this.Ad_UpdeatUp_isNowX=!1)):(e.scrollPane.percX-=this.Ad_UpdeatUp_SpeedX,e.scrollPane.percX<=0&&(this.Ad_UpdeatUp_isNowX=!0))}}),f=c,u=(f.Time_Week=6048e5,f.Time_OneDay=864e5,f.timeData=new Date,f.PriorityShowList=[],f.nowPriorityIndex=-1,f.Ad_UpdeatUp_isNowY=!1,f.Ad_UpdeatUp_Speed=6e-4,f.Ad_UpdeatUp_isNowX=!1,f.Ad_UpdeatUp_SpeedX=6e-4,class{constructor(){this.ModuleName="Base",this.isInitOver=!1}Init(){}InitOver(){console.warn(this.ModuleName+"_初始化完毕"),this.isInitOver=!0}}),p=Laya.Event,_=Laya.Loader,I=Laya.Handler,Q=class extends u{constructor(){super(...arguments),this.ModuleName="资源管理模块"}Init(){Q.Instance=this,super.Init(),this.InitOver()}StartLoad(t,e=null,i=null,o=null,a=null,n="Default"){let s=null,l=null,r=null;null!=e&&(null!=i&&(s=I.create(e,i)),null!=o&&(l=I.create(e,o,null,!1)),null!=a&&(r=I.create(e,a))),Laya.loader.offAll(null);for(let e=0;e<t.length;e++)Laya.loader.setGroup(t[e].url,n);Laya.loader.create(t,s,l),null!=r&&Laya.loader.on(p.ERROR,e,a)}SynLoad(e,t=null,i=null,o=null,a=null){let n=null,s=null,l=null;null!=t&&(null!=i&&(n=I.create(t,i)),null!=o&&(s=I.create(t,o,null,!1)),null!=a&&(l=I.create(t,a))),Laya.loader.create(e,n,s),null!=l&&Laya.loader.on(p.ERROR,t,a)}Clear(){Laya.loader.offAll()}GetLoader(){return _}GetJson(e){return _.getRes(e)}GetImage(e){return _.getRes(e)}GetSound(e){return _.getRes(e)}GetAtlas(e){return _.getAtlas(e)}Get3DRes(e){return _.getRes(e)}GetTex2d(e){return _.getRes(e)}GetPrefab(e){let t=new Laya.Prefab;return t.json=_.getRes(e).json,t}},J=class{constructor(){this.sortShowUIList=[],this.uis=[]}static Instance(){return J.instance||(J.instance=new J),J.instance}AddItem(e){this.uis.push(e)}UI_Load(t){for(let e=0;e<this.uis.length;e++)this.uis[e].uiName==t&&this.uis[e].Load()}UI_UnLoad(t){for(let e=0;e<this.uis.length;e++)this.uis[e].uiName==t&&this.uis[e].UnLoad()}UI_Show(t){for(let e=0;e<this.uis.length;e++)this.uis[e].uiName==t&&this.uis[e].Show()}UI_Hide(t){for(let e=0;e<this.uis.length;e++)this.uis[e].uiName==t&&this.uis[e].Hide()}UI_ALLHide(){for(let e=0;e<this.uis.length;e++)this.uis[e].Hide()}GetUI(t){for(let e=0;e<this.uis.length;e++)if(this.uis[e].uiName==t)return this.uis[e]}CreatUIList(e){this.uis=[],this.GetSubList(e),this.uis=this.uis.reverse();for(let e=0;e<this.uis.length;e++)this.uis[e].order=e}GetSubList(t){for(let e=0;e<t.subUIs.length;e++)this.GetSubList(t.subUIs[e]),this.uis.push(t.subUIs[e])}GetNowTopUIName(){var e=this.GetNowTopUI();return null!=e?e.uiName:""}GetNowTopUI(){for(let e=0;e<this.uis.length;e++)if(this.uis[e].isShow&&this.uis[e].jointOrder)return this.uis[e];return null}AddSortFun(e,t,i){let o=new X;o.byUIName=e,o.target=t,o.fun=i,this.sortShowUIList.push(o)}Update(){if(0<this.sortShowUIList.length){let e=this.GetNowTopUIName(),t=this.sortShowUIList[0];e==t.byUIName&&(t.fun.call(t.target),this.sortShowUIList.shift())}}},X=class{},$=class extends Laya.Script{constructor(){super(...arguments),this.subUIs=[],this.uiName="",this.jointOrder=!0,this.isShow=!1,this.order=0}onAwake(){this.InitSubUI()}AddSubUI(e){let t=e.owner;this.owner.addChild(e.owner),t.top=0,t.bottom=0,t.left=0,t.right=0,t.mouseEnabled=!0,t.mouseThrough=!0,this.subUIs.push(e)}CreatView(e){e=Q.Instance.GetPrefab(e);return null==e?null:this.CreatViewByPrefab(e)}CreatViewByPrefab(e){e=e.create();return this.owner.addChild(e),e}CreatFGUIView(e,t){let i=fairygui.UIPackage.createObject(e,t);return fairygui.GRoot.inst.addChild(i),i.sortingOrder=1e4-this.order,i.setSize(fairygui.GRoot.inst.width,fairygui.GRoot.inst.height),i}CreatFGUIViewByView(e){return fairygui.GRoot.inst.addChild(e),e.sortingOrder=1e4-this.order,e.setSize(fairygui.GRoot.inst.width,fairygui.GRoot.inst.height),e}ShowUI(e){J.Instance().UI_Show(e)}HideUI(e){J.Instance().UI_Hide(e)}LoadUI(e){J.Instance().UI_Load(e)}UnLoadUI(e){J.Instance().UI_UnLoad(e)}InitSubUI(){}Show(){this.isShow=!0}Hide(){this.isShow=!1}SetImageFillAmount(e,t){.01<=Math.abs(e.fillAmount-t)&&(e.fillAmount=t)}},ee=class{constructor(){this.userID="",this.userIcon="",this.userName="",this.userSex="",this.userBirthday="",this.userphoneNum="",this.userlocation="",this.brand="未知",this.model="",this.pixelRatio=1,this.screenWidth=540,this.screenHeight=960,this.windowWidth=540,this.windowHeight=960,this.language="",this.coreVersion="",this.system="",this.platform="",this.screenRatio=1.78,this.appName="Douyin"}},te=class{constructor(){this.platformData=new ee,this.isInRecording=!1,this.shareOpenId="",this.shareId=""}Init(){}GetChanleId(){return""}LoadConfig(){}ShowRightCreateCustomAd(){}HideRightCreateCustomAd(){}ShowLeftCreateCustomAd(){}HideLeftCreateCustomAd(){}LoadRightCreateCustomAd(){}LoadLeftCreateCustomAd(){}OnShow(e){}OnHide(){}GetSystemInfo(){}GetSystem(){return""}GetAuthorize(){}GetUserData(e,t){}Login(e,t,i){}BannerAdShow(e=0,t,i){}BannerAd_up_Show(e=0,t){}BannerAdHide(){}WatchVideo(e,t,i=0,o){}ShareBase(e,t){}CustomerService(){}VibrateShort(){}VibrateLong(){}NavigateToMiniProgram(e,t,i,o){}ShowInterstitialAd(){}ShowFlotIconAd(e,t){}HideFlotIconAd(){}StartRecord(){}EndRecord(){}ShareVideo(e,t,i){}IsHaveVideoShare(){return!1}recordScreenStart(){}recordScreenEnd(){}shareRecordVideo(e,t){}},ie=class{};ie.GetOpenID="1 myurl://game.17tcw.com:6001/wechat/qsll?js_code=1",ie.SDKLogin="1 myurl://game.17tcw.com/qsll/login/reqLogin1",ie.statisticsEvent="1 myurl://log.17tcw.com/collect/pushEvents1",ie.GetConfig="1 myurl://game.17tcw.com/qsll/lobby/reqConfig1",ie.reqSaveUser="1 myurl://game.17tcw.com/qsll/gameV2/reqSaveUser1",ie.reqGetUser="1 myurl://game.17tcw.com/qsll/game/reqGetUser1",ie.reqFenxiang="1 myurl://game.17tcw.com:5267/xyx/basic/reqFenxiang1",ie.reqBeginShare="1 myurl://game.17tcw.com:5201/xyx/statis/reqBeginShare1",ie.clickShare="1 myurl://game.17tcw.com/qsll/game/clickShare1",ie.ReqShareStrategy="1 myurl://game.17tcw.com/qsll/game/getShareStrategy1",ie.gameConfig="1 myurl://game.17tcw.com/qsll/config/gameConfig1",ie.RedirectList="1 myurl://game.17tcw.com/qsll/redirect/list1",ie.RedirectConfirm="1 myurl://game.17tcw.com/qsll/redirect/confirm1",ie.ReqSaveRedirect="1 myurl://game.17tcw.com/xyx/statis/reqSaveRedirect1";var oe,ae=class{constructor(){this.hexcase=0,this.b64pad="",this.chrsz=8}static get instance(){return null==ae._instance&&(ae._instance=new ae),ae._instance}static Hex(e){return ae.instance.hex_md5(e)}hex_md5(e){return this.binl2hex(this.core_md5(this.str2binl(e),e.length*this.chrsz))}b64_md5(e){return this.binl2b64(this.core_md5(this.str2binl(e),e.length*this.chrsz))}str_md5(e){return this.binl2str(this.core_md5(this.str2binl(e),e.length*this.chrsz))}hex_hmac_md5(e,t){return this.binl2hex(this.core_hmac_md5(e,t))}b64_hmac_md5(e,t){return this.binl2b64(this.core_hmac_md5(e,t))}str_hmac_md5(e,t){return this.binl2str(this.core_hmac_md5(e,t))}md5_vm_test(){return"900150983cd24fb0d6963f7d28e17f72"==this.hex_md5("abc")}core_md5(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var i=1732584193,o=-271733879,a=-1732584194,n=271733878,s=0;s<e.length;s+=16){var l=i,r=o,h=a,m=n,i=this.md5_ff(i,o,a,n,e[s+0],7,-680876936),n=this.md5_ff(n,i,o,a,e[s+1],12,-389564586),a=this.md5_ff(a,n,i,o,e[s+2],17,606105819),o=this.md5_ff(o,a,n,i,e[s+3],22,-1044525330);i=this.md5_ff(i,o,a,n,e[s+4],7,-176418897),n=this.md5_ff(n,i,o,a,e[s+5],12,1200080426),a=this.md5_ff(a,n,i,o,e[s+6],17,-1473231341),o=this.md5_ff(o,a,n,i,e[s+7],22,-45705983),i=this.md5_ff(i,o,a,n,e[s+8],7,1770035416),n=this.md5_ff(n,i,o,a,e[s+9],12,-1958414417),a=this.md5_ff(a,n,i,o,e[s+10],17,-42063),o=this.md5_ff(o,a,n,i,e[s+11],22,-1990404162),i=this.md5_ff(i,o,a,n,e[s+12],7,1804603682),n=this.md5_ff(n,i,o,a,e[s+13],12,-40341101),a=this.md5_ff(a,n,i,o,e[s+14],17,-1502002290),o=this.md5_ff(o,a,n,i,e[s+15],22,1236535329),i=this.md5_gg(i,o,a,n,e[s+1],5,-165796510),n=this.md5_gg(n,i,o,a,e[s+6],9,-1069501632),a=this.md5_gg(a,n,i,o,e[s+11],14,643717713),o=this.md5_gg(o,a,n,i,e[s+0],20,-373897302),i=this.md5_gg(i,o,a,n,e[s+5],5,-701558691),n=this.md5_gg(n,i,o,a,e[s+10],9,38016083),a=this.md5_gg(a,n,i,o,e[s+15],14,-660478335),o=this.md5_gg(o,a,n,i,e[s+4],20,-405537848),i=this.md5_gg(i,o,a,n,e[s+9],5,568446438),n=this.md5_gg(n,i,o,a,e[s+14],9,-1019803690),a=this.md5_gg(a,n,i,o,e[s+3],14,-187363961),o=this.md5_gg(o,a,n,i,e[s+8],20,1163531501),i=this.md5_gg(i,o,a,n,e[s+13],5,-1444681467),n=this.md5_gg(n,i,o,a,e[s+2],9,-51403784),a=this.md5_gg(a,n,i,o,e[s+7],14,1735328473),o=this.md5_gg(o,a,n,i,e[s+12],20,-1926607734),i=this.md5_hh(i,o,a,n,e[s+5],4,-378558),n=this.md5_hh(n,i,o,a,e[s+8],11,-2022574463),a=this.md5_hh(a,n,i,o,e[s+11],16,1839030562),o=this.md5_hh(o,a,n,i,e[s+14],23,-35309556),i=this.md5_hh(i,o,a,n,e[s+1],4,-1530992060),n=this.md5_hh(n,i,o,a,e[s+4],11,1272893353),a=this.md5_hh(a,n,i,o,e[s+7],16,-155497632),o=this.md5_hh(o,a,n,i,e[s+10],23,-1094730640),i=this.md5_hh(i,o,a,n,e[s+13],4,681279174),n=this.md5_hh(n,i,o,a,e[s+0],11,-358537222),a=this.md5_hh(a,n,i,o,e[s+3],16,-722521979),o=this.md5_hh(o,a,n,i,e[s+6],23,76029189),i=this.md5_hh(i,o,a,n,e[s+9],4,-640364487),n=this.md5_hh(n,i,o,a,e[s+12],11,-421815835),a=this.md5_hh(a,n,i,o,e[s+15],16,530742520),o=this.md5_hh(o,a,n,i,e[s+2],23,-995338651),i=this.md5_ii(i,o,a,n,e[s+0],6,-198630844),n=this.md5_ii(n,i,o,a,e[s+7],10,1126891415),a=this.md5_ii(a,n,i,o,e[s+14],15,-1416354905),o=this.md5_ii(o,a,n,i,e[s+5],21,-57434055),i=this.md5_ii(i,o,a,n,e[s+12],6,1700485571),n=this.md5_ii(n,i,o,a,e[s+3],10,-1894986606),a=this.md5_ii(a,n,i,o,e[s+10],15,-1051523),o=this.md5_ii(o,a,n,i,e[s+1],21,-2054922799),i=this.md5_ii(i,o,a,n,e[s+8],6,1873313359),n=this.md5_ii(n,i,o,a,e[s+15],10,-30611744),a=this.md5_ii(a,n,i,o,e[s+6],15,-1560198380),o=this.md5_ii(o,a,n,i,e[s+13],21,1309151649),i=this.md5_ii(i,o,a,n,e[s+4],6,-145523070),n=this.md5_ii(n,i,o,a,e[s+11],10,-1120210379),a=this.md5_ii(a,n,i,o,e[s+2],15,718787259),o=this.md5_ii(o,a,n,i,e[s+9],21,-343485551),i=this.safe_add(i,l),o=this.safe_add(o,r),a=this.safe_add(a,h),n=this.safe_add(n,m)}return Array(i,o,a,n)}md5_cmn(e,t,i,o,a,n){return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(t,e),this.safe_add(o,n)),a),i)}md5_ff(e,t,i,o,a,n,s){return this.md5_cmn(t&i|~t&o,e,t,a,n,s)}md5_gg(e,t,i,o,a,n,s){return this.md5_cmn(t&o|i&~o,e,t,a,n,s)}md5_hh(e,t,i,o,a,n,s){return this.md5_cmn(t^i^o,e,t,a,n,s)}md5_ii(e,t,i,o,a,n,s){return this.md5_cmn(i^(t|~o),e,t,a,n,s)}core_hmac_md5(e,t){var i=this.str2binl(e);16<i.length&&(i=this.core_md5(i,e.length*this.chrsz));for(var o=Array(16),a=Array(16),n=0;n<16;n++)o[n]=909522486^i[n],a[n]=1549556828^i[n];e=this.core_md5(o.concat(this.str2binl(t)),512+t.length*this.chrsz);return this.core_md5(a.concat(e),640)}safe_add(e,t){var i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}bit_rol(e,t){return e<<t|e>>>32-t}str2binl(e){for(var t=Array(),i=(1<<this.chrsz)-1,o=0;o<e.length*this.chrsz;o+=this.chrsz)t[o>>5]|=(e.charCodeAt(o/this.chrsz)&i)<<o%32;return t}binl2str(e){for(var t="",i=(1<<this.chrsz)-1,o=0;o<32*e.length;o+=this.chrsz)t+=String.fromCharCode(e[o>>5]>>>o%32&i);return t}binl2hex(e){for(var t=this.hexcase?"0123456789ABCDEF":"0123456789abcdef",i="",o=0;o<4*e.length;o++)i+=t.charAt(e[o>>2]>>o%4*8+4&15)+t.charAt(e[o>>2]>>o%4*8&15);return i}binl2b64(e){for(var t="",i=0;i<4*e.length;i+=3)for(var o=(e[i>>2]>>i%4*8&255)<<16|(e[i+1>>2]>>(i+1)%4*8&255)<<8|e[i+2>>2]>>(i+2)%4*8&255,a=0;a<4;a++)8*i+6*a>32*e.length?t+=this.b64pad:t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(o>>6*(3-a)&63);return t}},ne=class{static get _Deflate(){return Zlib.Deflate}static get _Inflate(){return Zlib.Inflate}static get CompressionType_Deflate_None(){return ne._Deflate.CompressionType.NONE}static get CompressionType_Deflate_Fixed(){return ne._Deflate.CompressionType.FIXED}static get CompressionType_Deflate_DYNAMIC(){return ne._Deflate.CompressionType.DYNAMIC}static Deflate(e,t=ne._Deflate.CompressionType.DYNAMIC){return new ne._Deflate(e,{compressionType:t}).compress()}static Inflate(e){return new ne._Inflate(e).decompress()}static StringToUint8Array(e){for(var t=[],i=0,o=e.length;i<o;++i)t.push(e.charCodeAt(i));return new Uint8Array(t)}static Uint8ArrayToString(e){for(var t="",i=0;i<e.length;i++)t+=String.fromCharCode(e[i]);return t}},se=((G=oe=oe||{}).Log="Log",G.Warn="Warn",G.Error="Error",0,class extends u{constructor(){super(...arguments),this.ModuleName="日志模块",this.userID="Unknow",this.os="Unknow",this.device="Unknow",this.platformVersion="Unknow",this.platformSDKVersion="Unknow",this.enable=!1,this.logReportTsDict={},this.logContextList=[],this.logStoreNameList=[],this.nowLogStoreChange=!1,this.Config_TagFilterType=1,this.Config_TagFilterList=["*"],this.Config_UserFilterList=["*"],this.Config_UploadContextMaxLenght=200,this.Config_CollectContextMaxLenght=1e3,this.Config_LogMaxSize=20480,this.Config_LogStoreMaxCount=20}Init(){var e,t,i;if(se.Instance=this,super.Init(),this.InitOver(),k.LogModuleSW&&(this.InitPlatform(),k.LogModule_LoadLogHubConfig&&this.GetConfig(!0)),this.enable&&(console.log=(i=console.log,function(){if(k.LogModule_ShowConsole)try{i.call(console,...arguments)}catch(e){console.warn("console.log error",e)}if(k.LogModule_CollectConsoleContext){let e="[Object]";try{e=JSON.stringify(arguments)}catch(e){console.warn("CollectConsoleContextError",e)}se.Instance.Log(e.slice(0,se.Instance.Config_LogMaxSize))}}),console.warn=(t=console.warn,function(){if(k.LogModule_ShowConsole)try{t.call(console,...arguments)}catch(e){console.warn("console.warn error",e)}if(k.LogModule_CollectConsoleContext){let e="[Object]";try{e=JSON.stringify(arguments)}catch(e){console.warn("CollectConsoleContextError",e)}se.Instance.Warn(e.slice(0,se.Instance.Config_LogMaxSize))}}),console.error=(e=console.error,function(){if(k.LogModule_ShowConsole)try{e.call(console,...arguments)}catch(e){console.warn("console.error error",e)}if(k.LogModule_CollectConsoleContext){let e="[Object]";try{e=JSON.stringify(arguments)}catch(e){console.warn("CollectConsoleContextError",e)}se.Instance.Error(e.slice(0,se.Instance.Config_LogMaxSize))}})),k.LogModule_Test){let e=this;setTimeout(()=>{e.Test1()},3e3),setTimeout(()=>{e.Test2()},5e3)}if(this.nowStoreName=this.GetNowTS().toString(),this.logStoreNameList=[this.nowStoreName],k.LogModule_LocalStorage)try{var o=JSON.parse(Laya.LocalStorage.getItem(se.localStorageName_Main));if(o&&(this.logStoreNameList=this.logStoreNameList.concat(o)),this.logStoreNameList.length>this.Config_LogStoreMaxCount&&Laya.LocalStorage.removeItem(se.localStorageName_StorePrefix+this.logStoreNameList.pop()),Laya.LocalStorage.setItem(se.localStorageName_Main,JSON.stringify(this.logStoreNameList)),0<k.LogModule_LocalStorage_AutoSave){let e=this;setInterval(function(){e.onLocalStorageUpdate()},k.LogModule_LocalStorage_AutoSave)}}catch(e){console.warn("Log本地存储初始化错误",e)}}onLocalStorageUpdate(){try{this.nowLogStoreChange&&(Laya.LocalStorage.setItem(se.localStorageName_StorePrefix+this.nowStoreName,JSON.stringify(this.GetContextList(this.nowStoreName))),this.nowLogStoreChange=!1)}catch(e){console.warn("Log本地存储更新错误",e)}}InitPlatform(){let n=this;switch(k.Platform){case T.WECHAT:if(!k.IsInWebTest){this.enable=!0,T.WX.onError(function(e){console.error(e),n.Error(n.ErrorToStr(e),"Uncaught",!0)});break}this.enable=!0,window.onerror=function(e,t,i,o,a){n.Error(n.ErrorToStr(a),"Uncaught",!0)};case T.H5:this.enable=!0,window.onerror=function(e,t,i,o,a){n.Error(n.ErrorToStr(a),"Uncaught",!0)};break;case T.QQ:this.enable=!0,T.qq.onError(function(e){console.error(e),n.Error(n.ErrorToStr(e),"Uncaught",!0)});break;case T.TT:this.enable=!0,T.Tt.onError&&T.Tt.onError(function(e){n.Error(e,"Uncaught",!0)});break;case T.OPPO:console.log("InitPlatform :",T.OPPO),this.enable=!0,T.Oppo.onError&&T.Oppo.onError(function(e){console.error(e),n.Error(n.ErrorToStr(e),"Uncaught",!0)});break;case T.ANDROID:console.log("InitPlatform :",T.ANDROID),this.enable=!0,window.onerror=function(e,t,i,o,a){n.Error(n.ErrorToStr(a),"Uncaught",!0)};break;case T.IOS:console.log("InitPlatform :",T.IOS),this.enable=!0,window.onerror=function(e,t,i,o,a){n.Error(n.ErrorToStr(a),"Uncaught",!0)};break;case T.KUAISHOU:console.log("InitPlatform :",T.KUAISHOU),this.enable=!0,window.onerror=function(e,t,i,o,a){n.Error(n.ErrorToStr(a),"Uncaught",!0)}}}SetSystemInfo(e){switch(k.Platform){case T.WECHAT:this.os=e.platform||"Unknow",this.device=e.model||"Unknow",this.platformVersion=e.version||"Unknow",this.platformSDKVersion=e.SDKVersion||"Unknow";break;case T.ANDROID:if(e)try{e=JSON.parse(e),this.os=e.os||"Unknow",this.device=e.phonemodel||"Unknow",this.platformVersion=e.osversion||"Unknow"}catch(e){console.warn("LogModule SetSystemInfo Error",e)}}}SetUserID(e){this.userID=""+e}Log(e,t="Default",i=!1){this.AddContext("[Log]"+e),i&&this.Report(oe.Log,e,t)}Warn(e,t="Default",i=!1){this.AddContext("[Warn]"+e),i&&this.Report(oe.Warn,e,t)}Error(e,t="Default",i=!1){this.AddContext("[Error]"+e),i&&this.Report(oe.Error,e,t)}AddContext(e){for(this.logContextList.push("("+se.GetNowFormatDateTime()+")"+e);this.logContextList.length>this.Config_CollectContextMaxLenght;)this.logContextList.splice(0,1);this.nowLogStoreChange=!0}GetContextList(t){if(t==this.nowStoreName)return this.logContextList;{let e=JSON.parse(Laya.LocalStorage.getItem(se.localStorageName_StorePrefix+t));return e=e||[]}}ErrorToStr(e){return e.stack||e.message}static GetNowFormatDateTime(e=new Date){var t=e.getFullYear(),i=e.getMonth()+1,i=i<10?"0"+i:i,o=e.getDate(),o=o<10?"0"+o:o,a=e.getHours(),a=a<10?"0"+a:a,n=e.getMinutes(),n=n<10?"0"+n:n,e=e.getSeconds();return t+"-"+i+"-"+o+" "+a+":"+n+":"+(e<10?"0"+e:e)}GetConfig(o){if(this.enable){let e=k.LogModule_LogHUbConfigPath+(o?k.v:"Common")+".json",t=new Laya.HttpRequest,i=this;t.on(Laya.Event.COMPLETE,this,function(e){console.log("获取LogConfig成功!",e);try{null!=e.T&&(i.Config_TagFilterType=e.T?1:0),null!=e.L&&(i.Config_TagFilterList=e.L?e.L.split("|"):[]),null!=e.U&&(i.Config_UserFilterList=e.U?e.U.split("|"):[]),null!=e.C&&(i.Config_UploadContextMaxLenght=e.C||200),null!=e.M&&(i.Config_CollectContextMaxLenght=e.M||1e3),null!=e.S&&(i.Config_LogMaxSize=e.S||20480),null!=e.B&&(i.Config_LogStoreMaxCount=e.B||20)}catch(e){console.warn(e)}}),t.on(Laya.Event.ERROR,this,function(e){console.log("获取LogConfig失败!",e),o&&this.GetConfig(!1)}),console.log("获取LogConfig",e),t.send(e,JSON.stringify(""),"get","json")}}Report(e,t,i){if(this.enable&&k.LogModule_AutoReport){if(0==this.Config_TagFilterType){if(-1<this.Config_TagFilterList.indexOf("*")||-1<this.Config_TagFilterList.indexOf(i))return void console.log("Tag在黑名单中",i,this.Config_TagFilterList)}else if(-1==this.Config_TagFilterList.indexOf("*")&&-1==this.Config_TagFilterList.indexOf(i))return void console.log("Tag在白名单外",i,this.Config_TagFilterList);-1!=this.Config_UserFilterList.indexOf("*")||-1!=this.Config_UserFilterList.indexOf(this.userID)?(k.LogModule_LocalStorage&&(this.nowLogStoreChange=!0,this.onLocalStorageUpdate()),this.UploadLog(e,t,i)):console.log("User在白名单外",this.userID,this.Config_UserFilterList)}}UploadLog(m,d,c,u=this.nowStoreName,p=2,g=null,f=null){try{p--,d=""+d;let r=k.LogModule_LogHubServerPath,h=ae.Hex(d),e=this.logReportTsDict[h];null==e&&(e=0);var _=this.GetNowTS();if(_>e+se.sameLogReportCDMsTime){this.logReportTsDict[h]=_;let e={__topic__:"Log",__source__:this.userID,__logs__:[{UID:this.userID,OS:this.os,Dev:this.device,CV:k.v,PV:this.platformVersion,PSV:this.platformSDKVersion,Type:m,MD5:h,Data:d,Tags:c,Context:JSON.stringify(this.GetContextList(u).concat().reverse().slice(0,this.Config_UploadContextMaxLenght)),TS:""+_}],__tags__:{V:""+k.LogModule_LogHubVersion}},t=function(){0<p&&(i.logReportTsDict[h]=0,i.UploadLog(m,d,c,u,p,g,f))},i=this,o=new Laya.HttpRequest,a=!1;o.on(Laya.Event.COMPLETE,this,function(e){console.log("上报Log成功!",e),a||g&&g()}),o.on(Laya.Event.ERROR,this,function(e){a=!0,t(),f&&f(JSON.stringify(e))});let n,s=JSON.stringify(e),l=[];if(l.push("x-log-apiversion","0.6.0"),l.push("x-log-bodyrawsize",""+this.getStrByteLen(s)),k.LogModule_ReportCompress&&0<p){l.push("Content-Type","application/octet-stream"),l.push("x-log-compresstype","deflate");try{n=ne.Deflate(ne.StringToUint8Array(this.ch2Unicode(s)))}catch(m){return console.warn("压缩出错",m),void t()}}else l.push("Content-Type","application/json"),n=s;o.send(r,n,"post","text",l)}}catch(m){console.warn(m)}}ch2Unicode(e){if(e){for(var t="",i=0;i<e.length;i++){var o=e.charAt(i);/[\u4e00-\u9fa5]/.test(o)?t+="\\u"+o.charCodeAt(0).toString(16):t+=o}return t}}getStrByteLen(e){for(var t,i=0,o=e.length,a=0;a<o;a++)i+=0<=(t=e.charCodeAt(a))&&t<=128?1:2;return i}Test1(){window.LogModule.Test1()}Test2(){try{window.LogModule.Test2()}catch(e){this.Error(this.ErrorToStr(e))}}GetNowTS(){return Date.now()}}),le=se,re=(le.localStorageName_Main="LogHub_"+k.ProjectCode,le.localStorageName_StorePrefix="LogHub_"+k.ProjectCode+"_Store_",le.sameLogReportCDMsTime=5e3,le.sdkVersion="1.0.6",class extends u{constructor(){super(...arguments),this.ModuleName="同步存档模块",this.enabled=!1,this.userID="",this.lastSyncArchiveMD5=""}Init(){re.Instance=this,super.Init(),this.InitOver(),this.InitPlatform(),this.InitConfig();let e=this;k.SyncArchiveModule_Test&&setTimeout(()=>{e.Test()},2e3)}InitPlatform(){switch(k.Platform){case T.WECHAT:this.enabled=!0;case T.H5:case T.OPPO:case T.VIVO:case T.TT:case T.KUAISHOU:case T.QQ:case T.IOS:case T.ANDROID:this.enabled=!0;break;default:console.warn("由于平台原因,同步存档功能未启用!")}}InitConfig(){}SetUserID(e){this.userID=""+e}UploadArchive(e,n,s,l=!1){if(!this.enabled)return console.warn("[取消上传存档]未启用"),void(s&&s("[取消上传存档]未启用"));if(!this.userID)return console.warn("[取消上传存档]UserID为空"),void(s&&s("[取消上传存档]UserID为空"));try{let i=l?k.SyncArchiveModule_SaveImmediateServerPath:k.SyncArchiveModule_UploadServerPath,o=JSON.stringify(e),a=ae.Hex(o);if(this.lastSyncArchiveMD5!=a){var r=l?{P:k.DataProjectName,U:this.userID,D:o,V:k.v}:{__topic__:"Archive",__source__:this.userID,__logs__:[{U:this.userID,D:o,V:k.v,T:this.GetNowTS().toString()}],__tags__:{V:re.sdkVersion}};let e=new Laya.HttpRequest;e.on(Laya.Event.COMPLETE,this,function(e){this.lastSyncArchiveMD5=a,console.log("上传存档成功!",e),n&&n()}),e.on(Laya.Event.ERROR,this,function(e){console.log("上传存档失败!",e),s&&s(e),le.Instance.Error(JSON.stringify(e),"上传存档失败！",!0)});var h=JSON.stringify(r);k.isTestLog&&console.log("上传存档",i,h);let t=[];t.push("Content-Type","application/json"),l?e.send(i,h,"post","json",t):(t.push("x-log-apiversion","0.6.0"),t.push("x-log-bodyrawsize",""+this.getStrByteLen(h)),e.send(i,h,"post","text",t))}}catch(e){console.error(e)}}getStrByteLen(e){for(var t,i=0,o=e.length,a=0;a<o;a++)i+=0<=(t=e.charCodeAt(a))&&t<=128?1:2;return i}DownloadArchive(t,i){if(!this.enabled)return console.warn("[取消下载存档]未启用"),void(i&&i("[取消下载存档]未启用"));if(!this.userID)return console.warn("[取消下载存档]UserID为空",this.userID),void(i&&i("[取消下载存档]UserID为空",this.userID));try{var o=k.SyncArchiveModule_DownloadServerPath,a={P:k.DataProjectName,U:this.userID,V:k.v};console.log("请求存储",a);let e=new Laya.HttpRequest;e.on(Laya.Event.COMPLETE,this,function(e){e.status?(k.isTestLog&&console.log("下载存档成功!",e.data),t&&t(e.data)):(console.error("下载存档出错!",e.data),i&&i(e.data),le.Instance.Error(JSON.stringify(e.data),"下载存档返回失败！",!0))}),e.on(Laya.Event.ERROR,this,function(e){console.error("下载存档失败!",e),i&&i(e),le.Instance.Error(JSON.stringify(e),"下载存档出错！",!0)}),k.isTestLog&&console.log("下载存档",o,JSON.stringify(a)),e.send(o,JSON.stringify(a),"post","json",["Content-Type","application/json"])}catch(t){console.error(t)}}DeleteArchive(o,a){if(!this.enabled)return console.warn("[取消删除存档]未启用"),void(a&&a("[取消删除存档]未启用"));if(!this.userID)return console.warn("[取消删除存档]UserID为空"),void(a&&a("[取消删除存档]UserID为空"));try{let e=k.SyncArchiveModule_DeleteServerPath,t={P:k.DataProjectName,U:this.userID,V:k.v},i=new Laya.HttpRequest;i.on(Laya.Event.COMPLETE,this,function(e){e.status?(console.log("删除存档成功!",e.data),o&&o(e.data)):(console.error("删除存档出错!",e.data),a&&a(e.data))}),i.on(Laya.Event.ERROR,this,function(e){console.error("删除存档失败!",e),a&&a(e)}),console.log("删除存档",e,JSON.stringify(t)),i.send(e,JSON.stringify(t),"post","json",["Content-Type","application/json"])}catch(o){console.error(o)}}Test(){this.SetUserID("Test1"),this.UploadArchive(K.DataModule().GetUser().GetData(),function(){console.warn("上传用户存档成功")},function(e){console.warn("上传用户存档出错",e)}),this.DownloadArchive(function(e){0<e.length?console.log("读取存档成功!",e):console.log("新用户，服务器上无存档")},function(e){console.warn("下载用户存档出错",e)})}GetNowTS(){return Date.now()}}),he=re,me=(he.sdkVersion="1.0.3",class{static User_Login(e,t,i,o=null,a=!0){K.NetModule().Request("default",ie.GetOpenID+e,t,i,o,a,"get")}static User_Redirectlist(e,t,i=null,o=!0){K.NetModule().Request(e,ie.RedirectList,e,t,i,o)}static User_RedirectConfirm(e,t,i=null,o=!0){K.NetModule().Request(e,ie.RedirectConfirm,e,t,i,o)}static User_ReqSaveRedirect(e,t,i=null,o=!0){K.NetModule().Request(e,ie.ReqSaveRedirect,e,t,i,o)}static User_ReqLogin(e,t,i=null,o=!0){var a=W.openId,n=CC.Instance.GetChanleId(),s=K.PlatformModule().ShareID();K.NetModule().Request({openid:a,channel:n,nickname:"",headicon:"",sourceOpenid:s},ie.SDKLogin,e,t,i,o)}static User_statisticsEvent(e,t,i,o,a,n,s=null,l=!0){let r=W.openId,h=CC.Instance.GetChanleId(),m=t;e=[{eventId:e,detail:m=""!=o?'{"'+o+'":"'+t+'"}':m,extraNum:i}];K.NetModule().Request({appid:k.appid,uuid:r,channel:h,list:e},ie.statisticsEvent,a,n,s,l)}static User_ReqConfig(e,t,i,o=null,a=!0){K.NetModule().Request({param:e},ie.GetConfig,t,i,o,a)}static User_reqSaveUser(e,t,i=null,o=!0){if(console.log("开始上报存储",jC.GetIsLoadSave(),W.openId,W.isSuperAccount),!W.isSuperAccount&&!jC.GetIsLoadSave()&&""!=W.openId)if(jC.GetIsIoGamesSavePlatform()){let e=!1;k.Platform==T.QQ&&(e=!0),he.Instance.UploadArchive(K.DataModule().GetUser().GetData(),function(){console.warn("上传用户存档成功")},function(e){console.warn("上传用户存档出错",e)},e)}else{var a=W.uuid,n=K.DataModule().GetUser().GetNowUserDataString();K.NetModule().Request({userId:a,guanqia:0,data:n},ie.reqSaveUser,e,t,i,o)}}static LoadSaveDataFun(e){if(W.loginDataEnd=!0,console.log("读取存档成功!"),0<e.length){var e=e[0].D,t=JSON.stringify(JSON.parse(e));if(null==e||""==e)return console.log("设置data_NUll",e),le.Instance.Warn("存档数据为空","存档问题",!0),void le.Instance.Log("读取成功新","读档问题",!0);le.Instance.Log("读取成功老","读档问题",!0),W.userData_saveData=t,console.log("设置存储",t)}else console.log("新用户，服务器上无存档")}static User_reqGetUser(e,t,i=null,o=!0){var a;console.log("开始读取存储",jC.GetIsLoadSave(),jC.GetIsIoGamesSavePlatform()),jC.GetIsLoadSave()&&(jC.GetIsIoGamesSavePlatform()?(console.log("开始读取sdk存储"),he.Instance.DownloadArchive(function(e){try{me.LoadSaveDataFun(e)}catch(e){le.Instance.Error(le.Instance.ErrorToStr(e),"存档问题",!0)}},function(e){console.warn("下载用户存档出错，准备开始重试"+JSON.stringify(e)),le.Instance.Log("读档失败1","读档问题",!0),he.Instance.DownloadArchive(function(e){me.LoadSaveDataFun(e)},function(e){console.warn("重试失败"+JSON.stringify(e)),le.Instance.Log("读档失败2","读档问题",!0)})})):(a=W.uuid,K.NetModule().Request({userId:a},ie.reqGetUser,e,t,i,o)))}static User_reqFenxiang(e,t,i=null,o=!0){var a=k.appid;K.NetModule().Request({Appid:a,Type:0},ie.reqFenxiang,e,t,i,o)}static User_reqBeginShare(e,t,i,o=null,a=!0){var n=W.openId,e=e.shareid,s=A.SystemTime;K.NetModule().Request({Openid:n,ShareId:e,ShareTm:s},ie.reqBeginShare,t,i,o,a)}static User_clickShare(e,t=null,i=null,o=!0){var a=W.openId,n=CC.Instance.shareOpenId,s=CC.Instance.shareId,l=CC.Instance.ShareTm;K.NetModule().Request({openid:a,sourceOpenid:n,shareId:s,shareTm:l},ie.clickShare,e,t,i,o)}static User_ReqShareStrategy(e,t,i=null,o=!0){var a={userId:W.uuid};K.NetModule().Request(a,ie.ReqShareStrategy,e,t,i,o)}static User_gameConfig(e,t,i=null,o=!0){let a=[];a.push("touch");var n={param:a};K.NetModule().Request(n,ie.gameConfig,e,t,i,o)}static User_IOG_AuthorityQuery(e,t,i=null,o=!0){var a,n="myurl://"+k.isQQurl+"sh.fcapi.data-eye.cn/IOG_Authority/Query";k.Platform==T.QQ?SC.GetSaveUserData():(W.openId=W.openId,a={ProjectID:k.ProjectID,Account:W.openId},K.NetModule().Request(a,n,e,t,i,o))}}),de=class{static Adapter(e,t){for(;e.dataVersion<t;){var i=e.dataVersion+1;(e=de.AdapterDeal(e,i)).dataVersion=i}return e}static AdapterDeal(e,t){switch(console.log("数据仓库适配处理",t),t){case 1:return de.AdapterDeal_1(e);case 2:return de.AdapterDeal_2(e);default:return console.error("未找到对应的数据仓库适配器",t),e}}static AdapterDeal_1(e){return e.logQueue=[],e}static AdapterDeal_2(e){return e.region="",e}},ce=class{constructor(e,t,i){this._cv="0.0.0",this._sv="0.0.0",this._uid="",this._sid=0,this._e="",this._ts=0,this._sn=0,this._d="",this._e=e,this._ts=ge.GetNowTS(),this._sn=++ce.SN,this.__forceFlush=t,this.__overwrite=i}ToJson(){let o={},a={},n=Object.keys(this);for(let i=0;i<n.length;i++){let e=n[i],t=this[e];-1==e.indexOf("__")&&null!=t&&"function"!=typeof t&&(-1==e.indexOf("_")?a[e]=t:o[e]=t)}return o._d=a,o}},G=ce;G.SN=0;var ue,pe=class extends u{constructor(){super(...arguments),this.ModuleName="数据上报模块",this.enabled=!1,this.isInShow=!0,this.dataHubLockFlag=!1,this.dataHubFlushCursor=-1,this.forceFlushFlag=!1,this.lastFlushTS=0,this.lastResportOnlineDurationTS=0,this.loadResStartTime={}}Init(){pe.Instance=this,super.Init(),this.InitOver(),k.DataReportModuleSW?this.InitPlatform():console.warn("数据上报功能未启用!")}InitPlatform(){if(this.lastResportOnlineDurationTS=pe.GetNowTS(),k.IsInWebTest)this.enabled=!1;else{switch(k.Platform){case T.WECHAT:this.enabled=!0,this.InitPlatform_WX();break;case T.QQ:this.enabled=!0,this.InitPlatform_QQ();break;case T.VIVO:case T.OPPO:break;case T.TT:this.InitPlatform_TT();break;case T.ANDROID:this.enabled=!0,this.InitPlatform_ANDROID();break;case T.IOS:this.InitPlatform_IOS();break;default:this.enabled=!1,console.warn("平台暂未实现")}this.enabled?this.Load():console.warn("数据上报功能由于平台原因未启用!"),console.log("开启数据统计:"+k.Platform),this.IsNative_Android()&&(k.Platform=T.ANDROID),this.IsNative_Ios()&&(k.Platform=T.IOS),Laya.timer.loop(1e3,this,function(){try{pe.Instance.Update()}catch(e){console.error(e)}})}}get nowPlatform(){let e=window.wx;return k.Platform==T.QQ?e=window.qq:k.Platform==T.WECHAT?e=window.wx:k.Platform==T.OPPO||k.Platform==T.VIVO?e=window.qg:k.Platform==T.TT&&(e=window.tt),e}InitPlatform_WX(){this.nowPlatform.onShow(()=>this.OnShow()),this.nowPlatform.onHide(()=>this.OnHide())}InitPlatform_QQ(){this.nowPlatform.onShow(()=>this.OnShow()),this.nowPlatform.onHide(()=>this.OnHide())}InitPlatform_VIVO(){this.nowPlatform.onShow(()=>this.OnShow()),this.nowPlatform.onHide(()=>this.OnHide())}InitPlatform_OPPO(){this.nowPlatform.onShow(()=>this.OnShow()),this.nowPlatform.onHide(()=>this.OnHide())}InitPlatform_TT(){this.nowPlatform.onShow(()=>this.OnShow()),this.nowPlatform.onHide(()=>this.OnHide())}InitPlatform_ANDROID(){let e=this;window.nativeCallJs_onShow_CallBack=function(){e.OnShow()},window.nativeCallJs_onHide_CallBack=function(){e.OnHide(),console.log("nativeCallJs_onHide_CallBack data")},window.onLoadVideoErr_CallBack=function(e,t){pe.Instance.Report_AD_Video_LoadFail(e,t)},window.onLoadBannerErr_CallBack=function(e,t){pe.Instance.Report_AD_Banner_LoadFail(e,t)},window.onInterstitialAdLoadErr_CallBack=function(e,t){pe.Instance.Report_AD_Interstitial_LoadFail(e,t)}}InitPlatform_IOS(){this.InitPlatform_ANDROID()}IsNative_Android(){return!!window.conchConfig&&("Conch-android"==window.conchConfig.getOS()||void 0)}IsNative_Ios(){return!!window.conchConfig&&("Conch-ios"==window.conchConfig.getOS()||void 0)}WX_InitUserInfo(a,i=3,n=null,e=null){if(this.enabled)try{if(this.datahub.openID)n&&n(this.datahub.openID);else{let t=this;if(--i<0)return void(e&&e());let o=function(e){console.error(e),Laya.timer.once(3e3,t,function(){t.WX_InitUserInfo(a,i)})};T.WX.login({success:e=>{b.Warn("Wechat登录成功",e);var e=e.code,t=k.DataReportModule_GetOpenID_WX_URL,e=JSON.stringify({appid:a,code:e});console.log("请求获取OpenID:",t,e);let i=new Laya.HttpRequest;i.on(Laya.Event.COMPLETE,this,function(e){var t;console.log(JSON.stringify(e)),e.status?(t=e.data)?(console.log("成功获取OpenID:",t),pe.Instance.InitUserInfo(t),n&&n(t)):o("[ERROR] OpenID Is Null"):o("[ERROR] "+JSON.stringify(e))}),i.on(Laya.Event.ERROR,this,function(e){o("[ERROR] "+JSON.stringify(e))}),i.send(t,e,"post","json",["Content-Type","application/json"])},fail:()=>{o("[ERROR] WX login Fail!")}})}}catch(a){console.error(a)}}static GetNowTS(){return Date.now()}encodeDataHub(){return JSON.stringify(this.datahub)}decodeDataHub(e){return JSON.parse(e)}Load(){var e=Laya.LocalStorage.getItem(pe.Config_LocalStorageName);e?(this.datahub=this.decodeDataHub(e),this.datahub=de.Adapter(this.datahub,pe.Config_LocalStorageVersion),this.datahub.sessionID++):this.datahub=new class{constructor(e){this.dataVersion=e,this.dataSaveTS=0,this.openID="",this.sessionID=0,this.logQueue=[],this.hasRegister=!1,this.region="",this.hasSystemInfo=!1}}(k.DataReportModule_DataHubVersion),this.Save(),b.Warn(this.datahub)}Save(){this.datahub.dataSaveTS=pe.GetNowTS(),this.datahub.dataVersion=k.DataReportModule_DataHubVersion,Laya.LocalStorage.setItem(pe.Config_LocalStorageName,this.encodeDataHub())}InitUserInfo(e){this.enabled&&(this.datahub.openID=e,this.Save())}Update(){if(this.enabled&&(this.isInShow&&this.Report_OnlineDuration(!1),!this.dataHubLockFlag&&this.datahub.openID)){var e=pe.GetNowTS();if(0<this.datahub.logQueue.length){if(e>this.lastFlushTS+k.DataReportModule_AutoFlushDurationMs&&(this.lastFlushTS=e,this.forceFlushFlag=!0),this.forceFlushFlag){this.dataHubLockFlag=!0,this.forceFlushFlag=!1;let i=new class{constructor(){this.projectID="",this.openID="",this.logs=[],this.tags={}}ToJson(){return{__topic__:this.projectID,__source__:this.openID,__logs__:this.logs,__tags__:this.tags}}},o=(i.projectID=k.DataProjectName,i.openID=this.datahub.openID,i.tags={},i.tags.v=pe.Config_SdkVersion,this.dataHubFlushCursor=0,k.DataReportModule_MaxFlushConcurrentLogByteLen);for(let e=0;e<this.datahub.logQueue.length;e++){this.dataHubFlushCursor++;let t=JSON.parse(JSON.stringify(this.datahub.logQueue[e]));t._uid=this.datahub.openID,t._d=JSON.stringify(t._d);var a=Object.keys(t);for(let e=0;e<a.length;e++)t[a[e]]+="";if(i.logs.push(t),(o-=this.getStrByteLen(JSON.stringify(t)))<=0)break}let t=this;this.SendData(i,2,function(){-1!=t.dataHubFlushCursor&&(t.dataHubLockFlag=!1,t.forceFlushFlag=o<=0,t.datahub.logQueue=t.datahub.logQueue.slice(t.dataHubFlushCursor),t.Save(),t.dataHubFlushCursor=-1)},function(e){t.dataHubFlushCursor=-1,t.dataHubLockFlag=!1,console.log("数据上报失败!",e)})}}else this.lastFlushTS=e}}OnHide(){this.isInShow=!1;try{this.Report_OnlineDuration(!0),this.forceFlushFlag=!0,this.Update()}catch(e){console.error(e)}}OnShow(){this.isInShow=!0;try{this.lastResportOnlineDurationTS=pe.GetNowTS()}catch(e){console.error(e)}}ReportData(t){if(this.enabled)try{if(t._cv=k.v,t._sv=pe.Config_SdkVersion,t._sid=this.datahub.sessionID,t.__overwrite)for(let e=0;e<this.datahub.logQueue.length;e++)this.datahub.logQueue[e]._e==t._e&&(this.datahub.logQueue.splice(e,1),e--);this.datahub.logQueue.push(t.ToJson()),this.Save(),t.__forceFlush&&(this.forceFlushFlag=!0)}catch(t){console.error(t)}}static _xhr_holder_delele(e){var t=pe._xhr_holder,e=t.indexOf(e);0<=e&&(t[e]=t[t.length-1],t.pop())}SendData(e,t=2,i,o){t--;function a(){0<t&&s.SendData(e,t,i,o)}let n=JSON.stringify(e.ToJson()),s=this,l=new Laya.HttpRequest;pe._xhr_holder.push(l),l.on(Laya.Event.COMPLETE,this,function(t){try{""==t?i(t):o("[ERROR] "+JSON.stringify(t))}catch(e){o("[ERROR] "+JSON.stringify(t))}finally{pe._xhr_holder_delele(l)}}),l.on(Laya.Event.ERROR,this,function(e){pe._xhr_holder_delele(l),o("[ERROR] "+JSON.stringify(e)),a(),t<=0&&o&&o(JSON.stringify(e))});let r,h=[];if(h.push("x-log-apiversion","0.6.0"),h.push("x-log-bodyrawsize",""+this.getStrByteLen(n)),k.DataReportModule_ReportCompress&&0<t){h.push("Content-Type","application/octet-stream"),h.push("x-log-compresstype","deflate");try{r=ne.Deflate(ne.StringToUint8Array(this.ch2Unicode(n)))}catch(e){return console.warn("压缩出错",e),void a()}}else h.push("Content-Type","application/json"),r=n;console.log("dataReport:"+n),l.send(k.DataReportModule_LoghubUrl,r,"post","text",h)}ch2Unicode(e){if(e){for(var t="",i=0;i<e.length;i++){var o=e.charAt(i);/[\u4e00-\u9fa5]/.test(o)?t+="\\u"+o.charCodeAt(0).toString(16):t+=o}return t}}getStrByteLen(e){for(var t,i=0,o=e.length,a=0;a<o;a++)i+=0<=(t=e.charCodeAt(a))&&t<=128?1:2;return i}Report_CustomEvent(e,t=null){try{this.ReportData(new fe(e,null!=t?t:""))}catch(e){console.error(e)}}Report_UserAttr(e){try{this.ReportData(new _e(e))}catch(e){console.error(e)}}Report_Register(e,t="",i="",o="",a=""){!this.enabled||this.datahub.hasRegister||(this.datahub.hasRegister=!0,this.ReportData(new Ie(e,t,i,o,a)))}Report_Login(e,t="",i="",o="",a=""){this.enabled&&(i=i||"",o=o||"",a=a||"",this.datahub.hasRegister||this.Report_Register(e,t,i,o,a),this.ReportData(new Ce(e,t,i,o,a)))}IsNeedReport_SystemInfo(){return!!this.enabled&&0==this.datahub.hasSystemInfo}Report_SystemInfo(e,t="Unknow",i="Unknow",o="Unknow",a=-1,n="Unkown",s="Unkown",l=-1,r=-1,h=-1,m=-1,d=-1){this.enabled&&(this.datahub.hasSystemInfo=!0,this.ReportData(new Se(e,t,i,o,a,n,s,l,r,h,m,d)))}IsNeedReport_Region(){return!!this.enabled&&""==this.datahub.region}Report_Region(e,t="Unknow"){if(this.enabled)try{this.datahub.region=e+"|"+t,this.ReportData(new Ge(this.datahub.region))}catch(e){console.warn("Report_Region Error",e)}}ANDROID__Report_SystemInfo(e){this.WX_Report_SystemInfo(e)}WX_Report_SystemInfo(e){this.enabled&&("ios"==e.platform&&(-1!=e.model.indexOf("iPhone 6")||-1!=e.model.indexOf("iPhone 5")?e.benchmarkLevel=0:e.benchmarkLevel=20),this.Report_SystemInfo(e.platform,e.system,e.version,e.sdkVersion,e.benchmarkLevel,e.brand,e.model,e.pixelRatio,e.screenWidth,e.screenHeight,e.windowWidth,e.windowHeight))}QQ_Report_SystemInfo(e){this.enabled&&("ios"==e.platform&&(-1!=e.model.indexOf("iPhone 6")||-1!=e.model.indexOf("iPhone 5")?e.benchmarkLevel=0:e.benchmarkLevel=20),this.Report_SystemInfo(e.platform,e.system,e.version,e.SDKVersion,e.benchmarkLevel,e.brand,e.model,e.pixelRatio,e.screenWidth,e.screenHeight,e.windowWidth,e.windowHeight))}Report_MemoryWarning(e){this.ReportData(new ye(e))}WX_Report_MemoryWarning(e){let t=15;e&&e.level&&(t=e.level),this.Report_MemoryWarning(t)}Report_OnlineDuration(e){if(this.enabled){var t=pe.GetNowTS();if(e||t>this.lastResportOnlineDurationTS+k.DataReportModule_OnlineDurationReportCDMs){var i=Math.max(0,Math.min(k.DataReportModule_OnlineDurationReportCDMs,t-this.lastResportOnlineDurationTS));this.lastResportOnlineDurationTS=t;try{if(!this.dataHubLockFlag&&0<this.datahub.logQueue.length){let e=this.datahub.logQueue[this.datahub.logQueue.length-1];if(e._e==ue.OnlineDuration)return e._d.duration+=i,void this.Save()}this.ReportData(new we(i))}catch(e){console.error(e)}}}}Report_AD_Video_Load(e){this.ReportData(new ve(e))}Report_AD_Video_LoadFail(e,t){this.ReportData(new De(e,JSON.stringify(t)))}Report_AD_Video_Play(e){this.ReportData(new Ue(e))}Report_AD_Video_Giveup(e){this.ReportData(new Le(e))}Report_AD_Video_Reward(e){this.ReportData(new Be(e))}Report_AD_Video_Close(e){this.ReportData(new be(e))}Report_AD_Banner_Load(e){}Report_AD_Banner_LoadSucc(e){this.ReportData(new Ae(e))}Report_AD_Banner_LoadFail(e,t){this.ReportData(new xe(e,JSON.stringify(t)))}Report_AD_Interstitial_Load(t){try{if(!this.dataHubLockFlag&&0<this.datahub.logQueue.length){var i=this.datahub.logQueue[this.datahub.logQueue.length-1];if(i._e==ue.AD_Interstitial_Load){let e=i;if(e._d.pos==t)return e._d.count++,void this.Save()}}this.ReportData(new Te(t))}catch(t){console.error(t)}}Report_AD_Interstitial_LoadSucc(e){this.ReportData(new ke(e))}Report_AD_Interstitial_LoadFail(e,t){this.ReportData(new Me(e,JSON.stringify(t)))}Report_AD_Interstitial_Close(e){this.ReportData(new Re(e))}Report_AD_Grid_Load(t){try{if(!this.dataHubLockFlag&&0<this.datahub.logQueue.length){var i=this.datahub.logQueue[this.datahub.logQueue.length-1];if(i._e==ue.AD_Grid_Load){let e=i;if(e._d.pos==t)return e._d.count++,void this.Save()}}this.ReportData(new Pe(t))}catch(t){console.error(t)}}Report_AD_Grid_LoadSucc(e){this.ReportData(new Ee(e))}Report_AD_Grid_LoadFail(e,t){this.ReportData(new Ne(e,JSON.stringify(t)))}Report_AD_Custom_Load(t){try{if(!this.dataHubLockFlag&&0<this.datahub.logQueue.length){var i=this.datahub.logQueue[this.datahub.logQueue.length-1];if(i._e==ue.AD_Custom_Load){let e=i;if(e._d.pos==t)return e._d.count++,void this.Save()}}this.ReportData(new Fe(t))}catch(t){console.error(t)}}Report_AD_Custom_LoadSucc(e){this.ReportData(new Oe(e))}Report_AD_Custom_LoadFail(e,t){this.ReportData(new He(e,JSON.stringify(t)))}Report_Share_Call(e){this.ReportData(new Ve(e))}Report_Share_Reward(e){this.ReportData(new ze(e))}Report_Extension_Click(e,t,i){try{if(!this.dataHubLockFlag&&0<this.datahub.logQueue.length){var o=this.datahub.logQueue[this.datahub.logQueue.length-1];if(o._e==ue.Extension_Click){let e=o;if(e._d.appid==t)return e._d.count++,void this.Save()}}this.ReportData(new We(e,t,i))}catch(e){console.error(e)}}Report_Extension_Export(e,t,i){this.ReportData(new Ze(e,t,i))}Report_LoadRes_Start(e){this.ReportData(new je(e)),this.loadResStartTime[e]=pe.GetNowTS()}Report_LoadRes_Complete(e){let t=0;this.loadResStartTime[e]&&(t=pe.GetNowTS()-this.loadResStartTime[e]),this.ReportData(new Ke(e,t))}Report_Level_Start(e){this.ReportData(new qe(e))}Report_Level_End(e,t,i,o){this.ReportData(new Ye(e,t,i,o))}Report_Prop_Get(e,t,i,o){this.ReportData(new Qe(e,t,i,o))}Report_Prop_Cost(e,t,i,o){this.ReportData(new Je(e,t,i,o))}Report_Prop_LevelUp(e,t,i,o){this.ReportData(new Xe(e,t,i,o))}Report_UI_Show(e,t=""){this.ReportData(new $e(e,t))}Report_UI_Click(e){this.ReportData(new et(e))}},ge=pe,fe=(ge.Config_LocalStorageName="DataReport_"+k.ProjectCode,ge.Config_LocalStorageVersion=2,ge.Config_SdkVersion="1.1.3",ge._xhr_holder=[],(e=ue=ue||{}).CustomEvent="CustomEvent",e.UserAttr="UserAttr",e.Register="Register",e.Region="Region",e.Login="Login",e.SystemInfo="SystemInfo",e.MemoryWarning="MemoryWarning",e.OnlineDuration="OnlineDuration",e.RewardBtn_Show="RewardBtn_Show",e.RewardBtn_Click="RewardBtn_Click",e.AD_Video_Load="AD_Video_Load",e.AD_Video_LoadFail="AD_Video_LoadFail",e.AD_Video_Play="AD_Video_Play",e.AD_Video_Giveup="AD_Video_Giveup",e.AD_Video_Reward="AD_Video_Reward",e.AD_Video_Close="AD_Video_Close",e.AD_Banner_Load="AD_Banner_Load",e.AD_Banner_LoadSucc="AD_Banner_LoadSucc",e.AD_Banner_LoadFail="AD_Banner_LoadFail",e.AD_Interstitial_Load="AD_Interstitial_Load",e.AD_Interstitial_LoadSucc="AD_Interstitial_LoadSucc",e.AD_Interstitial_LoadFail="AD_Interstitial_LoadFail",e.AD_Interstitial_Close="AD_Interstitial_Close",e.AD_Grid_Load="AD_Grid_Load",e.AD_Grid_LoadSucc="AD_Grid_LoadSucc",e.AD_Grid_LoadFail="AD_Grid_LoadFail",e.AD_Custom_Load="AD_Custom_Load",e.AD_Custom_LoadSucc="AD_Custom_LoadSucc",e.AD_Custom_LoadFail="AD_Custom_LoadFail",e.Share_Call="Share_Call",e.Share_Reward="Share_Reward",e.Extension_Show="Extension_Show",e.Extension_Click="Extension_Click",e.Extension_Export="Extension_Export",e.LoadRes_Start="LoadRes_Start",e.LoadRes_Complete="LoadRes_Complete",e.Level_Start="Level_Start",e.Level_End="Level_End",e.Prop_Get="Prop_Get",e.Prop_Cost="Prop_Cost",e.Prop_LevelUp="Prop_LevelUp",e.UI_Show="UI_Show",e.UI_Click="UI_Click",class extends G{constructor(e,t){super(ue.CustomEvent,!1,!1),this.name=""+e.slice(0,50),this.args=""+t.slice(0,1024)}}),_e=class extends G{constructor(e){super(ue.UserAttr,!1,!0),this.userData=JSON.stringify(e),51200<this.userData.length&&(this.userData=this.userData.substring(0,51200),console.warn("警告！用户属性长度超过51,200字节,数据被截断."))}},Ie=class extends G{constructor(e,t,i,o,a){super(ue.Register,!0,!1),this.sceneID=""+e,this.channelID=""+t,this.fromAPPID=""+i,this.inviter=""+o,this.invitePos=""+a}},Ce=class extends G{constructor(e,t,i,o,a){super(ue.Login,!0,!1),this.sceneID=""+e,this.channelID=""+t,this.fromAPPID=""+i,this.inviter=""+o,this.invitePos=""+a}},Ge=class extends G{constructor(e){super(ue.Region,!0,!1),this.region=""+e}},Se=class extends G{constructor(e,t,i,o,a,n,s,l,r,h,m,d){super(ue.SystemInfo,!0,!1),this.platform=""+e,this.system=""+t,this.version=""+i,this.sdkVersion=""+o,this.benchmarkLevel=a,this.brand=""+n,this.model=""+s,this.pixelRatio=l,this.screenWidth=r,this.screenHeight=h,this.windowWidth=m,this.windowHeight=d}},ye=class extends G{constructor(e){super(ue.MemoryWarning,!0,!1),this.level=e}},we=class extends G{constructor(e){super(ue.OnlineDuration,!1,!1),this.duration=e}},ve=class extends G{constructor(e){super(ue.AD_Video_Load,!0,!0),this.pos=""+e}},De=class extends G{constructor(e,t){super(ue.AD_Video_LoadFail,!0,!0),this.pos=""+e,this.err=""+t}},Ue=class extends G{constructor(e){super(ue.AD_Video_Play,!0,!1),this.pos=""+e}},Le=class extends G{constructor(e){super(ue.AD_Video_Giveup,!0,!1),this.pos=""+e}},Be=class extends G{constructor(e){super(ue.AD_Video_Reward,!0,!1),this.pos=""+e}},be=class extends G{constructor(e){super(ue.AD_Video_Close,!0,!1),this.pos=""+e}},Ae=class extends G{constructor(e){super(ue.AD_Banner_LoadSucc,!1,!1),this.pos=""+e}},xe=class extends G{constructor(e,t){super(ue.AD_Banner_LoadFail,!1,!1),this.pos=""+e,this.err=""+t}},Te=class extends G{constructor(e){super(ue.AD_Interstitial_Load,!1,!1),this.pos=""+e,this.count=1}},ke=class extends G{constructor(e){super(ue.AD_Interstitial_LoadSucc,!1,!1),this.pos=""+e}},Me=class extends G{constructor(e,t){super(ue.AD_Interstitial_LoadFail,!1,!1),this.pos=""+e,this.err=""+t}},Re=class extends G{constructor(e){super(ue.AD_Interstitial_Close,!1,!1),this.pos=""+e}},Pe=class extends G{constructor(e){super(ue.AD_Grid_Load,!1,!1),this.pos=""+e,this.count=1}},Ee=class extends G{constructor(e){super(ue.AD_Grid_LoadSucc,!1,!1),this.pos=""+e}},Ne=class extends G{constructor(e,t){super(ue.AD_Grid_LoadFail,!1,!1),this.pos=""+e,this.err=""+t}},Fe=class extends G{constructor(e){super(ue.AD_Custom_Load,!1,!1),this.pos=""+e,this.count=1}},Oe=class extends G{constructor(e){super(ue.AD_Custom_LoadSucc,!1,!1),this.pos=""+e}},He=class extends G{constructor(e,t){super(ue.AD_Custom_LoadFail,!1,!1),this.pos=""+e,this.err=""+t}},Ve=class extends G{constructor(e){super(ue.Share_Call,!1,!1),this.pos=""+e}},ze=class extends G{constructor(e){super(ue.Share_Reward,!0,!1),this.pos=""+e}},We=class extends G{constructor(e,t,i){super(ue.Extension_Click,!1,!1),this.name=""+e,this.appid=""+t,this.pos=""+i,this.count=1}},Ze=class extends G{constructor(e,t,i){super(ue.Extension_Export,!0,!1),this.name=""+e,this.appid=""+t,this.pos=""+i}},je=class extends G{constructor(e){super(ue.LoadRes_Start,!0,!1),this.id=""+e}},Ke=class extends G{constructor(e,t){super(ue.LoadRes_Complete,!0,!1),this.id=""+e,this.usedTime=t}},qe=class extends G{constructor(e){super(ue.Level_Start,!0,!1),this.level=""+e}},Ye=class extends G{constructor(e,t,i,o){super(ue.Level_End,!0,!1),this.level=""+e,this.passFlag=t,this.usedTime=i,this.avgFPS=o}},Qe=class extends G{constructor(e,t,i,o){super(ue.Prop_Get,!1,!1),this.id=""+e,this.method=""+t,this.delta=i,this.sum=o}},Je=class extends G{constructor(e,t,i,o){super(ue.Prop_Cost,!1,!1),this.id=""+e,this.method=""+t,this.delta=i,this.sum=o}},Xe=class extends G{constructor(e,t,i,o){super(ue.Prop_LevelUp,!1,!1),this.id=""+e,this.method=t,this.delta=i,this.sum=o}},$e=class extends G{constructor(e,t){super(ue.UI_Show,!1,!0),this.id=""+e,this.from=t}},et=class extends G{constructor(e){super(ue.UI_Click,!1,!0),this.id=""+e}};window.nativeCallJs_onShow_CallBack,window.nativeCallJs_onHide_CallBack,window.nativeCallJs_onShow=function(){window.nativeCallJs_onShow_CallBack&&window.nativeCallJs_onShow_CallBack()},window.nativeCallJs_onHide=function(){window.nativeCallJs_onHide_CallBack&&window.nativeCallJs_onHide_CallBack()},window.onLoadVideoErr=function(e){window.onLoadVideoErr_CallBack&&window.onLoadVideoErr_CallBack("default",e)},window.onLoadBannerErr=function(e){window.onLoadBannerErr_CallBack&&window.onLoadBannerErr_CallBack("default",e)},window.onInterstitialAdLoadErr=function(e){window.onInterstitialAdLoadErr_CallBack&&window.onInterstitialAdLoadErr_CallBack("default",e)};var tt,it,ot,at,nt=class{static GetName(e){let t="";return"Chest_1"==e?t=K.DataModule().GetLz().GetText("ChestBox1"):"Chest_2"==e?t=K.DataModule().GetLz().GetText("ChestBox2"):"Chest_Endless"==e&&(t=K.DataModule().GetLz().GetText("ChestBox3")),t}},st=(nt.FGUI_rare="rare_Image_",nt.item_DiamondHeap="item_DiamondHeap",nt.item_CoinHeap="item_CoinHeap",(e=tt=tt||{}).Gold="Gold",e.Silver="Silver",(G=it=it||{}).NewYearFonta="寒",G.NewYearFontb="冰",G.NewYearFontc="公",G.NewYearFontd="主",G.NewYearFonte="回",G.NewYearFontf="归",G.NewYearFontg="啦",(e=ot=ot||{}).Sniper="Sniper",e.TommyGun="TommyGun",e.Pistol="Pistol",e.Rifle="Rifle",e.ShotGun="ShotGun",(G=at=at||{}).Dial="转盘",G.over="结算奖励",G.over_double="结算掠夺奖励翻倍",G.levelReward="等级奖励",G.mergeNew="解锁新武器奖励",G.offline="离线",G.sign="签到",G.window="加金币钻石弹窗",G.buyHero="购买英雄",G.buyWenpon="购买合成武器",G.online="在线收益",G.recycle_wenpon="武器回收",G.sellGear="出售装备",G.addToDesktopUI="添加到桌面的奖励",G.levelUpHero="升级英雄",G.GridKey="钥匙宝箱",G.TreasureBox3="碎片宝箱",G.TreasureBox4="海盗宝箱",G.Treasure2="商店2号栏",G.Treasure4="商店4号栏",G.TreasureBox1="古木宝箱",G.TreasureBox2="白银宝箱",G.coverHero="首页获得英雄",G.tryWenponSkin="试用皮肤",G.tryHeroSkin="试用英雄皮肤",G.TT_ShareVideo="抖音分享视频",G.TT_form="抖音关注",G.CDK="CDK获得",G.Treasure="商店",G.newYear2021="2021新年活动",G.ThousandBladesGetHeroPiece="魔刀千刃获得刺客七碎片",G.ShareNewHero="新英雄分享",G.ShareNewWeapon="新武器分享",G.LuanDou="死斗玩法",G.EggUIClick="误触宝箱",class{static numberFixed2(e){return.01*Math.floor(100*e)}static FixNum(e,t=2){t=Math.pow(10,t);return Math.round(e*t)/t}static LerpAngle(e,t,i){t=st.Repeat(t-e,360);return 180<t&&(t-=360),e+t*st.Clamp01(i)}static Lerp(e,t,i){return e+(t-e)*st.Clamp01(i)}static Repeat(e,t){return e-Math.floor(e/t)*t}static Clamp01(e){return e<0?0:1<e?1:e}static Clamp(e,t,i){return e<t?e=t:i<e&&(e=i),e}static VecToAngle(e){return Math.atan2(e.x,e.y)*st.PiToDeg}static VecRotate(e,t){return new Laya.Vector2(e.x*Math.cos(t*st.DegToPi)-e.y*Math.sin(t*st.DegToPi),e.x*Math.sin(t*st.DegToPi)+e.y*Math.cos(t*st.DegToPi))}static AngleToDir(e){let t=st.VecRotate(new Laya.Vector2(0,1),e);return t.x=-t.x,t}static SignVecAngle(e,t){e=st.VecToAngle(e)-st.VecToAngle(t);return 180<Math.abs(e)&&(0<e?e-=360:e=360+e),e}static DeltaAngle(e,t){t=st.Repeat(t-e,360);return 180<t&&(t-=360),t}static MoveTowardsAngle(e,t,i){var o=st.DeltaAngle(e,t);return-i<o&&o<i?t:st.MoveTowards(e,t=e+o,i)}static MoveTowards(e,t,i){return Math.abs(t-e)<=i?t:e+st.Sign(t-e)*i}static Sign(e){return e<0?-1:1}static Vec2_Distance(e,t,i,o){e-=i,i=t-o;return Math.sqrt(e*e+i*i)}static GetPointToLintDistance(e,t,i){Laya.Vector3.subtract(t,e,this.gp0),Laya.Vector3.subtract(i,e,this.gp1);var o=Laya.Vector3.dot(this.gp0,this.gp1);if(o<0)return Laya.Vector3.distance(e,i);if(o>Laya.Vector3.dot(this.gp0,this.gp0))return Laya.Vector3.distance(t,i);Laya.Vector3.cross(e,t,this.gp0),Laya.Vector3.scale(this.gp0,o,this.gp1),Laya.Vector3.add(e,this.gp1,this.gp2),Laya.Vector3.subtract(t,e,this.gp0),Laya.Vector3.subtract(e,i,this.gp1),Laya.Vector3.cross(this.gp0,this.gp1,this.gp2),this.gp0.x=0,this.gp0.y=0,this.gp0.z=0;o=Laya.Vector3.distance(this.gp0,this.gp2);return Laya.Vector3.subtract(t,e,this.gp1),o/Laya.Vector3.distance(this.gp0,this.gp1)}}),S=st,e=(S.PiToDeg=57.3,S.DegToPi=.01745,S.gp0=new Laya.Vector3(0,0,0),S.gp1=new Laya.Vector3(0,0,0),S.gp2=new Laya.Vector3(0,0,0),class{constructor(){this._componentId=0,this.isActive=!0}get componentId(){return this._componentId}InitComponentId(e){this._componentId=e}});e._id=0;var M=class extends e{constructor(){super(...arguments),this.isInCameraArea=!0,this.pos=new Laya.Vector3(0,0,0),this.scale=new Laya.Vector3(1,1,1),this.rotation=new Laya.Vector3(0,0,0)}SetPos1(e,t,i){this.pos.x=e,this.pos.y=t,this.pos.z=i}SetPos(e){this.pos.x=e.x,this.pos.y=e.y,this.pos.z=e.z}SetRotation(e){this.rotation.x=e.x,this.rotation.y=e.y,this.rotation.z=e.z}SetRotation2(e,t,i){this.rotation.x=e,this.rotation.y=t,this.rotation.z=i}SetScale(e,t,i){this.scale.x=e,this.scale.y=t,this.scale.z=i}},lt=class{constructor(){this.systemName=""}LoadWorld(e){this.world=e}Init(){}Update(){}FixedUpdate(){}LateUpdate(){}Destroy(){}OnAddComponent(e,t){}OnRemoveComponent(e,t){}},rt=class{constructor(e){this.name="BitSetException",this.message="",this.message=e}toString(){return"{"+this.name+": "+this.message+"}"}},ht=(0,class{constructor(e){if(void 0===e)throw new rt("Constructor for 'undefined' is not implemented!");if("number"==typeof e)this.assertLEN(e),this.buf=new Uint32Array((e+31)/32|0),this.len=e;else if(e instanceof ht)this.init(e.buf),this.len=e.len;else if(e instanceof ArrayBuffer)this.init(new Uint32Array(e));else{if(!(e instanceof Uint32Array))throw new rt(`Constructor for type: '${typeof e}' is not implemented!`);this.init(e)}}buffer(){return this.buf}init(t){this.assertLEN(32*t.length),this.len=32*t.length,this.buf=new Uint32Array(t.length);for(let e=0;e<t.length;e++)this.buf[e]=t[e]}assertEQ(e){if(this.len!==e.len)throw new rt("Length of two BitSet objects not equal!")}assertLEN(e){if(void 0===e)throw new rt("Length of BitSet not defined!");if(e<=0)throw new rt("Length of BitSet has to be greater than zero!");if(e!==(0|e))throw new rt("Length of BitSet has to be an integer value!");if(e%32!=0)throw new rt("Length of BitSet have to be the multiply of 32 bit!")}assertIDX(e){if(e!=(0|e))throw new rt("Index has to be an integer value!");if(e<0)throw new rt("Index out of range: index has to be greater than 0!");if(e>=this.len)throw new rt("Index out of range: index has to be lower than length!")}clone(){return new ht(this)}resize(e){if(this.assertLEN(e),this.len!==e){let t=new Uint32Array((e+31)/32|0),i=this.buf;for(let e=0;e<this.buf.length&&e<t.length;e++)t[e]=i[e];this.buf=t,this.len=e}return this}range(i,o){void 0===o&&(o=this.len-1),this.assertIDX(i),this.assertIDX(o);var e=o-i+1;if(e%32!=0)throw new rt("Range has to be multiply of 32 bits!");let a=new ht(e);for(let e=i,t=0;e<=o;e++,t++)!0===this.isset(e)&&a.set(t);return null}length(){return this.len}set(t,i){if(void 0!==t)if(this.assertIDX(t),null==i)this.buf[t/32|0]|=1<<t%32;else{this.assertIDX(i);for(let e=t;e<=i;e++)this.buf[e/32|0]|=1<<e%32}else this.buf.fill(4294967295);return this}unset(t,i){if(void 0!==t)if(this.assertIDX(t),null==i)this.buf[t/32|0]&=~(1<<t%32);else{this.assertIDX(i);for(let e=t;e<=i;e++)this.buf[t/32|0]&=~(1<<e%32)}else this.buf.fill(0);return this}and(e){this.assertEQ(e);let t=this.buf,i=t.length,o=e.buf;for(let e=0;e<i;e++)t[e]&=o[e];return this}or(e){this.assertEQ(e);let t=this.buf,i=t.length,o=e.buf;for(let e=0;e<i;e++)t[e]|=o[e];return this}xor(e){this.assertEQ(e);let t=this.buf,i=t.length,o=e.buf;for(let e=0;e<i;e++)t[e]^=o[e];return this}nand(e){return this.and(e).not()}nor(e){return this.or(e).not()}equal(e){this.assertEQ(e);var t=this.buf,i=t.length,o=e.buf;for(let e=0;e<i;e++)if(t[e]!==o[e])return!1;return!0}not(){let t=this.buf,i=t.length;for(let e=0;e<i;e++)t[e]=~t[e];return this}isset(e){if(void 0!==e)return this.assertIDX(e),0!=(this.buf[e/32|0]&1<<e%32);var t=this.buf,i=t.length;for(let e=0;e<i;e++)if(0!==t[e])return!0;return!1}static stringify(t,e){let i=t.len,o=(t.buf.length,"");if(void 0!==e&&0!==e)return null;0===e&&(o=`BitSet:01(${i}):`);for(let e=i-1;0<=e;e--)!0===t.isset(e)?o+="1":o+="0";return o}static parseOneZero(e){let t=e.length,i=e;if(0===e.indexOf("BitSet:01")){e=/^BitSet:01\((\d+)\):([01]+)/g.exec(e);if(null===e)throw new rt("Parse OneZero format (prefixed) failed - syntax error!");if(t=parseInt(e[1]),e[2].length!==t)throw new rt("Parse OneZero format (prefixed) failed - length mismatch!");i=e[2]}let o=new ht(t);for(let e=0;e<t;e++)if("1"===i.charAt(e))o.set(t-e-1);else if("0"!==i.charAt(e))throw new rt("Parse OneZero format failed zero-one string expected - syntax error!");return o}}),G=class{static IsInclude(t,e){let i=this.tempBitSet2.buffer();for(let e=0;e<t.buffer().length;e++)i[e]=t.buffer()[e];return this.tempBitSet2.and(e).equal(t)}static CopyToTempBitSet(t){let i=this.tempBitSet.buffer();for(let e=0;e<t.buffer().length;e++)i[e]=t.buffer()[e];return this.tempBitSet}},mt=G,dt=(mt.ComponentCount=96,mt.emptyBitSet=new ht(G.ComponentCount),mt.tempBitSet=new ht(G.ComponentCount),mt.tempBitSet2=new ht(G.ComponentCount),class{constructor(t){this.id="",this.mask=new ht(mt.ComponentCount);for(let e=0;e<t.length;e++)this.id+=t[e]+"_",this.mask.set(t[e])}GetEntitys(e){return e.GetEntitysByMatcher(this)}}),R=class extends e{constructor(){super(...arguments),this.canGetItem=!0,this.canLevelUp=!0,this.baseSize=1,this.sizeScale=1,this.invisible=0,this.isTriggerDeathLaser=!1,this.hp=6,this.maxHp=6,this.exp=0,this.oldexp=-1,this.maxExp=10,this.nowLevel=1,this.dmg=1,this.addDmgLevel=0,this.boxDmg=-1,this.basedmg=1,this.attSpeedScale=1,this.suckBlood=0,this.critPer=0,this.dodgePer=0,this.parryChance=0,this.heal=1,this.healTime=0,this.speed=1,this._speedScale=1,this.halfRequirement=0,this.doubleEffectTimes=1,this.attackInterval=1,this.attackTime=0,this.useInput=!1,this.triggerAtt=!1,this.attBtnState=0,this.skillBtnState=0,this.attSoundIsPlay=!1,this.isDead=!1,this.anyScale=1,this.isPlaySetPosOffSkill=1,this.hitRecovery=1,this.willRandomSkill=[],this.upgRadeList=[],this.upRadeCount=0,this.chooseUpGrade="",this.getItem="",this.superLevelUp=0,this.intelligency=0,this.needUIFreshChoose=!0,this.skillState=[],this.invincible=0,this.superArmor=0,this.noSap=0,this.noCtrlEffect=0,this.fogHitedTimes=0,this.dizz=0,this.banAtt=0,this.rebound=0,this.deadState="Dead",this.reviveTime=0,this.turnRotation=!1,this.areYouDriving=-1,this.specialCombo=1}get speedScale(){return this._speedScale}set speedScale(e){this._speedScale=e}GetSpeed(){return this.speed*this.speedScale}IsMaxHp(){return this.hp>=this.maxHp}IsBanAtt(){return 0<this.banAtt}GetRebound(){return 0<this.rebound}GetIsInvincible(){return 0<this.invincible}GetIsInVisible(){return 0<this.invisible}GetIsNoSap(){return 0<this.noSap}GetIsNoCtrlEffect(){return 0<this.noCtrlEffect}GetIsDizz(){return 0<this.dizz}GetIsSuperArmor(){return 0<this.superArmor}GetAnyScale(){return 0<this.anyScale?this.anyScale:0}GetIsPlaySetPosOffSkill(){return 0<this.isPlaySetPosOffSkill?this.isPlaySetPosOffSkill:0}GetAttSpeedScale(){return 0<this.attSpeedScale?this.attSpeedScale:0}StartTriggerAtt(e=0){this.triggerAtt=!0}},v=class extends e{constructor(){super(...arguments),this.enable=!0,this.nowMapPos=new Laya.Vector2(0,0),this.oldPos=new Laya.Vector3(0,0,0),this.colliderAllUnit=!1,this.colliderAllHeroUnit=!1,this.haveColliderSize=!1,this.colliderNoMove=!1,this.useSpColliderRadius=0,this.isInAir=!1,this.isInFixed=!1,this.hasColliderList=[],this.hitTheWall=!0,this.hitWithWall=!1,this.isHitWall=!1,this.hitWithBullet=!0,this.colliderType=0,this.width=0,this.height=0,this.radius=0,this.angle=0,this.weight=1,this.isTrigger=!1}GetWeight(){return this.isInFixed?1e7:this.weight}},ct=class extends e{constructor(){super(...arguments),this.enableCollider=!1}},G=class{constructor(){this.call=new t}Register(e,t){this.call.AddCallBack(e,t)}Trigger(e,...t){this.call.Call(e,...t)}Remove(e,t){this.call.RemoveCallBack(e,t)}Clear(){this.call.CleanAllCallBack()}ClearCallTarget(e){this.call.RemoveCallTarget(e)}},P=class{},C=(P.Mouse_Down="Mouse_Down",P.Mouse_Over="Mouse_Over",P.Mouse_Move="Mouse_Move",P.Mouse_Delete="Mouse_Delete",P.onTriggerCollider=new G,P.onStartBattle=new G,P.onBattleWin=new G,P.onBattleFail=new G,P.onKill=new G,P.onDestroyItem=new G,P.onRevive=new G,P.onEnterFog=new G,P.onQuitFog=new G,P.onFogHit=new G,P.onBunker=new G,P.onQuitBunker=new G,P.onClickQuestDigBtn=new G,P.onClickQuestDigSpeedUpBtn=new G,P.onOpenDoor=new G,P.onBunkerDoorShow=new G,P.onBunkerDoorHide=new G,P.onOffDoor=new G,P.onBoarding=new G,P.onGetOff=new G,P.onCarDoorShow=new G,P.onCarDoorHide=new G,P.onBloodyNight=new G,P.onBloodyNightTips=new G,P.onChangeBloodyNight=new G,P.onAddDay=new G,P.onNight=new G,P.onNotQuest=new G,P.onQuestStarLevelUp=new G,P.onQuestTip=new G,P.onRadiationLevelUp=new G,P.onChangeGun=new G,P.onEnterTent=new G,P.onOutTent=new G,P.onChangeSkill=new G,P.onItemTriggerShow=new G,P.onItemTriggerHide=new G,P.onSetInfoShow=new G,P.onBatterShow=new G,P.onTriggerUnlockSkill=new G,class extends e{constructor(){super(...arguments),this.useDmg=!0,this.isMagic=!1,this.dmg=10,this.dmgDynamicFunc=null,this.onDestroyFunc=null,this.creatorId=-1,this.keepFrame=1,this.useStiffness=!1,this.useStiffnessDis=0,this.shakeCamera=!1,this.useSAP=!1,this.sapTime=.1,this.boxDmg=30,this.whetherPenetrate=!1,this.t1=0,this.hitAndDistory=!1,this.hitWallDestoy=!1,this.destoryNow=!1,this.penetrationNum=0,this.hitShowEffect="",this.hitShowEffectByBuff="",this.hitShowEffectOffSet=0,this.guided=!1,this.maxAV=0,this.attackRange=10,this.pos=new Laya.Vector3(0,0,0),this.guidedFilter=[],this.onDistanceDmg="",this.isSpecialDmg=!1}}),y=class extends e{constructor(){super(...arguments),this.userItemDatas=[],this.itemID="",this.hp=0,this.maxhp=0,this.wallWillCreatChance=1,this.wallWillCreatItem="",this.willGetMashRoom=!1,this.willGetExItem="",this.wallLeftTime=-1,this.speed=0,this.addExp=0,this.type=0,this.chestLevel=0,this.addBuff="",this.effect="",this.effectId=-1,this.buffKeepTime=0,this.isOnlyBuff=!0,this.f1=0,this.f2=0,this.f3=0,this.f4=0,this.createId=-1,this.ItemTriggerId=-1,this.aimedPriority=1}},ut=(y.Type_Box=0,y.Type_Eat=1,y.Type_BounesItem=2,y.Type_WallBox=3,y.Type_Bunker=4,y.Type_Obstacle=5,class extends e{constructor(){super(...arguments),this.level=1,this.enable=!0,this.StartState="",this.thinkState="State_ZombieThink",this.destory=!1,this.time=1,this.brain=-1,this.dir=new Laya.Vector3(0,0,0),this.enemyId=-1,this.patrolRange=5,this.attPathTime=1,this.searchEnemyTime=0,this.attTime=1,this.att2Time=-1,this.attTimeCd=3,this.attAnimTime=.2,this.type="",this.triggerAtt=!1,this.triggerAttTime=0,this.triggerAttRange=1,this.allowOutOfRangDestroy=!1,this.isRangedUnit=!1,this.killExp=1,this.zombieID="",this.collideWithObstacle=!1,this.inBunkerTriggerID=-1,this.atkSapTime=0,this.hitedSapTimeRatio=0,this.atkStiffnessDis=0,this.hitedStiffnessDisRatio=0,this.freshMoveAnimCD=0,this.useSkillTime=0,this.skillTimeRangeMin=2,this.skillTimeRangeMax=3,this.skillOffset=0,this.viewRange_Day=10,this.viewRange_Night=10,this.viewRange_BloodNight=10,this.viewRange=10,this.viewRangeRatio=1,this.pursueViewRangeRatioSubPreSec=.15,this.recoveryViewRangeRatioAddPreSec=.2,this.angryChaseRangeRatio=1,this.angryChaseSpeedRatio=1,this.angryChaseCallRange=1,this.hasTriggerAngryChase=!1,this.bulletScale=1,this.bulletOffsetZ=0}GetRandomAttAnim(e){return this.AttAnim[Math.floor(e*this.AttAnim.length)]}GetRandomWalkAnim(e){return this.WalkAnim[Math.floor(e*this.WalkAnim.length)]}GetRandomRunAnim(e){return this.RunAnim[Math.floor(e*this.RunAnim.length)]}GetRandomDieAnim(e){return this.DieAnim[Math.floor(e*this.DieAnim.length)]}GetRandomNoiseSound(e){return this.NoiseSound[Math.floor(e*this.NoiseSound.length)]}GetRandomAttSound(e){return this.AttSound[Math.floor(e*this.AttSound.length)]}GetRandomDeadSound(e){return this.DeadSound[Math.floor(e*this.DeadSound.length)]}GetViewRange(){return this.viewRange*this.viewRangeRatio}}),pt=class extends e{constructor(){super(...arguments),this.bunkerID="",this.peopleNum=0,this.peopleMaxNum=0,this.doorIsOpen=!1,this.doorNode=null,this.residentIDList=[],this.zombieIdList=[],this.isDamage=!1,this.level=1,this.fencePerformanceStage=0,this.fencePerformanceRotList=[],this.bunkerTriggerEcsID=-1}},gt=class extends e{constructor(){super(...arguments),this.bunkerId=-1,this.nowState=1,this.doorId=-1,this.switchIsShow=!1}},ft=class extends e{constructor(){super(...arguments),this.carId=-1,this.nowState=1}},_t=class extends e{},It=class extends e{constructor(){super(...arguments),this.banHud=!1,this.nodeName="HudPoint",this.isShow=!0,this.isGetUi=!1,this.switchHpState=!1,this.useUICtrl="",this.oldUICtrl="",this.playerName="",this.chinaState="",this.color="#FFFFFF",this.hp=0,this.maxhp=0,this.level=0,this.exp=0,this.maxExp=0,this.freshUI=!1,this.red=!1,this.isRedName=!1,this.bulletLoadCD=5,this.reloadState=!1,this.playReloadAni=!1,this.singleShotLoading=!1,this.singleShotReloadState=!1,this.useLerp=!1,this.bulletCount=10,this.nowBulletCount=-1,this.showChangedHp=[],this.hpChangedList=[],this.isChangeGun=!1,this.hpChangeUIOffsetPos=new Laya.Vector3}ShowHpChanged(e,t){(e!=It.changeHpType_SuperSub&&e!=It.changeHpType_Sub||0!=t)&&(1<=t?this.showChangedHp.push(e+"_"+Math.floor(t)):this.showChangedHp.push(e+"_"+t.toFixed(2)))}},D=It,Ct=(D.My="My",D.Enemy="Enemy",D.Friend="Friend",D.Box="Box",D.Item="ItemName",D.EnemyTurret="EnemyTurret",D.MyTurret="MyTurret",D.Zombie_Normal="Zombie_Normal",D.Zombie_Elite="Zombie_Elite",D.Zombie_Boss="Zombie_Boss",D.AddSkill="AddSkill",D.AddItem="AddItem",D.Bunker="Bunker",D.Car="Car",D.ZombieFactory="ZombieFactory",D.AddWeapon="AddWeapon",D.Summon="Summon",D.changeHpType_Sub="Sub",D.changeHpType_SuperSub="SuperSub",D.changeHpType_Add="Add",D.changeHpType_Miss="Miss",D.changeHpType_Parry="Parry",class extends e{constructor(){super(...arguments),this.bunkerId=-1,this.weaponLevelList=[],this.questList=[],this.isRefreshShop=!1,this.hasGetQuest=!1}}),Gt=class extends e{constructor(){super(...arguments),this.nowState=1,this.itemId=-1,this.iriggerImmediately=!1}},St=class extends e{constructor(){super(...arguments),this.bunkerId=-1}},yt=class{};yt.gravity=-30,yt.tileSize=10,yt.smallTileSize=5,yt.BunkerWall_Prefix="BunkerWall_",yt.BunkerDoor_Prefix="BunkerDoor_";var wt,vt=class extends lt{constructor(){super(...arguments),this.systemName="PhySystem",this.mapData=new Array,this.unitGrounp=new dt([R.id,v.id]),this.collidersGrounp=new dt([v.id]),this.bulletCollidersGrounp=new dt([v.id,C.id]),this.triggerCollidersGrounp=new dt([v.id,ct.id]),this.bunkerCollidersGrounp=new dt([v.id,pt.id]),this.bunkerState=!1,this.bunkerIsShow=!1,this.bunkerTrigger=null,this.bunkerUnit=null,this.carState=!1,this.carIsShow=!1,this.carDoorTrigger=null,this.carUnit=null,this.tentState=!1,this.tentIsShow=!1,this.bunkerTent=null,this.bunkerTentUnit=null,this.itemTrigger=null,this.itemTriggerId=-1,this.itemTriggerUnit=null,this.itemState=!1,this.itemIsShow=!1,this.needTileDir=new Laya.Vector2(0,0),this.vec2_1=new Laya.Vector2(0,0),this.vec3_1=new Laya.Vector3(0,0,0),this.dirVec3=new Laya.Vector3(0,0,0),this.hitvec2=new Laya.Vector2(0,0),this.hitvec3=new Laya.Vector2(0,0),this.vec2=new Laya.Vector2(0,0),this.pos=new Laya.Vector2(0,0)}Init(){this.sceneData=K.ResModule().GetJson(x.GetSceneMapData(V.nowScene)),this.mapData=new Array;for(let e=0;e<this.sceneData.x;e++)this.mapData[e]=[];for(let t=0;t<this.sceneData.x;t++)for(let e=0;e<this.sceneData.y;e++)this.mapData[t][e]=new Dt,this.mapData[t][e].x=t,this.mapData[t][e].y=e;for(let e=0;e<this.sceneData.collders.length;e++){let t=this.sceneData.collders[e];for(let e=0;e<t.ar.length;e++){var i=this.IndexToXY(t.ar[e]);t.enabled=!0,t.wallColiderType=!t.id||-1==t.id.indexOf(yt.BunkerWall_Prefix)&&-1==t.id.indexOf(yt.BunkerDoor_Prefix)?wt.Wall:wt.BunkerWall,this.mapData[i.x][i.y].walls.push(t)}}vt.Instance=this}Update(){}FixedUpdate(){this.DealColliderWall(),this.DealUnitCollder(),this.DealBulletTrigger(),this.DealOneSidedTrigger()}DealOneSidedTrigger(){var t=this.world.GetEntitysByMatcher(this.unitGrounp);this.bunkerState=!1,this.carState=!1,this.carDoorTrigger=null,this.tentState=!1,this.bunkerTent=null,this.bunkerTrigger=null,this.bunkerUnit=null,this.itemState=!1;for(let e=0;e<t.length;e++){let n=t[e],s=n.GetComponent(v),l=n.GetComponent(M);if(s.enable){var r=this.world.GetEntitysByMatcher(this.triggerCollidersGrounp);for(let e=0;e<r.length;e++){let t=r[e],i=t.GetComponent(v),o=t.GetComponent(M),a=s.radius;if(1==i.colliderType)if(-1==i.hasColliderList.indexOf(n.id)){if(this.HitBoxWall(o.pos,s.oldPos,i.width+a,i.height+a,o.rotation.y,l,!1)){if(!t.HasComponent(Gt.id)||n.HasComponent(ut.id)||(t.GetComponent(Gt).iriggerImmediately?P.onItemTriggerShow.Trigger(t,n):n.HasComponent(_t.id)&&(1==t.GetComponent(Gt).nowState&&(t.GetComponent(Gt).nowState=2,i.hasColliderList.push(n.id)),this.itemTrigger=t,this.itemState=!0,this.itemTriggerUnit=n)),t.HasComponent(ft.id)&&!n.HasComponent(ut.id)&&n.HasComponent(_t.id)&&(-1==n.GetComponent(R).areYouDriving&&1==t.GetComponent(ft).nowState&&(t.GetComponent(ft).nowState=2,P.onBoarding.Trigger(),i.hasColliderList.push(n.id)),this.carDoorTrigger=t,this.carState=!0,this.carUnit=n),t.HasComponent(Ct.id)&&!n.HasComponent(ut.id)&&n.HasComponent(_t.id)&&(i.hasColliderList.push(n.id),this.tentState=!0,this.bunkerTent=t,this.bunkerTentUnit=n),t.HasComponent(gt.id)&&!n.HasComponent(ut.id)&&n.HasComponent(_t.id)&&(1==t.GetComponent(gt).nowState&&(t.GetComponent(gt).nowState=2,console.warn("准备开门"),P.onOpenDoor.Trigger(t.GetComponent(gt).bunkerId,t.id,n),i.hasColliderList.push(n.id)),this.bunkerState=!0,this.bunkerTrigger=t,this.bunkerUnit=n),t.HasComponent(pt.id)){let e=t.GetComponent(pt);e.doorIsOpen&&(n.HasComponent(ut.id)?(i.hasColliderList.push(n.id),e.zombieIdList.push(n.id)):e.residentIDList.length<e.peopleMaxNum?(i.hasColliderList.push(n.id),e&&(e.residentIDList.push(n.id),t.GetComponent(D).freshUI=!0,console.warn("掩体人数+1",e.residentIDList.length)),P.onBunker.Trigger()):e.residentIDList.filter(e=>e==n.id).length<=0&&(console.warn("掩体满员了"),this.HitBoxWall(o.pos,s.oldPos,i.width+a,i.height+a,o.rotation.y,l,!0)))}t.HasComponent(St.id)&&n.HasComponent(ut.id)&&(n.GetComponent(ut).inBunkerTriggerID=t.GetComponent(St).bunkerId)}}else{if(this.HitBoxWall(o.pos,s.oldPos,i.width+a,i.height+a,o.rotation.y,l,!1))t.HasComponent(Gt.id)&&!n.HasComponent(ut.id)&&(t.GetComponent(Gt).iriggerImmediately?P.onItemTriggerHide.Trigger():n.HasComponent(_t.id)&&(3==t.GetComponent(Gt).nowState&&(t.GetComponent(Gt).nowState=4,i.hasColliderList=i.hasColliderList.filter(e=>e!=n.id)),this.itemTrigger=t,this.itemState=!0,this.itemTriggerUnit=n)),t.HasComponent(gt.id)&&!n.HasComponent(ut.id)&&n.HasComponent(_t.id)&&(3==t.GetComponent(gt).nowState&&(t.GetComponent(gt).nowState=4,console.warn("准备关门"),P.onOffDoor.Trigger(t.GetComponent(gt).bunkerId,t.id),i.hasColliderList=i.hasColliderList.filter(e=>e!=n.id)),this.bunkerState=!0,this.bunkerTrigger=t,this.bunkerUnit=n),t.HasComponent(ft.id)&&!n.HasComponent(ut.id)&&n.HasComponent(_t.id)&&(-1!=n.GetComponent(R).areYouDriving&&3==t.GetComponent(ft).nowState&&(t.GetComponent(ft).nowState=4,console.warn("准备关车门了!!!!!"),P.onGetOff.Trigger(t,n),i.hasColliderList=i.hasColliderList.filter(e=>e!=n.id)),this.carDoorTrigger=t,this.carState=!0,this.carUnit=n),t.HasComponent(Ct.id)&&!n.HasComponent(ut.id)&&n.HasComponent(_t.id)&&(i.hasColliderList=i.hasColliderList.filter(e=>e!=n.id),this.tentState=!0,this.bunkerTent=t,this.bunkerTentUnit=n);else if(t.HasComponent(pt.id)){let e=t.GetComponent(pt);if(e.doorIsOpen)if(n.HasComponent(ut.id))e.zombieIdList=e.zombieIdList.filter(e=>e!=n.id),i.hasColliderList=i.hasColliderList.filter(e=>e!=n.id);else{let e=t.GetComponent(pt);e.residentIDList=e.residentIDList.filter(e=>e!=n.id),i.hasColliderList=i.hasColliderList.filter(e=>e!=n.id),console.warn("掩体人数-1",e.residentIDList.length),t.GetComponent(D).freshUI=!0,P.onQuitBunker.Trigger()}}t.HasComponent(St.id)&&n.HasComponent(ut.id)&&(n.GetComponent(ut).inBunkerTriggerID=-1)}}}}this.bunkerState?this.bunkerIsShow||(P.onBunkerDoorShow.Trigger(this.bunkerTrigger,this.bunkerUnit),V.triggerDoorId=this.bunkerTrigger.id,this.bunkerIsShow=!0):this.bunkerIsShow&&(P.onBunkerDoorHide.Trigger(),this.bunkerIsShow=!1),this.carState?this.carIsShow||(P.onCarDoorShow.Trigger(this.carDoorTrigger,this.carUnit),V.triggerCarId=this.carDoorTrigger.id,this.carIsShow=!0):this.carIsShow&&(P.onCarDoorHide.Trigger(),this.carIsShow=!1),this.tentState?this.tentIsShow||(P.onEnterTent.Trigger(this.bunkerTent,this.bunkerTentUnit),V.triggerTentId=this.bunkerTent.id,this.tentIsShow=!0):this.tentIsShow&&(P.onOutTent.Trigger(),this.tentIsShow=!1),this.itemState?(this.itemIsShow||(P.onItemTriggerShow.Trigger(this.itemTrigger,this.itemTriggerUnit),this.itemTriggerId=this.itemTrigger.id,this.itemIsShow=!0),this.itemTriggerId!=this.itemTrigger.id&&(P.onItemTriggerShow.Trigger(this.itemTrigger,this.itemTriggerUnit),this.itemTriggerId=this.itemTrigger.id)):this.itemIsShow&&(P.onItemTriggerHide.Trigger(),this.itemIsShow=!1)}DealColliderWall(){var i=this.world.GetEntitysByMatcher(this.collidersGrounp),l=this.world.GetEntitysByMatcher(this.bunkerCollidersGrounp);for(let t=0;t<i.length;t++){let a=i[t],n=a.GetComponent(v),s=a.GetComponent(M),e=this.GetXYByPos(s.pos);if(0<=e.x&&e.x<this.sceneData.x&&0<=e.y&&e.y<this.sceneData.y&&(e.x==n.nowMapPos.x&&e.y==n.nowMapPos.y||(this.mapData[n.nowMapPos.x][n.nowMapPos.y].Remove(a),n.nowMapPos.x=e.x,n.nowMapPos.y=e.y,this.mapData[n.nowMapPos.x][n.nowMapPos.y].Add(a))),n.hitWithWall){let e=null;if(e=this.mapData[n.nowMapPos.x]?this.mapData[n.nowMapPos.x][n.nowMapPos.y]:e){let i=this.mapData[n.nowMapPos.x][n.nowMapPos.y].walls,o=!1;n.isHitWall=!1;for(let e=0;e<i.length;e++){let t=i[e];if(t.enabled){if(!(1!=t.t||n.isInAir&&t.isC)){let e=n.radius;if(0<n.useSpColliderRadius&&(e=n.useSpColliderRadius),(o=this.HitBoxWall(t.p,n.oldPos,t.w+e,t.h+e,t.ro,s,n.hitTheWall))&&(n.isHitWall=!0,V.IsGameMode_Zombie()&&t.wallColiderType==wt.BunkerWall))if(a.HasComponent(C.id)){var r=t.id.split("_")[1];for(let t=0;t<l.length;t++){let e=l[t];r==e.GetComponent(pt).bunkerID&&(P.onTriggerCollider.Trigger(a,e),n.hasColliderList.push(e.id))}}else a.HasComponent(ut.id)&&(a.GetComponent(ut).collideWithObstacle=!0)}if(!(0!=t.t||n.isInAir&&t.isC)){let e=n.radius;0<n.useSpColliderRadius&&(e=n.useSpColliderRadius),(o=this.HitCirclWall(t.p,t.r+e,s))&&(n.isHitWall=!0)}}}n.oldPos.x=s.pos.x,n.oldPos.y=s.pos.y,n.oldPos.z=s.pos.z}}}}DealBulletTrigger(){var a=this.world.GetEntitysByMatcher(this.bulletCollidersGrounp);for(let i=0;i<a.length;i++){let o=a[i],e=o.GetComponent(M),t=o.GetComponent(v);if(t.enable){var n=this.GetNeedDealTitle(e,t);for(let e=0;e<n.length;e++)n[e]&&(t.colliderAllUnit||this.DealTriggerWith(o,n[e].unitList),this.DealTriggerWith(o,n[e].itemList));if(t.colliderAllUnit){let t=this.unitGrounp.GetEntitys(this.world),i=[];for(let e=0;e<t.length;e++)i.push(t[e].id);this.DealTriggerWith(o,i)}}}}DealTriggerWith(i,o){let a=i.GetComponent(M),n=i.GetComponent(v);for(let t=0;t<o.length;t++){let e=this.world.GetEntityByID(o[t]);var s,l;e&&e.GetComponent(v).enable&&(s=e.GetComponent(M),l=e.GetComponent(v),0==n.colliderType&&-1==n.hasColliderList.indexOf(e.id)&&this.CircleHitDetect(a.pos,n.radius+l.radius,s.pos)&&(P.onTriggerCollider.Trigger(i,e),n.hasColliderList.push(e.id)),1==n.colliderType&&-1==n.hasColliderList.indexOf(e.id)&&this.BoxHitDetect(a.pos,n.width+l.radius,n.height+l.radius,a.rotation.y,s.pos)&&(P.onTriggerCollider.Trigger(i,e),n.hasColliderList.push(e.id)),2==n.colliderType&&-1==n.hasColliderList.indexOf(e.id)&&this.SectorHitDetect(a.pos,n.radius+l.radius,s.pos,a.rotation.y,n.angle)&&(P.onTriggerCollider.Trigger(i,e),n.hasColliderList.push(e.id)))}}GetNeedDealTitle(e,t){let i=null;if(!(i=this.mapData[t.nowMapPos.x]?this.mapData[t.nowMapPos.x][t.nowMapPos.y]:i))return[];let o=[];o.push(this.mapData[t.nowMapPos.x][t.nowMapPos.y]);var a=10*-t.nowMapPos.x,n=10*t.nowMapPos.y;return this.needTileDir.x=0,this.needTileDir.y=0,a-e.pos.x<2&&0<=t.nowMapPos.x-1&&(o.push(this.mapData[t.nowMapPos.x-1][t.nowMapPos.y]),--this.needTileDir.x),e.pos.x-(a-10)<2&&t.nowMapPos.x+1<this.sceneData.x&&(o.push(this.mapData[t.nowMapPos.x+1][t.nowMapPos.y]),this.needTileDir.x+=1),e.pos.z-n<2&&0<=t.nowMapPos.y-1&&(o.push(this.mapData[t.nowMapPos.x][t.nowMapPos.y-1]),--this.needTileDir.y),10+n-e.pos.z<2&&t.nowMapPos.y+1<this.sceneData.y&&(o.push(this.mapData[t.nowMapPos.x][t.nowMapPos.y+1]),this.needTileDir.y+=1),0!=this.needTileDir.x&&0!=this.needTileDir.y&&o.push(this.mapData[t.nowMapPos.x+this.needTileDir.x][t.nowMapPos.y+this.needTileDir.y]),o}GetNeed9Title(e,t){let i=[];i.push(this.mapData[e][t]);var o=0<=e-1,a=e+1<this.sceneData.x,n=t+1<this.sceneData.y,s=0<=t-1;return n&&i.push(this.mapData[e][t+1]),a&&n&&i.push(this.mapData[e+1][t+1]),a&&i.push(this.mapData[e+1][t]),a&&s&&i.push(this.mapData[e+1][t-1]),s&&i.push(this.mapData[e][t-1]),o&&s&&i.push(this.mapData[e-1][t-1]),o&&i.push(this.mapData[e-1][t]),o&&n&&i.push(this.mapData[e-1][t+1]),i}DealUnitCollder(){var o=this.world.GetEntitysByMatcher(this.unitGrounp);for(let i=0;i<o.length;i++){let t=o[i],e=t.GetComponent(v);if(e.enable){var a=this.mapData[e.nowMapPos.x][e.nowMapPos.y].itemList;if(V.IsGameMode_Zombie()){var n=this.mapData[e.nowMapPos.x][e.nowMapPos.y].unitList;this.ColliderUnit(t,n,!0,!0,!0)}else if(e.haveColliderSize){var s=this.GetNeed9Title(e.nowMapPos.x,e.nowMapPos.y);for(let e=0;e<s.length;e++)this.ColliderUnit(t,s[e].unitList)}V.IsGameMode_Zombie()?this.Zombie_ColliderUnit(t,a,!0,!1,!0):this.ColliderUnit(t,a,!0,!1,!0)}}}Zombie_ColliderUnit(o,a,n=!0,s=!0,l=!1){var r,h,m,d=o.GetComponent(M),c=o.GetComponent(v);for(let i=0;i<a.length;i++)if(o.id!=a[i]){let e=this.world.GetEntityByID(a[i]),t=e.GetComponent(y).itemID;"AddSkill"!=t&&"AddItem"!=t&&"AddWeapon"!=t&&(r=e.GetComponent(M),h=e.GetComponent(v),this.vec2_1.x=r.pos.x-d.pos.x,this.vec2_1.y=r.pos.z-d.pos.z,m=Laya.Vector2.scalarLength(this.vec2_1),h.enable&&m<c.radius+h.radius&&(c.colliderNoMove?(m=c.radius+h.radius,this.vec3_1.x=r.pos.x-d.pos.x,this.vec3_1.y=r.pos.y-d.pos.y,this.vec3_1.z=r.pos.z-d.pos.z,this.vec3_1.y=0,s&&(Laya.Vector3.normalize(this.vec3_1,this.dirVec3),Laya.Vector3.scale(this.dirVec3,m,this.dirVec3),Laya.Vector3.add(d.pos,this.dirVec3,r.pos))):(m=c.radius/(c.radius+h.radius),this.vec3_1.x=d.pos.x+(r.pos.x-d.pos.x)*m,this.vec3_1.y=d.pos.y+(r.pos.y-d.pos.y)*m,this.vec3_1.z=d.pos.z+(r.pos.z-d.pos.z)*m,this.vec3_1.y=0,m=s,n&&(Laya.Vector3.subtract(d.pos,this.vec3_1,this.dirVec3),Laya.Vector3.normalize(this.dirVec3,this.dirVec3),Laya.Vector3.scale(this.dirVec3,c.radius,this.dirVec3),Laya.Vector3.add(this.vec3_1,this.dirVec3,d.pos)),m&&(Laya.Vector3.subtract(r.pos,this.vec3_1,this.dirVec3),Laya.Vector3.normalize(this.dirVec3,this.dirVec3),Laya.Vector3.scale(this.dirVec3,h.radius,this.dirVec3),Laya.Vector3.add(this.vec3_1,this.dirVec3,r.pos))),l&&P.onTriggerCollider.Trigger(o,e)))}}ColliderUnit(a,n,s=!0,l=!0,r=!1){let h=a.GetComponent(M),m=a.GetComponent(v);for(let o=0;o<n.length;o++)if(a.id!=n[o]){let e=this.world.GetEntityByID(n[o]),t=e.GetComponent(M),i=e.GetComponent(v);this.vec2_1.x=t.pos.x-h.pos.x,this.vec2_1.y=t.pos.z-h.pos.z;var d,c,u,p,g=Laya.Vector2.scalarLength(this.vec2_1);if(i.enable&&g<m.radius+i.radius){if(r&&P.onTriggerCollider.Trigger(a,e),m.isTrigger||i.isTrigger)continue;m.colliderNoMove?(d=m.radius+i.radius,this.vec3_1.x=t.pos.x-h.pos.x,this.vec3_1.y=t.pos.y-h.pos.y,this.vec3_1.z=t.pos.z-h.pos.z,this.vec3_1.y=0,l&&(Laya.Vector3.normalize(this.vec3_1,this.dirVec3),Laya.Vector3.scale(this.dirVec3,d,this.dirVec3),Laya.Vector3.add(h.pos,this.dirVec3,t.pos))):(d=s,c=l,V.IsGameMode_Zombie()?(this.dirVec3.x=this.vec2_1.x,this.dirVec3.y=0,this.dirVec3.z=this.vec2_1.y,g=m.radius+i.radius-g,u=1-(p=i.GetWeight()/(m.GetWeight()+i.GetWeight())),d&&(Laya.Vector3.normalize(this.dirVec3,this.dirVec3),Laya.Vector3.scale(this.dirVec3,g*p,this.dirVec3),Laya.Vector3.subtract(h.pos,this.dirVec3,h.pos)),c&&(Laya.Vector3.normalize(this.dirVec3,this.dirVec3),Laya.Vector3.scale(this.dirVec3,g*u,this.dirVec3),Laya.Vector3.add(t.pos,this.dirVec3,t.pos))):(p=m.radius/(m.radius+i.radius),this.vec3_1.x=h.pos.x+(t.pos.x-h.pos.x)*p,this.vec3_1.y=h.pos.y+(t.pos.y-h.pos.y)*p,this.vec3_1.z=h.pos.z+(t.pos.z-h.pos.z)*p,this.vec3_1.y=0,d&&(Laya.Vector3.subtract(h.pos,this.vec3_1,this.dirVec3),Laya.Vector3.normalize(this.dirVec3,this.dirVec3),Laya.Vector3.scale(this.dirVec3,m.radius,this.dirVec3),Laya.Vector3.add(this.vec3_1,this.dirVec3,h.pos)),c&&(Laya.Vector3.subtract(t.pos,this.vec3_1,this.dirVec3),Laya.Vector3.normalize(this.dirVec3,this.dirVec3),Laya.Vector3.scale(this.dirVec3,i.radius,this.dirVec3),Laya.Vector3.add(this.vec3_1,this.dirVec3,t.pos))))}}}LateUpdate(){}Destroy(){}OnAddComponent(e,t){let i=e.GetComponent(M),o=e.GetComponent(v);try{var a;t.componentId==v.id&&(a=this.GetXYByPos(i.pos),o.nowMapPos.x=a.x,o.nowMapPos.y=a.y,this.mapData[o.nowMapPos.x][o.nowMapPos.y].Add(e))}catch(e){}}OnRemoveComponent(e,t){try{t.componentId==v.id&&this.mapData[t.nowMapPos.x][t.nowMapPos.y]&&this.mapData[t.nowMapPos.x][t.nowMapPos.y].Remove(e)}catch(e){}}HitBoxWall(e,t,i,o,a,n,s=!0){let l=n.pos.x-e.x,r=n.pos.z-e.z,h=S.DegToPi*-a,m=S.DegToPi*a,d=Math.sin(h),c=Math.cos(h),u=l*c-r*d,p=l*d+r*c,g=(t.x-e.x)*c-(t.z-e.z)*d,f=(t.x-e.x)*d+(t.z-e.z)*c,_=!1,I=.5*i-Math.abs(u),C=.5*o-Math.abs(p);return 0<I&&0<C&&(I<C&&(u=g<0?.5*-i:.5*i),C<I&&(p=f<0?.5*-o:.5*o),_=!0),_&&s&&(a=u*Math.cos(m)-p*Math.sin(m),t=u*Math.sin(m)+p*Math.cos(m),n.pos.x=e.x+a,n.pos.z=e.z+t),_}HitCirclWall(e,t,i){return this.hitvec2.x=i.pos.x-e.x,this.hitvec2.y=i.pos.z-e.z,Laya.Vector2.scalarLength(this.hitvec2)<t&&(Laya.Vector2.normalize(this.hitvec2,this.hitvec2),Laya.Vector2.scale(this.hitvec2,t,this.hitvec2),i.pos.x=e.x+this.hitvec2.x,i.pos.z=e.z+this.hitvec2.y,!0)}HitCirclWall1(e,t,i){return this.hitvec3.x=i.pos.x-e.x,this.hitvec3.y=i.pos.z-e.z,Laya.Vector2.scalarLength(this.hitvec3)<t}BoxHitDetect(e,t,i,o,a){let n=a.x-e.x,s=a.z-e.z,l=S.DegToPi*o,r=(S.DegToPi,Math.sin(l)),h=Math.cos(l),m=n*h-s*r,d=n*r+s*h,c=!1,u=.5*t-Math.abs(m),p=.5*i-Math.abs(d);return c=0<u&&0<p?!0:c}CircleHitDetect(e,t,i){return this.hitvec2.x=i.x-e.x,this.hitvec2.y=i.z-e.z,Laya.Vector2.scalarLength(this.hitvec2)<=t}SectorHitDetect(i,e,o,a,n){this.hitvec2.x=o.x-i.x,this.hitvec2.y=o.z-i.z;var t=Laya.Vector2.scalarLength(this.hitvec2);if(t<=.5)return!0;if(t<=e){this.vec2.x=o.x-i.x,this.vec2.y=o.z-i.z;let e=S.VecToAngle(this.vec2),t=Math.abs(a-e);if((t=180<t?360-t:t)<=.5*n)return!0}return!1}IndexToXY(e){return this.pos.y=Math.floor(e/this.sceneData.x),this.pos.x=e-this.pos.y*this.sceneData.x,this.pos}GetXYByPos(e){return this.pos.x=Math.floor(-e.x/10),this.pos.y=Math.floor(e.z/10),this.pos}},Dt=((G=wt=wt||{}).Wall="Wall",G.BunkerWall="BunkerWall",class{constructor(){this.x=0,this.y=0,this.walls=[],this.unitList=[],this.itemList=[]}Remove(t){if(t.HasComponent(R.id))for(let e=0;e<this.unitList.length;e++)if(this.unitList[e]==t.id)return void this.unitList.splice(e,1);if(t.HasComponent(y.id))for(let e=0;e<this.itemList.length;e++)if(this.itemList[e]==t.id)return void this.itemList.splice(e,1)}Add(e){e.HasComponent(R.id)&&-1==this.unitList.indexOf(e.id)?this.unitList.push(e.id):e.HasComponent(y.id)&&-1==this.itemList.indexOf(e.id)&&this.itemList.push(e.id)}}),Ut=class{static RandomGet(e){return e[Math.floor(e.length*Math.random())]}static RandomGetAndClear(e){var t=Math.floor(e.length*Math.random()),i=e[t];return e.splice(t,1),i}static RandomGetFromDice(e){var t=this.GetKeyFromDice(e);return e[t[Math.floor(t.length*Math.random())]]}static GetKeyFromDice(e){let t=[];for(const i in e)e.hasOwnProperty(i)&&t.push(i);return t}},E=class extends e{constructor(){super(...arguments),this.netId="",this.team=0}},Lt=class extends e{constructor(){super(...arguments),this.expoPoins=[],this.items=[],this.nextCreatHp=0}},Bt=class{constructor(){this.list=[],this.maxValue=0}AddWeightItem(e,t){e=new class{constructor(e,t){this.id=e,this.weight=t}}(e,t);this.list.push(e)}Calculate(){let t=0;for(let e=0;e<this.list.length;e++)this.list[e].min=t,t+=this.list[e].weight,this.list[e].max=t;this.maxValue=t}RandomItem(){let t=Math.floor(q.Random()*this.maxValue);t==this.maxValue&&(t=this.maxValue-1);for(let e=0;e<this.list.length;e++)if(t>=this.list[e].min&&t<this.list[e].max)return this.list[e].id;return""}},N=class{},i=(N.Arrow="Arrow",N.Bullet_AirBlade="Bullet_AirBlade",N.Bullet_Barrage="Bullet_Barrage",N.Bullet_Boss_Bullet1="Bullet_Boss_Bullet1",N.Bullet_BossTrample="Bullet_BossTrample",N.Bullet_Bullet2="Bullet_Bullet2",N.Bullet_Bullet4="Bullet_Bullet4",N.Bullet_Dagger_Bullet1="Bullet_Dagger_Bullet1",N.Bullet_Dagger_Bullet2="Bullet_Dagger_Bullet2",N.Bullet_Dagger_Bullet3="Bullet_Dagger_Bullet3",N.Bullet_DashBullet="Bullet_DashBullet",N.Bullet_DeathLaserBullet="Bullet_DeathLaserBullet",N.Bullet_EnergyBall="Bullet_EnergyBall",N.Bullet_ExplodingBullet="Bullet_ExplodingBullet",N.Bullet_FrozenMine="Bullet_FrozenMine",N.Bullet_Gou="Bullet_Gou",N.Bullet_Grenade="Bullet_Grenade",N.Bullet_GunBullet1="Bullet_GunBullet1",N.Bullet_GunBullet2="Bullet_GunBullet2",N.Bullet_GunBullet3="Bullet_GunBullet3",N.Bullet_GunBullet4="Bullet_GunBullet4",N.Bullet_GunBullet5="Bullet_GunBullet5",N.Bullet_GunBullet26="Bullet_GunBullet26",N.Bullet_GunBullet29="Bullet_GunBullet29",N.Bullet_GunBullet31="Bullet_GunBullet31",N.Bullet_GunBullet34="Bullet_GunBullet34",N.Bullet_GunBullet35="Bullet_GunBullet35",N.Bullet_GunBullet36="Bullet_GunBullet36",N.Bullet_GunBullet39="Bullet_GunBullet39",N.Bullet_GunBullet41="Bullet_GunBullet41",N.Bullet_GunBullet42="Bullet_GunBullet42",N.Bullet_GunBullet44="Bullet_GunBullet44",N.Bullet_GunBullet45="Bullet_GunBullet45",N.Bullet_GunBullet46="Bullet_GunBullet46",N.Bullet_GunBullet47="Bullet_GunBullet47",N.Bullet_GunBullet49="Bullet_GunBullet49",N.Bullet_GunBullet50="Bullet_GunBullet50",N.Bullet_GunBullet52="Bullet_GunBullet52",N.Bullet_GunBullet54="Bullet_GunBullet54",N.Bullet_GunBullet55="Bullet_GunBullet55",N.Bullet_GunBullet56="Bullet_GunBullet56",N.Bullet_GunBullet57="Bullet_GunBullet57",N.Bullet_GunBullet58="Bullet_GunBullet58",N.Bullet_GunBullet59="Bullet_GunBullet59",N.Bullet_GunBullet60="Bullet_GunBullet60",N.Bullet_GunBullet66="Bullet_GunBullet66",N.Bullet_GunBullet67="Bullet_GunBullet67",N.Bullet_GunBullet68="Bullet_GunBullet68",N.Bullet_GunBullet69="Bullet_GunBullet69",N.Bullet_GunBullet70="Bullet_GunBullet70",N.Bullet_Hailstone="Bullet_Hailstone",N.Bullet_IceBall="Bullet_IceBall",N.Bullet_jidan="Bullet_jidan",N.Bullet_LandPowerExpo="Bullet_LandPowerExpo",N.Bullet_LazerBullet1="Bullet_LazerBullet1",N.Bullet_LazerBullet="Bullet_LazerBullet",N.Bullet_LazerBullet2="Bullet_LazerBullet2",N.Bullet_LightningBullet="Bullet_LightningBullet",N.Bullet_MachineGunBullet1="Bullet_MachineGunBullet1",N.Bullet_MachineGunBullet2="Bullet_MachineGunBullet2",N.Bullet_NianSkill2Bullet="Bullet_NianSkill2Bullet",N.Bullet_NianSkill3Bullet="Bullet_NianSkill3Bullet",N.Bullet_Pi="Bullet_Pi",N.Bullet_PKBullet="Bullet_PKBullet",N.Bullet_Qi4Bullet="Bullet_Qi4Bullet",N.Bullet_ShuiDi="Bullet_ShuiDi",N.Bullet_SnowBall="Bullet_SnowBall",N.Bullet_SpinBullet="Bullet_SpinBullet",N.Bullet_SuckBlood="Bullet_SuckBlood",N.Bullet_Sword_Bullet1="Bullet_Sword_Bullet1",N.Bullet_Sword_Bullet2="Bullet_Sword_Bullet2",N.Bullet_Sword_Bullet3="Bullet_Sword_Bullet3",N.Bullet_TangGuo="Bullet_TangGuo",N.Bullet_Trample="Bullet_Trample",N.Bullet_WanJuQiang="Bullet_WanJuQiang",N.Bullet_ZombieBullet="Bullet_ZombieBullet",N.Bullet_ZombieMode_AirBlade="Bullet_ZombieMode_AirBlade",N.Bullet_ZombieMode_EnergyBall="Bullet_ZombieMode_EnergyBall",N.Bullet_ZombieMode_FrozenMine="Bullet_ZombieMode_FrozenMine",N.Bullet_ZombieMode_Gou="Bullet_ZombieMode_Gou",N.Bullet_ZombieMode_IceBall="Bullet_ZombieMode_IceBall",N.Bullet_ZombieMode_SuckBlood="Bullet_ZombieMode_SuckBlood",N.CameraRoot="CameraRoot",N.CameraRootGameOver="CameraRootGameOver",N.CoverCameraRoot="CoverCameraRoot",N.DefaultSp="DefaultSp",N.DropBox="DropBox",N.Effect_AddChestEffect="Effect_AddChestEffect",N.Effect_Adrenaline="Effect_Adrenaline",N.Effect_AimingTrajectory="Effect_AimingTrajectory",N.Effect_AimingTrajectory1="Effect_AimingTrajectory1",N.Effect_AttackRange1="Effect_AttackRange1",N.Effect_AttackRange="Effect_AttackRange",N.Effect_AttackRange3="Effect_AttackRange3",N.Effect_BeingTargeted="Effect_BeingTargeted",N.Effect_BeingTargeted1="Effect_BeingTargeted1",N.Effect_Bleed="Effect_Bleed",N.Effect_Blood="Effect_Blood",N.Effect_BlueInvincibleEffect="Effect_BlueInvincibleEffect",N.Effect_BossDust="Effect_BossDust",N.Effect_BulletFireWork="Effect_BulletFireWork",N.Effect_CarSmoke="Effect_CarSmoke",N.Effect_Chain="Effect_Chain",N.Effect_ChooseOneEffect="Effect_ChooseOneEffect",N.Effect_ChunLian="Effect_ChunLian",N.Effect_Danger1="Effect_Danger1",N.Effect_Danger2="Effect_Danger2",N.Effect_Danger3="Effect_Danger3",N.Effect_DeadOutLine="Effect_DeadOutLine",N.Effect_DeathLaser="Effect_DeathLaser",N.Effect_DizzEffect="Effect_DizzEffect",N.Effect_DmgBuffEffect="Effect_DmgBuffEffect",N.Effect_DustZone="Effect_DustZone",N.Effect_EatMashRoomEffect="Effect_EatMashRoomEffect",N.Effect_ExplodingEffect="Effect_ExplodingEffect",N.Effect_ExplodingEffectBullect="Effect_ExplodingEffectBullect",N.Effect_ExplosionExpo="Effect_ExplosionExpo",N.Effect_ExpPoint="Effect_ExpPoint",N.Effect_FeiJi="Effect_FeiJi",N.Effect_FireWork="Effect_FireWork",N.Effect_FrieEffet2="Effect_FrieEffet2",N.Effect_FrightenZone="Effect_FrightenZone",N.Effect_FrostZone="Effect_FrostZone",N.Effect_FrozenMine="Effect_FrozenMine",N.Effect_GetItemEffect="Effect_GetItemEffect",N.Effect_GoldInvincibleEffect="Effect_GoldInvincibleEffect",N.Effect_HealEffect="Effect_HealEffect",N.Effect_HeBaoDan="Effect_HeBaoDan",N.Effect_HitEffect="Effect_HitEffect",N.Effect_IceBuff="Effect_IceBuff",N.Effect_InvincibleEffect2="Effect_InvincibleEffect2",N.Effect_InvincibleEffect3="Effect_InvincibleEffect3",N.Effect_JianDao1="Effect_JianDao1",N.Effect_JianDao2="Effect_JianDao2",N.Effect_JianDaoEffect="Effect_JianDaoEffect",N.Effect_LevelUp="Effect_LevelUp",N.Effect_LightEffect="Effect_LightEffect",N.Effect_LightningBall="Effect_LightningBall",N.Effect_LongLightning="Effect_LongLightning",N.Effect_MagicNovaBlue="Effect_MagicNovaBlue",N.Effect_MagicNovaRed="Effect_MagicNovaRed",N.Effect_NianExpo="Effect_NianExpo",N.Effect_NianSkill3Effect="Effect_NianSkill3Effect",N.Effect_Parry="Effect_Parry",N.Effect_PhotonBlade="Effect_PhotonBlade",N.Effect_PhotonBlade2="Effect_PhotonBlade2",N.Effect_PhotonBlade3="Effect_PhotonBlade3",N.Effect_PickUp="Effect_PickUp",N.Effect_QuestDigHole="Effect_QuestDigHole",N.Effect_QuestRange="Effect_QuestRange",N.Effect_QuestSign="Effect_QuestSign",N.Effect_ReadyEffect="Effect_ReadyEffect",N.Effect_SeaPowerMoveEffect="Effect_SeaPowerMoveEffect",N.Effect_Shield="Effect_Shield",N.Effect_SnowManBuff="Effect_SnowManBuff",N.Effect_SnowWeatherEffect="Effect_SnowWeatherEffect",N.Effect_SpeedUpEffect="Effect_SpeedUpEffect",N.Effect_SuckLine="Effect_SuckLine",N.Effect_WallBoxBreak="Effect_WallBoxBreak",N.Effect_WallBoxHited="Effect_WallBoxHited",N.Effect_ZhiShiBiao="Effect_ZhiShiBiao",N.Effect_ZombieMode_Chain="Effect_ZombieMode_Chain",N.Effect_ZombieMode_Danger1="Effect_ZombieMode_Danger1",N.Effect_ZombieMode_Danger2="Effect_ZombieMode_Danger2",N.Effect_ZombieMode_Danger3="Effect_ZombieMode_Danger3",N.Fog="Fog",N.Item_AddHpItem="Item_AddHpItem",N.Item_AddItem="Item_AddItem",N.Item_AddSkill="Item_AddSkill",N.Item_AddWeapon="Item_AddWeapon",N.Item_BaoZhuChest="Item_BaoZhuChest",N.Item_Battery="Item_Battery",N.Item_Bolt="Item_Bolt",N.Item_Bunker="Item_Bunker",N.Item_Bunker2="Item_Bunker2",N.Item_Bunker3="Item_Bunker3",N.Item_Bunker4="Item_Bunker4",N.Item_Bunker5="Item_Bunker5",N.Item_BunkerTrigger="Item_BunkerTrigger",N.Item_Car1="Item_Car1",N.Item_CarItem="Item_CarItem",N.Item_CarTrigger="Item_CarTrigger",N.Item_Chest="Item_Chest",N.Item_Chest0="Item_Chest0",N.Item_Chest1="Item_Chest1",N.Item_Coins="Item_Coins",N.Item_Diamond="Item_Diamond",N.Item_DmgBuffItem="Item_DmgBuffItem",N.Item_DoorCollider="Item_DoorCollider",N.Item_DoorTriggerArea="Item_DoorTriggerArea",N.Item_Gear_Bolt="Item_Gear_Bolt",N.Item_Gear_Chest="Item_Gear_Chest",N.Item_Gear_Foot="Item_Gear_Foot",N.Item_Gear_Head="Item_Gear_Head",N.Item_Gear_Ring="Item_Gear_Ring",N.Item_GuideTrigger="Item_GuideTrigger",N.Item_HongBao="Item_HongBao",N.Item_ItemCreator="Item_ItemCreator",N.Item_ItemTrigger="Item_ItemTrigger",N.Item_MashRoom="Item_MashRoom",N.Item_NewYear_Char="Item_NewYear_Char",N.Item_NewYearChest="Item_NewYearChest",N.Item_Robot="Item_Robot",N.Item_RockWall="Item_RockWall",N.Item_ShaDai="Item_ShaDai",N.Item_SpeedUpBuffItem="Item_SpeedUpBuffItem",N.Item_SpItem="Item_SpItem",N.Item_SpItemKey="Item_SpItemKey",N.Item_TentTrigger="Item_TentTrigger",N.Item_Turret="Item_Turret",N.Item_TurretItem="Item_TurretItem",N.Item_WallBox="Item_WallBox",N.Item_WallBox2="Item_WallBox2",N.Item_ZCoins="Item_ZCoins",N.Item_ZombieFactory="Item_ZombieFactory",N.Item_ZombieMode_RockWall="Item_ZombieMode_RockWall",N.Monster1="Monster1",N.Player="Player",N.Point="Point",N.Shadow="Shadow",N.Weapon_THAssault="Weapon_THAssault",N.Weapon_THAxe="Weapon_THAxe",N.Weapon_THDagger="Weapon_THDagger",N.Weapon_THGun="Weapon_THGun",N.Weapon_THHeavyGun="Weapon_THHeavyGun",N.Weapon_THInfantryGun="Weapon_THInfantryGun",N.Weapon_THMachineGun="Weapon_THMachineGun",N.Weapon_THSubmachine="Weapon_THSubmachine",N.Weapon_THSword="Weapon_THSword",N.Zombie="Zombie",N.Zombie_bak="Zombie_bak",N.ZombieKing="ZombieKing",class{}),o=(i.Arrow="Arrow",i.Bullet_AirBlade="Bullet_AirBlade",i.Bullet_Barrage="Bullet_Barrage",i.Bullet_Boss_Bullet1="Bullet_Boss_Bullet1",i.Bullet_BossTrample="Bullet_BossTrample",i.Bullet_Bullet2="Bullet_Bullet2",i.Bullet_Bullet4="Bullet_Bullet4",i.Bullet_Dagger_Bullet1="Bullet_Dagger_Bullet1",i.Bullet_Dagger_Bullet2="Bullet_Dagger_Bullet2",i.Bullet_Dagger_Bullet3="Bullet_Dagger_Bullet3",i.Bullet_DashBullet="Bullet_DashBullet",i.Bullet_DeathLaserBullet="Bullet_DeathLaserBullet",i.Bullet_EnergyBall="Bullet_EnergyBall",i.Bullet_ExplodingBullet="Bullet_ExplodingBullet",i.Bullet_FrozenMine="Bullet_FrozenMine",i.Bullet_Gou="Bullet_Gou",i.Bullet_Grenade="Bullet_Grenade",i.Bullet_GunBullet1="Bullet_GunBullet1",i.Bullet_GunBullet2="Bullet_GunBullet2",i.Bullet_GunBullet3="Bullet_GunBullet3",i.Bullet_GunBullet4="Bullet_GunBullet4",i.Bullet_GunBullet5="Bullet_GunBullet5",i.Bullet_GunBullet26="Bullet_GunBullet26",i.Bullet_GunBullet29="Bullet_GunBullet29",i.Bullet_GunBullet31="Bullet_GunBullet31",i.Bullet_GunBullet34="Bullet_GunBullet34",i.Bullet_GunBullet35="Bullet_GunBullet35",i.Bullet_GunBullet36="Bullet_GunBullet36",i.Bullet_GunBullet39="Bullet_GunBullet39",i.Bullet_GunBullet41="Bullet_GunBullet41",i.Bullet_GunBullet42="Bullet_GunBullet42",i.Bullet_GunBullet44="Bullet_GunBullet44",i.Bullet_GunBullet45="Bullet_GunBullet45",i.Bullet_GunBullet46="Bullet_GunBullet46",i.Bullet_GunBullet47="Bullet_GunBullet47",i.Bullet_GunBullet49="Bullet_GunBullet49",i.Bullet_GunBullet50="Bullet_GunBullet50",i.Bullet_GunBullet52="Bullet_GunBullet52",i.Bullet_GunBullet54="Bullet_GunBullet54",i.Bullet_GunBullet55="Bullet_GunBullet55",i.Bullet_GunBullet56="Bullet_GunBullet56",i.Bullet_GunBullet57="Bullet_GunBullet57",i.Bullet_GunBullet58="Bullet_GunBullet58",i.Bullet_GunBullet59="Bullet_GunBullet59",i.Bullet_GunBullet60="Bullet_GunBullet60",i.Bullet_GunBullet66="Bullet_GunBullet66",i.Bullet_GunBullet67="Bullet_GunBullet67",i.Bullet_GunBullet68="Bullet_GunBullet68",i.Bullet_GunBullet69="Bullet_GunBullet69",i.Bullet_GunBullet70="Bullet_GunBullet70",i.Bullet_Hailstone="Bullet_Hailstone",i.Bullet_IceBall="Bullet_IceBall",i.Bullet_jidan="Bullet_jidan",i.Bullet_LandPowerExpo="Bullet_LandPowerExpo",i.Bullet_LazerBullet1="Bullet_LazerBullet1",i.Bullet_LazerBullet="Bullet_LazerBullet",i.Bullet_LazerBullet2="Bullet_LazerBullet2",i.Bullet_LightningBullet="Bullet_LightningBullet",i.Bullet_MachineGunBullet1="Bullet_MachineGunBullet1",i.Bullet_MachineGunBullet2="Bullet_MachineGunBullet2",i.Bullet_NianSkill2Bullet="Bullet_NianSkill2Bullet",i.Bullet_NianSkill3Bullet="Bullet_NianSkill3Bullet",i.Bullet_Pi="Bullet_Pi",i.Bullet_PKBullet="Bullet_PKBullet",i.Bullet_Qi4Bullet="Bullet_Qi4Bullet",i.Bullet_ShuiDi="Bullet_ShuiDi",i.Bullet_SnowBall="Bullet_SnowBall",i.Bullet_SpinBullet="Bullet_SpinBullet",i.Bullet_SuckBlood="Bullet_SuckBlood",i.Bullet_Sword_Bullet1="Bullet_Sword_Bullet1",i.Bullet_Sword_Bullet2="Bullet_Sword_Bullet2",i.Bullet_Sword_Bullet3="Bullet_Sword_Bullet3",i.Bullet_TangGuo="Bullet_TangGuo",i.Bullet_Trample="Bullet_Trample",i.Bullet_WanJuQiang="Bullet_WanJuQiang",i.Bullet_ZombieBullet="Bullet_ZombieBullet",i.Bullet_ZombieMode_AirBlade="Bullet_ZombieMode_AirBlade",i.Bullet_ZombieMode_EnergyBall="Bullet_ZombieMode_EnergyBall",i.Bullet_ZombieMode_FrozenMine="Bullet_ZombieMode_FrozenMine",i.Bullet_ZombieMode_Gou="Bullet_ZombieMode_Gou",i.Bullet_ZombieMode_IceBall="Bullet_ZombieMode_IceBall",i.Bullet_ZombieMode_SuckBlood="Bullet_ZombieMode_SuckBlood",i.CameraRoot="CameraRoot",i.CameraRootGameOver="CameraRootGameOver",i.CoverCameraRoot="CoverCameraRoot",i.DefaultSp="DefaultSp",i.DropBox="DropBox",i.Effect_AddChestEffect="Effect_AddChestEffect",i.Effect_Adrenaline="Effect_Adrenaline",i.Effect_AimingTrajectory="Effect_AimingTrajectory",i.Effect_AimingTrajectory1="Effect_AimingTrajectory1",i.Effect_AttackRange1="Effect_AttackRange1",i.Effect_AttackRange="Effect_AttackRange",i.Effect_AttackRange3="Effect_AttackRange3",i.Effect_BeingTargeted="Effect_BeingTargeted",i.Effect_BeingTargeted1="Effect_BeingTargeted1",i.Effect_Bleed="Effect_Bleed",i.Effect_Blood="Effect_Blood",i.Effect_BlueInvincibleEffect="Effect_BlueInvincibleEffect",i.Effect_BossDust="Effect_BossDust",i.Effect_BulletFireWork="Effect_BulletFireWork",i.Effect_CarSmoke="Effect_CarSmoke",i.Effect_Chain="Effect_Chain",i.Effect_ChooseOneEffect="Effect_ChooseOneEffect",i.Effect_ChunLian="Effect_ChunLian",i.Effect_Danger1="Effect_Danger1",i.Effect_Danger2="Effect_Danger2",i.Effect_Danger3="Effect_Danger3",i.Effect_DeadOutLine="Effect_DeadOutLine",i.Effect_DeathLaser="Effect_DeathLaser",i.Effect_DizzEffect="Effect_DizzEffect",i.Effect_DmgBuffEffect="Effect_DmgBuffEffect",i.Effect_DustZone="Effect_DustZone",i.Effect_EatMashRoomEffect="Effect_EatMashRoomEffect",i.Effect_ExplodingEffect="Effect_ExplodingEffect",i.Effect_ExplodingEffectBullect="Effect_ExplodingEffectBullect",i.Effect_ExplosionExpo="Effect_ExplosionExpo",i.Effect_ExpPoint="Effect_ExpPoint",i.Effect_FeiJi="Effect_FeiJi",i.Effect_FireWork="Effect_FireWork",i.Effect_FrieEffet2="Effect_FrieEffet2",i.Effect_FrightenZone="Effect_FrightenZone",i.Effect_FrostZone="Effect_FrostZone",i.Effect_FrozenMine="Effect_FrozenMine",i.Effect_GetItemEffect="Effect_GetItemEffect",i.Effect_GoldInvincibleEffect="Effect_GoldInvincibleEffect",i.Effect_HealEffect="Effect_HealEffect",i.Effect_HeBaoDan="Effect_HeBaoDan",i.Effect_HitEffect="Effect_HitEffect",i.Effect_IceBuff="Effect_IceBuff",i.Effect_InvincibleEffect2="Effect_InvincibleEffect2",i.Effect_InvincibleEffect3="Effect_InvincibleEffect3",i.Effect_JianDao1="Effect_JianDao1",i.Effect_JianDao2="Effect_JianDao2",i.Effect_JianDaoEffect="Effect_JianDaoEffect",i.Effect_LevelUp="Effect_LevelUp",i.Effect_LightEffect="Effect_LightEffect",i.Effect_LightningBall="Effect_LightningBall",i.Effect_LongLightning="Effect_LongLightning",i.Effect_MagicNovaBlue="Effect_MagicNovaBlue",i.Effect_MagicNovaRed="Effect_MagicNovaRed",i.Effect_NianExpo="Effect_NianExpo",i.Effect_NianSkill3Effect="Effect_NianSkill3Effect",i.Effect_Parry="Effect_Parry",i.Effect_PhotonBlade="Effect_PhotonBlade",i.Effect_PhotonBlade2="Effect_PhotonBlade2",i.Effect_PhotonBlade3="Effect_PhotonBlade3",i.Effect_PickUp="Effect_PickUp",i.Effect_QuestDigHole="Effect_QuestDigHole",i.Effect_QuestRange="Effect_QuestRange",i.Effect_QuestSign="Effect_QuestSign",i.Effect_ReadyEffect="Effect_ReadyEffect",i.Effect_SeaPowerMoveEffect="Effect_SeaPowerMoveEffect",i.Effect_Shield="Effect_Shield",i.Effect_SnowManBuff="Effect_SnowManBuff",i.Effect_SnowWeatherEffect="Effect_SnowWeatherEffect",i.Effect_SpeedUpEffect="Effect_SpeedUpEffect",i.Effect_SuckLine="Effect_SuckLine",i.Effect_WallBoxBreak="Effect_WallBoxBreak",i.Effect_WallBoxHited="Effect_WallBoxHited",i.Effect_ZhiShiBiao="Effect_ZhiShiBiao",i.Effect_ZombieMode_Chain="Effect_ZombieMode_Chain",i.Effect_ZombieMode_Danger1="Effect_ZombieMode_Danger1",i.Effect_ZombieMode_Danger2="Effect_ZombieMode_Danger2",i.Effect_ZombieMode_Danger3="Effect_ZombieMode_Danger3",i.Fog="Fog",i.Item_AddHpItem="Item_AddHpItem",i.Item_AddItem="Item_AddItem",i.Item_AddSkill="Item_AddSkill",i.Item_AddWeapon="Item_AddWeapon",i.Item_BaoZhuChest="Item_BaoZhuChest",i.Item_Battery="Item_Battery",i.Item_Bolt="Item_Bolt",i.Item_Bunker="Item_Bunker",i.Item_Bunker2="Item_Bunker2",i.Item_Bunker3="Item_Bunker3",i.Item_Bunker4="Item_Bunker4",i.Item_Bunker5="Item_Bunker5",i.Item_BunkerTrigger="Item_BunkerTrigger",i.Item_Car1="Item_Car1",i.Item_CarItem="Item_CarItem",i.Item_CarTrigger="Item_CarTrigger",i.Item_Chest="Item_Chest",i.Item_Chest0="Item_Chest0",i.Item_Chest1="Item_Chest1",i.Item_Coins="Item_Coins",i.Item_Diamond="Item_Diamond",i.Item_DmgBuffItem="Item_DmgBuffItem",i.Item_DoorCollider="Item_DoorCollider",i.Item_DoorTriggerArea="Item_DoorTriggerArea",i.Item_Gear_Bolt="Item_Gear_Bolt",i.Item_Gear_Chest="Item_Gear_Chest",i.Item_Gear_Foot="Item_Gear_Foot",i.Item_Gear_Head="Item_Gear_Head",i.Item_Gear_Ring="Item_Gear_Ring",i.Item_GuideTrigger="Item_GuideTrigger",i.Item_HongBao="Item_HongBao",i.Item_ItemCreator="Item_ItemCreator",i.Item_ItemTrigger="Item_ItemTrigger",i.Item_MashRoom="Item_MashRoom",i.Item_NewYear_Char="Item_NewYear_Char",i.Item_NewYearChest="Item_NewYearChest",i.Item_Robot="Item_Robot",i.Item_RockWall="Item_RockWall",i.Item_ShaDai="Item_ShaDai",i.Item_SpeedUpBuffItem="Item_SpeedUpBuffItem",i.Item_SpItem="Item_SpItem",i.Item_SpItemKey="Item_SpItemKey",i.Item_TentTrigger="Item_TentTrigger",i.Item_Turret="Item_Turret",i.Item_TurretItem="Item_TurretItem",i.Item_WallBox="Item_WallBox",i.Item_WallBox2="Item_WallBox2",i.Item_ZCoins="Item_ZCoins",i.Item_ZombieFactory="Item_ZombieFactory",i.Item_ZombieMode_RockWall="Item_ZombieMode_RockWall",i.Monster1="Monster1",i.Player="Player",i.Point="Point",i.Shadow="Shadow",i.Weapon_THAssault="Weapon_THAssault",i.Weapon_THAxe="Weapon_THAxe",i.Weapon_THDagger="Weapon_THDagger",i.Weapon_THGun="Weapon_THGun",i.Weapon_THHeavyGun="Weapon_THHeavyGun",i.Weapon_THInfantryGun="Weapon_THInfantryGun",i.Weapon_THMachineGun="Weapon_THMachineGun",i.Weapon_THSubmachine="Weapon_THSubmachine",i.Weapon_THSword="Weapon_THSword",i.Zombie="Zombie",i.Zombie_bak="Zombie_bak",i.ZombieKing="ZombieKing",i.AllPrefabList=["Arrow","Bullet_AirBlade","Bullet_Barrage","Bullet_Boss_Bullet1","Bullet_BossTrample","Bullet_Bullet2","Bullet_Bullet4","Bullet_Dagger_Bullet1","Bullet_Dagger_Bullet2","Bullet_Dagger_Bullet3","Bullet_DashBullet","Bullet_DeathLaserBullet","Bullet_EnergyBall","Bullet_ExplodingBullet","Bullet_FrozenMine","Bullet_Gou","Bullet_Grenade","Bullet_GunBullet1","Bullet_GunBullet2","Bullet_GunBullet3","Bullet_GunBullet4","Bullet_GunBullet5","Bullet_GunBullet26","Bullet_GunBullet29","Bullet_GunBullet31","Bullet_GunBullet34","Bullet_GunBullet35","Bullet_GunBullet36","Bullet_GunBullet39","Bullet_GunBullet41","Bullet_GunBullet42","Bullet_GunBullet44","Bullet_GunBullet45","Bullet_GunBullet46","Bullet_GunBullet47","Bullet_GunBullet49","Bullet_GunBullet50","Bullet_GunBullet52","Bullet_GunBullet54","Bullet_GunBullet55","Bullet_GunBullet56","Bullet_GunBullet57","Bullet_GunBullet58","Bullet_GunBullet59","Bullet_GunBullet60","Bullet_GunBullet66","Bullet_GunBullet67","Bullet_GunBullet68","Bullet_GunBullet69","Bullet_GunBullet70","Bullet_Hailstone","Bullet_IceBall","Bullet_jidan","Bullet_LandPowerExpo","Bullet_LazerBullet1","Bullet_LazerBullet","Bullet_LazerBullet2","Bullet_LightningBullet","Bullet_MachineGunBullet1","Bullet_MachineGunBullet2","Bullet_NianSkill2Bullet","Bullet_NianSkill3Bullet","Bullet_Pi","Bullet_PKBullet","Bullet_Qi4Bullet","Bullet_ShuiDi","Bullet_SnowBall","Bullet_SpinBullet","Bullet_SuckBlood","Bullet_Sword_Bullet1","Bullet_Sword_Bullet2","Bullet_Sword_Bullet3","Bullet_TangGuo","Bullet_Trample","Bullet_WanJuQiang","Bullet_ZombieBullet","Bullet_ZombieMode_AirBlade","Bullet_ZombieMode_EnergyBall","Bullet_ZombieMode_FrozenMine","Bullet_ZombieMode_Gou","Bullet_ZombieMode_IceBall","Bullet_ZombieMode_SuckBlood","CameraRoot","CameraRootGameOver","CoverCameraRoot","DefaultSp","DropBox","Effect_AddChestEffect","Effect_Adrenaline","Effect_AimingTrajectory","Effect_AimingTrajectory1","Effect_AttackRange1","Effect_AttackRange","Effect_AttackRange3","Effect_BeingTargeted","Effect_BeingTargeted1","Effect_Bleed","Effect_Blood","Effect_BlueInvincibleEffect","Effect_BossDust","Effect_BulletFireWork","Effect_CarSmoke","Effect_Chain","Effect_ChooseOneEffect","Effect_ChunLian","Effect_Danger1","Effect_Danger2","Effect_Danger3","Effect_DeadOutLine","Effect_DeathLaser","Effect_DizzEffect","Effect_DmgBuffEffect","Effect_DustZone","Effect_EatMashRoomEffect","Effect_ExplodingEffect","Effect_ExplodingEffectBullect","Effect_ExplosionExpo","Effect_ExpPoint","Effect_FeiJi","Effect_FireWork","Effect_FrieEffet2","Effect_FrightenZone","Effect_FrostZone","Effect_FrozenMine","Effect_GetItemEffect","Effect_GoldInvincibleEffect","Effect_HealEffect","Effect_HeBaoDan","Effect_HitEffect","Effect_IceBuff","Effect_InvincibleEffect2","Effect_InvincibleEffect3","Effect_JianDao1","Effect_JianDao2","Effect_JianDaoEffect","Effect_LevelUp","Effect_LightEffect","Effect_LightningBall","Effect_LongLightning","Effect_MagicNovaBlue","Effect_MagicNovaRed","Effect_NianExpo","Effect_NianSkill3Effect","Effect_Parry","Effect_PhotonBlade","Effect_PhotonBlade2","Effect_PhotonBlade3","Effect_PickUp","Effect_QuestDigHole","Effect_QuestRange","Effect_QuestSign","Effect_ReadyEffect","Effect_SeaPowerMoveEffect","Effect_Shield","Effect_SnowManBuff","Effect_SnowWeatherEffect","Effect_SpeedUpEffect","Effect_SuckLine","Effect_WallBoxBreak","Effect_WallBoxHited","Effect_ZhiShiBiao","Effect_ZombieMode_Chain","Effect_ZombieMode_Danger1","Effect_ZombieMode_Danger2","Effect_ZombieMode_Danger3","Fog","Item_AddHpItem","Item_AddItem","Item_AddSkill","Item_AddWeapon","Item_BaoZhuChest","Item_Battery","Item_Bolt","Item_Bunker","Item_Bunker2","Item_Bunker3","Item_Bunker4","Item_Bunker5","Item_BunkerTrigger","Item_Car1","Item_CarItem","Item_CarTrigger","Item_Chest","Item_Chest0","Item_Chest1","Item_Coins","Item_Diamond","Item_DmgBuffItem","Item_DoorCollider","Item_DoorTriggerArea","Item_Gear_Bolt","Item_Gear_Chest","Item_Gear_Foot","Item_Gear_Head","Item_Gear_Ring","Item_GuideTrigger","Item_HongBao","Item_ItemCreator","Item_ItemTrigger","Item_MashRoom","Item_NewYear_Char","Item_NewYearChest","Item_Robot","Item_RockWall","Item_ShaDai","Item_SpeedUpBuffItem","Item_SpItem","Item_SpItemKey","Item_TentTrigger","Item_Turret","Item_TurretItem","Item_WallBox","Item_WallBox2","Item_ZCoins","Item_ZombieFactory","Item_ZombieMode_RockWall","Monster1","Player","Point","Shadow","Weapon_THAssault","Weapon_THAxe","Weapon_THDagger","Weapon_THGun","Weapon_THHeavyGun","Weapon_THInfantryGun","Weapon_THMachineGun","Weapon_THSubmachine","Weapon_THSword","Zombie","Zombie_bak","ZombieKing"],class{static GetRes(e){switch(e){case i.Arrow:return this.Arrow;case i.Bullet_AirBlade:return this.Bullet_AirBlade;case i.Bullet_Barrage:return this.Bullet_Barrage;case i.Bullet_Boss_Bullet1:return this.Bullet_Boss_Bullet1;case i.Bullet_BossTrample:return this.Bullet_BossTrample;case i.Bullet_Bullet2:return this.Bullet_Bullet2;case i.Bullet_Bullet4:return this.Bullet_Bullet4;case i.Bullet_Dagger_Bullet1:return this.Bullet_Dagger_Bullet1;case i.Bullet_Dagger_Bullet2:return this.Bullet_Dagger_Bullet2;case i.Bullet_Dagger_Bullet3:return this.Bullet_Dagger_Bullet3;case i.Bullet_DashBullet:return this.Bullet_DashBullet;case i.Bullet_DeathLaserBullet:return this.Bullet_DeathLaserBullet;case i.Bullet_EnergyBall:return this.Bullet_EnergyBall;case i.Bullet_ExplodingBullet:return this.Bullet_ExplodingBullet;case i.Bullet_FrozenMine:return this.Bullet_FrozenMine;case i.Bullet_Gou:return this.Bullet_Gou;case i.Bullet_Grenade:return this.Bullet_Grenade;case i.Bullet_GunBullet1:return this.Bullet_GunBullet1;case i.Bullet_GunBullet2:return this.Bullet_GunBullet2;case i.Bullet_GunBullet3:return this.Bullet_GunBullet3;case i.Bullet_GunBullet4:return this.Bullet_GunBullet4;case i.Bullet_GunBullet5:return this.Bullet_GunBullet5;case i.Bullet_GunBullet26:return this.Bullet_GunBullet26;case i.Bullet_GunBullet29:return this.Bullet_GunBullet29;case i.Bullet_GunBullet31:return this.Bullet_GunBullet31;case i.Bullet_GunBullet34:return this.Bullet_GunBullet34;case i.Bullet_GunBullet35:return this.Bullet_GunBullet35;case i.Bullet_GunBullet36:return this.Bullet_GunBullet36;case i.Bullet_GunBullet39:return this.Bullet_GunBullet39;case i.Bullet_GunBullet41:return this.Bullet_GunBullet41;case i.Bullet_GunBullet42:return this.Bullet_GunBullet42;case i.Bullet_GunBullet44:return this.Bullet_GunBullet44;case i.Bullet_GunBullet45:return this.Bullet_GunBullet45;case i.Bullet_GunBullet46:return this.Bullet_GunBullet46;case i.Bullet_GunBullet47:return this.Bullet_GunBullet47;case i.Bullet_GunBullet49:return this.Bullet_GunBullet49;case i.Bullet_GunBullet50:return this.Bullet_GunBullet50;case i.Bullet_GunBullet52:return this.Bullet_GunBullet52;case i.Bullet_GunBullet54:return this.Bullet_GunBullet54;case i.Bullet_GunBullet55:return this.Bullet_GunBullet55;case i.Bullet_GunBullet56:return this.Bullet_GunBullet56;case i.Bullet_GunBullet57:return this.Bullet_GunBullet57;case i.Bullet_GunBullet58:return this.Bullet_GunBullet58;case i.Bullet_GunBullet59:return this.Bullet_GunBullet59;case i.Bullet_GunBullet60:return this.Bullet_GunBullet60;case i.Bullet_GunBullet66:return this.Bullet_GunBullet66;case i.Bullet_GunBullet67:return this.Bullet_GunBullet67;case i.Bullet_GunBullet68:return this.Bullet_GunBullet68;case i.Bullet_GunBullet69:return this.Bullet_GunBullet69;case i.Bullet_GunBullet70:return this.Bullet_GunBullet70;case i.Bullet_Hailstone:return this.Bullet_Hailstone;case i.Bullet_IceBall:return this.Bullet_IceBall;case i.Bullet_jidan:return this.Bullet_jidan;case i.Bullet_LandPowerExpo:return this.Bullet_LandPowerExpo;case i.Bullet_LazerBullet1:return this.Bullet_LazerBullet1;case i.Bullet_LazerBullet:return this.Bullet_LazerBullet;case i.Bullet_LazerBullet2:return this.Bullet_LazerBullet2;case i.Bullet_LightningBullet:return this.Bullet_LightningBullet;case i.Bullet_MachineGunBullet1:return this.Bullet_MachineGunBullet1;case i.Bullet_MachineGunBullet2:return this.Bullet_MachineGunBullet2;case i.Bullet_NianSkill2Bullet:return this.Bullet_NianSkill2Bullet;case i.Bullet_NianSkill3Bullet:return this.Bullet_NianSkill3Bullet;case i.Bullet_Pi:return this.Bullet_Pi;case i.Bullet_PKBullet:return this.Bullet_PKBullet;case i.Bullet_Qi4Bullet:return this.Bullet_Qi4Bullet;case i.Bullet_ShuiDi:return this.Bullet_ShuiDi;case i.Bullet_SnowBall:return this.Bullet_SnowBall;case i.Bullet_SpinBullet:return this.Bullet_SpinBullet;case i.Bullet_SuckBlood:return this.Bullet_SuckBlood;case i.Bullet_Sword_Bullet1:return this.Bullet_Sword_Bullet1;case i.Bullet_Sword_Bullet2:return this.Bullet_Sword_Bullet2;case i.Bullet_Sword_Bullet3:return this.Bullet_Sword_Bullet3;case i.Bullet_TangGuo:return this.Bullet_TangGuo;case i.Bullet_Trample:return this.Bullet_Trample;case i.Bullet_WanJuQiang:return this.Bullet_WanJuQiang;case i.Bullet_ZombieBullet:return this.Bullet_ZombieBullet;case i.Bullet_ZombieMode_AirBlade:return this.Bullet_ZombieMode_AirBlade;case i.Bullet_ZombieMode_EnergyBall:return this.Bullet_ZombieMode_EnergyBall;case i.Bullet_ZombieMode_FrozenMine:return this.Bullet_ZombieMode_FrozenMine;case i.Bullet_ZombieMode_Gou:return this.Bullet_ZombieMode_Gou;case i.Bullet_ZombieMode_IceBall:return this.Bullet_ZombieMode_IceBall;case i.Bullet_ZombieMode_SuckBlood:return this.Bullet_ZombieMode_SuckBlood;case i.CameraRoot:return this.CameraRoot;case i.CameraRootGameOver:return this.CameraRootGameOver;case i.CoverCameraRoot:return this.CoverCameraRoot;case i.DefaultSp:return this.DefaultSp;case i.DropBox:return this.DropBox;case i.Effect_AddChestEffect:return this.Effect_AddChestEffect;case i.Effect_Adrenaline:return this.Effect_Adrenaline;case i.Effect_AimingTrajectory:return this.Effect_AimingTrajectory;case i.Effect_AimingTrajectory1:return this.Effect_AimingTrajectory1;case i.Effect_AttackRange1:return this.Effect_AttackRange1;case i.Effect_AttackRange:return this.Effect_AttackRange;case i.Effect_AttackRange3:return this.Effect_AttackRange3;case i.Effect_BeingTargeted:return this.Effect_BeingTargeted;case i.Effect_BeingTargeted1:return this.Effect_BeingTargeted1;case i.Effect_Bleed:return this.Effect_Bleed;case i.Effect_Blood:return this.Effect_Blood;case i.Effect_BlueInvincibleEffect:return this.Effect_BlueInvincibleEffect;case i.Effect_BossDust:return this.Effect_BossDust;case i.Effect_BulletFireWork:return this.Effect_BulletFireWork;case i.Effect_CarSmoke:return this.Effect_CarSmoke;case i.Effect_Chain:return this.Effect_Chain;case i.Effect_ChooseOneEffect:return this.Effect_ChooseOneEffect;case i.Effect_ChunLian:return this.Effect_ChunLian;case i.Effect_Danger1:return this.Effect_Danger1;case i.Effect_Danger2:return this.Effect_Danger2;case i.Effect_Danger3:return this.Effect_Danger3;case i.Effect_DeadOutLine:return this.Effect_DeadOutLine;case i.Effect_DeathLaser:return this.Effect_DeathLaser;case i.Effect_DizzEffect:return this.Effect_DizzEffect;case i.Effect_DmgBuffEffect:return this.Effect_DmgBuffEffect;case i.Effect_DustZone:return this.Effect_DustZone;case i.Effect_EatMashRoomEffect:return this.Effect_EatMashRoomEffect;case i.Effect_ExplodingEffect:return this.Effect_ExplodingEffect;case i.Effect_ExplodingEffectBullect:return this.Effect_ExplodingEffectBullect;case i.Effect_ExplosionExpo:return this.Effect_ExplosionExpo;case i.Effect_ExpPoint:return this.Effect_ExpPoint;case i.Effect_FeiJi:return this.Effect_FeiJi;case i.Effect_FireWork:return this.Effect_FireWork;case i.Effect_FrieEffet2:return this.Effect_FrieEffet2;case i.Effect_FrightenZone:return this.Effect_FrightenZone;case i.Effect_FrostZone:return this.Effect_FrostZone;case i.Effect_FrozenMine:return this.Effect_FrozenMine;case i.Effect_GetItemEffect:return this.Effect_GetItemEffect;case i.Effect_GoldInvincibleEffect:return this.Effect_GoldInvincibleEffect;case i.Effect_HealEffect:return this.Effect_HealEffect;case i.Effect_HeBaoDan:return this.Effect_HeBaoDan;case i.Effect_HitEffect:return this.Effect_HitEffect;case i.Effect_IceBuff:return this.Effect_IceBuff;case i.Effect_InvincibleEffect2:return this.Effect_InvincibleEffect2;case i.Effect_InvincibleEffect3:return this.Effect_InvincibleEffect3;case i.Effect_JianDao1:return this.Effect_JianDao1;case i.Effect_JianDao2:return this.Effect_JianDao2;case i.Effect_JianDaoEffect:return this.Effect_JianDaoEffect;case i.Effect_LevelUp:return this.Effect_LevelUp;case i.Effect_LightEffect:return this.Effect_LightEffect;case i.Effect_LightningBall:return this.Effect_LightningBall;case i.Effect_LongLightning:return this.Effect_LongLightning;case i.Effect_MagicNovaBlue:return this.Effect_MagicNovaBlue;case i.Effect_MagicNovaRed:return this.Effect_MagicNovaRed;case i.Effect_NianExpo:return this.Effect_NianExpo;case i.Effect_NianSkill3Effect:return this.Effect_NianSkill3Effect;case i.Effect_Parry:return this.Effect_Parry;case i.Effect_PhotonBlade:return this.Effect_PhotonBlade;case i.Effect_PhotonBlade2:return this.Effect_PhotonBlade2;case i.Effect_PhotonBlade3:return this.Effect_PhotonBlade3;case i.Effect_PickUp:return this.Effect_PickUp;case i.Effect_QuestDigHole:return this.Effect_QuestDigHole;case i.Effect_QuestRange:return this.Effect_QuestRange;case i.Effect_QuestSign:return this.Effect_QuestSign;case i.Effect_ReadyEffect:return this.Effect_ReadyEffect;case i.Effect_SeaPowerMoveEffect:return this.Effect_SeaPowerMoveEffect;case i.Effect_Shield:return this.Effect_Shield;case i.Effect_SnowManBuff:return this.Effect_SnowManBuff;case i.Effect_SnowWeatherEffect:return this.Effect_SnowWeatherEffect;case i.Effect_SpeedUpEffect:return this.Effect_SpeedUpEffect;case i.Effect_SuckLine:return this.Effect_SuckLine;case i.Effect_WallBoxBreak:return this.Effect_WallBoxBreak;case i.Effect_WallBoxHited:return this.Effect_WallBoxHited;case i.Effect_ZhiShiBiao:return this.Effect_ZhiShiBiao;case i.Effect_ZombieMode_Chain:return this.Effect_ZombieMode_Chain;case i.Effect_ZombieMode_Danger1:return this.Effect_ZombieMode_Danger1;case i.Effect_ZombieMode_Danger2:return this.Effect_ZombieMode_Danger2;case i.Effect_ZombieMode_Danger3:return this.Effect_ZombieMode_Danger3;case i.Fog:return this.Fog;case i.Item_AddHpItem:return this.Item_AddHpItem;case i.Item_AddItem:return this.Item_AddItem;case i.Item_AddSkill:return this.Item_AddSkill;case i.Item_AddWeapon:return this.Item_AddWeapon;case i.Item_BaoZhuChest:return this.Item_BaoZhuChest;case i.Item_Battery:return this.Item_Battery;case i.Item_Bolt:return this.Item_Bolt;case i.Item_Bunker:return this.Item_Bunker;case i.Item_Bunker2:return this.Item_Bunker2;case i.Item_Bunker3:return this.Item_Bunker3;case i.Item_Bunker4:return this.Item_Bunker4;case i.Item_Bunker5:return this.Item_Bunker5;case i.Item_BunkerTrigger:return this.Item_BunkerTrigger;case i.Item_Car1:return this.Item_Car1;case i.Item_CarItem:return this.Item_CarItem;case i.Item_CarTrigger:return this.Item_CarTrigger;case i.Item_Chest:return this.Item_Chest;case i.Item_Chest0:return this.Item_Chest0;case i.Item_Chest1:return this.Item_Chest1;case i.Item_Coins:return this.Item_Coins;case i.Item_Diamond:return this.Item_Diamond;case i.Item_DmgBuffItem:return this.Item_DmgBuffItem;case i.Item_DoorCollider:return this.Item_DoorCollider;case i.Item_DoorTriggerArea:return this.Item_DoorTriggerArea;case i.Item_Gear_Bolt:return this.Item_Gear_Bolt;case i.Item_Gear_Chest:return this.Item_Gear_Chest;case i.Item_Gear_Foot:return this.Item_Gear_Foot;case i.Item_Gear_Head:return this.Item_Gear_Head;case i.Item_Gear_Ring:return this.Item_Gear_Ring;case i.Item_GuideTrigger:return this.Item_GuideTrigger;case i.Item_HongBao:return this.Item_HongBao;case i.Item_ItemCreator:return this.Item_ItemCreator;case i.Item_ItemTrigger:return this.Item_ItemTrigger;case i.Item_MashRoom:return this.Item_MashRoom;case i.Item_NewYear_Char:return this.Item_NewYear_Char;case i.Item_NewYearChest:return this.Item_NewYearChest;case i.Item_Robot:return this.Item_Robot;case i.Item_RockWall:return this.Item_RockWall;case i.Item_ShaDai:return this.Item_ShaDai;case i.Item_SpeedUpBuffItem:return this.Item_SpeedUpBuffItem;case i.Item_SpItem:return this.Item_SpItem;case i.Item_SpItemKey:return this.Item_SpItemKey;case i.Item_TentTrigger:return this.Item_TentTrigger;case i.Item_Turret:return this.Item_Turret;case i.Item_TurretItem:return this.Item_TurretItem;case i.Item_WallBox:return this.Item_WallBox;case i.Item_WallBox2:return this.Item_WallBox2;case i.Item_ZCoins:return this.Item_ZCoins;case i.Item_ZombieFactory:return this.Item_ZombieFactory;case i.Item_ZombieMode_RockWall:return this.Item_ZombieMode_RockWall;case i.Monster1:return this.Monster1;case i.Player:return this.Player;case i.Point:return this.Point;case i.Shadow:return this.Shadow;case i.Weapon_THAssault:return this.Weapon_THAssault;case i.Weapon_THAxe:return this.Weapon_THAxe;case i.Weapon_THDagger:return this.Weapon_THDagger;case i.Weapon_THGun:return this.Weapon_THGun;case i.Weapon_THHeavyGun:return this.Weapon_THHeavyGun;case i.Weapon_THInfantryGun:return this.Weapon_THInfantryGun;case i.Weapon_THMachineGun:return this.Weapon_THMachineGun;case i.Weapon_THSubmachine:return this.Weapon_THSubmachine;case i.Weapon_THSword:return this.Weapon_THSword;case i.Zombie:return this.Zombie;case i.Zombie_bak:return this.Zombie_bak;case i.ZombieKing:return this.ZombieKing}}}),U=(o.PrefabJson="3DRes/EcsPrefabRes/Conventional/Prefab.json",o.Arrow="3DRes/EcsPrefabRes/Conventional/Arrow.lh",o.Bullet_AirBlade="3DRes/EcsPrefabRes/Conventional/Bullet_AirBlade.lh",o.Bullet_Barrage="3DRes/EcsPrefabRes/Conventional/Bullet_Barrage.lh",o.Bullet_Boss_Bullet1="3DRes/EcsPrefabRes/Conventional/Bullet_Boss_Bullet1.lh",o.Bullet_BossTrample="3DRes/EcsPrefabRes/Conventional/Bullet_BossTrample.lh",o.Bullet_Bullet2="3DRes/EcsPrefabRes/Conventional/Bullet_Bullet2.lh",o.Bullet_Bullet4="3DRes/EcsPrefabRes/Conventional/Bullet_Bullet4.lh",o.Bullet_Dagger_Bullet1="3DRes/EcsPrefabRes/Conventional/Bullet_Dagger_Bullet1.lh",o.Bullet_Dagger_Bullet2="3DRes/EcsPrefabRes/Conventional/Bullet_Dagger_Bullet2.lh",o.Bullet_Dagger_Bullet3="3DRes/EcsPrefabRes/Conventional/Bullet_Dagger_Bullet3.lh",o.Bullet_DashBullet="3DRes/EcsPrefabRes/Conventional/Bullet_DashBullet.lh",o.Bullet_DeathLaserBullet="3DRes/EcsPrefabRes/Conventional/Bullet_DeathLaserBullet.lh",o.Bullet_EnergyBall="3DRes/EcsPrefabRes/Conventional/Bullet_EnergyBall.lh",o.Bullet_ExplodingBullet="3DRes/EcsPrefabRes/Conventional/Bullet_ExplodingBullet.lh",o.Bullet_FrozenMine="3DRes/EcsPrefabRes/Conventional/Bullet_FrozenMine.lh",o.Bullet_Gou="3DRes/EcsPrefabRes/Conventional/Bullet_Gou.lh",o.Bullet_Grenade="3DRes/EcsPrefabRes/Conventional/Bullet_Grenade.lh",o.Bullet_GunBullet1="3DRes/EcsPrefabRes/Conventional/Bullet_GunBullet1.lh",o.Bullet_GunBullet2="3DRes/EcsPrefabRes/Conventional/Bullet_GunBullet2.lh",o.Bullet_GunBullet3="3DRes/EcsPrefabRes/Conventional/Bullet_GunBullet3.lh",o.Bullet_GunBullet4="3DRes/EcsPrefabRes/Conventional/Bullet_GunBullet4.lh",o.Bullet_GunBullet5="3DRes/EcsPrefabRes/Conventional/Bullet_GunBullet5.lh",o.Bullet_GunBullet26="3DRes/EcsPrefabRes/Conventional/Bullet_GunBullet26.lh",o.Bullet_GunBullet29="3DRes/EcsPrefabRes/Conventional/Bullet_GunBullet29.lh",o.Bullet_GunBullet31="3DRes/EcsPrefabRes/Conventional/Bullet_GunBullet31.lh",o.Bullet_GunBullet34="3DRes/EcsPrefabRes/Conventional/Bullet_GunBullet34.lh",o.Bullet_GunBullet35="3DRes/EcsPrefabRes/Conventional/Bullet_GunBullet35.lh",o.Bullet_GunBullet36="3DRes/EcsPrefabRes/Conventional/Bullet_GunBullet36.lh",o.Bullet_GunBullet39="3DRes/EcsPrefabRes/Conventional/Bullet_GunBullet39.lh",o.Bullet_GunBullet41="3DRes/EcsPrefabRes/Conventional/Bullet_GunBullet41.lh",o.Bullet_GunBullet42="3DRes/EcsPrefabRes/Conventional/Bullet_GunBullet42.lh",o.Bullet_GunBullet44="3DRes/EcsPrefabRes/Conventional/Bullet_GunBullet44.lh",o.Bullet_GunBullet45="3DRes/EcsPrefabRes/Conventional/Bullet_GunBullet45.lh",o.Bullet_GunBullet46="3DRes/EcsPrefabRes/Conventional/Bullet_GunBullet46.lh",o.Bullet_GunBullet47="3DRes/EcsPrefabRes/Conventional/Bullet_GunBullet47.lh",o.Bullet_GunBullet49="3DRes/EcsPrefabRes/Conventional/Bullet_GunBullet49.lh",o.Bullet_GunBullet50="3DRes/EcsPrefabRes/Conventional/Bullet_GunBullet50.lh",o.Bullet_GunBullet52="3DRes/EcsPrefabRes/Conventional/Bullet_GunBullet52.lh",o.Bullet_GunBullet54="3DRes/EcsPrefabRes/Conventional/Bullet_GunBullet54.lh",o.Bullet_GunBullet55="3DRes/EcsPrefabRes/Conventional/Bullet_GunBullet55.lh",o.Bullet_GunBullet56="3DRes/EcsPrefabRes/Conventional/Bullet_GunBullet56.lh",o.Bullet_GunBullet57="3DRes/EcsPrefabRes/Conventional/Bullet_GunBullet57.lh",o.Bullet_GunBullet58="3DRes/EcsPrefabRes/Conventional/Bullet_GunBullet58.lh",o.Bullet_GunBullet59="3DRes/EcsPrefabRes/Conventional/Bullet_GunBullet59.lh",o.Bullet_GunBullet60="3DRes/EcsPrefabRes/Conventional/Bullet_GunBullet60.lh",o.Bullet_GunBullet66="3DRes/EcsPrefabRes/Conventional/Bullet_GunBullet66.lh",o.Bullet_GunBullet67="3DRes/EcsPrefabRes/Conventional/Bullet_GunBullet67.lh",o.Bullet_GunBullet68="3DRes/EcsPrefabRes/Conventional/Bullet_GunBullet68.lh",o.Bullet_GunBullet69="3DRes/EcsPrefabRes/Conventional/Bullet_GunBullet69.lh",o.Bullet_GunBullet70="3DRes/EcsPrefabRes/Conventional/Bullet_GunBullet70.lh",o.Bullet_Hailstone="3DRes/EcsPrefabRes/Conventional/Bullet_Hailstone.lh",o.Bullet_IceBall="3DRes/EcsPrefabRes/Conventional/Bullet_IceBall.lh",o.Bullet_jidan="3DRes/EcsPrefabRes/Conventional/Bullet_jidan.lh",o.Bullet_LandPowerExpo="3DRes/EcsPrefabRes/Conventional/Bullet_LandPowerExpo.lh",o.Bullet_LazerBullet1="3DRes/EcsPrefabRes/Conventional/Bullet_LazerBullet1.lh",o.Bullet_LazerBullet="3DRes/EcsPrefabRes/Conventional/Bullet_LazerBullet.lh",o.Bullet_LazerBullet2="3DRes/EcsPrefabRes/Conventional/Bullet_LazerBullet2.lh",o.Bullet_LightningBullet="3DRes/EcsPrefabRes/Conventional/Bullet_LightningBullet.lh",o.Bullet_MachineGunBullet1="3DRes/EcsPrefabRes/Conventional/Bullet_MachineGunBullet1.lh",o.Bullet_MachineGunBullet2="3DRes/EcsPrefabRes/Conventional/Bullet_MachineGunBullet2.lh",o.Bullet_NianSkill2Bullet="3DRes/EcsPrefabRes/Conventional/Bullet_NianSkill2Bullet.lh",o.Bullet_NianSkill3Bullet="3DRes/EcsPrefabRes/Conventional/Bullet_NianSkill3Bullet.lh",o.Bullet_Pi="3DRes/EcsPrefabRes/Conventional/Bullet_Pi.lh",o.Bullet_PKBullet="3DRes/EcsPrefabRes/Conventional/Bullet_PKBullet.lh",o.Bullet_Qi4Bullet="3DRes/EcsPrefabRes/Conventional/Bullet_Qi4Bullet.lh",o.Bullet_ShuiDi="3DRes/EcsPrefabRes/Conventional/Bullet_ShuiDi.lh",o.Bullet_SnowBall="3DRes/EcsPrefabRes/Conventional/Bullet_SnowBall.lh",o.Bullet_SpinBullet="3DRes/EcsPrefabRes/Conventional/Bullet_SpinBullet.lh",o.Bullet_SuckBlood="3DRes/EcsPrefabRes/Conventional/Bullet_SuckBlood.lh",o.Bullet_Sword_Bullet1="3DRes/EcsPrefabRes/Conventional/Bullet_Sword_Bullet1.lh",o.Bullet_Sword_Bullet2="3DRes/EcsPrefabRes/Conventional/Bullet_Sword_Bullet2.lh",o.Bullet_Sword_Bullet3="3DRes/EcsPrefabRes/Conventional/Bullet_Sword_Bullet3.lh",o.Bullet_TangGuo="3DRes/EcsPrefabRes/Conventional/Bullet_TangGuo.lh",o.Bullet_Trample="3DRes/EcsPrefabRes/Conventional/Bullet_Trample.lh",o.Bullet_WanJuQiang="3DRes/EcsPrefabRes/Conventional/Bullet_WanJuQiang.lh",o.Bullet_ZombieBullet="3DRes/EcsPrefabRes/Conventional/Bullet_ZombieBullet.lh",o.Bullet_ZombieMode_AirBlade="3DRes/EcsPrefabRes/Conventional/Bullet_ZombieMode_AirBlade.lh",o.Bullet_ZombieMode_EnergyBall="3DRes/EcsPrefabRes/Conventional/Bullet_ZombieMode_EnergyBall.lh",o.Bullet_ZombieMode_FrozenMine="3DRes/EcsPrefabRes/Conventional/Bullet_ZombieMode_FrozenMine.lh",o.Bullet_ZombieMode_Gou="3DRes/EcsPrefabRes/Conventional/Bullet_ZombieMode_Gou.lh",o.Bullet_ZombieMode_IceBall="3DRes/EcsPrefabRes/Conventional/Bullet_ZombieMode_IceBall.lh",o.Bullet_ZombieMode_SuckBlood="3DRes/EcsPrefabRes/Conventional/Bullet_ZombieMode_SuckBlood.lh",o.CameraRoot="3DRes/EcsPrefabRes/Conventional/CameraRoot.lh",o.CameraRootGameOver="3DRes/EcsPrefabRes/Conventional/CameraRootGameOver.lh",o.CoverCameraRoot="3DRes/EcsPrefabRes/Conventional/CoverCameraRoot.lh",o.DefaultSp="3DRes/EcsPrefabRes/Conventional/DefaultSp.lh",o.DropBox="3DRes/EcsPrefabRes/Conventional/DropBox.lh",o.Effect_AddChestEffect="3DRes/EcsPrefabRes/Conventional/Effect_AddChestEffect.lh",o.Effect_Adrenaline="3DRes/EcsPrefabRes/Conventional/Effect_Adrenaline.lh",o.Effect_AimingTrajectory="3DRes/EcsPrefabRes/Conventional/Effect_AimingTrajectory.lh",o.Effect_AimingTrajectory1="3DRes/EcsPrefabRes/Conventional/Effect_AimingTrajectory1.lh",o.Effect_AttackRange1="3DRes/EcsPrefabRes/Conventional/Effect_AttackRange1.lh",o.Effect_AttackRange="3DRes/EcsPrefabRes/Conventional/Effect_AttackRange.lh",o.Effect_AttackRange3="3DRes/EcsPrefabRes/Conventional/Effect_AttackRange3.lh",o.Effect_BeingTargeted="3DRes/EcsPrefabRes/Conventional/Effect_BeingTargeted.lh",o.Effect_BeingTargeted1="3DRes/EcsPrefabRes/Conventional/Effect_BeingTargeted1.lh",o.Effect_Bleed="3DRes/EcsPrefabRes/Conventional/Effect_Bleed.lh",o.Effect_Blood="3DRes/EcsPrefabRes/Conventional/Effect_Blood.lh",o.Effect_BlueInvincibleEffect="3DRes/EcsPrefabRes/Conventional/Effect_BlueInvincibleEffect.lh",o.Effect_BossDust="3DRes/EcsPrefabRes/Conventional/Effect_BossDust.lh",o.Effect_BulletFireWork="3DRes/EcsPrefabRes/Conventional/Effect_BulletFireWork.lh",o.Effect_CarSmoke="3DRes/EcsPrefabRes/Conventional/Effect_CarSmoke.lh",o.Effect_Chain="3DRes/EcsPrefabRes/Conventional/Effect_Chain.lh",o.Effect_ChooseOneEffect="3DRes/EcsPrefabRes/Conventional/Effect_ChooseOneEffect.lh",o.Effect_ChunLian="3DRes/EcsPrefabRes/Conventional/Effect_ChunLian.lh",o.Effect_Danger1="3DRes/EcsPrefabRes/Conventional/Effect_Danger1.lh",o.Effect_Danger2="3DRes/EcsPrefabRes/Conventional/Effect_Danger2.lh",o.Effect_Danger3="3DRes/EcsPrefabRes/Conventional/Effect_Danger3.lh",o.Effect_DeadOutLine="3DRes/EcsPrefabRes/Conventional/Effect_DeadOutLine.lh",o.Effect_DeathLaser="3DRes/EcsPrefabRes/Conventional/Effect_DeathLaser.lh",o.Effect_DizzEffect="3DRes/EcsPrefabRes/Conventional/Effect_DizzEffect.lh",o.Effect_DmgBuffEffect="3DRes/EcsPrefabRes/Conventional/Effect_DmgBuffEffect.lh",o.Effect_DustZone="3DRes/EcsPrefabRes/Conventional/Effect_DustZone.lh",o.Effect_EatMashRoomEffect="3DRes/EcsPrefabRes/Conventional/Effect_EatMashRoomEffect.lh",o.Effect_ExplodingEffect="3DRes/EcsPrefabRes/Conventional/Effect_ExplodingEffect.lh",o.Effect_ExplodingEffectBullect="3DRes/EcsPrefabRes/Conventional/Effect_ExplodingEffectBullect.lh",o.Effect_ExplosionExpo="3DRes/EcsPrefabRes/Conventional/Effect_ExplosionExpo.lh",o.Effect_ExpPoint="3DRes/EcsPrefabRes/Conventional/Effect_ExpPoint.lh",o.Effect_FeiJi="3DRes/EcsPrefabRes/Conventional/Effect_FeiJi.lh",o.Effect_FireWork="3DRes/EcsPrefabRes/Conventional/Effect_FireWork.lh",o.Effect_FrieEffet2="3DRes/EcsPrefabRes/Conventional/Effect_FrieEffet2.lh",o.Effect_FrightenZone="3DRes/EcsPrefabRes/Conventional/Effect_FrightenZone.lh",o.Effect_FrostZone="3DRes/EcsPrefabRes/Conventional/Effect_FrostZone.lh",o.Effect_FrozenMine="3DRes/EcsPrefabRes/Conventional/Effect_FrozenMine.lh",o.Effect_GetItemEffect="3DRes/EcsPrefabRes/Conventional/Effect_GetItemEffect.lh",o.Effect_GoldInvincibleEffect="3DRes/EcsPrefabRes/Conventional/Effect_GoldInvincibleEffect.lh",o.Effect_HealEffect="3DRes/EcsPrefabRes/Conventional/Effect_HealEffect.lh",o.Effect_HeBaoDan="3DRes/EcsPrefabRes/Conventional/Effect_HeBaoDan.lh",o.Effect_HitEffect="3DRes/EcsPrefabRes/Conventional/Effect_HitEffect.lh",o.Effect_IceBuff="3DRes/EcsPrefabRes/Conventional/Effect_IceBuff.lh",o.Effect_InvincibleEffect2="3DRes/EcsPrefabRes/Conventional/Effect_InvincibleEffect2.lh",o.Effect_InvincibleEffect3="3DRes/EcsPrefabRes/Conventional/Effect_InvincibleEffect3.lh",o.Effect_JianDao1="3DRes/EcsPrefabRes/Conventional/Effect_JianDao1.lh",o.Effect_JianDao2="3DRes/EcsPrefabRes/Conventional/Effect_JianDao2.lh",o.Effect_JianDaoEffect="3DRes/EcsPrefabRes/Conventional/Effect_JianDaoEffect.lh",o.Effect_LevelUp="3DRes/EcsPrefabRes/Conventional/Effect_LevelUp.lh",o.Effect_LightEffect="3DRes/EcsPrefabRes/Conventional/Effect_LightEffect.lh",o.Effect_LightningBall="3DRes/EcsPrefabRes/Conventional/Effect_LightningBall.lh",o.Effect_LongLightning="3DRes/EcsPrefabRes/Conventional/Effect_LongLightning.lh",o.Effect_MagicNovaBlue="3DRes/EcsPrefabRes/Conventional/Effect_MagicNovaBlue.lh",o.Effect_MagicNovaRed="3DRes/EcsPrefabRes/Conventional/Effect_MagicNovaRed.lh",o.Effect_NianExpo="3DRes/EcsPrefabRes/Conventional/Effect_NianExpo.lh",o.Effect_NianSkill3Effect="3DRes/EcsPrefabRes/Conventional/Effect_NianSkill3Effect.lh",o.Effect_Parry="3DRes/EcsPrefabRes/Conventional/Effect_Parry.lh",o.Effect_PhotonBlade="3DRes/EcsPrefabRes/Conventional/Effect_PhotonBlade.lh",o.Effect_PhotonBlade2="3DRes/EcsPrefabRes/Conventional/Effect_PhotonBlade2.lh",o.Effect_PhotonBlade3="3DRes/EcsPrefabRes/Conventional/Effect_PhotonBlade3.lh",o.Effect_PickUp="3DRes/EcsPrefabRes/Conventional/Effect_PickUp.lh",o.Effect_QuestDigHole="3DRes/EcsPrefabRes/Conventional/Effect_QuestDigHole.lh",o.Effect_QuestRange="3DRes/EcsPrefabRes/Conventional/Effect_QuestRange.lh",o.Effect_QuestSign="3DRes/EcsPrefabRes/Conventional/Effect_QuestSign.lh",o.Effect_ReadyEffect="3DRes/EcsPrefabRes/Conventional/Effect_ReadyEffect.lh",o.Effect_SeaPowerMoveEffect="3DRes/EcsPrefabRes/Conventional/Effect_SeaPowerMoveEffect.lh",o.Effect_Shield="3DRes/EcsPrefabRes/Conventional/Effect_Shield.lh",o.Effect_SnowManBuff="3DRes/EcsPrefabRes/Conventional/Effect_SnowManBuff.lh",o.Effect_SnowWeatherEffect="3DRes/EcsPrefabRes/Conventional/Effect_SnowWeatherEffect.lh",o.Effect_SpeedUpEffect="3DRes/EcsPrefabRes/Conventional/Effect_SpeedUpEffect.lh",o.Effect_SuckLine="3DRes/EcsPrefabRes/Conventional/Effect_SuckLine.lh",o.Effect_WallBoxBreak="3DRes/EcsPrefabRes/Conventional/Effect_WallBoxBreak.lh",o.Effect_WallBoxHited="3DRes/EcsPrefabRes/Conventional/Effect_WallBoxHited.lh",o.Effect_ZhiShiBiao="3DRes/EcsPrefabRes/Conventional/Effect_ZhiShiBiao.lh",o.Effect_ZombieMode_Chain="3DRes/EcsPrefabRes/Conventional/Effect_ZombieMode_Chain.lh",o.Effect_ZombieMode_Danger1="3DRes/EcsPrefabRes/Conventional/Effect_ZombieMode_Danger1.lh",o.Effect_ZombieMode_Danger2="3DRes/EcsPrefabRes/Conventional/Effect_ZombieMode_Danger2.lh",o.Effect_ZombieMode_Danger3="3DRes/EcsPrefabRes/Conventional/Effect_ZombieMode_Danger3.lh",o.Fog="3DRes/EcsPrefabRes/Conventional/Fog.lh",o.Item_AddHpItem="3DRes/EcsPrefabRes/Conventional/Item_AddHpItem.lh",o.Item_AddItem="3DRes/EcsPrefabRes/Conventional/Item_AddItem.lh",o.Item_AddSkill="3DRes/EcsPrefabRes/Conventional/Item_AddSkill.lh",o.Item_AddWeapon="3DRes/EcsPrefabRes/Conventional/Item_AddWeapon.lh",o.Item_BaoZhuChest="3DRes/EcsPrefabRes/Conventional/Item_BaoZhuChest.lh",o.Item_Battery="3DRes/EcsPrefabRes/Conventional/Item_Battery.lh",o.Item_Bolt="3DRes/EcsPrefabRes/Conventional/Item_Bolt.lh",o.Item_Bunker="3DRes/EcsPrefabRes/Conventional/Item_Bunker.lh",o.Item_Bunker2="3DRes/EcsPrefabRes/Conventional/Item_Bunker2.lh",o.Item_Bunker3="3DRes/EcsPrefabRes/Conventional/Item_Bunker3.lh",o.Item_Bunker4="3DRes/EcsPrefabRes/Conventional/Item_Bunker4.lh",o.Item_Bunker5="3DRes/EcsPrefabRes/Conventional/Item_Bunker5.lh",o.Item_BunkerTrigger="3DRes/EcsPrefabRes/Conventional/Item_BunkerTrigger.lh",o.Item_Car1="3DRes/EcsPrefabRes/Conventional/Item_Car1.lh",o.Item_CarItem="3DRes/EcsPrefabRes/Conventional/Item_CarItem.lh",o.Item_CarTrigger="3DRes/EcsPrefabRes/Conventional/Item_CarTrigger.lh",o.Item_Chest="3DRes/EcsPrefabRes/Conventional/Item_Chest.lh",o.Item_Chest0="3DRes/EcsPrefabRes/Conventional/Item_Chest0.lh",o.Item_Chest1="3DRes/EcsPrefabRes/Conventional/Item_Chest1.lh",o.Item_Coins="3DRes/EcsPrefabRes/Conventional/Item_Coins.lh",o.Item_Diamond="3DRes/EcsPrefabRes/Conventional/Item_Diamond.lh",o.Item_DmgBuffItem="3DRes/EcsPrefabRes/Conventional/Item_DmgBuffItem.lh",o.Item_DoorCollider="3DRes/EcsPrefabRes/Conventional/Item_DoorCollider.lh",o.Item_DoorTriggerArea="3DRes/EcsPrefabRes/Conventional/Item_DoorTriggerArea.lh",o.Item_Gear_Bolt="3DRes/EcsPrefabRes/Conventional/Item_Gear_Bolt.lh",o.Item_Gear_Chest="3DRes/EcsPrefabRes/Conventional/Item_Gear_Chest.lh",o.Item_Gear_Foot="3DRes/EcsPrefabRes/Conventional/Item_Gear_Foot.lh",o.Item_Gear_Head="3DRes/EcsPrefabRes/Conventional/Item_Gear_Head.lh",o.Item_Gear_Ring="3DRes/EcsPrefabRes/Conventional/Item_Gear_Ring.lh",o.Item_GuideTrigger="3DRes/EcsPrefabRes/Conventional/Item_GuideTrigger.lh",o.Item_HongBao="3DRes/EcsPrefabRes/Conventional/Item_HongBao.lh",o.Item_ItemCreator="3DRes/EcsPrefabRes/Conventional/Item_ItemCreator.lh",o.Item_ItemTrigger="3DRes/EcsPrefabRes/Conventional/Item_ItemTrigger.lh",o.Item_MashRoom="3DRes/EcsPrefabRes/Conventional/Item_MashRoom.lh",o.Item_NewYear_Char="3DRes/EcsPrefabRes/Conventional/Item_NewYear_Char.lh",o.Item_NewYearChest="3DRes/EcsPrefabRes/Conventional/Item_NewYearChest.lh",o.Item_Robot="3DRes/EcsPrefabRes/Conventional/Item_Robot.lh",o.Item_RockWall="3DRes/EcsPrefabRes/Conventional/Item_RockWall.lh",o.Item_ShaDai="3DRes/EcsPrefabRes/Conventional/Item_ShaDai.lh",o.Item_SpeedUpBuffItem="3DRes/EcsPrefabRes/Conventional/Item_SpeedUpBuffItem.lh",o.Item_SpItem="3DRes/EcsPrefabRes/Conventional/Item_SpItem.lh",o.Item_SpItemKey="3DRes/EcsPrefabRes/Conventional/Item_SpItemKey.lh",o.Item_TentTrigger="3DRes/EcsPrefabRes/Conventional/Item_TentTrigger.lh",o.Item_Turret="3DRes/EcsPrefabRes/Conventional/Item_Turret.lh",o.Item_TurretItem="3DRes/EcsPrefabRes/Conventional/Item_TurretItem.lh",o.Item_WallBox="3DRes/EcsPrefabRes/Conventional/Item_WallBox.lh",o.Item_WallBox2="3DRes/EcsPrefabRes/Conventional/Item_WallBox2.lh",o.Item_ZCoins="3DRes/EcsPrefabRes/Conventional/Item_ZCoins.lh",o.Item_ZombieFactory="3DRes/EcsPrefabRes/Conventional/Item_ZombieFactory.lh",o.Item_ZombieMode_RockWall="3DRes/EcsPrefabRes/Conventional/Item_ZombieMode_RockWall.lh",o.Monster1="3DRes/EcsPrefabRes/Conventional/Monster1.lh",o.Player="3DRes/EcsPrefabRes/Conventional/Player.lh",o.Point="3DRes/EcsPrefabRes/Conventional/Point.lh",o.Shadow="3DRes/EcsPrefabRes/Conventional/Shadow.lh",o.Weapon_THAssault="3DRes/EcsPrefabRes/Conventional/Weapon_THAssault.lh",o.Weapon_THAxe="3DRes/EcsPrefabRes/Conventional/Weapon_THAxe.lh",o.Weapon_THDagger="3DRes/EcsPrefabRes/Conventional/Weapon_THDagger.lh",o.Weapon_THGun="3DRes/EcsPrefabRes/Conventional/Weapon_THGun.lh",o.Weapon_THHeavyGun="3DRes/EcsPrefabRes/Conventional/Weapon_THHeavyGun.lh",o.Weapon_THInfantryGun="3DRes/EcsPrefabRes/Conventional/Weapon_THInfantryGun.lh",o.Weapon_THMachineGun="3DRes/EcsPrefabRes/Conventional/Weapon_THMachineGun.lh",o.Weapon_THSubmachine="3DRes/EcsPrefabRes/Conventional/Weapon_THSubmachine.lh",o.Weapon_THSword="3DRes/EcsPrefabRes/Conventional/Weapon_THSword.lh",o.Zombie="3DRes/EcsPrefabRes/Conventional/Zombie.lh",o.Zombie_bak="3DRes/EcsPrefabRes/Conventional/Zombie_bak.lh",o.ZombieKing="3DRes/EcsPrefabRes/Conventional/ZombieKing.lh",class extends e{constructor(){super(...arguments),this.nowAct=0,this.maxAct=3,this.comboTime=0,this.gunMode=!1,this.isAR=!1,this.shotCD=.1,this.shotCDTime=0,this.shotCDScale=1,this.bulletCount=10,this.superReloadCount=0,this.superReload=0,this.nowBulletCount=10,this.consecutiveShots=1,this.consecutiveShotsTimes=0,this._bulletLoadCD=5,this.bulletLoadTime=0,this.ReloadTimeScale=1,this.Magazine=0,this.recoilTime=0,this.bullet0="",this.bullet0Dis=1,this.bullet0height=.5,this.act0Clip="",this.act0Time=0,this.act0Step1Time=0,this.act0Step2Time=0,this.act0Step3Time=0,this.att0Time=0,this.superArmor0=0,this.singleShotLoading=!1,this._singleShotLoadingCD=.5,this.singleShotLoadingTime=0,this.singleShotLoadingCDTime=0,this.bulletsFiredNumbers=1,this.attackRangeId=-1,this.attSpecialRangeId=-1,this.readOnlyAttackRange=10,this.attackRange=10,this.isSniperRifle=!1,this.sniperRifleattRange=10,this.randomShootingAngle=0,this.bulletPathAimingEffect="Effect_AttackRange",this.aimingSpecialEffectId=-1,this.bullet1="",this.bullet1Dis=1,this.bullet1height=.5,this.act1Clip="",this.act1Time=0,this.act1Step1Time=0,this.act1Step2Time=0,this.act1Step3Time=0,this.att1Time=0,this.superArmor1=0,this.bullet2="",this.bullet2Dis=1,this.bullet2height=.5,this.act2Clip="",this.act2Time=0,this.act2Step1Time=0,this.act2Step2Time=0,this.act2Step3Time=0,this.att2Time=0,this.superArmor2=0,this.idleClip="Idle",this.runClip="Run",this.aimingTargetId=-1,this.penetratingShot=0,this.splittingShot=0,this.bulletScatter=0,this.bulletSpeed=-1,this.bulletShotCounter=0,this.bulletSapTime=0,this.bulletStiffnessDis=0}get bulletLoadCD(){return this.ReloadTimeScale||(this.ReloadTimeScale=1),this._bulletLoadCD*this.ReloadTimeScale}set bulletLoadCD(e){this._bulletLoadCD=e}get singleShotLoadingCD(){return this._singleShotLoadingCD*this.ReloadTimeScale}set singleShotLoadingCD(e){this._singleShotLoadingCD=e}IsCanShot(){return this.shotCDTime<=0&&this.bulletLoadTime<=0&&0<this.nowBulletCount}}),bt=class extends e{constructor(){super(...arguments),this.mainWeapon="",this.mainWeaponId=-1}},L=class extends e{constructor(){super(...arguments),this.skillList=[],this.skillCdScale=1,this.skillDmgScale=1,this.unlockPosTimes=3,this.triggerSkllId="",this.banTrigger=0,this.skillDrapEffectId=-1,this.drapSkillId="",this.zombieInGameItemDatas=[],this.unlockPassiveList=[],this.unlockItemList=[]}IsBanSkillTrigger(){return 0<this.banTrigger}},At=class{static SkillInit(e,t,i){}static UseSkill(e,t,i){}static SkillUpdate(e,t,i,o){}static SkillDispose(e,t,i,o){}static GetWillCreatBulletData(e,t,i,o){return[]}},F=(At.SkillName="Base",class extends e{constructor(){super(...arguments),this.nowState="",this.preState="",this.oldState="",this.banStateChange=!1,this.time=0,this.entity1Id=0,this.t1=0,this.t2=0,this.t3=0,this.t4=0,this.t5=0,this.t6=0,this.t7=0,this.t8=0,this.r1=0,this.r2=0,this.r3=0,this.r4=0,this.r5=0,this.str1="",this.step=0,this.step1=0}ChangeState(e){this.banStateChange||(this.nowState=e)}}),xt=class extends e{constructor(){super(...arguments),this.useUpBody=!1,this.useUpBodyClipName="",this.nowUpBodyClipName="",this.layerCount=1,this.oldRender=!1,this.nowClipName="",this.isCanUseNext=!1,this.useClipName="",this.useSpeed=1,this.useCross=.2,this.nextUseClipName="",this.nextSpeed=1,this.nextCross=.2,this.nextPlayTime=1,this.nowSpeed=1,this.animatorSpeedScale=1,this.banKeepTime=0}SetAnimation(e="",t=.2,i=1,o="",a=.1,n=1,s=1){this.banKeepTime<=0&&(this.useClipName=e,this.useCross=t,this.useSpeed=i,this.nextUseClipName=o,this.nextCross=a,this.nextSpeed=n,this.nextPlayTime=s)}},w=class extends e{constructor(){super(...arguments),this.banDirCtrl=0,this.banDirRotationCtrl=0,this.dir=new Laya.Vector3(0,0,0),this.dir2FollowDir=!0,this.dirFollowDirTime=2,this.nowIsDragShootState=!1,this.dir2=new Laya.Vector3(0,0,0),this.speed=1,this.vec=new Laya.Vector3(0,0,0),this.yRotationFollow=!1,this.speedScale=1,this.rotationLerp=0}ChangeBanDir(e,t=0){this.banDirCtrl+=e}IsBanDirCtrl(){return 0<this.banDirCtrl}IsBanDirRotationCtrl(){return 0<this.banDirRotationCtrl}},Tt=class{static EnterState(e,t){t.GetComponent(xt).SetAnimation("Rush",0),t.HasComponent(ut.id)&&(t.GetComponent(xt).useSpeed=2);let i=t.GetComponent(w);i.banDirCtrl+=1,i.banDirRotationCtrl+=1}static StateUpdate(e,t,i){}static StateExit(e,t){let i=t.GetComponent(w);--i.banDirCtrl,--i.banDirRotationCtrl}},kt=(Tt.StateName="Dash",class extends e{constructor(){super(...arguments),this.keepTime=3,this.igronTimeScale=!1}}),Mt=class extends e{constructor(){super(...arguments),this.followTargetId=0,this.offset=new Laya.Vector3(0,0,0),this.followPos=!0,this.followScale=!0,this.followrotation=!0,this.moveTotargetOffset=!1,this.targetOffset=new Laya.Vector3(0,0,0),this.OffsetMoveSpeed=0,this.usePosLerp=!1,this.posLerpSpeed=2,this.isDestory=!0}},Rt=class extends e{constructor(){super(...arguments),this.parent=null}},B=class extends e{constructor(){super(...arguments),this.spName="",this.spPath="",this.isSpLoad=!1,this.isCamera=!1,this.render=!0,this.visble=!0,this.banCull=!1,this.updateTransfrom=!0,this.updateRotation=!0,this.updateScale=!0,this.useLerp=!1,this.useMoveCom=!1,this.lerpStart=!1,this.posOffset=new Laya.Vector3(0,0,0),this.saveoldMat=!1,this.isChildMat=!1,this.isSkinMat=!1,this.matId=-1}},Pt=class extends e{constructor(){super(...arguments),this.vec=new Laya.Vector3(0,0,0),this.angleVec=new Laya.Vector3(0,0,0),this.useGravity=!0,this.igroneTimeScale=!1,this.useBounce=!1,this.bounce=0,this.bounceY=0}},Et=class extends e{constructor(){super(...arguments),this.enable=!0,this.aiId="Ai1",this.StartState="",this.thinkState="State_AIThink",this.destory=!1,this.time=1,this.nowFogDir=0,this.likeGetItem=!1,this.randomShootingAngleRange=0,this.randomShootingAngle=0,this.predictiveShooting=0,this.targetEnemy=-1,this.searchEnemyTime=0,this.targetItem=-1,this.hasGetItemPath=!1,this.eatBuffItemFirst=!1,this.escapHp=30,this.mustFightCount=3,this.escapNappChance=.1,this.attTimeRangeMin=1,this.attTimeRangeMax=3,this.attPathTime=1,this.attRotateSpeed=0,this.attTimeCd=10,this.attTime=0,this.triggerAttTime=0,this.triggerAttRange=3,this.AiCharacter="Radical",this.triggerAtt=!1,this.skillTimeRangeMin=5,this.skillTimeRangeMax=10,this.useSkillTime=0,this.skillOffset=0,this.stepTime=0,this.brain=-1,this.randomAttTime=0}},Nt=class extends e{constructor(){super(...arguments),this.arrowId=-1,this.zhiShiBiaoId=-1,this.time=0}},Ft=class extends e{constructor(){super(...arguments),this.ban=!1,this.isShow=!1,this.isGetUi=!1,this.hudShowEffect_Progress=1,this.hudShowEffect_FromPos=new Laya.Vector2,this.showRange=20,this.scale=1,this.isFirstRun=!1,this.type="Enemy",this.iconUrl=""}},Ot=(Ft.type_Enemy="Enemy",Ft.type_Chest="Chest",Ft.type_Buff="Buff",Ft.type_Target="Target",Ft.type_ZombieFactory="ZombieFactory",Ft.type_Car="Car",Ft.type_Bunker="Bunker",Ft.type_Quest="Quest",class extends e{constructor(){super(...arguments),this._boltNum=0,this._batteryNum=0,this.isRefreshBoltNum=!1,this.isRefreshbatteryNum=!1}get boltNum(){return this._boltNum}set boltNum(e){this.isRefreshBoltNum=!0,this._boltNum=e}get batteryNum(){return this._batteryNum}set batteryNum(e){this.isRefreshbatteryNum=!0,this._batteryNum=e}}),Ht=class extends e{constructor(){super(...arguments),this.selfGetMode=!1,this.targetPos=new Laya.Vector3(0,0,0),this.keepColliderF=1,this.showTime=1,this.targetId=-1,this.keepTime=.5,this.state="Normal"}},Vt=(Ht.State_Normal="Normal",Ht.State_HeadShow="HeadShow",class extends e{constructor(){super(...arguments),this.buffList=[]}}),zt=class{static BuffInit(e,t,i,o){}static BuffUpdate(e,t,i,o){}static BuffDispose(e,t,i,o){}static HitedBuffDeal(e,t,i,o){}static HitBuffDeal(e,t,i,o){}},Wt=(zt.BuffName="DR",class{static BuffInit(e,t,i,o){t.GetComponent(w).speedScale=0,o?i.buffKeepTime<o.buffKeepTime&&(i.buffKeepTime=o.buffKeepTime):t.GetComponent(R).anyScale-=1e3}static BuffUpdate(e,t,i,o){}static BuffDispose(e,t,i,o){t.GetComponent(R).anyScale+=1e3}static HitedBuffDeal(e,t,i,o){}static HitBuffDeal(e,t,i,o){}}),Zt=(Wt.BuffName="SAP",class{static BuffInit(e,t,i,o){}static BuffUpdate(e,t,i,o){}static BuffDispose(e,t,i,o){if(t.GetComponent(R).exp+=i.f1*(.01*t.GetComponent(R).intelligency+1),t.GetComponent(M).isInCameraArea){let e=t.GetComponent(M).pos.clone();e.y+=.8,O.CreatPrefabEntityUsePos(N.Effect_GetItemEffect,e)}}static HitedBuffDeal(e,t,i,o){}static HitBuffDeal(e,t,i,o){}}),jt=(Zt.BuffName="GetExpDelay",class{static BuffInit(e,t,i,o){if(o)o.buffKeepTime>i.buffKeepTime&&(i.buffKeepTime=o.buffKeepTime);else{i.t1=t.GetComponent(R).dmg*i.f1*.01-t.GetComponent(R).dmg,t.GetComponent(R).dmg+=i.t1;let e=O.CreatPrefabEntityUsePos(N.Effect_DmgBuffEffect,t.GetComponent(M).pos);e.GetComponent(Mt).followTargetId=t.id,i.effectId=e.id}}static BuffUpdate(e,t,i,o){}static BuffDispose(e,t,i,o){t.GetComponent(R).dmg-=i.t1;let a=e.GetEntityByID(i.effectId);a&&a.Destory()}static HitedBuffDeal(e,t,i,o){}static HitBuffDeal(e,t,i,o){}}),Kt=(jt.BuffName="DmgUp",class{}),qt=(Kt.JSCode="JSCode",Kt.Login="Login",Kt.GetIosConfig="myurl://"+k.isQQurl+"sh.fcapi.data-eye.cn/IOG_Config/GetConfig",class{static User_JSCode(e,t,i,o=null,a=!0){K.NetModule().Request({code:e},Kt.JSCode,t,i,o,a)}static User_Login(e,t,i,o=null,a=!0){K.NetModule().Request({id:e},Kt.Login,t,i,o,a)}static User_GetConfig(e,t,i,o=null,a=!0){var n=k.v;K.NetModule().Request({ProjectID:e,Version:n},Kt.GetIosConfig,t,i,o,a)}}),Yt=class extends te{constructor(){super(...arguments),this.videoAdId="2300000676_01",this.platformData=new ee}Init(){let t=this;(Yt.Instance=this).kwaigame=window.kwaigame,null==this.lanuchData&&(this.lanuchData=this.kwaigame.getLaunchOptionsSync(),console.warn("lanuchData:",JSON.stringify(this.lanuchData))),this.kwaigame.getSystemInfo({response:e=>{console.warn("获取系统信息:"+JSON.stringify(e)),t.platformData.appName=e.appName,t.platformData.platform=e.platform,t.platformData.coreVersion=e.osVersion,t.platformData.language=e.locale,t.platformData.model=e.deviceMode}}),this.kwaigame.onShow(function(e){console.log("onShow:",JSON.stringify(e))}),this.kwaigame.onHide(function(e){console.warn("onHide:",JSON.stringify(e))}),this.kwaigame.isSupportAsync(this.kwaigame.Support.features.RewardVideo,{response:e=>{console.log("support reward video: "+e)}}),this.kwaigame.isSupportAsync(this.kwaigame.Support.features.Recorder,{response:e=>{console.log("support Recorder: "+e)}}),this.kwaigame.isSupportAsync(this.kwaigame.Support.features.Share,{response:e=>{console.log("support Recorder: "+e)}}),this.kwaigame.login({success:e=>{console.warn("登录成功:gameUserId:"+e.gameUserId,e.gameToken),W.openId=e.gameUserId,SC.GetOpenIdEnd()},fail:e=>{console.warn("登录失败:"+JSON.stringify(e))}}),this.kwaigame.getUserInfo({success:e=>{console.warn("获取用户信息成功："+JSON.stringify(e))},fail:e=>{console.warn("获取用户信息失败: "+JSON.stringify(e))},complete:()=>{console.warn("获取用户信息完成")}}),this.kwaigame.getLocation({success:e=>{console.warn("获取地理位置成功:"+JSON.stringify(e))},fail:e=>{console.warn("获取地理位置失败:"+JSON.stringify(e))}}),this.initVideo(),this.initMediaRecorder()}LoadConfig(){K.PlatformModule().projectID="ks_qsll",qt.User_GetConfig(K.PlatformModule().projectID,this,function(e){try{console.warn("GetConfig success:",e),K.PlatformModule().chinaState=e.data.Base.Area[1]}catch(e){}},function(e){})}initMediaRecorder(){console.warn("初始化录屏1"),this.mediaRecorder=this.kwaigame.createMediaRecorder(),console.warn("初始化录屏2"),null===this.mediaRecorder?console.error("当前版本 App 不支持录屏"):(this.mediaRecorder.onError(function(e){e.code,e.msg,console.warn("发生录屏错误 "+JSON.stringify(e))}),this.mediaRecorder.onStart(function(){console.warn("开始录屏成功的回调函数")}),this.mediaRecorder.onStop(function(e){console.warn("录屏失败:",JSON.stringify(e)),e.videoID}),this.mediaRecorder.onPause(function(){console.warn("暂停录屏成功的回调函数")}),this.mediaRecorder.onResume(function(){console.warn("继续录屏成功的回调函数")}))}initVideo(){this.videoAd=this.kwaigame.createRewardedVideoAd({adUnitId:this.videoAdId}),this.videoAd?(console.log("激励广告组件获取成功"),this.videoAd.onClose(e=>{console.log("激励视频关闭回调: "+JSON.stringify(e)),j.HideShortWait()}),this.videoAd.onReward(e=>{console.log("激励视频奖励回调: "+JSON.stringify(e)),Yt.Instance.watchFun.call(this),j.HideShortWait()})):console.log("激励广告组件获取失败")}WatchVideo(e,t,i=0){j.ShowShortWait(),k.IsInWebTest?e.call(null):this.watchFun=e;let o=this.videoAd;o?o.show({success:()=>{j.HideShortWait(),console.log("激励视频播放成功")},fail:e=>{console.log("激励视频播放失败: "+JSON.stringify(e)),j.TopUI_TipShow(K.DataModule().GetLz().GetText("VideoErrorTip1"))}}):console.log("请先获取激励视频组件")}recordScreenStart(){try{this.mediaRecorder.start(),console.warn("开始录屏")}catch(e){console.warn("recordScreenStart err "+e)}}recordScreenEnd(){try{this.mediaRecorder.stop(),console.warn("结束录屏")}catch(e){console.warn("recordScreenEnd err "+e)}}shareRecordVideo(t,i){this.mediaRecorder.publishVideo({callback:e=>{if(null!=e)return e.code,e.msg,console.log("分享录屏失败: "+JSON.stringify(e)),void(i&&i());console.log("分享录屏成功"),t&&t()}})}GetShareKey(){let e=K.DataModule().GetLocal().gameRule.GetShareVideo_Bonus(),t=[],i=(t.push(e),1),o=K.DataModule().GetUser().GetSaveKey("ShareKey");null!=o&&(i=Number(o.data)+1),K.DataModule().GetUser().AddSaveKey("ShareKey",i.toString()),j.GetItemDataAndIsShowBox(at.TT_ShareVideo,t,0)}},Qt=class{static BuffInit(e,t,i,o){if(o)o.buffKeepTime>i.buffKeepTime&&(i.buffKeepTime=o.buffKeepTime);else if(t.GetComponent(R).speed+=i.f1,!(k.Platform==T.KUAISHOU&&"iOS"==Yt.Instance.platformData.platform||T.IS_VIVO_PLATFORM)){let e=O.CreatPrefabEntityUsePos(N.Effect_SpeedUpEffect,t.GetComponent(M).pos);e.GetComponent(Mt).followTargetId=t.id,i.effectId=e.id}}static BuffUpdate(e,t,i,o){}static BuffDispose(e,t,i,o){t.GetComponent(R).speed-=i.f1;let a=e.GetEntityByID(i.effectId);a&&a.Destory()}static HitedBuffDeal(e,t,i,o){}static HitBuffDeal(e,t,i,o){}},Jt=(Qt.BuffName="SpeedUp",class{static BuffInit(e,t,i,o){if(0<t.GetComponent(R).hp){H.AddHp(t,.01*i.f1*t.GetComponent(R).maxHp+i.f2);let e=O.CreatPrefabEntityUsePos(N.Effect_HealEffect,t.GetComponent(M).pos);e.GetComponent(Mt).followTargetId=t.id,i.effectId=e.id}i.buffKeepTime=1}static BuffUpdate(e,t,i,o){}static BuffDispose(e,t,i,o){let a=e.GetEntityByID(i.effectId);a&&a.Destory()}static HitedBuffDeal(e,t,i,o){}static HitBuffDeal(e,t,i,o){}}),Xt=(Jt.BuffName="Heal",class{static BuffInit(e,t,i,o){var a;o?(a=i.f1+100,H.GetBuffData(o,1),t.GetComponent(R).dmg*=(100+o.f1)/a):(H.GetBuffData(i,1),t.GetComponent(R).dmg*=.01*i.f1+1),t.GetComponent(R).addDmgLevel+=1,i.buffKeepTime=-1,b.Warn("加伤害",i,o)}static ChangeGun(e,t,i,o){H.GetBuffData(i,1),t.GetComponent(R).dmg*=.01*i.f1+1}static BuffUpdate(e,t,i,o){}static BuffDispose(e,t,i,o){}static HitedBuffDeal(e,t,i,o){}static HitBuffDeal(e,t,i,o){}}),$t=(Xt.BuffName="AddDmg",class{static BuffInit(e,t,i,o){t.GetComponent(R).maxHp,o?(H.GetBuffData(o,1),t.GetComponent(R).maxHp+=o.f1):(H.GetBuffData(i,1),t.GetComponent(R).maxHp+=i.f1),H.AddHp(t,t.GetComponent(R).maxHp),i.buffKeepTime=-1}static BuffUpdate(e,t,i,o){}static BuffDispose(e,t,i,o){}static HitedBuffDeal(e,t,i,o){}static HitBuffDeal(e,t,i,o){}}),ei=($t.BuffName="AddMaxHp",class{static BuffInit(e,t,i,o){o?(H.GetBuffData(o,1),t.GetComponent(R).speed-=i.f1,t.GetComponent(R).speed+=o.f1):(H.GetBuffData(i,1),t.GetComponent(R).speed+=i.f1),i.buffKeepTime=-1}static BuffUpdate(e,t,i,o){}static BuffDispose(e,t,i,o){}static HitedBuffDeal(e,t,i,o){}static HitBuffDeal(e,t,i,o){}}),ti=(ei.BuffName="AddSpeed",class extends e{constructor(){super(...arguments),this.BodySkin="",this.WeaponSkin="",this.weaponId="",this.weaponType="",this.skinId="",this.skinSpEffect="",this.skinSpEffectList=[],this.skinSpEffect_F1=0,this.skinSpEffect_F2=0,this.skinSpEffect_F3=0,this.skinSpEffect_F4=0,this.skinSpEffect_F5=0,this.skinSpEffect_F6=0,this.skinSpEffect_F7="",this.weaponSkinID="",this.weaponSkinSpEffect="",this.weaponSkinSpEffect_F1=0,this.weaponSkinSpEffect_F2=0,this.weaponSkinSpEffect_F3=0,this.weaponSkinSpEffect_F4=0}}),ii=class extends Laya.Script{constructor(){super(),this.scaleY=1,this.nowScaleY=1}onAwake(){}onEnable(){this.scaleNode=this.owner}onUpdate(){this.scaleNode&&(this.nowScaleY=S.MoveTowards(this.nowScaleY,this.scaleY,2*A.TimeDelta),this.scaleNode.transform.localScaleY=this.nowScaleY)}onDisable(){}},oi=class extends e{constructor(){super(...arguments),this.BuffID="",this.keepTime=0,this.isOnlyBuff=!0,this.F1=0,this.F2=0,this.F3=0,this.F4=0,this.B2_BuffID="",this.B2_keepTime=0,this.B2_isOnlyBuff=!0,this.B2_F1=0,this.B2_F2=0,this.B2_F3=0,this.B2_F4=0}},ai=class extends e{constructor(){super(...arguments),this.hitedTarget=-1,this.attacker=-1,this.bullectId=-1,this.stiffness=-1,this.beforeTriggerDmg=!1,this.dmg=0,this.olddmg=0,this.dmgType=0,this.toDeath=0,this.specialCombo=1}},ni=class{static BuffInit(e,t,i,o){t.GetComponent(R).anyScale-=i.f1}static BuffUpdate(e,t,i,o){}static BuffDispose(e,t,i,o){t.GetComponent(R).anyScale+=i.f1;let a=e.GetEntityByID(i.effectId);a&&a.Destory()}static HitedBuffDeal(e,t,i,o){}static HitBuffDeal(e,t,i,o){}},si=(ni.BuffName="Slow",class{static EnterState(e,t){t.GetComponent(xt).SetAnimation("Stunned",0),t.GetComponent(w).vec.x=0,t.GetComponent(w).vec.z=0}static StateUpdate(e,t,i){t.GetComponent(R).GetIsDizz()||t.GetComponent(F).ChangeState(Mf.StateName)}static StateExit(e,t){}}),li=(si.StateName="Dizz",class{static BuffInit(e,t,i,o){if(o)o.buffKeepTime>i.buffKeepTime&&(i.buffKeepTime=o.buffKeepTime);else{t.GetComponent(R).dizz+=1,t.GetComponent(w).banDirCtrl+=1,t.GetComponent(w).banDirRotationCtrl+=1,t.GetComponent(L).banTrigger+=1,t.GetComponent(R).banAtt+=1,t.GetComponent(F).ChangeState(si.StateName);let e=O.CreatPrefabEntityUsePos(N.Effect_DizzEffect,t.GetComponent(M).pos);e.GetComponent(Mt).followTargetId=t.id,i.effectId=e.id}}static BuffUpdate(e,t,i,o){}static BuffDispose(e,t,i,o){--t.GetComponent(R).dizz,--t.GetComponent(w).banDirCtrl,--t.GetComponent(w).banDirRotationCtrl,--t.GetComponent(L).banTrigger,--t.GetComponent(R).banAtt;let a=e.GetEntityByID(i.effectId);a&&a.Destory()}static HitedBuffDeal(e,t,i,o){}static HitBuffDeal(e,t,i,o){}}),ri=(li.BuffName="Dizz",class{static AddBuffToTarget(e,t,i,o,a=0,n=0,s=0,l=0,r=-1,h=0,m=0,d=0,c=0,u=1){if(e.GetComponent(R).GetIsNoCtrlEffect()){if(t==Rf.BuffName)return;if(t==ni.BuffName)return;if(t==li.BuffName)return}e.HasComponent(Vt.id)||e.AddComponent(Vt);let p=e.GetComponent(Vt),g=null,f=new class{constructor(){this.buffName="",this.buffKeepTime=0,this.creatorId=-1,this.f1=0,this.f2=0,this.f3=0,this.f4=0,this.f5=0,this.t1=0,this.t2=0,this.t3=0,this.t4=-1,this.t5=0,this.t6=0,this.t7=-1,this.l1=0,this.l2=0,this.l3=0,this.l4=0,this.l5=0,this.effectId=-1,this.v3=new Laya.Vector3(0,0,0),this.useDesdtory=!1,this.level=0,this.maxLevel=0,this.eternal=!1}};var _;if(f.buffName=t,V.IsGameMode_Zombie()?(_=K.DataModule().GetLocal().zModePassiveSkill.GetByKey(f.buffName))?(f.maxLevel=_.SkillMaxLevel,i=!0):f.maxLevel=0:(_=K.DataModule().GetLocal().skill.Get(f.buffName))?(f.maxLevel=_.SkillMaxLevel,i=!0):f.maxLevel=0,i)for(let e=0;e<p.buffList.length;e++)p.buffList[e].buffName==t&&(g=p.buffList[e]);f.f1=a,f.f2=n,f.f3=s,f.f4=l,f.l1=h,f.l2=m,f.l3=d,f.l4=c,f.creatorId=r,f.buffKeepTime=o,g?(f.level=g.level+u,k_.Invoke(x_.BuffInit,q.EcsGameMgr.nowGame.world,e,g,f),g.level=f.level,H.GetBuffData(f,1,1,1,1,1,1,g)):(f.level=u,k_.Invoke(x_.BuffInit,q.EcsGameMgr.nowGame.world,e,f,null),p.buffList.push(f))}static AddSAP(e,t){this.AddBuffToTarget(e,Wt.BuffName,!0,t)}static DelayGetExp(e,t,i){this.AddBuffToTarget(e,Zt.BuffName,!1,t,i)}static ClearBuffByName(e,i){if(e.HasComponent(Vt.id)){let t=e.GetComponent(Vt).buffList;for(let e=0;e<t.length;e++)t[e].buffName==i&&(t[e].buffKeepTime=0)}}static ClearAllBuff(e){if(e.HasComponent(Vt.id)){let t=e.GetComponent(Vt).buffList;for(let e=0;e<t.length;e++)t[e].eternal||(t[e].buffKeepTime=0)}}}),hi=class{static BuffInit(e,t,i,o){i.t3=0}static BuffUpdate(i,o,a,n){if(a.t1+=n,a.t2-=n,a.t2<0)if(a.t2=.3,a.t1>a.f1){let t=o.GetComponent(ti);if(t.weaponNode){let e=t.weaponNode.getChildByName("Lightning");e&&(e.active=!0)}n=o.GetComponent(v),n=V.GetUnitByRange(o.GetComponent(M).pos,n.nowMapPos.x,n.nowMapPos.y,a.f3,o.id);if(0<n.length){let e=Math.floor(q.Random()*n.length),t=i.GetEntityByID(n[e]);t&&(a.t1=0,H.HitTarget(t.id,o.id,H.GetSkillDmg(o)*a.f2,!0),O.CreatPrefabEntityUsePos(N.Effect_LightEffect,t.GetComponent(M).pos))}}else{let t=o.GetComponent(ti);if(t.weaponNode){let e=t.weaponNode.getChildByName("Lightning");e&&(e.active=!1)}}}static BuffDispose(e,t,i,o){let a=e.GetEntityByID(i.effectId);a&&a.Destory()}static HitedBuffDeal(e,t,i,o){}static HitBuffDeal(e,t,i,o){}},mi=(hi.BuffName="ThorPower",class{static BuffInit(e,t,i,o){if(o)o.buffKeepTime>i.buffKeepTime&&(i.buffKeepTime=o.buffKeepTime);else{const e=t.GetComponent(R);if(e.speed,e.speed+=i.f1,e.attSpeedScale+=.01*i.f2,!(k.Platform===T.KUAISHOU&&"iOS"==Yt.Instance.platformData.platform||T.IS_VIVO_PLATFORM)){let e=O.CreatPrefabEntityUsePos(N.Effect_Adrenaline,t.GetComponent(M).pos);e.GetComponent(Mt).followTargetId=t.id,i.effectId=e.id}}}static BuffUpdate(e,t,i,o){}static BuffDispose(e,t,i,o){const a=t.GetComponent(R);a.speed-=i.f1,a.attSpeedScale-=.01*i.f2;let n=e.GetEntityByID(i.effectId);n&&n.Destory()}static HitedBuffDeal(e,t,i,o){}static HitBuffDeal(e,t,i,o){}}),di=(mi.BuffName="Adrenaline",class{static BuffInit(e,t,i,o){i.eternal=!0}static BuffUpdate(e,t,i,o){}static BuffDispose(e,t,i,o){}static HitedBuffDeal(e,t,i,o){}static HitBuffDeal(e,t,i,o){1!==o.toDeath||V.IsGameMode_Zombie()||ri.AddBuffToTarget(t,mi.BuffName,!0,i.f3,i.f1,i.f2,i.f3)}}),ci=(di.BuffName="Sportsman",class{static DealSnowSceneName(){V.UseSnowSpScene&&(V.nowScene="BattleScene3")}static SnowSceneUseSantaSkin(e){return V.UseSnowSpScene?"Santas":e}static SnowSceneAddAILevel(e){return V.UseSnowSpScene?e+5:e}static SnowSceneAddSkill(e){var t;V.UseSnowSpScene&&(t=K.DataModule().GetLocal().skill.Get("IceBall"),H.AddSkill(e,t.SkillFun,t.SkillID,1,1,t.SkillMaxLevel))}static SnowSceneCdCut(e){return V.UseSnowSpScene?.5*e:e}static UseSnowBall(){return!1}static ClearSnowScene(){V.UseSnowSpScene=!1}static GuGuChicken(e){e&&e.HasComponent(ti.id)&&"GuGuChicken"!=e.GetComponent(ti).weaponSkinSpEffect&&e.GetComponent(ti).skinSpEffect}static QianRenCutStar(e){if(e.HasComponent(ti.id)){let t=e.GetComponent(ti);if("ThousandBlades"==t.weaponSkinSpEffect&&q.Random()<.01*t.weaponSkinSpEffect_F1&&t.weaponNode){let e=t.weaponNode.getComponent(Laya.Animator);e&&e.play("QianrenCut",0,0),t.weaponSkinSpEffect_F4=8}}}static QianRenBullet(){}static QianRenGetHeroPiece(e){var t=q.NowGameWorld.GetSingleCompoent(ti);if(t&&"ThousandBlades"==t.weaponSkinSpEffect&&e<=1){t=K.DataModule().GetLocal().weaponSkin.Get("ThousandBlades");if(t&&Math.random()<.01*t.F3)return!0}return!1}static MonkeyKingBarStar(e){if(e.HasComponent(ti.id)){let i=e.GetComponent(ti);if("MonkeyKingBar"==i.weaponSkinSpEffect&&(i.weaponSkinSpEffect_F4=.01*(i.weaponSkinSpEffect_F1+(i.weaponSkinSpEffect_F2-i.weaponSkinSpEffect_F1)*q.Random()),i.weaponNode)){let t=i.weaponNode.getChildByName("Root");if(t){let e=t.getComponent(ii);(e=e||t.addComponent(ii)).scaleY=1+i.weaponSkinSpEffect_F4+.4}}}}static MonkeyKingBarEnd2(t){if(t.HasComponent(ti.id)){let e=t.GetComponent(ti);if("MonkeyKingBar"==e.weaponSkinSpEffect&&e.weaponNode){let t=e.weaponNode.getChildByName("Root");if(t){let e=t.getComponent(ii);(e=e||t.addComponent(ii)).scaleY=1}}}}static MonkeyKingBarBullet(){}static IsSeaPower(e){return!(!e.HasComponent(ti.id)||"SeaPower"!=e.GetComponent(ti).skinSpEffect)}static UseSeaPower(){return!0}static IsLandPower(e){return!(!e.HasComponent(ti.id)||"LandPower"!=e.GetComponent(ti).skinSpEffect)}static LandPowerBullet(e,t){t.HasComponent(ti.id)&&(e.GetComponent(oi).B2_F1=.01*H.GetSkillDmg(t)*t.GetComponent(ti).skinSpEffect_F1,e.GetComponent(oi).B2_F2=t.GetComponent(ti).skinSpEffect_F2,e.GetComponent(oi).B2_keepTime=.001*t.GetComponent(ti).skinSpEffect_F3)}static Qi_WieldThousandBlades(){return!0}static Qi_FlyingScissor(e){if(e.HasComponent(ti.id)&&"Assassin7"==e.GetComponent(ti).skinSpEffect&&-1!=e.GetComponent(ti).skinSpEffectList.indexOf("FlyingScissor")){e=.01*e.GetComponent(ti).skinSpEffect_F1;if(q.Random()<e)return!0}return!1}static Qi_FlyingScissor2(e){if(e.HasComponent(ti.id)&&"Assassin7"==e.GetComponent(ti).skinSpEffect&&-1!=e.GetComponent(ti).skinSpEffectList.indexOf("FlyingScissor2")){e=.01*e.GetComponent(ti).skinSpEffect_F1;if(q.Random()<e)return!0}return!1}static Qi_ThousandBladesHit(e){if(e.HasComponent(ti.id)&&"Assassin7"==e.GetComponent(ti).skinSpEffect&&-1!=e.GetComponent(ti).skinSpEffectList.indexOf("ThousandBladesHit")){e=.01*e.GetComponent(ti).skinSpEffect_F5;if(q.Random()<e)return!0}return!1}static ThorPower(e){var t;e.HasComponent(ti.id)&&"Thunderclap"==e.GetComponent(ti).weaponSkinSpEffect&&(t=e.GetComponent(ti),b.Warn("加入雷神之力"),ri.AddBuffToTarget(e,hi.BuffName,!0,-1,.001*t.weaponSkinSpEffect_F1,.01*t.weaponSkinSpEffect_F2,t.weaponSkinSpEffect_F4))}static Sportsman(e){var t;e.HasComponent(ti.id)&&"Sportsman"==e.GetComponent(ti).skinSpEffect&&(t=e.GetComponent(ti),b.Warn("运动员"),ri.AddBuffToTarget(e,di.BuffName,!0,-1,t.skinSpEffect_F1,t.skinSpEffect_F2,.001*t.skinSpEffect_F3))}}),ui=class{static EnterState(e,h){let m=h.GetComponent(F),d=h.GetComponent(U),c=h.GetComponent(R);if(d.gunMode)h.GetComponent(F).time=d.act0Time,h.GetComponent(F).step=0,h.GetComponent(xt).useUpBody=!0;else{let e=d.act0Clip,t=d.act0Time*(1/c.GetAttSpeedScale()),i=d.act0Step1Time,o=d.act0Step2Time,a=d.act0Step3Time,n=1,s=1,l=1,r=d.att0Time;switch(m.str1=d.bullet0,m.t5=d.bullet0Dis,d.gunMode||(h.GetComponent(R).speed-=3),d.nowAct){case 0:e=d.act0Clip,t=d.act0Time*(1/c.GetAttSpeedScale()),i=d.act0Step1Time,o=d.act0Step2Time,a=d.act0Step3Time,r=d.att0Time,m.str1=d.bullet0,m.t5=d.bullet0Dis,m.t6=d.bullet0height,m.r4=d.superArmor0;break;case 1:e=d.act1Clip,t=d.act1Time*(1/c.GetAttSpeedScale()),i=d.act1Step1Time,o=d.act1Step2Time,a=d.act1Step3Time,r=d.att1Time,m.str1=d.bullet1,m.t5=d.bullet1Dis,m.t6=d.bullet1height,m.r4=d.superArmor1;break;case 2:e=d.act2Clip,t=d.act2Time*(1/c.GetAttSpeedScale()),i=d.act2Step1Time,o=d.act2Step2Time,a=d.act2Step3Time,r=d.att2Time,m.str1=d.bullet2,m.t5=d.bullet2Dis,m.t6=d.bullet2height,m.r4=d.superArmor2}d.comboTime<=0&&(e=d.act0Clip,t=d.act0Time*(1/c.GetAttSpeedScale()),i=d.act0Step1Time,o=d.act0Step2Time,a=d.act0Step3Time,r=d.att0Time,m.str1=d.bullet0,m.t5=d.bullet0Dis,m.t6=d.bullet0height,m.r4=d.superArmor0,d.nowAct=0),m.t7=0,h.GetComponent(xt).SetAnimation(e);var u,p=i+o+a;p>=t?(u=t/p,i*=u,o*=u,a*=u,r*=u,n=p/t,s=p/t,l=p/t):(u=t-o,p=i/(i+a)*u,u=a/(i+a)*u,r=r-i+p,n=i/p,l=a/u,i=p,a=u),h.GetComponent(F).time=t,h.GetComponent(R).triggerAtt=!1,m.step=0,m.t1=i,m.t2=o,m.t3=a,m.r1=n,m.r2=s,m.r3=l,m.t4=r,m.entity1Id=-1,d.nowAct++,d.nowAct>=d.maxAct&&(d.nowAct=0),ci.QianRenCutStar(h),ci.MonkeyKingBarStar(h)}}static StateUpdate(e,t,i){let o=t.GetComponent(R),a=t.GetComponent(U),n=t.GetComponent(F);if(a.gunMode){if(o.IsBanAtt())return;var s=t.GetComponent(w);if(0<Laya.Vector3.scalarLength(s.dir)?a.runClip&&t.GetComponent(xt).SetAnimation(a.runClip):a.idleClip&&t.GetComponent(xt).SetAnimation(a.idleClip),0==n.step){if(!a.IsCanShot())return void(a.singleShotLoading?0<a.singleShotLoadingTime&&a.nowBulletCount<=0&&(n.step=1):0<a.bulletLoadTime&&a.nowBulletCount<=0&&(n.step=1));let e=!1;if(1==a.consecutiveShots?(e=!0,n.step=1,a.consecutiveShotsTimes=0):a.consecutiveShotsTimes<a.consecutiveShots?e=!0:(n.step=1,a.consecutiveShotsTimes=0),e){t.GetComponent(R).triggerAtt=!1,a.nowBulletCount--,a.singleShotLoading?(0<a.superReloadCount&&(--a.superReloadCount,--a.bulletCount),a.nowBulletCount<a.bulletCount&&((a.bulletLoadTime=0)==a.nowBulletCount?(s=a.bulletLoadCD/a.bulletCount,a.singleShotLoadingTime=s,a.singleShotLoadingCDTime=0):(a.singleShotLoadingTime=0,a.singleShotLoadingCDTime=a.singleShotLoadingCD))):a.nowBulletCount<=0&&(a.bulletLoadTime=a.bulletLoadCD);let e=t.GetComponent(M).rotation.y;a.isAR||"Local"!=t.GetComponent(E).netId||(e=V.lastAttackAngle);s=a.randomShootingAngle;0!=s&&(q.Random()<.5?e-=s:e+=s),n.str1=a.bullet0,n.t5=a.bullet0Dis,n.t6=a.bullet0height,V.attFun(t,e,!1,!0),t.GetComponent(R).superArmor+=n.r4,n.t7=n.r4,a.consecutiveShotsTimes+=1}}}1==n.step&&(a.isAR?1==o.attBtnState&&(t.HasComponent(ut.id)&&(o.attBtnState=0),a.IsCanShot()&&(n.step=0)):(i*=o.GetAnyScale(),n.time-=i,n.time<0&&(n.step=3,t.GetComponent(xt).animatorSpeedScale=1,n.ChangeState(Mf.StateName))))}static StateExit(e,t){ci.MonkeyKingBarEnd2(t),t.GetComponent(R).superArmor-=t.GetComponent(F).t7,t.GetComponent(U).gunMode?t.GetComponent(xt).useUpBody=!1:t.GetComponent(R).speed+=3,t.GetComponent(xt).animatorSpeedScale=1,t.GetComponent(U).comboTime=.5}},pi=(ui.StateName="Att",class extends e{constructor(){super(...arguments),this.driverId=-1,this.passengerIdList=[],this.offset=new Laya.Vector3(0,0,0),this.speed=2,this.seatingLimit=4,this.carDoorId=-1,this.carRuntime=0,this._isMoving=!1,this.isDamage=!1,this.refreshTime=0,this.carSmokeEffect=-1,this.onLight=!1,this.engineAudioChannel=null}}),gi=class extends e{constructor(){super(...arguments),this.enable=!0,this.path=[],this.targetPos=new Laya.Vector3(0,0,0),this.needFindPath=!1,this.isArrive=!1,this.findPathFailed=!1,this.isPathing=!1}SetNewTarget(e,t,i){this.isPathing=!0,this.targetPos.x=e,this.targetPos.y=t,this.targetPos.z=i,this.needFindPath=!0,this.isArrive=!1,this.findPathFailed=!1}},fi=class extends e{constructor(){super(...arguments),this.shadowTargetId=0,this.size=.8,this.render=!0,this.height=.05}},_i=class{static BuffInit(e,t,i,o){if(o)o.buffKeepTime>i.buffKeepTime&&(i.buffKeepTime=o.buffKeepTime);else{t.GetComponent(R).invincible+=100;let e=O.CreatPrefabEntityUsePos(N.Effect_BlueInvincibleEffect,t.GetComponent(M).pos);e.GetComponent(Mt).followTargetId=t.id,i.effectId=e.id}}static BuffUpdate(e,t,i,o){let a=e.GetEntityByID(i.effectId);a&&(e=t.GetComponent(R),a.GetComponent(M).SetScale(e.sizeScale,e.sizeScale,e.sizeScale),a.GetComponent(Mt).offset.y=.82*e.sizeScale)}static BuffDispose(e,t,i,o){t.GetComponent(R).invincible-=100;let a=e.GetEntityByID(i.effectId);a&&a.Destory()}static HitedBuffDeal(e,t,i,o){}static HitBuffDeal(e,t,i,o){}},Ii=(_i.BuffName="Invincible",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","InGameUI")}onConstruct(){this.m_c1=this.getControllerAt(0),this.m_KillAniCtrl=this.getControllerAt(1),this.m_GameMode=this.getControllerAt(2),this.m_guideMode=this.getControllerAt(3),this.m_c2=this.getControllerAt(4),this.m_IphoneX=this.getControllerAt(5),this.m_pcMode=this.getControllerAt(6),this.m_Choose=this.getControllerAt(7),this.m_FBTips=this.getChildAt(0),this.m_n159=this.getChildAt(1),this.m_n156=this.getChildAt(2),this.m_n161=this.getChildAt(3),this.m_HitText=this.getChildAt(4),this.m_FogHitCom=this.getChildAt(5),this.m_n137=this.getChildAt(6),this.m_FistBtn=this.getChildAt(7),this.m_Joy=this.getChildAt(8),this.m_Joy1=this.getChildAt(9),this.m_ZombieRadiation=this.getChildAt(10),this.m_batterTips=this.getChildAt(11),this.m_SkillJoy1=this.getChildAt(12),this.m_SkillJoy2=this.getChildAt(13),this.m_SkillJoy3=this.getChildAt(14),this.m_SkillJoy4=this.getChildAt(15),this.m_SurvivalRewardBtn=this.getChildAt(16),this.m_SurvivalGuideBtn=this.getChildAt(17),this.m_killinfoTxt=this.getChildAt(18),this.m_killBg=this.getChildAt(19),this.m_killIcon=this.getChildAt(20),this.m_n280=this.getChildAt(21),this.m_kill=this.getChildAt(22),this.m_n107=this.getChildAt(23),this.m_expBar=this.getChildAt(24),this.m_n131=this.getChildAt(25),this.m_nowLevelTxt=this.getChildAt(26),this.m_n132=this.getChildAt(27),this.m_n135=this.getChildAt(28),this.m_n134=this.getChildAt(29),this.m_leftplayerTxt=this.getChildAt(30),this.m_killplayerTxt=this.getChildAt(31),this.m_hongbaobg=this.getChildAt(32),this.m_hongbaoicon=this.getChildAt(33),this.m_hongbaoTxt=this.getChildAt(34),this.m_HongbaoCount=this.getChildAt(35),this.m_huoyueBg=this.getChildAt(36),this.m_n276=this.getChildAt(37),this.m_n275=this.getChildAt(38),this.m_text_huoyue=this.getChildAt(39),this.m_huoyueCount=this.getChildAt(40),this.m_exp=this.getChildAt(41),this.m_ZombieFactoryMaxTip=this.getChildAt(42),this.m_ChangeBulletBtn=this.getChildAt(43),this.m_skill1=this.getChildAt(44),this.m_skill2=this.getChildAt(45),this.m_skill3=this.getChildAt(46),this.m_skillBtns=this.getChildAt(47),this.m_frameTxt=this.getChildAt(48),this.m_start2=this.getChildAt(49),this.m_start=this.getChildAt(50),this.m_touchPoint=this.getChildAt(51),this.m_dmgBg2=this.getChildAt(52),this.m_n144=this.getChildAt(53),this.m_n145=this.getChildAt(54),this.m_dmgBg1=this.getChildAt(55),this.m_n235=this.getChildAt(56),this.m_dmgRankList=this.getChildAt(57),this.m_myRank=this.getChildAt(58),this.m_dmgRankGroup=this.getChildAt(59),this.m_killNianName=this.getChildAt(60),this.m_n152=this.getChildAt(61),this.m_fightNianPlayerName=this.getChildAt(62),this.m_FightNianTitle=this.getChildAt(63),this.m_n157=this.getChildAt(64),this.m_n158=this.getChildAt(65),this.m_n160=this.getChildAt(66),this.m_n163=this.getChildAt(67),this.m_n164=this.getChildAt(68),this.m_n174=this.getChildAt(69),this.m_n175=this.getChildAt(70),this.m_n180=this.getChildAt(71),this.m_n176=this.getChildAt(72),this.m_n177=this.getChildAt(73),this.m_n178=this.getChildAt(74),this.m_n179=this.getChildAt(75),this.m_guidegroup=this.getChildAt(76),this.m_KillTips=this.getChildAt(77),this.m_boltBar=this.getChildAt(78),this.m_ZCoinBar=this.getChildAt(79),this.m_batteryBar=this.getChildAt(80),this.m_CoinBar=this.getChildAt(81),this.m_DayHitCom=this.getChildAt(82),this.m_ArrowHUD=this.getChildAt(83),this.m_ZombieInfoList=this.getChildAt(84),this.m_QuestPanel=this.getChildAt(85),this.m_QuestPanelBtn=this.getChildAt(86),this.m_n214=this.getChildAt(87),this.m_n215=this.getChildAt(88),this.m_n228=this.getChildAt(89),this.m_n216=this.getChildAt(90),this.m_AddCoinTip=this.getChildAt(91),this.m_n244=this.getChildAt(92),this.m_n259=this.getChildAt(93),this.m_dayText=this.getChildAt(94),this.m_ChangeSkillCom=this.getChildAt(95),this.m_ChangeCom=this.getChildAt(96),this.m_DoorCom=this.getChildAt(97),this.m_TentCom=this.getChildAt(98),this.m_QuestCom=this.getChildAt(99),this.m_text_luanDouTime=this.getChildAt(100),this.m_GuideStartGame=this.getChildAt(101),this.m_CarCom=this.getChildAt(102),this.m_n138=this.getChildAt(103),this.m_n264=this.getChildAt(104),this.m_n139=this.getChildAt(105),this.m_choose1=this.getChildAt(106),this.m_choose3=this.getChildAt(107),this.m_choose2=this.getChildAt(108),this.m_SkillInfoUIBtn=this.getChildAt(109),this.m_VideoGetAllBtn=this.getChildAt(110),this.m_SkillInfo=this.getChildAt(111),this.m_chooseList=this.getChildAt(112),this.m_text1=this.getChildAt(113),this.m_text2=this.getChildAt(114),this.m_text3=this.getChildAt(115),this.m_GuideTipsCom=this.getChildAt(116),this.m_aimCom=this.getChildAt(117),this.m_textInput=this.getChildAt(118),this.m_ShowChoose=this.getTransitionAt(0),this.m_ShowStart=this.getTransitionAt(1),this.m_touchEffect=this.getTransitionAt(2),this.m_killAni=this.getTransitionAt(3),this.m_chooseTitle=this.getTransitionAt(4),this.m_RevengeAni=this.getTransitionAt(5),this.m_ShowFightNian=this.getTransitionAt(6),this.m_LeftGuide=this.getTransitionAt(7),this.m_BloodyNight=this.getTransitionAt(8),this.m_AddDay=this.getTransitionAt(9),this.m_BloodyNightTips=this.getTransitionAt(10),this.m_Night=this.getTransitionAt(11),this.m_RightGuide=this.getTransitionAt(12),this.m_guide=this.getTransitionAt(13),this.m_GuideOver=this.getTransitionAt(14),this.m_t15=this.getTransitionAt(15),this.m_ShowZombieFactoryMaxTip=this.getTransitionAt(16),this.m_T_huoyue=this.getTransitionAt(17),this.m_t18=this.getTransitionAt(18)}}),Ci=(Ii.URL="ui://lcl1uligxqtl3y2f1",class{}),Gi=(Ci.HorizontalAxis="Horizontal",Ci.VerticalAxis="Vertical",Ci.HorizontalAxis0="Horizontal0",Ci.VerticalAxis0="Vertical0",Ci.SkillHorizontalAxis="SkillHorizontal",Ci.SkillVerticalAxis="SkillVertical",Ci.JumpBtn=Laya.Keyboard.SPACE,class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","CoverUI")}onConstruct(){this.m_Mode=this.getControllerAt(0),this.m_YLPlatform=this.getControllerAt(1),this.m_IsIphoneX=this.getControllerAt(2),this.m_n110=this.getChildAt(0),this.m_n112=this.getChildAt(1),this.m_local=this.getChildAt(2),this.m_nianBtn=this.getChildAt(3),this.m_line=this.getChildAt(4),this.m_weaponSkinCom=this.getChildAt(5),this.m_HeroBtn=this.getChildAt(6),this.m_EquitBtn=this.getChildAt(7),this.m_medalBtn=this.getChildAt(8),this.m_userTopExp=this.getChildAt(9),this.m_userTopExp_reward=this.getChildAt(10),this.m_signBtn=this.getChildAt(11),this.m_wheelBtn=this.getChildAt(12),this.m_getHeroBtn=this.getChildAt(13),this.m_shopBtn=this.getChildAt(14),this.m_newYear2021Btn=this.getChildAt(15),this.m_desktopBtn=this.getChildAt(16),this.m_playerBtn=this.getChildAt(17),this.m_cdkBtn=this.getChildAt(18),this.m_n153=this.getChildAt(19),this.m_n154=this.getChildAt(20),this.m_baozhuTip=this.getChildAt(21),this.m_DrawerBtn=this.getChildAt(22),this.m_MoreGamesBtn=this.getChildAt(23),this.m_qqRankBtn=this.getChildAt(24),this.m_taskBtn=this.getChildAt(25),this.m_OppoIconAdBtn=this.getChildAt(26),this.m_appointBtn=this.getChildAt(27),this.m_Btn_mode=this.getChildAt(28),this.m_textCover3=this.getChildAt(29),this.m_textCover4=this.getChildAt(30),this.m_textCover5=this.getChildAt(31),this.m_textCover6=this.getChildAt(32),this.m_btn_heroBox=this.getChildAt(33),this.m_btn_speed=this.getChildAt(34),this.m_btn_rank=this.getChildAt(35),this.m_qqAddBtn=this.getChildAt(36),this.m_WeaponTipsCom=this.getChildAt(37),this.m_btn_huoyue=this.getChildAt(38),this.m_tianJiangBoxBtn=this.getChildAt(39),this.m_Btn_signNewYear=this.getChildAt(40),this.m_t0=this.getTransitionAt(0),this.m_t1=this.getTransitionAt(1),this.m_FeiTianBoxAni=this.getTransitionAt(2),this.m_u5=this.getTransitionAt(3),this.m_u3=this.getTransitionAt(4),this.m_u4=this.getTransitionAt(5),this.m_u6=this.getTransitionAt(6),this.m_u1=this.getTransitionAt(7)}}),Si=(Gi.URL="ui://lcl1uligvwu5149",class{constructor(){this.entitysMap={}}Init(e,t){this.componentIdMask=e.clone(),this._entitysCache=[];for(let e=0;e<t.length;e++)mt.IsInclude(this.componentIdMask,t[e].componentIdMask)&&(this.entitysMap[t[e].id]=t[e],this._entitysCache.push(t[e]))}Remove(e,t,i){if(mt.IsInclude(this.componentIdMask,t)&&!mt.IsInclude(this.componentIdMask,i)&&e.id in this.entitysMap){delete this.entitysMap[e.id];const t=Object.keys(this.entitysMap),i=t.length;this._entitysCache=new Array(i);for(let e=0;e<i;e++)this._entitysCache[e]=this.entitysMap[t[e]]}}Add(e,t){mt.IsInclude(this.componentIdMask,t)&&null==this.entitysMap[e.id]&&(this.entitysMap[e.id]=e,this._entitysCache.push(e))}GetEntitys(){let t=[];for(let e=0;e<this._entitysCache.length;e++)t.push(this._entitysCache[e]);return t}}),yi=class{constructor(){this.callList=[]}AddCallBack(t,i){if(null!=i&&null!=t){let e=new wi;e.fun=i,e.target=t,this.callList.push(e)}}RemoveCallBack(t,i){for(let e=0;e<this.callList.length;e++)this.callList[e].target==t&&this.callList[e].fun==i&&this.callList.splice(e,1)}Call(i,...o){var a=this.callList.concat();for(let t=0;t<a.length;t++){let e=a[t];e.target&&e.fun.call(e.target,i,...o)}}CleanAllCallBack(){this.callList=[]}},wi=class{},vi=class extends Laya.Script{static SearchNodeRecursion(t,i,e=!0){if(e&&t.name==i)return t;for(let e=0;e<t.numChildren;e++){var o=vi.SearchNodeRecursion(t.getChildAt(e),i,!0);if(o)return o}return null}static CloneVector4(e,t=null){return(t=null==t?new Laya.Vector4:t).x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}static CloneVector3(e,t=null){return(t=null==t?new Laya.Vector3:t).x=e.x,t.y=e.y,t.z=e.z,t}static SetUnlitMatAlbedoColor(e,t){.01<Laya.Vector4.distance(e.albedoColor,t)&&(e.albedoColorR=t.x,e.albedoColorG=t.y,e.albedoColorB=t.z,e.albedoColorA=t.w)}static SetBlinnPhongMatAlbedoColor(e,t){.01<Laya.Vector4.distance(e.albedoColor,t)&&(e.albedoColorR=t.x,e.albedoColorG=t.y,e.albedoColorB=t.z,e.albedoColorA=t.w)}static SetParticle3DSystemPlayRecursion(e,i){vi.TraverseNode(e,function(t){if(t){let e=t.particleSystem;e&&(i?e.play():e.stop())}})}static TraverseNode(t,i){if(t&&(i(t),t._children))for(let e=0;e<t.numChildren;e++){var o=t.getChildAt(e);o&&vi.TraverseNode(o,i)}}static GetUINode2DWorldPos(e){let t=new Laya.Vector2(e.x,e.y),i=e;for(;i.parent;)i=i.parent,t.x+=i.x,t.y+=i.y;return t}static RecursionActiveShadowFromNode(t){for(let e=0;e<t.numChildren;e++){var i=t.getChildAt(e);if(i.meshRenderer){let e=i.meshRenderer;i.transform.position.y<-2?e.receiveShadow=!0:e.castShadow=!0}vi.RecursionActiveShadowFromNode(i)}}static PreformanceRecord(e,t){t?(vi.preformanceRecordMsTime[e]=performance.now()*(k.IsInWebTest?1:1e3),null==vi.lastRefreshPreformanceInfoTime[e]&&(vi.lastRefreshPreformanceInfoTime[e]=0,vi.preformanceRecordTotalMsTime[e]=0,vi.preformanceRecordAvgMsTime[e]=0,vi.preformanceRecordPeakMsTime[e]=0,vi.recordTime[e]=0)):(vi.preformanceRecordMsTime[e]=performance.now()*(k.IsInWebTest?1:1e3)-vi.preformanceRecordMsTime[e],Date.now()>vi.lastRefreshPreformanceInfoTime[e]+1e3?(vi.lastRefreshPreformanceInfoTime[e]=Date.now(),vi.preformanceRecordAvgMsTime[e]=vi.preformanceRecordTotalMsTime[e]/vi.recordTime[e],vi.preformanceRecordPeakMsTime[e]=vi.preformanceRecordMsTime[e],vi.preformanceRecordTotalMsTime[e]=vi.preformanceRecordMsTime[e],vi.recordTime[e]=1):(vi.preformanceRecordPeakMsTime[e]=Math.max(vi.preformanceRecordMsTime[e],vi.preformanceRecordPeakMsTime[e]),vi.preformanceRecordTotalMsTime[e]+=vi.preformanceRecordMsTime[e],vi.recordTime[e]++))}static GetPerformanceInfo(e){return[vi.preformanceRecordAvgMsTime[e],vi.preformanceRecordPeakMsTime[e]]}},Di=vi,Ui=(Di.lastRefreshPreformanceInfoTime={},Di.preformanceRecordMsTime={},Di.preformanceRecordTotalMsTime={},Di.preformanceRecordAvgMsTime={},Di.preformanceRecordPeakMsTime={},Di.recordTime={},Laya.Loader),Li=class{constructor(){this.resList=[]}AddImage(e){this.resList.push({url:e,type:Ui.IMAGE})}AddTEXTURE2D(e){this.resList.push({url:e,type:Ui.TEXTURE2D})}AddSound(e){this.resList.push({url:e,type:Ui.SOUND})}AddPrefab(e){this.resList.push({url:e,type:Ui.PREFAB})}AddJson(e){this.resList.push({url:e,type:Ui.JSON})}AddATLAS(e){this.resList.push({url:e,type:Ui.ATLAS})}Add3D(e){this.resList.push({url:e})}AddMESH(e){this.resList.push({url:e,type:Ui.MESH})}AddBUFFER(e){this.resList.push({url:e,type:Ui.BUFFER})}AddBinPack(e){this.resList.push({url:e,type:Ui.PLFB})}AddZipPack(e){this.resList.push({url:e,type:LayaZip.ZIP})}},Bi=class extends Laya.Script{UseDestory(){this.pool.put(this.owner)}},bi=class{constructor(){this.poolName="",this.nodeType=0,this.usePositionHide=!1,this.nodesList=[],this.regularCleanMsTime=6e4,this.layer=0}put(e){this.usePositionHide?(this.nodeType==bi.nodeType_Sprite2D&&(e.x=-1e3),this.nodeType==bi.nodeType_Sprite3D&&(e.transform.localPositionY=-1e4)):(e.active=!1,this.nodeType==bi.nodeType_Sprite2D&&(e.visible=!1)),this.parent.addChild(e);let t=e.getComponent(Bi);null==t?(t=e.addComponent(Bi)).pool=this:t.pool=this,t.lastPutPoolTs=Date.now(),this.nodesList.push(e)}get(){let e=this.nodesList.shift();return e.active=!0,this.usePositionHide||this.nodeType==bi.nodeType_Sprite2D&&(e.visible=!0),e}size(){return this.nodesList.length}CreatNode(){if(this.nodeType==bi.nodeType_Sprite2D){let e=this.prefab.create();return(e.addComponent(Bi).pool=this).parent.addChild(e),e}if(this.nodeType!=bi.nodeType_Sprite3D)return null;{let e=Laya.Sprite3D.instantiate(this.sprite3d,null,!1,new Laya.Vector3(0,0,0));return this.parent.addChild(e),e.addComponent(Bi).pool=this,e}}Clear(){for(let e=0;e<this.nodesList.length;e++)this.nodesList[e].destroy();this.nodesList=[],this.sprite3d.destroy(),this.sprite3d=null,this.parent=null}RegularClear(){var i,o=Date.now();for(let t=0;t<this.nodesList.length;t++){let e=this.nodesList[t];!e||(i=e.getComponent(Bi))&&o>i.lastPutPoolTs+this.regularCleanMsTime&&(this.nodesList.splice(t,1),t--,e.destroy())}}},Ai=bi,xi=(Ai.nodeType_Sprite3D=0,Ai.nodeType_Sprite2D=1,class{static Init(){console.log("修改Laya引擎库逻辑"),this.Init_LayaCore()}static Init_LayaCore(){xi.InitProtectMouseMove()}static InitProtectMouseMove(){let u=Laya.TouchManager.I;Laya.TouchManager.I.onMouseMove=function(e,t){var i,o;u.enable&&((i=u.getTouchFromArr(t,u.preOvers))?(i.tar[xi.Attr_ProtectMouseMove]||(u.checkMouseOutAndOverOfMove(e,i.tar),i.tar=e),o=u.getEles(i.tar,null,Laya.TouchManager._tEleArr)):(o=u.getEles(e,null,Laya.TouchManager._tEleArr),u.sendEvents(o,Laya.Event.MOUSE_OVER),u.preOvers.push(u.createTouchO(e,t))),u.sendEvents(o,Laya.Event.MOUSE_MOVE),u._clearTempArrs())},Laya.TouchManager.I.onMouseUp=function(e,t,i=!1){if(u.enable){var o,a,n,s,l,r,h,m=u.getEles(e,null,Laya.TouchManager._tEleArr);if(u.sendEvents(m,i?Laya.Event.MOUSE_UP:Laya.Event.RIGHT_MOUSE_UP),h=i?u.preDowns:u.preRightDowns,o=u.getTouchFromArr(t,h)){var d=Laya.Browser.now(),c=d-u._lastClickTime<300;if(u._lastClickTime=d,e==o.tar)r=m;else for(a=u.getEles(o.tar,null,Laya.TouchManager._oldArr),(r=Laya.TouchManager._newArr).length=0,s=a.length,n=0;n<s;n++)l=a[n],0<=m.indexOf(l)&&r.push(l);0<r.length&&u.sendEvents(r,i?Laya.Event.CLICK:Laya.Event.RIGHT_CLICK),i&&c&&u.sendEvents(r,Laya.Event.DOUBLE_CLICK),u.removeTouchFromArr(t,h),o.tar=null,Laya.Pool.recover("TouchData",o)}(o=u.getTouchFromArr(t,u.preOvers))&&((r=u.getEles(o.tar,null,r))&&0<r.length&&u.sendEvents(r,Laya.Event.MOUSE_OUT),u.removeTouchFromArr(t,u.preOvers),o.tar=null,Laya.Pool.recover("TouchData",o)),u._clearTempArrs()}}}static SetSpriteProtectMouseMove(e,t){e[xi.Attr_ProtectMouseMove]=t}static InterceptException_SimpleSingleLidy(e){let t=e._input._touches;t.add=function(e){if(-1===e._getIndexInList())try{t._add(e),e&&e._setIndexInList(t.length++)}catch(e){console.log("多点触",e)}}}}),Ti=xi,ki=(Ti.Attr_ProtectMouseMove="protectMouseMove",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("BaseUI","BaseDialogUI")}onConstruct(){this.m_n0=this.getChildAt(0),this.m_window=this.getChildAt(1),this.m_t0=this.getTransitionAt(0)}}),Mi=(ki.URL="ui://3u5yggm9c7k6h",class extends ${constructor(){super(...arguments),this.onClickOK=new t,this.onClickNo=new t,this.onClickSure=new t}Load(){if(null==this.view){this.view=this.CreatFGUIViewByView(ki.createInstance());let e=this;this.view.m_window.m_OKBtn.onClick(this,function(){e.onClickOK.Call(),e.Hide()}),this.view.m_window.m_YesBtn.onClick(this,function(){e.onClickSure.Call(),e.Hide()}),this.view.m_window.m_NoBtn.onClick(this,function(){e.onClickNo.Call(),e.Hide()})}}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null)}Show(){super.Show(),this.Load(),b.Warn("显示对话框")}Hide(){super.Hide(),this.UnLoad()}ShowCheckDialog(e,t=null,i=null){this.view.m_window.m_c1.setSelectedIndex(0),this.view.m_window.m_info.text=e,this.CleanAllCallBack(),this.onClickOK.AddCallBack(t,i)}ShowSureDialog(e,t=null,i=null,o=null){this.view.m_window.m_c1.setSelectedIndex(1),this.view.m_window.m_info.text=e,this.CleanAllCallBack(),this.onClickSure.AddCallBack(t,i),this.onClickNo.AddCallBack(t,o)}CleanAllCallBack(){this.onClickOK.CleanAllCallBack(),this.onClickNo.CleanAllCallBack(),this.onClickSure.CleanAllCallBack()}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(Mi);return e.name=Mi.UIName,t.uiName=Mi.UIName,t}}),Ri=Mi,Pi=(Ri.UIName="DialogUI",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("BaseUI","BaseWaitUI")}onConstruct(){this.m_n0=this.getChildAt(0),this.m_n1=this.getChildAt(1),this.m_t0=this.getTransitionAt(0)}}),Ei=(Pi.URL="ui://3u5yggm9c7k610",class extends ${constructor(){super(...arguments),this.hideTime=0}Load(){null==this.view&&(this.view=this.CreatFGUIViewByView(Pi.createInstance())),this.hideTime=3.5}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null)}Show(){super.Show(),this.Load()}Hide(){super.Hide(),this.UnLoad()}onUpdate(){this.isShow&&(this.hideTime-=A.TimeDeltaNoScale,this.hideTime<0&&K.UIModule().HideUI(Ei.UIName))}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(Ei);return e.name=Ei.UIName,t.uiName=Ei.UIName,t}}),Ni=Ei,Fi=(Ni.UIName="WaitUI",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","SaveJsonUI")}onConstruct(){this.m_n0=this.getChildAt(0),this.m_n9=this.getChildAt(1),this.m_n11=this.getChildAt(2),this.m_fileName=this.getChildAt(3),this.m_n13=this.getChildAt(4),this.m_yesBtn=this.getChildAt(5),this.m_noBtn=this.getChildAt(6),this.m_t0=this.getTransitionAt(0)}}),Oi=(Fi.URL="ui://lcl1uligky1q3y2f0",class extends ${constructor(){super(...arguments),this.fileName="ai数据"}Load(){let e=this;null==this.view&&(this.view=this.CreatFGUIViewByView(Fi.createInstance()),this.view.m_fileName.text=this.fileName,this.view.m_noBtn.onClick(this,function(){K.UIModule().HideUI(Oi.UIName)}),this.view.m_yesBtn.onClick(this,function(){e.fileName=e.view.m_fileName.text,e.SaveFile(e.saveData,e.view.m_fileName.text),K.UIModule().HideUI(Oi.UIName)}))}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null)}Show(){super.Show(),this.Load()}Hide(){super.Hide(),this.UnLoad()}SaveFile(e,t){let i=document.createElement("a");i.download=t+".json";t=new Blob([JSON.stringify(e)]);i.href=URL.createObjectURL(t),document.body.appendChild(i),i.click(),document.body.removeChild(i)}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(Oi);return e.name=Oi.UIName,t.uiName=Oi.UIName,t}}),Hi=Oi,Vi=(Hi.UIName="SaveJsonUI",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","TopMessageUI")}onConstruct(){this.m_bg=this.getChildAt(0),this.m_messge=this.getChildAt(1),this.m_g=this.getChildAt(2),this.m_TipAni=this.getTransitionAt(0)}}),zi=(Vi.URL="ui://lcl1uligw79v3y2j9",class extends ${Load(){null==this.view&&(this.view=this.CreatFGUIViewByView(Vi.createInstance()))}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null)}Show(){super.Show(),this.Load()}Hide(){super.Hide(),this.UnLoad()}ShowMessage(e){this.view.m_messge.text=e,this.view.m_TipAni.play()}onUpdate(){}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(zi);return e.name=zi.UIName,t.uiName=zi.UIName,t.jointOrder=!1,t}}),Wi=zi,Zi=(Wi.UIName="TopMessageUI",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","DrawerUI")}onConstruct(){this.m_bg=this.getChildAt(0)}}),ji=(Zi.URL="ui://lcl1uligfkz93y38k",class extends ${Load(){null==this.view&&(this.view=this.CreatFGUIViewByView(Zi.createInstance()))}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null)}Show(){super.Show(),this.Load()}Hide(){super.Hide(),this.UnLoad()}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(ji);return e.name=ji.UIName,t.uiName=ji.UIName,t}}),Ki=ji,qi=(Ki.UIName="DrawerUI",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","AlwaysShowUI")}onConstruct(){this.m_GM=this.getChildAt(0),this.m_tip1=this.getChildAt(1),this.m_Btn_bannerUp=this.getChildAt(2),this.m_tip1_2=this.getTransitionAt(0)}}),Yi=(qi.URL="ui://lcl1uligr2o63y2mp",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","GMUI")}onConstruct(){this.m_n0=this.getChildAt(0),this.m_test1Btn=this.getChildAt(1),this.m_test2Btn=this.getChildAt(2),this.m_escBtn=this.getChildAt(3),this.m_clearBtn=this.getChildAt(4),this.m_addCoinBtn=this.getChildAt(5),this.m_addDiamondBtn=this.getChildAt(6),this.m_coinValue=this.getChildAt(7),this.m_tomorrowBtn=this.getChildAt(8),this.m_lvBtn=this.getChildAt(9),this.m_escGameBtn=this.getChildAt(10),this.m_freeVideoBtn=this.getChildAt(11),this.m_gmBtn=this.getChildAt(12),this.m_rankBtn=this.getChildAt(13),this.m_logBtn=this.getChildAt(14),this.m_videoBtn=this.getChildAt(15),this.m_sceneBtn=this.getChildAt(16),this.m_superUserBtn=this.getChildAt(17),this.m_euqip50Btn=this.getChildAt(18),this.m_videoIdBtn=this.getChildAt(19),this.m_LvUp=this.getChildAt(20),this.m_hideFightBtn=this.getChildAt(21),this.m_addPlayersBtn=this.getChildAt(22),this.m_hideKillBtn=this.getChildAt(23),this.m_clear2Btn=this.getChildAt(24),this.m_newyearFontBtn=this.getChildAt(25),this.m_debrisBtn=this.getChildAt(26),this.m_useSameHeroSkinIdBtn=this.getChildAt(27),this.m_aiUseSkillWithMeBtn=this.getChildAt(28),this.m_hasSameSkillAtStartBtn=this.getChildAt(29),this.m_test3Btn=this.getChildAt(30),this.m_btn_grid=this.getChildAt(31),this.m_n11=this.getChildAt(32)}}),Qi=(Yi.URL="ui://lcl1uligr2o63y2mr",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","LogUI")}onConstruct(){this.m_n0=this.getChildAt(0),this.m_LogText=this.getChildAt(1),this.m_StoreComboBox=this.getChildAt(2),this.m_n12=this.getChildAt(3),this.m_LogTip=this.getChildAt(4),this.m_CloseBtn=this.getChildAt(5),this.m_CopyBtn=this.getChildAt(6),this.m_ReportBtn=this.getChildAt(7),this.m_Tip=this.getTransitionAt(0)}}),Ji=(Qi.URL="ui://lcl1uliggn3s3y2yy",class extends ${constructor(){super(...arguments),this.showLogCount=100,this.showLoadLogStartIndex=-1,this.nowStoreName=null}Load(){null==this.view&&(this.view=this.CreatFGUIViewByView(Qi.createInstance()),this.AllOnClick())}AllOnClick(){this.view.m_CloseBtn.onClick(this,this.Close),this.view.m_ReportBtn.onClick(this,this.Report),this.view.m_CopyBtn.onClick(this,this.Copy),this.view.m_LogText.m_LoadMoreBtn.onClick(this,this.LoadMore);let e=this;this.view.m_LogText.on(fairygui.Events.PULL_UP_RELEASE,this,function(){e.LoadMore()}),this.view.m_LogText.on(fairygui.Events.PULL_DOWN_RELEASE,this,function(){e.Tip("刷新成功"),e.InitShowLog(),e.Refresh()})}Show(){super.Show(),this.Load(),this.nowStoreName=le.Instance.nowStoreName,this.InitLogStore(),this.InitShowLog(),this.Refresh()}Hide(){super.Hide(),this.UnLoad()}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(Ji);return e.name=this.UIName,t.uiName=this.UIName,t}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null)}onUpdate(){}InitShowLog(){this.showLogCount=100,this.showLoadLogStartIndex=-1}Close(){K.UIModule().HideUI(Ji.UIName)}Report(){let t=this;this.Tip("上报中日志中..."),le.Instance.UploadLog(oe.Log,"GM上报日志","GM上报日志",this.nowStoreName,1,function(){t.Tip("上报日志成功")},function(e){t.Tip("上报日志失败\n"+e)})}Refresh(){let o=le.Instance.GetContextList(this.nowStoreName),a="",n="";-1==this.showLoadLogStartIndex&&(this.showLoadLogStartIndex=o.length-1);var e=Math.max(0,this.showLoadLogStartIndex-this.showLogCount+1);this.view.m_LogText.m_LoadMoreBtn.visible=0<e;for(let i=this.showLoadLogStartIndex;i>=e;i--){let e=o[i],t="#FFFFFF";switch(e.slice(e.indexOf(")[")+2,e.indexOf("]"))){case"Log":t="#FFFFFF";break;case"Warn":t="#FFFF00";break;case"Error":t="#FF0000"}n+=e+"\n",a+="[color="+t+"]"+e+"[/color]<br>"}0==e&&(a+="--------------------------------------到底了--------------------------------------"),this.view.m_LogText.m_OutputText.text=a,this.view.m_LogText.m_InputText.text=n,this.view.m_LogText.m_Mode.setSelectedPage("Show")}LoadMore(){le.Instance.GetContextList(this.nowStoreName).length>this.showLoadLogStartIndex&&(this.showLogCount+=50,this.Refresh())}InitLogStore(){let t=[],i=[],o=0,a=this.nowStoreName;for(let e=0;e<le.Instance.logStoreNameList.length;e++){var n=le.Instance.logStoreNameList[e];n&&(t.push(0==e?"当前实例":"历史记录-"+e+" ("+le.GetNowFormatDateTime(new Date(parseInt(n)))+")"),i.push(n),n==a&&(o=e))}this.view.m_StoreComboBox.items=t,this.view.m_StoreComboBox.values=i,this.view.m_StoreComboBox.selectedIndex=o;let s=this;this.view.m_StoreComboBox.on(fairygui.Events.STATE_CHANGED,this,function(){var e=s.view.m_StoreComboBox.value;s.nowStoreName=e,s.InitShowLog(),s.Refresh()})}Copy(){this.view.m_LogText.m_Mode.setSelectedIndex((this.view.m_LogText.m_Mode.selectedIndex+1)%2),this.Tip("请手动选择复制")}Tip(e){this.view.m_LogTip.m_Label.text=e,this.view.m_Tip.play()}}),Xi=Ji,$i=(Xi.UIName="LogUI",class extends e{constructor(){super(...arguments),this.state="InGame",this.followTargetId=-1,this.zMoveDis=0,this.zDis=10,this.feildOfView=60,this.useShake=!1,this.shakeTime=.5,this.shakeValue=.1,this.slowMotionTime=0,this.bgPath="",this.freshPos=!0,this.angle=0,this.followAngle=!1,this.orthographicVerticalSize=5}}),eo=($i.state_InGame="InGame",$i.state_Win="Win",$i.state_GameOver="GameOver",$i.state_Cover="Cover",$i.state_Sniper="Sniper",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","GridChestUI")}onConstruct(){this.m_YLPlatform=this.getControllerAt(0),this.m_n18=this.getChildAt(0),this.m_n27=this.getChildAt(1),this.m_bg=this.getChildAt(2),this.m_n23=this.getChildAt(3),this.m_n30=this.getChildAt(4),this.m_n31=this.getChildAt(5),this.m_n32=this.getChildAt(6),this.m_A_statr=this.getChildAt(7),this.m_n34=this.getChildAt(8),this.m_n36=this.getChildAt(9),this.m_n37=this.getChildAt(10),this.m_n39=this.getChildAt(11),this.m_videoBg=this.getChildAt(12),this.m_mask=this.getChildAt(13),this.m_text_bigReward=this.getChildAt(14),this.m_n38=this.getChildAt(15),this.m_text_nowKey=this.getChildAt(16),this.m_fluxay=this.getChildAt(17),this.m_list=this.getChildAt(18),this.m_youZiAdPos1=this.getChildAt(19),this.m_youZiAdPos2=this.getChildAt(20),this.m_OppoLookBtn=this.getChildAt(21),this.m_OppoBannerAdBtn=this.getChildAt(22),this.m_A_s2=this.getChildAt(23),this.m_btn_not=this.getChildAt(24),this.m_btn_AddKey=this.getChildAt(25),this.m_A_node=this.getChildAt(26),this.m_t0=this.getTransitionAt(0),this.m_t1=this.getTransitionAt(1),this.m_A_show=this.getTransitionAt(2),this.m_t3=this.getTransitionAt(3)}});eo.URL="ui://lcl1uligdgbj3y3hw";var to,io=class{constructor(){this.creatPos=new Laya.Vector2(0,0),this.targetPos=new Laya.Vector2(0,0),this.runlist=[],this.poollist=[],this.needCreatCount=0,this.nowTime=0,this.creatRate=.01,this.iconPath="",this.vec2=new Laya.Vector2(0,0)}Init(e){this.ui=e,Laya.timer.frameLoop(1,this,this.Update)}ShowEffect(e,t,i,o,a=null){this.call=a,this.iconPath=e,this.creatPos.x=t.x,this.creatPos.y=t.y,this.targetPos.x=i.x,this.targetPos.y=i.y,this.needCreatCount=o}Update(){var i=.001*Laya.timer.delta;for(let t=this.runlist.length-1;0<=t;t--){let e=this.runlist[t];e.sp.x+=e.vec.x*e.nowSpeed*i,e.sp.y+=e.vec.y*e.nowSpeed*i,S.VecToAngle(e.vec),this.vec2.x=this.targetPos.x-e.sp.x,this.vec2.y=this.targetPos.y-e.sp.y,Laya.Vector2.normalize(this.vec2,this.vec2),e.vec.x=S.MoveTowards(e.vec.x,this.vec2.x,2*i),e.vec.y=S.MoveTowards(e.vec.y,this.vec2.y,2*i),e.nowSpeed+=2e3*i,this.targetPos.y>this.creatPos.y?e.sp.y>this.targetPos.y&&this.DisposeSp(e):e.sp.y<this.targetPos.y&&this.DisposeSp(e)}if(0<this.needCreatCount&&(this.nowTime+=i,this.nowTime>this.creatRate)){let e=this.CreatSp(this.creatPos.x,this.creatPos.y);e.vec=S.VecRotate(new Laya.Vector2(0,1),360*Math.random()),e.nowSpeed=300+300*Math.random(),this.nowTime=0,this.needCreatCount--}}CreatSp(i,o){if(0<this.poollist.length){let e=this.poollist.shift();return e.sp.visible=!0,this.runlist.push(e),e.sp.x=i,e.sp.y=o,e.sp.asLoader.url=this.iconPath,e}{let e=new oo,t=new fairygui.GLoader;return t.url=this.iconPath,t.pivotX=.5,t.pivotY=.5,t.autoSize=!0,this.ui.addChild(t),this.runlist.push(e),e.sp=t,e.sp.x=i,e.sp.y=o,e}}DisposeSp(t){for(let e=0;e<this.runlist.length;e++)this.runlist[e]==t&&(this.poollist.push(this.runlist[e]),this.runlist[e].sp.visible=!1,this.runlist.splice(e,1),null!=this.call&&this.call.call(this))}Dispose(){Laya.timer.clearAll(this);for(let e=0;e<this.runlist.length;e++)this.runlist[e].sp.dispose();for(let e=0;e<this.poollist.length;e++)this.poollist[e].sp.dispose();this.runlist=[],this.poollist=[]}},oo=class{constructor(){this.vec=new Laya.Vector2(0,0),this.nowSpeed=50}},ao=class{static IsEnable(){return window.Chop_Trace=this,!("chop"!=window.ProjectSubCode&&!k.IsInWebTest)}static Statistics_T01(){var e;ao.IsEnable()&&(e=to.T01,k.IsInWebTest||window.jsCallNative_logEvent(e,"{}"))}static Statistics_T02(e){var t;ao.IsEnable()&&(t=to.T02,e={U:W.openId,T:e},this.Statistics(t,e))}static Statistics_T0F(){if(ao.IsEnable()){0==!this.isT0F&&(this.isT0F=!0);let e=to.T0F,t=K.DataModule().GetUser().GetData(),i=K.DataModule().GetUser().GetData().userLevel.level,o=Math.ceil(Number(t.coin)),a=t.diamond.toString(),n=t.userBattleInfo.totalCount.toString(),s=K.DataModule().GetLocal().gameRule.GetBattlePoint_player().toString(),l=t.userMedal.level,r=t.mergeLevel,h={U:W.openId,L:i,A:o,B:a,D:n,E:s,R:l,M:r};this.Statistics(e,h)}}static Statistics_T08(){var e,t;ao.IsEnable()&&(e=to.T08,K.DataModule().GetUser().GetData(),t={U:W.openId,G:0,M:0},this.Statistics(e,t))}static Statistics_T09(e,t,i,o,a,n,s){var l,r,h;ao.IsEnable()&&(l=to.T09,h=(r=K.DataModule().GetUser().GetData()).nowChooseHero,e=Math.ceil(e),r=r.userLevel.level,t=t,i=Math.ceil(Number(i)),h={U:W.openId,M:"0",G:"0",A:h,D:e,L:r,L2:t,R:i,C:o,P:a,S:s,F:0,I:n},this.Statistics(l,h))}static Statistics_T0O(e,t,i){var o;ao.IsEnable()&&(o=to.T0O,this.Statistics(o,{I:e,R:t,S:i}))}static Statistics_T0R(o,a=1){if(1==a&&z.Instance.LeYou_Video(o,7),ao.IsEnable()){let e=to.T0R,t=o,i=0;o={I:t,R:i=window.jsCallNative_videoAdIsReady?1:i,E:a,S:a};this.Statistics(e,o)}}static Statistics_T0G(e,t,i,o,a){var n;ao.IsEnable()&&(n=to.T0G,K.DataModule().GetUser().GetData(),e=e,t=t,i=Math.ceil(Number(i)),o=Math.ceil(Number(o)),e={U:W.openId,M:0,G:0,E:e,I:t,C:i,A:o,O:a},this.Statistics(n,e))}static Statistics_T0H(e,t,i,o,a){var n;ao.IsEnable()&&(n=to.T0H,K.DataModule().GetUser().GetData(),e={U:W.openId,M:0,G:0,E:e,I:t,C:i,A:o,O:a},this.Statistics(n,e))}static Statistics_T0A(e){var t;ao.IsEnable()&&(t=to.T0A,e={U:W.openId,I:e},this.Statistics(t,e))}static Statistics_T06(e){var t;ao.IsEnable()&&(t=to.T06,e={U:W.openId,I:e},this.Statistics(t,e))}static Statistics(e,t){let i=Object.keys(t),o="[";for(var a in i)o=o+i[a]+":"+t[i[a]]+"`";o=o.substring(0,o.length-1)+"^]",k.IsInWebTest||window.jsCallNative_logEvent(e,o)}},no=ao;no.isT0F=!1,(G=to=to||{}).T01="T01",G.T02="T02",G.T0F="T0F",G.T08="T08",G.T09="T09",G.T0O="T0O",G.T0R="T0R",G.T0S="T0S",G.T0G="T0G",G.T0H="T0H",G.T0A="T0A",G.T03="T03",G.T06="T06",G.T0V="T0V",G.T0Q="T0Q";var so,lo=9999,ro=11001,ho={Youzi_None:0,Youzi_BottomBanner:1,Youzi_GameBanner:2,Youzi_GuessLike:3,Youzi_MainPush:4,Youzi_MoreGame:5,Youzi_OffLine:6,Youzi_SlideWindow:7,Youzi_SmallWall:8,Youzi_Full:9,Youzi_Full_Two:10,Youzi_Full_Three:12,Youzi_FriendInviteGame:12,Youzi_GameCollection:13,Youzi_LandscapeBanner:14,Youzi_LandscapeFull:15},mo={SdkVersion:"Laya2.0-v6.7.4.3",resVersion:"1.00.00",debug:!1,appid:"",channelId:0,bannnerDatas:[],itemListDatas:[],hotListDatas:[],moreDatas:[],matrixBannerDatas:[],fullMatrixScreenDatas:[],mainRecDatas:[],buyListDatas:[],gameBannerDatas:[],offlineBannerDatas:[],friendInviteGameDatas:[],allBeRecommendGames:{},toutiaoMoreGames:[],clickGameYouziUIId:0,_userinfo:{uid:"",gender:0,type:1},_platform:1,_isDataLoaded:!1,_isLoadFinish:!1,_requestErrorCbs:[],_loadedCallBacks:[],_bannerType:1,_fullScreenType:0,_banerShowSwitchInterval:10,_bannerCreateInterval:20,_pageOpen:1,_bannerSwitchs:[],_provinceAllow:1,_mainRecAmount:1,showMpAdFullScreen:0,showNotMpFullScreen:0,limitMpAdControl:!1,_bottomBannerScrollType:0,_bottomBannerCloseBtnHide:!0,_bottomBannerNameHide:!1,_moreGameNameHide:!1,_slideWindowNameHide:!1,_fullScrennNameHide:!1,_smallWallNameHide:!1,_mainPushNameHide:!1,_mainPushScale:1.2,_gameIndexArrLength:1,_gameIndexArr:[],isInit:!1,logObj:{},logCount:0,openFullScreenNavigate:!1,fullTypeScreenShowWxBanner:!0,createGamePageCall:null,gamePageCloseCall:null,navigateToMiniCall:null,aspectRatio:0,fromId:8,sourceChannelId:0,logAdSubChannelId:"",logAdChannelId:"",init(e,t,i){this.isInit||(Laya.Browser.onIOS?this._platform=3:Laya.Browser.onAndroid&&(this._platform=2),this.isInit=!0,this.appid=e||"",this.resVersion=t||"1.00.00",this.channelId=i,console.log("中心化初始化 SdkVersion",this.SdkVersion,e,t,this.channelId),this._loadUid(),this.initLaunch(),setInterval(()=>{0<this.logCount&&this.logCount<15&&this.exposureLogMerge()},1e4),this._loadData(this._initBannerShow.bind(this)),this.openGameInitLog())},initLaunch(){1002==this.channelId||this.channelId==ro?this._wxLaunch():8001===this.channelId&&this.oppoLaunch()},_wxLaunch(){var t,e;Laya.Browser.window.wx&&Laya.Browser.window.wx.getLaunchOptionsSync&&(this._wxUserCloudStorage(),t=this,e=Laya.Browser.window.wx.getLaunchOptionsSync(),this.checkUserIsImported(e),this.checkFromId(e),e.referrerInfo&&e.referrerInfo.appId&&e.referrerInfo.extraData&&e.referrerInfo.extraData.boxAppid&&e.referrerInfo.extraData.orgAppid&&this.sendJumpToOpen(e.referrerInfo.extraData.orgAppid,e.referrerInfo.extraData.boxAppid,e.referrerInfo.extraData.locationIndex||lo),Laya.Browser.window.wx.onShow(function(e){t._wxOnShow(e)}))},_wxUserCloudStorage(){Laya.Browser.window.wx.setUserCloudStorage({KVDataList:[{key:"GameleyYouzi",value:this._userinfo.uid}],success:function(){console.log("GameleyYouzi success")},fail:function(){console.log("GameleyYouzi fail")}})},_wxOnShow(e){console.log("wx onShow--------------"),this.checkUserIsImported(e),e.referrerInfo&&e.referrerInfo.extraData&&e.referrerInfo.extraData.boxAppid&&e.referrerInfo.extraData.orgAppid&&this.sendJumpToOpen(e.referrerInfo.extraData.orgAppid,e.referrerInfo.extraData.boxAppid,e.referrerInfo.extraData.locationIndex||lo)},oppoLaunch(){var e;Laya.Browser.window.qg&&Laya.Browser.window.qg.getLaunchOptionsSync&&(e=Laya.Browser.window.qg.getLaunchOptionsSync(),this.checkUserIsImported(e),this.checkFromId(e),e.referrerInfo&&e.referrerInfo.extraData&&e.referrerInfo.extraData.orgAppid&&this.sendJumpToOpen(e.referrerInfo.extraData.orgAppid,e.referrerInfo.extraData.boxAppid,e.referrerInfo.extraData.locationIndex||lo))},checkUserIsImported(e){e.referrerInfo&&e.referrerInfo.adChannelId&&e.referrerInfo.adSubChannelId?(this._userinfo.type=2,this.logAdChannelId=e.referrerInfo.adChannelId,this.logAdSubChannelId=e.referrerInfo.adSubChannelId):e.query&&e.query.adChannelId&&e.query.adSubChannelId&&(this._userinfo.type=2,this.logAdChannelId=e.query.adChannelId,this.logAdSubChannelId=e.query.adSubChannelId),(e.referrerInfo&&e.referrerInfo.leuokShareIn||e.query&&e.query.leuokShareIn)&&(this._userinfo.type=3);var t=!1;e.referrerInfo&&e.referrerInfo.extraData&&(e.referrerInfo.extraData.YouziFixUID&&0<e.referrerInfo.extraData.YouziFixUID.trim().length?(t=!0,this._userinfo.uid=e.referrerInfo.extraData.YouziFixUID):e.referrerInfo.extraData.YouziUID&&0<e.referrerInfo.extraData.YouziUID.trim().length&&(t=!0,this._userinfo.uid=e.referrerInfo.extraData.YouziUID)),e.query&&e.query.extraData&&e.query.extraData.YouziUID&&(t=!0,this._userinfo.uid=e.query.YouziUID),t&&localStorage.setItem("YOUZI_UID",this._userinfo.uid)},checkFromId(e){let t={1:0,2:0,3:0,4:0};if(e.hasOwnProperty("scene"))switch(e.scene){case 1047:case 1048:case 1049:t[1]=7;break;case 1042:case 1053:case 1005:case 1054:t[1]=6;break;case 1073:case 1074:case 1081:case 1082:case 1088:case 1096:case 1107:case 1007:case 1008:case 1014:case 1036:case 1043:case 1044:t[1]=5;break;case 1001:case 1006:case 1037:case 1038:case 1064:case 1077:case 1078:case 1079:case 1084:case 1089:case 1090:case 1095:case 1102:case 1103:case 1104:case 1106:case 1114:case 1113:case 1131:case 1135:case 1022:case 1023:case 1024:case 1026:case 1027:case 1035:case 1067:t[1]=1}let i=null,o=(e.referrerInfo&&e.referrerInfo.extraData&&(i=e.referrerInfo.extraData),null);e.query&&(o=e.query),i&&((i.YouziFixUID||i.YouziUID)&&(t[2]=2),(i.anChannelId||i.ioChannelId)&&(t[3]=3,this.sourceChannelId=i.anChannelId||i.ioChannelId)),o&&(o.anChannelId||o.ioChannelId)&&(t[3]=3,this.sourceChannelId=o.anChannelId||o.ioChannelId),2==this._userinfo.type&&(t[4]=4),this.chooseOnlyFromId(t),console.log("--------\x3e来源ID:",this.fromId)},chooseOnlyFromId(e){0==e[4]?0==e[2]?0==e[3]?0==e[1]?this.fromId=8:this.fromId=e[1]:this.fromId=3:this.fromId=2:this.fromId=4},_loadData(t){if(this.channelId==ro){var e=Laya.Browser.window.tt.getSystemInfoSync();if(this.compareToutiaoVersion(e.SDKVersion,"1.33.0")<0||Laya.Browser.onIOS)return}var n=this;function i(){console.log("中心化数据异常"),n._isLoadFinish=!1,n._isDataLoaded=!1;for(let e=0;e<n._requestErrorCbs.length;e++){const t=n._requestErrorCbs[e];t&&t()}}let o={appid:n.appid,channelId:n.channelId,languageType:1,uid:n._userinfo.uid,version:n.resVersion};function a(o){var e=JSON.parse(JSON.stringify(o));if(console.log("中心化数据OK",e),o&&o.info&&o.info.swith&&1==o.info.swith){n._bottomBannerCloseBtnHide=n.jsonHasKey(o.info,"bottomBannerCloseBtnHide")?o.info.bottomBannerCloseBtnHide:n._bottomBannerCloseBtnHide,n._bottomBannerNameHide=n.jsonHasKey(o.info,"bottomBannerNameHide")?o.info.bottomBannerNameHide:n._bottomBannerNameHide,n._mainPushNameHide=n.jsonHasKey(o.info,"mainPushNameHide")?o.info.mainPushNameHide:n._mainPushNameHide,n._mainRecAmount=n.jsonHasKey(o.info,"mainRecAmount")?o.info.mainRecAmount:3,n.showMpAdFullScreen=o.info.showMpAdFullScreen,n.showNotMpFullScreen=o.info.showNotMpFullScreen,n._fullScreenType=n.jsonHasKey(o.info,"screenType")?o.info.screenType:0,n._bottomBannerScrollType=n.jsonHasKey(o.info,"bottomBannerScrollType")?o.info.bottomBannerScrollType:0,n._mainPushScale=0<n.jsonHasKey(o.info,"mainPushScale")?o.info.mainPushScale:1.2,n._moreGameNameHide=n.jsonHasKey(o.info,"moreGameNameHide")?o.info.moreGameNameHide:n._moreGameNameHide,n._slideWindowNameHide=n.jsonHasKey(o.info,"slideWindowNameHide")?o.info.slideWindowNameHide:n._slideWindowNameHide,n._fullScrennNameHide=n.jsonHasKey(o.info,"fullScrennNameHide")?o.info.fullScrennNameHide:n._fullScrennNameHide,n._smallWallNameHide=n.jsonHasKey(o.info,"smallWallNameHide")?o.info.smallWallNameHide:n._smallWallNameHide,n._pageOpen=o.info.status,n._bannerType=o.info.bannerSwith,n._banerShowSwitchInterval=o.info.bannerAutoInterval,n._bannerCreateInterval=o.info.wxBannerRefresh,n._provinceAllow=o.info.provinceAllow;let t=function(e,t){return t.weight-e.weight},i=function(e){return e=e.sort(t),e=n._clearArrIndex(e),n._removeItemByTestPeriod(e)};for(let e=0;e<o.info.recommendListBos.length;e++){var a=o.info.recommendListBos[e];switch(a.contentBos.forEach(e=>{n.allBeRecommendGames.hasOwnProperty.call({},e.appid)||(n.allBeRecommendGames[e.appid]=Object.assign({},e))}),console.log("allBeRecommendGames:"+n.allBeRecommendGames),a.type){case 1:n.bannnerDatas=i(a.contentBos);break;case 2:n.itemListDatas=i(a.contentBos);break;case 3:n.hotListDatas=i(a.contentBos);break;case 8:n.moreDatas=i(a.contentBos);break;case 9:n.matrixBannerDatas=i(a.contentBos);break;case 4:n.mainRecDatas=i(a.contentBos);break;case 5:n.gameBannerDatas=i(a.contentBos);break;case 6:n.offlineBannerDatas=i(a.contentBos);break;case 7:n.buyListDatas=i(a.contentBos);break;case 10:n.fullMatrixScreenDatas=i(a.contentBos);break;case 11:n.friendInviteGameDatas=i(a.contentBos);break;default:console.log("无此中心化数据类型",a.type)}}}n.channelId==ro&&n.setTouTiaoMoreGames(n.moreDatas),n._isDataLoaded=!0,n._isLoadFinish=!0,t&&t(o);for(let e=0;e<n._loadedCallBacks.length;e++){const o=n._loadedCallBacks[e];o&&o()}4==n._bannerType&&(n.refreshBannerSwitch(),setInterval(n.refreshBannerSwitch.bind(n),1e3*n._banerShowSwitchInterval))}1002==n.channelId?(console.log("userInfo 调用开始"),n._getWxUserInfo(function(){console.log("请求开始"),n._request("POST",o,n._url(),a,i)})):n._request("POST",o,n._url(),a,i)},_clearArrIndex(t){let i=[];for(let e=0;e<t.length;e++){var o=t[e];this._pushData(o.hide)&&i.push(o)}let a=[];for(let e=0;e<i.length;e++){var n=i[e];this._pushDataBySexual(n.gender)&&a.push(n)}return a},_request(e,t,i,o,a){var n=new XMLHttpRequest;n.onreadystatechange=function(){var e;4==n.readyState&&(200<=n.status&&n.status<400?""!=n.responseText?(e=JSON.parse(n.responseText),o&&o(e)):o&&o({}):a&&a())},n.open(e,i,!0),n.setRequestHeader("content-type","application/json"),n.send(JSON.stringify(t))},_loadUid(){try{let e=localStorage.getItem("YOUZI_UID");e&&0<e.trim().length?this._userinfo.uid=e:(this._userinfo.uid="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),localStorage.setItem("YOUZI_UID",this._userinfo.uid))}catch(e){this._userinfo.uid="10001"}},_removeItemByTestPeriod(e){for(var t=0;t<e.length;t++){var i,o=e[t];1!=o.testPeriod&&3!=o.testPeriod||0!=o.showLimit?2==o.testPeriod&&(i=localStorage.getItem(o.appid))&&"CPACPS"==i&&(e.splice(t,1),t--):(i=localStorage.getItem(o.appid))&&"navigated"==i||(e.splice(t,1),t--)}return e},_url(){return this.debug?"myurl://test.gw.leuok.com/gl-ms-mini-recommend/recommend/show":"myurl://gw.lightlygame.com/gl-ms-mini-recommend/recommend/show"},_pushData(e){let t=!1;switch(e){case 1:t=!0;break;case 2:2==this._platform&&(t=!0);break;case 3:3==this._platform&&(t=!0);break;default:t=!1}return t},_pushDataBySexual(e){let t=!1;switch(e){case 0:t=!0;break;case 1:1==this._userinfo.gender&&(t=!0);break;case 2:2==this._userinfo.gender&&(t=!0);break;default:t=!1}return t},_getWxUserInfo(t){var i=this;Laya.Browser.window.wx&&Laya.Browser.window.wx.getUserInfo?(console.log("userInfo 调用 start"),Laya.Browser.window.wx.getUserInfo({success(e){i._userinfo.gender=e.userInfo.gender,console.log("userInfo 成功回调请求"),t()},fail(e){console.log("userInfo 失败回调请求"),t()}}),console.log("userInfo 调用 end")):t()},_loadTexture(e,t){},fullScreenRandomNavigate(e){var t;this.openFullScreenNavigate&&0<this.mainRecDatas.length&&((t=this.getRandomElementFromArray(this.mainRecDatas)).locationIndex=e,this.switchStartOtherGame(t,null))},startOtherGame(e,t){1==e.jumpShowPage?this.gamePageStartOtherGame(e,t):this.switchStartOtherGame(e,t)},gamePageStartOtherGame(i,o){if(this.channelId!=ro)if(this.createGamePageCall){let t=this,e=function(){let e=setTimeout(function(){t.switchStartOtherGame(i,o),clearTimeout(e)},1500)};this.createGamePageCall(i,{gamePageComplete:e})}else this.switchStartOtherGame(i,o);else this.switchStartOtherGame(i,o)},switchStartOtherGame(e,t){switch(this.channelId){case 1002:1==e.codeJump?this.wxPreviewImage(e.chopencode||e.vopencode||e.hopencode,e,t):this.navigateToOtherGame(e,t);break;case ro:this.showTouTiaoMoreGamesModal(e,t);break;case 8001:this.navigateToOppoMiniGame(e,t);break;default:t&&t(!1),this.notifyNavigateFailUIId()}},openGameInitLog(){var e=this.YouziSendLogDate(),e={logType:"login",channelId:this.channelId,orgAppid:this.appid,adChannelId:this.logAdChannelId,adSubChannelId:this.logAdSubChannelId,sourceId:this.fromId,sourceChannel:Number(this.sourceChannelId),uid:this._userinfo.uid,dt:e,sdkVersion:this.SdkVersion};this.logNavigate(e,function(){console.log("log event send YouziSdk init success")})},sendExposureLog(e,t){e?(this.logCount++,this.logObj.hasOwnProperty(t=t||lo)||(this.logObj[t]=""),this.logObj[t]+=e.appid+",",15<=this.logCount&&this.exposureLogMerge()):console.warn("发送曝光日志时,data不存在",e,t)},exposureLogMerge(){let t=this.YouziSendLogDate(),i=this.logObj;this.logObj={},this.logCount=0,Object.keys(i).forEach(e=>{e={logType:"exposure",channelId:this.channelId,orgAppid:this.appid,adChannelId:this.logAdChannelId,adSubChannelId:this.logAdSubChannelId,uid:this._userinfo.uid,languageType:1,jumpAppid:i[e].slice(0,-1),locationIndex:Number(e),recommendType:1,screenId:1,sourceId:this.fromId,sourceChannel:Number(this.sourceChannelId),dt:t,sdkVersion:this.SdkVersion};this.logNavigate(e,function(e){})})},showTouTiaoMoreGamesModal(t,i){let o=this;Laya.Browser.window.tt.onNavigateToMiniProgram(function(e){}),Laya.Browser.window.tt.showMoreGamesModal({appLaunchOptions:this.toutiaoMoreGames,success(e){o.sendGameToGame(t),i&&i(!0),console.log("toutiao moregame show success")},fail(e){i&&i(!1),console.log("toutiao moregame show fail")}}),Laya.Browser.window.tt.onMoreGamesModalClose(function(e){})},setTouTiaoMoreGames(e){e.forEach(e=>{var t={togame:e.appid,boxAppid:e.boxAppId,orgAppid:this.appid,YouziUID:this.uid,YouziFixUID:this._userinfo.uid,userType:this._userinfo.type,locationIndex:e.locationIndex||lo,anChannelId:e.anChannelId,ioChannelId:e.ioChannelId};this.extraDataLianYun(e,t),this.toutiaoMoreGames.push({appId:e.appid,extraData:t})})},navigateToOppoMiniGame(o,a){if(this.debug)console.log("oppo小游戏跳转成功");else{let t=this,e=o.pkgName.replace(/\s*/g,""),i={togame:o.appid,boxAppid:"leuokNull",orgAppid:t.appid,YouziUID:t.uid,YouziFixUID:t._userinfo.uid,userType:t._userinfo.type,locationIndex:o.locationIndex,anChannelId:o.anChannelId,ioChannelId:o.ioChannelId};Laya.Browser.window.qg.navigateToMiniGame({pkgName:e,extraData:i,success:function(){t.clickGameYouziUIId=0,t.sendGameToGame(o),t.closeGamePage(),a&&a(!0),console.log("oppo小游戏跳转成功")},fail:function(e){t.closeGamePage(),t.notifyNavigateFailUIId(),a&&a(!1),console.log("oppo小游戏跳转失败：",JSON.stringify(e))}})}},extraDataLianYun(e,t){var i;e.miniGameArgs&&""!=e.miniGameArgs&&(e=JSON.parse(e.miniGameArgs),"togame"==(i=Object.keys(e)[0])||"boxAppid"==i||"orgAppid"==i?console.log("联运附加key值冲突"):t[i]=e[i])},navigateToOtherGame(n,s){if(!Laya.Browser.window.wx)return s&&s(!1),void this.notifyNavigateFailUIId();if(Laya.Browser.window.wx.navigateToMiniProgram){var l=this;let e=n.appid,t=!1,i="leuokNull",o=(n.boxAppId&&""!=n.boxAppId&&(t=!0,i=e=n.boxAppId),{togame:n.appid,boxAppid:i,orgAppid:l.appid,YouziUID:l.uid,YouziFixUID:l._userinfo.uid,userType:l._userinfo.type,locationIndex:n.locationIndex||lo,anChannelId:n.anChannelId,ioChannelId:n.ioChannelId}),a=null;n.miniProgramArgs&&""!=n.miniProgramArgs&&(a=n.miniProgramArgs),(n.anChannelId||n.ioChannelId)&&(a=null!=a?a+"&anChannelId="+n.anChannelId+"&ioChannelId="+n.ioChannelId:"?anChannelId="+n.anChannelId+"&ioChannelId="+n.ioChannelId),console.log("mimiProgramPath:"+a),l.extraDataLianYun(n,o),console.log("extraData"+JSON.stringify(o)),Laya.Browser.window.wx.navigateToMiniProgram({appId:e,path:a,extraData:o,success(e){l.clickGameYouziUIId=0,l.closeGamePage(),t?l.sendGameToBox(n):l.sendGameToGame(n),t=!1,s&&s(!0),console.log("navigateToMiniProgram success"),n.testPeriod&&"1"==n.testPeriod?localStorage.setItem(n.appid,"navigated"):"2"==n.testPeriod&&localStorage.setItem(n.appid,"CPACPS")},fail(e){s&&s(!1),l.notifyNavigateFailUIId(),l.closeGamePage(),console.log("navigateToMiniProgram fail",e)}})}},notifyNavigateFailUIId(){switch(this.clickGameYouziUIId){case ho.Youzi_None:case ho.Youzi_Full:case ho.Youzi_Full_Two:case ho.Youzi_Full_Three:case ho.Youzi_GameCollection:break;default:this.navigateToMiniCall&&this.navigateToMiniCall(this.clickGameYouziUIId),this.clickGameYouziUIId=0}},closeGamePage(){this.gamePageCloseCall&&(this.gamePageCloseCall(),this.gamePageCloseCall=null)},sendJumpToOpen(e,t,i=1){let o="jump2open";"leuokNull"==t&&(o="app2open",t="");var a=this.YouziSendLogDate(),e={logType:o,userType:this._userinfo.type,channelId:this.channelId,orgAppid:e,boxAppid:t,adChannelId:this.logAdChannelId,adSubChannelId:this.logAdSubChannelId,uid:this._userinfo.uid,languageType:1,jumpAppid:this.appid,locationIndex:i||lo,recommendType:1,screenId:1,sourceId:this.fromId,sourceChannel:Number(this.sourceChannelId),dt:a,sdkVersion:this.SdkVersion};console.log(e),this.logNavigate(e,function(e){console.log("log event sendJumpToOpen success---")})},sendGameToGame(e){var t=this.YouziSendLogDate(),e={logType:"app2app",userType:this._userinfo.type,channelId:this.channelId,orgAppid:this.appid,adChannelId:this.logAdChannelId,adSubChannelId:this.logAdSubChannelId,uid:this._userinfo.uid,languageType:1,jumpAppid:e.appid,locationIndex:e.locationIndex||lo,recommendType:e.type,screenId:1,sourceId:this.fromId,sourceChannel:Number(this.sourceChannelId),dt:t,sdkVersion:this.SdkVersion};console.log(e),this.logNavigate(e,function(e){console.log("log event success---")})},sendGameToBox(e){var t=this.YouziSendLogDate(),e={logType:"jump2box",userType:this._userinfo.type,channelId:this.channelId,orgAppid:this.appid,adChannelId:this.logAdChannelId,adSubChannelId:this.logAdSubChannelId,uid:this._userinfo.uid,languageType:1,boxAppid:e.boxAppId,jumpAppid:e.appid,locationIndex:e.locationIndex||lo,recommendType:e.type,screenId:1,sourceId:this.fromId,sourceChannel:Number(this.sourceChannelId),dt:t,sdkVersion:this.SdkVersion};console.log(e),this.logNavigate(e,function(e){console.log("log event success---")})},wxPreviewImage(e,t,i){let o=this;Laya.Browser.window.wx.previewImage({current:e,urls:[e],success:function(){i&&i(!0),o.sendGameByQrcode(t)},fail:function(){i&&i(!1)}})},sendGameByQrcode(e){var t=this.YouziSendLogDate(),e={logType:"showcode",userType:this._userinfo.type,channelId:this.channelId,orgAppid:this.appid,adChannelId:this.logAdChannelId,adSubChannelId:this.logAdSubChannelId,uid:this._userinfo.uid,languageType:1,jumpAppid:e.appid,locationIndex:e.locationIndex||lo,recommendType:e.type,screenId:1,sourceId:this.fromId,sourceChannel:Number(this.sourceChannelId),dt:t,sdkVersion:this.SdkVersion};console.log(e),this.logNavigate(e,function(e){console.log("log event success---")})},logNavigate(e,t){console.log("send log---\x3e"+e),this.debug||this._request("POST",e,"myurl://bi.log.lightlygame.com/recommend/",t)},YouziDateFtt(e,t){var i,o={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(i in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),o)new RegExp("("+i+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?o[i]:("00"+o[i]).substr((""+o[i]).length)));return console.log("日期转换ddd：",e),e},YouziSendLogDate(){let e=new Date,t=e.getFullYear()+"-"+this.sendLogDateAddZero(e.getMonth()+1)+"-"+this.sendLogDateAddZero(e.getDate())+" "+this.sendLogDateAddZero(e.getHours())+":"+this.sendLogDateAddZero(e.getMinutes())+":"+this.sendLogDateAddZero(e.getSeconds());return console.log("固定格式日期：",t),t},sendLogDateAddZero:e=>e<=9?"0"+e:""+e,getDatasByBIType(e){return 1==e?this.mainRecDatas:2==e?this.hotListDatas:3===e||4==e?this.matrixBannerDatas:5===e||10===e?this.moreDatas:6==e?this.gameBannerDatas:7==e?this.offlineBannerDatas:8==e||9==e?this.buyListDatas:(console.error("未找到中心化数据 locationIndex",e),[])},_initBannerShow(){if(1==this._bannerType||3==this._bannerType||2==this._bannerType)for(let e=0;e<this._bannerSwitchs.length;e++){const t=this._bannerSwitchs[e];if(t.destroyed){if(this._bannerSwitchs.splice(e,1),e--,this._bannerSwitchs.length<=0)break}else t&&t.bannerType==this._bannerType?t.showBanner():t&&t.hideBanner()}else if(4==this._bannerType)for(let e=0;e<this._bannerSwitchs.length;e++){const i=this._bannerSwitchs[e];if(i.destroyed){if(this._bannerSwitchs.splice(e,1),e--,this._bannerSwitchs.length<=0)break}else i&&1==i.bannerType?i.showBanner():i&&i.hideBanner()}},getMultiMainAmount(e){return e>=this._mainRecAmount?this._mainRecAmount>=this.mainRecDatas.length?[this.mainRecDatas.length,!1]:[this._mainRecAmount,!0]:e>=this.mainRecDatas.length?[this.mainRecDatas.length,!1]:[e,!0]},getGamesIndex(t,e){if(0==this._gameIndexArr.length){this._gameIndexArrLength=t;for(let e=0;e<t;e++)this._gameIndexArr.push(e)}else if(t!=this._gameIndexArrLength){this._gameIndexArrLength=t;for(let e=0;e<t;e++)this._gameIndexArr.push(e)}if(t<=e)return this._gameIndexArr;for(var i,o;t;)o=Math.floor(Math.random()*t--),i=this._gameIndexArr[t],this._gameIndexArr[t]=this._gameIndexArr[o],this._gameIndexArr[o]=i;return this._gameIndexArr.slice(0,e)},getRandomArrayElements(e,t){for(var i,o,a=e.length;a;)o=Math.floor(Math.random()*a--),i=e[a],e[a]=e[o],e[o]=i;return e.slice(0,t)},getRandomElementFromArray:e=>e[Math.floor(Math.random()*e.length)],addBanner(e){this._destroyUnuseWxBanner(e),this._bannerSwitchs.push(e),this._isDataLoaded&&this._initBannerShow()},refreshBannerSwitch(){this.curBannerType||(this.curBannerType=2),this.curBannerType=2==this.curBannerType?1:2;for(let t=0;t<this._bannerSwitchs.length;t++){let e=this._bannerSwitchs[t];if(e.destroyed){if(this._bannerSwitchs.splice(t,1),t--,this._bannerSwitchs.length<=0)break}else e&&e.bannerType==this.curBannerType?e.showBanner():e&&e.hideBanner()}},_destroyUnuseWxBanner(e){if(2==e.bannerType)for(let t=0;t<this._bannerSwitchs.length;t++){let e=this._bannerSwitchs[t];if(e&&2==e.bannerType)return e.destroySelf(),void this._bannerSwitchs.splice(t,1)}},_checkExposureInview(e,t,i,o,a){},getDataByAppId(e){let t=this._getDataByAppid(this.mainRecDatas,e);return t=(t=t||this._getDataByAppid(this.hotListDatas,e))||this._getDataByAppid(this.buyListDatas,e)},getDataFromAllGameObj(e){return this.allBeRecommendGames[e]},_getDataByAppid(t,i){for(let e=0;e<t.length;e++)if(t[e].appid==i)return t[e];return null},scrollviewAction(e,t,i){},miscClampf(e,t,i){var o;return i<t&&(o=t,t=i,i=o),e<t?t:e<i?e:i},BI_AppOnce(e){let t=this.getBI();t&&t.leuok&&t.leuok.appOnce(e)},BI_Action(e){let t=this.getBI();t&&t.leuok&&t.leuok.action(e)},BI_WXBannerError(e){let t=this.getBI();t&&t.leuok&&t.leuok.error(e)},getBI:()=>void 0!==Laya.Browser.window.wx?Laya.Browser.window.wx:void 0!==Laya.Browser.window.BK?Laya.Browser.window.BK:void 0!==Laya.Browser.window.qg?Laya.Browser.window.qg:"undefined"!=typeof window?window:void 0,youziLog(e,t){this.debug&&console.log(e,t)},readFile(e,t){Laya.Browser.window.wx&&Laya.Browser.window.wx.getFileSystemManager().readFile({filePath:e,encoding:"utf-8",success:function(e){t(e.data),console.log("----\x3ereadFile success:",e.data)},fail:function(e){console.log("----\x3ereadFile fail:",e.errMsg)}})},writeFile(e,t){Laya.Browser.window.wx&&Laya.Browser.window.wx.getFileSystemManager().writeFile({filePath:e,data:t,encoding:"utf-8",success:function(){console.log("-----\x3ewrite file success")},fail:function(e){console.log("-----\x3ewrite file fail:",e.errMsg)}})},getAspectRatio(){return this.aspectRatio},jsonHasKey:(e,t)=>e.hasOwnProperty(t),getDataLoaded(){return this._isDataLoaded},getBottomCloseBtnHide(){return this._bottomBannerCloseBtnHide},getBottomNameHide(){return this._bottomBannerNameHide},getMainNameHide(){return this._mainPushNameHide},getMainNameHideScale(){return this._mainPushScale},setPropertiesValue(e,t){this[e]=t},getPropertiesValue(e){return this[e]},openFullNavigate(e){this.openFullScreenNavigate=e},getOpenFullNavigate(){return this.openFullScreenNavigate},getIsVertical:()=>!(Laya.stage.width>Laya.stage.height),dataNullReset(e){this[e].length<=0&&(this[e]=this.moreDatas)},getYouziInviteGameFilterDatas(e){co.youziInviteGameFilterDatas(e)},getMpAdNotShowFull(){return!this.limitMpAdControl&&(2==this._userinfo.type?0==this.showMpAdFullScreen&&(this.limitMpAdControl=!0):0==this.showNotMpFullScreen&&(this.limitMpAdControl=!0))},compareToutiaoVersion(t,i){t=t.split("."),i=i.split(".");const o=Math.max(t.length,i.length);for(;t.length<o;)t.push("0");for(;i.length<o;)i.push("0");for(let e=0;e<o;e++){const o=parseInt(t[e]),a=parseInt(i[e]);if(o>a)return 1;if(o<a)return-1}return 0}},co={inviteGameAllInLine:!1,youziInviteGameFilterDatas(i){if(this.inviteGameAllInLine)i(mo.friendInviteGameDatas);else{let t=[];co.getWechatSaveData("YZ_USER_DATA",e=>{e?(t=co.getInviteGameDataAnalyse(e),i(t),this.inviteGameAllInLine=t.length==mo.friendInviteGameDatas.length):i(t)})}},getInviteGameDataAnalyse(t){var e;return 0<mo.friendInviteGameDatas.length?(e=mo.friendInviteGameDatas.filter(e=>!!e.hasOwnProperty("goodCondition")&&this.inviteGameDataFilterCondition(t,e.goodCondition)),console.log("已获取满足条件的优选游戏:",e),e):(console.log("未配置优选游戏，请检查下行"),[])},inviteGameDataFilterCondition(t,i){let o=0;for(let e=(i=JSON.parse(i)).length-1;0<=e;e--){var a=t[i[e].type];if(!a)break;if(!(a>=Number(i[e].num)))break;o+=1}return 0!=o&&0!=i.length&&o>=i.length},getWechatSaveData(e,t){Laya.Browser.window.wx.getStorage({key:e,success:function(e){t&&(console.log("读取优选游戏存档成功: ",e.data),t(e.data))},fail:function(){t&&(console.log("读取优选游戏存档失败: "),t({}))}})}},uo={fullTypeUiStateCall:null,fullUiCloseCall:null,gameCollectionUi:null,setProperty(e,t){this[e]=t},notifyFullTypeUiState(e,t){this.fullTypeUiStateCall&&this.fullTypeUiStateCall(e,t)},offFullTypeUiStateCall(){this.fullTypeUiStateCall=null},notifyFullUiClose(e){this.fullUiCloseCall&&this.fullUiCloseCall(e)},offFullUiClose(){this.fullUiCloseCall=null},notifyGameCollectionUiCall(e){this.gameCollectionUi&&this.gameCollectionUi(e)},offGameCollectionUiCall(){this.gameCollectionUi=null}},G=so=so||{};G=G.youzi||(G.youzi={});{G=G.GameCollectionUi||(G.GameCollectionUi={});const oG=class extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(oG.uiView)}};let e=oG;e.uiView={type:"View",props:{y:0,width:720,name:"YouziCollectionAreaBanner",height:160},compId:2,child:[{type:"Sprite",props:{width:720,name:"bannerSprite",height:160},compId:10,child:[{type:"List",props:{width:620,var:"bannerList",spaceX:10,repeatY:1,repeatX:1,height:160,centerX:0},compId:11,child:[{type:"Box",props:{width:620,name:"render",height:160},compId:12,child:[{type:"Image",props:{width:620,name:"bannerImg",height:160},compId:13}]}]},{type:"RadioGroup",props:{y:136,var:"bannerRadioTip",space:10,selectedIndex:0,height:12,centerX:0},compId:14,child:[{type:"Radio",props:{width:12,stateNum:2,skin:"youziTexture/youzi_radio_circle.png",name:"item0",height:12},compId:15}]}]}],loadList:["youziTexture/youzi_radio_circle.png"],loadList3D:[]},G.Youzi_GameCollection_AreaBannerUI=e;const aG=class extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(aG.uiView)}};let t=aG;t.uiView={type:"View",props:{y:0,width:720,name:"YouziCollectionAreaNormal"},compId:2,child:[{type:"VBox",props:{width:720,var:"AreaNormalVBox"},compId:3,child:[{type:"Label",props:{width:640,var:"typeName",valign:"middle",top:0,text:"合集标签区域名称",height:40,fontSize:30,centerX:0,bold:!0,align:"left"},compId:4},{type:"List",props:{width:640,var:"areaNormalList",top:55,spaceY:7,spaceX:40,repeatY:2,repeatX:4,centerX:0},compId:5,child:[{type:"Box",props:{x:20,width:120,name:"render",height:162},compId:6,child:[{type:"Animation",props:{width:120,name:"iconAnima",height:120},compId:7},{type:"Image",props:{width:120,name:"icon",height:120},compId:8},{type:"Label",props:{y:130,x:-15,width:150,valign:"middle",text:"这是六个字哦",name:"nameLabel",height:32,fontSize:24,align:"center"},compId:9}]}]}]}],loadList:[],loadList3D:[]},G.Youzi_GameCollection_AreaNormalUI=t;const nG=class extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(nG.uiView)}};let i=nG;i.uiView={type:"View",props:{y:0,x:0,width:720,top:0,name:"YouziGameCollectionPage",height:1280,bottom:0},compId:2,child:[{type:"Image",props:{y:-860,x:-1140,width:3e3,skin:"youziTexture/icon_bg.png",sizeGrid:"7,7,7,7",name:"Bg",height:3e3},compId:3},{type:"Panel",props:{y:0,x:0,width:720,var:"PanelTop",height:100},compId:8,child:[{type:"Image",props:{y:50,x:192,width:337,skin:"youziTexture/game_collection_title.png",name:"topTitle",height:29},compId:5},{type:"Button",props:{y:29,x:50,var:"btnCloseCollection",stateNum:1,skin:"youziTexture/fanhui.png"},compId:7}]},{type:"Panel",props:{x:0,width:720,var:"PanelContent",top:100,name:"panelContent",bottom:120},compId:33,child:[{type:"Panel",props:{width:720,var:"HotPagePanel",top:0,bottom:0},compId:260,child:[{type:"VBox",props:{y:0,x:0,width:720,var:"HotPageBox",space:36},compId:142}]},{type:"Panel",props:{width:720,visible:!1,var:"ClassifyPagePanel",top:0,bottom:0},compId:261,child:[{type:"VBox",props:{y:0,x:0,width:720,var:"ClassifyPageBox",top:0,space:36},compId:203}]}]},{type:"Panel",props:{width:720,var:"PanelBottom",height:120,bottom:0},compId:18,child:[{type:"Tab",props:{y:0,x:0,width:720,var:"gameCollectionTab",selectedIndex:0,height:120},compId:16,child:[{type:"Button",props:{y:15,x:176,width:96,stateNum:2,skin:"youziTexture/btn_tab_hotgame.png",name:"item0",height:70},compId:15},{type:"Button",props:{y:15,x:448,width:96,stateNum:2,skin:"youziTexture/btn_tab_classify.png",name:"item1",height:70},compId:14}]}]}],loadList:["youziTexture/icon_bg.png","youziTexture/game_collection_title.png","youziTexture/fanhui.png","youziTexture/btn_tab_hotgame.png","youziTexture/btn_tab_classify.png"],loadList3D:[]},G.Youzi_GameCollection_PageUI=i}G=so=so||{};G=G.youzi||(G.youzi={});{G=G.YouziLandscapeUI||(G.YouziLandscapeUI={});const sG=class extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(sG.uiView)}};let e=sG;e.uiView={type:"View",props:{width:300,name:"YouziLandscapeBannerView",height:720},compId:2,child:[{type:"Sprite",props:{y:0,x:0,width:300,visible:!1,var:"LanderscapeBanner",height:720},compId:3,child:[{type:"List",props:{x:5,var:"BannerList",top:0,spaceY:10,spaceX:10,repeatY:4,repeatX:2,height:720},compId:4,child:[{type:"Box",props:{width:140,name:"render",height:140},compId:5,child:[{type:"Image",props:{y:0,x:0,width:140,skin:"youziTexture/icon_bg.png",sizeGrid:"5,5,5,5",name:"iconBg",height:140},compId:6},{type:"Animation",props:{y:5,x:5,width:130,visible:!1,name:"iconAnima",height:130},compId:7},{type:"Image",props:{y:5,x:5,width:130,name:"icon",height:130},compId:8}]}]}]}],loadList:["youziTexture/icon_bg.png"],loadList3D:[]},G.Youzi_LandscapeBannerUI=e;const lG=class extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(lG.uiView)}};let t=lG;t.uiView={type:"View",props:{width:1280,name:"YouziLandscapeFull",height:720},compId:2,child:[{type:"Sprite",props:{width:1280,visible:!1,var:"LandScapeFull",height:720},compId:3,child:[{type:"Image",props:{y:-640,x:-360,width:2e3,var:"Bg",skin:"youziTexture/youzi_black.png",height:2e3},compId:5},{type:"List",props:{y:23,width:1260,var:"FullList",spaceY:20,spaceX:20,repeatY:2,repeatX:6,left:20,height:535},compId:6,child:[{type:"Box",props:{width:200,name:"render",height:254},compId:8,child:[{type:"Image",props:{width:200,skin:"youziTexture/icon_bg.png",sizeGrid:"5,5,5,5",name:"iconBg",height:254},compId:9},{type:"Image",props:{y:200,x:7,width:186,skin:"youziTexture/bg_orange.png",sizeGrid:"10,10,10,10",name:"nameBg",height:45},compId:10},{type:"Animation",props:{y:7,x:7,width:186,name:"iconAnima",height:186},compId:11},{type:"Image",props:{y:7,x:7,width:186,name:"icon",height:186},compId:12},{type:"Label",props:{y:204.5,x:12.5,width:175,valign:"middle",overflow:"hidden",name:"namelab",height:36,fontSize:25,color:"#000000",bold:!0,align:"center"},compId:13}]}]},{type:"Button",props:{y:598,x:469,var:"CloseBtn",stateNum:1,skin:"youziTexture/startgame_btn.png"},compId:7}]}],loadList:["youziTexture/youzi_black.png","youziTexture/icon_bg.png","youziTexture/bg_orange.png","youziTexture/startgame_btn.png"],loadList3D:[]},G.Youzi_LandscapeFullUI=t}G=so=so||{};{G=G.youzi||(G.youzi={});const rG=class extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(rG.uiView)}};let e=rG;e.uiView={type:"View",props:{x:0,width:720,visible:!0,name:"YouziBottomView",height:170},compId:2,child:[{type:"Sprite",props:{y:0,x:0,width:720,visible:!1,var:"BannerBottomUI",sizeGrid:"12,10,0,10",height:170},compId:3,child:[{type:"Image",props:{y:0,x:0,width:720,var:"bannerBottomBg",skin:"youziTexture/two_round_corner.png",sizeGrid:"10,12,5,12",height:170},compId:4},{type:"Image",props:{y:37.5,x:14,skin:"youziTexture/txt_hotgame_v.png",name:"bannerTitle"},compId:5},{type:"List",props:{y:20,x:47,width:670,var:"bottomList",spaceY:5,spaceX:24,repeatY:1,repeatX:4,height:150},compId:6,child:[{type:"Box",props:{y:0,x:0,width:110,renderType:"render",name:"render",height:150},compId:7,child:[{type:"Animation",props:{y:0,x:0,width:110,visible:!1,name:"iconAnima",height:110},compId:13},{type:"Image",props:{y:0,x:0,width:110,name:"icon",height:110},compId:8},{type:"Label",props:{y:130,x:55,name:"namelab",fontSize:20,color:"#ffffff",anchorY:.5,anchorX:.5,align:"center"},compId:9}]}]},{type:"Button",props:{y:5.5,x:685,width:32,var:"closeBtn",stateNum:1,skin:"youziTexture/youzi_bottom_close.png",height:32},compId:14}]}],loadList:["youziTexture/two_round_corner.png","youziTexture/txt_hotgame_v.png","youziTexture/youzi_bottom_close.png"],loadList3D:[]},G.Youzi_BottomBannerUI=e;const hG=class extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(hG.uiView)}};let t=hG;t.uiView={type:"View",props:{width:720,name:"YouziFriendInviteGame",height:1280},compId:2,child:[{type:"Button",props:{width:3e3,var:"noTouch",stateNum:1,skin:"youziTexture/blank.png",height:3e3,centerY:0,centerX:0},compId:3},{type:"Image",props:{width:500,var:"Bg",skin:"youziTexture/icon_bg.png",sizeGrid:"7,7,7,7",height:250,centerY:0,centerX:0},compId:5,child:[{type:"WXOpenDataViewer",props:{y:3,x:0,width:500,var:"playerContent",iconSign:"wx",height:160,runtime:"laya.ui.WXOpenDataViewer"},compId:6},{type:"Sprite",props:{y:170,x:0,width:500,height:2},compId:16,child:[{type:"Line",props:{y:0,x:0,toY:0,toX:500,lineWidth:2,lineColor:"#000000"},compId:12}]},{type:"Button",props:{y:170,x:0,width:500,var:"acceptBtn",stateNum:3,labelStrokeColor:"#225992",labelSize:40,labelColors:"#225992",label:"接 受",height:80},compId:10},{type:"Button",props:{y:277,x:195.5,width:109,var:"closeBtn",labelStrokeColor:"#ffffff",labelSize:36,labelColors:"#ffffff",label:"关 闭",height:41},compId:11}]}],loadList:["youziTexture/blank.png","youziTexture/icon_bg.png"],loadList3D:[]},G.Youzi_FriendInvite_GameUI=t;const mG=class extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(mG.uiView)}};let i=mG;i.uiView={type:"View",props:{width:720,name:"YouziFullMixBanner",height:1280},compId:2,child:[{type:"Sprite",props:{y:0,x:0,width:720,var:"FullMixBannerUI",height:1280},compId:39,child:[{type:"Image",props:{y:-560,x:-240,width:1200,var:"MaskBg",skin:"youziTexture/youzi_black.png",sizeGrid:"3,3,3,3",mouseEnabled:!1,height:2400},compId:18},{type:"Sprite",props:{y:0,x:0,width:720,var:"LineAndLabel",mouseEnabled:!1,height:1280},compId:22,child:[{type:"Line",props:{y:122,x:63,toY:0,toX:200,lineWidth:2,lineColor:"#ffffff"},compId:21},{type:"Line",props:{y:121,x:455,toY:0,toX:200,lineWidth:2,lineColor:"#ffffff"},compId:30},{type:"Line",props:{y:363,x:30,toY:0,toX:221.4,lineWidth:2,lineColor:"#ffffff"},compId:32},{type:"Line",props:{y:363,x:463,toY:0,toX:221.4,lineWidth:2,lineColor:"#ffffff"},compId:33},{type:"Box",props:{y:80,x:260,width:200,var:"Box_Label",height:320},compId:42,child:[{type:"Label",props:{y:28,x:36,valign:"middle",text:"好友在玩",overflow:"hidden",fontSize:32,color:"#ffffff",align:"center"},compId:31},{type:"Label",props:{y:269,x:36,valign:"middle",text:"热门推荐",fontSize:32,color:"#ffffff",align:"center"},compId:34}]}]},{type:"Button",props:{y:62,x:61,width:87,var:"CloseBtn",mouseEnabled:!0,height:37},compId:37,child:[{type:"Image",props:{y:0,x:0,width:32,skin:"youziTexture/fanhui.png",height:30},compId:36},{type:"Label",props:{y:10,x:41.5,visible:!0,valign:"middle",text:"返回",fontSize:20,color:"#ffffff",align:"center"},compId:35}]},{type:"Sprite",props:{y:162,x:40,width:640,var:"BannerUI",height:140},compId:3,child:[{type:"Image",props:{y:0,x:0,width:640,skin:"youziTexture/bg_small_wall.png",sizeGrid:"11,13,13,11",height:140},compId:5},{type:"List",props:{y:10,x:0,width:640,var:"BannerUIList",spaceX:15,repeatY:1,repeatX:4,height:120},compId:6,child:[{type:"Box",props:{y:0,x:12,width:120,renderType:"render",name:"render",height:120},compId:7,child:[{type:"Animation",props:{y:0,x:0,width:120,name:"iconAnima",height:120},compId:38},{type:"Image",props:{width:120,name:"icon",height:120},compId:8}]}]}]},{type:"Sprite",props:{y:408,x:18,width:685,var:"MixListUI",height:720},compId:4,child:[{type:"List",props:{width:685,var:"MixList",spaceY:18,spaceX:18,repeatY:3,repeatX:3,height:720},compId:9,child:[{type:"Box",props:{y:0,x:10,width:210,renderType:"render",name:"render",height:210},compId:11,child:[{type:"Image",props:{y:0,x:0,width:210,skin:"youziTexture/icon_bg.png",sizeGrid:"5,5,5,5",name:"boxBg",height:210},compId:12},{type:"Animation",props:{y:5,x:5,width:200,name:"iconAnima",height:200},compId:13},{type:"Image",props:{y:5,x:5,width:200,name:"icon",height:200},compId:14},{type:"Image",props:{y:159,x:5,width:200,skin:"youziTexture/blank.png",sizeGrid:"0,0,0,0",name:"namelabBG",height:46},compId:15},{type:"Image",props:{y:10,x:140,width:65,skin:"youziTexture/youzi_hotgame.png",name:"redhit",height:30},compId:16},{type:"Label",props:{y:159,x:5,width:200,valign:"middle",overflow:"hidden",name:"namelab",height:46,fontSize:24,color:"#ffffff",align:"center"},compId:17}]}]}]}]}],loadList:["youziTexture/youzi_black.png","youziTexture/fanhui.png","youziTexture/bg_small_wall.png","youziTexture/icon_bg.png","youziTexture/blank.png","youziTexture/youzi_hotgame.png"],loadList3D:[]},G.Youzi_FullMixBannerUI=i;const dG=class extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(dG.uiView)}};let o=dG;o.uiView={type:"View",props:{width:720,name:"YouziFullScreen",height:1280},compId:2,child:[{type:"Image",props:{y:-560,x:-240,width:1200,var:"BG",skin:"youziTexture/youzi_black.png",sizeGrid:"5,5,5,5",mouseEnabled:!1,height:2400},compId:3},{type:"Sprite",props:{y:0,x:0,width:720,visible:!1,var:"FullScreenUI",height:1280},compId:5,child:[{type:"Image",props:{y:57.5,x:258,skin:"youziTexture/youzi_full_title.png",name:"title"},compId:13},{type:"Button",props:{y:57.5,x:42,var:"closeFullScreen",stateNum:1,skin:"youziTexture/fanhui.png",gray:!0},compId:10},{type:"List",props:{y:140,x:17.5,width:685,var:"FullScreenList",spaceY:18,spaceX:18,repeatY:4,repeatX:3,height:1e3},compId:4,child:[{type:"Box",props:{x:10,width:210,renderType:"render",name:"render",height:210},compId:6,child:[{type:"Image",props:{y:0,x:0,width:210,skin:"youziTexture/icon_bg.png",sizeGrid:"5,5,5,5",name:"boxBg",height:210},compId:14},{type:"Animation",props:{y:5,x:5,width:200,name:"iconAnima",height:200},compId:12},{type:"Image",props:{y:5,x:5,width:200,name:"icon",height:200},compId:7},{type:"Image",props:{y:159,x:5,width:200,skin:"youziTexture/blank.png",sizeGrid:"0,0,0,0",name:"namelabBG",height:46},compId:9},{type:"Image",props:{y:10,x:140,width:65,skin:"youziTexture/youzi_hotgame.png",name:"redhit",height:30},compId:11},{type:"Label",props:{y:159,x:5,width:200,valign:"middle",overflow:"hidden",name:"namelab",height:46,fontSize:24,color:"#ffffff",align:"center"},compId:8}]}]}]}],loadList:["youziTexture/youzi_black.png","youziTexture/youzi_full_title.png","youziTexture/fanhui.png","youziTexture/icon_bg.png","youziTexture/blank.png","youziTexture/youzi_hotgame.png"],loadList3D:[]},G.Youzi_FullScreenUI=o;const cG=class extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(cG.uiView)}};let a=cG;a.uiView={type:"View",props:{width:1280,height:720},compId:2,child:[{type:"Image",props:{y:-240,x:-560,width:2400,var:"BG",skin:"youziTexture/youzi_black.png",sizeGrid:"5,5,5,5",mouseEnabled:!1,height:1200},compId:4},{type:"Sprite",props:{y:0,x:0,width:1280,visible:!1,var:"FullScreenUI",height:720},compId:3,child:[{type:"Image",props:{y:464,x:63,width:204,skin:"youziTexture/youzi_full_title.png",rotation:-90,name:"title",height:59},compId:14},{type:"Button",props:{y:657,x:63,width:49,var:"closeFullScreen",stateNum:1,skin:"youziTexture/fanhui.png",rotation:-90,height:43,gray:!0},compId:5},{type:"List",props:{y:20,x:165,width:1e3,var:"FullScreenList",spaceY:16,spaceX:18,repeatY:3,repeatX:4,height:680},compId:6,child:[{type:"Box",props:{y:220,x:0,width:210,rotation:-90,renderType:"render",name:"render",height:210},compId:7,child:[{type:"Image",props:{y:0,x:0,width:210,skin:"youziTexture/icon_bg.png",sizeGrid:"5,5,5,5",height:210},compId:13},{type:"Animation",props:{y:5,x:5,width:200,name:"iconAnima",height:200},compId:8},{type:"Image",props:{y:5,x:5,width:200,name:"icon",height:200},compId:9},{type:"Image",props:{y:159,x:5,width:200,skin:"youziTexture/blank.png",height:46},compId:10},{type:"Image",props:{y:5,x:140,width:65,skin:"youziTexture/youzi_hotgame.png",name:"redhit",height:30},compId:11},{type:"Label",props:{y:159,x:5,width:200,valign:"middle",overflow:"hidden",name:"namelab",height:46,fontSize:24,color:"#ffffff",align:"center"},compId:12}]}]}]}],loadList:["youziTexture/youzi_black.png","youziTexture/youzi_full_title.png","youziTexture/fanhui.png","youziTexture/icon_bg.png","youziTexture/blank.png","youziTexture/youzi_hotgame.png"],loadList3D:[]},G.Youzi_FullScreenHUI=a;const uG=class extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(uG.uiView)}};let n=uG;n.uiView={type:"View",props:{width:640,visible:!1,name:"YouziGameBanner",height:170},compId:2,child:[{type:"List",props:{y:0,x:0,width:640,visible:!0,var:"GameBannerList",spaceY:5,spaceX:5,repeatY:1,repeatX:1,height:170},compId:10,child:[{type:"Box",props:{y:1,x:0,width:640,renderType:"render",name:"render",height:170},compId:11,child:[{type:"Image",props:{y:0,x:0,width:640,name:"icon",height:170},compId:12}]}]}],loadList:[],loadList3D:[]},G.Youzi_GameBannerViewUI=n;const pG=class extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(pG.uiView)}};let s=pG;s.uiView={type:"View",props:{width:464,name:"YouziGuessLikeView",height:124},compId:2,child:[{type:"Sprite",props:{y:0,x:0,width:464,visible:!1,var:"guessUI",height:124},compId:3,child:[{type:"Image",props:{y:0,x:0,width:464,skin:"youziTexture/full_round_corner.png",sizeGrid:"10,10,10,10",name:"guessLikeBg",height:124},compId:4},{type:"Image",props:{y:15,x:28,skin:"youziTexture/txt_guesslike_v.png",name:"guessTitle"},compId:5},{type:"List",props:{y:19,x:87,width:369,var:"guesslist",spaceX:18,repeatY:1,repeatX:3,height:90},compId:6,child:[{type:"Box",props:{y:0,x:0,width:90,renderType:"render",name:"render",height:90},compId:7,child:[{type:"Animation",props:{y:0,x:0,width:90,visible:!1,name:"iconAnima",height:90},compId:9},{type:"Image",props:{y:0,x:0,width:90,name:"icon",height:90},compId:8}]}]}]}],loadList:["youziTexture/full_round_corner.png","youziTexture/txt_guesslike_v.png"],loadList3D:[]},G.Youzi_GuessLikeUI=s;const gG=class extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(gG.uiView)}};let l=gG;l.uiView={type:"View",props:{x:0,width:124,renderType:"render",name:"YouziGuessLikeViewH",height:464},compId:2,child:[{type:"Sprite",props:{y:0,x:0,width:124,visible:!1,var:"guessUI",height:464,drawCallOptimize:!0},compId:3,child:[{type:"Image",props:{y:0,x:0,width:124,var:"guessLikeBg",skin:"youziTexture/full_round_corner.png",sizeGrid:"8,8,8,8",scaleX:1,rotation:0,height:464},compId:4},{type:"Image",props:{y:30,x:12,width:100,var:"title",skin:"youziTexture/txt_guesslike_h.png",rotation:0,height:26},compId:5},{type:"List",props:{y:289,x:17,width:90,var:"guesslist",spaceY:18,rotation:0,repeatY:3,repeatX:1,pivotY:210,height:385,disabled:!1},compId:6,child:[{type:"Box",props:{y:0,x:0,width:90,name:"render",height:90},compId:7,child:[{type:"Animation",props:{y:0,x:0,width:90,name:"iconAnima",height:90},compId:9},{type:"Image",props:{y:0,x:0,width:90,name:"icon",height:90},compId:8}]}]}]}],loadList:["youziTexture/full_round_corner.png","youziTexture/txt_guesslike_h.png"],loadList3D:[]},G.Youzi_GuessLikeHUI=l;const fG=class extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(fG.uiView)}};let r=fG;r.uiView={type:"View",props:{width:102,visible:!1,name:"YouziMainPushView",mouseEnabled:!0,height:124},compId:2,child:[{type:"Sprite",props:{y:0,x:51,width:102,visible:!1,var:"btnMainRecBg",pivotX:51,height:124},compId:3,child:[{type:"Image",props:{y:0,x:0,width:102,var:"iconBg",skin:"youziTexture/icon_bg.png",sizeGrid:"5,5,5,5",height:124},compId:8},{type:"Sprite",props:{width:102,height:124},compId:10,child:[{type:"Image",props:{y:3,x:5,width:92,visible:!0,var:"iconMainRec",stateNum:1,height:92,cacheAs:"none"},compId:4},{type:"Animation",props:{y:3,x:5,width:92,visible:!1,var:"mainAnima",height:92},compId:7},{type:"Text",props:{y:103,x:50,width:102,var:"slogan",valign:"middle",pivotY:1,pivotX:51,overflow:"hidden",height:1,fontSize:18,bold:!0,align:"center",runtime:"laya.display.Text"},compId:5}]}]}],loadList:["youziTexture/icon_bg.png"],loadList3D:[]},G.Youzi_MainPushUI=r;const _G=class extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(_G.uiView)}};let h=_G;h.uiView={type:"View",props:{y:0,x:0,width:720,visible:!1,name:"YouziMoreGameView",height:1280},compId:2,child:[{type:"Image",props:{y:-560,x:-240,width:1200,var:"maskBG",skin:"youziTexture/blank.png",height:2400},compId:34},{type:"Sprite",props:{y:200,x:95,width:530,visible:!1,var:"MoreGameUI",mouseThrough:!1,mouseEnabled:!0,height:880},compId:12,child:[{type:"Image",props:{y:0,x:0,width:530,skin:"youziTexture/full_round_corner.png",sizeGrid:"8,8,8,8",name:"panel",height:880},compId:14},{type:"Image",props:{y:0,x:103,skin:"youziTexture/main_title.png",name:"title"},compId:15},{type:"Button",props:{y:-11,x:498,width:42,var:"moreGameCloseBtn",stateNum:1,skin:"youziTexture/close_button.png",labelSize:26,labelPadding:"-50",height:46},compId:16},{type:"List",props:{y:59,x:25,width:480,var:"moreGameList",spaceY:12,spaceX:28,repeatY:4,repeatX:3,height:820},compId:17,child:[{type:"Box",props:{y:0,x:0,width:140,renderType:"render",name:"render",height:180},compId:18,child:[{type:"Animation",props:{y:0,x:0,width:140,visible:!1,name:"iconAnima",height:140},compId:33},{type:"Image",props:{y:0,x:0,width:140,name:"icon",height:140},compId:31},{type:"Label",props:{y:166,x:70,width:140,overflow:"hidden",name:"namelab",height:30,fontSize:26,color:"#ffffff",anchorY:.5,anchorX:.5,align:"center"},compId:20}]}]}]}],loadList:["youziTexture/blank.png","youziTexture/full_round_corner.png","youziTexture/main_title.png","youziTexture/close_button.png"],loadList3D:[]},G.Youzi_MoreGameUI=h;const IG=class extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(IG.uiView)}};let m=IG;m.uiView={type:"View",props:{width:1280,visible:!1,name:"YouziMoreGameH",height:720},compId:2,child:[{type:"Image",props:{y:-240,x:-560,width:2400,var:"maskBG",skin:"youziTexture/blank.png",height:1200},compId:13},{type:"Sprite",props:{y:60,x:376,width:528,visible:!1,var:"MoreGameUI",pivotY:0,pivotX:0,mouseThrough:!1,mouseEnabled:!0,height:600,drawCallOptimize:!0},compId:3,child:[{type:"Image",props:{y:0,x:0,width:528,skin:"youziTexture/full_round_corner.png",sizeGrid:"8,8,8,8",pivotX:0,name:"panel",height:600,cacheAs:"none"},compId:5},{type:"Image",props:{y:0,x:113,skin:"youziTexture/main_title.png",name:"title"},compId:6},{type:"Button",props:{y:-8,x:497,var:"moreGameCloseBtn",stateNum:1,skin:"youziTexture/close_button.png",labelSize:26,labelPadding:"-50",cacheAs:"none"},compId:7},{type:"List",props:{y:70,x:31,width:466,var:"moreGameList",spaceY:10,spaceX:45,repeatY:3,repeatX:3,height:530},compId:8,child:[{type:"Box",props:{y:0,x:0,width:120,renderType:"render",name:"render",height:153},compId:9,child:[{type:"Animation",props:{y:0,x:0,width:120,visible:!1,name:"iconAnima",height:120},compId:12},{type:"Image",props:{y:0,x:0,width:120,name:"icon",height:120},compId:10},{type:"Label",props:{y:142,x:60,width:120,valign:"middle",overflow:"hidden",name:"namelab",height:22,fontSize:22,color:"#ffffff",anchorY:.5,anchorX:.5,align:"center"},compId:11}]}]}]}],loadList:["youziTexture/blank.png","youziTexture/full_round_corner.png","youziTexture/main_title.png","youziTexture/close_button.png"],loadList3D:[]},G.Youzi_MoreGameHUI=m;const CG=class extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(CG.uiView)}};let d=CG;d.uiView={type:"View",props:{width:720,name:"YouziOffLineView",height:1280},compId:2,child:[{type:"Button",props:{width:1e3,var:"OffLineMask",stateNum:1,skin:"youziTexture/blank.png",mouseEnabled:!0,height:1900,centerY:0,centerX:0},compId:4},{type:"Sprite",props:{y:506,x:96,width:528,visible:!1,var:"OffLineUI",mouseEnabled:!0,height:268},compId:3,child:[{type:"Image",props:{y:0,x:0,width:528,skin:"youziTexture/full_round_corner.png",sizeGrid:"9,9,9,9",name:"OffLineBg",height:268},compId:5},{type:"Image",props:{y:25,x:209,width:110,skin:"youziTexture/txt_guesslike_h.png",name:"offlineTitle",height:30},compId:12},{type:"Button",props:{y:-22,x:496,width:42,var:"OffLineCloseButton",stateNum:1,skin:"youziTexture/close_button.png",height:46},compId:11},{type:"List",props:{y:72,x:29,width:470,var:"OffLineList",spaceX:25,repeatY:1,repeatX:2,height:180},compId:6,child:[{type:"Box",props:{y:0,x:0,width:140,renderType:"render",name:"render",height:180},compId:7,child:[{type:"Animation",props:{y:0,x:0,width:140,visible:!1,name:"iconAnima",height:140},compId:13},{type:"Image",props:{x:0,width:140,name:"icon",height:140},compId:8},{type:"Image",props:{y:-14,x:126,visible:!1,skin:"youziTexture/redhit.png",name:"redhit",cacheAs:"bitmap"},compId:9},{type:"Label",props:{y:150,width:140,valign:"middle",text:"弹弹欢乐球",overflow:"hidden",name:"namelab",height:30,fontSize:24,color:"#ffffff",align:"center"},compId:10}]}]}]}],loadList:["youziTexture/blank.png","youziTexture/full_round_corner.png","youziTexture/txt_guesslike_h.png","youziTexture/close_button.png","youziTexture/redhit.png"],loadList3D:[]},G.Youzi_OffLineUI=d;const GG=class extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(GG.uiView)}};let c=GG;c.uiView={type:"View",props:{width:1280,name:"YouziOffLineHView",height:720},compId:2,child:[{type:"Button",props:{width:1900,var:"OffLineMask",stateNum:1,skin:"youziTexture/blank.png",mouseThrough:!1,height:1e3,centerY:0,centerX:0},compId:4},{type:"Sprite",props:{y:180,x:320,width:640,visible:!1,var:"OffLineUI",mouseThrough:!0,mouseEnabled:!0,height:360,drawCallOptimize:!0},compId:3,child:[{type:"Image",props:{y:0,x:0,width:640,skin:"youziTexture/full_round_corner.png",sizeGrid:"8,8,8,8",name:"OffLineBg",height:360},compId:5},{type:"Image",props:{y:37,x:255,width:130,skin:"youziTexture/txt_guesslike_h.png",name:"title",height:32},compId:6},{type:"Button",props:{y:-9,x:609,var:"OffLineCloseButton",stateNum:1,skin:"youziTexture/close_button.png"},compId:7},{type:"List",props:{y:101,x:0,width:640,var:"OffLineList",repeatY:1,repeatX:2,height:210},compId:8,child:[{type:"Box",props:{y:15,x:25,width:180,renderType:"render",name:"render",height:180},compId:9,child:[{type:"Animation",props:{y:0,x:15,width:150,visible:!1,name:"iconAnima",height:150},compId:13},{type:"Image",props:{y:0,x:15,width:150,name:"icon",height:150},compId:10},{type:"Image",props:{y:-14,x:151,visible:!1,skin:"youziTexture/redhit.png",name:"redhit",cacheAs:"bitmap"},compId:11},{type:"Label",props:{y:160,width:180,text:"弹弹欢乐球",name:"namelab",height:30,fontSize:30,color:"#ffffff",align:"center"},compId:12}]}]}]}],loadList:["youziTexture/blank.png","youziTexture/full_round_corner.png","youziTexture/txt_guesslike_h.png","youziTexture/close_button.png","youziTexture/redhit.png"],loadList3D:[]},G.Youzi_OffLineHUI=c;const SG=class extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(SG.uiView)}};let u=SG;u.uiView={type:"View",props:{width:720,name:"YouziRecentlyUsed",height:1280},compId:2,child:[{type:"Sprite",props:{y:0,x:0,width:720,var:"RecentlyUsedUI",height:1280},compId:23,child:[{type:"Image",props:{y:-478.5,x:-180,width:1200,var:"GameListBG",skin:"youziTexture/icon_bg.png",sizeGrid:"5,5,5,5",mouseEnabled:!1,height:2400},compId:4},{type:"Image",props:{y:0,x:0,width:720,var:"TitleBg",skin:"youziTexture/youzi_graybg.png",sizeGrid:"5,5,5,5",height:100},compId:3},{type:"Image",props:{y:34,x:23,width:40,var:"CloseBtn",skin:"youziTexture/youzi_leftarrow.png",height:40},compId:25},{type:"Label",props:{y:24,x:300,width:120,var:"TitleLabel",valign:"middle",text:"小游戏",stroke:1,height:60,fontSize:32,color:"#000000",align:"center"},compId:5},{type:"Label",props:{y:101,x:16,width:704,var:"TitleUsed",valign:"middle",text:"最近使用",strokeColor:"#aa9f9f",stroke:.7,height:59,fontSize:24,color:"#aa9f9f",align:"left"},compId:6,child:[{type:"Line",props:{y:57,x:0,toY:0,toX:704,lineWidth:1.5,lineColor:"#c6c6c6"},compId:21}]},{type:"List",props:{y:162,x:40,width:680,var:"RecentlyUsedList",spaceY:20,repeatY:9,repeatX:1,height:1119},compId:7,child:[{type:"Box",props:{y:0,width:680,renderType:"render",name:"render",height:100},compId:10,child:[{type:"Animation",props:{y:0,x:0,width:100,name:"iconAnima",height:100},compId:14},{type:"Image",props:{width:100,name:"icon",height:100},compId:12},{type:"Image",props:{y:0,x:0,width:100,skin:"youziTexture/youzi_circlemask.png",name:"maskBG",height:100},compId:29},{type:"Image",props:{y:29,x:557,width:40,skin:"youziTexture/youzi_hitstar.png",name:"redhit",height:39},compId:22},{type:"Label",props:{y:31,x:135.5,width:409,valign:"bottom",text:"弹弹欢乐球",overflow:"scroll",name:"namelab",height:35,fontSize:28,align:"left"},compId:13},{type:"Line",props:{y:100,x:135,toY:0,toX:545,lineWidth:1.5,lineColor:"#bbbbbb"},compId:11}]}]}]}],loadList:["youziTexture/icon_bg.png","youziTexture/youzi_graybg.png","youziTexture/youzi_leftarrow.png","youziTexture/youzi_circlemask.png","youziTexture/youzi_hitstar.png"],loadList3D:[]},G.Youzi_RecentlyUsedUI=u;const yG=class extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(yG.uiView)}};let p=yG;p.uiView={type:"View",props:{width:720,name:"YouziScreenPage",height:1280},compId:2,child:[{type:"Sprite",props:{x:0,width:720,var:"LuoDi",height:1280},compId:9,child:[{type:"Image",props:{y:0,x:0,width:720,var:"BG",skin:"youziTexture/icon_bg.png",sizeGrid:"6,6,6,6",height:1280},compId:4},{type:"Image",props:{y:823,x:211,var:"luoDiBtn",skin:"youziTexture/box_start.png"},compId:5},{type:"Image",props:{y:490,x:210,width:300,var:"Small",height:300},compId:6},{type:"Image",props:{y:0,x:0,width:720,var:"Big",height:1280},compId:7},{type:"Button",props:{y:0,x:0,width:720,var:"PageBtn",height:1280},compId:8}]}],loadList:["youziTexture/icon_bg.png","youziTexture/box_start.png"],loadList3D:[]},G.Youzi_ScreenPageUI=p;const wG=class extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(wG.uiView)}};let g=wG;g.uiView={type:"View",props:{width:250,name:"YouziSlideBanner",height:806},compId:2,child:[{type:"Sprite",props:{y:0,x:0,width:250,visible:!1,var:"SlideBannerUI",mouseEnabled:!0,height:806},compId:3,child:[{type:"Sprite",props:{y:0,x:0,width:250,var:"SlideBannerBg",height:806},compId:4,child:[{type:"Image",props:{y:0,x:0,width:200,var:"slideBgLeft",skin:"youziTexture/full_round_corner.png",sizeGrid:"9,9,9,9",height:806},compId:5},{type:"Button",props:{x:200,width:42,var:"btnSLideClose",stateNum:1,skin:"youziTexture/slide_bg_mid.png",sizeGrid:"0,40,0,4",height:164,centerY:0},compId:7}]},{type:"List",props:{y:8,x:32,width:150,var:"SlideBannerList",spaceY:5,spaceX:0,repeatY:4,repeatX:1,height:790},compId:8,child:[{type:"Box",props:{y:0,x:0,width:130,renderType:"render",name:"render",height:180},compId:9,child:[{type:"Animation",props:{y:12,x:0,width:130,visible:!1,name:"iconAnima",height:130},compId:10},{type:"Image",props:{y:12,x:0,width:130,name:"icon",height:130},compId:11},{type:"Image",props:{y:-2,x:116,skin:"youziTexture/redhit.png",name:"markImg"},compId:12},{type:"Label",props:{y:164,x:65,width:130,valign:"middle",name:"namelab",height:26,fontSize:26,color:"#ffffff",anchorY:.5,anchorX:.5,align:"center"},compId:13}]}]}]}],loadList:["youziTexture/full_round_corner.png","youziTexture/slide_bg_mid.png","youziTexture/redhit.png"],loadList3D:[]},G.Youzi_SlideBannerUI=g;const vG=class extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(vG.uiView)}};let f=vG;f.uiView={type:"View",props:{width:536,visible:!1,name:"YouziSlideView",height:802},compId:2,child:[{type:"Sprite",props:{y:0,x:0,width:536,visible:!1,var:"SlideWindowUI",mouseEnabled:!0,height:802},compId:14,child:[{type:"Sprite",props:{y:0,x:0,width:534,var:"slideBg",height:802},compId:26,child:[{type:"Image",props:{y:0,x:0,width:497,skin:"youziTexture/full_round_corner.png",sizeGrid:"9,9,9,9",name:"slideBgLeft",height:802},compId:16},{type:"Image",props:{y:319,x:497,width:42,skin:"youziTexture/slide_bg_mid.png",sizeGrid:"0,40,0,4",name:"slideBtn",mouseEnabled:!1,height:164},compId:18},{type:"Button",props:{y:359.5,x:495,width:44,var:"btnSLideClose",stateNum:1,height:83},compId:24}]},{type:"List",props:{y:11,x:34,width:463,var:"slideList",spaceY:5,spaceX:26,repeatY:4,repeatX:3,height:790},compId:19,child:[{type:"Box",props:{y:0,x:0,width:130,renderType:"render",name:"render",height:180},compId:20,child:[{type:"Animation",props:{y:12,x:0,width:130,visible:!1,name:"iconAnima",height:130},compId:27},{type:"Image",props:{y:12,x:0,width:130,name:"icon",height:130},compId:21},{type:"Image",props:{y:-2,x:116,skin:"youziTexture/redhit.png",name:"markImg"},compId:22},{type:"Label",props:{y:164,x:65,width:130,valign:"middle",name:"namelab",height:26,fontSize:26,color:"#ffffff",anchorY:.5,anchorX:.5,align:"center"},compId:23}]}]}]}],loadList:["youziTexture/full_round_corner.png","youziTexture/slide_bg_mid.png","youziTexture/redhit.png"],loadList3D:[]},G.Youzi_SlideWindowUI=f;const DG=class extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(DG.uiView)}};let _=DG;_.uiView={type:"View",props:{width:600,visible:!1,name:"YouziSlideWindowViewH",height:614},compId:2,child:[{type:"Sprite",props:{y:0,x:0,width:600,visible:!1,var:"SlideWindowUI",height:614,drawCallOptimize:!0},compId:3,child:[{type:"Sprite",props:{y:0,x:0,width:600,var:"slideBg",height:614},compId:13,child:[{type:"Image",props:{y:225,x:566,width:33,skin:"youziTexture/slide_bg_mid.png",sizeGrid:"0,40,0,4",name:"slideBgMiddle",height:164},compId:5},{type:"Image",props:{y:0,x:-71,width:640,skin:"youziTexture/full_round_corner.png",sizeGrid:"10,10,10,10",name:"zhezhao",height:614},compId:6},{type:"Button",props:{y:265,x:569,width:31,var:"btnSLideClose",stateNum:1,height:80},compId:12}]},{type:"List",props:{y:0,x:67,width:485,var:"slideList",spaceY:1,spaceX:40,repeatY:3,repeatX:3,height:614},compId:7,child:[{type:"Box",props:{y:0,x:0,width:130,renderType:"render",name:"render",height:190},compId:8,child:[{type:"Animation",props:{y:20,x:0,width:130,visible:!1,name:"iconAnima",height:130},compId:14},{type:"Image",props:{y:20,x:0,width:130,name:"icon",height:130},compId:9},{type:"Image",props:{y:6,x:116,skin:"youziTexture/redhit.png",name:"markImg",cacheAs:"none"},compId:10},{type:"Label",props:{y:177,x:65,width:130,valign:"bottom",overflow:"hidden",name:"namelab",height:24,fontSize:22,color:"#ffffff",anchorY:.5,anchorX:.5,align:"center"},compId:11}]}]}]}],loadList:["youziTexture/slide_bg_mid.png","youziTexture/full_round_corner.png","youziTexture/redhit.png"],loadList3D:[]},G.Youzi_SlideWindowHUI=_;const UG=class extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(UG.uiView)}};let I=UG;I.uiView={type:"View",props:{width:600,visible:!1,name:"YouziSmallWallView",height:414},compId:2,child:[{type:"Sprite",props:{y:0,x:0,width:600,visible:!1,var:"SmallWallUI",pivotY:0,pivotX:0,mouseThrough:!1,mouseEnabled:!0,height:414},compId:4,child:[{type:"Image",props:{y:0,x:0,width:600,skin:"youziTexture/bg_small_wall.png",sizeGrid:"38,42,38,42",pivotX:0,name:"panel",height:414},compId:5},{type:"Image",props:{y:7,x:110,skin:"youziTexture/txt_small_wall.png",name:"title"},compId:6},{type:"List",props:{y:56,x:17,width:568,var:"smallWallList",spaceY:10,spaceX:25,repeatY:1,repeatX:4,height:350},compId:8,child:[{type:"Box",props:{y:0,x:0,width:120,renderType:"render",name:"render",height:172},compId:9,child:[{type:"Animation",props:{y:12,x:0,width:120,visible:!1,name:"iconAnima",height:120},compId:13},{type:"Image",props:{y:12,x:0,width:120,name:"icon",height:120},compId:10},{type:"Image",props:{y:0,x:104,visible:!1,skin:"youziTexture/redhit.png",name:"redhit"},compId:12},{type:"Label",props:{y:152,x:60,width:120,valign:"middle",overflow:"hidden",name:"namelab",height:30,fontSize:22,color:"#ffffff",anchorY:.5,anchorX:.5,align:"center"},compId:11}]}]}]}],loadList:["youziTexture/bg_small_wall.png","youziTexture/txt_small_wall.png","youziTexture/redhit.png"],loadList3D:[]},G.Youzi_SmallWallUI=I;const LG=class extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(LG.uiView)}};let C=LG;C.uiView={type:"View",props:{width:750,name:"YouziSmallWallViewH",height:414},compId:2,child:[{type:"Sprite",props:{y:0,x:0,width:750,visible:!1,var:"SmallWallUIH",pivotY:0,pivotX:0,mouseThrough:!1,mouseEnabled:!0,height:414},compId:3,child:[{type:"Image",props:{y:0,x:0,width:750,skin:"youziTexture/bg_small_wall.png",sizeGrid:"38,42,38,42",pivotX:0,name:"panel",height:414},compId:4},{type:"Image",props:{y:9,x:177.5,skin:"youziTexture/txt_small_wall.png",name:"title"},compId:5},{type:"List",props:{y:56,x:17,width:720,var:"smallWallListH",spaceY:10,spaceX:25,repeatY:1,repeatX:5,height:350},compId:6,child:[{type:"Box",props:{y:0,x:0,width:120,renderType:"render",name:"render",height:172},compId:7,child:[{type:"Animation",props:{y:12,x:0,width:120,name:"iconAnima",height:120},compId:11},{type:"Image",props:{y:12,x:0,width:120,name:"icon",height:120},compId:8},{type:"Image",props:{y:0,x:104,visible:!1,skin:"youziTexture/redhit.png",name:"redhit"},compId:9},{type:"Label",props:{y:152,x:60,width:120,valign:"middle",overflow:"hidden",name:"namelab",height:30,fontSize:22,color:"#ffffff",anchorY:.5,anchorX:.5,align:"center"},compId:10}]}]}]}],loadList:["youziTexture/bg_small_wall.png","youziTexture/txt_small_wall.png","youziTexture/redhit.png"],loadList3D:[]},G.Youzi_SmallWallHUI=C}var po={},go=class{constructor(e,t){this.atlasPngUrl=null,this.animaPlaySpeed=100,(e||120<e)&&(go.unitAtlasPngWidth=e),(t||120<t)&&(go.unitAtlasPngHeight=t)}createAnimation(e,t){this.atlasPngUrl=e,po.hasOwnProperty(this.atlasPngUrl)?t(po[this.atlasPngUrl]):this.loadAnimaRes(t)}loadAnimaRes(e){Laya.loader.load(this.atlasPngUrl,new Laya.Handler(this,this.atlasPngRect,[e]),null,Laya.Loader.IMAGE)}atlasPngRect(e,t){if(t){for(var i=[],o=0;o<4;o++)for(var a=0;a<4;a++){var n=Laya.Texture.createFromTexture(t,a*go.unitAtlasPngWidth,o*go.unitAtlasPngHeight,go.unitAtlasPngWidth,go.unitAtlasPngHeight),s=new Laya.Graphics;s.drawTexture(n),i.push(s)}var l=new Laya.Animation;l.frames=i,l.interval=this.animaPlaySpeed,e(po[this.atlasPngUrl]=l)}}},fo=go,_o=(fo.unitAtlasPngWidth=120,fo.unitAtlasPngHeight=120,class extends so.youzi.Youzi_MainPushUI{constructor(e){super(),this.mainRecData=null,this.curMainRecIdx=0,this.mainRecItemExposure={},this.createMainPushType=1,this.leftTween=null,this.rightTween=null,this.updateMainRecTimer=!1,this.startTimer=!0,this.initCustomParams(e),this.visible=!1,this.btnMainRecBg.visible=!1}initCustomParams(e){e&&(this.x=e.hasOwnProperty("x")?e.x:0,this.y=e.hasOwnProperty("y")?e.y:0,this.scaleX=e.hasOwnProperty("scaleX")?e.scaleX:1,this.scaleY=e.hasOwnProperty("scaleY")?e.scaleX:1,this.createMainPushType=(e.hasOwnProperty("createMainPushType")?e:this).createMainPushType,this.mainRecData=(e.hasOwnProperty("mainRecData")?e:this).mainRecData)}onAwake(){mo.getDataLoaded()?this.initShow():mo._loadedCallBacks.push(this.initShow.bind(this))}initShow(){var e;0<mo.mainRecDatas.length&&(mo.getMainNameHide()&&(this.slogan.visible=!1,this.iconBg.visible=!1,e=mo.getMainNameHideScale(),this.btnMainRecBg.scale(e,e)),1==this.createMainPushType&&(this.mainRecData=mo.mainRecDatas[0]),this.btnMainRecBg.on(Laya.Event.CLICK,this,this.onBtnMainRecClicked),this.visible=!0,this.btnMainRecBg.visible=!0,this.btnMainRecBg.rotation=10,this.addMainAnimaOrImage(),mo.sendExposureLog(this.mainRecData,1),this.mainRecItemExposure[this.mainRecData.appid]=1,this.startTimerLoop())}startTimerLoop(){this.startTimer&&(this.startTimer=!1,1==this.createMainPushType&&1<mo.mainRecDatas.length&&(this.updateMainRecTimer=!0,Laya.timer.loop(5e3,this,this.updateMainRec)),this.mainPushRotationAction())}clearTimerLoop(){this.btnMainRecBg.rotation=10,this.startTimer=!0,this.updateMainRecTimer&&(this.updateMainRecTimer=!1,Laya.timer.clear(this,this.updateMainRec)),this.leftTween&&Laya.Tween.clear(this.leftTween),this.rightTween&&Laya.Tween.clear(this.rightTween)}mainPushRotationAction(){this&&this.rotatotionRight()}rotatotionRight(){this&&(this.rightTween=Laya.Tween.to(this.btnMainRecBg,{rotation:-10},2e3,null,new Laya.Handler(this,this.rotationLeft)))}rotationLeft(){this&&(this.leftTween=Laya.Tween.to(this.btnMainRecBg,{rotation:10},2e3,null,new Laya.Handler(this,this.rotatotionRight)))}updateMainRec(){this&&(this.curMainRecIdx=this.curMainRecIdx+1>=mo.mainRecDatas.length?0:this.curMainRecIdx+1,this.mainRecData=mo.mainRecDatas[this.curMainRecIdx],this.addMainAnimaOrImage(),this.mainRecItemExposure[this.mainRecData.appid]||(mo.sendExposureLog(this.mainRecData,1),this.mainRecItemExposure[this.mainRecData.appid]=1))}updateMainRecMultiple(e){this&&(this.mainRecData=e,this.addMainAnimaOrImage(),this.mainRecItemExposure[e.appid]||(mo.sendExposureLog(e,1),this.mainRecItemExposure[e.appid]=1))}addMainAnimaOrImage(){var t;1==this.mainRecData.dynamicType&&this.mainRecData.dynamicIcon?((t=this).mainAnima.scale(.75,.75),this.iconMainRec.visible=!1,(new fo).createAnimation(this.mainRecData.dynamicIcon,function(e){t.mainAnima.frames=e.frames,t.mainAnima.interval=e.interval,t.mainAnima.visible=!0,t.mainAnima.play()})):(this.mainAnima.visible=!1,this.iconMainRec.visible=!0,this.iconMainRec.skin=this.mainRecData.iconImg),""!=this.mainRecData.title||null!=this.mainRecData.title?this.slogan.text=this.mainRecData.title:""==this.mainRecData.slogan&&null==this.mainRecData.slogan||(this.slogan.text=this.mainRecData.slogan)}onBtnMainRecClicked(){mo.clickGameYouziUIId=ho.Youzi_MainPush,this.mainRecData.locationIndex=1,mo.startOtherGame(this.mainRecData,null),1==this.createMainPushType&&this.updateMainRec()}}),Io=class{static getInstance(){return this.instance||(this.instance=new Io),this.instance}createItemLabel(e,t,i){e.text=t}createItemImage(e,t){e.skin=t}createAltasPngAnima(t,e){(new fo).createAnimation(e,function(e){t.frames=e.frames,t.interval=e.interval,t.play()})}createYouziListItemScale(e,t,i,o,a,n,s){e.scale(n,s),this.createYouziListItem(e,t,i,o,a)}createYouziListItem(e,t,i,o,a){var t=e.getChildByName(t),n=e.getChildByName(i);if(o&&(e.getChildByName(o).text=a.title),1==a.dynamicType&&a.dynamicIcon){let e=n.width/120;e=Number(e.toFixed(2)),n.scale(e,e),n.visible=!0,t.visible=!1,(new fo).createAnimation(a.dynamicIcon,function(e){n.frames=e.frames,n.interval=e.interval,n.play()})}else n.visible=!1,t.visible=!0,t.skin=a.iconImg}},Co=Io,Go=(Co.instance=null,class extends so.youzi.Youzi_MoreGameHUI{constructor(e){super(),this.namelabLabel="namelab",this.mainItemHExposure={},this.isAddToStage=!1,this.fisrtShow=!1,this.isCreate=!1,this.uiCompleteCallCopy=null,this.uiStateCallCopy=null,this.moreBtn=null,this.curFront=!0,this.curBack=!1,this.stopAction=!1,this.isClick=!1,this.dur=5e3,this.scaleMoreGameUIH=1,this.designWHAdapter(),this.initCustomParams(e),this.visible=!1,this.MoreGameUI.visible=!1,this.moreGameList.vScrollBarSkin="",this.moreGameCloseBtn.on(Laya.Event.CLICK,this,this.onBtnCloseClicked)}designWHAdapter(){Laya.stage.designHeight!=this.height&&(this.scaleMoreGameUIH=Laya.stage.designHeight/this.height,this.MoreGameUI.scale(this.scaleMoreGameUIH,this.scaleMoreGameUIH),this.maskBG.scale(this.scaleMoreGameUIH,this.scaleMoreGameUIH),this.height=Laya.stage.designHeight),Laya.stage.designWidth!=this.width&&(this.maskBG.scaleX=Laya.stage.designWidth/this.width,this.width=Laya.stage.designWidth)}initCustomParams(e){e?(this.MoreGameUI.x=e.hasOwnProperty("x")?e.x:(Laya.stage.width-this.MoreGameUI.width*this.scaleMoreGameUIH)/2,this.MoreGameUI.y=e.hasOwnProperty("y")?e.y:(Laya.stage.height-this.MoreGameUI.height*this.scaleMoreGameUIH)/2,this.uiStateCallCopy=e.hasOwnProperty("uiStateCall")?e.uiStateCall:null):this.MoreGameUI.pos((Laya.stage.width-this.MoreGameUI.width*this.scaleMoreGameUIH)/2,(Laya.stage.height-this.MoreGameUI.height*this.scaleMoreGameUIH)/2)}setAddToStage(e){this.isAddToStage=e}setMoreGameBtn(e){this.moreBtn=e}offUICompleteCall(){this.uiCompleteCallCopy&&(this.uiCompleteCallCopy=null)}setUIStateCall(e){this.uiStateCallCopy=e}notifyUIState(e,t){this.uiStateCallCopy&&this.uiStateCallCopy(e,t)}offUIStateCall(){this.uiStateCallCopy&&(this.uiStateCallCopy=null)}onAwake(){mo.getDataLoaded()?this.initShow():mo._loadedCallBacks.push(this.initShow.bind(this))}showMoreGameUI(){this.isCreate&&!this.visible&&(this.isAddToStage&&(this.zOrder=998),this.visible=!0,this.moreGameList.mouseThrough=!1,this.MoreGameUI.visible=!0,this.notifyUIState(ho.Youzi_MoreGame,!0),this.starMoreGameAction(),this.fisrtShow||(this.fisrtShow=!0,this.checkExposure()))}onBtnCloseClicked(){this.stopMoreGameAcion(),this.visible=!1,this.moreGameList.mouseThrough=!0,this.MoreGameUI.visible=!1,this.notifyUIState(ho.Youzi_MoreGame,!1),this.isAddToStage&&(this.zOrder=0)}initShow(){mo.getPropertiesValue("_moreGameNameHide")&&(this.namelabLabel=null,this.moreGameList.spaceY=-15),0<mo.moreDatas.length&&(this.moreBtn&&(this.moreBtn.visible=!0),this.moreGameList.array=mo.moreDatas,this.moreGameList.renderHandler=new Laya.Handler(this,this.onListRender),this.moreGameList.mouseHandler=new Laya.Handler(this,this.moreGameListMouseEvent),this.isCreate=!0,this.dur=12<mo.moreDatas.length?5e3*(mo.moreDatas.length-12):5e3)}onListRender(e,t){Co.getInstance().createYouziListItem(e,"icon","iconAnima",this.namelabLabel,mo.moreDatas[t]),this.checkSendExpsureLog(t)}checkSendExpsureLog(e){this.visible&&this.MoreGameUI.visible&&(this.mainItemHExposure[mo.moreDatas[e].appid]||(mo.sendExposureLog(mo.moreDatas[e],5),this.mainItemHExposure[mo.moreDatas[e].appid]=1))}stopMoreGameAcion(){this.stopAction=!0}starMoreGameAction(){this.moreGameListAutoScroll()}moreGameListAutoScroll(){!this.MoreGameUI.visible||this.moreGameList.length<=12||(this.stopAction=!1,this.dur=5e3*(mo.moreDatas.length-12),this.curFront&&!this.curBack?this.listTweenToEnd():!this.curFront&&this.curBack&&this.listTweenToStart())}listTweenToEnd(){var e;this.stopAction||(e=new Laya.Handler(this,this.listTweenToStart,null,!0),this.moreGameList.tweenTo(this.moreGameList.length-1,this.dur,e)),this.curFront=!0,this.curBack=!1}listTweenToStart(){var e;this.stopAction||(e=new Laya.Handler(this,this.listTweenToEnd,null,!0),this.moreGameList.tweenTo(0,this.dur,e)),this.curFront=!1,this.curBack=!0}moreGameListMouseEvent(e,t){"mousedown"!=e.type&&("mouseup"==e.type?this.isClick||(this.isClick=!0,console.log("当前选择的moreGameH索引："+t),(t=mo.moreDatas[t]).locationIndex=5,mo.clickGameYouziUIId=ho.Youzi_MoreGame,mo.startOtherGame(t,this.startOtherCall.bind(this))):e.type)}startOtherCall(){this.isClick=!1,this.starMoreGameAction()}checkExposure(){if(this.MoreGameUI.visible)for(var e=0;e<mo.moreDatas.length&&!(11<=e);e++){var t=mo.moreDatas[e];this.mainItemHExposure[t.appid]||(this.mainItemHExposure[t.appid]=1,mo.sendExposureLog(t,5))}}}),So=class{constructor(){this.YouziUiId=ho,this.vertical=!0,this.hw=0,this.gamePageCallTemp=null,this.loadSdkAltasComplete=null,this.fullUiCloseAfterShow=null,this.fullUiStateCall=null,this.tempMoreGameUIH=null}static getInstance(){return null==this.instance&&(this.instance=new So),this.instance}youziDebug(e){mo.setPropertiesValue("debug",e)}openFullAutoNavigate(e){mo.openFullNavigate(e)}fullTypeScreenShowWxBanner(e){mo.setPropertiesValue("fullTypeScreenShowWxBanner",e)}setGameNameHide(e,t){mo.setPropertiesValue(e,t)}initYouzi(e,t,i){this.loadSdkAltas(),this.getAspectRatio(),mo.init(e,t,i)}loadSdkAltas(){return this.loadSdkAltasComplete||(this.loadSdkAltasComplete=new Promise((e,t)=>{Laya.loader.load("res/atlas/youziTexture.atlas",Laya.Handler.create(this,function(){console.log("中心化图集资源读取成功"),e(null)}))})),this.loadSdkAltasComplete}getAspectRatio(){0==this.hw&&(Laya.stage.width>Laya.stage.height?(this.vertical=!1,this.hw=Laya.Browser.width/Laya.Browser.height):this.hw=Laya.Browser.height/Laya.Browser.width),mo.setPropertiesValue("aspectRatio",this.hw)}registerNavigateToMiniCall(e){mo.setPropertiesValue("navigateToMiniCall",e)}offNavigateToMimiCall(){mo.setPropertiesValue("navigateToMiniCall",null)}registerFullUiCloseAfterShow(e){uo.setProperty("fullUiCloseCall",e)}offFullUiCloseAfterShow(){uo.offFullUiClose()}offFullUiStateCall(){uo.offFullTypeUiStateCall()}registerGamePageCall(e){this.gamePageCallTemp=e}offGamePageCall(){this.gamePageCallTemp=null}createMoreGameButton(e,t,i){var o=new Laya.Button;return o.visible=!1,o.mouseEnabled=!0,o.stateNum=1,t&&(o.dataSource=1),e.addChild(o),this.loadSdkAltas().then(()=>{(i=i||{}).hasOwnProperty("btnUrl")?o.skin=i.btnUrl:o.skin="youziTexture/btn-entrance-nogift.png",o.width=i.hasOwnProperty("width")?i.width:119,o.height=i.hasOwnProperty("height")?i.height:119;var e=i.hasOwnProperty("x")?i.x:0,t=i.hasOwnProperty("y")?i.y:0;o.pos(e,t)}).catch(),o}showMoreGameUI(e){e&&e.showMoreGameUI()}createMoreGameUIH(e,t,i){i=new Go(i);return i.setMoreGameBtn(t),t&&1==t.dataSource&&t.on(Laya.Event.CLICK,this,this.showMoreGameUI,[i]),e.addChild(i),i}createMoreGameUIHToStage(e,t){return this.tempMoreGameUIH||(this.tempMoreGameUIH=new Go(t),this.tempMoreGameUIH.setAddToStage(!0),this.tempMoreGameUIH.setMoreGameBtn(e),Laya.stage.addChild(this.tempMoreGameUIH)),e&&1==e.dataSource&&e.on(Laya.Event.CLICK,this,this.showMoreGameUI,[this.tempMoreGameUIH]),this.tempMoreGameUIH}createBottomBanner(e,t,i){t=new class extends so.youzi.Youzi_BottomBannerUI{constructor(e,t){super(),this.namelabLabel="namelab",this.listItemScale={x:1,y:1},this.bannerType=1,this.bannerBottomItemExposure={},this.isOffSwitch=!1,this.uiCompleteCallCopy=null,this.uiStateCallCopy=null,this.stopAction=!1,this.curFront=!0,this.curBack=!1,this.isClick=!1,this.endCompletHandler=null,this.startCompleteHandler=null,this.dur=10,this.scaleUI=1,this.visible=!1,this.BannerBottomUI.visible=!1,this.bottomList.hScrollBarSkin="",this.isOffSwitch=e,this.designWHAdapter(),this.initCustomParams(t)}designWHAdapter(){Laya.stage.designWidth<Laya.stage.designHeight?("full"==Laya.stage.scaleMode?this.scaleUI=Laya.stage.width/720:720!=Laya.stage.designWidth&&(this.scaleUI=Laya.stage.designWidth/720),this.scale(this.scaleUI,this.scaleUI)):720!=Laya.stage.designHeight&&(this.scaleUI=Laya.stage.designHeight/720,this.scale(this.scaleUI,this.scaleUI))}initCustomParams(e){e?(this.uiStateCallCopy=e.hasOwnProperty("uiStateCall")?e.uiStateCall:null,this.x=e.hasOwnProperty("x")?e.x:Laya.stage.width/2-this.BannerBottomUI.width*this.scaleUI/2,this.y=e.hasOwnProperty("y")?e.y:Laya.stage.height-this.BannerBottomUI.height*this.scaleUI):this.pos(Laya.stage.width/2-this.BannerBottomUI.width*this.scaleUI/2,Laya.stage.height-this.BannerBottomUI.height*this.scaleUI)}setYouziPosition(e,t){this.pos(e,t)}setUICompleteCall(e){this.uiCompleteCallCopy=e}notifyUIComplete(e,t){this.uiCompleteCallCopy&&this.uiCompleteCallCopy(e,t)}offUICompleteCall(){this.uiCompleteCallCopy&&(this.uiCompleteCallCopy=null)}setUIStateCall(e){this.uiStateCallCopy=e}notifyUIState(e,t){this.uiStateCallCopy&&this.uiStateCallCopy(e,t)}offUIStateCall(){this.uiStateCallCopy&&(this.uiStateCallCopy=null)}onAwake(){mo.getDataLoaded()?this.initShow():mo._loadedCallBacks.push(this.initShow.bind(this))}initShow(){mo.dataNullReset("matrixBannerDatas"),this.closeBtn.on(Laya.Event.CLICK,this,this.hideBanner),mo.matrixBannerDatas.length<=0||(this.loadBottomList(),this.isOffSwitch||mo.addBanner(this))}loadBottomList(){mo.getBottomNameHide()&&(this.namelabLabel=null,this.listItemScale.x=1.2,this.listItemScale.y=1.2,this.bottomList.spaceX=45),mo.getBottomCloseBtnHide()&&(this.closeBtn.visible=!1),this.bottomList.array=mo.matrixBannerDatas,this.bottomList.renderHandler=new Laya.Handler(this,this.onListRender),this.bottomList.mouseHandler=new Laya.Handler(this,this.onBannerItemMouseEvent),this.bottomList.on(Laya.Event.MOUSE_UP,this,this.scrollMoveUp),this.notifyUIComplete(ho.Youzi_BottomBanner,{complete:!0}),this.dur=mo.matrixBannerDatas.length?5e3*(mo.matrixBannerDatas.length-5):5e3,this.bottomlistAutoScroll()}onListRender(e,t){Co.getInstance().createYouziListItemScale(e,"icon","iconAnima",this.namelabLabel,mo.matrixBannerDatas[t],this.listItemScale.x,this.listItemScale.y),t==this.bottomList.length-1&&1==mo.getPropertiesValue("_bottomBannerScrollType")&&this.listTweenEndForeverCall(),this.checkSendExpsureLog(t)}checkSendExpsureLog(e){this.visible&&this.BannerBottomUI.visible&&(this.bannerBottomItemExposure[mo.matrixBannerDatas[e].appid]||(mo.sendExposureLog(mo.matrixBannerDatas[e],3),this.bannerBottomItemExposure[mo.matrixBannerDatas[e].appid]=1))}onBannerItemMouseEvent(e,t){"mousedown"!=e.type&&("mouseup"==e.type?this.isClick||(this.isClick=!0,console.log("当前选择的bottombanner索引："+t),mo.clickGameYouziUIId=ho.Youzi_BottomBanner,(t=mo.matrixBannerDatas[t]).locationIndex=3,mo.startOtherGame(t,this.startOtherCall.bind(this))):e.type)}scrollMoveUp(){Laya.timer.frameOnce(300,this,this.starBottomBannerAction)}startOtherCall(e){this.isClick=!1,this.starBottomBannerAction()}stopBottomBannerAcion(){this.bottomList.scrollBar.stopScroll(),this.bottomList.scrollTo(0),this.stopAction=!0}starBottomBannerAction(){this.stopAction=!1,this.bottomlistAutoScroll()}bottomlistAutoScroll(){switch(mo.getPropertiesValue("_bottomBannerScrollType")){case 0:this.goAndBackTween();break;case 1:this.listTweenEndForever();break;default:this.goAndBackTween()}}listTweenEndForever(){!this||this.bottomList.length<=5||this.stopAction||this.bottomList.tweenTo(this.bottomList.length-1,this.dur)}listTweenEndForeverCall(){this&&Laya.timer.once(300,this,function(){this.bottomList.scrollTo(0),this.listTweenEndForever()}.bind(this))}goAndBackTween(){!this||this.bottomList.length<=5||(this.curFront&&!this.curBack?this.listTweenToEnd():!this.curFront&&this.curBack&&this.listTweenToStart())}listTweenToEnd(){this&&(this.stopAction||(this.endCompletHandler=new Laya.Handler(this,this.listTweenToStart,null,!0),this.bottomList.tweenTo(this.bottomList.length-1,this.dur,this.endCompletHandler)),this.curFront=!0,this.curBack=!1)}listTweenToStart(){this&&(this.stopAction||(this.startCompleteHandler=new Laya.Handler(this,this.listTweenToEnd,null,!0),this.bottomList.tweenTo(0,this.dur,this.startCompleteHandler)),this.curFront=!1,this.curBack=!0)}showBanner(){this&&0<mo.matrixBannerDatas.length&&(this.visible=!0,this.BannerBottomUI.visible=!0,this.notifyUIState(ho.Youzi_BottomBanner,!0),this.stopAction&&this.starBottomBannerAction())}hideBanner(){this&&(this.stopBottomBannerAcion(),this.visible=!1,this.BannerBottomUI.visible=!1,this.notifyUIState(ho.Youzi_BottomBanner,!1))}destroySelf(){this&&this.removeSelf()}}(t,i);return e.addChild(t),t}bottomBannerActionStopOrStart(e,t){t&&(e?t.stopBottomBannerAcion():t.starBottomBannerAction())}createGuessLike(e,t){t=new class extends so.youzi.Youzi_GuessLikeUI{constructor(e){super(),this.guessAnyItemExposure={},this.firstShow=!1,this.uiCompleteCallCopy=null,this.uiStateCallCopy=null,this.curFront=!0,this.curBack=!1,this.stopAction=!1,this.isClick=!1,this.endCompletHandler=null,this.startCompleteHandler=null,this.dur=5e3,this.scaleUI=1,this.visible=!1,this.guessUI.visible=!1,this.guesslist.hScrollBarSkin="",this.designWHAdapter(),this.initCustomParams(e)}designWHAdapter(){"full"==Laya.stage.scaleMode?(this.scaleUI=Laya.stage.width/720,this.scale(this.scaleUI,this.scaleUI)):720!=Laya.stage.designWidth&&(this.scaleUI=Laya.stage.designWidth/720,this.scale(this.scaleUI,this.scaleUI))}initCustomParams(e){e&&(this.x=e.hasOwnProperty("x")?e.x:0,this.y=e.hasOwnProperty("y")?e.y:0)}setUICompleteCall(e){this.uiCompleteCallCopy=e}notifyUIComplete(e,t){this.uiCompleteCallCopy&&this.uiCompleteCallCopy(e,t)}offUICompleteCall(){this.uiCompleteCallCopy&&(this.uiCompleteCallCopy=null)}setUIStateCall(e){this.uiStateCallCopy=e}notifyUIState(e,t){this.uiStateCallCopy&&this.uiStateCallCopy(e,t)}offUIStateCall(){this.uiStateCallCopy&&(this.uiStateCallCopy=null)}onAwake(){mo.getDataLoaded()?this.initShow():mo._loadedCallBacks.push(this.initShow.bind(this))}initShow(){mo.dataNullReset("matrixBannerDatas"),mo.matrixBannerDatas.length<=0||(this.guesslist.dataSource=mo.matrixBannerDatas,this.guesslist.mouseHandler=new Laya.Handler(this,this.onGuessLikeItemMouseEvent),this.guesslist.renderHandler=new Laya.Handler(this,this.onListRender),this.visible=!0,this.guessUI.visible=!0,this.notifyUIComplete(ho.Youzi_GuessLike,{complete:!0}),this.notifyUIState(ho.Youzi_GuessLike,!0),this.dur=5<mo.matrixBannerDatas.length?5e3*(mo.matrixBannerDatas.length-5):5e3,this.starGuessLikeAction())}onListRender(e,t){Co.getInstance().createYouziListItem(e,"icon","iconAnima",null,mo.matrixBannerDatas[t]),this.checkSendExpsureLog(t)}checkSendExpsureLog(e){this.visible&&this.guessUI.visible&&(this.guessAnyItemExposure[mo.matrixBannerDatas[e].appid]||(mo.sendExposureLog(mo.matrixBannerDatas[e],4),this.guessAnyItemExposure[mo.matrixBannerDatas[e].appid]=1))}stopGuessLikeAcion(){this.stopAction=!0}starGuessLikeAction(){this.guessAnylistAutoScroll()}guessAnylistAutoScroll(){!this.guessUI.visible||this.guesslist.length<=5||(this.stopAction=!1,this.curFront&&!this.curBack?this.listTweenToEnd():!this.curFront&&this.curBack&&this.listTweenToStart())}listTweenToEnd(){this&&(this.stopAction||(this.endCompletHandler=new Laya.Handler(this,this.listTweenToStart,null,!0),this.guesslist.tweenTo(this.guesslist.length-1,this.dur,this.endCompletHandler)),this.curFront=!0,this.curBack=!1)}listTweenToStart(){this&&(this.stopAction||(this.startCompleteHandler=new Laya.Handler(this,this.listTweenToEnd,null,!0),this.guesslist.tweenTo(0,this.dur,this.startCompleteHandler)),this.curFront=!1,this.curBack=!0)}onGuessLikeItemMouseEvent(e,t){"mousedown"!=e.type&&("mouseup"==e.type?this.isClick||(this.isClick=!0,console.log("当前选择的guesslike索引："+t),mo.clickGameYouziUIId=ho.Youzi_GuessLike,(t=mo.matrixBannerDatas[t]).locationIndex=4,mo.startOtherGame(t,this.startOtherCall.bind(this))):e.type)}startOtherCall(e){this.isClick=!1,this.starGuessLikeAction()}}(t);return e.addChild(t),t}createGuessLikeH(e,t){t=new class extends so.youzi.Youzi_GuessLikeHUI{constructor(e){super(),this.guessData=[],this.guessAnyItemExposure={},this.firstShow=!1,this.uiCompleteCallCopy=null,this.uiStateCallCopy=null,this.curFront=!0,this.curBack=!1,this.stopAction=!1,this.isClick=!1,this.dur=5e3,this.endCompletHandler=null,this.startCompleteHandler=null,this.dataOrder=1,this.scaleUI=1,this.guessLikeUiType=0,this.listTweenType=0,this.visible=!1,this.guessUI.visible=!1,this.guesslist.vScrollBarSkin="",this.designWHAdapter(),this.initCustomParams(e)}designWHAdapter(){mo.getIsVertical()?720!=Laya.stage.designWidth&&(this.scaleUI=Laya.stage.designWidth/720,this.scale(this.scaleUI,this.scaleUI)):720!=Laya.stage.designHeight&&(this.scaleUI=Laya.stage.designHeight/720,this.scale(this.scaleUI,this.scaleUI))}initCustomParams(e){e&&(this.x=e.hasOwnProperty("x")?e.x:0,this.y=e.hasOwnProperty("y")?e.y:0,this.dataOrder=e.hasOwnProperty("dataOrder")?e.dataOrder:1,this.guessLikeUiType=e.hasOwnProperty("guessLikeUiType")?e.guessLikeUiType:0,this.listTweenType=e.hasOwnProperty("listTweenType")?e.listTweenType:0,1==this.guessLikeUiType&&this.doubleGuessUI(e))}doubleGuessUI(e){e.hasOwnProperty("bgVisible")&&(this.guessLikeBg.visible=e.bgVisible),this.guessLikeBg.height+=55,this.title.visible=!1,this.guesslist.y-=64,this.guesslist.height+=100,this.guesslist.repeatY=4}setYouziPosition(e,t){this.pos(e,t)}setUICompleteCall(e){this.uiCompleteCallCopy=e}notifyUIComplete(e,t){this.uiCompleteCallCopy&&this.uiCompleteCallCopy(e,t)}offUICompleteCall(){this.uiCompleteCallCopy&&(this.uiCompleteCallCopy=null)}setUIStateCall(e){this.uiStateCallCopy=e}notifyUIState(e,t){this.uiStateCallCopy&&this.uiStateCallCopy(e,t)}offUIStateCall(){this.uiStateCallCopy&&(this.uiStateCallCopy=null)}onAwake(){mo.getDataLoaded()?this.initShow():mo._loadedCallBacks.push(this.initShow.bind(this))}initShow(){mo.dataNullReset("matrixBannerDatas"),mo.matrixBannerDatas.length<=0||(1==this.guessLikeUiType?(this.guessData=mo.matrixBannerDatas.slice(0),2==this.dataOrder&&this.guessData.reverse()):this.guessData=mo.matrixBannerDatas,this.guesslist.array=this.guessData,this.guesslist.renderHandler=new Laya.Handler(this,this.onListRender),this.guesslist.mouseHandler=new Laya.Handler(this,this.onGuessLikeItemMouseEvent),this.guesslist.on(Laya.Event.MOUSE_UP,this,this.scrollMoveUp),this.visible=!0,this.guessUI.visible=!0,this.notifyUIComplete(ho.Youzi_GuessLike,{complete:!0}),this.notifyUIState(ho.Youzi_GuessLike,!0),this.dur=5<this.guessData.length?5e3*(this.guessData.length-5):5e3,2!=this.guessLikeUiType&&this.starGuessLikeHAction())}onListRender(e,t){Co.getInstance().createYouziListItem(e,"icon","iconAnima",null,this.guessData[t]),t==this.guesslist.length-1&&1==this.listTweenType&&this.listTweenEndForeverCall(),this.checkSendExpsureLog(t)}checkSendExpsureLog(e){this.visible&&this.guessUI.visible&&(this.guessAnyItemExposure[this.guessData[e].appid]||(mo.sendExposureLog(this.guessData[e],4),this.guessAnyItemExposure[this.guessData[e].appid]=1))}scrollMoveUp(){this.guesslist.scrollBar.stopScroll(),Laya.timer.frameOnce(300,this,this.starGuessLikeHAction)}stopGuessLikeHAcion(){this.guesslist.scrollBar.stopScroll(),this.guesslist.scrollTo(0),this.stopAction=!0}starGuessLikeHAction(){this.stopAction=!1,this.guessAnylistHAutoScroll()}guessAnylistHAutoScroll(){0==this.listTweenType?this.goAndBackTween():1==this.listTweenType&&this.listTweenEndForever()}listTweenEndForever(){!this||this.guesslist.length<=5||this.stopAction||this.guesslist.tweenTo(this.guesslist.length-1,this.dur)}listTweenEndForeverCall(){this&&(this.guesslist.scrollTo(0),this.listTweenEndForever())}goAndBackTween(){this.guesslist.length<=5||(this.stopAction=!1,this.curFront&&!this.curBack?this.listTweenToEnd():!this.curFront&&this.curBack&&this.listTweenToStart())}listTweenToEnd(){this&&(this.stopAction||(this.endCompletHandler=new Laya.Handler(this,this.listTweenToStart,null,!0),this.guesslist.tweenTo(this.guesslist.length-this.guesslist.repeatY,this.dur,this.endCompletHandler)),this.curFront=!0,this.curBack=!1)}listTweenToStart(){this&&(this.stopAction||(this.startCompleteHandler=new Laya.Handler(this,this.listTweenToEnd,null,!0),this.guesslist.tweenTo(0,this.dur,this.startCompleteHandler)),this.curFront=!1,this.curBack=!0)}onGuessLikeItemMouseEvent(e,t){"mousedown"!=e.type&&("mouseup"==e.type?this.isClick||(this.isClick=!0,console.log("当前选择的guesslikeh索引："+t),t=this.guessData[t],this.guessLikeUiType,t.locationIndex=4,mo.clickGameYouziUIId=ho.Youzi_GuessLike,mo.startOtherGame(t,this.startOtherCall.bind(this))):e.type)}startOtherCall(e){this.isClick=!1,Laya.timer.once(1e3,this,this.starGuessLikeHAction)}}(t);return e.addChild(t),t}guessLikeListTweenStopOrStart(e,t,i){t&&(e?t.stopGuessLikeAcion():t.starGuessLikeAction()),i&&(e?i.stopGuessLikeHAcion():i.starGuessLikeHAction())}createMainPush(e,t){t=new _o(t);return e.addChild(t),t}mainPushActionStopOrStart(e,t){e?t.clearTimerLoop():t.startTimerLoop()}createMultiMainPush(e){return new class{constructor(e){this.multipleAmount=1,this.isUpdateMainPush=!1,this.multipleMainPushObj=[],this.paramsJsonArray=[],this.randomData=[],this.startTimerMulti=!0,this.paramsJsonArray=e,this.initShow()}initShow(){mo.getDataLoaded()?this.creatYouziMultipleMainPush():mo._loadedCallBacks.push(this.creatYouziMultipleMainPush.bind(this))}creatYouziMultipleMainPush(){var e=mo.getMultiMainAmount(this.paramsJsonArray.length);this.multipleAmount=e[0],this.isUpdateMainPush=e[1],this.randomData=mo.getGamesIndex(mo.mainRecDatas.length,this.multipleAmount);for(var t=0;t<this.randomData.length;t++){var i,o=this.paramsJsonArray[t];o.hasOwnProperty("parentNode")?(o.createMainPushType=2,o.mainRecData=mo.mainRecDatas[this.randomData[t]],i=new _o(o),o.parentNode.addChild(i),this.multipleMainPushObj.push(i)):console.log("多主推数组参数下标"+t+"中父节点为空")}this.startChangeTimeLoop()}startChangeTimeLoop(){if(this.startTimerMulti){this.startTimerMulti=!1,this.isUpdateMainPush&&Laya.timer.loop(5e3,this,this.updateMultipleMainPush);for(var e=0;e<this.multipleMainPushObj.length;e++)this.multipleMainPushObj[e].startTimerLoop()}}stopChangeTimeLoop(){this.isUpdateMainPush&&Laya.timer.clear(this,this.updateMultipleMainPush);for(var e=0;e<this.multipleMainPushObj.length;e++)this.multipleMainPushObj[e].clearTimerLoop();this.startTimerMulti=!0}updateMultipleMainPush(){this.randomData=mo.getGamesIndex(mo.mainRecDatas.length,this.multipleAmount);for(var e=0;e<this.multipleMainPushObj.length;e++)this.multipleMainPushObj[e].updateMainRecMultiple(mo.mainRecDatas[this.randomData[e]])}}(e)}stopOrStartMultiMainPush(e,t){t&&(e?t.stopChangeTimeLoop():t.startChangeTimeLoop())}createYouzi_WechatBanner(e,t=null,i=null,o=!1,a=!1){return new class{constructor(e,t=null,i=null,o=!1,a=!1){this.isLoadOk=!1,this.adUnitId=null,this.posType=1,this.offset={x:0,y:0},this.bannerType=2,this.isShowBanner=!1,this.isOffSwitch=!1,this.isOffSwitchSelf=!1,this.bannerAd=null,this.refreshTimer=null,this.adUnitId=e,this.posType=t||1,this.offset=i||{x:0,y:0},this.isOffSwitch=o,this.isOffSwitchSelf=a,this.initShow()}initShow(){this.isLoadOk=mo.getDataLoaded(),this.isLoadOk?this.freshShow():mo._loadedCallBacks.push(this.freshShow.bind(this))}freshShow(){this.createWXBanner(),this.isOffSwitch||(mo.addBanner(this),this._autoSwitchSelf())}createWXBanner(){var i,o,a,e,t,n,s,l;Laya.Browser.window.wx&&Laya.Browser.window.wx.createBannerAd&&(i=this,o=Laya.Browser.window.wx.getSystemInfoSync().screenWidth,a=Laya.Browser.window.wx.getSystemInfoSync().screenHeight,e=Laya.stage.designWidth,t=Laya.stage.designHeight,n=o/e*100+(a-o/e*t)/2,s=i.bannerAd,i.bannerAd=Laya.Browser.window.wx.createBannerAd({adUnitId:this.adUnitId,style:{left:this.offset.x,top:this.offset.y,width:o}}),l=!1,i.bannerAd.onResize(function(e){var t;l||(i.bannerAd.style.realHeight>n?(l=!0,t=o*n/i.bannerAd.style.realHeight,t=mo.miscClampf(t,300,9999),i.bannerAd.style.width=t,i.bannerAd.style.top=a-i.bannerAd.style.realHeight*(t/i.bannerAd.style.realWidth)+i.offset.y,i.bannerAd.style.left=(o-i.bannerAd.style.width)/2+i.offset.x):(i.bannerAd.style.top=a-i.bannerAd.style.realHeight+i.offset.y,2<a/o&&(i.bannerAd.style.top=i.bannerAd.style.top-34+i.offset.y)),2==i.posType&&(i.bannerAd.style.left=(o-i.bannerAd.style.width)/2+i.offset.x,i.bannerAd.style.top=i.offset.y,(2<a/o||2<o/a)&&(i.bannerAd.style.top+=76)))}),i.bannerAd.onLoad(function(e){s&&(s.hide(),s.destroy()),i.isShowBanner?i.bannerAd.show():i.bannerAd.hide()}),i.bannerAd.onError(function(e){console.warn("微信banner广告出错",e)}))}showBanner(){this.isShowBanner=!0,this.bannerAd&&this.bannerAd.show()}hideBanner(){this.isShowBanner=!1,this.bannerAd&&this.bannerAd.hide()}destroySelf(){this.bannerAd&&(this.bannerAd.destroy(),this.bannerAd=null),this.refreshTimer&&(clearInterval(this.refreshTimer),this.refreshTimer=null),this.isShowBanner=!1}switchBannerNow(){this.refreshTimer&&(clearInterval(this.refreshTimer),this.refreshTimer=null),this.createWXBanner(),this._autoSwitchSelf()}_autoSwitchSelf(){var e;this.isOffSwitchSelf||((e=this).refreshTimer=setInterval(function(){e.createWXBanner()},1e3*mo._bannerCreateInterval))}}(e,t,i,o,a)}},yo=So;yo.instance=null;var wo,vo=class extends te{constructor(){super(...arguments),this.bannerPosId="b7521f53952343a0bc092f618e4620bb",this.rewardVideoId="bbd739c358ae45b592a07dc19efe7fcb",this.insertAdId="dd05e7c2bdfa4b12804a307e6dcf02d1",this.nativeId="897f8f3b7a644271a2e274335885c1e6",this.nativeImage="44e970d4388f4dbaacdc5fad5e879a98",this.windowWidth=2e3,this.windowHeight=2e3,this._channel="",this.isFirstCeateVideoAd=!0,this.nativeAdProbability=.2,this.nativeAdsLimit=4,this.nativeAdList1=[],this.nativeAdList2=[],this.lastShowInsertAd=(new Date).getTime(),this.boxPortalAd=null,this.BlockCityList=["广州","深圳"],this.bannerisShow=!1,this.lastload=0}Init(){try{super.Init();vo.Instance=this,console.log("vivoplatform init"),T.Vivo.onHide(()=>{console.log("onhide")}),this.NativeAd1()}catch(e){console.error("vivo init error:",e)}}Login(){try{let e=window.qg;e.leuok.init({gameId:2455,multiRegion:!1,bilog:!0,log:!0},function(){console.warn("Vivo乐游sdk初始化成功")}),window.Getleuok=e.leuok,j.LeYouSdkIsOn()&&z.Instance.LeYou_SDKLoad()}catch(e){console.error("Vivo登陆报错",e)}}showBoxPortalAd(){T.Vivo.createBoxPortalAd?(console.warn("9宫格，",T.Vivo),this.boxPortalAd=T.Vivo.createBoxPortalAd({posId:"38fdf81cebf34f7cb6d963c85e75196f",image:"/AdBtn.png",marginTop:200}),this.boxPortalAd.onError(function(e){console.log("盒子九宫格广告加载失败",e)}),this.boxPortalAd.onClose(function(){console.log("close"),this.boxPortalAd.isDestroyed||this.boxPortalAd.show()}),this.boxPortalAd.show().then(function(){console.log("show success")})):console.log("暂不支持互推盒子相关 API")}closeBoxPortalAd(){null!=this.boxPortalAd&&(this.boxPortalAd.isDestroyed=!0,this.boxPortalAd.destroy())}ShowInterstitialAd(){let e=this,t=(console.log("ShowInterstitialAd"),T.Vivo.createInterstitialAd({posId:e.getInterId()}).show());t&&t.then(()=>{console.log("插屏广告展示成功:"+e.getInterId())}).catch(e=>{console.log("interstirial err:",JSON.stringify(e))})}isHasShortcutInstalled(){console.warn("判断是否添加桌面图标"),T.Vivo.hasShortcutInstalled({success:function(e){console.warn("判断图标未存在时，创建图标"),0==e&&T.Vivo.installShortcut({success:function(e){console.warn("执行用户创建图标奖励")},fail:function(e){console.warn("取消用户创建图标")},complete:function(){console.warn("完成用户创建图标")}})},fail:function(e){},complete:function(){}})}NativeAd1(){T.IS_VIVO_PLATFORM&&(this.nativeAd1=T.Vivo.createNativeAd({posId:this.nativeId}),this.resetLoad1())}NativeAd2(){T.IS_VIVO_PLATFORM&&(this.nativeAd2=T.Vivo.createNativeAd({posId:this.nativeImage}),this.resetLoad2())}resetLoad2(t=null){let i=this;this.nativeAd2.offLoad(),this.nativeAd2.load(),this.nativeAd2.onLoad(function(e){i.nativeAdList2=e.adList,console.log("原生插屏广告加载成功2",i.nativeAdList2),t&&t()}),this.nativeAd2.onError(function(e){console.log("原生插屏广告加载失败2",e)})}resetLoad1(t=null){let i=this;this.nativeAd1.offLoad(),this.nativeAd1.load(),this.nativeAd1.onLoad(function(e){i.nativeAdList1=e.adList,console.log("原生广告加载成功1",i.nativeAdList1),t&&t()}),this.nativeAd1.onError(function(e){console.log("原生广告加载失败1",e)})}ReportAdShow2(e){this.nativeAd2&&(this.nativeAd2.reportAdShow({adId:e}),console.log("ReportAdShow2 后台上报曝光",e))}ReportAdShow1(e){this.nativeAd1&&(this.nativeAd1.reportAdShow({adId:e}),console.log("ReportAdShow1 后台上报曝光",e))}ReportAdClick2(e){this.nativeAd2&&(console.log("ReportAdClick1 点击原生广告上报",e),this.nativeAd2.reportAdClick({adId:e}),this.nativeAd2.load())}ReportAdClick1(e){this.nativeAd1&&(console.log("ReportAdClick1 点击原生广告上报",e),this.nativeAd1.reportAdClick({adId:e}))}LoadConfig(){let a=this;qt.User_GetConfig("vivo_ndskqa",this,function(e){var t=e.data.Config,i=t.KeyStr,o=e.data.Base.Area;console.warn("vivo GetIosConfig success:",t,i),i==k.vivoAuditKey&&((e=t.GameAuditSwitch)&&K.DataModule().GetLocal().platform.Parse(e),console.warn("vivo Use GameAuditSwitch:",K.DataModule().GetPlatform().PlatformData)),i==k.vivoLineKey&&(e=t.GameLineSwitch,console.warn("vivo Use config2:",e),e&&K.DataModule().GetLocal().platform.Parse(e),console.warn("vivo Use GameLineSwitch:",K.DataModule().GetPlatform().PlatformData)),K.DataModule().GetPlatform().PlatformData.UseBanner&&K.PlatformModule().UseBanner();for(let e=0;e<a.BlockCityList.length;e++)a.BlockCityList[e]==o[2]&&(K.DataModule().GetPlatform().PlatformData.SkipBtnDelayTime=!1,K.DataModule().GetPlatform().PlatformData.SkipBtnDelayTimes=0,K.DataModule().GetPlatform().PlatformData.NativeBtnClickAdProBability=0,console.warn("oppo 触发城市屏蔽"));K.PlatformModule().isLoadConfigOk=!0},function(e){console.warn("vivo GetIosConfig Error:"+e)})}getBannerId(){return console.log("getBannerId:"+this.bannerPosId),this.bannerPosId}getVideoId(){return console.log("getVideoId:"+this.rewardVideoId),this.rewardVideoId}getInterId(){return console.log("getInterId:"+this.insertAdId),this.insertAdId}initRewardAd(){let t=this,e=this.getVideoId();console.log("iniReward:"+e),t.videoAd=T.Vivo.createRewardedVideoAd({posId:e}),t.videoAd.offLoad(),t.videoAd.onLoad(()=>{let e=t.videoAd.show();j.HideShortWait(),console.log("video onload"),e&&e.then(()=>{console.log("video show success:"+t.getVideoId()),K.AudioModule().StopMusic()}).catch(e=>{console.log("video show error:"+JSON.stringify(e))})}),t.videoAd.offClose(),t.videoAd.onClose(e=>{K.AudioModule().PlayMusicAgain(),e.isEnded?t.watchFun&&(t.watchFun.call(t),console.warn("onClose,激励视频广告完成，发放奖励")):(console.warn("onClose,激励视频广告取消关闭，不发放奖励"),t.failWatchFun&&t.failWatchFun.call(t))}),t.videoAd.offError(),t.videoAd.onError(e=>{console.log("rewardAd err:",JSON.stringify(e)),j.TopUI_TipShow("暂无视频广告,请稍后再试"),j.HideShortWait(),t.failWatchFun&&t.failWatchFun.call(this)})}showRewardAd(){if(this.isFirstCeateVideoAd)this.isFirstCeateVideoAd=!1,this.initRewardAd(),console.log("first create");else{let e=this.videoAd.load();console.log("vidoe load"),e&&e.catch(e=>{console.log("激励广告load失败"+JSON.stringify(e))})}}WatchVideo(e,t,i){console.error("vivo WatchVideo"),K.DataModule().GetPlatform().PlatformData.UseVideo?(this.showRewardAd(),this.watchFun=e,this.failWatchFun=i,j.ShowShortWait()):j.TopUI_TipShow("暂无视频广告,请稍后再试")}GetConfig(){return K.DataModule()?K.DataModule().GetLocal().platform.PlatformData:null}BannerAdHide(){console.log("BannerAdHide"),this.bannerAd&&this.bannerAd.hide(),this.bannerisShow=!1}BannerAdShow(){let t=this;if(console.log("BannerIsShow:"+this.bannerisShow),!this.bannerisShow){this.bannerInit();let e=this.bannerAd&&this.bannerAd.show();console.log("adshow:"+JSON.stringify(e)),e&&e.then(()=>{console.log("banner广告展示成功"),t.bannerisShow=!0}).catch(e=>{console.log("banner show err:",JSON.stringify(e)),t.bannerisShow=!1})}}bannerInit(){let t=this;console.log("bannerInit"),t.bannerAd&&t.bannerAd.destroy(),t.bannerAd=T.Vivo.createBannerAd({posId:t.getBannerId(),style:{}}),t.bannerAd.offError(),t.bannerAd.onError(function(e){t.bannerisShow=!1,console.error("bannerAd err:",JSON.stringify(e),e.errCode,e.errMsg),e.errCode}),t.bannerAd.offLoad(),t.bannerAd.onLoad(function(e){console.log("onload:"+JSON.stringify(e))}),t.bannerAd.offClose(),t.bannerAd.onClose(function(){console.log("banner 被关闭,重新创建"),t.bannerisShow=!1})}VibrateShort(){T.Vivo.vibrateShort()}VibrateLong(){T.Vivo.vibrateLong()}},Do=class extends te{constructor(){super(...arguments),this.bannerPosId="289700",this.rewardVideoId="379371",this.insertAdId="166772",this.nativeAdId1="379381",this.lastShowInsertAd=(new Date).getTime(),this.bannerIsHide=!0,this.bannerHideType=wo.none,this.isShowBannerWhenInsertAdClose=!1,this.nativeAdList1=[],this.windowWidth=2e3,this.windowHeight=2e3,this.channelId="",this.platformData=new ee,this.BlockCityList=["广州","深圳"],this.adShowTimes=0}Init(){super.Init();let t=this;Do.Instance=this,console.log("oppo init"),T.Oppo.setKeepScreenOn({keepScreenOn:!0,success:function(e){},fail:function(){},complete:function(){}}),null==this.lanuchData&&(console.log("lanuchData:"+this.lanuchData),this.lanuchData=T.Oppo.getLaunchOptionsSync(),console.log("lanuchData1:"+this.lanuchData)),this.lanuchData&&this.lanuchData.query&&null!=this.lanuchData.query.krq_ssccc&&(this.lanuchData.query.krq_ssccc,this.channelId=""),this.bannerAd=T.Oppo.createBannerAd({posId:t.bannerPosId}),this.bannerAd.onError(function(e){console.warn("banner err:"+e.code+" errMsg:"+e.msg)}),this.bannerAd.onShow(function(e){console.warn("banner show ok:"+e),t.bannerIsHide=!1}),this.bannerAd.onLoad(function(){console.warn("banner 广告加载成功")}),this.bannerAd.onHide(function(e){t.bannerIsHide=!0,console.warn("banner 广告隐藏",e,t.bannerHideType),t.bannerHideType!=wo.insertAdShow&&t.bannerHideType!=wo.changeScene&&K.DataModule().GetUser().setBannerCloseTimesToday(),t.bannerHideType=wo.none}),this.videoAd=T.Oppo.createRewardedVideoAd({posId:t.rewardVideoId}),this.videoAd.onLoad(function(e){console.error("激励视频加载成功"),j.HideShortWait(),t.videoAd.show()}),this.videoAd.onError(function(e){j.TopUI_TipShow("暂无视频广告,请稍后再试"),console.warn("onError",e,e.code,e.msg,e.errCode,e.errMsg),t.failWatchFun&&t.failWatchFun.call(this),console.error("loadVIDEOAd1 err:"+e),Laya.timer.once(2e3,t,function(){j.HideShortWait()})}),this.videoAd.onVideoStart(function(){console.warn("激励视频 开始播放")}),this.videoAd.onClose(e=>{e.isEnded?t.watchFun&&(t.watchFun.call(this),console.warn("onClose,激励视频广告完成，发放奖励")):(console.warn("onClose,激励视频广告取消关闭，不发放奖励"),t.failWatchFun&&t.failWatchFun.call(this))}),Laya.timer.once(3e3,this,function(){t.NativeAd1()}),this.GetSystemInfo(),T.Oppo.onShow(this.OnShow),T.Oppo.onHide(this.OnHide),setInterval(function(){var e;t.bannerIsHide||(e=K.UIModule().GetNowTopUIName(),0==K.DataModule().GetLocal().platform.GetBannerType(e)&&t.BannerAdHide())},100),t.createGamePortalAd()}GetChanleId(){return this.channelId}OnShow(){}Login(){try{console.log("oppo开始登陆"),T.Oppo.login({success:function(e){JSON.stringify(e.data);let t=e.data.token,i=window.qg;console.warn("oppo登录成功",i),i.leuok.init({gameId:2455,multiRegion:!1,openKey:t,bilog:!0,log:!0},function(){console.warn("oppo乐游sdk初始化成功")}),window.Getleuok=i.leuok,j.LeYouSdkIsOn()&&z.Instance.LeYou_SDKLoad()},fail:function(e){console.error("oppo登陆失败",JSON.stringify(e))}})}catch(e){console.error("oppo登陆报错",e)}}createGamePortalAd(){1076<=T.Oppo.getSystemInfoSync().platformVersionCode?(this.gamePortalAd=T.Oppo.createGamePortalAd({adUnitId:"379392"}),this.loadGameProtalAd()):console.log("快应用平台版本号低于1076，暂不支持互推盒子相关 API")}loadGameProtalAd(){let e=this;this.gamePortalAd.load().then(function(){console.log("load success"),e.gamePortalAd1=e.gamePortalAd}).catch(function(e){console.log("load fail with:"+e.errCode+","+e.errMsg)})}showGamePortalAd(e){this.gamePortalAd1&&this.gamePortalAd1.show().then(function(){console.log("show success"),e&&e()}).catch(function(e){console.log("show fail with:"+e.errCode+","+e.errMsg)}),this.loadGameProtalAd()}LoadConfig(){let n=this;qt.User_GetConfig("oppo_ndskqa",this,function(e){var t=e.data.Config,i=t.KeyStr,o=e.data.Base,a=o.Area;console.warn("oppo GetIosConfig success:",t,i,e,o,a),i==k.oppoAuditKey&&((e=t.GameAuditSwitch)&&K.DataModule().GetLocal().platform.Parse(e),console.warn("oppo Use GameAuditSwitch:",K.DataModule().GetPlatform().PlatformData)),i==k.oppoLineKey&&(o=t.GameLineSwitch,console.warn("Use config2:",o),o&&K.DataModule().GetLocal().platform.Parse(o),console.warn("oppo Use GameLineSwitch:",K.DataModule().GetPlatform().PlatformData)),K.DataModule().GetPlatform().PlatformData.UseBanner&&K.PlatformModule().UseBanner();for(let e=0;e<n.BlockCityList.length;e++)n.BlockCityList[e]==a[2]&&(K.DataModule().GetPlatform().PlatformData.SkipBtnDelayTime=!1,K.DataModule().GetPlatform().PlatformData.SkipBtnDelayTimes=0,K.DataModule().GetPlatform().PlatformData.NativeBtnClickAdProBability=0,K.DataModule().GetPlatform().PlatformData.NativeBtnLookText=!1,console.warn("oppo 触发城市屏蔽"));z.Instance.leYouAllow_oppo&&(K.DataModule().GetPlatform().PlatformData.SkipBtnDelayTime=!1,K.DataModule().GetPlatform().PlatformData.SkipBtnDelayTimes=0,K.DataModule().GetPlatform().PlatformData.NativeBtnClickAdProBability=0,K.DataModule().GetPlatform().PlatformData.NativeBtnLookText=!1,K.PlatformModule().PlatformSettingData().NativeIsShow&&(K.PlatformModule().PlatformSettingData().NativeIsShow=!1,Laya.timer.once(6e4,this,function(){K.PlatformModule().PlatformSettingData().NativeIsShow=!0}))),K.PlatformModule().isLoadConfigOk=!0},function(e){console.warn("oppo GetIosConfig Error:"+e)})}NativeAd1(){this.nativeAd1=T.Oppo.createNativeAd({adUnitId:this.nativeAdId1}),console.log("加载原生插屏广告1",this.nativeAd1),this.resetLoad1()}resetLoad1(t=null){let i=this;this.nativeAd1.offLoad(),this.nativeAd1.load(),this.nativeAd1.onLoad(function(e){i.nativeAdList1=e.adList,console.log("原生插屏广告加载成功1",i.nativeAdList1),t&&t()}),this.nativeAd1.onError(function(e){console.log("原生插屏广告加载失败1",e)})}ReportAdShow1(e){var t;this.nativeAd1&&(t=K.DataModule().GetPlatform().PlatformData.ShowNavigateAdRatio,this.adShowTimes>=t?(this.adShowTimes=0,console.log("ReportAdShow1 oppo上报曝光",e),this.nativeAd1.reportAdShow({adId:e})):this.adShowTimes+=1,console.log("ReportAdShow1 后台上报曝光",e))}ReportAdClick1(e){this.nativeAd1&&(console.log("ReportAdClick1 点击原生广告上报",e),this.nativeAd1.reportAdClick({adId:e}))}OnHide(){}ShareBase(e,t){j.TopUI_TipShow("视频加载失败，请稍后重试！")}GetSystemInfo(){let t=this;T.Oppo.getSystemInfo({success:function(e){b.Log("设备信息",e),t.windowWidth=e.windowWidth,t.windowHeight=e.windowHeight,t.system=e.system,t.platformData.system=t.system,t.platformData.screenRatio=t.windowHeight/t.windowWidth,b.Warn("屏幕比例",t.platformData.screenRatio,t.system)},fail:function(){},complete:function(){}})}static setLoadingProgress(e){T.Oppo.setLoadingProgress({progress:e})}static loadingComplete(){T.Oppo.loadingComplete({success:function(){},fail:function(){console.error("loading fail")},complete:function(e){}})}BannerAdShow(e=0){var t;z.Instance.leYouAllow_oppo&&A.GetLeftTime()<6e4||(t=K.DataModule().GetUser().getBannerCloseTimesToday(),console.warn("oppo banner show,times:"+t),t<5&&this.bannerAd.show())}BannerAdHide(){this.bannerIsHide||(this.bannerHideType=wo.changeScene,this.bannerAd.hide())}isHasShortcutInstalled(){T.Oppo.hasShortcutInstalled({success:function(e){0==e&&T.Oppo.installShortcut({success:function(e){},fail:function(e){},complete:function(){}})},fail:function(e){},complete:function(){}})}GetConfig(){return K.DataModule()?K.DataModule().GetLocal().platform.PlatformData:null}WatchVideo(e,t,i,o){this.videoAd.load(),this.watchFun=e,this.failWatchFun=o,j.ShowShortWait()}VibrateShort(){}VibrateLong(){T.Oppo.vibrateLong()}},Uo=((G=wo=wo||{}).changeScene="changeScene",G.insertAdShow="insertAdShow",G.clickClose="clickClose",G.none="none",class extends ${constructor(){super(...arguments),this.List=[],this.nowOpenIndex=0,this.A_showTime=3e3,this.isShare=!1,this.isHide=!1,this.isHideTime=0,this.boxTime=0}Load(){let e=this;null==this.view&&(this.view=this.CreatFGUIViewByView(eo.createInstance()),this.AllOnClick(),this.getCoinEffectUi=new io,this.getCoinEffectUi.Init(this.view),this.LoadImage(),T.IS_WECHAT_PLATFORM&&K.DataModule().GetLocal().platform.PlatformData.HouseAd&&(yo.getInstance().createMainPush(this.view.m_youZiAdPos1.displayObject),yo.getInstance().createMainPush(this.view.m_youZiAdPos2.displayObject)),k.Platform!=T.OPPO&&k.Platform!=T.VIVO||(j.ShowNativeAd(this.view.m_OppoLookBtn,this.view.m_OppoBannerAdBtn,null,null),this.view.m_YLPlatform.setSelectedPage("Oppo"))),e.view.m_btn_AddKey.alpha=0,e.view.m_btn_not.alpha=0,e.view.m_btn_AddKey.touchable=!1,e.view.m_btn_not.touchable=!1,k.Platform!=T.OPPO&&k.Platform!=T.VIVO||(e.view.m_OppoLookBtn.touchable=!1,e.view.m_OppoLookBtn.alpha=0),Laya.timer.once(500,this,function(){K.AudioModule().PlayOnce(x.GetSound2("LevelUp")),K.AudioModule().PlayOnce(x.GetSound2("MergeNew"))}),Laya.timer.once(this.A_showTime-500,this,function(){e.view&&e.view.m_A_show.play()}),Laya.timer.once(this.A_showTime+2e3,this,function(){e.view&&e.view.m_t1.play(null,-1)}),Laya.timer.once(this.A_showTime,this,function(){e.view&&(e.view.m_A_statr.visible=!1,e.view.m_A_s2.visible=!0,e.view.m_btn_AddKey.alpha=1,e.view.m_btn_not.alpha=1,e.view.m_btn_AddKey.touchable=!0,e.view.m_btn_not.touchable=!0,k.Platform!=T.OPPO&&k.Platform!=T.VIVO||(e.view.m_OppoLookBtn.touchable=!0,e.view.m_OppoLookBtn.alpha=1),e.ShowAddCoin(new Laya.Vector2(e.view.m_A_node.x,e.view.m_A_node.y),3,!1))}),k.Platform==T.TT&&(this.view.m_YLPlatform.setSelectedPage("TT"),this.view.m_btn_not.m_c1.setSelectedIndex(1)),this.SetLoadInfo()}setCaLL(e){this.hideFun=e}test(t){if(k.Platform==T.VIVO||k.Platform==T.OPPO){if(K.DataModule().GetPlatform().PlatformData.NativeIsShow){let e=[];k.Platform==T.OPPO&&(e=Do.Instance.nativeAdList1),k.Platform==T.VIVO&&(e=vo.Instance.nativeAdList1),t&&0<e.length&&(this.view.m_OppoLookBtn.visible=!0)}t||(this.view.m_OppoLookBtn.visible=!1)}}ShowAddCoin(t,i=3,o=!0){if(this.view){K.AudioModule().OptimizePlayOnce(x.GetSound2("Purchase")),this.getCoinEffectUi.ShowEffect("ui://InGameUI/common icon_key_gold",t,new Laya.Vector2(this.view.m_n38.x,this.view.m_n38.y),i);let e=this;o&&Laya.timer.once(1e3,this,function(){try{e.view.m_t3.play(null,1),e.RefreshKey()}catch(e){}})}}LoadImage(){this.view.m_btn_not.m_text_info.text=K.DataModule().GetLz().GetText("GridChestUI_text1")}IsShareOrVideo(){this.isShare=z.Instance.GetShareStrategy(sC.key_treasure),this.isShare?j.IsShare(this.view.m_btn_AddKey):this.isShare=j.IsVideoAndShare(this.view.m_btn_AddKey)}Video_Call(){let e=K.UIModule().GetUI(Uo.UIName),t=K.DataModule().GetUser().GetUserItemData(Z.GridKey+"_"+Z.GridKey+"_3");K.DataModule().GetUser().GetItem([t],at.GridKey),e.ShowAddCoin(new Laya.Vector2(e.view.m_btn_AddKey.x,e.view.m_btn_AddKey.y)),z.Instance.LW_StatisticsEvent(8010,"",1),e.view.m_btn_not.visible=!1,e.view.m_btn_AddKey.visible=!1,e.view.m_n34.visible=!0,k.Platform!=T.OPPO&&k.Platform!=T.VIVO||(e.view.m_OppoLookBtn.visible=!1),e.test(!1)}AllOnClick(){this.view.m_btn_AddKey.onClick(this,this.m_btn_AddKey),this.view.m_btn_not.onClick(this,this.m_btn_not)}m_btn_AddKey(){let e=g.addGridBox,t=K.UIModule().GetUI(Uo.UIName),i=sC.key_treasure;t.isShare?j.GetRewardBtnFun(1,function(){z.Instance.DayShareStrategy_Add(i,!0),t.Video_Call()},e):j.GetRewardBtnFun(0,function(){z.Instance.DayShareStrategy_Add(i,!1),t.Video_Call()},e,t.view.m_btn_AddKey)}m_btn_not(){for(let t=0;t<9;t++){let e=this.view.m_list.getChildAt(t);e.touchable&&(this.On_Item(e,!1),e.m_T_flip.play())}this.view.m_btn_not.visible=!1,this.test(!1),this.view.m_btn_AddKey.visible=!1,Laya.timer.once(2e3,this,function(){z.Instance.LW_StatisticsEvent(8010,"",0),K.UIModule().HideUI(Uo.UIName)})}SetLoadInfo(){this.IsShareOrVideo(),this.isHide=!1,this.isHideTime=0,this.List=[],this.nowOpenIndex=0,this.boxTime=-3;var t,e,i=K.DataModule().GetLocal().lottery.GetChest("Chest_1"),o=K.DataModule().GetLocal().lottery.GetChest("Chest_2"),a=K.DataModule().GetLocal().lottery.GetChest("Chest_Piece");for(let e=0;e<i.length;e++)this.List.push(i[e]);for(let e=0;e<o.length;e++)""==o[e]?this.List.push("Diamond_Diamond_"+f.GetF1_F2RandomValue(10,40)):this.List.push(o[e]);for(let e=0;e<a.length;e++)""==a[e]?this.List.push("Diamond_Diamond_"+f.GetF1_F2RandomValue(10,40)):this.List.push(a[e]);for(let e=0;e<this.List.length;e++)-1!=this.List[e].indexOf("Diamond_Diamond_")?(t=this.List[e].split("_"),this.List[e]="Diamond_Diamond_"+Math.ceil(.5*Number(t[t.length-1]))):-1!=this.List[e].indexOf("Coin_Coin_")&&(t=this.List[e].split("_"),this.List[e]="Coin_Coin_"+Math.ceil(.5*Number(t[t.length-1])));this.List=f.SetRandomList(this.List);let n=[],s=K.DataModule().GetLocal().gameRule.GetGridChest_BigPrize().F5;if(W.Grid_Hero_DarkWitch&&(W.Grid_Hero_DarkWitch=!1,s="Hero_DarkWitch"),T.ProjectSubCode){s="WeaponSkin_HammerofThor,HeroPiece_Assassin7,Hero_MonkeyKing,Hero_DarkWitch,Hero_Troll,WeaponSkin_GuGuChicken,WeaponSkin_SpearofBuLu";let t=f.GetF1_F2RandomValue(4,6),i="",o=s.split(",");for(let e=0;e<o.length;e++)i+=0!=e?","+o[e]+"_"+t:o[e]+"_"+t;s=i,console.log("传趣奖励",i)}if(0==K.DataModule().GetPlatform().PlatformData.ShowHeroRes){let t=s.split(",");for(let e=0;e<t.length;e++)-1==t[e].indexOf("Hero_Assassin7")&&n.push(t[e])}else n=s.split(",");let l=j.GetItemDataAndIsShowBox("",n,3),r=[];for(let e=0;e<l.length;e++)K.DataModule().GetUser().ItemData_IsMax(l[e])||r.push(l[e]);r.length<1?(e=K.DataModule().GetLocal().gameRule.GetGridChest_BigPrize().F1,e=j.GetItemDataAndIsShowBox("",[Z.Diamond+"_"+e],3)[0],this.BigData=e):this.BigData=r[f.GetF1_F2RandomValue(0,r.length-1)];let h=K.DataModule().GetLocal().gameRule.GetGridChest_Probability(),m=!1;for(let e=0;e<this.List.length;e++)if(e<=2){if(f.GetRandomValue(h.F1)){this.List[e]="big",m=!0;break}}else if(e<=5&&f.GetRandomValue(h.F2)){this.List[e]="big",m=!0;break}m||(this.List[f.GetF1_F2RandomValue(6,8)]="big"),this.SetBigRewardItem(),this.List_Refresh(),this.RefreshKey()}SetBigRewardItem(){var e;j.FreshRewardItem(this.view.m_mask.m_rewardCom,this.BigData,!1),this.view.m_mask.m_rewardCom.m_Count.visible=!1,this.BigData.type==Z.Diamond?(e=K.DataModule().GetLocal().gameRule.GetGridChest_BigPrize().F1,this.view.m_text_bigReward.text=this.view.m_mask.m_rewardCom.m_ItemName.text+"x"+e):this.view.m_text_bigReward.text=this.view.m_mask.m_rewardCom.m_ItemName.text,this.view.m_mask.m_rewardCom.m_gear.m_rare_bg.visible=!1}List_Refresh(){this.view.m_list.itemRenderer=Laya.Handler.create(this,this.onRenderItem,null,!1),this.view.m_list.numItems=9,this.view.m_list.on(fairygui.Events.CLICK_ITEM,this,this.On_Item)}onRenderItem(e,t){t.touchable=!1,t.m_t1.play(null,1,this.A_showTime/1e3+1+.07*e),Laya.timer.once(this.A_showTime/1e3+1+.07*e*1e3,this,function(){t&&(t.touchable=!0)}),t.m_loadIcon.url=x.GetIcon("box_Chest_4")}playBoxAnimaion(){let i=0;for(let t=0;t<9;t++){let e=this.view.m_list.getChildAt(t);e&&e.touchable&&(i++,e.m_t2.play(null,1,.15*i))}}On_Item(t,i=!0){this.view.m_list.getChildIndex(t);let e=K.DataModule().GetUser().GetItemByTypeAndId(Z.GridKey,Z.GridKey),o=this.List[this.nowOpenIndex],a=0;if((a=e?e.count:a)<=0&&i)j.TopUI_TipShow(K.DataModule().GetLz().GetText("GridChestUI_text2"));else{if(this.nowOpenIndex++,i&&--e.count,"big"==o){if(i){K.DataModule().GetUser().GetData();let e=K.DataModule().GetLocal().gameRule.GetGridChest_SmallPrize();if(f.GetRandomValue(e.F1)){var n=e.F5.split(","),n=K.DataModule().GetUser().ItemData_IsMax_Str(n);let t=j.GetItemDataAndIsShowBox("",n,3),i=[];for(let e=0;e<t.length;e++)K.DataModule().GetUser().ItemData_IsMax(t[e])||i.push(t[e]);this.BigData=i[f.GetF1_F2RandomValue(0,i.length-1)]}j.ShowGetReward([this.BigData],"box_Chest_4",!1,"",function(){t.m_T_flip.play()}),K.DataModule().GetUser().GetItem([this.BigData],"")}j.FreshRewardItem(t.m_rewardItem,this.BigData,!1),t.m_rewardItem.m_effice_fluxes.visible=!0}else{let e=3;i&&(e=0);n=j.GetItemDataAndIsShowBox("",[o],e,"box_Chest_4",!1,function(){t.m_T_flip.play()});j.FreshRewardItem(t.m_rewardItem,n[0],!1)}t.m_rewardItem.visible=!0,i&&(t.m_tick.visible=!0),t.touchable=!1,i&&this.RefreshKey()}}RefreshKey(){this.IsShareOrVideo();var e=K.DataModule().GetUser().GetItemByTypeAndId(Z.GridKey,Z.GridKey);this.view.m_text_nowKey.text="x"+e.count;let t=!1;e.count<1&&(t=!0,9!=this.nowOpenIndex&&no.Statistics_T0R(g.addGridBox)),this.view.m_btn_not.visible=t,this.test(t),this.view.m_btn_AddKey.visible=t,this.view.m_n34.visible=!t,9==this.nowOpenIndex&&(this.isHide=!0,this.test(!1),this.view.m_btn_not.visible=!1,this.view.m_btn_AddKey.visible=!1,this.view.m_n34.visible=!1)}openBox(){}onUpdate(){if(this.view){if(this.boxTime+=A.TimeDeltaNoScale,3<=this.boxTime){this.boxTime=0;try{this.playBoxAnimaion()}catch(e){}}this.isHide&&K.UIModule().GetNowTopUIName()==Uo.UIName&&(this.isHideTime+=A.TimeDeltaNoScale,3<=this.isHideTime&&(this.isHideTime=0,this.isHide=!1,K.UIModule().HideUI(Uo.UIName)))}}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null)}Show(){super.Show(),this.Load()}SetHideInfo(){this.getCoinEffectUi&&this.getCoinEffectUi.Dispose(),this.hideFun&&(this.hideFun.call(this),this.hideFun=null);let e=K.UIModule().GetUI(Zg.UIName);e&&e.isShowInterstitialAd()}Hide(){this.SetHideInfo(),super.Hide(),this.UnLoad()}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(Uo);return e.name=Uo.UIName,t.uiName=Uo.UIName,t}}),Lo=Uo,Bo=(Lo.UIName="GridChestUI",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","OpenHongBaoUI")}onConstruct(){this.m_c_type=this.getControllerAt(0),this.m_bg=this.getChildAt(0),this.m_bg2=this.getChildAt(1),this.m_loadBg=this.getChildAt(2),this.m_bar=this.getChildAt(3),this.m_text_time=this.getChildAt(4),this.m_n17=this.getChildAt(5),this.m_CloseBtn=this.getChildAt(6),this.m_getBtn=this.getChildAt(7),this.m_Btn_click=this.getChildAt(8),this.m_n21=this.getChildAt(9),this.m_n20=this.getChildAt(10),this.m_n13=this.getChildAt(11)}}),bo=(Bo.URL="ui://lcl1uligi4a43y3bo",class extends ${constructor(){super(...arguments),this.isClick=!0,this.nowTime=10,this.nowBar=0,this.minusCD=.06}Load(){null==this.view&&(this.view=this.CreatFGUIViewByView(Bo.createInstance()),this.AllOnClick(),this.LoadImage(),K.AudioModule().PlayOnce(x.GetSound2("Special"))),this.SetLoadInfo()}LoadImage(){"EN"==k.language?this.view.m_loadBg.url=x.GetIcon2("GetHongBao_EN"):this.view.m_loadBg.url=x.GetIcon("GetHongBao")}AllOnClick(){let e=g.openHongBao;this.view.m_getBtn.onClick(this,function(){j.GetRewardBtnFun(0,function(){var e=K.DataModule().GetLocal().lottery.GetChest("2021YearRedPacketsDrop"),e=K.DataModule().GetUser().GetUserItemDataList(e);K.DataModule().GetUser().GetItem(e,Z.InGameHongBao),j.ShowGetReward(e,"",!0),K.UIModule().HideUI(bo.UIName)},e)}),this.view.m_Btn_click.onClick(this,this.m_Btn_click),this.view.m_CloseBtn.onClick(this,this.onCloseBtn)}onCloseBtn(){K.UIModule().HideUI(bo.UIName)}onUpdate(){this.view&&this.isClick&&(this.minusCD+=A.TimeDeltaNoScale,.06<=this.minusCD&&.01<=this.nowBar&&(this.nowBar-=.003,this.SetBar()),this.nowTime-=A.TimeDeltaNoScale,this.SetTimeText(),this.nowTime<=0)&&this.onCloseBtn()}SetTimeText(){this.view.m_text_time.text=Math.floor(this.nowTime)+"s"}m_Btn_click(){var e;this.nowBar<.7?(e=f.GetF1_F2RandomValue(.08,.14,""),this.nowBar+=e):(e=f.GetF1_F2RandomValue(.01,.04,""),this.nowBar+=e),this.minusCD=0,this.SetBar()}SetBar(){console.log("当前",this.nowBar),this.view.m_bar.tweenValue(100*this.nowBar,.1),.7<=this.nowBar&&this.view.m_c_type.setSelectedIndex(0)}SetLoadInfo(){K.PlatformModule().PlatformSettingData().HongBao_isWuChu?this.isClick=!0:this.isClick=!1,this.nowTime=10,K.PlatformModule().PlatformSettingData().hongbaoTime&&(this.nowTime=K.PlatformModule().PlatformSettingData().hongbaoTime),this.nowBar=0,this.SetBar(),this.isClick&&this.view.m_c_type.setSelectedIndex(1)}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null)}Show(){super.Show(),this.Load()}SetHideInfo(){}Hide(){this.SetHideInfo(),super.Hide(),this.UnLoad()}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(bo);return e.name=bo.UIName,t.uiName=bo.UIName,t}}),Ao=bo,xo=(Ao.UIName="OpenHongBaoUI",class extends ${constructor(){super(...arguments),this.videoID="adunit-7ef92d35bf5312b7",this.list1=[],this.list2=[],this.list3=[],this.list4=[],this.list5=[],this.TestOpenID=""}Load(){null==this.view&&(this.view=this.CreatFGUIViewByView(Yi.createInstance()),this.AllOnClick(),this.AllEvent()),this.SetLoadInfo()}LoadImage(){}AllEvent(){}Event_Destroy(){}AllOnClick(){this.view.m_escBtn.onClick(this,this.onBtn_Close),this.view.m_test1Btn.onClick(this,this.onTest1Btn),this.view.m_test2Btn.onClick(this,this.onTest2Btn),this.view.m_test3Btn.m_info.text="解锁技能",this.view.m_test3Btn.onClick(this,this.onTest3Btn),this.view.m_clearBtn.onClick(this,this.onclearBtn),this.view.m_clear2Btn.onClick(this,this.onclear2Btn),this.view.m_addCoinBtn.onClick(this,this.onm_addCoinBtn),this.view.m_addDiamondBtn.onClick(this,this.m_addDiamondBtn),this.view.m_lvBtn.onClick(this,this.m_lvBtn),this.view.m_tomorrowBtn.onClick(this,this.m_tomorrowBtn),this.view.m_freeVideoBtn.onClick(this,this.m_freeVideoBtn),this.view.m_gmBtn.onClick(this,this.m_gmBtn),this.view.m_rankBtn.onClick(this,this.m_rankBtn),this.view.m_logBtn.onClick(this,this.logBtn),this.view.m_videoBtn.onClick(this,this.videoSet),this.view.m_sceneBtn.onClick(this,this.sceneSet),this.view.m_superUserBtn.onClick(this,this.superUser),this.view.m_euqip50Btn.m_info.text="掉装备",this.view.m_euqip50Btn.onClick(this,this.m_euqip50Btn),this.view.m_videoIdBtn.onClick(this,this.m_videoIdBtn),this.view.m_LvUp.m_info.text="段位lv",this.view.m_LvUp.onClick(this,this.OnLvUp),this.view.m_newyearFontBtn.m_info.text="新年文字",this.view.m_newyearFontBtn.onClick(this,this.OnNewYearFont),this.view.m_btn_grid.onClick(this,this.m_btn_grid),this.view.m_hideFightBtn.onClick(this,this.HideInGameBtn),this.view.m_addPlayersBtn.onClick(this,this.AddPlayer),this.view.m_hideKillBtn.onClick(this,this.HideInGameKillInfo),this.view.m_debrisBtn.onClick(this,this.m_debrisBtn),this.view.m_useSameHeroSkinIdBtn.onClick(this,this.UseSameHeroSkinId),this.view.m_aiUseSkillWithMeBtn.onClick(this,this.AiUseSkillWithMe),this.view.m_hasSameSkillAtStartBtn.onClick(this,this.HasSameSkillAtStart),this.FreshvideoSet()}m_btn_grid(){K.UIModule().ShowUI(Lo.UIName)}HasSameSkillAtStart(){let t=K.DataModule().GetLocal().skill.GetAllUpGradeOnlySkill(),i=0;for(let e=0;e<t.length;e++){if(t[e]==V.hasSameSkillAtStart){i++;break}i++}(i=""==V.hasSameSkillAtStart?0:i)<t.length?(V.hasSameSkillAtStart=t[i],this.view.m_hasSameSkillAtStartBtn.m_title.text="开局所有玩家自带技能:"+K.DataModule().GetLocal().skill.Get(t[i]).ChineseName):(V.hasSameSkillAtStart="",this.view.m_hasSameSkillAtStartBtn.m_title.text="开局所有玩家自带技能:无")}AiUseSkillWithMe(){V.aiUseSkillWithMe?(V.aiUseSkillWithMe=!1,this.view.m_aiUseSkillWithMeBtn.m_title.text="同时发动技能:关"):(V.aiUseSkillWithMe=!0,this.view.m_aiUseSkillWithMeBtn.m_title.text="同时发动技能:开")}UseSameHeroSkinId(){V.useSameHeroSkinId?(V.useSameHeroSkinId=!1,this.view.m_useSameHeroSkinIdBtn.m_title.text="相同英雄:关"):(V.useSameHeroSkinId=!0,this.view.m_useSameHeroSkinIdBtn.m_title.text="相同英雄:开")}m_debrisBtn(){for(let e=0;e<2;e++){var t=K.DataModule().GetLocal().lottery.CreationEquip(Z.WeaponSkinPiece_Random,"",0,!0);if(""==t)return;{let e=[];e.push(t),j.GetItemDataAndIsShowBox("",e,0)}}}AddPlayer(){V.startGamePlayerCount++,this.view.m_addPlayersBtn.m_title.text="增加战斗人数:"+V.startGamePlayerCount}HideInGameKillInfo(){k.ingameInfoHide?(k.ingameInfoHide=!1,this.view.m_hideKillBtn.m_title.text="隐藏击杀:关"):(k.ingameInfoHide=!0,this.view.m_hideKillBtn.m_title.text="隐藏击杀:开")}HideInGameBtn(){k.ingameBtnHide?(k.ingameBtnHide=!1,this.view.m_hideFightBtn.m_title.text="隐藏战斗按钮:关"):(k.ingameBtnHide=!0,this.view.m_hideFightBtn.m_title.text="隐藏战斗按钮:开")}m_videoIdBtn(){k.Platform==T.WECHAT&&(""!=this.videoID?(this.videoID="",this.view.m_videoIdBtn.m_info.text="视频false"):(this.videoID="adunit-7ef92d35bf5312b7",this.view.m_videoIdBtn.m_info.text="视频true"),CC.Instance.adUnitId_video=this.videoID)}m_euqip50Btn(){K.DataModule().GetUser().Get_Assign_Equip_100()}superUser(){b.Warn("使用超级用户"),K.DataModule().GetUser().SetUserData(K.ResModule().GetJson(x.UserData2).user),SC.SetUserDataLoadEnd()}sceneSet(){"BattleScene1"==V.nowScene?(V.nowScene="BattleScene2",this.view.m_sceneBtn.m_title.text="场景2"):(V.nowScene="BattleScene1",this.view.m_sceneBtn.m_title.text="场景1")}videoSet(){if("Normal"==V.useSpCamera?(V.useSpCamera="SpF",k.banHideByCamera=!0):"SpF"==V.useSpCamera?(V.useSpCamera="SpNoF",k.banHideByCamera=!0):"SpNoF"==V.useSpCamera&&(V.useSpCamera="Normal",k.banHideByCamera=!1),this.FreshvideoSet(),"Main"==q.EcsGameMgr.nowGame.gameName){let e=q.NowGameWorld.GetSingleCompoent($i);e&&("Normal"!=V.useSpCamera?(e.camera.orthographic=!1,e.state="Sp2","SpF"==V.useSpCamera&&(e.followAngle=!0),"SpNoF"==V.useSpCamera&&(e.followAngle=!1)):(e.camera.orthographic=!0,e.camera.orthographicVerticalSize=18,e.state=$i.state_InGame))}}FreshvideoSet(){"Normal"==V.useSpCamera&&(this.view.m_videoBtn.m_title.text="镜头:普通"),"SpF"==V.useSpCamera&&(this.view.m_videoBtn.m_title.text="镜头:三人称自动"),"SpNoF"==V.useSpCamera&&(this.view.m_videoBtn.m_title.text="镜头:三人称手动")}logBtn(){K.UIModule().ShowUI(Xi.UIName)}m_rankBtn(){var e;K.DataModule().GetUser().GetData().userMedal.level+=1,K.DataModule().GetUser().GetData().userMedalMax.level<=K.DataModule().GetUser().GetData().userMedal.level&&(e=K.DataModule().GetUser().GetData().userMedal.level+1-1,K.DataModule().GetUser().GetData().userMedalMax.level=e),54<=K.DataModule().GetUser().GetData().userMedal.level&&(K.DataModule().GetUser().GetData().userMedal.level=54),K.DataModule().GetUser().SaveData()}m_gmBtn(){k.IsGM=!1,K.UIModule().GetUI(Mo.UIName).hideGMBtn(),this.Hide()}m_freeVideoBtn(){k.IsFreeVideo=!0}m_tomorrowBtn(){K.DataModule().GetUser().GetData().nowTime=0,K.DataModule().GetUser().TomorrowRefresh()}m_lvBtn(){K.DataModule().GetUser().GetData().userLevel.level++,40<=K.DataModule().GetUser().GetData().userLevel.level&&(K.DataModule().GetUser().GetData().userLevel.level=40)}onm_addCoinBtn(){K.DataModule().GetUser().AddCoin(this.view.m_coinValue.text,"")}m_addDiamondBtn(){K.DataModule().GetUser().ChangeDiamond(Number(this.view.m_coinValue.text),"")}onclear2Btn(){V.overGame=!0}onclearBtn(){return k.IsInWebTest&&f.ClearSave_Web(),Laya.LocalStorage.clear(),jC.GetIsIoGamesSavePlatform()?void he.Instance.DeleteArchive(function(e){Laya.LocalStorage.clear(),Laya.LocalStorage.setItem(K.DataModule().GetUser().hasSaveUserDataKey,""),Laya.LocalStorage.setItem(K.DataModule().GetUser().UserDataKey,""),j.TopUI_TipShow("1请重新进入游戏")},null):(Laya.LocalStorage.clear(),void j.TopUI_TipShow("请重新进入游戏"))}onTest1Btn(){var e=K.DataModule().GetLocal().lottery.GetChest("StrikeKillPeopleDebris"),t=K.DataModule().GetUser().GetUserItemDataList(e);j.ShowGetReward(t,"",!0),console.log("测试返货",e,t)}onTest2Btn(){K.UIModule().ShowUI(Ao.UIName)}OnLvUp(){K.DataModule().GetUser().GetData().mergeLevel=50,K.DataModule().GetUser().GetData().userLevel.level=40}OnNewYearFont(){K.DataModule().GetLocal().quest.GetFollowBonus_TikTok().split(",");let e=[];e.push("2021NewYearGift"),j.GetItemDataAndIsShowBox("",e,0,"",!0)}onTest3Btn(){let t=[],i=(K.DataModule().GetLocal().item.GetZombieUnlockItemList(100).forEach(e=>{t.push(e.ItemID)}),K.DataModule().GetUser().GetData().ZombieUnlockItemList=t,[]);K.DataModule().GetLocal().zModePassiveSkill.GetUnlockZmPassiveSkill(100).forEach(e=>{i.push(e.SkillID)}),K.DataModule().GetUser().GetData().ZombieUnlockZMpassiveSkills=i,K.DataModule().GetUser().SaveData()}static LoadSaveDataFun(t){if(W.loginDataEnd=!0,console.log("读取存档成功!"),0<t.length){var t=t[0].D,i=JSON.stringify(JSON.parse(t));if(null==t||""==t)return console.log("设置data_NUll",t),le.Instance.Warn("存档数据为空","存档问题",!0),void le.Instance.Log("读取成功新","读档问题",!0);le.Instance.Log("读取成功老","读档问题",!0);let e=K.DataModule().GetUser();W.userData_saveData=i;t=JSON.parse(W.userData_saveData);Laya.LocalStorage.setItem(e.UserDataKey,JSON.stringify(t)),e.SaveData(),W.OneGameOver--,eG.ResetGame(),console.log("设置存储",i)}else console.log("新用户，服务器上无存档")}TestPlayerOpenID(){this.TestOpenID=this.view.m_coinValue.text,console.log("请求log",this.TestOpenID),W.openId=this.TestOpenID,W.loginDataEnd=!1,SC.IsSetSave=!0,he.Instance.SetUserID(W.openId),Laya.LocalStorage.setItem("NewUserDataTT","true"),K.DataModule().GetUser().LoadNetSaveData(),SC.GetSaveUserData()}onBtn_Close(){K.UIModule().HideUI(xo.UIName)}SetLoadInfo(){k.Platform!=T.WECHAT||k.IsInWebTest||(this.videoID=CC.Instance.adUnitId_video,""==this.videoID&&(this.view.m_videoIdBtn.text="视频false"))}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null)}Show(){super.Show(),this.Load()}SetHideInfo(){this.Event_Destroy()}Hide(){this.SetHideInfo(),super.Hide(),this.UnLoad()}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(xo);return e.name=xo.UIName,t.uiName=xo.UIName,t}}),To=xo,ko=(To.UIName="GMUI",class extends ${constructor(){super(...arguments),this.BannerUp_Call=null,this.nowUpTime=0}Load(){null==this.view&&(this.view=this.CreatFGUIViewByView(qi.createInstance()),this.AllOnClick(),this.AllEvent()),this.BannerUp_Call=null,this.SetLoadInfo()}AllOnClick(){this.view.m_GM.onClick(this,this.OnGM),this.view.m_Btn_bannerUp.onClick(this,this.onBtn_bannerUp)}onEscBtn(){}OnGM(){K.UIModule().ShowUI(To.UIName)}onBtn_bannerUp(){this.view.m_Btn_bannerUp.touchable=!1;let e=this;Laya.timer.once(500,this,function(){e.view&&W.Instance.BannerAd_up_Show()}),Laya.timer.once(1e3,this,function(){e.view&&null!=e.BannerUp_Call&&(e.view.m_Btn_bannerUp.visible=!1,CC.Instance.BannerAd_up_Hide(),e.BannerUp_Call.call(this))})}SetBannerUp_Call(e){this.view||K.UIModule().ShowUI(ko.UIName),this.view.m_Btn_bannerUp.touchable=!0,this.view.m_Btn_bannerUp.visible=!0,this.BannerUp_Call=e}onUpdate(){this.view&&(A.startTime+=A.TimeDeltaNoScale,W.OneGameTime+=A.TimeDeltaNoScale,this.nowUpTime+=A.TimeDeltaNoScale,30<=this.nowUpTime&&this.UpTime(),V.InGameIng&&(V.InGameTime+=A.TimeDeltaNoScale))}UpTime(){SC.AddOnlineTime(Math.round(this.nowUpTime)),this.nowUpTime=0}hideGMBtn(){this.view.m_GM.visible=!1}SetLoadInfo(){if(!ko.isLoadGmConfig)if(this.view.m_GM.visible=!1,console.log("SetLoadInfoSetLoadInfo:"+k.Platform+" "+k.ProjectSubCode+" "+this.view.m_GM.visible),"ANDROID"==k.Platform||"IOS"==k.Platform){if("chop"==k.ProjectSubCode||"chuanqu"==k.ProjectSubCode||"zhuodong"==k.ProjectSubCode||"laiwan"==k.ProjectSubCode||"233"==k.ProjectSubCode)if(k.IsGmFromSever){let e="";"chop"==k.ProjectSubCode&&(e="android_qsll_kr"),"chuanqu"==k.ProjectSubCode&&(e="android_qsll_cq"),"zhuodong"==k.ProjectSubCode&&(e="android_qsll_cq"),"laiwan"==k.ProjectSubCode&&(e="android_qsll_laiwan"),console.log("SetLoadInfo22:"+k.Platform+"  "+k.ProjectSubCode+" "+k.IsGmFromSever+" "+k.ProjectSubCode+" "+e),""!=e&&qt.User_GetConfig(e,this,function(e){var e=e.data.Config,t=e.GMSwitch;console.warn("SetLoadInfo success:",JSON.stringify(e)+t),k.IsGM=!!t,this.view.m_GM.visible=k.IsGM,ko.isLoadGmConfig||(ko.isLoadGmConfig=!0)},function(e){k.IsGM=!1,console.warn("SetLoadInfo Error:"+e)})}else this.view.m_GM.visible=k.IsGM}else this.view.m_GM.visible=k.IsGM}SetTipShow(e){this.view||K.UIModule().ShowUI(ko.UIName),this.view.m_tip1.m_info.text=e,this.view.getTransition("tip1").play()}UnLoad(){}Show(){super.Show(),this.Load()}SetHideInfo(){this.Event_Destroy()}AllEvent(){}Event_Destroy(){}Hide(){this.SetHideInfo(),super.Hide(),this.UnLoad()}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(ko);return e.name=ko.UIName,t.uiName=ko.UIName,t.jointOrder=!1,t}}),Mo=ko,Ro=(Mo.isLoadGmConfig=!1,Mo.UIName="AlwaysShowUI",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","OppoNativeAdUI")}onConstruct(){this.m_AdPos=this.getControllerAt(0),this.m_isIphoneX=this.getControllerAt(1),this.m_IconNativeMaxRightBtn=this.getChildAt(0),this.m_ColseNativeMaxRightBtn=this.getChildAt(1),this.m_LookNativeMaxRightBtn=this.getChildAt(2),this.m_IconNativeMinLeftBtn=this.getChildAt(3),this.m_IconNativeMinCenterBtn=this.getChildAt(4),this.m_IconNativeMinRightBtn=this.getChildAt(5),this.m_IconBannerNativeBtn=this.getChildAt(6),this.m_LookBannerNativeBtn=this.getChildAt(7),this.m_ColseBannerNativeBtn=this.getChildAt(8),this.m_IconNativeMaxCenterBtn=this.getChildAt(9),this.m_ColseNativeMaxCenterBtn=this.getChildAt(10),this.m_LookNativeMaxCenterBtn=this.getChildAt(11),this.m_t0=this.getTransitionAt(0)}}),Po=(Ro.URL="ui://lcl1uligednc3y3ea",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","HeroAndEquitUI")}onConstruct(){this.m_c1=this.getControllerAt(0),this.m_IsIphoneX=this.getControllerAt(1),this.m_backBtn=this.getChildAt(0),this.m_HeroBtn=this.getChildAt(1),this.m_EquitBtn=this.getChildAt(2),this.m_n165=this.getChildAt(3)}}),Eo=(Po.URL="ui://lcl1ulighhw83y2hh",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","TopUI")}onConstruct(){this.m_IsIPhoneXScreen=this.getControllerAt(0),this.m_n127=this.getChildAt(0),this.m_n128=this.getChildAt(1),this.m_n138=this.getChildAt(2),this.m_ZombieCoin=this.getChildAt(3),this.m_zombieCoinText=this.getChildAt(4),this.m_diamond=this.getChildAt(5),this.m_coin=this.getChildAt(6),this.m_coinText=this.getChildAt(7),this.m_key2Com=this.getChildAt(8),this.m_key1Com=this.getChildAt(9),this.m_diamondText=this.getChildAt(10),this.m_addCoinBtn=this.getChildAt(11),this.m_addDiamondBtn=this.getChildAt(12),this.m_bar=this.getChildAt(13)}}),No=(Eo.URL="ui://lcl1ulighhw83y2hc",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","WindowUI")}onConstruct(){this.m_ad=this.getControllerAt(0),this.m_bg=this.getChildAt(0),this.m_n0=this.getChildAt(1),this.m_textTip1=this.getChildAt(2),this.m_textTip2=this.getChildAt(3),this.m_Com_RewardItm=this.getChildAt(4),this.m_Btn_Close=this.getChildAt(5),this.m_n14=this.getChildAt(6),this.m_Btn_Video=this.getChildAt(7),this.m_btn_Close2=this.getChildAt(8),this.m_OppoLookBtn=this.getChildAt(9),this.m_OppoVideoBtn=this.getChildAt(10),this.m_OppoBannerAdBtn=this.getChildAt(11),this.m_Btn_Close1=this.getChildAt(12)}});No.URL="ui://lcl1uligr2o63y2mu";var Fo,Oo=class extends ${constructor(){super(...arguments),this.count="100",this.isShare=!1,this.nowType=""}Load(){null==this.view&&(this.view=this.CreatFGUIViewByView(No.createInstance()),this.AllOnClick(),this.AllEvent(),k.Platform!=T.VIVO&&k.Platform!=T.OPPO||(z.Instance.leYouAllow_oppo?this.view.m_ad.setSelectedPage("Oppo2"):this.view.m_ad.setSelectedPage("Oppo"),j.ShowNativeAd(this.view.m_OppoLookBtn,this.view.m_OppoBannerAdBtn,null,null),K.DataModule().GetPlatform().PlatformData,j.skipBtnDelayTime(this.view.m_Btn_Close)),k.Platform==T.WECHAT&&this.view.m_ad.setSelectedPage("wx")),this.LoadImage(),this.SetLoadInfo()}LoadImage(){let e=K.DataModule().GetLocal().gameRule;if(this.nowType==Fo.Coin_Insufficient||this.nowType==Fo.Coin_Add){let e=K.DataModule().GetUser().GetData().mergeLevel,t=e-2;t<1&&(t=1);var i=Number(K.DataModule().GetLocal().weapon.GetPrice(t))*(1-.01*e)*2,i=(this.count=String(i),this.view.m_textTip1.url=x.GetFairyGUI_Icon("Coin_Free"),this.nowType==Fo.Coin_Insufficient?this.view.m_textTip2.url=x.GetFairyGUI_Icon("Coin_Insufficient"):this.view.m_textTip2.visible=!1,K.DataModule().GetUser().GetUserItemData(Z.Coin+"_"+this.count));j.FreshRewardItem(this.view.m_Com_RewardItm,i,!1,"LevelRewardUI",x.GetIcon("item_CoinHeap"))}else this.nowType!=Fo.Diamond_Insufficient&&this.nowType!=Fo.Diamond_Add||(this.count=String(e.GetFreeGem().F1),this.view.m_textTip1.url=x.GetFairyGUI_Icon("Diamond_Free"),this.nowType==Fo.Diamond_Insufficient?this.view.m_textTip2.url=x.GetFairyGUI_Icon("Diamond_Insufficient"):this.view.m_textTip2.visible=!1,i=K.DataModule().GetUser().GetUserItemData(Z.Diamond+"_"+this.count),j.FreshRewardItem(this.view.m_Com_RewardItm,i,!1,"LevelRewardUI",x.GetIcon("item_DiamondHeap")))}AllEvent(){}Event_Destroy(){}AllOnClick(){this.view.m_Btn_Close.onClick(this,this.onBtn_Close),this.view.m_btn_Close2.onClick(this,this.onBtn_Close),this.view.m_Btn_Close1.onClick(this,this.onBtn_Close),this.view.m_Btn_Video.onClick(this,this.On_VideoBtn),this.view.m_OppoVideoBtn.onClick(this,this.On_VideoBtn)}IsShareOrVideo(){this.nowType==Fo.Coin_Insufficient||this.nowType==Fo.Coin_Add?(this.isShare=z.Instance.GetShareStrategy(sC.need_gold),no.Statistics_T0R(g.window_c)):(no.Statistics_T0R(g.window_d),this.isShare=z.Instance.GetShareStrategy(sC.need_diamond)),this.isShare?j.IsShare(this.view.m_Btn_Video):this.isShare=j.IsVideoAndShare(this.view.m_Btn_Video)}Video_Call(){let e=K.UIModule().GetUI(Oo.UIName),t=[];e.nowType==Fo.Coin_Insufficient||e.nowType==Fo.Coin_Add?(z.Instance.LW_StatisticsEvent(8001,K.DataModule().GetUser().GetData().mergeLevel,1),t.push(K.DataModule().GetUser().SetItemData(Z.Coin,Z.Coin,e.count)),K.UIModule().GetUI(Ua.UIName).ShowAddCoin(new Laya.Vector2(e.view.m_Btn_Video.x+e.view.m_Btn_Video.width/2,e.view.m_Btn_Video.y),10)):(z.Instance.LW_StatisticsEvent(8002,K.DataModule().GetUser().GetData().mergeLevel,"1"),t.push(K.DataModule().GetUser().SetItemData(Z.Diamond,Z.Diamond,e.count)),K.UIModule().GetUI(Ua.UIName).ShowAddDiamond(new Laya.Vector2(e.view.m_Btn_Video.x+e.view.m_Btn_Video.width/2,e.view.m_Btn_Video.y),10));var i=K.DataModule().GetUser().GetUserItemDataList(t);K.DataModule().GetUser().GetItem(i,at.window),K.UIModule().HideUI(Oo.UIName)}On_VideoBtn(){let e=K.UIModule().GetUI(Oo.UIName),t=sC.need_diamond,i=g.window_d;e.nowType!=Fo.Coin_Insufficient&&e.nowType!=Fo.Coin_Add||(i=g.window_c,t=sC.need_gold,z.Instance.LeYou_action(703)),e.isShare?j.GetRewardBtnFun(1,function(){z.Instance.DayShareStrategy_Add(t,!0),e.Video_Call()},i):j.GetRewardBtnFun(0,function(){z.Instance.DayShareStrategy_Add(t,!1),e.Video_Call()},i,e.view.m_Btn_Video)}onBtn_Close(){z.Instance.LeYou_action(702),K.UIModule().HideUI(Oo.UIName)}SetLoadInfo(){z.Instance.LeYou_action(701),this.IsShareOrVideo()}SetShowInfo(e){this.nowType=e,K.UIModule().ShowUI(Oo.UIName)}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null)}Show(){super.Show(),this.Load(),j.RandomAdBtnPosTow(this.view.m_OppoLookBtn,this.view.m_OppoVideoBtn,this.view.width)}SetHideInfo(){this.Event_Destroy()}Hide(){this.SetHideInfo(),super.Hide(),this.UnLoad()}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(Oo);return e.name=Oo.UIName,t.uiName=Oo.UIName,t}},Ho=Oo,Vo=(Ho.UIName="WindowUI",(G=Fo=Fo||{}).Coin_Insufficient="Coin_Insufficient",G.Diamond_Insufficient="Diamond_Insufficient",G.Coin_Add="Coin_Add",G.Diamond_Add="Diamond_Add",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","TreasureUI")}onConstruct(){this.m_YLPlatform=this.getControllerAt(0),this.m_bg=this.getChildAt(0),this.m_input=this.getChildAt(1),this.m_n22=this.getChildAt(2),this.m_TabBtn=this.getChildAt(3),this.m_n23=this.getChildAt(4),this.m_videoRefreshBtn=this.getChildAt(5),this.m_tab2Icon=this.getChildAt(6),this.m_itemList=this.getChildAt(7),this.m_boxList=this.getChildAt(8),this.m_closeBtn=this.getChildAt(9),this.m_n47=this.getChildAt(10),this.m_time=this.getChildAt(11),this.m_Com_Box3=this.getChildAt(12),this.m_tip2=this.getChildAt(13),this.m_tip_box2=this.getChildAt(14),this.m_tip_box1=this.getChildAt(15),this.m_n57=this.getChildAt(16),this.m_OppoAdBtn=this.getChildAt(17),this.m_tip2_Animation=this.getTransitionAt(0)}}),zo=(Vo.URL="ui://lcl1uligk13p3y2s4",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","QQRankUI")}onConstruct(){this.m_bg=this.getChildAt(0),this.m_n5=this.getChildAt(1),this.m_n1=this.getChildAt(2),this.m_textTip1=this.getChildAt(3),this.m_Btn_Close=this.getChildAt(4),this.m_btn_shard=this.getChildAt(5)}}),Wo=(zo.URL="ui://lcl1ulighnav3y3fp",class extends ${Load(){null==this.view&&(this.view=this.CreatFGUIViewByView(zo.createInstance()),this.AllOnClick(),this.LoadImage()),this.SetLoadInfo()}LoadImage(){}AllOnClick(){this.view.m_Btn_Close.onClick(this,this.onBtn_Close),this.view.m_btn_shard.onClick(this,this.share)}onBtn_Close(){K.UIModule().HideUI(Wo.UIName)}share(){Ko.Instance.ShareBase(null,null)}SetLoadInfo(){f.QQminiGame_IsShield(Ko.Instance.systemData)||(this.view.m_btn_shard.visible=!1),this.wxOpen=new Laya.WXOpenDataViewer,this.wxOpen.width=720,this.wxOpen.height=1280,this.wxOpen.x=this.view.m_n1.x,this.wxOpen.y=this.view.m_n1.y,this.view.displayObject.addChild(this.wxOpen),console.log("画布",this.wxOpen),this.wxOpen.postMsg({type:2,key:"rank"})}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null)}Show(){super.Show(),this.Load()}SetHideInfo(){}Hide(){this.SetHideInfo(),super.Hide(),this.UnLoad()}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(Wo);return e.name=Wo.UIName,t.uiName=Wo.UIName,t}}),Zo=Wo,jo=(Zo.UIName="QQRankUI",class extends te{constructor(){super(...arguments),this.platformData=new ee,this.jscode="",this.IsEggUIEggUIBlockRegion=!1,this.EggUIActive=!0,this.EggUICloseable=!0,this.EggUIClickChance=50,this.EggUIBlockRegions=["深圳","海外"],this.EggUIIgnoreTimes=[9,19],this.scene="",this.playerName="",this.playerIcon="",this.hideTimestamp=0,this.useShareCallBack=!1,this.shareOKFun=null,this.shareNOFun=null,this.useFakeShare=!0,this.isShareCancel=!1,this.fromShareImage="",this.isBannerShowing=!1,this.changeAdTimer=30,this.shareNeedTime=3,this.adHeight=100,this.bannerAdId="fc8fcd6c9c7ec9c48bd2d07461b70a31",this.videoAdId="e90e381fdabfa47df4e4cec2874b9cd1",this.boxAdId="fbb45c8b1f4fa15f5d0ad3ff64eae7b2",this.insertscreenAdId="d21c82f45979b471dc3317fc443a613e",this.blockAdId="0c8f45045ef6e352a31cc06f0b6aef65",this.channelId="",this.shareTm=0,this.isVideoCreationError=!1,this.blockAdItemWidth=0,this.blockAdIteemHeight=0,this.bannerAd=null,this.adId="fc8fcd6c9c7ec9c48bd2d07461b70a31",this.bannerAdDict={},this.isShowBanner=[],this.isLoadedBanners=[],this.bannerList=[],this.bannerIds=["fc8fcd6c9c7ec9c48bd2d07461b70a31","fc8fcd6c9c7ec9c48bd2d07461b70a31","fc8fcd6c9c7ec9c48bd2d07461b70a31","fc8fcd6c9c7ec9c48bd2d07461b70a31"],this.displayErrorBanner=null,this.displayErrorIsShow=!1,this.displayErrorIsLoad=!1,this.bannerIsHide=!0,this.nowVia="",this.net_openIDTime=0,this.appbox=null,this.isShowingAppbox=!1,this.retryLoadAppboxTimes=0,this.appboxLoadOk=!1,this.isLoadConfig=!1,this.ShareTextList=["操作失败，请分享到30人群","分享失败，请不要打扰同一个群","分享失败，请分享到新的群"],this.isBannerOut=!1,this.isBannerOne=!0,this.Banner_top=0,this.Banner_left=0,this.nowPos=0,this.bannerAd_gameui_yes=!1,this.ismusicOn=!0,this.isVideoIndex=!1,this.isSV=!1,this.isVideoWin=!1,this.nowPos2="default",this.isVideoErrorUseShare=!1,this.ShareNowTag="",this.shareList=[]}Init(){let i=this;null==(jo.Instance=this).lanuchData&&(this.lanuchData=T.qq.getLaunchOptionsSync()),null!=this.lanuchData.query.ShareUserID&&(this.shareOpenId=this.lanuchData.query.ShareUserID,b.Warn("获得分享者的id"+this.shareOpenId)),null!=this.lanuchData.query.ShareID&&(this.shareId=this.lanuchData.query.ShareID,b.Warn("获得分享id"+this.shareId)),null!=this.lanuchData.query.ShareTm&&(this.shareTm=this.lanuchData.query.ShareTm),this.lanuchData.scene&&(this.scene=this.lanuchData.scene),null!=this.lanuchData.query.channelId&&(null!=this.lanuchData.query.channelId?(this.channelId="channelId="+this.lanuchData.query.channelId,b.Warn("获得渠道id"+this.channelId)):this.channelId=""),b.Warn("qq登录数据",this.lanuchData),T.qq.onShow(this.OnShow),T.qq.onHide(this.OnHide),T.qq.updateShareMenu({withShareTicket:!0}),T.qq.setKeepScreenOn({keepScreenOn:!0}),T.qq.showShareMenu({withShareTicket:!0}),T.qq.onShareAppMessage(function(){console.log("onShareAppMessage:");var e=jo.Instance.GetShareData();return{title:e.title,imageUrl:e.imageurl,query:"iogame_qsll=001&ShareId="+e.shareid+"&ShareTm="+A.SystemTime+"&sourceOpenid="+W.openId}}),this.GetSystemInfo(),this.GetlanuchData(),this.LoadVideo(),this.LoadShareDatas(),this.LoadInterstitialAd(),this.LoadAppbox(),setInterval(function(){if(0<i.bannerList.filter(e=>1==e.isShow).length){let e=K.UIModule().GetNowTopUIName(),t=K.DataModule().GetLocal().platform.GetBannerType(e);0==(t=T.IsIPhoneXScreen?K.DataModule().GetLocal().platform.GetLongBannerType(e):t)&&(console.warn("异步加载的原因，关闭正常banner"),i.BannerAdHide())}},200)}GetlanuchData(){let e=this.lanuchData.scene,t="";if(this.lanuchData.referrerInfo&&this.lanuchData.referrerInfo.appId&&(t=this.lanuchData.referrerInfo.appId),null!=this.lanuchData.query&&this.lanuchData.query.hasOwnProperty("via")){var i=this.lanuchData.query.via,o=(this.nowVia=i,f.QQminiGame_ChannelData(i));if(""!=o)return void ge.Instance.Report_Login(o,i,t,this.shareOpenId,"")}ge.Instance.Report_Login(e,this.channelId,t,this.shareOpenId,"")}OnShowBanner(){try{let e=K.UIModule().GetNowTopUIName(),t=K.DataModule().GetLocal().platform.GetBannerType(e);1==(t=T.IsIPhoneXScreen?K.DataModule().GetLocal().platform.GetLongBannerType(e):t)&&this.BannerAdShow()}catch(e){console.error("广告显示报错，"+e)}}DIsplayErrorBannerLoad(){try{let e=K.PlatformModule().GetPlatformData().windowHeight-110-1,t=(K.PlatformModule().GetPlatformData().windowWidth-350)/2,i=this;console.warn("l加载金币不足界面banner");var o=e-50;this.displayErrorBanner=T.qq.createBannerAd({adUnitId:i.adId,adIntervals:30,style:{left:t,top:o,width:350,hight:200}}),this.displayErrorBanner.onError(e=>{console.log("bannerAd onError",e)}),this.displayErrorBanner.onLoad(e=>{console.log("bannerAd onLoad",e),i.displayErrorBanner&&i.displayErrorBanner.show().then(()=>{i.displayErrorIsShow=!0,console.log("bannerAd show ok")}).catch(e=>{console.log("bannerAd show error",e)})})}catch(e){console.error("广告显示报错111111111，"+e)}}ShowDisplayErrorBanner(){try{K.UIModule().GetNowTopUIName()==Ho.UIName&&this.DIsplayErrorBannerLoad()}catch(e){console.error("广告显示报错111111111，"+e)}}HideDisplayErrorBanner(){try{let e=this;this.displayErrorBanner.hide().then(()=>{e.displayErrorIsShow=!1,console.warn("异常banner关闭成功")}).catch(e=>{console.log("异常banner关闭失败",e)})}catch(e){console.error("广告显示报错11111111，"+e)}}Login(i=!1){var e=Laya.LocalStorage.getItem("saveOpenId");if(console.log("开始登录",e),null!=e&&""!=e&&"NaN"!=e)return W.openId=e,void SC.GetOpenIdEnd();let o=this;T.qq.login({success(e){console.log(`login 调用成功${e.code} `+e.anonymousCode);var t=k.appid,e=e.code;null!=e&&""!=e&&o.net_openID(t,e,i)},fail(e){console.log("login 调用失败")}})}net_openID(e,t,i=!1){let o=this;K.NetModule().Request({appid:e,code:t},"myurl://ipv6.sh.fcapi.data-eye.cn/IOG_OpenID/QQ_GetOpenID",this,function(e){console.log("获取openID",e,e.status,e.data),e&&1==e.status&&(W.openId=e.data,i&&(j.HideShortWait(),eG.ResetGame()),SC.GetOpenIdEnd(),console.log("QQ GetLoadConfig"))},function(){try{if(o.net_openIDTime++,5<o.net_openIDTime)return;o.net_openID(e,t,i)}catch(e){console.log("重试openID错误",e)}},!1)}loadBlockAd(){let i=this;this.blockAd=T.qq.createBlockAd({adUnitId:i.blockAdId,style:{left:20,top:50},size:5,orientation:"landscape"}),this.blockAd.onLoad(function(e){console.error("block onload "+e),i.BlockAdOnShow()}),this.blockAd.onResize(function(e){i.blockAdIteemHeight=e.height,i.blockAdItemWidth=e.width;var t=(i.platformData.windowWidth*i.platformData.pixelRatio-4*i.blockAdItemWidth)/2;console.log("blockAd.onResize:"+JSON.stringify(e),i.blockAdItemWidth,t,i.platformData.windowWidth*i.platformData.pixelRatio)}),this.blockAd.onError(function(e){console.error("block onError"+JSON.stringify(e))})}BlockAdOnShow(){this.blockAd.show().then(e=>{console.error("BlockAdOnShow"+JSON.stringify(e))}).catch(e=>{console.error("BlockAdOnShow err"+JSON.stringify(e))})}BlockAdOnHide(){this.blockAd.destroy()}LoadAppbox(){let e=this;try{this.appbox=T.qq.createAppBox({adUnitId:e.boxAdId}),this.loadAppboxInternal(),this.appbox.onClose(function(){console.error("appbox.onClose:"),e.onCloseAppbox&&e.onCloseAppbox()})}catch(e){console.error("appbox err:",JSON.stringify(e))}}loadAppboxInternal(){let t=this;setTimeout(function(){!t.appboxLoadOk&&t.retryLoadAppboxTimes<=10&&t.appbox.load().then(e=>{t.appboxLoadOk=!0}).catch(e=>{t.appboxLoadOk=!1,t.retryLoadAppboxTimes++,t.loadAppboxInternal()})},3e3*t.retryLoadAppboxTimes)}SubscriptionCall(){}GetSubscription(){}CloseSubscription(){}AppBoxShow(t=null,i=null){let o=this;this.appboxLoadOk&&this.appbox.show().then(e=>{o.isShowingAppbox=!0,t&&t(),o.onCloseAppbox=i,console.error("appbox show ok:",e)}).catch(e=>{console.error("appbox show err:",e)})}SaveShareOnClick(){}LoadConfig(){let n=this,e=k.ProjectID;console.log("开始请求配置",e),qt.User_GetConfig(e,this,function(e){let t=e.data.Config,i=t.KeyStr,o=e.data.Base,a=o.Area;console.warn("GetIosConfig success:",t,i,e,o,a),i==k.qqAuditKey&&((e=t.GameAuditSwitch)&&K.DataModule().GetLocal().platform.Parse(e),console.warn("Use GameAuditSwitch:",K.DataModule().GetPlatform().PlatformData)),i==k.qqLineKey&&(e=t.GameLineSwitch,console.warn("Use config2:",e),e&&K.DataModule().GetLocal().platform.Parse(e),console.warn("Use GameLineSwitch:",K.DataModule().GetPlatform().PlatformData)),K.DataModule().GetPlatform().PlatformData.UseBanner&&K.PlatformModule().UseBanner(),n.UpdateQQ(),K.DataModule().GetPlatform().PlatformData;for(let e=0;e<a.length;e++){const t=a[e];-1!==n.EggUIBlockRegions.indexOf(t)&&(console.log("this.IsEggUIEggUIBlockRegion = true"),n.IsEggUIEggUIBlockRegion=!0,K.DataModule().GetPlatform().PlatformData.inGameBanner_qqOn=!1)}jo.Instance.isLoadConfig=!0,jo.Instance.PlayStartVideo()},function(e){console.warn("GetIosConfig Error:"+e)})}UpdateQQ(){if(jo.Instance){var t=["EggUIActive","EggUICloseable","EggUIClickChance","EggUIBlockRegions"],i=K.DataModule().GetPlatform().PlatformData;for(let e=0;e<t.length;e++){var o=t[e];jo.Instance[o]=i[o]}}}OnShow(e){b.Warn("开始显示",e),jo.isOpenSetting&&(jo.isOpenSetting=!1,T.qq.getSetting({success(e){e.authSetting["scope.appMsgSubscribed"]&&jo.Instance.SubscriptionCall()}})),jo.Instance.useFakeShare,jo.Instance.useShareCallBack=!1}OnHide(){b.Warn("隐藏时间",A.SystemTime)}GetSystemInfo(){let t=this;T.qq.getSystemInfo({success:function(e){b.Log("设备信息",e),null!=(jo.Instance.systemData=e).model&&-1!=e.model.indexOf("iPhone 6")&&b.Warn("iphone6为低端配置"),t.platformData.windowWidth=e.windowWidth,t.platformData.windowHeight=e.windowHeight,t.platformData.screenWidth=e.screenWidth,t.platformData.system=e.system,t.platformData.pixelRatio=e.pixelRatio,t.platformData.screenRatio=t.platformData.windowHeight/t.platformData.windowWidth,t.adHeight=.15*t.platformData.windowHeight*(t.platformData.windowHeight/t.platformData.windowWidth/(960/540)),b.Warn("屏幕比例",t.platformData.screenRatio,t.platformData.system,e.pixelRatio)}})}GetIsIphoneX(){return 800<K.PlatformModule().GetPlatformData().windowHeight}isLongCellphone(){return 2<K.PlatformModule().GetPlatformData().screenHeight/K.PlatformModule().GetPlatformData().screenWidth}BannerAdLoad_GameUI(e=0,t=!0,i=!1){let o=(K.PlatformModule().GetPlatformData().windowWidth-300)/2,a=K.PlatformModule().GetPlatformData().windowHeight-110-1;2==e&&(a=0),this.nowPos=e,i&&this.bannerAd_gameui.destroy();const n=T.qq.createBannerAd({adUnitId:"9613c8dc2a6384c7ef1a84f76f09d687",adIntervals:30,style:{width:320,top:a,left:o}});n.onResize(e=>{console.log("Resize后正式宽高:",e.width,e.height),t&&n.show().then(()=>{console.log("bannerAd show ok")}).catch(e=>{console.log("bannerAd show error",e)})}),n.onError(e=>{console.log("bannerAd onError",e)}),n.onLoad(e=>{console.log("bannerAd onLoad",e)}),this.bannerAd_gameui=n}BannerAdShow_GameUI(e=0,t){this.bannerAd_gameui?2!=e?this.nowPos!=e?this.BannerAdLoad_GameUI(e,!0):(console.log("显示",this.bannerAd_gameui),this.bannerAd_gameui&&this.bannerAd_gameui.show()):this.BannerAdLoad_GameUI(e,!0,!0):this.BannerAdLoad_GameUI(e,!0)}BannerAdHide_GameUI(){this.bannerAd_gameui&&this.bannerAd_gameui.hide()}BannerAdHide_TreasureUI(){}GetRandomAduitId(){var e=Math.floor(Math.random()*this.bannerIds.length);return this.bannerIds[e]}BannerAdShow(){this.BannerAdShow_GameUI()}BannerAdHide(e=0){this.BannerAdHide_GameUI()}LoadInterstitialAd(){this.interstitialAd=T.qq.createInterstitialAd({adUnitId:this.insertscreenAdId})}ShowInterstitialAd(){this.interstitialAd&&this.interstitialAd.show().catch(e=>{console.log("ShowInterstitialAd:",e)})}PlayStartVideo(){this.isSV&&this.isLoadConfig&&("看点"==f.QQminiGame_ChannelData(jo.Instance.nowVia)&&this.WatchVideo(function(){console.log("视频看点关闭")},"视频_看点",null,null),jo.Instance.nowVia="")}LoadVideo(){let t=this;this.rewardedVideoAd1=T.qq.createRewardedVideoAd({adUnitId:t.videoAdId}),ge.Instance.Report_AD_Video_Load(jo.Instance.nowPos2),this.rewardedVideoAd1.onClose(this.OnCloseWatchVideo),this.rewardedVideoAd1.onError(function(e){console.error("LoadVideo onError:",e),t.isVideoCreationError=!0,ge.Instance.Report_AD_Video_LoadFail(this.nowPos,e)}),this.rewardedVideoAd1.onLoad(function(e){console.warn("LoadVideo onload:",e),""!=jo.Instance.nowVia&&(t.isVideoCreationError=!1,"看点"==f.QQminiGame_ChannelData(jo.Instance.nowVia)?(jo.Instance.isSV=!0,jo.Instance.PlayStartVideo()):jo.Instance.nowVia="")}),this.LoadVideoAd1()}GameLoopBtnHide(){}GameLoopBtnShow(){}QQ_Authorize_subscribeAppMsg(){f.QQminiGame_IsShield(jo.Instance.systemData)&&"true"!=Laya.LocalStorage.getItem("QQ_subscribeAppMsg")&&(Laya.LocalStorage.setItem("QQ_subscribeAppMsg","true"),console.log("请求订阅"),T.qq.getSetting({success(e){console.log("请求订阅set",e),e.authSetting["setting.appMsgSubscribed"]?jo.Instance.QQ_subscribeAppMsg():T.qq.authorize({scope:"setting.appMsgSubscribed",success(){jo.Instance.QQ_subscribeAppMsg()}})}}))}QQ_Rank(){T.qq.getSetting({success(e){e.authSetting["scope.userInfo"]?K.UIModule().ShowUI(Zo.UIName):T.qq.authorize({scope:"scope.userInfo",success(){K.UIModule().ShowUI(Zo.UIName)},fail(e){console.log("addRecentColorSign fail: ",e)}})}})}QQ_subscribeAppMsg(){console.log("一次性"),window.MMMSdk.subscribe(["fe08487cd6a5ad6e9ff74bf4a64bbe39"],function(e){console.log("----subscribeAppMsg----success",e),jo.Instance.QQ_subscribeAppMsg_http()},function(e){console.log("----subscribeAppMsg----success",e)})}QQ_subscribeAppMsg_http(){var e,t;window.MMMSdk&&(t={account:(t=(e=window.MMMSdk).OPEN_DATA).account,channel:t.channel,gameid:t.gameid,pf:t.pf,templateid:"fe08487cd6a5ad6e9ff74bf4a64bbe39"},console.log("MMMSDK",e.OPEN_DATA,t),K.NetModule().Request(t,"myurl://s1-ndskqa.ylkjgame.com/qqMsgForMoJie",this,function(e){console.log("发送成功",e)},function(e){console.log("发送失败",e)},!1))}QQ_Authorize(){f.QQminiGame_IsShield(jo.Instance.systemData)&&T.qq.getSetting({success(e){e.authSetting["scope.recentColorSign"]||T.qq.authorize({scope:"scope.recentColorSign",success(){jo.Instance.addRecentColorSign()},fail(e){console.log("addRecentColorSign fail: ",e)}})}})}addRecentColorSign(){T.qq.addRecentColorSign({query:"",success(e){console.log("addRecentColorSign success: ",e)},fail(e){console.log("addRecentColorSign fail: ",e)},complete(e){console.log("addRecentColorSign complete: ",e)}})}saveAppToDesktop(){T.qq.saveAppToDesktop({success:function(e){console.log("添加到桌面成功 ok",e),null==K.DataModule().GetUser().GetItemByID("QQ_AddToDesktop")&&K.DataModule().GetUser().AddSaveKey("QQ_AddToDesktop","true")},fail:function(e){console.log("添加到桌面失败 fail",e)},complete:function(e){console.log("添加到桌面完成 complete",e)}})}LoadVideoAd1(){let t=this;this.isVideoIndex=!0,null!=this.rewardedVideoAd1&&this.rewardedVideoAd1.load().then(()=>{b.Warn("视频加载成功"),t.isVideoCreationError=!1}).catch(e=>{K.UIModule().HideUI(Ni.UIName),b.Warn("视频加载失败"),t.isVideoCreationError=!0})}WatchVideo(t,i,e,o){if(this.isVideoWin)b.Log("多次点击视频，判断跳过");else{jo.Instance.nowPos2=i,console.warn("开启看视频",i),j.ShowShortWait(),this.watchFun=t,this.watchFunNo=o;let e=this;e.rewardedVideoAd1.show(),k.IsInWebTest?t.call(null):e.isVideoCreationError?K.DataModule().GetPlatform().PlatformData.UseShare&&(this.isVideoErrorUseShare=!0,this.GetVideoErrorShareTime()?j.GetRewardBtnFun(1,jo.Instance.watchFun,i):j.TopUI_TipShow("暂无视频广告,请稍后再试")):(ge.Instance.Report_AD_Video_Play(i),jo.LoadVideoIng?Laya.timer.once(1500,this,function(){e.rewardedVideoAd1.show(),e.LoadVideoAd1()}):(this.rewardedVideoAd1.show(),this.LoadVideoAd1()))}}GetVideoErrorShareTime(){let e=Laya.LocalStorage.getItem("VideoErrorShareTime");return null!=e&&""!=e&&"NaN"!=e||(e="0"),parseInt(e),!0}OnCloseWatchVideo(e){jo.Instance.ismusicOn&&(Laya.SoundManager.setMusicVolume(1),Laya.SoundManager.setSoundVolume(1)),e&&e.isEnded||void 0===e?(null!=jo.Instance.watchFun&&(ge.Instance.Report_AD_Video_Reward(jo.Instance.nowPos2),jo.Instance.watchFun.call(this)),K.UIModule().HideUI(Ni.UIName)):(null!=jo.Instance.watchFunNo&&jo.Instance.watchFunNo.call(this),K.UIModule().HideUI(Ni.UIName),ge.Instance.Report_AD_Video_Giveup(jo.Instance.nowPos2),null!=jo.Instance.shareNOFun&&jo.Instance.shareNOFun.call(this),jo.LoadVideoIng=!0,Laya.timer.once(2e3,this,function(){jo.LoadVideoIng=!1}))}GetChanleId(){return this.channelId}ShareBase(e,t,i="",o="",a="",n){this.ShareNowTag!=z.Instance.nowTag&&(this.ShareNowTag=z.Instance.nowTag,jo.ShareTime=0),jo.Instance.shareNeedTime=z.Instance.nowShareTimeList[jo.ShareTime];var s=this.GetShareData();""==a&&(a=s.shareid?String(s.shareid):"",i=s.title,o=s.imageurl,jo.Instance.shareFunSave=e,jo.Instance.sharefailFunSave=t,jo.Instance.sharetitleSave=i,jo.Instance.sharekeysSave=a,jo.Instance.shareimageSave=o);let l=this;this.isShareCancel=!1,k.IsInWebTest?null!=e&&e.call(this,null):(this.useFakeShare&&(this.useShareCallBack=!0,this.shareOKFun=e,this.shareNOFun=t),f.GetNewTime(),T.qq.shareAppMessage({title:i,imageUrl:o,success:e=>{b.Warn("分享成功",e)},fail:e=>{b.Warn("分享失败",e)},cancel:e=>{b.Warn("取消分享",e),l.isShareCancel=!0}}))}CustomerService(){T.qq.openCustomerServiceConversation({})}VibrateShort(){T.qq.vibrateShort()}WeChat_ShareAgain(){jo.Instance.shareNeedTime=3,jo.Instance.ShareBase(jo.Instance.shareFunSave,null,jo.Instance.sharetitleSave,jo.Instance.shareimageSave,jo.Instance.sharekeysSave,!0)}GetShareData(){var e,t=jo.Instance.shareList;return console.log("GetShareData:"+JSON.stringify(t)),t.length<1?(e={imageurl:"",shareid:0,templateId:"",title:""},this.LoadShareDatas(),e):t[f.GetF1_F2RandomValue(0,t.length-1)]}LoadShareDatas(){this.shareList.push({imageurl:"myurl://games.cdn.data-eye.cn/qsll/qq/Shard/shard1.jpg",shareid:1,templateId:"01",title:"准备操作他，哎呀！大意了！没有闪。"})}}),Ko=jo,qo=(Ko.shareData=null,Ko.isOpenSetting=!1,Ko.ShareTime=0,Ko.LoadVideoIng=!1,class extends ${constructor(){super(...arguments),this.refreshTime=999e3,this.refreshTimeBox3=999e3,this.refreshTime_R=18e5,this.refreshTimeBox3_R=999e3,this.Box_refreshTime=999e3,this.ShopList=[],this.onClickNum=0,this.Box_onClickNum=0,this.showBox3CD=!1,this.isShare=!1,this.isShare_buy_shop3=!1,this.isShare_buy_box=!1,this.CdTime=1}Load(){null==this.view&&(this.view=this.CreatFGUIViewByView(Vo.createInstance()),this.AllOnClick(),this.Box_onClickNum=0,this.onClickNum=0,z.Instance.LW_StatisticsEvent(5007),no.Statistics_T0R(g.shop2),no.Statistics_T0R(g.shop3),this.loadImage(),k.Platform!=T.OPPO&&k.Platform!=T.VIVO||(j.ShowNativeAd(null,null,this.view.m_OppoAdBtn,null),this.view.m_YLPlatform.setSelectedPage("Oppo"))),z.Instance.LeYou_Video(g.shop1,0),z.Instance.LeYou_action(301),this.SetLoadInfo()}loadImage(){this.view.m_Com_Box3.m_icon.url=x.GetIcon("box_Chest_3"),this.view.m_Com_Box3.m_text_nowTime.text=K.DataModule().GetUser().getBoxUpTime()+"/5",this.view.m_Com_Box3.m_load_bin.url=x.GetIcon("TreasureUI_bin"),0!=K.DataModule().GetPlatform().PlatformData.ShowHeroRes&&(this.view.m_Com_Box3.m_load_xue.url=x.GetIcon("TreasureUI_xue"))}AllOnClick(){this.view.m_closeBtn.onClick(this,this.onBtn_Close),this.view.m_videoRefreshBtn.onClick(this,this.onVideoRefreshBtn),this.view.m_input.onClick(this,this.on_input),this.view.m_Com_Box3.m_getBtn.onClick(this,this.Box3_GetBtn),this.view.m_Com_Box3.m_cdBtn.onClick(this,this.Box_CD_Btn),this.view.m_Com_Box3.m_btn_info.onClick(this,this.Box3_btn_info)}Box3_btn_info(){this.view.m_Com_Box3.m_tipCom.visible=!this.view.m_Com_Box3.m_tipCom.visible}Box3_GetBtn(){let e=this;z.Instance.ChuanQuStatistics(60003),j.GetRewardBtnFun(0,function(){z.Instance.LW_StatisticsEvent(8005),Laya.LocalStorage.setItem("Treasure_Box3_Refresh_Time",A.SystemTime.toString()),e.getBox3(),e.SetTime()},g.shop_box3Get)}getBox3(){let e=K.DataModule().GetUser().getBoxUpTime(),t=!1,i=(5<=(e+=1)?(t=!0,K.DataModule().GetUser().AddSaveKey("TreasureUI_GetBoxTime","0")):K.DataModule().GetUser().AddSaveKey("TreasureUI_GetBoxTime",e.toString()),["Elsa","Sportsman","Snowman"]),o=[10,10,10],a=!1;for(let e=0;e<i.length;e++)K.DataModule().GetUser().IsHeroBuy(i[e])?o[e]=0:a=!0;let n=[];var s;n=t&&a?(s=i[f.GetWeightRandom(o)],[Z.Hero+"_"+s]):K.DataModule().GetLocal().lottery.GetChest("Chest_Piece"),j.GetItemDataAndIsShowBox(at.TreasureBox3,n,0,"box_Chest_3"),this.view.m_Com_Box3.m_text_nowTime.text=K.DataModule().GetUser().getBoxUpTime()+"/5"}Box_CD_Btn(){let i=this;z.Instance.ChuanQuStatistics(60004),j.GetRewardBtnFun(0,function(){let e=Laya.LocalStorage.getItem("Treasure_Box3_Refresh_Time"),t=Number(e)-60*K.DataModule().GetLocal().gameRule.GetChest_Piece_CD().F2*1e3;Laya.LocalStorage.setItem("Treasure_Box3_Refresh_Time",t.toString()),i.SetTime(),z.Instance.LW_StatisticsEvent(8006)},g.shop_box3CD)}on_input(){this.view.m_tip_box1.visible=!1,this.view.m_tip_box2.visible=!1}onBtn_Close(){z.Instance.LeYou_action(302),K.UIModule().HideUI(qo.UIName)}SetLoadInfo(){let e=K.DataModule().GetLocal().gameRule,t=(this.IsRefresh(),this.ShopList=K.DataModule().GetUser().GetData().treasureItemList,this.refreshTime_R=1e3*e.GetShopResetTime(),this.refreshTimeBox3_R=60*e.GetChest_Piece_CD().F1*1e3,this.List_Refresh(),K.DataModule().GetUser().GetData().treasureItemList[5].data.buyCount);this.view.m_tip2.m_text_boxTime.text=t.toString(),this.IsShareOrVideo(),this.SetTime()}SetBox3Info(){this.showBox3CD?this.view.m_Com_Box3.m_showType.setSelectedIndex(1):this.view.m_Com_Box3.m_showType.setSelectedIndex(0),this.view.m_Com_Box3.m_showType.setSelectedIndex(0),this.view.m_Com_Box3.m_n74.visible=this.showBox3CD,k.Platform==T.QQ&&(this.view.m_Com_Box3.m_qq_tip.visible=!0)}List_Refresh(){this.view.m_videoRefreshBtn.m_C_hero.setSelectedIndex(2),this.view.m_itemList.itemRenderer=Laya.Handler.create(this,this.onRenderItem,null,!1),this.view.m_itemList.numItems=4,this.view.m_itemList.on(fairygui.Events.CLICK_ITEM,this,this.On_Item),this.view.m_boxList.itemRenderer=Laya.Handler.create(this,this.Box_onRenderItem,null,!1),this.view.m_boxList.numItems=2}onRenderItem(o,i){let a=this.ShopList[o],n=("Landman"==a.data.tableID?this.view.m_videoRefreshBtn.m_C_hero.setSelectedIndex(0):"Seaman"==a.data.tableID&&this.view.m_videoRefreshBtn.m_C_hero.setSelectedIndex(1),j.FreshRewardItem(i.m_rewardItem,a.data,!0,"Shop","",!1,"","","Shop"),i.m_buyBtn.m_DiamondText.text=a.price.toString(),"Free"==a.price?i.m_BtnShow.setSelectedPage("free"):"Video"==a.price?i.m_BtnShow.setSelectedPage("video"):i.m_BtnShow.setSelectedPage("buy"),K.UIModule().GetUI(qo.UIName)),e=0;a.isBuy?(i.touchable=!1,i.m_BtnShow.setSelectedPage("absence")):(e=1,i.touchable=!0,i.grayed=!1),i.m_LvText.text=a.data.level.toString(),this.isShare_buy_shop3=z.Instance.GetShareStrategy(sC.store_reward),this.isShare_buy_shop3?j.IsShare(i.m_videoBtn):this.isShare_buy_shop3=j.IsVideoAndShare(i.m_videoBtn),this.onClickNum>o||(this.onClickNum++,2==o&&no.Statistics_T0R(g.shop1,e),i.m_buyBtn.onClick(o,function(){{var i=o;if(a=n.ShopList[i],Number(a.price)>K.DataModule().GetUser().GetData().diamond)return void(console.log("钻石不够"),j.WindowUI_Show(Fo.Diamond_Insufficient));let e=at.Treasure2,t=(3==i&&(e=at.Treasure4),K.DataModule().GetUser().InterstitialAdNumberBuyGem++,K.DataModule().GetUser().ChangeDiamond(-Number(a.price),e),[]);return t.push(a.data),n.ShopList[i].isBuy=!0,K.DataModule().GetUser().GetData().treasureItemList=n.ShopList,j.ShowGetReward(t),K.DataModule().GetUser().GetItem(t,e),void n.SetLoadInfo()}}),i.m_free.onClick(o,function(){z.Instance.LeYou_action(303),a=n.ShopList[o];let e=[];e.push(a.data),n.ShopList[o].isBuy=!0,K.DataModule().GetUser().GetData().treasureItemList=n.ShopList,j.ShowGetReward(e,"",!1,qo.name),K.DataModule().GetUser().GetItem(e,at.Treasure),n.SetLoadInfo()}),i.m_videoBtn.onClick(o,function(){a=n.ShopList[o];let e=sC.store_reward,t=g.shop1;n.isShare_buy_shop3?j.GetRewardBtnFun(1,function(){z.Instance.DayShareStrategy_Add(e,!0),n.shopCall(a,o)},t):j.GetRewardBtnFun(0,function(){z.Instance.DayShareStrategy_Add(e,!1),n.shopCall(a,o)},t,i.m_videoBtn)}))}shopCall(e,t){let i=K.UIModule().GetUI(qo.UIName),o=[];o.push(e.data),i.ShopList[t].isBuy=!0,K.DataModule().GetUser().GetData().treasureItemList=i.ShopList,j.ShowGetReward(o),K.DataModule().GetUser().GetItem(o,at.Treasure),i.SetLoadInfo(),z.Instance.LW_StatisticsEvent(8007)}On_Item(e){e=this.view.m_itemList.getChildIndex(e);this.ShopList[e]}Box_onRenderItem(o,a){k.Platform==T.QQ&&(a.m_qq_tip.visible=!0);let m=this.ShopList[o+4];m.repertory=99;let e,t=5;a.m_keyBtn.m_guidance.visible=!1,a.m_keyBtn.m_redDot.visible=!1;var i=Laya.LocalStorage.getItem("AddUserKey");0==o?(t=K.DataModule().GetLocal().gameRule.GetShopBox1Pertory(),e=K.UIModule().GetUI(Ua.UIName).GetNowKey(tt.Silver),a.m_keyBtn.m_icon.url=x.GetFairyGUI_Icon("NewYearKey"+tt.Silver),i==tt.Silver&&(a.m_keyBtn.m_guidance.visible=!0)):(t=K.DataModule().GetLocal().gameRule.GetShopBox2Pertory(),e=K.UIModule().GetUI(Ua.UIName).GetNowKey(tt.Gold),a.m_keyBtn.m_icon.url=x.GetFairyGUI_Icon("NewYearKey"+tt.Gold),i==tt.Gold&&(a.m_keyBtn.m_guidance.visible=!0)),a.m_keyBtn.m_coinText=e.toString(),Number(e)<=0?a.m_keyBtn.m_backBg.visible=!0:(a.m_keyBtn.m_redDot.visible=!0,a.m_keyBtn.m_backBg.visible=!1);let n="";if(a.m_count.text=K.DataModule().GetLz().GetTextByPar("TreasureUI_repertory",m.repertory.toString(),t.toString()),"Video"==m.price||"0"==m.price)m.repertory<=0&&(this.view.m_tip2.visible=!1),k.useNewYearKey?a.m_BtnShow.setSelectedPage("video"):a.m_BtnShow.setSelectedPage("noKey_video"),a.m_icon.url=x.GetIcon("box_Chest_Endless"),a.m_myName.url=x.GetFairyGUI_Icon("TreasureUI_box2_text"),a.m_qq_tip.text="黄装(65%)紫装(30%)橙装(5%)";else{k.useNewYearKey?a.m_BtnShow.setSelectedPage("buy"):a.m_BtnShow.setSelectedPage("noKey_buy");let o=m.price;if("Chest_1"==m.data.id){let e=K.DataModule().GetLocal().shop.Get("Shop4").GemPrice.split(","),t=m.data.buyCount;t>=e.length-1&&(t=e.length-1),o=e[t],a.m_qq_tip.text="白装(33%)蓝装(33%)黄装(33%)",n="box_Chest_1",a.m_myName.url=x.GetFairyGUI_Icon("TreasureUI_box1_text"),a.m_icon.url=x.GetIcon(n),this.view.m_tip_box1.m_box2.visible=!1,this.view.m_tip_box1.m_box1.visible=!0}else{let t,i=K.DataModule().GetLocal().shop.GetAllIndex("Shop4");for(let e=0;e<i.length;e++)if("Chest_2"==i[e].Bonus){t=i[e].GemPrice.split(",");break}""==m.data.data&&(m.data.data="0");let e=Number(m.data.data);e>=t.length-1&&(e=t.length-1),o=t[e],n="box_Chest_2",a.m_myName.url=x.GetFairyGUI_Icon("TreasureUI_box1_2_text"),a.m_icon.url=x.GetIcon(n),a.m_qq_tip.text="白装(30%)蓝装(50%)黄装(15%)紫装(5%)",this.view.m_tip_box1.m_box2.visible=!0,this.view.m_tip_box1.m_box1.visible=!1}a.m_buyBtn.m_DiamondText.text=o}if(m.repertory<1?a.m_BtnShow.setSelectedPage("absence"):(a.touchable=!0,a.grayed=!1),this.isShare_buy_box=z.Instance.GetShareStrategy(sC.store_box),this.isShare_buy_box?j.IsShare(a.m_getBtn):this.isShare_buy_box=j.IsVideoAndShare(a.m_getBtn),a.m_nokey_buyBtn.m_DiamondText.text=a.m_buyBtn.m_DiamondText.text,!(this.Box_onClickNum>o)){let h=K.UIModule().GetUI(qo.UIName),t=(this.Box_onClickNum++,a.m_btn_info.onClick(o,function(){h.view["m_tip_box"+(o+1)].visible=!h.view["m_tip_box"+(o+1)].visible}),"Video"!=m.price&&"0"!=m.price||a.m_icon.onClick(this,function(){h.view.m_tip2.visible=!h.view.m_tip2.visible,h.view.m_tip2.visible&&h.view.m_tip2_Animation.play()}),function(e,t=!1){let o=(m=h.ShopList[e+4]).price,i=at.TreasureBox2;if("Chest_1"==m.data.id){i=at.TreasureBox1;let e=K.DataModule().GetLocal().shop.Get("Shop4").GemPrice.split(","),t=m.data.buyCount;t>=e.length-1&&(t=e.length-1),o=e[t]}if("Chest_2"==m.data.id){let t,i=K.DataModule().GetLocal().shop.GetAllIndex("Shop4");for(let e=0;e<i.length;e++)if("Chest_2"==i[e].Bonus){t=i[e].GemPrice.split(",");break}let e=Number(m.data.data);e>=t.length-1&&(e=t.length-1),o=t[e]}if(t)K.DataModule().GetUser().UseUserKey(Z.NewYearKey,tt.Silver,1);else{if(Number(o)>K.DataModule().GetUser().GetData().diamond)return console.log("钻石不够22"),void j.WindowUI_Show(Fo.Diamond_Insufficient);K.DataModule().GetUser().InterstitialAdNumberBuyBox++,K.DataModule().GetUser().ChangeDiamond(-Number(o),i)}z.Instance.LW_StatisticsEvent(1007,1..toString(),o);var a,n=K.DataModule().GetLocal().lottery.GetChest(m.data.id),n=j.GetItemDataAndIsShowBox(i,n);h.ShopList[e+4].isBuy=!0,--h.ShopList[e+4].repertory;let s="box_Chest_1",l=("Chest_1"==m.data.id?(s="box_Chest_1",t||h.ShopList[e+4].data.buyCount++):(s="box_Chest_2",a=Number(h.ShopList[e+4].data.data),t||(h.ShopList[e+4].data.data=(a+1).toString())),K.DataModule().GetLocal().shop.GetAllIndex("Shop4")),r=[];for(let e=0;e<l.length;e++)r.push(l[e].Weight);t=l[f.GetWeightRandom(r)].Bonus;h.ShopList[e+4].data.id=t,K.DataModule().GetUser().GetData().treasureItemList=h.ShopList,j.ShowGetReward(n,s),K.DataModule().GetUser().GetItem(n,i),h.SetLoadInfo()}),i=(a.m_buyBtn.onClick(o,function(){t(o)}),a.m_nokey_buyBtn.onClick(o,function(){t(o)}),function(e,t=!1){if(t)return K.DataModule().GetUser().UseUserKey(Z.NewYearKey,tt.Gold,1),void h.box_Call(m,e);m=h.ShopList[e+4];let i=sC.store_box,o=g.shop3;h.isShare_buy_box?j.GetRewardBtnFun(1,function(){z.Instance.DayShareStrategy_Add(i,!0),h.box_Call(m,e)},o):j.GetRewardBtnFun(0,function(){z.Instance.DayShareStrategy_Add(i,!1),h.box_Call(m,e)},o,a.m_getBtn)});a.m_getBtn.onClick(o,function(){i(o)}),a.m_nokey_getBtn.onClick(o,function(){i(o)}),a.m_keyBtn.onClick(o,function(){var e;if(1==a.m_keyBtn.m_backBg.visible)return K.AudioModule().OptimizePlayOnce(x.GetSound2("CuoWu")),void(0==o?(e=K.DataModule().GetLz().GetText("NewYearKey_"+tt.Silver),j.TopUI_TipShow(K.DataModule().GetLz().GetTextByPar("NewYearKey_Tip3",e))):(e=K.DataModule().GetLz().GetText("NewYearKey_"+tt.Gold),j.TopUI_TipShow(K.DataModule().GetLz().GetTextByPar("NewYearKey_Tip3",e))));if("end"!=Laya.LocalStorage.getItem("AddUserKey")){Laya.LocalStorage.setItem("AddUserKey","end");let e=K.UIModule().GetUI(Zg.UIName);e&&e.Guidance_shop_key()}(0==o?t:i)(o,!0)})}}box_Call(e,t){let i,o=!1;z.Instance.LW_StatisticsEvent(8004);var a=K.DataModule().GetLocal().gameRule.GetBoxEndless_Bonus().F1,a=(--K.DataModule().GetUser().GetData().treasureItemList[5].data.buyCount,K.DataModule().GetUser().GetData().treasureItemList[5].data.buyCount<=-1&&(K.DataModule().GetUser().GetData().treasureItemList[5].data.buyCount=a-1),0==K.DataModule().GetUser().GetData().treasureItemList[5].data.buyCount&&(K.DataModule().GetUser().GetData().treasureItemList[5].data.buyCount=a,o=!0),k.isTestLog&&console.log("当前保底状态",o,"剩余次数",K.DataModule().GetUser().GetData().treasureItemList[5].data.buyCount),K.DataModule().GetLocal().lottery.GetChest(e.data.id,o));i=j.GetItemDataAndIsShowBox(at.TreasureBox4,a),this.ShopList[t+4].isBuy=!0,--this.ShopList[t+4].repertory,K.DataModule().GetUser().GetData().treasureItemList=this.ShopList,j.ShowGetReward(i,"box_Chest_Endless"),K.DataModule().GetUser().GetItem(i,at.TreasureBox4),this.SetLoadInfo()}Box_On_Item(e){e=this.view.m_itemList.getChildIndex(e);this.ShopList[e+4],this.SetLoadInfo()}SetTime(){let e=Laya.LocalStorage.getItem("Treasure_Refresh_Time"),t=Laya.LocalStorage.getItem("Treasure_Box3_Refresh_Time");null!=t&&""!=t||(t="0"),this.refreshTime=this.refreshTime_R-(A.SystemTime-Number(e)),this.refreshTimeBox3=this.refreshTimeBox3_R-(A.SystemTime-Number(t));var i=f.Time_GetNowDayRemaining();this.Box_refreshTime=f.Time_MinuteTransitionTime(23-i.hour,59-i.minute,59-i.second),this.SetBox3Info(),this.RefreshTime()}RefreshTime(){this.view.m_time.text=f.Time_TransitionMinute(this.refreshTime);try{let e=this.view.m_boxList.getChildAt(0),t=this.view.m_boxList.getChildAt(1),i=this.view.m_Com_Box3,o=f.Time_TransitionHour(this.Box_refreshTime),a=f.Time_TransitionHour(this.refreshTimeBox3);i.m_time.text=K.DataModule().GetLz().GetTextByPar("TreasureUI_boxTime",a),e.m_time.text=K.DataModule().GetLz().GetTextByPar("TreasureUI_boxTime",o),t.m_time.text=K.DataModule().GetLz().GetTextByPar("TreasureUI_boxTime",o)}catch(e){console.warn("宝箱出错了",e)}}IsRefresh(){let e=!1,t=A.SystemTime,i=Laya.LocalStorage.getItem("Treasure_Refresh_Time");return k.isTestLog&&console.log("商店刷新时间",i,"系统时间",A.SystemTime,"剩余",t-Number(i)>=this.refreshTime_R),(null==i||""==i||t-Number(i)>=this.refreshTime_R||K.DataModule().GetUser().GetData().treasureItemList.length<1)&&(K.DataModule().GetUser().GetData().treasureItemList.length<1?K.DataModule().GetUser().RefreshTreasureShop(!0):K.DataModule().GetUser().RefreshTreasureShop(),e=!0),e}IsShareOrVideo(){this.isShare=z.Instance.GetShareStrategy(sC.store_refresh),this.isShare?j.IsShare(this.view.m_videoRefreshBtn):this.isShare=j.IsVideoAndShare(this.view.m_videoRefreshBtn)}VideoRefreshBtn_Call(){z.Instance.LW_StatisticsEvent(8003),K.DataModule().GetUser().RefreshTreasureShop(!0),this.SetLoadInfo()}onVideoRefreshBtn(){let e=this,t=sC.store_refresh,i=g.shop2;k.isTestLog&&console.log("当前分享值",e.isShare),e.isShare?j.GetRewardBtnFun(1,function(){z.Instance.DayShareStrategy_Add(t,!0),e.VideoRefreshBtn_Call()},i):j.GetRewardBtnFun(0,function(){z.Instance.DayShareStrategy_Add(t,!1),e.VideoRefreshBtn_Call()},i,e.view.m_videoRefreshBtn)}onUpdate(){this.view&&(this.CdTime-=A.TimeDelta,this.refreshTime-=1e3*A.TimeDelta,this.Box_refreshTime-=1e3*A.TimeDelta,this.refreshTimeBox3-=1e3*A.TimeDelta,this.CdTime<=0&&(this.CdTime=1,this.refreshTime<0&&(this.refreshTime=f.Time_Refresh_Interval(A.SystemTime,this.refreshTime_R),K.DataModule().GetUser().RefreshTreasureShop(!0),this.SetLoadInfo()),this.showBox3CD&&this.refreshTimeBox3<0&&(this.refreshTimeBox3=f.Time_Refresh_Interval(A.SystemTime,this.refreshTimeBox3_R),this.SetLoadInfo()),this.Box_refreshTime<0&&(K.DataModule().GetUser().TomorrowRefresh(),this.SetLoadInfo(),this.SetTime()),this.RefreshTime()))}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null)}Show(){super.Show(),this.Load()}SetHideInfo(){k.Platform==T.QQ&&Ko.Instance.BannerAdHide_TreasureUI();let e=K.UIModule().GetUI(Zg.UIName);e&&e.view&&e.Setm_btn_heroBox()}Hide(){this.SetHideInfo(),super.Hide(),this.UnLoad()}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(qo);return e.name=qo.UIName,t.uiName=qo.UIName,t}}),Yo=qo,Qo=(Yo.UIName="TreasureUI",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","DialUI")}onConstruct(){this.m_isDouble=this.getControllerAt(0),this.m_isNian=this.getControllerAt(1),this.m_c1=this.getControllerAt(2),this.m_YLPlatform=this.getControllerAt(3),this.m_Bg=this.getChildAt(0),this.m_n1=this.getChildAt(1),this.m_Btn_Close=this.getChildAt(2),this.m_videoBtn=this.getChildAt(3),this.m_freeBtn=this.getChildAt(4),this.m_freeCount=this.getChildAt(5),this.m_dialCom=this.getChildAt(6),this.m_urlBg1=this.getChildAt(7),this.m_urlBg2=this.getChildAt(8),this.m_n5=this.getChildAt(9),this.m_n7=this.getChildAt(10),this.m_maskBg=this.getChildAt(11),this.m_n23=this.getChildAt(12),this.m_lian2=this.getChildAt(13),this.m_lian1=this.getChildAt(14),this.m_n26=this.getChildAt(15),this.m_AgeinReaward=this.getChildAt(16),this.m_OppoLookBtn=this.getChildAt(17),this.m_OppoBannerAdBtn=this.getChildAt(18),this.m_qq_tip=this.getChildAt(19),this.m_t0=this.getTransitionAt(0)}}),Jo=(Qo.URL="ui://lcl1uligr2o63y2mq",class extends ${constructor(){super(...arguments),this.itemDataList=[],this.isFree=!0,this.isShare=!1,this.isRotate=!1,this.isDeceleration=!1,this.isStartTime=!1,this.startTime=2,this.nowTime=0,this.nowAngle=0,this.timer=0,this.keepTime=5,this.spped=3600,this.spped2=500,this.nowSpeed=0,this.nowDeceleration=0,this.deceleration=2e3,this.deceleration2=200,this.targetAngle=0,this.targetYes=!1,this.offset=3,this.timeCount=0,this.AllItemCount=6,this.Item_angle1=[0,25,335,359],this.Item_angle2=[35,85],this.Item_angle3=[95,144],this.Item_angle4=[155,205],this.Item_angle5=[215,265],this.Item_angle6=[275,324],this.rotation=220.8287998996043,this.target=1}Load(){null==this.view&&(this.view=this.CreatFGUIViewByView(Qo.createInstance()),this.AllOnClick(),this.LoadImage(),z.Instance.LW_StatisticsEvent(5005),k.FightNian&&(this.view.m_isNian.setSelectedIndex(1),"EN"==k.language?(this.view.m_lian1.url=x.GetIcon("chunlian2_EN"),this.view.m_lian2.url=x.GetIcon("chunlian1_EN")):(this.view.m_lian1.url=x.GetIcon2("chunlian2"),this.view.m_lian2.url=x.GetIcon2("chunlian1"))),k.Platform!=T.OPPO&&k.Platform!=T.VIVO||(this.view.m_YLPlatform.setSelectedPage("Oppo"),j.ShowNativeAd(this.view.m_OppoLookBtn,this.view.m_OppoBannerAdBtn,null,null),this.view.m_videoBtn.x=this.view.m_freeBtn.x)),k.Platform!=T.OPPO&&k.Platform!=T.VIVO||j.skipBtnDelayTime(this.view.m_Btn_Close),z.Instance.LeYou_action(201),z.Instance.LeYou_Video(g.dial,0),this.SetLoadInfo(),this.ShowBox()}ShowBox(){let e=[];e.push("Chest_Endless_1");var t=K.DataModule().GetUser().GetUserItemDataList(e);j.FreshRewardItem(this.view.m_AgeinReaward.m_mask.m_rewardCom,t[0],!1),this.view.m_AgeinReaward.m_mask.m_rewardCom.m_icon.setScale(.8,.8)}LoadImage(){this.view.m_urlBg1.url="ui://InGameUI/text_dial_title_doubleBg",this.view.m_urlBg2.url="ui://InGameUI/text_dial_title_double",this.view.m_dialCom.m_dial.url=x.GetIcon("Image_Dial3")}on_Btn_url(){z.Instance.LeYou_action(203),--K.DataModule().GetUser().GetData().dialTime,K.DataModule().GetUser().SetAgeinReaward("1"),this.StartRotion()}AllOnClick(){this.view.m_freeBtn.onClick(this,this.on_Btn_url),this.view.m_Btn_Close.onClick(this,this.onBtn_Close),this.view.m_videoBtn.onClick(this,this.m_videoBtn),this.view.m_AgeinReaward.m_GetAgianBtn.onClick(this,this.award)}onBtn_Close(){K.UIModule().HideUI(Jo.UIName)}m_videoBtn(){this.On_VideoBtn()}IsShareOrVideo(){this.isShare=z.Instance.GetShareStrategy(sC.pannel_again),this.isShare?j.IsShare(this.view.m_videoBtn):this.isShare=j.IsVideoAndShare(this.view.m_videoBtn),k.isTestLog&&console.log("当前分享状态",this.isShare)}Video_Call(){z.Instance.LW_StatisticsEvent(8008,"",1),z.Instance.LeYou_action(204);let e=K.UIModule().GetUI(Jo.UIName);"1"==K.DataModule().GetUser().GetAgeinReaward()?(K.DataModule().GetUser().SetAgeinReaward("2"),e.StartRotion(5)):e.StartRotion(),e.IsShareOrVideo()}On_VideoBtn(){let e=K.UIModule().GetUI(Jo.UIName),t=sC.pannel_again,i=g.dial;e.isShare?j.GetRewardBtnFun(1,function(){z.Instance.DayShareStrategy_Add(t,!0),e.Video_Call()},i):j.GetRewardBtnFun(0,function(){z.Instance.DayShareStrategy_Add(t,!1),e.Video_Call()},i,e.view.m_videoBtn)}RefrsehUI(){let e=K.DataModule().GetUser().GetData().dialTime,t=!1;1<=e?(t=!0,this.view.m_freeCount.text=e.toString(),this.isFree=!0):(this.isFree=!1,this.view.m_freeCount.text="0"),this.view.m_freeBtn.visible=t,this.view.m_videoBtn.visible=!t,this.view.m_AgeinReaward.visible=!t;var i=K.DataModule().GetUser().GetAgeinReaward();"0"==i&&(this.view.m_AgeinReaward.visible=!1),"1"==i&&(this.view.m_AgeinReaward.visible=!0),"2"==i&&(this.view.m_AgeinReaward.visible=!1),"3"==i&&(this.view.m_AgeinReaward.visible=!1),this.view.m_videoBtn.visible&&no.Statistics_T0R(g.dial),"true"==Laya.LocalStorage.getItem("NextDouble")?this.view.getController("isDouble").setSelectedPage("1"):this.view.getController("isDouble").setSelectedPage("0")}SetLoadInfo(){this.itemDataList=[],this.view.m_freeBtn.m_redDot.visible=!0,k.Platform==T.QQ&&(this.view.m_qq_tip.visible=!0),this.LoadItemList(),this.view.m_maskBg.visible=this.isRotate,this.RefrsehUI(),this.IsShareOrVideo()}LoadItemList(){var o,e=K.DataModule().GetUser().GetLotteryData();if(""==e){let t=K.DataModule().GetLocal().lottery.GetDial(),i=[];for(let e=0;e<t.length;e++)-1!=t[e].Bonus.indexOf("Random")?""==(o=K.DataModule().GetLocal().lottery.CreationEquip(t[e].Bonus))?i.push("Gem_70"):i.push(o):i.push(t[e].Bonus+"_"+t[e].Amount1);this.itemDataList=K.DataModule().GetUser().GetUserItemDataList(i);var a=JSON.stringify(this.itemDataList);K.DataModule().GetUser().SetLotteryData(a)}else this.itemDataList=JSON.parse(e);for(let t=0;t<6;t++){let e="";this.itemDataList[t].type==Z.Coin&&(e=x.GetIcon(nt.item_CoinHeap)),this.itemDataList[t].type==Z.Diamond&&(e=x.GetIcon(nt.item_DiamondHeap)),j.FreshRewardItem(this.view.m_dialCom["m_item"+(t+1)],this.itemDataList[t],!1,"",e),this.itemDataList[t].type==Z.WeaponSkin||this.itemDataList[t].type==Z.HeroPiece?(this.view.m_dialCom["m_item"+(t+1)].m_gear.m_bg.visible=!0,this.view.m_dialCom["m_item"+(t+1)].m_Count.visible=!0,this.view.m_dialCom["m_item"+(t+1)].m_Count.text="x"+this.itemDataList[t].count.toString()):this.view.m_dialCom["m_item"+(t+1)].m_gear.m_bg.visible=!1}}onUpdate(){this.view&&this.onUpdateDail()}onUpdateDail(){if(this.isRotate){this.timer+=A.TimeDeltaNoScale;if(.016<this.timer){if(this.timer=0,this.keepTime-=.016,this.keepTime,this.targetYes&&(this.timeCount++,this.nowTime+=.016),this.nowSpeed<this.spped2?this.nowDeceleration=S.Lerp(this.nowDeceleration,this.deceleration2,.16):this.nowDeceleration=this.deceleration,this.nowSpeed-=.016*this.nowDeceleration,this.nowSpeed<=0)return this.isRotate=!1,this.targetYes=!1,void this.GetAward();this.nowAngle+=.016*this.nowSpeed,this.isDeceleration||(this.isDeceleration=!0,this.nowDeceleration=this.deceleration)}this.view.m_dialCom.rotation=S.LerpAngle(this.view.m_dialCom.rotation,this.nowAngle,.5)}}SetTargetAngle(e){let t="Item_angle"+(this.target=e),i=0,o=1;o=1==e?f.GetRandomValue(50)?(i=this.Item_angle1[0],this.Item_angle1[1]):(i=this.Item_angle1[2],this.Item_angle1[3]):(i=this[t][0],this[t][1]),this.targetAngle=f.GetF1_F2RandomValue(i+this.offset,o-this.offset),this.nowAngle=360+this.targetAngle-this.rotation}StartRotion(e=-1){this.isRotate||(this.view.m_Btn_Close.visible=!1,this.view.m_maskBg.visible=!0,-1==e?(this.GetTarget(),this.SetTargetAngle(this.target)):this.SetTargetAngle(e),this.nowTime=0,this.timeCount=0,this.isStartTime=!1,this.nowSpeed=this.spped,this.nowDeceleration=0,this.isDeceleration=!1,this.isRotate=!0)}GetTarget(){var t=K.DataModule().GetLocal().lottery.GetDial();k.isTestLog&&console.log("当前转盘数据",t);let i=[];for(let e=0;e<t.length;e++)t[e].Bonus==Z.NextDouble&&"true"==Laya.LocalStorage.getItem("NextDouble")?i.push(0):i.push(t[e].Weight);var e=f.GetWeightRandom(i);this.target=e+1}GetAward(){this.view.m_Btn_Close.visible=!0;let o=[],e=K.DataModule().GetUser().NewUserItemData(),t=this.itemDataList[this.target-1],a=(e.count=t.count,e.buyCount=t.buyCount,e.data=t.data,e.id=t.id,e.level=t.level,e.rare=t.rare,e.res=t.res,e.tableID=t.tableID,e.type=t.type,o.push(e),""),n=("true"==Laya.LocalStorage.getItem("NextDouble")&&(o[0].count*=2,Laya.LocalStorage.setItem("NextDouble","false")),k.isTestLog&&console.log("获得奖励",o,this.itemDataList),[]);if(k.FightNian){var i=.01*K.DataModule().GetLocal().event.Get("2021YearMonster_Enter").F3;if(Math.random()<i){let e=K.DataModule().GetUser().NewUserItemData();e.type=Z.BaoZhu,e.id=Z.BaoZhu,n.push(e),b.Warn("获得爆竹")}}if(o[0].type==Z.Box){a="box_"+o[0].id;let e=K.DataModule().GetLocal().lottery.GetChest(o[0].id+"_"+o[0].count),t=a,i=K.DataModule().GetUser().GetUserItemDataList(e,!1);i=i.concat(n),j.ShowGetReward(i,t,!1,"",function(){}),K.DataModule().GetUser().GetItem(i,at.Dial)}else o=o.concat(n),j.ShowGetReward(o,a,!1,"",function(){}),K.DataModule().GetUser().GetItem(o,at.Dial);this.view.m_maskBg.visible=!1,this.SetLoadInfo()}award(e){if("2"==K.DataModule().GetUser().GetAgeinReaward()){let e="Chest_Endless",t=K.DataModule().GetLocal().lottery.GetChest(e+"_1"),i=K.DataModule().GetUser().GetUserItemDataList(t,!1),o=this;j.ShowGetReward(i,"box_Chest_Endless",!1,Jo.UIName,function(){o.view&&o.SetLoadInfo()}),K.DataModule().GetUser().SetAgeinReaward("3")}}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null)}Show(){super.Show(),this.Load()}SetHideInfo(){z.Instance.LeYou_action(202),z.Instance.LW_StatisticsEvent(8008,"",0)}Hide(){this.SetHideInfo(),super.Hide(),this.UnLoad()}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(Jo);return e.name=Jo.UIName,t.uiName=Jo.UIName,t}}),Xo=Jo,$o=(Xo.UIName="DialUI",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","WeaponStoreUI")}onConstruct(){this.m_YLPlatform=this.getControllerAt(0),this.m_n146=this.getChildAt(0),this.m_backBtn=this.getChildAt(1),this.m_n131=this.getChildAt(2),this.m_n132=this.getChildAt(3),this.m_List=this.getChildAt(4),this.m_n147=this.getChildAt(5),this.m_OppoAdBtn=this.getChildAt(6)}}),ea=($o.URL="ui://lcl1uligw79v3y2j2",class extends ${constructor(){super(...arguments),this.nowChooseID="",this.clickList=[]}Load(){var e;null==this.view&&(this.clickList=[],this.view=this.CreatFGUIViewByView($o.createInstance()),z.Instance.LW_StatisticsEvent(5009),this.view.m_backBtn.onClick(this,function(){K.UIModule().HideUI(ea.UIName)}),e=K.DataModule().GetLocal().weapon.GetDatas(),this.view.m_List.m_List.itemRenderer=Laya.Handler.create(this,this.renderListItem,null,!1),this.view.m_List.m_List.setVirtual(),this.view.m_List.m_List.numItems=e.length,q.EcsGameMgr.nowGame.UseMergeNewBg(),K.UIModule().HideUI(Zg.UIName),K.UIModule().ShowUI(Ua.UIName),k.Platform!=T.OPPO&&k.Platform!=T.VIVO||(this.view.m_YLPlatform.setSelectedPage("Oppo"),j.ShowNativeAd(null,null,this.view.m_OppoAdBtn,null))),this.SetLoadInfo()}SetLoadInfo(){var e=K.DataModule().GetUser().GetData().mergeLevel;7<e&&(this.view.m_List.m_List.scrollPane.posY=112*(e-7))}renderListItem(e,t){this.FreshItem(e,t)}FreshItem(e,i){let t=K.DataModule().GetLocal().weapon.GetByLevel(e+1),o=(i.m_icon.url=x.GetIcon(t.uiRes),i.m_iconBlack.url=i.m_icon.url,i.m_Name.text=K.DataModule().GetLz().GetText("WN_"+t.ID),K.DataModule().GetLocal().gameRule.GetBattlePoint_weapon(t.ID));if(i.m_combatValue.text=o.toString(),i.m_LvText.text=t.Level.toString(),i.data=t.ID,K.DataModule().GetUser().WeaponIsUnlock(t.ID)?(e=K.DataModule().GetUser().GetData().mergeLevel-t.Level,i.m_c1.setSelectedPage("NeedMerge"),e<3?i.m_costText.text=K.DataModule().GetLz().GetTextByPar("WeaponStoreUI_tip1",(t.Level+3).toString()):e<5?(i.m_c1.setSelectedPage("Diamond"),i.m_buyBtn.m_type.setSelectedPage("diamond"),i.m_buyBtn.m_value.text=K.DataModule().GetLocal().weapon.GetPriceDiamond(t.Level).toString()):(i.m_c1.setSelectedPage("Coin"),i.m_buyBtn.m_type.setSelectedPage("coin"),i.m_buyBtn.m_value.text=Y.converStr(K.DataModule().GetLocal().weapon.GetPrice(t.Level))),1==t.Level&&(i.m_c1.setSelectedPage("Coin"),i.m_buyBtn.m_type.setSelectedPage("coin"),i.m_buyBtn.m_value.text=Y.converStr(K.DataModule().GetLocal().weapon.GetPrice(t.Level)))):(e=K.DataModule().GetLz().GetText("NotUnlock"),i.m_costText.text=e,i.m_c1.setSelectedPage("Lock")),-1==this.clickList.indexOf(i)){this.clickList.push(i);let t=this;i.m_buyBtn.onClick(this,function(e){t.onClickItem(i)})}}onClickItem(e){let t=e.data,i=this.view.m_List.m_List.childIndexToItemIndex(this.view.m_List.m_List.getChildIndex(e));var o,a;"Diamond"==e.m_c1.selectedPage&&(0<=(o=K.DataModule().GetUser().BuyWeaponById_Diamond(t))&&(a=K.DataModule().GetLz().GetText("ShowMessage_tip1"),j.ShowMessage(a),K.AudioModule().OptimizePlayOnce(x.GetSound2("Purchase")),this.FreshItem(i,e)),-1==o&&(j.WindowUI_Show(Fo.Diamond_Insufficient),K.AudioModule().OptimizePlayOnce(x.GetSound2("CuoWu"))),-2==o&&(a=K.DataModule().GetLz().GetText("ShowMessage_tip2"),j.ShowMessage(a))),"Coin"==e.m_c1.selectedPage&&(0<=(o=K.DataModule().GetUser().BuyWeaponById_Coin(t))&&(z.Instance.LW_StatisticsEvent(1006,t.split("Weapon")[1],1..toString(),""),K.AudioModule().OptimizePlayOnce(x.GetSound2("Purchase")),a=K.DataModule().GetLz().GetText("ShowMessage_tip1"),j.ShowMessage(a),this.FreshItem(i,e)),-1==o&&(j.WindowUI_Show(Fo.Coin_Insufficient),K.AudioModule().OptimizePlayOnce(x.GetSound2("CuoWu"))),-2==o&&(a=K.DataModule().GetLz().GetText("ShowMessage_tip2"),j.ShowMessage(a)))}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null,K.UIModule().HideUI(Ua.UIName),K.UIModule().ShowUI(Zg.UIName))}Show(){super.Show(),this.Load()}Hide(){super.Hide(),this.UnLoad()}onUpdate(){this.isShow}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(ea);return e.name=ea.UIName,t.uiName=ea.UIName,t}}),ta=ea,ia=(ta.UIName="WeaponStoreUI",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","LevelRewardUI")}onConstruct(){this.m_n29=this.getChildAt(0),this.m_n27=this.getChildAt(1),this.m_list=this.getChildAt(2),this.m_n30=this.getChildAt(3),this.m_Btn_Close=this.getChildAt(4)}}),oa=(ia.URL="ui://lcl1uligr2o63y2ms",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","SubHeroUI")}onConstruct(){this.m_c1=this.getControllerAt(0),this.m_isIphoneX=this.getControllerAt(1),this.m_YLPlatform=this.getControllerAt(2),this.m_n42=this.getChildAt(0),this.m_SpecialEffectTip=this.getChildAt(1),this.m_heroName=this.getChildAt(2),this.m_n45=this.getChildAt(3),this.m_rareIcon=this.getChildAt(4),this.m_n47=this.getChildAt(5),this.m_n7=this.getChildAt(6),this.m_proList=this.getChildAt(7),this.m_detailtitle=this.getChildAt(8),this.m_n20=this.getChildAt(9),this.m_heroBg=this.getChildAt(10),this.m_HeroList=this.getChildAt(11),this.m_n16=this.getChildAt(12),this.m_buyBtn=this.getChildAt(13),this.m_buyVideoBtn=this.getChildAt(14),this.m_lookBtn=this.getChildAt(15),this.m_lookBtn_debris=this.getChildAt(16),this.m_lookBtn_buy=this.getChildAt(17),this.m_text_lockTip=this.getChildAt(18),this.m_unlockspbar=this.getChildAt(19),this.m_n422=this.getChildAt(20),this.m_text_nowCount=this.getChildAt(21),this.m_psbar=this.getChildAt(22),this.m_n491=this.getChildAt(23),this.m_n501=this.getChildAt(24),this.m_lvUpproList=this.getChildAt(25),this.m_levelUptitle=this.getChildAt(26),this.m_levelUpBtn=this.getChildAt(27),this.m_levelUpGroup=this.getChildAt(28),this.m_OppoAdBtn=this.getChildAt(29),this.m_showInfo=this.getTransitionAt(0)}}),aa=(oa.URL="ui://lcl1ulighhw83y2hi",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","HeroBtn")}onConstruct(){this.m_StateCtrl=this.getControllerAt(0),this.m_ChooseCtrl=this.getControllerAt(1),this.m_isUsing=this.getControllerAt(2),this.m_choose=this.getChildAt(0),this.m_icon=this.getChildAt(1),this.m_dark=this.getChildAt(2),this.m_bar=this.getChildAt(3),this.m_needText=this.getChildAt(4),this.m_diamond=this.getChildAt(5),this.m_coin=this.getChildAt(6),this.m_lock=this.getChildAt(7),this.m_n11=this.getChildAt(8),this.m_barCom=this.getChildAt(9),this.m_text_nowCount=this.getChildAt(10),this.m_Image_Piece=this.getChildAt(11),this.m_redDot=this.getChildAt(12),this.m_heroTypeTip=this.getChildAt(13)}}),na=(aa.URL="ui://lcl1ulighhw83y2i1",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","LockLine")}onConstruct(){this.m_n7=this.getChildAt(0)}}),sa=(na.URL="ui://lcl1uligw7ep3y2i2",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","RankInfoUI")}onConstruct(){this.m_YLPlatform=this.getControllerAt(0),this.m_maskBg=this.getChildAt(0),this.m_n1=this.getChildAt(1),this.m_Btn_Close=this.getChildAt(2),this.m_n4=this.getChildAt(3),this.m_list=this.getChildAt(4),this.m_n15=this.getChildAt(5),this.m_n16=this.getChildAt(6),this.m_OppoAdBtn=this.getChildAt(7)}}),la=(sa.URL="ui://lcl1uligjiri3y304",class extends ${constructor(){super(...arguments),this.showIng=!1,this.isOne=!0,this.isJump=!1,this.List=[],this.jumpFun=!1}Load(){let e=this;var t;null==this.view&&(this.view=this.CreatFGUIViewByView(sa.createInstance()),this.AllOnClick(),this.LoadImage(),k.Platform!=T.OPPO&&k.Platform!=T.VIVO||(j.ShowNativeAd(null,null,this.view.m_OppoAdBtn,null),this.view.m_YLPlatform.setSelectedPage("Oppo"))),this.showIng=!0,this.SetLoadInfo(),0==this.jumpFun&&3<(t=K.DataModule().GetUser().GetData().userMedal.level)&&this.SetposY(135*(t-3),200),e.isOne||(z.Instance.LW_StatisticsEvent(5006),z.Instance.LeYou_action(401)),Laya.timer.once(100,this,function(){try{e.view&&e.isOne&&(e.isOne=!1,e.Hide(),e.Show())}catch(e){}})}SetposY(e,t){let i=this;Laya.timer.once(50,this,function(){try{i.view.m_list.scrollPane.posY=e}catch(e){}})}LoadImage(){}AllOnClick(){this.view.m_Btn_Close.onClick(this,this.onBtn_Close)}onBtn_Close(){z.Instance.LeYou_action(402),K.UIModule().HideUI(la.UIName)}SetJumpType(e,t){this.jumpFun=t,this.isJump=!0,K.UIModule().ShowUI(la.UIName);t=e.split("_"),Laya.timer.clearAll(this),e=Number(t[1]);3<e&&this.SetposY(135*(e-3),500)}SetLoadInfo(){this.isJump=!1,this.List_Refresh()}List_Refresh(){this.List=K.DataModule().GetLocal().medal.GetDatas(),this.view.m_list.itemRenderer=Laya.Handler.create(this,this.onRenderItem,null,!1),this.view.m_list.setVirtual(),this.view.m_list.numItems=this.List.length,this.view.m_list.on(fairygui.Events.CLICK_ITEM,this,this.On_Item)}onRenderItem(e,t){var i=this.List[e];t.m_nowRank.visible=!1,t.m_nowRankBg.visible=!1;let o=K.DataModule().GetUser(),a=(K.DataModule().GetUser().GetData().userMedal.level==i.Level&&(t.m_nowRank.visible=!0,t.m_nowRankBg.visible=!0),!1),n=K.DataModule().GetUser().GetData().userMedal.hasGetRewardLevel;for(let e=0;e<n.length;e++)if(i.Level==n[e]){a=!0;break}a?t.m_isEnd.setSelectedPage("0"):t.m_isEnd.setSelectedPage("1"),j.FreshMedal(t.m_userMedal,i.Level,i.Star,!1);let s=o.GetUserItemDataList(i.Bonus);t.m_list.numItems=0,t.m_list.itemRenderer=Laya.Handler.create(this,function(e,t){let i="",o="",a=!1;s[e].type==Z.UnlockHero?(i=K.DataModule().GetLz().GetText("Unlock")+"\n",a=!0,o=x.GetFairyGUI_Icon("unlockBg1")):s[e].type==Z.Hero&&(i=K.DataModule().GetLz().GetText("Hero_Get")+"\n",a=!0),t.m_icon.url="",t.m_topIcon.url="",t.m_iconDefault.url="",t.m_iconNotAutoSize.url="",j.FreshRewardItem(t,s[e],a,"","",!1,i,o)},null,!1),t.m_list.numItems=s.length}On_Item(e){e=this.view.m_list.getChildIndex(e);this.List[e],this.nowIndex=e}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null)}Show(){super.Show(),this.Load()}SetHideInfo(){this.jumpFun&&(this.jumpFun=!1,K.UIModule().GetUI(ya.UIName).RefreshList())}Hide(){this.SetHideInfo(),super.Hide(),this.UnLoad()}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(la);return e.name=la.UIName,t.uiName=la.UIName,t}}),ra=la,ha=(ra.UIName="RankInfoUI",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","SignUI")}onConstruct(){this.m_Btn=this.getControllerAt(0),this.m_signType=this.getControllerAt(1),this.m_ad=this.getControllerAt(2),this.m_maskBg=this.getChildAt(0),this.m_n2=this.getChildAt(1),this.m_OppoEnd=this.getChildAt(2),this.m_getBtn=this.getChildAt(3),this.m_videoBtn=this.getChildAt(4),this.m_Btn_Close=this.getChildAt(5),this.m_textTip1=this.getChildAt(6),this.m_n13=this.getChildAt(7),this.m_OppoVideoBtn=this.getChildAt(8),this.m_getBtn2=this.getChildAt(9),this.m_n17=this.getChildAt(10),this.m_list=this.getChildAt(11),this.m_day7=this.getChildAt(12),this.m_AfterBtn=this.getChildAt(13),this.m_videoBtn2=this.getChildAt(14),this.m_n10=this.getChildAt(15),this.m_OppoBannerAdBtn=this.getChildAt(16),this.m_OppoLookBtn=this.getChildAt(17)}}),ma=(ha.URL="ui://lcl1uligjgqy3y2s1",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","BaoZhuGiftUI")}onConstruct(){this.m_ad=this.getControllerAt(0),this.m_bg=this.getChildAt(0),this.m_n0=this.getChildAt(1),this.m_bgicon=this.getChildAt(2),this.m_n18=this.getChildAt(3),this.m_n19=this.getChildAt(4),this.m_effice_fluxes=this.getChildAt(5),this.m_Btn_Close=this.getChildAt(6),this.m_n14=this.getChildAt(7),this.m_Btn_Video=this.getChildAt(8),this.m_btn_Close2=this.getChildAt(9)}}),da=(ma.URL="ui://lcl1uligblav3y3ck",class extends ${Load(){null==this.view&&(this.view=this.CreatFGUIViewByView(ma.createInstance()),this.AllOnClick(),this.LoadImage()),this.SetLoadInfo()}LoadImage(){let e=K.DataModule().GetUser().NewUserItemData();e.type=Z.BaoZhu,e.id=Z.BaoZhu,"EN"==k.language?this.view.m_bgicon.url=x.GetIcon("BaoZhuGiftBg2_EN"):this.view.m_bgicon.url=x.GetIcon2("BaoZhuGiftBg2")}AllOnClick(){this.view.m_Btn_Close.onClick(this,function(){K.UIModule().HideUI(da.UIName)}),this.view.m_btn_Close2.onClick(this,function(){K.UIModule().HideUI(da.UIName)}),this.view.m_Btn_Video.onClick(this,this.On_VideoBtn)}On_VideoBtn(){j.GetRewardBtnFun(0,function(){K.DataModule().GetUser().GetBaoZhuGiftSaveItem().buyCount=1,j.GetItemDataAndIsShowBox(g.baozhuGift,["BaoZhu_BaoZhu_1"],0),K.UIModule().HideUI(da.UIName)},g.baozhuGift,this.view.m_Btn_Video)}SetLoadInfo(){}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null)}Show(){super.Show(),this.Load()}SetHideInfo(){f.PrioritySetShow()}Hide(){this.SetHideInfo(),super.Hide(),this.UnLoad()}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(da);return e.name=da.UIName,t.uiName=da.UIName,t}}),ca=da,ua=(ca.UIName="BaoZhuGiftUI",class extends ${constructor(){super(...arguments),this.List=[],this.nowDay=0,this.isSign=!1,this.isLoop=!1,this.isLoadDataTime=!1,this.jumpFun=!1,this.isShare=!1}Load(){null==this.view&&(this.view=this.CreatFGUIViewByView(ha.createInstance()),this.AllOnClick(),this.AllEvent(),this.LoadImage(),z.Instance.LW_StatisticsEvent(5002),k.Platform!=T.OPPO&&k.Platform!=T.VIVO||(j.ShowNativeAd(this.view.m_OppoLookBtn,this.view.m_OppoBannerAdBtn,null,null),this.view.m_ad.setSelectedPage("Oppo"),j.skipBtnDelayTime(this.view.m_Btn_Close)),this.view.m_OppoVideoBtn.visible?j.RandomAdBtnPosTow(this.view.m_OppoLookBtn,this.view.m_OppoVideoBtn,this.view.width):j.RandomAdBtnPosTow(this.view.m_OppoLookBtn,this.view.m_OppoEnd,this.view.width),k.Platform==T.WECHAT&&this.view.m_ad.setSelectedPage("TT")),z.Instance.LeYou_action(102),z.Instance.LeYou_Video(g.sign,0),this.SetLoadInfo()}LoadImage(){this.view.m_day7.m_n7.url=x.GetIcon("SignBG2")}AllEvent(){}Event_Destroy(){}GetNowSignData(e){var t=K.DataModule().GetUser().GetData().signData.data;for(let e=0;e<t.length;e++);}AllOnClick(){this.view.m_Btn_Close.onClick(this,this.onBtn_Close),this.view.m_day7.onClick(this,this.on_day7),this.view.m_videoBtn.onClick(this,this.On_VideoBtn),this.view.m_OppoVideoBtn.onClick(this,this.On_VideoBtn),this.view.m_getBtn.onClick(this,this.on_getBtn),this.view.m_videoBtn2.onClick(this,this.On_VideoBtn),this.view.m_getBtn2.onClick(this,this.on_getBtn)}on_getBtn(){z.Instance.LW_StatisticsEvent(8024,0),this.GetDayItemReward(this.nowDay-1,!1),K.DataModule().GetUser().InterstitialAdNumberSign++,this.SubscribeMessage()}SubscribeMessage(){T.IS_WECHAT_PLATFORM&&CC.Instance.SubscribeMessage(ua.UIName)}on_day7(){}onBtn_Close(){K.UIModule().HideUI(ua.UIName),z.Instance.LeYou_action(103)}SetLoadInfo(){this.isLoadDataTime=W.loginDataEnd;var e=K.DataModule().GetUser().GetData().signData,e=(this.nowDay=e.nowDay,7<this.nowDay&&(this.isLoop=!0,this.nowDay=this.nowDay%7,0==this.nowDay&&(this.nowDay=7)),e.data[this.nowDay-1]);this.isSign=e.isSign,T.IS_OPPO_PLATFORM||T.IS_VIVO_PLATFORM?(this.view.m_OppoVideoBtn.touchable=!this.isSign,this.view.m_OppoVideoBtn.grayed=this.isSign):(this.view.m_videoBtn.touchable=!this.isSign,this.view.m_videoBtn.grayed=this.isSign),this.isSign?this.view.m_Btn.setSelectedPage("end"):(this.view.m_Btn.setSelectedPage("show"),no.Statistics_T0R(g.sign)),k.isTestLog&&console.warn("今日数据",e,"是否签到",this.isShow),this.List_Refresh(),this.IsShareOrVideo()}List_Refresh(){this.List=[];let t=[];t=this.isLoop?(k.Platform==T.OPPO||k.Platform==T.VIVO?this.view.m_signType.setSelectedPage("Oppo_After7day"):this.view.m_signType.setSelectedPage("After7day"),K.DataModule().GetLocal().quest.GetLoginSign_Loop()):(k.Platform==T.OPPO||k.Platform==T.VIVO?this.view.m_signType.setSelectedPage("Oppo_0"):this.view.m_signType.setSelectedPage("0"),K.DataModule().GetLocal().quest.GetLoginSign()),k.isTestLog&&console.log("登录签到数据",t);for(let e=0;e<t.length;e++){var i=t[e].Bonus,i=K.DataModule().GetUser().GetUserItemData(i);this.List.push(i)}this.view.m_list.itemRenderer=Laya.Handler.create(this,this.onRenderItem,null,!1),this.view.m_list.numItems=6,this.view.m_list.on(fairygui.Events.CLICK_ITEM,this,this.On_Item),this.SetDay7(),this.SetAfterBtn(this.List[0])}SetAfterBtn(e){let t="";e.type==Z.Diamond&&(t=x.GetIcon("item_DiamondHeap")),e.type==Z.Coin&&(t=x.GetIcon("item_CoinHeap")),this.view.m_AfterBtn.m_maskBg.visible=this.isSign,this.view.m_AfterBtn.m_end.visible=this.isSign,this.view.m_AfterBtn.m_dayurl.visible=!1,this.view.m_AfterBtn.m_dayIng.visible=!0,j.FreshRewardItem(this.view.m_AfterBtn.m_RewardItem,e,!1,"",t)}SetDay7(){this.List[6],this.view.m_day7.touchable=!1,7==this.nowDay&&(this.view.m_day7.touchable=!this.isSign,this.view.m_day7.m_end.visible=this.isSign,this.view.m_day7.m_n5.visible=!this.isSign,this.view.m_day7.m_maskBg.visible=this.isSign)}onRenderItem(e,t){let i=this.List[e],o=K.DataModule().GetUser().GetData().signData.data[e],a="";i.type==Z.Diamond&&(a=x.GetIcon("item_DiamondHeap")),i.type==Z.Coin&&(a=x.GetIcon("item_CoinHeap")),j.FreshRewardItem(t.m_RewardItem,i,!1,"",a),t.m_dayurl.url=x.GetFairyGUI_Icon("day "+(e+1)),this.nowDay==e+1?(t.m_dayIng.visible=!0,t.m_RewardItem.m_gear.m_bg.visible=!1,o.isSign?t.getTransition("t0").stop():t.getTransition("t0").play(null,-1)):t.m_dayIng.visible=!1,t.m_end.visible=o.isSign,t.m_maskBg.visible=o.isSign,this.nowDay==o.day?t.touchable=!o.isSign:t.touchable=!1}On_Item(e){}GetDayItemReward(e,t=!1){let i=this.List[e],o=(t?(i.type!=Z.Hero&&i.type!=Z.UnlockHero&&(i.count*=2),z.Instance.LeYou_action(105)):z.Instance.LeYou_action(104),[]),a="";i.type==Z.Box?(a="box_"+i.id,o=K.DataModule().GetUser().GetUserItemDataList(K.DataModule().GetLocal().lottery.GetChest(i.id+"_"+i.count))):o.push(i),j.ShowGetReward(o,a,!1),K.DataModule().GetUser().GetItem(o,at.sign),K.DataModule().GetUser().GetData().signData.data[e].isSign=!0,this.SetLoadInfo(),k.isTestLog&&console.log("奖励:",o,this.List,K.DataModule().GetUser().GetData().signData),K.DataModule().GetUser().SaveData()}SetJumpType(e,t){this.jumpFun=t,K.UIModule().ShowUI(ua.UIName)}IsShareOrVideo(){this.isShare=z.Instance.GetShareStrategy(sC.sign_double),this.isShare?k.Platform==T.OPPO||k.Platform==T.VIVO?j.IsShare(this.view.m_OppoVideoBtn):j.IsShare(this.view.m_videoBtn):k.Platform==T.OPPO||k.Platform==T.VIVO?this.isShare=j.IsVideoAndShare(this.view.m_OppoVideoBtn):this.isShare=j.IsVideoAndShare(this.view.m_videoBtn)}Video_Call(){z.Instance.LW_StatisticsEvent(8024,1);let e=K.UIModule().GetUI(ua.UIName);e.GetDayItemReward(e.nowDay-1,!0),e.IsShareOrVideo(),this.SubscribeMessage()}On_VideoBtn(){let e=K.UIModule().GetUI(ua.UIName),t=sC.sign_double;e.isShare?j.GetRewardBtnFun(1,function(){z.Instance.DayShareStrategy_Add(t,!0),e.Video_Call()},g.sign):k.Platform==T.OPPO||k.Platform==T.VIVO?j.GetRewardBtnFun(0,function(){z.Instance.DayShareStrategy_Add(t,!1),e.Video_Call()},g.sign,e.view.m_OppoVideoBtn):j.GetRewardBtnFun(0,function(){z.Instance.DayShareStrategy_Add(t,!1),e.Video_Call()},g.sign,e.view.m_videoBtn)}onUpdate(){!this.view||this.isLoadDataTime||W.loginDataEnd&&(this.SetLoadInfo(),this.isLoadDataTime=!0)}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null)}Show(){super.Show(),this.Load()}SetHideInfo(){this.jumpFun&&(this.jumpFun=!1,K.UIModule().GetUI(ya.UIName).RefreshList()),k.FightNian&&0==K.DataModule().GetUser().GetBaoZhuGiftSaveItem().buyCount?K.UIModule().ShowUI(ca.UIName):f.PrioritySetShow(),this.Event_Destroy()}Hide(){this.SetHideInfo(),super.Hide(),this.UnLoad()}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(ua);return e.name=ua.UIName,t.uiName=ua.UIName,t}}),pa=ua,ga=(pa.UIName="SignUI",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","NewYear2021UI")}onConstruct(){this.m_bg=this.getChildAt(0),this.m_n0=this.getChildAt(1),this.m_Btn_Close=this.getChildAt(2),this.m_loadBg=this.getChildAt(3),this.m_n5=this.getChildAt(4),this.m_getBtn=this.getChildAt(5),this.m_n6=this.getChildAt(6),this.m_n7=this.getChildAt(7),this.m_n8=this.getChildAt(8),this.m_list=this.getChildAt(9),this.m_n12=this.getChildAt(10),this.m_nowCount=this.getChildAt(11),this.m_leftInfo=this.getChildAt(12),this.m_n13=this.getChildAt(13)}}),fa=(ga.URL="ui://lcl1uligfsqs3y35q",class extends ${constructor(){super(...arguments),this.heroId="Elsa",this.nowCount=0,this.List=[],this.isGet=!0,this.jumpFun=!1}Load(){null==this.view&&(this.view=this.CreatFGUIViewByView(ga.createInstance()),this.AllOnClick(),this.LoadImage(),this.view.m_leftInfo.text=K.DataModule().GetLz().GetText("ActivityDate")),this.SetLoadInfo()}LoadImage(){this.view.m_loadBg.url=x.GetIcon("NewYear2021UI_Bg1",".jpg")}AllOnClick(){this.view.m_Btn_Close.onClick(this,this.onBtn_Close),this.view.m_getBtn.onClick(this,this.m_getBtn)}m_getBtn(){if(!this.isGet)return K.AudioModule().OptimizePlayOnce(x.GetSound2("CuoWu")),void j.TopUI_TipShow(K.DataModule().GetLz().GetText("NewYearKey_Tip1"));let t=K.UIModule().GetUI(fa.UIName);j.GetRewardBtnFun(0,function(){var e=[Z.Hero+"_"+t.heroId];j.GetItemDataAndIsShowBox(at.newYear2021,e,0),K.DataModule().GetUser().AddUnLockHero(t.heroId,at.newYear2021),K.UIModule().GetUI(fa.UIName).SetLoadInfo()},g.NewYear2021UI)}onBtn_Close(){K.UIModule().HideUI(fa.UIName)}SetLoadInfo(){this.List=[],this.List.push("NewYearFonta"),this.List.push("NewYearFontb"),this.List.push("NewYearFontc"),this.List.push("NewYearFontd"),this.List.push("NewYearFonte"),this.List.push("NewYearFontf"),this.List.push("NewYearFontg"),this.isGet=!0,this.List_Refresh(),this.view.m_getBtn.touchable=!1,this.view.m_getBtn.grayed=!0,this.isGet?K.DataModule().GetUser().IsHeroBuy(this.heroId)?this.view.m_getBtn.m_isEnd.setSelectedIndex(1):(this.view.m_getBtn.touchable=!0,this.view.m_getBtn.grayed=!1,no.Statistics_T0R(g.NewYear2021UI)):(this.view.m_getBtn.m_isEnd.setSelectedIndex(2),this.view.m_getBtn.touchable=!0,no.Statistics_T0R(g.NewYear2021UI,0))}List_Refresh(){this.nowCount=0,this.view.m_list.itemRenderer=Laya.Handler.create(this,this.onRenderItem,null,!1),this.view.m_list.numItems=this.List.length,this.view.m_nowCount.text="("+this.nowCount+"/7)"}onRenderItem(e,t){let i=this.List[e],o=!0,a=K.DataModule().GetUser().GetItemByID(i);null==a&&(o=!1,e=[Z.NewYearFont+"_"+i+"_1"],a=j.GetItemDataAndIsShowBox(at.newYear2021,e)[0]),j.FreshRewardItem(t,a,!1,"Default_Icon"),o?this.nowCount++:(t.grayed=!0,this.isGet=!1)}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null)}Show(){super.Show(),this.Load()}SetJumpType(e,t){this.jumpFun=t,K.UIModule().ShowUI(fa.UIName)}SetHideInfo(){this.jumpFun&&(this.jumpFun=!1,K.UIModule().GetUI(ya.UIName).RefreshList())}Hide(){this.SetHideInfo(),super.Hide(),this.UnLoad()}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(fa);return e.name=fa.UIName,t.uiName=fa.UIName,t}}),_a=fa,Ia=(_a.UIName="NewYear2021UI",class{static IsRedDot_userExp(){var e=K.DataModule().GetUser().GetData(),t=e.levelRewardList.freeList;return e.userLevel.level>t.length}static IsRedDot_sign(){return!K.DataModule().GetUser().IsDaySign()}static IsRedDot_hero(){return 0<Ia.RedDot_HeroDebrisList.length}static RedDot_IsHeroID(t){var i=Ia.RedDot_HeroDebrisList;for(let e=0;e<i.length;e++)if(i[e]==t)return!0;return!1}static IsRedDot_dial(){return!(K.DataModule().GetUser().GetData().dialTime<1)}static IsRedDot_shop(){var t=K.DataModule().GetUser().GetData().treasureItemList;for(let e=0;e<t.length;e++)if("Free"==t[e].price&&0==t[e].isBuy)return!0;var e=Number(K.UIModule().GetUI(Ua.UIName).GetNowKey(tt.Silver)),i=Number(K.UIModule().GetUI(Ua.UIName).GetNowKey(tt.Gold));return 0<e||0<i}static IsRedDot_newYear2021Btn(){return!K.DataModule().GetUser().IsHeroBuy("Elsa")}static IsNewGear(){var t=K.DataModule().GetUser().GetData().itemList;for(let e=0;e<t.length;e++)if((t[e].type==Z.Foot||t[e].type==Z.Ring||t[e].type==Z.Chest||t[e].type==Z.Head)&&1==t[e].buyCount)return!0;return!1}static newGearType(t){var i=K.DataModule().GetUser().GetData().itemList;for(let e=0;e<i.length;e++)if(i[e].type==t&&1==i[e].buyCount)return!0;return!1}}),Ca=Ia;Ca.RedDot_HeroDebrisList=[];var Ga,Sa=class extends ${constructor(){super(...arguments),this.nowChooseID="",this.oldPos=979}Load(){if(null==this.view){this.view=this.CreatFGUIViewByView(oa.createInstance()),z.Instance.LW_StatisticsEvent(5004),T.IsIPhoneXScreen?this.view.m_isIphoneX.setSelectedIndex(1):this.view.m_isIphoneX.setSelectedIndex(0),k.Platform!=T.OPPO&&k.Platform!=T.VIVO||(j.ShowNativeAd(null,null,this.view.m_OppoAdBtn,null),this.view.m_YLPlatform.setSelectedPage("Oppo"));let i=this;this.view.m_HeroList.on(fairygui.Events.CLICK_ITEM,this,this.onClickItem),this.FreshList(),this.nowChooseID=K.DataModule().GetUser().GetData().nowChooseHero,this.Choose(this.nowChooseID),z.Instance.LeYou_Video(g.buyHeroVideo,0),this.view.m_detailtitle.text=K.DataModule().GetLocal().localization.GetText("Attributes"),this.view.m_levelUptitle.text=K.DataModule().GetLocal().localization.GetText("upgrade"),this.view.m_levelUpBtn.onClick(this,function(){let e=K.DataModule().GetUser().GetHeroItemData(i.nowChooseID);var t;e&&((t=K.DataModule().GetLocal().heroLv.GetCostByLevel(i.nowChooseID,e.level+1))<K.DataModule().GetUser().GetData().diamond?("Plumber"==i.nowChooseID&&z.Instance.LW_StatisticsEvent(1014,K.DataModule().GetUser().GetData().userLevel.level,1),"Assassin7"==i.nowChooseID&&z.Instance.LW_StatisticsEvent(1015,K.DataModule().GetUser().GetData().userLevel.level,1),K.DataModule().GetUser().ChangeDiamond(-t,at.levelUpHero),e.level++,K.DataModule().GetUser().SaveData(),i.Choose(i.nowChooseID),K.AudioModule().OptimizePlayOnce(x.GetSound2("Purchase")),q.Instance().EcsGameManager().nowGame.LevelUpEffect(),z.Instance.LeYou_Equip_Hero_LevelUp(i.nowChooseID,e.level),t=K.DataModule().GetLz().GetText("Hero_"+K.DataModule().GetLocal().hero.Get(i.nowChooseID).ID),ge.Instance.Report_Prop_LevelUp("英雄_"+t,"钻石升级",1,e.level)):(j.WindowUI_Show(Fo.Diamond_Insufficient),K.AudioModule().OptimizePlayOnce(x.GetSound2("CuoWu"))))}),this.view.m_lookBtn.onClick(this,this.onLookBtn),this.view.m_lookBtn_debris.onClick(this,this.m_lookBtn_debris),this.view.m_lookBtn_buy.onClick(this,this.m_lookBtn_buy),this.view.m_buyVideoBtn.onClick(this,this.onBuyVideoBtn),this.view.m_buyBtn.onClick(this,function(){var e=K.DataModule().GetUser().BuyHero(i.nowChooseID);0==e&&(i.FreshNowChooseItem(),K.DataModule().GetUser().ChangeHero(i.nowChooseID),K.AudioModule().OptimizePlayOnce(x.GetSound2("Purchase")),i.Choose(i.nowChooseID)),1==e&&(K.AudioModule().OptimizePlayOnce(x.GetSound2("CuoWu")),j.WindowUI_Show(Fo.Coin_Insufficient)),2==e&&(K.AudioModule().OptimizePlayOnce(x.GetSound2("CuoWu")),j.WindowUI_Show(Fo.Diamond_Insufficient)),3==e&&j.ShowMessage("Z币不足")})}}onBuyVideoBtn(){let e=K.UIModule().GetUI(Sa.UIName);j.GetRewardBtnFun(0,function(){K.DataModule().GetUser().BuyHero(e.nowChooseID,!0),e.FreshNowChooseItem(),K.DataModule().GetUser().ChangeHero(e.nowChooseID),K.AudioModule().OptimizePlayOnce(x.GetSound2("Purchase")),e.Choose(e.nowChooseID)},g.buyHeroVideo)}RefreshList(){let e=K.UIModule().GetUI(Sa.UIName);e.FreshList(),e.Choose(this.nowChooseID)}SetUnlockHero(){this.view.m_psbar.visible=!1,this.view.m_n16.visible=!0;let e=K.DataModule().GetLocal().hero.Get(this.nowChooseID).UnlockCondition.split("_"),t=e[0],i=e[1],o="解锁条件";var a;o=t==Ga.PlayerLevel?(o=K.DataModule().GetLocal().localization.GetText("UnLockHeroType2")).replace("[F1]",i):t==Ga.RankLevel?(o=K.DataModule().GetLocal().localization.GetText("UnLockHeroType1"),a=K.DataModule().GetLz().GetText("MLN_Level"+i),o.replace("[F1]",a)):t==Ga.Sign?(o=K.DataModule().GetLocal().localization.GetText("UnLockHeroType3")).replace("[F1]",i):"Zmode"==t?(o=K.DataModule().GetLocal().localization.GetText("UnLockHeroType6")).replace("[F1]",e[2]):t!=Ga.NewYear2021UI&&t==Ga.HeroPiece?(this.view.m_psbar.visible=!0,a=K.DataModule().GetUser().GetHeroSkinCount(null,e[1]),this.view.m_unlockspbar.max=Number(e[2]),this.view.m_unlockspbar.value=a?a.count:0,this.view.m_n16.visible=!1,this.view.m_text_nowCount.text="("+this.view.m_unlockspbar.value+"/"+this.view.m_unlockspbar.max+")","                      "):K.DataModule().GetLocal().localization.GetText("UnLockHeroType5"),this.view.m_text_lockTip.text=o}onLookBtn(){this.jumpUI()}m_lookBtn_buy(){var e=K.DataModule().GetUser().BuyHero(this.nowChooseID);0==e&&(this.FreshNowChooseItem(),K.DataModule().GetUser().ChangeHero(this.nowChooseID),K.AudioModule().OptimizePlayOnce(x.GetSound2("Purchase")),this.Choose(this.nowChooseID)),1==e&&(K.AudioModule().OptimizePlayOnce(x.GetSound2("CuoWu")),j.WindowUI_Show(Fo.Coin_Insufficient)),2==e&&(K.AudioModule().OptimizePlayOnce(x.GetSound2("CuoWu")),j.WindowUI_Show(Fo.Diamond_Insufficient)),this.FreshList(),this.Choose(this.nowChooseID)}m_lookBtn_debris(){let t=K.UIModule().GetUI(Sa.UIName);j.GetRewardBtnFun(0,function(){var e=f.GetWeightRandom([25,30,30,15])+2,e=Z.HeroPiece+"_"+t.nowChooseID+"_"+e;j.GetItemDataAndIsShowBox("英雄页面碎片",[e],0),t.FreshList(),t.Choose(t.nowChooseID)},g.subHeroDebris)}jumpUI(){let e=K.DataModule().GetLocal().hero.Get(this.nowChooseID).UnlockCondition,t=e.split("_")[0];t==Ga.PlayerLevel?K.UIModule().GetUI(va.UIName).SetJumpType(e,!0):t==Ga.RankLevel?K.UIModule().GetUI(ra.UIName).SetJumpType(e,!0):t==Ga.Sign?K.UIModule().GetUI(pa.UIName).SetJumpType(e,!0):t==Ga.NewYear2021UI?k.use2021NewYear?K.UIModule().GetUI(_a.UIName).SetJumpType(e,!0):j.TopUI_TipShow(K.DataModule().GetLz().GetText("ShowMessage_tip3")):t==Ga.HeroPiece?j.TopUI_TipShow(K.DataModule().GetLz().GetText("FullFragments")):"Zmode"==t?j.TopUI_TipShow(K.DataModule().GetLz().GetText("UnLockHeroType7")):j.TopUI_TipShow(K.DataModule().GetLz().GetText("UnLockHeroType5"))}FreshList(){this.view.m_HeroList.removeChildren();let t=K.DataModule().GetLocal().hero.GetDatas(),i=[],o=[],a=[];for(let e=0;e<t.length;e++)0==f.GetP().isSignNewYear&&"PrincePorgy"==t[e].ID||0==K.DataModule().GetPlatform().PlatformData.ShowHeroRes&&("Leo"==t[e].ID||"Snowman"==t[e].ID||"Plumber"==t[e].ID||"Elsa"==t[e].ID||"Assassin7"==t[e].ID||"Landman"==t[e].ID||"Seaman"==t[e].ID||"Ultraman"==t[e].ID)||k.Platform==T.OPPO&&"YouyuGirl"==t[e].ID||(K.DataModule().GetUser().IsHeroUnlock(t[e].ID)||K.DataModule().GetUser().IsHeroBuy(t[e].ID)?K.DataModule().GetUser().IsHeroBuy(t[e].ID)?i:o:k.useHeroNoUnlock?o:a).push(t[e]);for(let e=0;e<i.length;e++){var n=aa.createInstance();this.view.m_HeroList.addChild(n),this.FreshItem(n,i[e].ID)}for(let e=0;e<o.length;e++){var s=aa.createInstance();this.view.m_HeroList.addChild(s),this.FreshItem(s,o[e].ID)}let e=na.createInstance();this.view.m_HeroList.addChild(e),e.data="";for(let e=0;e<a.length;e++){var l=aa.createInstance();this.view.m_HeroList.addChild(l),this.FreshItem(l,a[e].ID)}}FreshNowChooseItem(){this.nowChooseItem&&this.FreshItem(this.nowChooseItem,this.nowChooseID)}FreshItem(a,n){let e=K.DataModule().GetLocal().hero.Get(n);if(a.m_icon.url=x.GetIcon("Hero_"+e.uiRes),a.data=n,Ca.RedDot_IsHeroID(n)&&(a.m_redDot.visible=!0),-1!=e.SpecialEffect.indexOf("Zmode")?a.m_heroTypeTip.visible=!0:a.m_heroTypeTip.visible=!1,K.DataModule().GetUser().IsHeroBuy(n))a.m_StateCtrl.setSelectedPage("Normal");else if(K.DataModule().GetUser().IsHeroUnlock(n))""!=e.Coin?(a.m_needText.text=e.Coin,a.m_StateCtrl.setSelectedPage("NoBuy_Coin")):0!=e.Diamond?(a.m_needText.text=e.Diamond.toString(),a.m_StateCtrl.setSelectedPage("NoBuy_Diamond")):a.m_StateCtrl.setSelectedPage("NoUnLock");else if(1==K.DataModule().GetUser().HeroIsDebris(n)){let e=K.DataModule().GetLocal().hero.Get(n).UnlockCondition.split("_"),t=0,i=(2<e.length&&(t=Number(e[2])),K.DataModule().GetUser().GetHeroSkinCount(null,n)),o=0;i&&(o=i.count),a.m_text_nowCount.text=o+"/"+t,f.SetBarValue(a.m_barCom,t,o,!1),a.m_StateCtrl.setSelectedPage("NoDebris")}else a.m_StateCtrl.setSelectedPage("NoUnLock");n==K.DataModule().GetUser().GetData().nowChooseHero?a.m_isUsing.setSelectedIndex(1):a.m_isUsing.setSelectedIndex(0)}onClickItem(e){if(""!=e.data&&e.data!=this.nowChooseID){try{e.m_redDot.visible=!1}catch(e){}f.List_Destop(Ca.RedDot_HeroDebrisList,e.data),this.nowChooseItem=e,this.Choose(e.data),this.view.m_showInfo.play()}}Choose(i=""){this.nowChooseID=i,Sa.isShowAd=!0;for(let t=0;t<this.view.m_HeroList.numChildren;t++){let e=this.view.m_HeroList.getChildAt(t);""!=e.data&&(e.data==i?e.m_ChooseCtrl.setSelectedIndex(1):e.m_ChooseCtrl.setSelectedIndex(0),e.data==K.DataModule().GetUser().GetData().nowChooseHero?e.m_isUsing.setSelectedIndex(1):e.m_isUsing.setSelectedIndex(0))}let e=K.DataModule().GetLocal().hero.Get(this.nowChooseID),t=1;this.view.m_lookBtn_buy.m_count.text=e.Diamond.toString();var o,a=K.DataModule().GetUser().GetHeroItemData(e.ID),a=(null!=a&&(t=a.level),K.DataModule().GetLocal().hero.GetHeroRare(e.ID,t)),a=(this.view.m_heroName.text=K.DataModule().GetLz().GetText("Hero_"+e.ID),this.view.m_heroName.color=K.DataModule().GetLocal().gameRule.Get("GearGrade"+a).F6,this.view.m_rareIcon.url="ui://InGameUI/Rare"+e.Rare,this.view.m_SpecialEffectTip.text="",this.view.m_SpecialEffectTip.text=K.DataModule().GetLz().GetText("Hero_SpecialEffect_"+this.nowChooseID),K.DataModule().GetLocal().hero.GetShowProp(e.ID,t,e.MaxLvl));this.view.m_levelUpGroup.visible=!1,6<=a.length&&(Sa.isShowAd=!1),j.FreshProList(this.view.m_proList,a),4<this.view.m_proList.numItems?this.view.m_proList.height=30*this.view.m_proList.numItems:this.view.m_proList.height=126,K.DataModule().GetUser().IsHeroBuy(this.nowChooseID)?(this.nowChooseID==K.DataModule().GetUser().GetData().nowChooseHero?this.view.m_c1.setSelectedPage("Using"):(this.view.m_c1.setSelectedPage("Choose"),K.DataModule().GetUser().ChangeHero(this.nowChooseID),this.Choose(this.nowChooseID),K.AudioModule().PlayOnce(x.GetSound2("Equip"))),0<e.MaxLvl&&(Sa.isShowAd=!1,(a=K.DataModule().GetUser().GetHeroItemData(e.ID))&&(o=K.DataModule().GetLz().GetText("HeroLevel"),this.view.m_heroName.text=K.DataModule().GetLz().GetText("Hero_"+e.ID)+"("+o+a.level+")",a.level<e.MaxLvl&&(this.view.m_levelUpGroup.visible=!0,j.FreshProList(this.view.m_lvUpproList,K.DataModule().GetLocal().hero.GetLevelReward(e.ID,a.level,a.level+1),!0),this.view.m_lvUpproList.height=30*this.view.m_lvUpproList.numItems+50,this.view.m_levelUpBtn.m_DiamondText.text=K.DataModule().GetLocal().heroLv.GetCostByLevel(e.ID,a.level+1).toString())))):K.DataModule().GetUser().IsHeroUnlock(this.nowChooseID)?(1==e.WatchVideo2Get?(this.view.m_c1.setSelectedPage("Video"),this.view.m_buyVideoBtn.x=this.view.m_buyBtn.x+300,no.Statistics_T0R(g.buyHeroVideo),e.Diamond<=0&&this.view.m_c1.setSelectedPage("Video2")):this.view.m_c1.setSelectedPage("Buy"),""!=e.Coin?(this.view.m_buyBtn.m_c1.setSelectedPage("Coin"),this.view.m_buyBtn.m_count.text=Y.converStr(e.Coin)):0!=e.ZCoin?(this.view.m_buyBtn.m_c1.setSelectedPage("ZombieCoin"),this.view.m_buyBtn.m_count.text=e.ZCoin.toString()):(this.view.m_buyBtn.m_c1.setSelectedPage("Diamond"),this.view.m_buyBtn.m_count.text=e.Diamond.toString())):(k.useHeroNoUnlock?(this.view.m_lookBtn_debris.visible=!0,this.view.m_lookBtn_buy.visible=!0):(this.view.m_lookBtn_debris.visible=!1,this.view.m_lookBtn_buy.visible=!1),this.view.m_lookBtn.visible=!this.view.m_lookBtn_debris.visible,this.view.m_c1.setSelectedPage("Lock")),q.EcsGameMgr.nowGame.ChangeHero(this.nowChooseID,K.DataModule().GetUser().GetEquitWeapon()),this.SetUnlockHero()}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null)}Show(){super.Show(),this.Load()}Hide(){super.Hide(),this.UnLoad()}onUpdate(){this.isShow}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(Sa);return e.name=Sa.UIName,t.uiName=Sa.UIName,t.jointOrder=!1,t}},ya=Sa,wa=(ya.isShowAd=!1,ya.UIName="SubHeroUI",(G=Ga=Ga||{}).RankLevel="RankLevel",G.Sign="Sign",G.PlayerLevel="PlayerLevel",G.NewYear2021UI="NewYear2021UI",G.HeroPiece="HeroPiece",G.Zmode_Played="Zmode_Played",class extends ${constructor(){super(...arguments),this.isOne=!0,this.List=[],this.userLv=0,this.ListonClickIndex=0,this.clickList=[],this.isShare_m_videoCom=!1,this.isShare_All=!1,this.jumpFun=!1}Load(){let e=this;null==this.view&&(this.clickList=[],this.view=this.CreatFGUIViewByView(ia.createInstance()),this.AllOnClick(),this.AllEvent(),this.LoadImage(),this.ListonClickIndex=0),e.isOne||(z.Instance.LeYou_action(501),z.Instance.LW_StatisticsEvent(5001)),this.SetLoadInfo(),z.Instance.LeYou_Video(g.levelReward1,0),z.Instance.LeYou_Video(g.levelReward2,0),5<this.userLv&&this.SetPosX(294*(this.userLv-5)),Laya.timer.once(100,this,function(){try{e.view&&e.isOne&&(e.isOne=!1,10<e.userLv?(e.Hide(),e.Show()):(z.Instance.LeYou_action(501),z.Instance.LW_StatisticsEvent(5001)))}catch(e){}})}LoadImage(){}SetPosX(e){try{this.view.m_list.scrollPane.posX=e}catch(e){}}SetListIsDragged(e){this.view.m_list.scrollPane.touchEffect=e}SetJumpType(e,t){this.jumpFun=t,K.UIModule().ShowUI(wa.UIName);t=e.split("_"),e=Number(t[1]);5<e&&this.SetPosX(294*(e-3))}AllEvent(){}Event_Destroy(){}AllOnClick(){this.view.m_Btn_Close.onClick(this,this.onBtn_Close)}onBtn_Close(){z.Instance.LeYou_action(502),K.UIModule().HideUI(wa.UIName)}SetLoadInfo(){this.List_Refresh()}List_Refresh(){var e=K.DataModule().GetLocal().playerLv.GetDatas();this.List=e,this.userLv=K.DataModule().GetUser().GetData().userLevel.level,this.view.m_list.itemRenderer=Laya.Handler.create(this,this.onRenderItem,null,!1),this.view.m_list.setVirtual(),this.view.m_list.numItems=this.List.length}onRenderItem(e,a){let t=this.List[e],n=this;a.m_videoCom.touchable=!0,a.m_freeCom.touchable=!0,a.m_videoCom.m_type.visible=!0,a.m_videoCom.m_endBg.visible=!1,a.m_videoCom.m_isGet.visible=!1,a.m_freeCom.m_isGet.visible=!1;var i=K.DataModule().GetLz().GetText("LevelRewardUI_clickGet");a.m_videoCom.m_isGet.text=i,a.m_freeCom.m_isGet.text=i,a.m_videoCom.m_redDot.visible=!1,a.m_freeCom.m_redDot.visible=!1,a.m_videoBtn.visible=!1,a.m_freeCom.m_endBg.visible=!1,a.m_yellowDot.visible=!0,a.m_barCom.value=100,a.m_barCom.visible=!0,a.m_freeCom.m_type.visible=!1,a.m_freeCom.m_videoBg.visible=!1,a.m_videoCom.m_info.text="",a.m_freeCom.m_info.text="",a.m_NumTime.text=t.PlayerLevel.toString(),a.m_videoCom.m_mask.visible=!1,a.m_freeCom.m_mask.visible=!1,a.m_videoCom.m_info2.visible=!1,a.m_freeCom.m_info2.visible=!1,a.m_videoCom.m_fluxay.visible=!1,a.m_freeCom.m_fluxay.visible=!1,a.m_videoCom.m_unlock.visible=!1,a.m_freeCom.m_unlock.visible=!1,a.m_videoCom.m_lockBg.visible=!1,a.m_freeCom.m_lockBg.visible=!1,a.m_freeCom.m_info.color="#FFFFFF",a.m_videoCom.m_info.color="#FFFFFF",a.m_videoCom.m_videoMaskBg.visible=!1,a.m_freeCom.m_videoMaskBg.visible=!1,a.m_videoCom.m_freeMaskBg.visible=!1,a.m_freeCom.m_freeMaskBg.visible=!1,a.m_skillUnlock.visible=!1,a.m_videoCom.m_isVideoGet.setSelectedIndex(0),a.m_freeCom.m_isVideoGet.setSelectedIndex(0),0==t.LevelReward.length&&(t.LevelReward=["Coin_1"]),0==t.VideoReward.length&&(t.VideoReward=["Gem_1"]);let o=K.DataModule().GetUser().GetUserItemDataList(t.LevelReward,!1),s=K.DataModule().GetUser().GetUserItemDataList(t.VideoReward,!1),l=0,r=(s[0].type==Z.Hero&&K.DataModule().GetUser().IsHeroBuy(s[0].id)&&(l=200,s[0]=K.DataModule().GetUser().GetUserItemData(Z.Diamond+"_"+l)),s[0].type==Z.UnlockHero&&K.DataModule().GetUser().IsHeroUnlock(s[0].id)&&(l=100,s[0]=K.DataModule().GetUser().GetUserItemData(Z.Diamond+"_"+l)),""),h="";-1!=t.LevelReward[0].indexOf("Chest")&&(i=(i=t.LevelReward[0].split("_"))[0]+"_"+i[1],r=x.GetIcon("box_"+i),a.m_freeCom.m_info.text=nt.GetName(i)),-1!=t.VideoReward[0].indexOf("Chest")&&(i=(i=t.VideoReward[0].split("_"))[0]+"_"+i[1],h=x.GetIcon("box_"+i),a.m_videoCom.m_info.text=nt.GetName(i)),s[0].type==Z.Skill&&(i=K.DataModule().GetLz().GetText("SkillName_"+s[0].id),a.m_videoCom.m_info2.visible=!0,a.m_videoCom.m_info.text=i,a.m_videoCom.m_info2.text=K.DataModule().GetLz().GetText("SkillUnlockUI_text1")),s[0].type==Z.Hero||s[0].type==Z.UnlockHero?(a.m_videoCom.m_mask.visible=!0,i=K.DataModule().GetLz().GetText("Hero_"+s[0].id),s[0].type==Z.Hero&&(a.m_videoCom.m_info2.visible=!0,a.m_videoCom.m_info2.text=K.DataModule().GetLz().GetText("Hero_Get"),a.m_videoCom.m_info.text=i,a.m_videoCom.m_fluxay.visible=!0,K.DataModule().GetUser().IsHeroBuy(s[0].id)&&(l=200,s[0]=K.DataModule().GetUser().GetUserItemData(Z.Diamond+"_"+l))),s[0].type==Z.UnlockHero&&(a.m_videoCom.m_info2.visible=!0,a.m_videoCom.m_info2.text=K.DataModule().GetLz().GetText("Hero_Unlock"),a.m_videoCom.m_lockBg.visible=!0,a.m_videoCom.m_info.text=i,K.DataModule().GetUser().IsHeroUnlock(s[0].id)&&(s[0]=K.DataModule().GetUser().GetUserItemData(Z.Diamond+"_"+l))),i=K.DataModule().GetLocal().hero.Get(s[0].id).Rare,a.m_videoCom.m_info.color=K.DataModule().GetLocal().gameRule.Get("GearGrade"+i).F6,0<l?j.FreshRewardItem(a.m_videoCom.m_mask.m_rewardCom,K.DataModule().GetUser().GetUserItemData(Z.Diamond+"_"+l),!1,wa.UIName,h):j.FreshRewardItem(a.m_videoCom.m_mask.m_rewardCom,s[0],!1,wa.UIName,h)):j.FreshRewardItem(a.m_videoCom.m_rewardCom,s[0],!1,wa.UIName,h),o[0].type==Z.Skill&&(i=K.DataModule().GetLz().GetText("SkillName_"+o[0].id),a.m_freeCom.m_info2.visible=!0,a.m_freeCom.m_info.text=i,a.m_freeCom.m_info2.text=K.DataModule().GetLz().GetText("SkillUnlockUI_text1")),o[0].type==Z.Hero||o[0].type==Z.UnlockHero?(a.m_freeCom.m_mask.visible=!0,a.m_freeCom.m_info2.visible=!1,i=K.DataModule().GetLz().GetText("Hero_"+o[0].id),o[0].type==Z.Hero&&(a.m_freeCom.m_info2.visible=!0,a.m_freeCom.m_info2.text=K.DataModule().GetLz().GetText("Hero_Get"),a.m_freeCom.m_info.text=i),o[0].type==Z.UnlockHero&&(a.m_freeCom.m_info2.visible=!0,a.m_freeCom.m_info2.text=K.DataModule().GetLz().GetText("Hero_Unlock"),a.m_freeCom.m_lockBg.visible=!0,a.m_freeCom.m_info.text=i),i=K.DataModule().GetLocal().hero.Get(o[0].id).Rare,a.m_freeCom.m_info.color=K.DataModule().GetLocal().gameRule.Get("GearGrade"+i).F6,j.FreshRewardItem(a.m_freeCom.m_mask.m_rewardCom,o[0],!1,wa.UIName,r)):j.FreshRewardItem(a.m_freeCom.m_rewardCom,o[0],!1,wa.UIName,r),a.m_videoCom.m_rewardCom.m_gear.m_bg.visible=!1,a.m_freeCom.m_rewardCom.m_gear.m_bg.visible=!1,e==this.List.length-1&&(a.m_barCom.visible=!1),T.ProjectSubCode||Number(t.PlayerLevel)==this.userLv&&(K.DataModule().GetUser().LevelReward_IsFreeReward(this.userLv)||K.DataModule().GetUser().LevelReward_IsVideoReward(this.userLv))&&(a.m_videoBtn.visible=!0,no.Statistics_T0R(g.levelReward1),no.Statistics_T0R(g.levelReward2)),Number(t.PlayerLevel)>this.userLv?(a.m_videoCom.touchable=!1,a.m_freeCom.touchable=!1,a.m_videoCom.m_type.visible=!0,a.m_yellowDot.visible=!1,a.m_barCom.value=0,a.m_videoCom.m_unlock.visible=!0,a.m_freeCom.m_unlock.visible=!0):(i=K.DataModule().GetUser().IsGetLevelReward(Number(t.PlayerLevel),1),e=K.DataModule().GetUser().IsGetLevelReward(Number(t.PlayerLevel),0),i?(a.m_videoCom.m_endBg.visible=!0,a.m_videoCom.touchable=!1,a.m_videoCom.m_type.visible=!1,a.m_videoCom.m_videoMaskBg.visible=!0,a.m_videoCom.m_fluxay.visible=!1):(a.m_videoCom.m_isVideoGet.setSelectedIndex(1),a.m_videoCom.m_isGet.visible=!0),e?(a.m_freeCom.m_endBg.visible=!0,a.m_freeCom.touchable=!1,a.m_freeCom.m_freeMaskBg.visible=!0):(a.m_freeCom.m_isGet.visible=!0,a.m_freeCom.m_redDot.visible=!0)),-1==this.clickList.indexOf(a)&&(this.clickList.push(a),this.isShare_m_videoCom=z.Instance.GetShareStrategy(sC.level_up),this.isShare_m_videoCom?j.IsShare(a.m_videoCom):this.isShare_m_videoCom=j.IsVideoAndShare(a.m_videoCom),a.m_videoCom.onClick(this,function(){let e=n.view.m_list.childIndexToItemIndex(n.view.m_list.getChildIndex(a)),t=n.List[e],i=sC.level_up,o=g.levelReward1;n.isShare_m_videoCom?j.GetRewardBtnFun(1,function(){z.Instance.DayShareStrategy_Add(i,!0),n.Reward_Call(t)},o):j.GetRewardBtnFun(0,function(){z.Instance.DayShareStrategy_Add(i,!1),n.Reward_Call(t)},o,a.m_videoCom)}),a.m_freeCom.onClick(this,function(){z.Instance.LeYou_action(503);let e,t=n.view.m_list.childIndexToItemIndex(n.view.m_list.getChildIndex(a)),i=n.List[t];var o;-1!=i.LevelReward[0].indexOf("Chest")&&(o=i.LevelReward[0].split("_"),e="box_"+o[0]+"_"+o[1]),z.Instance.LW_StatisticsEvent(1011,K.DataModule().GetUser().GetData().userLevel.level.toString(),i.PlayerLevel.toString()),n.LevelReward_AddFreeLevel(Number(i.PlayerLevel),!1,e),n.List_Refresh(),K.DataModule().GetUser().InterstitialAdNumberFreeLv++}),this.isShare_All=z.Instance.GetShareStrategy(sC.level_up_onekey),this.isShare_All?j.IsShare(a.m_videoBtn):this.isShare_All=j.IsVideoAndShare(a.m_videoBtn),a.m_videoBtn.onClick(this,function(){let e=n.view.m_list.childIndexToItemIndex(n.view.m_list.getChildIndex(a)),t=n.List[e],i=sC.level_up_onekey,o=g.levelReward2;n.isShare_All?j.GetRewardBtnFun(1,function(){z.Instance.DayShareStrategy_Add(i,!0),n.AllReward_Call(t)},o):j.GetRewardBtnFun(0,function(){z.Instance.DayShareStrategy_Add(i,!1),n.AllReward_Call(t)},o,a.m_videoBtn)}))}Reward_Call(e){let t="";var i;-1!=e.VideoReward[0].indexOf("Chest")&&(i=e.VideoReward[0].split("_"),t="box_"+i[0]+"_"+i[1]),z.Instance.LW_StatisticsEvent(8027,K.DataModule().GetUser().GetData().userLevel.level,e.PlayerLevel),this.LevelReward_AddVideoLevel(Number(e.PlayerLevel),!1,t),this.List_Refresh()}AllReward_Call(e){this.LevelReward_AddAllLevel(Number(e.PlayerLevel)),z.Instance.LW_StatisticsEvent(8026,e.PlayerLevel,1),this.List_Refresh()}On_Item(e){this.view.m_list.getChildIndex(e)}LevelReward_AddFreeLevel(e,t=!1,i=""){var o=K.DataModule().GetLocal().playerLv.Get(e.toString());if(o){var a=K.DataModule().GetUser().GetUserItemDataList(o.LevelReward,!0);if(!t){let e=i,o=[];for(let i=0;i<a.length;i++){let t=!0;for(let e=0;e<o.length;e++)if(a[i].type==o[e].type&&a[i].id==o[e].id){o[e].count=Y.jia(o[e].count,a[i].count),t=!1;break}t&&o.push(a[i])}j.ShowGetReward(o,e,!1),K.DataModule().GetUser().GetItem(o,at.levelReward)}return K.DataModule().GetUser().GetData().levelRewardList.freeList.push(e),K.DataModule().GetUser().SaveData(),a}console.warn("没找到对应lv奖励")}LevelReward_AddVideoLevel(e,t=!1,i=""){var o=K.DataModule().GetLocal().playerLv.Get(e.toString());if(o){var a=K.DataModule().GetUser().GetUserItemDataList(o.VideoReward,!0);if(!t){let e=i,o=[];for(let i=0;i<a.length;i++){let t=!0;for(let e=0;e<o.length;e++)if(a[i].type==o[e].type&&a[i].id==o[e].id){o[e].count=Y.jia(o[e].count,a[i].count),t=!1;break}t&&o.push(a[i])}j.ShowGetReward(o,e,!1),K.DataModule().GetUser().GetItem(o,at.levelReward)}return K.DataModule().GetUser().GetData().levelRewardList.videoList.push(e),K.DataModule().GetUser().SaveData(),a}console.warn("没找到对应lv奖励")}GetItemKey(t){let i="";for(let e=0;e<t.length;e++)if(-1!=t.indexOf("Chest")){var o=K.DataModule().GetLocal().lottery.GetChest(t[e]);for(let e=0;e<o.length;e++)i+=o[e]}else i+=t[e];return i}LevelReward_AddAllLevel(e){let r=[];for(let l=1;l<=e;l++){let o=[],a=[],t=K.DataModule().GetUser().GetData().levelRewardList.videoList,i=K.DataModule().GetUser().GetData().levelRewardList.freeList,n=!0,s=!0;for(let e=0;e<t.length;e++)if(l==t[e]){n=!1;break}for(let e=0;e<i.length;e++)if(l==i[e]){s=!1;break}n&&(o=this.LevelReward_AddVideoLevel(l,!0)),s&&(a=this.LevelReward_AddFreeLevel(l,!0));for(let i=0;i<o.length;i++){let t=!0;for(let e=0;e<r.length;e++)if(o[i].type==r[e].type&&o[i].id==r[e].id){r[e].type==Z.Coin?r[e].count=Y.jia(r[e].count,Math.round(o[i].count)):r[e].count+=Math.round(o[i].count),t=!1;break}t&&r.push(o[i])}for(let i=0;i<a.length;i++){let t=!0;for(let e=0;e<r.length;e++)if(a[i].type==r[e].type&&a[i].id==r[e].id){r[e].type==Z.Coin?r[e].count=Y.jia(r[e].count,Math.round(a[i].count)):r[e].count+=Math.round(a[i].count),t=!1;break}t&&r.push(a[i])}}j.ShowGetReward(r,"",!1),K.DataModule().GetUser().GetItem(r,at.levelReward)}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null)}Show(){super.Show(),this.Load()}SetHideInfo(){try{this.jumpFun&&(this.jumpFun=!1,K.UIModule().GetUI(ya.UIName).RefreshList()),K.UIModule().GetUI(Zg.UIName).RefreshLevelReward()}catch(e){}this.Event_Destroy()}Hide(){this.SetHideInfo(),super.Hide(),this.UnLoad()}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(wa);return e.name=wa.UIName,t.uiName=wa.UIName,t}}),va=wa,Da=(va.UIName="LevelRewardUI",class extends ${constructor(){super(...arguments),this.IsIphoneX=!1,this.oldCoin="",this.oldDiamond=0,this.oldZombieCoin=0,this.nowUI=""}Load(){null==this.view&&(this.view=this.CreatFGUIViewByView(Eo.createInstance()),this.oldCoin="0",this.oldDiamond=-10,this.getCoinEffectUi=new io,this.getCoinEffectUi.Init(this.view),this.IsIphoneX=T.IsIPhoneXScreen,this.view.m_addCoinBtn.onClick(this,function(){j.WindowUI_Show(Fo.Coin_Add)}),this.view.m_addDiamondBtn.onClick(this,function(){j.WindowUI_Show(Fo.Diamond_Add)}),this.LoadImage()),this.SetLoadInfo()}LoadImage(){this.view.m_key1Com.m_icon.url=x.GetFairyGUI_Icon("NewYearKey"+tt.Silver),this.view.m_key2Com.m_icon.url=x.GetFairyGUI_Icon("NewYearKey"+tt.Gold)}SetLoadInfo(){this.RefreshKey()}RefreshKey(){if(this.view){let e=K.DataModule().GetUser().GetItemByTypeAndId(Z.NewYearKey,tt.Silver),t=K.DataModule().GetUser().GetItemByTypeAndId(Z.NewYearKey,tt.Gold),i=0,o=0;e&&(i=e.count),t&&(o=t.count),this.view.m_key1Com.m_coinText.text=i.toString(),this.view.m_key2Com.m_coinText.text=o.toString()}}GetNowKey(e){return this.view?(e==tt.Silver?this.view.m_key1Com:this.view.m_key2Com).m_coinText.text:"0"}UnLoad(){null!=this.view&&(this.view.visible=!1)}Show(){super.Show(),this.Load(),this.view.visible=!0}Hide(){super.Hide(),this.UnLoad()}Event_nowUI_Change(e){e==Yo.UIName&&k.useNewYearKey?this.view.m_key1Com.visible=!0:this.view.m_key1Com.visible=!1,this.view.m_key2Com.visible=this.view.m_key1Com.visible,e==Zg.UIName?this.IsIphoneX?this.view.m_IsIPhoneXScreen.setSelectedPage("centre"):this.view.m_IsIPhoneXScreen.setSelectedPage("centre2"):e!=Yo.UIName&&e!=Ha.UIName&&e!=Xo.UIName&&e!=Wi.UIName&&e!=ta.UIName&&e!=va.UIName||(this.IsIphoneX?k.Platform==T.KUAISHOU?this.view.m_IsIPhoneXScreen.setSelectedPage("ksX"):this.view.m_IsIPhoneXScreen.setSelectedPage("left"):k.Platform==T.KUAISHOU?this.view.m_IsIPhoneXScreen.setSelectedPage("ks"):this.view.m_IsIPhoneXScreen.setSelectedPage("left2"))}onUpdate(){var e;this.isShow&&(this.oldDiamond!=K.DataModule().GetUser().GetData().diamond&&(this.oldDiamond=K.DataModule().GetUser().GetData().diamond,this.view.m_diamondText.text=this.oldDiamond.toString()),this.oldCoin!=K.DataModule().GetUser().GetData().coin&&(this.oldCoin=K.DataModule().GetUser().GetData().coin,this.view.m_coinText.text=Y.converStr(this.oldCoin)),1<=(e=K.DataModule().GetUser().GetItemByType(Z.ZombieCoin)).length&&this.oldZombieCoin!=e[0].count&&(this.oldZombieCoin=e[0].count,this.view.m_zombieCoinText.text=this.oldZombieCoin.toString()),this.nowUI!=K.UIModule().GetNowTopUIName()&&(this.nowUI=K.UIModule().GetNowTopUIName(),this.Event_nowUI_Change(this.nowUI)))}ShowAddCoin(e,t){this.view&&(K.AudioModule().OptimizePlayOnce(x.GetSound2("Purchase")),this.getCoinEffectUi.ShowEffect("ui://InGameUI/Coin",e,new Laya.Vector2(this.view.m_coin.x,this.view.m_coin.y),t))}ShowAddDiamond(e,t){this.view&&(K.AudioModule().OptimizePlayOnce(x.GetSound2("Purchase")),this.getCoinEffectUi.ShowEffect("ui://InGameUI/Diamond",e,new Laya.Vector2(this.view.m_diamond.x,this.view.m_diamond.y),t))}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(Da);return e.name=Da.UIName,t.uiName=Da.UIName,t.jointOrder=!1,t}}),Ua=Da,La=(Ua.UIName="TopUI",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","SubEquitUI")}onConstruct(){this.m_c1=this.getControllerAt(0),this.m_isIphoneX=this.getControllerAt(1),this.m_titleCtrl=this.getControllerAt(2),this.m_YLPlatform=this.getControllerAt(3),this.m_s1=this.getChildAt(0),this.m_s2=this.getChildAt(1),this.m_s3=this.getChildAt(2),this.m_s4=this.getChildAt(3),this.m_s5=this.getChildAt(4),this.m_s6=this.getChildAt(5),this.m_Slot_Weapon=this.getChildAt(6),this.m_Slot_Foot=this.getChildAt(7),this.m_Slot_Ring1=this.getChildAt(8),this.m_Slot_Head=this.getChildAt(9),this.m_Slot_Chest=this.getChildAt(10),this.m_Slot_Ring2=this.getChildAt(11),this.m_TipsText=this.getChildAt(12),this.m_shareBtn=this.getChildAt(13),this.m_weaponSkinCom=this.getChildAt(14),this.m_Slots=this.getChildAt(15),this.m_n1=this.getChildAt(16),this.m_n84=this.getChildAt(17),this.m_btn_Weapon=this.getChildAt(18),this.m_btn_Head=this.getChildAt(19),this.m_btn_Body=this.getChildAt(20),this.m_btn_Foot=this.getChildAt(21),this.m_btn_Ring=this.getChildAt(22),this.m_equitList=this.getChildAt(23),this.m_tittle=this.getChildAt(24),this.m_n40=this.getChildAt(25),this.m_n71=this.getChildAt(26),this.m_n72=this.getChildAt(27),this.m_totalpros=this.getChildAt(28),this.m_n78=this.getChildAt(29),this.m_fightingValue=this.getChildAt(30),this.m_fightingValue22=this.getChildAt(31),this.m_n74=this.getChildAt(32),this.m_sellBtn=this.getChildAt(33),this.m_OppoIconAdBtn=this.getChildAt(34),this.m_WeaponTipsCom=this.getChildAt(35)}}),Ba=(La.URL="ui://lcl1ulighhw83y2hj",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","EquitDetaiUI")}onConstruct(){this.m_DetaiUICtrl=this.getControllerAt(0),this.m_isIphoneX=this.getControllerAt(1),this.m_c1=this.getControllerAt(2),this.m_bg=this.getChildAt(0),this.m_n73=this.getChildAt(1),this.m_fightingValue=this.getChildAt(2),this.m_fightingValue22=this.getChildAt(3),this.m_arrows=this.getChildAt(4),this.m_arrowsCom=this.getChildAt(5),this.m_n76=this.getChildAt(6),this.m_banTouch=this.getChildAt(7),this.m_n45=this.getChildAt(8),this.m_equitItem=this.getChildAt(9),this.m_n47=this.getChildAt(10),this.m_n48=this.getChildAt(11),this.m_equitName=this.getChildAt(12),this.m_equitNameRare=this.getChildAt(13),this.m_detaltext=this.getChildAt(14),this.m_equitBtn=this.getChildAt(15),this.m_unEquitBtn=this.getChildAt(16),this.m_mainProList=this.getChildAt(17),this.m_otherPro=this.getChildAt(18),this.m_Btn_Colse=this.getChildAt(19),this.m_fighting=this.getChildAt(20),this.m_fightingText=this.getChildAt(21),this.m_arrows_isUp=this.getChildAt(22),this.m_fighting2=this.getChildAt(23),this.m_fightingText2=this.getChildAt(24),this.m_WeaponInfoText=this.getChildAt(25),this.m_Value1=this.getChildAt(26),this.m_n112=this.getChildAt(27),this.m_Value2=this.getChildAt(28),this.m_Value3=this.getChildAt(29),this.m_text_skill=this.getChildAt(30),this.m_text_atk=this.getChildAt(31),this.m_text_speed=this.getChildAt(32),this.m_n110=this.getChildAt(33),this.m_n111=this.getChildAt(34),this.m_n114=this.getChildAt(35),this.m_detaiUI=this.getChildAt(36)}}),ba=(Ba.URL="ui://lcl1uligqtxk3y2ir",class extends ${constructor(){super(...arguments),this.itemId=""}Load(){if(null==this.view){this.view=this.CreatFGUIViewByView(Ba.createInstance());let e=this;this.view.m_bg.onClick(this,function(){K.UIModule().HideUI(ba.UIName)}),this.view.m_Btn_Colse.onClick(this,function(){K.UIModule().HideUI(ba.UIName)}),this.view.m_equitBtn.onClick(this,function(){if(K.AudioModule().PlayOnce(x.GetSound2("Equip")),K.DataModule().GetUser().Equip(e.itemId),K.UIModule().GetUI(Pa.UIName).FreshTab(),K.UIModule().GetUI(Pa.UIName).FreshEquits(),K.UIModule().HideUI(ba.UIName),K.DataModule().GetUser().GetItemByID(e.itemId).type==Z.Weapon){b.Warn(K.DataModule().GetUser().GetData().nowChooseHero),q.EcsGameMgr.nowGame.ChangeHero(K.DataModule().GetUser().GetData().nowChooseHero,K.DataModule().GetUser().GetEquitWeapon());let e=K.UIModule().GetUI(Pa.UIName);e.view&&e.isShow&&e.showWeaponTips()}}),this.LoadImage(),this.view.m_unEquitBtn.onClick(this,function(){K.AudioModule().PlayOnce(x.GetSound2("Equip")),K.DataModule().GetUser().UnEquip(e.itemId),K.UIModule().GetUI(Pa.UIName).FreshTab(),K.UIModule().GetUI(Pa.UIName).FreshEquits(),K.UIModule().HideUI(ba.UIName)}),T.IsIPhoneXScreen?this.view.m_isIphoneX.setSelectedPage("1"):this.view.m_isIphoneX.setSelectedPage("0")}}LoadImage(){this.view.m_text_speed.text=K.DataModule().GetLz().GetText("MergeNewUI_text1"),this.view.m_text_atk.text=K.DataModule().GetLz().GetText("MergeNewUI_text2"),this.view.m_text_skill.text=K.DataModule().GetLz().GetText("MergeNewUI_text3")}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null)}Show(){super.Show(),this.Load()}FreshUI(i){this.itemId=i,j.FreshEquitItem(this.view.m_equitItem,i,this.view.m_equitName,this.view.m_detaltext,this.view.m_fightingText,this.view.m_equitNameRare,this.view.m_fightingValue,this.view.m_arrows),this.view.m_arrows.url==x.GetFairyGUI_Icon("arrows_up")?(this.view.m_arrowsCom.visible=!0,this.view.m_arrows.visible=!1,this.view.m_arrows_isUp.visible=!0):(this.view.m_arrowsCom.visible=!1,this.view.m_arrows.visible=!0,this.view.m_arrows_isUp.visible=!1);var o=K.DataModule().GetLz().GetText("Equip_battleValue");if(this.view.m_fighting.text=o+" ",-1==i.indexOf(Z.Weapon))this.view.m_c1.setSelectedPage("Other"),this.view.m_fighting.visible=!0,this.view.m_fightingText.visible=!0,this.view.m_fighting2.visible=!1,this.view.m_fightingText2.visible=!1;else{this.view.m_c1.setSelectedPage("Weapon");let e=K.DataModule().GetLocal().weapon.Get(i);this.view.m_Value1.text=e.AttSpeed.toString(),this.view.m_Value2.text=e.Dmg.toString(),this.view.m_Value3.text=Math.ceil(e.Dmg*e.AttSpeed).toString(),this.view.m_fighting2.text=this.view.m_fighting.text,this.view.m_fightingText2.text=this.view.m_fightingText.text,this.view.m_fighting.visible=!1,this.view.m_fightingText.visible=!1,this.view.m_fighting2.visible=!0,this.view.m_fightingText2.visible=!0}let e=Number(this.view.m_fightingValue.text),a=(K.DataModule().GetLocal().gameRule.GetBattlePoint_player(e),"NoBtns"),n=K.DataModule().GetUser().GetItemByID(i);if(n.buyCount=0,this.view.m_c1.setSelectedPage("Other"),null!=n){if(n.type==Z.Weapon){n.id!=K.DataModule().GetUser().GetEquitWeapon()&&(a="Equit");let e=K.DataModule().GetLocal().weapon.Get(i),t=[];V.IsGameMode_Zombie()?t.push("Dmg_"+e.Z_Dmg):t.push("Dmg_"+e.Dmg),t.push("AttSpeed_"+e.AttSpeed),t.push("Speed_"+e.Speed);o=[];j.FreshProList(this.view.m_mainProList,t),j.FreshProList(this.view.m_otherPro,o),this.view.m_c1.setSelectedPage("Weapon"),this.view.m_WeaponInfoText.text=K.DataModule().GetLocal().localization.GetLocalTextByWeaponValue(e.ID)}n.type==Z.Head&&(a=n.id==K.DataModule().GetUser().GetEquitHead()?"UnEquit":"Equit"),n.type==Z.Chest&&(a=n.id==K.DataModule().GetUser().GetEquitChest()?"UnEquit":"Equit"),n.type==Z.Foot&&(a=n.id==K.DataModule().GetUser().GetEquitFoot()?"UnEquit":"Equit"),n.type==Z.Ring&&(a=n.id==K.DataModule().GetUser().GetEquitRing1()||n.id==K.DataModule().GetUser().GetEquitRing2()?"UnEquit":"Equit"),n.type!=Z.Weapon&&""!=n.data&&(i=n.data.split(","),j.FreshProList(this.view.m_otherPro,i))}this.view.m_DetaiUICtrl.setSelectedPage(a)}Hide(){super.Hide(),this.UnLoad()}onUpdate(){this.isShow}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(ba);return e.name=ba.UIName,t.uiName=ba.UIName,t}}),Aa=ba,xa=(Aa.UIName="EquitDetaiUI",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","SellUI")}onConstruct(){this.m_maskBg=this.getChildAt(0),this.m_n1=this.getChildAt(1),this.m_Btn_Close=this.getChildAt(2),this.m_n5=this.getChildAt(3),this.m_ComboBox_LV=this.getChildAt(4),this.m_ComboBox_rare=this.getChildAt(5),this.m_n7=this.getChildAt(6),this.m_list=this.getChildAt(7),this.m_sellBtn=this.getChildAt(8),this.m_price=this.getChildAt(9),this.m_n16=this.getChildAt(10),this.m_n17=this.getChildAt(11)}}),Ta=(xa.URL="ui://lcl1uligobkm3y2yl",class extends ${constructor(){super(...arguments),this.List=[],this.userList=[],this.clickList=[],this.nowLV=0,this.nowRare=0,this.nowPrice=0,this.strList=[],this.strList2=[]}Load(){null==this.view&&(this.view=this.CreatFGUIViewByView(xa.createInstance()),this.AllOnClick(),this.LoadImage(),this.clickList=[]),this.nowLV=0,this.nowRare=0,this.SetLoadInfo()}LoadImage(){}AllOnClick(){this.view.m_Btn_Close.onClick(this,this.onBtn_Close),this.view.m_sellBtn.onClick(this,this.onSellBtn)}onSellBtn(){let t=[],i=[];for(let e=0;e<this.List.length;e++)this.List[e].isSelect?(t.push(this.List[e].item),z.Instance.LeYou_Equip(at.sellGear,2,this.List[e].item,1,0),no.Statistics_T0H(at.sellGear,K.DataModule().GetUser().GetPosKey(this.List[e].item),this.List[e].item.count,0,1)):i.push(this.List[e].item);for(let e=0;e<this.userList.length;e++)i.push(this.userList[e]);this.GetSellAward(),K.DataModule().GetUser().GetData().itemList=i,K.DataModule().GetUser().SaveData(),this.SetLoadInfo(),K.UIModule().GetUI(Ua.UIName).ShowAddDiamond(new Laya.Vector2(this.view.m_sellBtn.x+this.view.m_sellBtn.width/2,this.view.m_sellBtn.y),10),!T.ProjectSubCode&&k.Platform!=T.TT||K.PlatformModule().ShowInterstitialAd()}GetSellAward(){var e=this.nowPrice;k.isTestLog&&console.log("出售总额",e),K.DataModule().GetUser().ChangeDiamond(this.nowPrice,at.sellGear)}SetPrice(){let t=[];for(let e=0;e<this.List.length;e++)this.List[e].isSelect&&t.push(this.List[e].item);let i=K.DataModule().GetLocal().gameRule.GetSellGearPrice(),o=0;for(let e=0;e<t.length;e++){var a=t[e].level,n=t[e].rare;o+=Math.ceil(Math.pow(a,.5)*n*(i.F1/100))}k.isTestLog&&console.log("出售总额",o),this.nowPrice=o,this.view.m_price.text=this.nowPrice.toString()}onBtn_Close(){K.UIModule().HideUI(Ta.UIName)}SetLoadInfo(){this.List=[],this.userList=[];let e=K.DataModule().GetUser(),o=e.GetData().itemList,a=e.GetData().equipList;for(let i=0;i<o.length;i++)if(o[i].type==Z.Weapon||o[i].type==Z.Head||o[i].type==Z.Chest||o[i].type==Z.Foot||o[i].type==Z.Ring)if(o[i].type!=Z.Weapon){let t=!1;for(let e=0;e<a.length;e++)if(o[i].id==a[e]){this.userList.push(o[i]),t=!0;break}var n;0==t&&(n=new Ma(!1,o[i]),this.List.push(n))}else this.userList.push(o[i]);else this.userList.push(o[i]);this.SetListsort_Rare(this.List),this.SetSort(this.nowLV,this.nowRare),this.RefreshComboxList(),this.RefreshList(),this.isSell()}SetSortAndLv(e=0){this.nowRare=e,this.SetSort(this.nowLV,this.nowRare),this.RefreshComboxList(),this.SetRareText(this.strList2[this.nowRare-1]),this.RefreshList(),this.isSell()}SetSort(t,i){0!=t&&0!=i||(0==t?t=10:0==i&&(i=5));for(let e=0;e<this.List.length;e++)this.List[e].item.level<=t&&this.List[e].item.rare<=i?this.List[e].isSelect=1:this.List[e].isSelect=0;this.SetListsort(this.List)}isSell(){this.SetPrice();for(let e=0;e<this.List.length;e++)if(1==this.List[e].isSelect)return this.view.m_sellBtn.touchable=!0,void(this.view.m_sellBtn.m_isSell.visible=!0);this.view.m_sellBtn.touchable=!1,this.view.m_sellBtn.m_isSell.visible=!1}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null)}Show(){super.Show(),this.Load()}SetHideInfo(){try{let e=K.UIModule().GetUI(Pa.UIName);e&&e.FreshTab()}catch(e){}}Hide(){this.SetHideInfo(),super.Hide(),this.UnLoad()}RefreshList(){var e;this.view.m_list.itemRenderer=Laya.Handler.create(this,this.onRenderItem,null,!1),this.view.m_list.setVirtual(),this.view.m_list.numItems=this.List.length,this.view.m_list.on(fairygui.Events.CLICK_ITEM,this,this.On_Item),0==this.nowLV&&(e=K.DataModule().GetLz().GetText("Sell_Tip1"),this.SetLvText(e)),0==this.nowRare&&(e=K.DataModule().GetLz().GetText("Sell_Tip2"),this.SetRareText(e))}On_Item(e){var t=Number(e.m_indexText.text),e=(e.m_select.visible=!e.m_select.visible,e.m_tick.visible=e.m_select.visible,e.m_select.visible?this.List[t].isSelect=1:this.List[t].isSelect=0,this.List[t]);K.DataModule().GetLocal().gameRule.GetBattlePoint_gear(e.item),this.isSell()}onRenderItem(e,t){var i=this.List[e];t.m_indexText.text=e.toString(),j.FreshRewardItem(t.m_rewardItem,i.item),0==this.List[e].isSelect?t.m_select.visible=!1:t.m_select.visible=!0,t.m_tick.visible=t.m_select.visible}RefreshComboxList(){this.strList=[];for(let e=1;e<11;e++){var t=K.DataModule().GetLz().GetTextByPar("Sell_Tip1_1",e.toString());this.strList.push(t)}this.view.m_ComboBox_LV.items=this.strList,this.view.m_ComboBox_LV.on(fairygui.Events.STATE_CHANGED,this,this.onComboBox_LV);let i=K.DataModule().GetLocal().gameRule;i.Get("GearGrade1").F6,i.Get("GearGrade2").F6,i.Get("GearGrade3").F6,i.Get("GearGrade4").F6,i.Get("GearGrade5").F6,this.strList2=[];for(let e=1;e<6;e++){var o=K.DataModule().GetLz().GetText("Rare"+e),o="[color="+i.Get("GearGrade"+e).F6+"] "+o+"[/color]",o=K.DataModule().GetLz().GetTextByPar("Sell_Tip2_1",o);this.strList2.push(o)}this.view.m_ComboBox_rare.items=this.strList2,this.view.m_ComboBox_rare.on(fairygui.Events.STATE_CHANGED,this,this.m_ComboBox_rare)}SetRareText(e){this.view.m_ComboBox_rare.m_title.text=e}SetLvText(e){this.view.m_ComboBox_LV.m_title.text=e}onComboBox_LV(){var e=this.view.m_ComboBox_LV.selectedIndex;this.nowLV=e+1,this.SetLoadInfo(),this.view.m_list.scrollPane.posY=0,this.SetLvText(this.strList[e])}m_ComboBox_rare(){var e=this.view.m_ComboBox_rare.selectedIndex;this.nowRare=e+1,this.SetLoadInfo(),this.view.m_list.scrollPane.posY=0,this.SetRareText(this.strList2[e])}SetListsort(e){return e.sort(function(e,t){return t.isSelect-e.isSelect}),e}SetListsort_Rare(e){return e.sort(function(e,t){return t.item.rare-e.item.rare}),e}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(Ta);return e.name=Ta.UIName,t.uiName=Ta.UIName,t}}),ka=Ta,Ma=(ka.UIName="SellUI",class{constructor(e,t){this.isSelect=e,this.item=t}}),Ra=class extends ${constructor(){super(...arguments),this.nowChoose=Z.Weapon,this.sideBtnList=[],this.oldFightingValue=0,this.newFightingValue=0}Load(){if(null==this.view){this.view=this.CreatFGUIViewByView(La.createInstance()),z.Instance.LW_StatisticsEvent(5003),T.IsIPhoneXScreen?this.view.m_isIphoneX.setSelectedIndex(1):this.view.m_isIphoneX.setSelectedIndex(0),k.Platform!=T.OPPO&&k.Platform!=T.VIVO||(j.ShowNativeAd(null,null,null,this.view.m_OppoIconAdBtn),this.view.m_YLPlatform.setSelectedPage("Oppo")),T.IS_WECHAT_PLATFORM&&this.view.m_YLPlatform.setSelectedPage("Wx"),this.view.m_shareBtn.onClick(this,function(){CC.Instance.Shard(function(){},function(){})}),this.nowChoose=Z.Weapon,this.sideBtnList=[],this.sideBtnList.push(this.view.m_btn_Weapon),this.sideBtnList.push(this.view.m_btn_Head),this.sideBtnList.push(this.view.m_btn_Body),this.sideBtnList.push(this.view.m_btn_Foot),this.sideBtnList.push(this.view.m_btn_Ring);let e=this;this.view.m_btn_Weapon.onClick(this,function(){e.nowChoose=e.view.m_btn_Weapon.data,e.FreshTab()}),this.view.m_btn_Body.onClick(this,function(){e.nowChoose=e.view.m_btn_Body.data,e.FreshTab()}),this.view.m_btn_Foot.onClick(this,function(){e.nowChoose=e.view.m_btn_Foot.data,e.FreshTab()}),this.view.m_btn_Head.onClick(this,function(){e.nowChoose=e.view.m_btn_Head.data,e.FreshTab()}),this.view.m_btn_Ring.onClick(this,function(){e.nowChoose=e.view.m_btn_Ring.data,e.FreshTab()}),this.view.m_Slot_Weapon.onClick(this,function(){e.ShowEquitDetail(K.DataModule().GetUser().GetEquitWeapon())}),this.view.m_Slot_Head.onClick(this,function(){e.ShowEquitDetail(K.DataModule().GetUser().GetEquitHead())}),this.view.m_Slot_Foot.onClick(this,function(){e.ShowEquitDetail(K.DataModule().GetUser().GetEquitFoot())}),this.view.m_Slot_Chest.onClick(this,function(){e.ShowEquitDetail(K.DataModule().GetUser().GetEquitChest())}),this.view.m_Slot_Ring1.onClick(this,function(){e.ShowEquitDetail(K.DataModule().GetUser().GetEquitRing1())}),this.view.m_Slot_Ring2.onClick(this,function(){e.ShowEquitDetail(K.DataModule().GetUser().GetEquitRing2())}),k.NewVer&&(this.view.m_weaponSkinCom.visible=!0,this.view.m_weaponSkinCom.m_weaponSkinBtn.onClick(this,function(){j.WeaponSkinComShow_Refresh(e.view.m_weaponSkinCom.x,e.view.m_weaponSkinCom.y,function(){K.UIModule().GetUI(Ra.UIName).FreshEquits()},Ra.UIName)})),this.view.m_totalpros.onClick(this,function(){0==e.view.m_c1.selectedIndex?e.view.m_c1.setSelectedIndex(1):e.view.m_c1.setSelectedIndex(0)}),this.view.m_sellBtn.onClick(this,function(){K.UIModule().ShowUI(ka.UIName)}),this.FreshTab(),this.oldFightingValue=K.DataModule().GetLocal().gameRule.GetBattlePoint_player(),this.view.m_fightingValue.text=K.DataModule().GetLocal().gameRule.GetBattlePoint_player().toString(),this.FreshEquits(),this.view.m_equitList.on(fairygui.Events.CLICK_ITEM,this,this.onClickItem),this.showWeaponTips()}this.SetLoadInfo()}showWeaponTips(){var e=K.DataModule().GetUser().GetEquitWeapon(),e=K.DataModule().GetLocal().weapon.Get(e);this.view.m_WeaponTipsCom.m_weaponTips.text=K.DataModule().GetLz().GetText(e.Type)}SetWeaponSkin(){var e=K.DataModule().GetUser().GetData().equipList[0],e=K.DataModule().GetUser().GetItemByID(e),t=K.DataModule().GetLocal().weapon.Get(e.id).Type;this.view.m_weaponSkinCom.m_weaponSkinBtn.m_text_2.text=K.DataModule().GetLz().GetText("weaponSkin_Tip_"+t),""==e.data?(j.FreshRewardItem(this.view.m_weaponSkinCom.m_weaponSkinBtn.m_rewardItem,e,!1,"","",!1,"","","WeaponSkinComUI"),this.view.m_weaponSkinCom.m_weaponSkinBtn.m_rewardItem.m_gear.m_bg.visible=!1,this.view.m_weaponSkinCom.m_weaponSkinBtn.m_rewardItem.m_gear.m_rare_bg.alpha=0,this.view.m_weaponSkinCom.m_weaponSkinBtn.m_rewardItem.m_Image_Piece.visible=!1,this.view.m_weaponSkinCom.m_weaponSkinBtn.m_rewardItem.m_Count.visible=!1):(t=K.DataModule().GetUser().GetItemByTypeAndtableId(Z.WeaponSkin,e.data),j.FreshRewardItem(this.view.m_weaponSkinCom.m_weaponSkinBtn.m_rewardItem,t,!1),this.view.m_weaponSkinCom.m_weaponSkinBtn.m_rewardItem.m_Count.visible=!1,this.view.m_weaponSkinCom.m_weaponSkinBtn.m_rewardItem.m_gear.m_bg.visible=!1,this.view.m_weaponSkinCom.m_weaponSkinBtn.m_rewardItem.m_gear.m_rare_bg.alpha=0,this.view.m_weaponSkinCom.m_weaponSkinBtn.m_rewardItem.m_Image_Piece.visible=!1)}SetLoadInfo(){this.SetWeaponSkin();var e=K.DataModule().GetLocal().localization.GetText("equip_Tip");this.view.m_TipsText.text=e,this.ShowRedDot()}onClickItem(e){e.m_redDot.visible=!1,this.ShowEquitDetail(e.data.toString()),this.ShowRedDot()}ShowEquitDetail(e){K.UIModule().ShowUI(Aa.UIName),K.UIModule().GetUI(Aa.UIName).FreshUI(e)}FreshTab(){this.ShowRedDot(),this.nowChoose==this.view.m_btn_Weapon.data?this.view.m_sellBtn.visible=!1:this.view.m_sellBtn.visible=!0;for(let e=0;e<this.sideBtnList.length;e++)this.sideBtnList[e].data==this.nowChoose?(this.sideBtnList[e].m_c1.setSelectedIndex(1),this.view.m_titleCtrl.setSelectedIndex(e)):this.sideBtnList[e].m_c1.setSelectedIndex(0);let i=K.DataModule().GetUser().GetItemByType(this.nowChoose);i=i.sort(function(e,t){return t.rare!=e.rare?t.rare-e.rare:t.level-e.level}),this.view.m_equitList.numItems=i.length+5;for(let t=0;t<i.length+5;t++){let e=this.view.m_equitList.getChildAt(t);var o;t>=i.length?e.visible=!1:(e.visible=!0,o=i[t],j.FreshEquitItem(e,o.id,null,null,null,null,null,null,Ra.UIName))}}ShowRedDot(){var e=Ca.newGearType(Z.Head),t=Ca.newGearType(Z.Chest),i=Ca.newGearType(Z.Ring),o=Ca.newGearType(Z.Foot);this.view.m_btn_Head.m_redDot.visible=e,this.view.m_btn_Body.m_redDot.visible=t,this.view.m_btn_Foot.m_redDot.visible=o,this.view.m_btn_Ring.m_redDot.visible=i}FreshEquits(){this.SetWeaponSkin(),this.FreshSlot(this.view.m_Slot_Weapon,K.DataModule().GetUser().GetEquitWeapon()),this.FreshSlot(this.view.m_Slot_Chest,K.DataModule().GetUser().GetEquitChest()),this.FreshSlot(this.view.m_Slot_Foot,K.DataModule().GetUser().GetEquitFoot()),this.FreshSlot(this.view.m_Slot_Head,K.DataModule().GetUser().GetEquitHead()),this.FreshSlot(this.view.m_Slot_Ring1,K.DataModule().GetUser().GetEquitRing1()),this.FreshSlot(this.view.m_Slot_Ring2,K.DataModule().GetUser().GetEquitRing2());var e=K.DataModule().GetUser().GetAllPros();j.FreshProList(this.view.m_totalpros,e),this.newFightingValue=K.DataModule().GetLocal().gameRule.GetBattlePoint_player()}FreshSlot(e,t){""==t?e.visible=!1:(e.visible=!0,j.FreshEquitItem(e,t),e.m_bg.visible=!0,e.m_isEquited.visible=!1,e.m_isEquitedBg.visible=!1)}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null)}Show(){super.Show(),this.Load()}Hide(){super.Hide(),this.UnLoad()}onUpdate(){this.isShow&&this.oldFightingValue!=this.newFightingValue&&(this.oldFightingValue<this.newFightingValue?(200<this.newFightingValue-this.oldFightingValue&&(this.oldFightingValue+=100),100<this.newFightingValue-this.oldFightingValue&&this.newFightingValue-this.oldFightingValue<=200&&(this.oldFightingValue+=10),20<=this.newFightingValue-this.oldFightingValue&&this.newFightingValue-this.oldFightingValue<=100&&(this.oldFightingValue+=5),0<this.newFightingValue-this.oldFightingValue&&this.newFightingValue-this.oldFightingValue<=20&&(this.oldFightingValue+=1),this.newFightingValue-this.oldFightingValue<=0&&(this.oldFightingValue=this.newFightingValue)):(200<this.oldFightingValue-this.newFightingValue&&(this.oldFightingValue-=100),100<this.oldFightingValue-this.newFightingValue&&this.oldFightingValue-this.newFightingValue<=200&&(this.oldFightingValue-=10),20<=this.oldFightingValue-this.newFightingValue&&this.oldFightingValue-this.newFightingValue<=100&&(this.oldFightingValue-=5),0<this.oldFightingValue-this.newFightingValue&&this.oldFightingValue-this.newFightingValue<=20&&--this.oldFightingValue,this.oldFightingValue-this.newFightingValue<=0&&(this.oldFightingValue=this.newFightingValue)),this.view.m_fightingValue.text=this.oldFightingValue.toString())}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(Ra);return e.name=Ra.UIName,t.uiName=Ra.UIName,t}},Pa=Ra,Ea=(Pa.UIName="SubEquitUI",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","RotateHeroUI")}onConstruct(){}}),Na=(Ea.URL="ui://lcl1uligc7rm3y2mg",class extends ${constructor(){super(...arguments),this.ox=0,this.oldYR=0,this.resetTime=-1,this.isOnClick=!1}Load(){if(null==this.view){this.resetTime=-1,this.view=this.CreatFGUIViewByView(Ea.createInstance()),this.isOnClick=!1;let o=this;this.view.on(Laya.Event.MOUSE_DOWN,this,function(e){o.resetTime=-1,o.ox=e.stageX;let t=q.NowGameWorld.GetSingleCompoentEntity(R);t&&(o.oldYR=t.GetComponent(M).rotation.y),o.isOnClick=!0}),this.view.on(Laya.Event.MOUSE_MOVE,this,function(i){if(o.isOnClick){let e=i.stageX-o.ox,t=q.NowGameWorld.GetSingleCompoentEntity(R);t&&(t.GetComponent(M).rotation.y=o.oldYR+e)}}),this.view.on(Laya.Event.MOUSE_OUT,this,function(e){o.resetTime=3,o.isOnClick=!1}),this.view.on(Laya.Event.MOUSE_UP,this,function(e){o.resetTime=3,o.isOnClick=!1}),this.view.on(Laya.Event.MOUSE_OVER,this,function(e){o.resetTime=3})}}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null)}Show(){super.Show(),this.Load()}Hide(){super.Hide(),this.UnLoad()}onUpdate(){if(this.isShow&&0<this.resetTime&&(this.resetTime-=A.TimeDelta,this.resetTime<0)){this.resetTime=-1;let e=q.NowGameWorld.GetSingleCompoentEntity(R);e&&(e.GetComponent(M).rotation.y=q.EcsGameMgr.nowGame.heroRotationY)}}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(Na);return e.name=Na.UIName,t.uiName=Na.UIName,t}}),Fa=Na,Oa=(Fa.UIName="RotateHeroUI",class extends ${constructor(){super(...arguments),this.nowTab="Hero",this.oldTab=""}Load(){if(null==this.view){this.view=this.CreatFGUIViewByView(Po.createInstance());let e=this;this.view.m_backBtn.onClick(this,function(){K.UIModule().HideUI(Oa.UIName),K.UIModule().ShowUI(Zg.UIName)}),this.view.m_HeroBtn.onClick(this,function(){e.nowTab="Hero",e.FreshUIByTab()}),this.view.m_EquitBtn.onClick(this,function(){e.nowTab="Equit",e.FreshUIByTab()}),this.oldTab="",K.UIModule().ShowUI(Ua.UIName),K.UIModule().ShowUI(Fa.UIName),this.FreshUIByTab()}}FreshModel(){q.EcsGameMgr.nowGame.UseEquipBg();var e=K.DataModule().GetUser().GetData().nowChooseHero,t=K.DataModule().GetUser().GetEquitWeapon();q.EcsGameMgr.nowGame.ChangeHero(e,t)}SetDefaultHero(){this.nowTab="Hero"}SetDefaultEquit(){this.nowTab="Equit"}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null,K.UIModule().HideUI(Ua.UIName),K.UIModule().HideUI(Fa.UIName),q.EcsGameMgr.nowGame.ClearHero(),K.UIModule().HideUI(ya.UIName),K.UIModule().HideUI(Pa.UIName))}Show(){super.Show(),this.Load()}isShowC1(){var e=K.DataModule().GetUser().GetData().userMedalMax;(e.level<2||e.level<=2&&e.star<1)&&this.view.m_c1.setSelectedIndex(2)}FreshUIByTab(){if(this.nowTab!=this.oldTab&&(this.oldTab=this.nowTab,"Hero"==this.nowTab&&(this.view.m_c1.setSelectedIndex(0),K.UIModule().ShowUI(ya.UIName),K.UIModule().HideUI(Pa.UIName),this.FreshModel(),k.isGuidance&&this.isShowC1()),"Equit"==this.nowTab&&(this.view.m_c1.setSelectedIndex(1),K.UIModule().HideUI(ya.UIName),K.UIModule().ShowUI(Pa.UIName),this.FreshModel(),k.isGuidance&&this.isShowC1()),T.IS_OPPO_PLATFORM)){let e=K.UIModule().GetUI(za.UIName);e.isShow&&e.refreshAdShowByHeroAndEquit()}}Hide(){super.Hide(),this.UnLoad()}onUpdate(){this.isShow}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(Oa);return e.name=Oa.UIName,t.uiName=Oa.UIName,t}}),Ha=Oa,Va=(Ha.UIName="HeroAndEquitUI",class extends ${constructor(){super(...arguments),this.isShowAd=!1,this.nowUIName="",this.closeBtn=!1,this.closeBannerBtn=!1,this.closeIconAdBtn=!1,this.nowAdData=null,this.nowTime=0,this.gameoverIsShow=!1,this.subHeroIsShow=!1,this.platform=null,this.GameOverBtn=!1,this.NativeShowName="",this.isRefreshAd=!1}Load(){if(null==this.view){this.view=this.CreatFGUIViewByView(Ro.createInstance());let e=this;this.loadAd(),this.nowTime=(new Date).getTime(),this.NativeShowName="",this.view.m_IconNativeMaxRightBtn.onClick(this,function(){e.onClickAdData()}),this.view.m_LookNativeMaxRightBtn.onClick(this,function(){e.onClickAdData()}),this.view.m_ColseNativeMaxRightBtn.onClick(this,function(){e.hideAll(),e.closeBtn=!0}),this.view.m_IconNativeMaxCenterBtn.onClick(this,function(){e.onClickAdData()}),this.view.m_LookNativeMaxCenterBtn.onClick(this,function(){e.onClickAdData()}),this.view.m_ColseNativeMaxCenterBtn.onClick(this,function(){e.hideAll(),e.closeBtn=!0}),this.view.m_IconNativeMinCenterBtn.onClick(this,function(){e.onClickAdData()}),this.view.m_IconNativeMinLeftBtn.onClick(this,function(){e.onClickAdData()}),this.view.m_IconNativeMinRightBtn.onClick(this,function(){e.onClickAdData()}),this.view.m_IconNativeMinCenterBtn.m_ColseBannerNativeBtn.onClick(this,function(){console.warn("oppo原生广告icon点击关闭"),e.hideAll(),e.closeIconAdBtn=!0}),this.view.m_IconNativeMinLeftBtn.m_ColseBannerNativeBtn.onClick(this,function(){console.warn("oppo原生广告icon点击关闭"),e.hideAll(),e.closeIconAdBtn=!0}),this.view.m_IconNativeMinRightBtn.m_ColseBannerNativeBtn.onClick(this,function(){console.warn("oppo原生广告icon点击关闭"),e.hideAll(),e.closeIconAdBtn=!0}),this.view.m_IconBannerNativeBtn.onClick(this,function(){e.onClickAdData()}),this.view.m_LookBannerNativeBtn.onClick(this,function(){e.onClickAdData()}),this.view.m_ColseBannerNativeBtn.onClick(this,function(){e.hideAll(),e.closeBannerBtn=!0}),console.warn("原生界面init")}}hideAll(){this.view.m_AdPos.setSelectedPage("HideAll")}onClickAdData(){if(null!=this.nowAdData){this.platform.ReportAdClick1(this.nowAdData.adId);let e=this;this.resetLoad(function(){e.isRefreshAd=!0})}}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null)}onUpdate(){if(this.view&&K.PlatformModule().isLoadConfigOk){var t=K.PlatformModule().PlatformSettingData().NativeIsShow;if(this.isShow&&t){t=K.UIModule().GetNowTopUIName();if(t!=this.nowUIName&&(this.nowUIName=t,this.loadAd(),this.isRefreshAd=!0,this.closeBannerBtn=!1,this.closeBtn=!1,this.closeIconAdBtn=!1,console.warn("原生广告切换界面1",this.nowUIName)),this.isShowAd){var t=(new Date).getTime(),i=K.PlatformModule().PlatformSettingData().TimedRefresh;if(t-this.nowTime>=1e3*i){this.nowTime=t,console.warn("原生广告切换界面"+i+"秒重新load一下");let e=this;this.resetLoad(function(){e.isRefreshAd=!0})}}(this.closeBannerBtn||this.closeBtn||this.closeIconAdBtn)&&(console.warn("原生广告关闭一下"),this.isRefreshAd=!0),this.isRefreshAd&&(this.isRefreshAd=!1,this.refreshAdShow())}}}refreshAdShowByHeroAndEquit(){this.isRefreshAd=!0}setGameOverIsShow(e){this.gameoverIsShow=e,this.gameoverIsShow&&(this.isRefreshAd=!0)}setSubHeroIsShow(e){this.subHeroIsShow=e,this.isRefreshAd=!0}setCoverUIIsShow(e){e?this.isRefreshAd=!0:this.hideAll()}refreshAdShow(){try{var o,a=this.platform.nativeAdList1;if(0<a.length){let e=K.UIModule().GetNowTopUIName(),t="";if(e==Ha.UIName?(o=K.UIModule().GetUI(ya.UIName),K.UIModule().GetUI(Pa.UIName).isShow&&(this.view.m_AdPos.setSelectedPage(Pa.UIName),t=Pa.UIName),o.isShow&&(this.subHeroIsShow?(this.view.m_AdPos.setSelectedPage(ya.UIName),t=ya.UIName):this.hideAll())):e==ef.UIName?t=this.gameoverIsShow?(this.view.m_AdPos.setSelectedPage("GameOverUI2"),"GameOverUI2"):(this.view.m_AdPos.setSelectedPage("GameOverUI1"),"GameOverUI1"):this.view.m_AdPos.hasPage(e)?(t=e,this.view.m_AdPos.setSelectedPage(e)):this.hideAll(),this.nowAdData=a[Math.floor(Math.random()*a.length)],0<this.nowAdData.imgUrlList.length){let e=this.nowAdData.imgUrlList[0];-1!=this.nowAdData.imgUrlList[0].indexOf(".png")?e=e.split(".png")[0]+".png":-1!=this.nowAdData.imgUrlList[0].indexOf(".jpg")&&(e=e.split(".jpg")[0]+".jpg"),console.warn("原生广告图片",e,this.nowAdData,a),this.view.m_IconNativeMinLeftBtn.m_Icon.url=e,this.view.m_IconNativeMinRightBtn.m_Icon.url=e,this.view.m_IconNativeMinCenterBtn.m_Icon.url=e,this.view.m_IconNativeMaxCenterBtn.m_Icon.url=e,this.view.m_IconNativeMaxRightBtn.m_Icon.url=e,this.view.m_IconBannerNativeBtn.m_Icon.url=e}this.view.m_IconNativeMaxCenterBtn.m_tab.url=this.nowAdData.logoUrl,this.view.m_IconNativeMaxRightBtn.m_tab.url=this.nowAdData.logoUrl,this.view.m_IconNativeMinCenterBtn.m_tab.url=this.nowAdData.logoUrl,this.view.m_IconNativeMinLeftBtn.m_tab.url=this.nowAdData.logoUrl,this.view.m_IconNativeMinRightBtn.m_tab.url=this.nowAdData.logoUrl,this.view.m_IconBannerNativeBtn.m_tab.url=this.nowAdData.logoUrl,!T.IsIPhoneXScreen||e!=Ha.UIName&&e!=Yo.UIName&&e!=ef.UIName||this.view.m_isIphoneX.setSelectedPage("true");let i=!1;i=this.closeBtn?(this.BigNativeAdIsShow(!1),this.closeBtn=!1):(this.BigNativeAdIsShow(!0),!0),i=this.closeBannerBtn?(this.BannerAdIsShow(!1),this.closeBannerBtn=!1):(this.BannerAdIsShow(!0),!0),i=this.closeIconAdBtn?(this.IconAdIsShow(!1),this.closeIconAdBtn=!1):(this.IconAdIsShow(!0),!0),console.warn("准备上报了！！！！！",i,this.NativeShowName,t),""!=t&&t!=this.NativeShowName&&(this.NativeShowName=t,i&&this.platform.ReportAdShow1(this.nowAdData.adId)),this.btnIconRefresh()}}catch(e){console.error("刷新原生广告报错，",e)}}btnIconRefresh(){var e=K.PlatformModule().PlatformSettingData().NativeBtnText;this.view.m_LookNativeMaxRightBtn.m_icon.text=e,this.view.m_LookBannerNativeBtn.m_icon.text=e,this.view.m_LookNativeMaxCenterBtn.m_icon.text=e}BigNativeAdIsShow(e){this.view.m_IconNativeMaxRightBtn.visible=e,this.view.m_LookNativeMaxRightBtn.visible=e,this.view.m_ColseNativeMaxRightBtn.visible=e,this.view.m_IconNativeMaxCenterBtn.visible=e,this.view.m_LookNativeMaxCenterBtn.visible=e,this.view.m_ColseNativeMaxCenterBtn.visible=e}BannerAdIsShow(e){this.view.m_IconBannerNativeBtn.visible=e,this.view.m_LookBannerNativeBtn.visible=e,this.view.m_ColseBannerNativeBtn.visible=e}IconAdIsShow(e){this.view.m_IconNativeMinCenterBtn.visible=e,this.view.m_IconNativeMinLeftBtn.visible=e,this.view.m_IconNativeMinRightBtn.visible=e}resetLoad(e=null){this.platform.resetLoad1(e)}loadAd(){this.platform.nativeAdList1.length<=0?(this.hideAll(),this.resetLoad(),this.isShowAd=!1):this.isShowAd=!0}Show(){T.IS_OPPO_PLATFORM&&(this.platform=Do.Instance),T.IS_VIVO_PLATFORM&&(this.platform=vo.Instance),super.Show(),this.Load()}Hide(){super.Hide(),this.UnLoad()}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(Va);return e.name=Va.UIName,t.uiName=Va.UIName,t.jointOrder=!1,t}}),za=Va,Wa=(za.UIName="OppoNativeAdUI",class extends ${Load(){null==this.view&&(this.view=this.CreatFGUIViewByView(Ro.createInstance()),vo.Instance.nativeAdList1)}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null)}Show(){super.Show(),this.Load()}Hide(){super.Hide(),this.UnLoad()}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(Wa);return e.name=Wa.UIName,t.uiName=Wa.UIName,t.jointOrder=!1,t}}),Za=Wa,ja=(Za.UIName="VivoNativeAdUI",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","AuthorizationInterfaceUI")}onConstruct(){this.m_c1=this.getControllerAt(0),this.m_isEMS=this.getControllerAt(1),this.m_bg=this.getChildAt(0),this.m_n1=this.getChildAt(1),this.m_n7=this.getChildAt(2),this.m_n19=this.getChildAt(3),this.m_confirmBtn=this.getChildAt(4),this.m_dropOutBtn=this.getChildAt(5),this.m_com1=this.getChildAt(6),this.m_com2=this.getChildAt(7),this.m_com3=this.getChildAt(8),this.m_confirmBtn2=this.getChildAt(9),this.m_btn_next=this.getChildAt(10),this.m_com4=this.getChildAt(11),this.m_com5=this.getChildAt(12),this.m_com6=this.getChildAt(13),this.m_n8=this.getChildAt(14)}}),Ka=(ja.URL="ui://lcl1uligb2c23y3ez",class extends ${constructor(){super(...arguments),this.BannerUp_Call=null,this.isOne=!0,this.isEMS=!1,this.isTick=!1}Load(){if(null==this.view){this.view=this.CreatFGUIViewByView(ja.createInstance());let e=this;this.view.m_confirmBtn.onClick(this,function(){e.Hide(),q.Instance().StartCore()}),this.view.m_confirmBtn2.onClick(this,function(){e.Hide()}),this.view.m_dropOutBtn.onClick(this,function(){k.Platform==T.OPPO?qg.exitApplication({}):k.Platform==T.QQ?T.qq.exitMiniProgram():window.exitGame()}),this.view.m_btn_next.onClick(this,this.m_btn_next)}this.SetLoadInfo()}SetLoadInfo(){this.view.m_btn_next.visible=!0,this.isOne?this.isOne=!1:this.view.m_c1.setSelectedIndex(1),this.isEMS?(this.view.m_isEMS.setSelectedIndex(1),this.view.m_com4.visible=!0):(this.view.m_isEMS.setSelectedIndex(0),this.view.m_com1.visible=!0)}m_btn_next(){1==this.view.m_com1.visible?(this.view.m_com1.visible=!1,this.view.m_com2.visible=!0):1==this.view.m_com2.visible&&(this.view.m_com2.visible=!1,this.view.m_com3.visible=!0,this.view.m_btn_next.visible=!1),1==this.view.m_com4.visible?(this.view.m_com4.visible=!1,this.view.m_com5.visible=!0):1==this.view.m_com5.visible&&(this.view.m_com5.visible=!1,this.view.m_com6.visible=!0,this.view.m_btn_next.visible=!1)}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null)}Show(){super.Show(),this.Load()}Hide(){super.Hide(),this.UnLoad()}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(Ka);return e.name=Ka.UIName,t.uiName=Ka.UIName,t}}),qa=Ka,Ya=(qa.UIName="AuthorizationInterfaceUI",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","MatchNewUI")}onConstruct(){this.m_n104=this.getChildAt(0),this.m_text_tip2=this.getChildAt(1),this.m_text_tip1=this.getChildAt(2),this.m_TabBtn=this.getChildAt(3),this.m_n112=this.getChildAt(4),this.m_tip_js=this.getChildAt(5),this.m_n125=this.getChildAt(6),this.m_show=this.getTransitionAt(0)}}),Qa=(Ya.URL="ui://lcl1uligi2df3y3kh",class extends ${constructor(){super(...arguments),this.matchTime=3,this.nowMatchTime=0,this.AllPlayerCount=10,this.LoadPlayerCount=3,this.MatchCount=7,this.nowLoadPlayerCount=0,this.nowMatchCount=0,this.nowEndTime=0,this.endTime=1.5}Load(){null==this.view&&(this.view=this.CreatFGUIViewByView(Ya.createInstance()),this.AllOnClick(),this.LoadImage()),this.SetPlayerCount(),V.IsGameMode_Zombie()?this.view.m_tip_js.visible=!0:this.view.m_tip_js.visible=!1}SetPlayerCount(){let e=K.DataModule().GetUser().GetData().userMedal,t=K.DataModule().GetUser().GetData().userMedal.level,i=0;k.isNew2&&(1==t&&0==e.star&&(i=6),1==t&&1==e.star&&(i=6),1==t&&2==e.star&&(i=8),2==t&&0==e.star&&(i=8));var o=0!=i?i:10+5*(V.chooseBattleSceneLevel-1);console.log("开始对战人数",o),this.AllPlayerCount=o,this.nowEndTime=this.endTime,this.LoadPlayerCount=Math.floor(.3*o),this.MatchCount=o-this.LoadPlayerCount,this.nowLoadPlayerCount=0,this.nowMatchCount=0,this.nowMatchTime=0,q.EcsGameMgr.enterUpdate=!1,this.SetLoadInfo()}LoadImage(){}SetLoadInfo(){this.SetNowPlayrCount(K.DataModule().GetLz().GetText("MatchNewUI_tip1")+"...")}onUpdate(){this.view&&(this.nowMatchTime<this.matchTime&&(this.nowMatchTime+=A.TimeDeltaNoScale,this.nowMatchCount=Math.floor(this.nowMatchTime/this.matchTime*this.MatchCount)),0==q.EcsGameMgr.enterUpdate)&&(V.IsGameMode_Zombie()?(this.endTime-=A.TimeDeltaNoScale,this.SetNowPlayrCount("战场布置完毕,准备战斗!"),this.endTime<=0&&this.SetLoadEnd()):this.nowMatchCount+this.nowLoadPlayerCount>=this.AllPlayerCount?(this.endTime-=A.TimeDeltaNoScale,this.SetNowPlayrCount(K.DataModule().GetLz().GetText("MatchNewUI_tip2")),this.endTime<=0&&this.SetLoadEnd()):this.SetLoadBar())}SetLoadEnd(){q.EcsGameMgr.enterUpdate=!0,K.UIModule().HideUI(Qa.UIName)}SetLoadBar(){var e,t;V.IsGameMode_Zombie()?this.SetNowPlayrCount("正在布置战场"):(t=0,t=(e=K.UIModule().GetUI(wC.UIName))?Math.floor(100*e.nowShowProgress):100,this.nowLoadPlayerCount=Math.floor(t/100*this.LoadPlayerCount),this.SetNowPlayrCount(K.DataModule().GetLz().GetText("MatchNewUI_tip1")+" "+(this.nowMatchCount+this.nowLoadPlayerCount)+"/"+this.AllPlayerCount))}AllOnClick(){}SetNowPlayrCount(e){this.view.m_text_tip1.text=e,this.view.m_text_tip2.text=this.view.m_text_tip1.text}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null)}Show(){super.Show(),this.Load()}SetHideInfo(){}Hide(){this.SetHideInfo(),super.Hide(),this.UnLoad()}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(Qa);return e.name=Qa.UIName,t.uiName=Qa.UIName,t}}),Ja=Qa,Xa=(Ja.UIName="MatchNewUI",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","NativeInterstitialUI")}onConstruct(){this.m_c1=this.getControllerAt(0),this.m_bg=this.getChildAt(0),this.m_NativeCenterBtn=this.getChildAt(1),this.m_NativeCenterCloseBtn=this.getChildAt(2),this.m_NativeBtn=this.getChildAt(3),this.m_t0=this.getTransitionAt(0)}}),$a=(Xa.URL="ui://lcl1uliggda03y3ld",class extends ${constructor(){super(...arguments),this.isShowAd=!1,this.nowUIName="",this.closeBtn=!1,this.nowAdData=null,this.nowTime=0,this.platform=null,this.showTime=0}Load(){if(null==this.view){this.view=this.CreatFGUIViewByView(Xa.createInstance());let e=this;this.loadAd();var t=(new Date).getTime();this.nowTime=t,this.showTime=t,this.view.m_NativeCenterBtn.onClick(this,function(){e.onClickAdData()}),this.view.m_NativeBtn.onClick(this,function(){e.onClickAdData()}),this.view.m_NativeCenterCloseBtn.onClick(this,function(){e.hideAll(),e.closeBtn=!0}),console.error("VIVO原生插屏界面init")}}hideAll(){this.view.m_c1.setSelectedPage("Hide")}onClickAdData(){if(null!=this.nowAdData){this.platform.ReportAdClick2(this.nowAdData.adId);let e=this;this.resetLoad(function(){e.refreshAdShow()})}}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null)}onUpdate(){if(this.view&&K.PlatformModule().isLoadConfigOk){var t=K.PlatformModule().PlatformSettingData().NativeIsShow;if(this.isShow&&t){t=K.UIModule().GetNowTopUIName();if(t!=this.nowUIName&&(this.nowUIName=t,this.loadAd(),this.refreshAdShow(!0),this.closeBtn=!1,console.error("原生插屏广告切换界面1",this.nowUIName)),this.isShowAd){var t=(new Date).getTime(),e=K.PlatformModule().PlatformSettingData().TimedRefresh;if(t-this.nowTime>=1e3*e){this.nowTime=t,console.error("原生插屏广告切换界面45秒重新load一下");let e=this;this.resetLoad(function(){e.refreshAdShow()})}}this.closeBtn&&(console.error("原生插屏广告关闭一下"),this.refreshAdShow())}}}refreshAdShow(t=!1){try{var i,o=this.platform.nativeAdList2;if(0<o.length){this.nowAdData=o[Math.floor(Math.random()*o.length)];let e=this.nowAdData.imgUrlList[0];-1!=this.nowAdData.imgUrlList[0].indexOf(".png")?e=e.split(".png")[0]+".png":-1!=this.nowAdData.imgUrlList[0].indexOf(".jpg")&&(e=e.split(".jpg")[0]+".jpg"),console.error("原生插屏广告图片",e,this.nowAdData,o),this.view.m_NativeCenterBtn.m_Icon.url=e,this.view.m_NativeCenterBtn.m_tab.url=this.nowAdData.logoUrl,this.closeBtn?(this.BigNativeAdIsShow(!1,t),this.closeBtn=!1):15e3<=(i=(new Date).getTime())-this.showTime?this.BigNativeAdIsShow(!0,t):(console.error("原生插屏还没15秒展示暂不显示",i,this.showTime),this.BigNativeAdIsShow(!1,t))}else{var e,a=(new Date).getTime();15e3<=a-this.showTime&&(console.error("vivo自带插屏还没15秒展示暂不显示",a,this.showTime),e=K.UIModule().GetNowTopUIName(),K.DataModule().GetLocal().platform.GetNativeInterstitialUI(e)&&(this.showTime=a,vo.Instance.ShowInterstitialAd()))}}catch(t){console.error("刷新插屏原生广告报错，",t)}}BigNativeAdIsShow(e,t){var i=K.UIModule().GetNowTopUIName();K.DataModule().GetLocal().platform.GetNativeInterstitialUI(i)&&(e?(this.platform.ReportAdShow2(this.nowAdData.adId),this.view.m_c1.setSelectedPage("Show"),this.showTime=(new Date).getTime()):this.view.m_c1.setSelectedPage("Hide"),e&&t?this.view.m_t0.play():this.view.m_t0.stop(),this.view.m_NativeCenterBtn.visible=e,this.view.m_NativeBtn.visible=e,this.view.m_NativeCenterCloseBtn.visible=e)}resetLoad(e=null){this.platform.resetLoad2(e)}loadAd(){this.platform.nativeAdList2.length<=0?(this.hideAll(),this.resetLoad(),this.isShowAd=!1):this.isShowAd=!0}Show(){T.IS_VIVO_PLATFORM&&(this.platform=vo.Instance),super.Show(),this.Load()}Hide(){super.Hide(),this.UnLoad()}static CreatUINode(){let e=new Laya.Box,t=e.addComponent($a);return e.name=$a.UIName,t.uiName=$a.UIName,t.jointOrder=!1,t}}),en=$a,tn=(en.UIName="NativeInterstitialUI",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","AuthorizationInterfaceUI_QQ")}onConstruct(){this.m_c1=this.getControllerAt(0),this.m_bg=this.getChildAt(0),this.m_n20=this.getChildAt(1),this.m_n7=this.getChildAt(2),this.m_confirmBtn=this.getChildAt(3),this.m_dropOutBtn=this.getChildAt(4),this.m_confirmBtn1=this.getChildAt(5),this.m_n16=this.getChildAt(6),this.m_btn2=this.getChildAt(7),this.m_n33=this.getChildAt(8),this.m_btn1=this.getChildAt(9),this.m_n1=this.getChildAt(10),this.m_com_qq=this.getChildAt(11),this.m_confirmBtn2=this.getChildAt(12),this.m_n24=this.getChildAt(13),this.m_xieyi=this.getChildAt(14),this.m_n25=this.getChildAt(15),this.m_n26=this.getChildAt(16),this.m_confirmBtn3=this.getChildAt(17),this.m_n28=this.getChildAt(18),this.m_fuwu=this.getChildAt(19)}}),on=(tn.URL="ui://lcl1uligoi7sy3y46f",class extends ${constructor(){super(...arguments),this.BannerUp_Call=null,this.isOne=!0,this.isEMS=!1,this.isTick=!1}Load(){if(null==this.view){this.view=this.CreatFGUIViewByView(tn.createInstance());let e=this;this.view.m_confirmBtn.onClick(this,function(){e.Hide(),q.Instance().StartCore()}),this.view.m_confirmBtn1.onClick(this,function(){e.Hide()}),this.view.m_btn1.onClick(this,function(){e.SetZcShow(!0)}),this.view.m_btn2.onClick(this,function(){e.SetXyShow(!0)}),this.view.m_confirmBtn2.onClick(this,function(){e.SetZcShow(!1)}),this.view.m_confirmBtn3.onClick(this,function(){e.SetXyShow(!1)}),this.view.m_dropOutBtn.onClick(this,function(){k.Platform==T.OPPO?qg.exitApplication({}):k.Platform==T.QQ?T.qq.exitMiniProgram():window.exitGame()})}this.SetLoadInfo()}SetZcShow(e){this.view.m_xieyi.visible=e}SetXyShow(e){this.view.m_fuwu.visible=e}SetLoadInfo(){this.isOne?this.isOne=!1:this.view.m_c1.setSelectedIndex(1)}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null)}Show(){super.Show(),this.Load()}Hide(){super.Hide(),this.UnLoad()}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(on);return e.name=on.UIName,t.uiName=on.UIName,t}}),an=on,nn=(an.UIName="AuthorizationInterfaceUI_QQ",class extends ${InitSubUI(){this.AddSubUI(Ki.CreatUINode()),this.AddSubUI(za.CreatUINode()),this.AddSubUI(en.CreatUINode()),this.AddSubUI(Za.CreatUINode()),this.AddSubUI(Mo.CreatUINode()),this.AddSubUI(Hi.CreatUINode()),this.AddSubUI(wC.CreatUINode()),this.AddSubUI(Ja.CreatUINode()),this.AddSubUI(qa.CreatUINode()),this.AddSubUI(an.CreatUINode()),this.AddSubUI(Ri.CreatUINode()),this.AddSubUI(Ni.CreatUINode()),this.AddSubUI(Wi.CreatUINode())}static GetResPaths(){return[]}Load(){}UnLoad(){}Show(){super.Show()}Hide(){super.Hide()}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(nn);return e.name=nn.UIName,t.uiName=nn.UIName,t.jointOrder=!1,t}}),sn=nn,ln=(sn.UIName="GlobleUI",class{constructor(){this.changedSpeed=10,this.nowValue=0,this.addIsDown=!1,this.subIsDown=!1,this.isUseKey=!0,this.lastDownDir=0}static CreatInputAxis(e,t,i,o=0){let a=new ln;return a.axisName=e,a.AddKey=t,a.SubKey=i,a.changedSpeed=10,a}DetectAndDeal(){rn.Instance.IsKeyDown(this.AddKey)&&(this.isUseKey=!0,this.addIsDown=!0,this.lastDownDir=1),rn.Instance.IsKeyDown(this.SubKey)&&(this.isUseKey=!0,this.subIsDown=!0,this.lastDownDir=-1),rn.Instance.IsKeyUp(this.AddKey)&&(this.isUseKey=!0,this.addIsDown=!1),rn.Instance.IsKeyUp(this.SubKey)&&(this.isUseKey=!0,this.subIsDown=!1),this.isUseKey&&(this.addIsDown&&!this.subIsDown&&(this.lastDownDir=1),!this.addIsDown&&this.subIsDown&&(this.lastDownDir=-1),this.addIsDown||this.subIsDown||(this.lastDownDir=0),this.nowValue=S.MoveTowards(this.nowValue,this.lastDownDir,A.TimeDeltaNoScale*this.changedSpeed))}SetAxisValue(e){this.nowValue=e,this.isUseKey=!1}GetValue(){return this.nowValue}}),rn=class extends u{constructor(){super(...arguments),this.ModuleName="输入模块",this.keyUpList=[],this.keyDownList=[],this.axiss=[],this.axiss0=[],this.axiss1=[],this.isAdd=!1}Init(){super.Init(),(rn.Instance=this).InitOver(),Laya.stage.on(Laya.Event.KEY_DOWN,this,this.onKeyDown),Laya.stage.on(Laya.Event.KEY_UP,this,this.onKeyUp),Laya.timer.frameLoop(1,this,this.update),Laya.timer.frameLoop(1,this,this.lateUpdate)}CreatAxis(e,t,i,o=10){t=ln.CreatInputAxis(e,t,i,o);this.axiss[e]=t}CreatAxis0(e,t,i,o=10){t=ln.CreatInputAxis(e,t,i,o);this.axiss0[e]=t}CreatAxis1(e,t,i,o=10){t=ln.CreatInputAxis(e,t,i,o);this.axiss1[e]=t}GetAxisValue(e){let t=this.axiss[e];return null==t?(b.Warn("没找到这个轴"+e),0):t.GetValue()}SetAxisValue(e,t){let i=this.axiss[e];null!=i?i.SetAxisValue(t):b.Warn("没找到这个轴"+e)}GetAxisValue0(e){let t=this.axiss0[e];return null==t?(b.Warn("没找到这个轴1"+e),0):t.GetValue()}SetAxisValue0(e,t){let i=this.axiss0[e];null!=i?i.SetAxisValue(t):b.Warn("没找到这个轴1"+e)}GetAxisValue1(e){let t=this.axiss1[e];return null==t?(b.Warn("没找到这个轴2"+e),0):t.GetValue()}SetAxisValue1(e,t){let i=this.axiss1[e];null!=i?i.SetAxisValue(t):b.Warn("没找到这个轴2"+e)}TriggerKeyUp(e){this.isAdd=!0,this.keyUpList[e]=1,null!=this.keyDownList[e]&&(this.keyDownList[e]=0)}TriggerKeyDown(e){this.isAdd=!0,2!=this.keyDownList[e]&&(this.keyDownList[e]=1)}TriggerKeyClick(e){2!=this.keyDownList[e]&&(this.keyDownList[e]=1);let t=this;this.TriggerKeyDown(e),Laya.timer.once(100,this,function(){t.TriggerKeyUp(e)})}update(){for(const e in this.axiss)this.axiss.hasOwnProperty(e)&&this.axiss[e].DetectAndDeal();for(const t in this.axiss0)this.axiss0.hasOwnProperty(t)&&this.axiss0[t].DetectAndDeal();for(const i in this.axiss1)this.axiss1.hasOwnProperty(i)&&this.axiss1[i].DetectAndDeal()}lateUpdate(){for(const e in this.keyUpList)this.keyUpList.hasOwnProperty(e)&&(this.keyUpList[e]=0);for(const t in this.keyDownList)this.keyDownList.hasOwnProperty(t)&&1==this.keyDownList[t]&&(this.keyDownList[t]=2)}IsKeyUp(e){return 1==this.keyUpList[e]}IsKeyDown(e){return 1==this.keyDownList[e]}onKeyDown(e){this.TriggerKeyDown(e.keyCode)}onKeyUp(e){this.TriggerKeyUp(e.keyCode)}},hn=class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","MergeNewUI_Btn_Shard")}onConstruct(){this.m_c1=this.getControllerAt(0),this.m_n75=this.getChildAt(0),this.m_icon=this.getChildAt(1),this.m_type=this.getChildAt(2),this.m_n78=this.getChildAt(3),this.m_n79=this.getChildAt(4),this.m_weaponHit=this.getChildAt(5),this.m_n81=this.getChildAt(6),this.m_n82=this.getChildAt(7),this.m_HeroHit=this.getChildAt(8)}},mn=(hn.URL="ui://lcl1ulig10kny3y3li",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","ShardBtn")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n1=this.getChildAt(0)}}),dn=(mn.URL="ui://lcl1ulig10kny3y3lm",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","WeaponTipsCom")}onConstruct(){this.m_c1=this.getControllerAt(0),this.m_n1=this.getChildAt(0),this.m_weaponTips=this.getChildAt(1),this.m_n2=this.getChildAt(2)}}),cn=(dn.URL="ui://lcl1ulig6hp6y3y3wj",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Start1")}onConstruct(){this.m_n0=this.getChildAt(0),this.m_t0=this.getTransitionAt(0)}}),un=(cn.URL="ui://lcl1ulig6hp6y3y3wr",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Start2")}onConstruct(){this.m_n0=this.getChildAt(0),this.m_t0=this.getTransitionAt(0)}}),pn=(un.URL="ui://lcl1ulig6hp6y3y3wt",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","FBTips")}onConstruct(){this.m_n10=this.getChildAt(0),this.m_n11=this.getChildAt(1),this.m_n14=this.getChildAt(2),this.m_n16=this.getChildAt(3),this.m_n17=this.getChildAt(4),this.m_n18=this.getChildAt(5),this.m_n22=this.getChildAt(6),this.m_n24=this.getChildAt(7),this.m_n25=this.getChildAt(8),this.m_n29=this.getChildAt(9)}}),gn=(pn.URL="ui://lcl1ulig6hp6y3y3x3",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","QuestPanel")}onConstruct(){this.m_Status=this.getControllerAt(0),this.m_QuestCount=this.getControllerAt(1),this.m_n6=this.getChildAt(0),this.m_List=this.getChildAt(1),this.m_Title=this.getChildAt(2),this.m_NotQuestTip=this.getChildAt(3)}}),fn=(gn.URL="ui://lcl1ulig6hp6y3y3xk",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","QuestItem")}onConstruct(){this.m_Status=this.getControllerAt(0),this.m_Star=this.getControllerAt(1),this.m_n13=this.getChildAt(0),this.m_n14=this.getChildAt(1),this.m_Context=this.getChildAt(2),this.m_SelectBtn=this.getChildAt(3),this.m_FinishBtn=this.getChildAt(4),this.m_GiveUpBtn=this.getChildAt(5),this.m_n17=this.getChildAt(6),this.m_n18=this.getChildAt(7),this.m_n19=this.getChildAt(8),this.m_n20=this.getChildAt(9),this.m_n21=this.getChildAt(10),this.m_n16=this.getChildAt(11),this.m_n22=this.getChildAt(12),this.m_n23=this.getChildAt(13),this.m_n24=this.getChildAt(14),this.m_n25=this.getChildAt(15),this.m_Icon=this.getChildAt(16),this.m_Title1=this.getChildAt(17),this.m_Context1=this.getChildAt(18),this.m_CountText1=this.getChildAt(19),this.m_n30=this.getChildAt(20),this.m_Title=this.getChildAt(21),this.m_CountText=this.getChildAt(22),this.m_n31=this.getChildAt(23),this.m_Reward=this.getTransitionAt(0)}}),_n=(fn.URL="ui://lcl1ulig6hp6y3y3xl",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","SelectQuestBtn")}onConstruct(){this.m_c1=this.getControllerAt(0),this.m_n3=this.getChildAt(0),this.m_n4=this.getChildAt(1)}}),In=(_n.URL="ui://lcl1ulig6hp6y3y3xm",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","FinishQuestBtn")}onConstruct(){this.m_c1=this.getControllerAt(0),this.m_n3=this.getChildAt(0),this.m_n4=this.getChildAt(1)}}),Cn=(In.URL="ui://lcl1ulig6hp6y3y3xn",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","GiveUpQuestBtn")}onConstruct(){this.m_c1=this.getControllerAt(0),this.m_n3=this.getChildAt(0),this.m_n4=this.getChildAt(1)}}),Gn=(Cn.URL="ui://lcl1ulig6hp6y3y3xo",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","BunkerQuestBtn")}onConstruct(){this.m_n90=this.getChildAt(0),this.m_t0=this.getTransitionAt(0)}}),Sn=(Gn.URL="ui://lcl1ulig6hp6y3y3xq",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","QuestCom")}onConstruct(){this.m_QuestCon=this.getControllerAt(0),this.m_DigBtn=this.getChildAt(0),this.m_QuestProgress=this.getChildAt(1),this.m_DigSpeedUpBtn=this.getChildAt(2),this.m_DigSpeedUpTip=this.getChildAt(3)}}),yn=(Sn.URL="ui://lcl1ulig6hp6y3y3xr",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","QuestDigBtn")}onConstruct(){this.m_n90=this.getChildAt(0),this.m_t0=this.getTransitionAt(0)}}),wn=(yn.URL="ui://lcl1ulig6hp6y3y3xs",class extends fgui.GProgressBar{static createInstance(){return fgui.UIPackage.createObject("InGameUI","QuestProgress")}onConstruct(){this.m_n0=this.getChildAt(0),this.m_bar=this.getChildAt(1),this.m_Title=this.getChildAt(2),this.m_SpeedUp=this.getTransitionAt(0)}}),vn=(wn.URL="ui://lcl1ulig6hp6y3y3xt",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","SkillInfoUIBtn")}onConstruct(){this.m_n3=this.getChildAt(0)}}),Dn=(vn.URL="ui://lcl1ulig6hp6y3y3xv",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","SkillInfoCom")}onConstruct(){this.m_c1=this.getControllerAt(0),this.m_n0=this.getChildAt(0),this.m_SkillIcon=this.getChildAt(1),this.m_SkillName2=this.getChildAt(2),this.m_SkillInfo=this.getChildAt(3),this.m_SkillName1=this.getChildAt(4),this.m_SkillIconCom=this.getChildAt(5),this.m_Level=this.getChildAt(6)}}),Un=(Dn.URL="ui://lcl1ulig6hp6y3y3y0",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","SkillInfoUI")}onConstruct(){this.m_n8=this.getChildAt(0),this.m_skillInfoList=this.getChildAt(1),this.m_closeBtn=this.getChildAt(2)}}),Ln=(Un.URL="ui://lcl1ulig6hp6y3y3y1",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","TentQuestUI")}onConstruct(){this.m_bg=this.getChildAt(0),this.m_n14=this.getChildAt(1),this.m_closeBtn=this.getChildAt(2),this.m_QuestList=this.getChildAt(3),this.m_n27=this.getChildAt(4),this.m_n28=this.getChildAt(5),this.m_n29=this.getChildAt(6),this.m_t0=this.getTransitionAt(0)}}),Bn=(Ln.URL="ui://lcl1ulig6hp6y3y3y2",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","GetQuestBtn")}onConstruct(){this.m_c1=this.getControllerAt(0),this.m_n3=this.getChildAt(0),this.m_n4=this.getChildAt(1),this.m_type=this.getChildAt(2),this.m_n10=this.getChildAt(3)}}),bn=(Bn.URL="ui://lcl1ulig6hp6y3y3yg",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","OptionQuestItem")}onConstruct(){this.m_Star=this.getControllerAt(0),this.m_n23=this.getChildAt(0),this.m_n34=this.getChildAt(1),this.m_Icon=this.getChildAt(2),this.m_QuestTitle=this.getChildAt(3),this.m_QuestContext=this.getChildAt(4),this.m_RewardContext=this.getChildAt(5),this.m_GetQuestBtn=this.getChildAt(6),this.m_n24=this.getChildAt(7),this.m_n25=this.getChildAt(8),this.m_n26=this.getChildAt(9),this.m_n27=this.getChildAt(10),this.m_n28=this.getChildAt(11),this.m_n29=this.getChildAt(12),this.m_n30=this.getChildAt(13),this.m_n31=this.getChildAt(14),this.m_n32=this.getChildAt(15),this.m_n33=this.getChildAt(16)}}),An=(bn.URL="ui://lcl1ulig6hp6y3y3yh",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Btn_Scene2")}onConstruct(){this.m_load_rank=this.getChildAt(0),this.m_load_rank_icon=this.getChildAt(1),this.m_load_text=this.getChildAt(2)}}),xn=(An.URL="ui://lcl1ulig97q3y3y3pa",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","LuanDouOverUI")}onConstruct(){this.m_n29=this.getChildAt(0),this.m_n15=this.getChildAt(1),this.m_list=this.getChildAt(2),this.m_continueBtn=this.getChildAt(3),this.m_n28=this.getChildAt(4),this.m_n23=this.getChildAt(5)}}),Tn=(xn.URL="ui://lcl1ulig9e4qy3y3ml",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Btn_FeiTianBox")}onConstruct(){this.m_n10=this.getChildAt(0),this.m_load_box=this.getChildAt(1),this.m_n16=this.getChildAt(2),this.m_n17=this.getChildAt(3),this.m_t0=this.getTransitionAt(0)}}),kn=(Tn.URL="ui://lcl1ulig9e4qy3y3mn",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","FeiTianBoxUI")}onConstruct(){this.m_TT=this.getControllerAt(0),this.m_bg=this.getChildAt(0),this.m_n0=this.getChildAt(1),this.m_load_icon=this.getChildAt(2),this.m_load_info=this.getChildAt(3),this.m_VideoGetBtn=this.getChildAt(4),this.m_ClseBtn=this.getChildAt(5),this.m_skipBtn2=this.getChildAt(6),this.m_text_1=this.getChildAt(7),this.m_text_2=this.getChildAt(8),this.m_text_3=this.getChildAt(9)}}),Mn=(kn.URL="ui://lcl1ulig9e4qy3y3mv",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","BuffShowCom")}onConstruct(){this.m_SkillIconCom=this.getChildAt(0),this.m_buffLevel=this.getChildAt(1)}}),Rn=(Mn.URL="ui://lcl1ulig9omfy3y49f",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","RankUI_com1")}onConstruct(){this.m_n11=this.getChildAt(0),this.m_load_icon=this.getChildAt(1),this.m_text_name=this.getChildAt(2),this.m_text_s=this.getChildAt(3),this.m_text_rank=this.getChildAt(4)}}),Pn=(Rn.URL="ui://lcl1uligagpqy3y3ur",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","RankUI")}onConstruct(){this.m_maskBg=this.getChildAt(0),this.m_n18=this.getChildAt(1),this.m_n23=this.getChildAt(2),this.m_textTip1=this.getChildAt(3),this.m_Btn_Close=this.getChildAt(4),this.m_list=this.getChildAt(5),this.m_myCom=this.getChildAt(6)}}),En=(Pn.URL="ui://lcl1uligagpqy3y3us",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","InGameHitCom")}onConstruct(){this.m_HitText=this.getChildAt(0),this.m_t0=this.getTransitionAt(0)}}),Nn=(En.URL="ui://lcl1uligam113y3ks",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","FogHitCom")}onConstruct(){this.m_c1=this.getControllerAt(0),this.m_n196=this.getChildAt(0),this.m_n1981=this.getChildAt(1),this.m_t0=this.getTransitionAt(0)}}),Fn=(Nn.URL="ui://lcl1uligam113y3ku",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","FightNianOverUI")}onConstruct(){this.m_bg2=this.getChildAt(0),this.m_bg=this.getChildAt(1),this.m_n15=this.getChildAt(2),this.m_n16=this.getChildAt(3),this.m_n17=this.getChildAt(4),this.m_list=this.getChildAt(5),this.m_continueBtn=this.getChildAt(6),this.m_n23=this.getChildAt(7),this.m_shareVideoBtn=this.getChildAt(8),this.m_n150=this.getChildAt(9),this.m_n152=this.getChildAt(10),this.m_n27=this.getChildAt(11)}}),On=(Fn.URL="ui://lcl1uligav553y3bw",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","PlayerGameOverDmgRank")}onConstruct(){this.m_isSelf=this.getControllerAt(0),this.m_n149=this.getChildAt(0),this.m_playerName=this.getChildAt(1),this.m_score=this.getChildAt(2),this.m_getBtn=this.getChildAt(3),this.m_chest=this.getChildAt(4),this.m_count=this.getChildAt(5),this.m_n154=this.getChildAt(6),this.m_n155=this.getChildAt(7),this.m_t0=this.getTransitionAt(0),this.m_t1=this.getTransitionAt(1),this.m_t2=this.getTransitionAt(2)}}),Hn=(On.URL="ui://lcl1uligav553y3c1",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","CustomerServiceUI")}onConstruct(){this.m_bg=this.getChildAt(0),this.m_n0=this.getChildAt(1),this.m_n1=this.getChildAt(2),this.m_n13=this.getChildAt(3),this.m_Btn_Close=this.getChildAt(4),this.m_copyBtn=this.getChildAt(5),this.m_n14=this.getChildAt(6),this.m_n15=this.getChildAt(7),this.m_textBtn=this.getChildAt(8),this.m_n12=this.getChildAt(9)}}),Vn=(Hn.URL="ui://lcl1uligb2c23y3f4",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","MoreGamesBtn")}onConstruct(){this.m_n3=this.getChildAt(0),this.m_n5=this.getChildAt(1)}}),zn=(Vn.URL="ui://lcl1uligb2c23y3fb",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Btn1_Nian")}onConstruct(){this.m_isLock=this.getControllerAt(0),this.m_c1=this.getControllerAt(1),this.m_n85=this.getChildAt(0),this.m_n75=this.getChildAt(1),this.m_n80=this.getChildAt(2),this.m_n81=this.getChildAt(3),this.m_n82=this.getChildAt(4),this.m_n83=this.getChildAt(5),this.m_leftText=this.getChildAt(6),this.m_n86=this.getChildAt(7),this.m_n87=this.getChildAt(8),this.m_t0=this.getTransitionAt(0)}}),Wn=(zn.URL="ui://lcl1uligb8953y3bj",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","OppoAdBtn3")}onConstruct(){this.m_Icon=this.getChildAt(0),this.m_tab=this.getChildAt(1)}}),Zn=(Wn.URL="ui://lcl1uligbrar3y3l3",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","OppoAdBtn4")}onConstruct(){this.m_n3=this.getChildAt(0),this.m_icon=this.getChildAt(1)}}),jn=(Zn.URL="ui://lcl1uligbrar3y3l5",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","OppoAdBtn5")}onConstruct(){this.m_Icon=this.getChildAt(0),this.m_tab=this.getChildAt(1),this.m_ColseBannerNativeBtn=this.getChildAt(2)}}),Kn=(jn.URL="ui://lcl1uligbrar3y3l7",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","OppoAdBtn6")}onConstruct(){this.m_Icon=this.getChildAt(0),this.m_tab=this.getChildAt(1)}}),qn=(Kn.URL="ui://lcl1uligbrar3y3l8",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","OppoBannerAdBtn")}onConstruct(){this.m_Icon=this.getChildAt(0),this.m_tab=this.getChildAt(1),this.m_offBtn=this.getChildAt(2)}}),Yn=(qn.URL="ui://lcl1uligc5uby3y3m7",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","OppoBannerAdBtn1")}onConstruct(){this.m_Icon=this.getChildAt(0),this.m_tab=this.getChildAt(1),this.m_offBtn=this.getChildAt(2),this.m_OppoLookBtn=this.getChildAt(3)}}),Qn=(Yn.URL="ui://lcl1uligc5uby3y3m8",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Oppo_Look")}onConstruct(){this.m_textCollot=this.getControllerAt(0),this.m_n75=this.getChildAt(0),this.m_n78=this.getChildAt(1),this.m_n79=this.getChildAt(2)}}),Jn=(Qn.URL="ui://lcl1uligc5uby3y3m9",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Oppo_Look1")}onConstruct(){this.m_textCollot=this.getControllerAt(0),this.m_n75=this.getChildAt(0),this.m_n78=this.getChildAt(1),this.m_n81=this.getChildAt(2)}}),Xn=(Jn.URL="ui://lcl1uligc5uby3y3ma",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","UserMedal")}onConstruct(){this.m_c1=this.getControllerAt(0),this.m_c2=this.getControllerAt(1),this.m_icon=this.getChildAt(0),this.m_s1=this.getChildAt(1),this.m_s2=this.getChildAt(2),this.m_s3=this.getChildAt(3),this.m_s4=this.getChildAt(4),this.m_s5=this.getChildAt(5),this.m_sEX=this.getChildAt(6),this.m_starText=this.getChildAt(7),this.m_medalName=this.getChildAt(8),this.m_Effect1=this.getTransitionAt(0),this.m_Effect2=this.getTransitionAt(1)}}),$n=(Xn.URL="ui://lcl1uligcbvy3y2kk",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","MedalStar")}onConstruct(){this.m_c1=this.getControllerAt(0),this.m_n134=this.getChildAt(0)}}),es=($n.URL="ui://lcl1uligcbvy3y2kl",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Btn_QQrank")}onConstruct(){this.m_n84=this.getChildAt(0),this.m_n86=this.getChildAt(1),this.m_t0=this.getTransitionAt(0)}}),ts=(es.URL="ui://lcl1uligcr453y3fr",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","SkillIconCom")}onConstruct(){this.m_MaxLevel=this.getControllerAt(0),this.m_bar=this.getControllerAt(1),this.m_icon=this.getChildAt(0),this.m_n5=this.getChildAt(1),this.m_greenBar=this.getChildAt(2),this.m_buleBar=this.getChildAt(3),this.m_Lv1=this.getChildAt(4),this.m_Lv2=this.getChildAt(5),this.m_Lv3=this.getChildAt(6),this.m_Lv4=this.getChildAt(7),this.m_Lv5=this.getChildAt(8)}}),is=(ts.URL="ui://lcl1uligcrouy3y48p",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","InGameWindowUI")}onConstruct(){this.m_c1=this.getControllerAt(0),this.m_bg=this.getChildAt(0),this.m_n0=this.getChildAt(1),this.m_textTip1=this.getChildAt(2),this.m_Icon=this.getChildAt(3),this.m_numText=this.getChildAt(4),this.m_n14=this.getChildAt(5),this.m_Btn_Video=this.getChildAt(6),this.m_Btn_Close1=this.getChildAt(7),this.m_btn_Close2=this.getChildAt(8)}}),os=(is.URL="ui://lcl1uligd5l3y3y3s3",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","ResourceBtn")}onConstruct(){this.m_n3=this.getChildAt(0),this.m_Icon=this.getChildAt(1),this.m_numText=this.getChildAt(2),this.m_AddTip=this.getChildAt(3)}}),as=(os.URL="ui://lcl1uligd5l3y3y3s8",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","GMUI_Btn_debris")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n0=this.getChildAt(0),this.m_n1=this.getChildAt(1),this.m_n2=this.getChildAt(2),this.m_info=this.getChildAt(3)}}),ns=(as.URL="ui://lcl1uligd6rz3y3ae",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Cover_heroBox")}onConstruct(){this.m_load_icon=this.getChildAt(0),this.m_barCom=this.getChildAt(1),this.m_n22=this.getChildAt(2),this.m_text_cont=this.getChildAt(3)}}),ss=(ns.URL="ui://lcl1uligdeq0y3y3ug",class extends fgui.GProgressBar{static createInstance(){return fgui.UIPackage.createObject("InGameUI","cover_bar_heroBtn")}onConstruct(){this.m_n0=this.getChildAt(0),this.m_bar=this.getChildAt(1)}}),ls=(ss.URL="ui://lcl1uligdeq0y3y3uj",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Cover_speedCoinBtn")}onConstruct(){this.m_c1=this.getControllerAt(0),this.m_n25=this.getChildAt(0),this.m_n24=this.getChildAt(1),this.m_n26=this.getChildAt(2),this.m_time=this.getChildAt(3),this.m_n28=this.getChildAt(4),this.m_n31=this.getChildAt(5),this.m_n30=this.getChildAt(6),this.m_n32=this.getChildAt(7),this.m_n33=this.getChildAt(8),this.m_t0=this.getTransitionAt(0)}}),rs=(ls.URL="ui://lcl1uligdeq0y3y3uk",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","cover_com3_speed")}onConstruct(){this.m_n178=this.getChildAt(0),this.m_t0=this.getTransitionAt(0)}}),hs=(rs.URL="ui://lcl1uligdeq0y3y3up",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","CoverUI_Btn_getHero")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_VideoBtnpos=this.getControllerAt(1),this.m_videoBg=this.getChildAt(0),this.m_fluxay=this.getChildAt(1),this.m_mask=this.getChildAt(2),this.m_n12=this.getChildAt(3),this.m_text_name2=this.getChildAt(4),this.m_n10=this.getChildAt(5),this.m_text_name=this.getChildAt(6),this.m_type=this.getChildAt(7)}}),ms=(hs.URL="ui://lcl1uligdfo53y381",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","GridChestUI_Btn1")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_SkillType=this.getControllerAt(1),this.m_n19=this.getChildAt(0),this.m_loadIcon=this.getChildAt(1),this.m_rewardItem=this.getChildAt(2),this.m_tick=this.getChildAt(3),this.m_T_flip=this.getTransitionAt(0),this.m_t1=this.getTransitionAt(1),this.m_t2=this.getTransitionAt(2)}}),ds=(ms.URL="ui://lcl1uligdgbj3y3il",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","GridChestUI_Btn2")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_SkillType=this.getControllerAt(1),this.m_n27=this.getChildAt(0),this.m_type=this.getChildAt(1),this.m_n28=this.getChildAt(2)}}),cs=(ds.URL="ui://lcl1uligdgbj3y3ip",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","GridChestUI_Btn3")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_SkillType=this.getControllerAt(1),this.m_c1=this.getControllerAt(2),this.m_skipBtn2=this.getChildAt(0),this.m_text_info=this.getChildAt(1)}}),us=(cs.URL="ui://lcl1uligdgbj3y3ix",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","ItemRandomUI")}onConstruct(){this.m_YLPlatform=this.getControllerAt(0),this.m_bg=this.getChildAt(0),this.m_n4=this.getChildAt(1),this.m_list=this.getChildAt(2),this.m_btn_change=this.getChildAt(3),this.m_btn_all=this.getChildAt(4),this.m_OppoLookBtn=this.getChildAt(5),this.m_oppoBtn_change=this.getChildAt(6),this.m_OppoBtn_all=this.getChildAt(7),this.m_OppoIconAdBtn=this.getChildAt(8)}}),ps=(us.URL="ui://lcl1uligdjvoy3y3sh",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","WeaponRandomUI")}onConstruct(){this.m_YLPlatform=this.getControllerAt(0),this.m_bg=this.getChildAt(0),this.m_n4=this.getChildAt(1),this.m_list=this.getChildAt(2),this.m_btn_change=this.getChildAt(3),this.m_btn_all=this.getChildAt(4),this.m_OppoLookBtn=this.getChildAt(5),this.m_oppoBtn_change=this.getChildAt(6),this.m_OppoBtn_all=this.getChildAt(7),this.m_OppoIconAdBtn=this.getChildAt(8),this.m_CloseBtn=this.getChildAt(9)}}),gs=(ps.URL="ui://lcl1uligdjvoy3y3si",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","WeaponRandom_Com")}onConstruct(){this.m_SkillType=this.getControllerAt(0),this.m_LvType=this.getControllerAt(1),this.m_Load_Bg=this.getChildAt(0),this.m_Load_Bg2=this.getChildAt(1),this.m_n40=this.getChildAt(2),this.m_n39=this.getChildAt(3),this.m_n38=this.getChildAt(4),this.m_type=this.getChildAt(5),this.m_text_info=this.getChildAt(6),this.m_text_info2=this.getChildAt(7),this.m_n32=this.getChildAt(8),this.m_n33=this.getChildAt(9),this.m_text_lv=this.getChildAt(10),this.m_n36=this.getChildAt(11),this.m_weaponTypeText=this.getChildAt(12),this.m_Value1=this.getChildAt(13),this.m_Value2=this.getChildAt(14),this.m_Value3=this.getChildAt(15),this.m_text_skill=this.getChildAt(16),this.m_text_atk=this.getChildAt(17),this.m_text_speed=this.getChildAt(18),this.m_t0=this.getTransitionAt(0)}}),fs=(gs.URL="ui://lcl1uligdjvoy3y3sm",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","WeaponRandom_Btn")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_Com=this.getChildAt(0),this.m_t0=this.getTransitionAt(0),this.m_t1=this.getTransitionAt(1)}}),_s=(fs.URL="ui://lcl1uligdjvoy3y3sn",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","TreasureUI_tip2")}onConstruct(){this.m_c1=this.getControllerAt(0),this.m_n55=this.getChildAt(0),this.m_text_boxTime=this.getChildAt(1),this.m_n61=this.getChildAt(2)}}),Is=(_s.URL="ui://lcl1uligdna43y2zs",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","StopUI")}onConstruct(){this.m_bg=this.getChildAt(0),this.m_n0=this.getChildAt(1),this.m_n25=this.getChildAt(2),this.m_Btn_continue=this.getChildAt(3),this.m_n14=this.getChildAt(4)}}),Cs=(Is.URL="ui://lcl1uligdowiy3y4ar",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Btn_Continue")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n3=this.getChildAt(0),this.m_n7=this.getChildAt(1)}}),Gs=(Cs.URL="ui://lcl1uligdowiy3y4at",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","OppoAdBtn7")}onConstruct(){this.m_n3=this.getChildAt(0),this.m_icon=this.getChildAt(1)}}),Ss=(Gs.URL="ui://lcl1uligdyzry3y3lr",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","HudUI")}onConstruct(){this.m_c1=this.getControllerAt(0)}}),ys=(Ss.URL="ui://lcl1ulige5j03y2ff",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","HpBar")}onConstruct(){this.m_c1=this.getControllerAt(0),this.m_n142=this.getChildAt(0),this.m_n136=this.getChildAt(1),this.m_n134=this.getChildAt(2),this.m_danjia=this.getChildAt(3),this.m_n126=this.getChildAt(4),this.m_state=this.getChildAt(5),this.m_n112=this.getChildAt(6),this.m_n123=this.getChildAt(7),this.m_redHp=this.getChildAt(8),this.m_YellowHp=this.getChildAt(9),this.m_greenHp=this.getChildAt(10),this.m_blueHp=this.getChildAt(11),this.m_bunkerBar=this.getChildAt(12),this.m_n145=this.getChildAt(13),this.m_exbar=this.getChildAt(14),this.m_n111=this.getChildAt(15),this.m_LevelTxt=this.getChildAt(16),this.m_playerNametxt=this.getChildAt(17),this.m_revengeIcon=this.getChildAt(18),this.m_nowBullets=this.getChildAt(19),this.m_danJiaHint=this.getChildAt(20),this.m_n131=this.getChildAt(21),this.m_Icon=this.getChildAt(22),this.m_carBar=this.getChildAt(23),this.m_dianLiangBuZu=this.getChildAt(24),this.m_dianLiangBar=this.getChildAt(25),this.m_n139=this.getChildAt(26),this.m_bunkerNum=this.getChildAt(27),this.m_ZombieFactoryBar=this.getChildAt(28),this.m_hptxt=this.getChildAt(29),this.m_n143=this.getChildAt(30),this.m_n144=this.getChildAt(31),this.m_Zombie_Normal=this.getChildAt(32),this.m_n148=this.getChildAt(33),this.m_Zombie_Elite=this.getChildAt(34),this.m_n150=this.getChildAt(35),this.m_Zombie_Boss=this.getChildAt(36),this.m_Summon=this.getChildAt(37),this.m_n152=this.getChildAt(38),this.m_FuSheLevel=this.getChildAt(39),this.m_levelUpAni=this.getTransitionAt(0),this.m_t1=this.getTransitionAt(1)}}),ws=(ys.URL="ui://lcl1ulige5j03y2fg",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","ColseNativeBtn")}onConstruct(){this.m_n3=this.getChildAt(0)}}),vs=(ws.URL="ui://lcl1uligednc3y3e7",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","ReviveUI")}onConstruct(){this.m_IsAutoRevive=this.getControllerAt(0),this.m_YLPlatform=this.getControllerAt(1),this.m_TT=this.getControllerAt(2),this.m_bg=this.getChildAt(0),this.m_BigTitle=this.getChildAt(1),this.m_reviveBtn=this.getChildAt(2),this.m_countDownText=this.getChildAt(3),this.m_skipBtn=this.getChildAt(4),this.m_skipBtn2=this.getChildAt(5),this.m_beKillInfo=this.getChildAt(6),this.m_ReviceHint=this.getChildAt(7),this.m_OppoReviveBtn=this.getChildAt(8),this.m_OppoReviceHint=this.getChildAt(9),this.m_OppoLookBtn=this.getChildAt(10),this.m_OppoBannerAdBtn=this.getChildAt(11),this.m_skipBtn3=this.getChildAt(12)}}),Ds=(vs.URL="ui://lcl1uligeix43y2ml",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Btn_Close1")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n4=this.getChildAt(0)}}),Us=(Ds.URL="ui://lcl1uligekjxy3y3mf",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Btn_luanDou")}onConstruct(){this.m_C_type=this.getControllerAt(0),this.m_n3=this.getChildAt(0),this.m_n4=this.getChildAt(1),this.m_n5=this.getChildAt(2),this.m_leftText=this.getChildAt(3),this.m_n9=this.getChildAt(4),this.m_n11=this.getChildAt(5)}}),Ls=(Us.URL="ui://lcl1uligekjxy3y3mk",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Btn1")}onConstruct(){this.m_n75=this.getChildAt(0),this.m_icon=this.getChildAt(1),this.m_redDot=this.getChildAt(2)}}),Bs=(Ls.URL="ui://lcl1uligf0ng3y1o9",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","TreasureUI_tip4")}onConstruct(){this.m_c1=this.getControllerAt(0),this.m_n63=this.getChildAt(0)}}),bs=(Bs.URL="ui://lcl1uligf5313y3fo",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","AlwaysShowUI_Btn_BannerAdUp")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n3=this.getChildAt(0)}}),As=(bs.URL="ui://lcl1uligf6ud3y34q",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Btn_hongbao_1")}onConstruct(){this.m_n75=this.getChildAt(0),this.m_n77=this.getChildAt(1)}}),xs=(As.URL="ui://lcl1uligfemzy3y3op",class extends fgui.GProgressBar{static createInstance(){return fgui.UIPackage.createObject("InGameUI","ProgressBar1")}onConstruct(){this.m_n2=this.getChildAt(0),this.m_bar=this.getChildAt(1)}}),Ts=(xs.URL="ui://lcl1uligfemzy3y3oq",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","HouseAdUI")}onConstruct(){this.m_IsIphoneX=this.getControllerAt(0),this.m_HouseAdController=this.getControllerAt(1),this.m_LeftAdBtn1=this.getChildAt(0),this.m_RightAdBtn2=this.getChildAt(1),this.m_CoverAdBtn=this.getChildAt(2),this.m_BottomList=this.getChildAt(3),this.m_DrawerBtn=this.getChildAt(4),this.m_IngameAdBtn=this.getChildAt(5),this.m_n7=this.getChildAt(6),this.m_n19=this.getChildAt(7),this.m_DrawerList=this.getChildAt(8),this.m_n9=this.getChildAt(9),this.m_enter=this.getTransitionAt(0),this.m_out=this.getTransitionAt(1)}}),ks=(Ts.URL="ui://lcl1uligfkz93y387",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","HouseAdBtn")}onConstruct(){this.m_n4=this.getChildAt(0),this.m_Icon=this.getChildAt(1),this.m_t0=this.getTransitionAt(0)}}),Ms=(ks.URL="ui://lcl1uligfkz93y388",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","BottomAdItem")}onConstruct(){this.m_n4=this.getChildAt(0),this.m_Icon=this.getChildAt(1)}}),Rs=(Ms.URL="ui://lcl1uligfkz93y38a",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","DrawerBtn")}onConstruct(){this.m_n2=this.getChildAt(0),this.m_AdRedPoint=this.getChildAt(1)}}),Ps=(Rs.URL="ui://lcl1uligfkz93y38b",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","AdRedPoint")}onConstruct(){this.m_n0=this.getChildAt(0),this.m_t0=this.getTransitionAt(0)}}),Es=(Ps.URL="ui://lcl1uligfkz93y38d",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","DrawerItemBtn")}onConstruct(){this.m_c1=this.getControllerAt(0),this.m_n4=this.getChildAt(0),this.m_Icon=this.getChildAt(1),this.m_n6=this.getChildAt(2),this.m_n7=this.getChildAt(3),this.m_n8=this.getChildAt(4)}}),Ns=(Es.URL="ui://lcl1uligfkz93y38g",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","AuthorizationInterfaceUI2")}onConstruct(){this.m_c1=this.getControllerAt(0),this.m_bg=this.getChildAt(0),this.m_n20=this.getChildAt(1),this.m_n7=this.getChildAt(2),this.m_confirmBtn=this.getChildAt(3),this.m_dropOutBtn=this.getChildAt(4),this.m_confirmBtn1=this.getChildAt(5),this.m_n16=this.getChildAt(6),this.m_btn2=this.getChildAt(7),this.m_btn1=this.getChildAt(8),this.m_n1=this.getChildAt(9),this.m_n9=this.getChildAt(10),this.m_confirmBtn2=this.getChildAt(11),this.m_n24=this.getChildAt(12),this.m_xieyi=this.getChildAt(13),this.m_n25=this.getChildAt(14),this.m_n26=this.getChildAt(15),this.m_confirmBtn3=this.getChildAt(16),this.m_n28=this.getChildAt(17),this.m_fuwu=this.getChildAt(18)}}),Fs=(Ns.URL="ui://lcl1uligfpozy3y466",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","authUI_btn2")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n4=this.getChildAt(0)}}),Os=(Fs.URL="ui://lcl1uligfpozy3y469",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","authUI_btn1")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n4=this.getChildAt(0)}}),Hs=(Os.URL="ui://lcl1uligfpozy3y46a",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","AuthUI_comzc")}onConstruct(){this.m_n9=this.getChildAt(0)}}),Vs=(Hs.URL="ui://lcl1uligfpozy3y46b",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","AuthUI_comfuwu")}onConstruct(){this.m_n9=this.getChildAt(0)}}),zs=(Vs.URL="ui://lcl1uligfpozy3y46c",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","gameover_Com_Key")}onConstruct(){this.m_image_key=this.getChildAt(0),this.m_image_key2=this.getChildAt(1),this.m_t0=this.getTransitionAt(0)}}),Ws=(zs.URL="ui://lcl1uligfr3l3y3iy",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","SkillRandomUI")}onConstruct(){this.m_YLPlatform=this.getControllerAt(0),this.m_bg=this.getChildAt(0),this.m_n4=this.getChildAt(1),this.m_list=this.getChildAt(2),this.m_btn_change=this.getChildAt(3),this.m_btn_all=this.getChildAt(4),this.m_OppoLookBtn=this.getChildAt(5),this.m_oppoBtn_change=this.getChildAt(6),this.m_OppoBtn_all=this.getChildAt(7),this.m_OppoIconAdBtn=this.getChildAt(8)}}),Zs=(Ws.URL="ui://lcl1uligfr3l3y3iz",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","SkillRandom_Btn1")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_Com=this.getChildAt(0),this.m_t0=this.getTransitionAt(0)}}),js=(Zs.URL="ui://lcl1uligfr3l3y3j3",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","SkillRandom_Com1")}onConstruct(){this.m_SkillType=this.getControllerAt(0),this.m_LvType=this.getControllerAt(1),this.m_Load_Bg=this.getChildAt(0),this.m_Load_Bg2=this.getChildAt(1),this.m_bg2=this.getChildAt(2),this.m_weaponBg=this.getChildAt(3),this.m_n23=this.getChildAt(4),this.m_SkillIconCom=this.getChildAt(5),this.m_load_icon=this.getChildAt(6),this.m_text_info=this.getChildAt(7),this.m_n9=this.getChildAt(8),this.m_type=this.getChildAt(9),this.m_Passivity=this.getChildAt(10),this.m_n17=this.getChildAt(11),this.m_n12=this.getChildAt(12),this.m_n5=this.getChildAt(13),this.m_n20=this.getChildAt(14),this.m_n21=this.getChildAt(15),this.m_text_info2=this.getChildAt(16),this.m_bg_text_one=this.getChildAt(17),this.m_text_one=this.getChildAt(18),this.m_n28=this.getChildAt(19),this.m_n29=this.getChildAt(20),this.m_n30=this.getChildAt(21),this.m_n31=this.getChildAt(22),this.m_new=this.getChildAt(23),this.m_t0=this.getTransitionAt(0)}}),Ks=(js.URL="ui://lcl1uligfr3l3y3j4",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","SkillRandom_Btn3")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_SkillType=this.getControllerAt(1),this.m_n20=this.getChildAt(0),this.m_type=this.getChildAt(1),this.m_n18=this.getChildAt(2),this.m_n21=this.getChildAt(3),this.m_n22=this.getChildAt(4)}}),qs=(Ks.URL="ui://lcl1uligfr3l3y3jj",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","SkillRandom_Btn2")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_SkillType=this.getControllerAt(1),this.m_n18=this.getChildAt(0),this.m_type=this.getChildAt(1),this.m_n17=this.getChildAt(2)}}),Ys=(qs.URL="ui://lcl1uligfr3l3y3jm",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","SurvivalRewardUI")}onConstruct(){this.m_maskBg=this.getChildAt(0),this.m_n7=this.getChildAt(1),this.m_Icon=this.getChildAt(2),this.m_n3=this.getChildAt(3),this.m_n12=this.getChildAt(4),this.m_n4=this.getChildAt(5),this.m_List=this.getChildAt(6),this.m_dayText=this.getChildAt(7),this.m_jixuBtn=this.getChildAt(8),this.m_n10=this.getChildAt(9)}}),Qs=(Ys.URL="ui://lcl1uligfrkhy3y3so",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","SurvivalRewardBtn")}onConstruct(){this.m_n3=this.getChildAt(0)}}),Js=(Qs.URL="ui://lcl1uligfrkhy3y3sv",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","ZhanLiTips")}onConstruct(){this.m_arrowsCom=this.getChildAt(0),this.m_t0=this.getTransitionAt(0)}}),Xs=(Js.URL="ui://lcl1uligfrkhy3y3sx",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Btn_Compensate")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_isEnd=this.getControllerAt(1),this.m_n4=this.getChildAt(0),this.m_n5=this.getChildAt(1),this.m_n6=this.getChildAt(2),this.m_type=this.getChildAt(3)}}),$s=(Xs.URL="ui://lcl1uligfsqs3y359",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Cover_newYear2021Btn")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n8=this.getChildAt(0),this.m_n4=this.getChildAt(1),this.m_n10=this.getChildAt(2),this.m_n5=this.getChildAt(3),this.m_redDot=this.getChildAt(4),this.m_t0=this.getTransitionAt(0)}}),el=($s.URL="ui://lcl1uligfsqs3y35z",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","SkillRandom_Btn4")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_Com=this.getChildAt(0),this.m_n16=this.getChildAt(1),this.m_n17=this.getChildAt(2),this.m_t0=this.getTransitionAt(0),this.m_t1=this.getTransitionAt(1)}}),tl=(el.URL="ui://lcl1uliggbify3y3nk",class extends fgui.GProgressBar{static createInstance(){return fgui.UIPackage.createObject("InGameUI","heroBtn_Bar")}onConstruct(){this.m_n0=this.getChildAt(0),this.m_bar=this.getChildAt(1)}}),il=(tl.URL="ui://lcl1uligghh3y3y48j",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","subHeroUI_btn3")}onConstruct(){this.m_n82=this.getChildAt(0),this.m_n83=this.getChildAt(1),this.m_count=this.getChildAt(2)}}),ol=(il.URL="ui://lcl1uligghh3y3y48k",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Log_ReportBtn")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n0=this.getChildAt(0),this.m_n1=this.getChildAt(1),this.m_n2=this.getChildAt(2),this.m_title=this.getChildAt(3)}}),al=(ol.URL="ui://lcl1uliggn3s3y2yz",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Log_CloseBtn")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n0=this.getChildAt(0),this.m_n1=this.getChildAt(1),this.m_n2=this.getChildAt(2),this.m_title=this.getChildAt(3)}}),nl=(al.URL="ui://lcl1uliggn3s3y2z0",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Log_CopyBtn")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n0=this.getChildAt(0),this.m_n1=this.getChildAt(1),this.m_n2=this.getChildAt(2),this.m_title=this.getChildAt(3)}}),sl=(nl.URL="ui://lcl1uliggn3s3y2z1",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Log_Context")}onConstruct(){this.m_Mode=this.getControllerAt(0),this.m_InputText=this.getChildAt(0),this.m_OutputText=this.getChildAt(1),this.m_LoadMoreBtn=this.getChildAt(2)}}),ll=(sl.URL="ui://lcl1uliggn3s3y2z2",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Log_LoadMoreLogBtn")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n0=this.getChildAt(0),this.m_n1=this.getChildAt(1),this.m_n2=this.getChildAt(2),this.m_title=this.getChildAt(3)}}),rl=(ll.URL="ui://lcl1uliggn3s3y2z3",class extends fgui.GComboBox{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Log_StoreComboBox")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n0=this.getChildAt(0),this.m_n1=this.getChildAt(1),this.m_n2=this.getChildAt(2),this.m_title=this.getChildAt(3)}}),hl=(rl.URL="ui://lcl1uliggn3s3y2z4",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Log_StoreComboBox_popup")}onConstruct(){this.m_n0=this.getChildAt(0),this.m_list=this.getChildAt(1)}}),ml=(hl.URL="ui://lcl1uliggn3s3y2z5",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Log_StoreComboBox_item")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n0=this.getChildAt(0),this.m_n1=this.getChildAt(1),this.m_title=this.getChildAt(2)}}),dl=(ml.URL="ui://lcl1uliggn3s3y2z6",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Log_Tip")}onConstruct(){this.m_n0=this.getChildAt(0),this.m_Label=this.getChildAt(1)}}),cl=(dl.URL="ui://lcl1uliggn3s3y2z7",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","GMUI_Btn_logui")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n0=this.getChildAt(0),this.m_n1=this.getChildAt(1),this.m_n2=this.getChildAt(2),this.m_n3=this.getChildAt(3)}}),ul=(cl.URL="ui://lcl1uliggn3s3y2z8",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","sell_com1")}onConstruct(){this.m_select=this.getChildAt(0),this.m_rewardItem=this.getChildAt(1),this.m_indexText=this.getChildAt(2),this.m_tick=this.getChildAt(3)}}),pl=(ul.URL="ui://lcl1uliggn3s3y2za",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","sell_Btn_sell")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n3=this.getChildAt(0),this.m_isSell=this.getChildAt(1),this.m_n4=this.getChildAt(2)}}),gl=(pl.URL="ui://lcl1uliggn3s3y2zb",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","GmTextButton")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n0=this.getChildAt(0),this.m_n1=this.getChildAt(1),this.m_n2=this.getChildAt(2),this.m_n3=this.getChildAt(3)}}),fl=(gl.URL="ui://lcl1uligguwry3y3ui",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","低阶")}onConstruct(){this.m_n0=this.getChildAt(0),this.m_n4=this.getChildAt(1),this.m_n1=this.getChildAt(2),this.m_text_combo=this.getChildAt(3),this.m_t0=this.getTransitionAt(0)}}),_l=(fl.URL="ui://lcl1uligguwry3y3uj",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","VideoColseUI")}onConstruct(){this.m_bg=this.getChildAt(0),this.m_n0=this.getChildAt(1),this.m_Btn_video=this.getChildAt(2),this.m_n20=this.getChildAt(3),this.m_Btn_Close=this.getChildAt(4),this.m_n22=this.getChildAt(5),this.m_n14=this.getChildAt(6)}}),Il=(_l.URL="ui://lcl1ulighgaiy3y3ow",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Btn_Video_confirm2")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n3=this.getChildAt(0),this.m_n8=this.getChildAt(1),this.m_n9=this.getChildAt(2)}}),Cl=(Il.URL="ui://lcl1ulighgaiy3y3ox",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Btn_Video_close2")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n3=this.getChildAt(0),this.m_n10=this.getChildAt(1)}}),Gl=(Cl.URL="ui://lcl1ulighgaiy3y3oz",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Btn4")}onConstruct(){this.m_n75=this.getChildAt(0),this.m_icon=this.getChildAt(1),this.m_redDot=this.getChildAt(2),this.m_gui1=this.getChildAt(3),this.m_gui2=this.getChildAt(4),this.m_load_unlock=this.getChildAt(5),this.m_t0=this.getTransitionAt(0)}}),Sl=(Gl.URL="ui://lcl1ulighhw83y2he",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","ImageBtn")}onConstruct(){this.m_icon=this.getChildAt(0)}}),yl=(Sl.URL="ui://lcl1ulighhw83y2hk",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","TabBtn")}onConstruct(){this.m_n75=this.getChildAt(0),this.m_icon=this.getChildAt(1)}}),wl=(yl.URL="ui://lcl1ulighhw83y2hs",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","GameOverUI1")}onConstruct(){this.m_c1=this.getControllerAt(0),this.m_isStar=this.getControllerAt(1),this.m_rank=this.getControllerAt(2),this.m_YLPlatform=this.getControllerAt(3),this.m_ShowTImes=this.getControllerAt(4),this.m_firework=this.getChildAt(0),this.m_n193=this.getChildAt(1),this.m_Bg=this.getChildAt(2),this.m_youZiAdPos1=this.getChildAt(3),this.m_title=this.getChildAt(4),this.m_exitBtn=this.getChildAt(5),this.m_failed=this.getChildAt(6),this.m_OppoExitBtn=this.getChildAt(7),this.m_OppoBannerAdBtn1=this.getChildAt(8),this.m_OppoLookBtn1=this.getChildAt(9),this.m_youZiAdPos2=this.getChildAt(10),this.m_tips=this.getChildAt(11),this.m_GetNewHeroBtn=this.getChildAt(12),this.m_GetEquitBtn=this.getChildAt(13),this.m_GetLotteryBtn=this.getChildAt(14),this.m_n191=this.getChildAt(15),this.m_Dead=this.getChildAt(16),this.m_youZiAdPos3=this.getChildAt(17),this.m_titleBg=this.getChildAt(18),this.m_n160=this.getChildAt(19),this.m_BigTitle=this.getChildAt(20),this.m_rankText=this.getChildAt(21),this.m_continueBtn=this.getChildAt(22),this.m_Btn_Shard=this.getChildAt(23),this.m_n117=this.getChildAt(24),this.m_n115=this.getChildAt(25),this.m_MedalRewardList=this.getChildAt(26),this.m_medalInfoText=this.getChildAt(27),this.m_medalGroup=this.getChildAt(28),this.m_n118=this.getChildAt(29),this.m_n121=this.getChildAt(30),this.m_n136=this.getChildAt(31),this.m_expBar=this.getChildAt(32),this.m_n138=this.getChildAt(33),this.m_userLevelText=this.getChildAt(34),this.m_expText=this.getChildAt(35),this.m_addExpText=this.getChildAt(36),this.m_userExpGroup=this.getChildAt(37),this.m_n119=this.getChildAt(38),this.m_n120=this.getChildAt(39),this.m_rewardList=this.getChildAt(40),this.m_rewardGroup=this.getChildAt(41),this.m_shareVideoBtn=this.getChildAt(42),this.m_n150=this.getChildAt(43),this.m_n152=this.getChildAt(44),this.m_share=this.getChildAt(45),this.m_starBtn=this.getChildAt(46),this.m_OppoLookBtn=this.getChildAt(47),this.m_oppoContinueBtn=this.getChildAt(48),this.m_OppoBannerAdBtn=this.getChildAt(49),this.m_key1=this.getChildAt(50),this.m_key2=this.getChildAt(51),this.m_key3=this.getChildAt(52),this.m_n156=this.getChildAt(53),this.m_n172=this.getChildAt(54),this.m_DWContinuBtn=this.getChildAt(55),this.m_nowRankBg=this.getChildAt(56),this.m_medal=this.getChildAt(57),this.m_MedalRewardList1=this.getChildAt(58),this.m_medalInfoText1=this.getChildAt(59),this.m_FailedTittle=this.getChildAt(60),this.m_WinTittle=this.getChildAt(61),this.m_GameOverDetail=this.getChildAt(62),this.m_show=this.getTransitionAt(0),this.m_GameOverAni=this.getTransitionAt(1),this.m_levelUp=this.getTransitionAt(2),this.m_AddExp=this.getTransitionAt(3),this.m_GetMedalAni=this.getTransitionAt(4),this.m_GetBaseAni=this.getTransitionAt(5),this.m_t6=this.getTransitionAt(6)}}),vl=(wl.URL="ui://lcl1ulighiezy3y3n9",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","ReviveUI1")}onConstruct(){this.m_IsAutoRevive=this.getControllerAt(0),this.m_YLPlatform=this.getControllerAt(1),this.m_bg=this.getChildAt(0),this.m_BigTitle=this.getChildAt(1),this.m_countDownText=this.getChildAt(2),this.m_skipBtn=this.getChildAt(3),this.m_skipBtn2=this.getChildAt(4),this.m_beKillInfo=this.getChildAt(5),this.m_ReviceHint=this.getChildAt(6),this.m_OppoReviveBtn=this.getChildAt(7),this.m_OppoReviceHint=this.getChildAt(8),this.m_OppoLookBtn=this.getChildAt(9),this.m_OppoBannerAdBtn=this.getChildAt(10),this.m_list=this.getChildAt(11),this.m_skipBtn3=this.getChildAt(12),this.m_load_tankke=this.getChildAt(13),this.m_n176=this.getChildAt(14),this.m_reviveBtn=this.getChildAt(15),this.m_n182=this.getChildAt(16),this.m_n183=this.getChildAt(17),this.m_n186=this.getChildAt(18),this.m_n184=this.getChildAt(19),this.m_n187=this.getChildAt(20),this.m_n189=this.getChildAt(21),this.m_n190=this.getChildAt(22),this.m_n191=this.getChildAt(23),this.m_n193=this.getChildAt(24),this.m_n194=this.getChildAt(25),this.m_n195=this.getChildAt(26),this.m_n196=this.getChildAt(27),this.m_n200=this.getChildAt(28),this.m_n205=this.getChildAt(29),this.m_n206=this.getChildAt(30),this.m_n198=this.getChildAt(31),this.m_n197=this.getChildAt(32),this.m_WeaponIcon=this.getChildAt(33),this.m_heroNameText=this.getChildAt(34),this.m_WeaponNameText=this.getChildAt(35),this.m_HeroLevelText=this.getChildAt(36),this.m_WeaponLevelText=this.getChildAt(37),this.m_buffList=this.getChildAt(38),this.m_HeroIcon=this.getChildAt(39),this.m_n213=this.getChildAt(40),this.m_weaponTypeText=this.getChildAt(41),this.m_n212=this.getChildAt(42),this.m_Btn_Close=this.getChildAt(43),this.m_t0=this.getTransitionAt(0)}}),Dl=(vl.URL="ui://lcl1ulighiezy3y3na",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","ModelUI")}onConstruct(){this.m_bg=this.getChildAt(0),this.m_n1=this.getChildAt(1),this.m_textTip1=this.getChildAt(2),this.m_Btn_Close=this.getChildAt(3),this.m_list=this.getChildAt(4),this.m_n15=this.getChildAt(5)}}),Ul=(Dl.URL="ui://lcl1ulighlxky3y3mx",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","ModelUI_Btn1")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_Com=this.getChildAt(0),this.m_t0=this.getTransitionAt(0)}}),Ll=(Ul.URL="ui://lcl1ulighlxky3y3mz",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Com_ModeCom")}onConstruct(){this.m_c1=this.getControllerAt(0),this.m_load_bg=this.getChildAt(0),this.m_load_model=this.getChildAt(1),this.m_load_title=this.getChildAt(2),this.m_load_Condition=this.getChildAt(3),this.m_n27=this.getChildAt(4),this.m_luck_bg=this.getChildAt(5),this.m_leftText=this.getChildAt(6),this.m_maskBg=this.getChildAt(7),this.m_lock=this.getChildAt(8),this.m_load_unlock=this.getChildAt(9),this.m_videoCom=this.getChildAt(10),this.m_text_count=this.getChildAt(11),this.m_tip_video=this.getChildAt(12)}}),Bl=(Ll.URL="ui://lcl1ulighlxky3y3n0",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","GuideTips")}onConstruct(){this.m_n0=this.getChildAt(0),this.m_Tips=this.getChildAt(1),this.m_RenWu=this.getChildAt(2)}}),bl=(Bl.URL="ui://lcl1ulightiay3y3vc",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","WeaponUpGradeUI")}onConstruct(){this.m_c1=this.getControllerAt(0),this.m_c2=this.getControllerAt(1),this.m_YLPlatform=this.getControllerAt(2),this.m_n29=this.getChildAt(0),this.m_n27=this.getChildAt(1),this.m_n35=this.getChildAt(2),this.m_oldItem=this.getChildAt(3),this.m_n32=this.getChildAt(4),this.m_n37=this.getChildAt(5),this.m_info=this.getChildAt(6),this.m_UpgradeBtn=this.getChildAt(7),this.m_normalBtn=this.getChildAt(8),this.m_item1=this.getChildAt(9),this.m_item2=this.getChildAt(10),this.m_item3=this.getChildAt(11),this.m_normalBtn2=this.getChildAt(12),this.m_OppoUpgradeBtn=this.getChildAt(13),this.m_OppoLookBtn=this.getChildAt(14),this.m_OppoBannerAdBtn=this.getChildAt(15),this.m_t0=this.getTransitionAt(0),this.m_t1=this.getTransitionAt(1)}}),Al=(bl.URL="ui://lcl1ulighz163y37k",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","EquitDetaiUI_COM")}onConstruct(){this.m_arrows_isUp=this.getChildAt(0),this.m_t0=this.getTransitionAt(0)}}),xl=(Al.URL="ui://lcl1uligi2df3y3kf",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","subHeroUI_btn1")}onConstruct(){this.m_n75=this.getChildAt(0),this.m_n78=this.getChildAt(1)}}),Tl=(xl.URL="ui://lcl1uligi36c3y311",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","PlayerIngameDmgRank")}onConstruct(){this.m_playerName=this.getChildAt(0),this.m_score=this.getChildAt(1)}}),kl=(Tl.URL="ui://lcl1uligi4a43y3bu",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","RatingUI")}onConstruct(){this.m_maskBg=this.getChildAt(0),this.m_n2=this.getChildAt(1),this.m_Btn_Close=this.getChildAt(2),this.m_n15=this.getChildAt(3),this.m_n16=this.getChildAt(4),this.m_n17=this.getChildAt(5),this.m_s1=this.getChildAt(6),this.m_s2=this.getChildAt(7),this.m_s3=this.getChildAt(8),this.m_s4=this.getChildAt(9),this.m_s5=this.getChildAt(10),this.m_rateBtn=this.getChildAt(11),this.m_n10=this.getChildAt(12)}}),Ml=(kl.URL="ui://lcl1uligiipd3y37q",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","PlayerInfoUI")}onConstruct(){this.m_bg=this.getChildAt(0),this.m_n0=this.getChildAt(1),this.m_textTip1=this.getChildAt(2),this.m_Btn_Close=this.getChildAt(3),this.m_copyBtn=this.getChildAt(4),this.m_n6=this.getChildAt(5),this.m_text_v=this.getChildAt(6),this.m_text_id=this.getChildAt(7),this.m_textBtn=this.getChildAt(8),this.m_n12=this.getChildAt(9)}}),Rl=(Ml.URL="ui://lcl1uligij0r3y394",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Btn_Video_ResrefhCD")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n12=this.getChildAt(0),this.m_type=this.getChildAt(1),this.m_n11=this.getChildAt(2)}}),Pl=(Rl.URL="ui://lcl1uligiln83y3fd",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","ShopCom_Box3")}onConstruct(){this.m_showType=this.getControllerAt(0),this.m_n80=this.getChildAt(0),this.m_n88=this.getChildAt(1),this.m_load_xue=this.getChildAt(2),this.m_btn_info=this.getChildAt(3),this.m_icon=this.getChildAt(4),this.m_myName=this.getChildAt(5),this.m_tipCom=this.getChildAt(6),this.m_cdBtn=this.getChildAt(7),this.m_getBtn=this.getChildAt(8),this.m_n85=this.getChildAt(9),this.m_qq_tip=this.getChildAt(10),this.m_load_bin=this.getChildAt(11),this.m_n72=this.getChildAt(12),this.m_time=this.getChildAt(13),this.m_n74=this.getChildAt(14),this.m_n91=this.getChildAt(15),this.m_n92=this.getChildAt(16),this.m_n93=this.getChildAt(17),this.m_text_nowTime=this.getChildAt(18)}}),El=(Pl.URL="ui://lcl1uligiln83y3fe",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","TreasureUI_tip3")}onConstruct(){this.m_n55=this.getChildAt(0),this.m_n62=this.getChildAt(1)}}),Nl=(El.URL="ui://lcl1uligiln83y3ff",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","BuyMergeBtn_gold")}onConstruct(){this.m_n154=this.getChildAt(0),this.m_n155=this.getChildAt(1),this.m_icon_load=this.getChildAt(2),this.m_n157=this.getChildAt(3)}}),Fl=(Nl.URL="ui://lcl1uligiln83y3fg",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","TryHeroSkinUI")}onConstruct(){this.m_sp=this.getControllerAt(0),this.m_debris=this.getControllerAt(1),this.m_ad=this.getControllerAt(2),this.m_bg=this.getChildAt(0),this.m_n23=this.getChildAt(1),this.m_n3=this.getChildAt(2),this.m_n22=this.getChildAt(3),this.m_Btn_Close=this.getChildAt(4),this.m_n21=this.getChildAt(5),this.m_n2=this.getChildAt(6),this.m_text_name=this.getChildAt(7),this.m_text_rare=this.getChildAt(8),this.m_text_info=this.getChildAt(9),this.m_rewardItem=this.getChildAt(10),this.m_bar=this.getChildAt(11),this.m_text_nowCount=this.getChildAt(12),this.m_text_addCount=this.getChildAt(13),this.m_text_info2=this.getChildAt(14),this.m_n20=this.getChildAt(15),this.m_videoBtn=this.getChildAt(16),this.m_closeBtn2=this.getChildAt(17),this.m_t0=this.getTransitionAt(0)}}),Ol=(Fl.URL="ui://lcl1uligiq3i3y3l0",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Btn5")}onConstruct(){this.m_icon=this.getChildAt(0)}}),Hl=(Ol.URL="ui://lcl1uligiq3i3y3l1",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","ChangedHp")}onConstruct(){this.m_c1=this.getControllerAt(0),this.m_redText=this.getChildAt(0),this.m_greenText=this.getChildAt(1),this.m_misstext=this.getChildAt(2),this.m_n134=this.getChildAt(3),this.m_red=this.getTransitionAt(0),this.m_green=this.getTransitionAt(1),this.m_miss=this.getTransitionAt(2),this.m_parry=this.getTransitionAt(3),this.m_t1=this.getTransitionAt(4),this.m_t2=this.getTransitionAt(5),this.m_t3=this.getTransitionAt(6),this.m_t4=this.getTransitionAt(7),this.m_t5=this.getTransitionAt(8)}}),Vl=(Hl.URL="ui://lcl1uligiuyly3y48n",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","BuleBgAnimationCom")}onConstruct(){this.m_bg=this.getChildAt(0),this.m_t0=this.getTransitionAt(0)}}),zl=(Vl.URL="ui://lcl1uligj2tf3y2vd",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Btn_free")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n3=this.getChildAt(0),this.m_n5=this.getChildAt(1),this.m_n6=this.getChildAt(2)}}),Wl=(zl.URL="ui://lcl1uligj2tf3y2ve",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","WeaponStoreUI_ItemBuyBtn")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_type=this.getControllerAt(1),this.m_n3=this.getChildAt(0),this.m_n4=this.getChildAt(1),this.m_value=this.getChildAt(2),this.m_n7=this.getChildAt(3),this.m_n8=this.getChildAt(4)}}),Zl=(Wl.URL="ui://lcl1uligj2tf3y2vm",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Top_addBtn")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n3=this.getChildAt(0)}}),jl=(Zl.URL="ui://lcl1uligj2tf3y2vn",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","OffLineUI")}onConstruct(){this.m_ad=this.getControllerAt(0),this.m_bg=this.getChildAt(0),this.m_n0=this.getChildAt(1),this.m_textTip1=this.getChildAt(2),this.m_Com_RewardItm=this.getChildAt(3),this.m_Btn_Close=this.getChildAt(4),this.m_n10=this.getChildAt(5),this.m_getBtn=this.getChildAt(6),this.m_Btn_Video=this.getChildAt(7),this.m_getBtn2=this.getChildAt(8),this.m_OppoLookBtn=this.getChildAt(9),this.m_OppoVideo=this.getChildAt(10),this.m_OppoBannerAdBtn=this.getChildAt(11)}}),Kl=(jl.URL="ui://lcl1uligj2tf3y2vq",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Btn_Video_Double")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n3=this.getChildAt(0),this.m_type=this.getChildAt(1),this.m_n7=this.getChildAt(2)}}),ql=(Kl.URL="ui://lcl1uligj2tf3y2vr",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Btn_ordinary_getBtn")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n3=this.getChildAt(0)}}),Yl=(ql.URL="ui://lcl1uligj2tf3y2vv",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","TryTheSkinUI")}onConstruct(){this.m_ad=this.getControllerAt(0),this.m_bg=this.getChildAt(0),this.m_n3=this.getChildAt(1),this.m_n21=this.getChildAt(2),this.m_Btn_Close=this.getChildAt(3),this.m_n2=this.getChildAt(4),this.m_text_name=this.getChildAt(5),this.m_text_rare=this.getChildAt(6),this.m_text_info=this.getChildAt(7),this.m_rewardItem=this.getChildAt(8),this.m_bar=this.getChildAt(9),this.m_text_nowCount=this.getChildAt(10),this.m_text_info2=this.getChildAt(11),this.m_text_info3=this.getChildAt(12),this.m_n20=this.getChildAt(13),this.m_btn_close2=this.getChildAt(14),this.m_text_addCount=this.getChildAt(15),this.m_videoBtn=this.getChildAt(16)}}),Ql=(Yl.URL="ui://lcl1uligjac33y3l2",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","ChangeSkill")}onConstruct(){this.m_c1=this.getControllerAt(0),this.m_ChangeBtn=this.getChildAt(0),this.m_n18=this.getChildAt(1),this.m_SkillIconCom1=this.getChildAt(2),this.m_Icon1=this.getChildAt(3),this.m_skillName1=this.getChildAt(4),this.m_n20=this.getChildAt(5),this.m_Timestext1=this.getChildAt(6),this.m_Lvtext1=this.getChildAt(7),this.m_n26=this.getChildAt(8),this.m_Icon2=this.getChildAt(9),this.m_SkillIconCom2=this.getChildAt(10),this.m_skillName2=this.getChildAt(11),this.m_n23=this.getChildAt(12),this.m_Timestext2=this.getChildAt(13),this.m_Lvtext2=this.getChildAt(14),this.m_n28=this.getChildAt(15),this.m_n29=this.getChildAt(16)}}),Jl=(Ql.URL="ui://lcl1uligjbg0y3y3v1",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","GunUpgradesUI")}onConstruct(){this.m_bg=this.getChildAt(0),this.m_n1=this.getChildAt(1),this.m_list=this.getChildAt(2),this.m_btn_change=this.getChildAt(3),this.m_CloseBtn=this.getChildAt(4),this.m_n10=this.getChildAt(5)}}),Xl=(Jl.URL="ui://lcl1uligjbg0y3y3v3",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","SkillRandom_Btn5")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_SkillType=this.getControllerAt(1),this.m_n18=this.getChildAt(0),this.m_type=this.getChildAt(1),this.m_n19=this.getChildAt(2)}}),$l=(Xl.URL="ui://lcl1uligjbg0y3y3v4",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","UnlockSkill")}onConstruct(){this.m_Icon=this.getChildAt(0),this.m_name=this.getChildAt(1)}}),er=($l.URL="ui://lcl1uligjbg0y3y3v6",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","DialUI_dialCom")}onConstruct(){this.m_dial=this.getChildAt(0),this.m_item2=this.getChildAt(1),this.m_item6=this.getChildAt(2),this.m_item1=this.getChildAt(3),this.m_item3=this.getChildAt(4),this.m_item4=this.getChildAt(5),this.m_item5=this.getChildAt(6)}}),tr=(er.URL="ui://lcl1uligjgqy3y2s0",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Sign_Btn_day7")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n7=this.getChildAt(0),this.m_maskBg=this.getChildAt(1),this.m_n5=this.getChildAt(2),this.m_end=this.getChildAt(3),this.m_n9=this.getChildAt(4)}}),ir=(tr.URL="ui://lcl1uligjgqy3y2s2",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Sign_Btn_dayItem")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_dayIng=this.getChildAt(0),this.m_buleBg=this.getChildAt(1),this.m_RewardItem=this.getChildAt(2),this.m_maskBg=this.getChildAt(3),this.m_dayurl=this.getChildAt(4),this.m_end=this.getChildAt(5),this.m_t0=this.getTransitionAt(0)}}),or=(ir.URL="ui://lcl1uligjgqy3y2s3",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","GetReward_Btn1")}onConstruct(){this.m_c1=this.getControllerAt(0),this.m_n75=this.getChildAt(0),this.m_icon=this.getChildAt(1),this.m_type=this.getChildAt(2),this.m_n79=this.getChildAt(3),this.m_n78=this.getChildAt(4)}}),ar=(or.URL="ui://lcl1uligjiri3y306",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Btn_Hao")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n3=this.getChildAt(0),this.m_n9=this.getChildAt(1)}}),nr=(ar.URL="ui://lcl1uligjjvqy3y3p1",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","MergeFinger")}onConstruct(){this.m_Finger=this.getControllerAt(0),this.m_n156=this.getChildAt(0),this.m_n157=this.getChildAt(1)}}),sr=(nr.URL="ui://lcl1uligjmn13y2w0",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","AppointUI")}onConstruct(){this.m_c1=this.getControllerAt(0),this.m_bg=this.getChildAt(0),this.m_n0=this.getChildAt(1),this.m_load_appoint=this.getChildAt(2),this.m_Btn_Yes=this.getChildAt(3),this.m_n29=this.getChildAt(4),this.m_time=this.getChildAt(5),this.m_btn_get=this.getChildAt(6),this.m_Btn_Close=this.getChildAt(7),this.m_load_icon=this.getChildAt(8),this.m_load_time=this.getChildAt(9),this.m_texiao=this.getChildAt(10),this.m_n35=this.getChildAt(11)}}),lr=(sr.URL="ui://lcl1uligjwyky3y3sy",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Btn_Get")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n3=this.getChildAt(0),this.m_n10=this.getChildAt(1)}}),rr=(lr.URL="ui://lcl1uligjwyky3y3sz",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Btn_Video_confirm3")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n3=this.getChildAt(0),this.m_n9=this.getChildAt(1)}}),hr=(rr.URL="ui://lcl1uligjwyky3y3t0",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Cover_appointBtn")}onConstruct(){this.m_c1=this.getControllerAt(0),this.m_n14=this.getChildAt(0),this.m_n13=this.getChildAt(1),this.m_n15=this.getChildAt(2),this.m_time=this.getChildAt(3),this.m_n17=this.getChildAt(4)}}),mr=(hr.URL="ui://lcl1uligjwyky3y3t1",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Btn_Video_Resrefh")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_C_hero=this.getControllerAt(1),this.m_n7=this.getChildAt(0),this.m_type=this.getChildAt(1),this.m_n6=this.getChildAt(2),this.m_tipBg=this.getChildAt(3),this.m_tip_info1=this.getChildAt(4),this.m_n10=this.getChildAt(5)}}),dr=(mr.URL="ui://lcl1uligk13p3y2s6",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Btn_Video_Get")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n3=this.getChildAt(0),this.m_type=this.getChildAt(1),this.m_n7=this.getChildAt(2)}}),cr=(dr.URL="ui://lcl1uligk13p3y2s7",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","BurnkDoorBtn")}onConstruct(){this.m_c1=this.getControllerAt(0),this.m_n84=this.getChildAt(0),this.m_n85=this.getChildAt(1),this.m_t0=this.getTransitionAt(0)}}),ur=(cr.URL="ui://lcl1uligk4m9y3y3pv",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","DayHitCom")}onConstruct(){this.m_c1=this.getControllerAt(0),this.m_Herye=this.getChildAt(0),this.m_Xueye=this.getChildAt(1),this.m_n4=this.getChildAt(2),this.m_dayText=this.getChildAt(3),this.m_zhiZhen=this.getChildAt(4),this.m_n5=this.getChildAt(5),this.m_n7=this.getChildAt(6),this.m_addCoinTip=this.getChildAt(7),this.m_t0=this.getTransitionAt(0)}}),pr=(ur.URL="ui://lcl1uligk4m9y3y3py",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","ResourceBar")}onConstruct(){this.m_n4=this.getChildAt(0),this.m_Icon=this.getChildAt(1),this.m_numText=this.getChildAt(2),this.m_AddTip=this.getChildAt(3)}}),gr=(pr.URL="ui://lcl1uligk4m9y3y3q2",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","XiuLiBtn")}onConstruct(){this.m_c1=this.getControllerAt(0),this.m_n86=this.getChildAt(0),this.m_needNumText=this.getChildAt(1),this.m_n90=this.getChildAt(2),this.m_t0=this.getTransitionAt(0)}}),fr=(gr.URL="ui://lcl1uligk4m9y3y3q5",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","CarDoorBtn")}onConstruct(){this.m_c1=this.getControllerAt(0),this.m_n86=this.getChildAt(0),this.m_n87=this.getChildAt(1),this.m_t0=this.getTransitionAt(0)}}),_r=(fr.URL="ui://lcl1uligk4m9y3y3q7",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","ChongNengBtn")}onConstruct(){this.m_c1=this.getControllerAt(0),this.m_n88=this.getChildAt(0),this.m_needNumText2=this.getChildAt(1),this.m_n92=this.getChildAt(2),this.m_t0=this.getTransitionAt(0)}}),Ir=(_r.URL="ui://lcl1uligk4m9y3y3qa",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","UpgradeBunkerBtn")}onConstruct(){this.m_n91=this.getChildAt(0),this.m_needNumText=this.getChildAt(1),this.m_n90=this.getChildAt(2),this.m_t0=this.getTransitionAt(0)}}),Cr=(Ir.URL="ui://lcl1uligk4m9y3y3qc",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","BunkerShopBtn")}onConstruct(){this.m_n89=this.getChildAt(0),this.m_t0=this.getTransitionAt(0)}}),Gr=(Cr.URL="ui://lcl1uligk4m9y3y3qe",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","BuyGunItem")}onConstruct(){this.m_c1=this.getControllerAt(0),this.m_n18=this.getChildAt(0),this.m_n17=this.getChildAt(1),this.m_n3=this.getChildAt(2),this.m_Icon=this.getChildAt(3),this.m_WeaponType=this.getChildAt(4),this.m_WeaponLevelText=this.getChildAt(5),this.m_buyBtn=this.getChildAt(6),this.m_n11=this.getChildAt(7),this.m_zhanLiText=this.getChildAt(8),this.m_arrowsCom=this.getChildAt(9),this.m_WeaponName=this.getChildAt(10)}}),Sr=(Gr.URL="ui://lcl1uligk4m9y3y3qh",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","BuyGunBtn")}onConstruct(){this.m_c1=this.getControllerAt(0),this.m_n6=this.getChildAt(0),this.m_n3=this.getChildAt(1),this.m_n4=this.getChildAt(2),this.m_n5=this.getChildAt(3),this.m_n7=this.getChildAt(4),this.m_type=this.getChildAt(5),this.m_n10=this.getChildAt(6)}}),yr=(Sr.URL="ui://lcl1uligk4m9y3y3qj",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","ShopCloseBtn")}onConstruct(){this.m_n3=this.getChildAt(0)}}),wr=(yr.URL="ui://lcl1uligk4m9y3y3ql",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","ChangeGunCom")}onConstruct(){this.m_n0=this.getChildAt(0),this.m_n7=this.getChildAt(1),this.m_n8=this.getChildAt(2),this.m_ChangeBtn=this.getChildAt(3),this.m_n10=this.getChildAt(4),this.m_Icon1=this.getChildAt(5),this.m_weaponType1=this.getChildAt(6),this.m_level1=this.getChildAt(7),this.m_weaponName1=this.getChildAt(8),this.m_n11=this.getChildAt(9),this.m_Icon2=this.getChildAt(10),this.m_weaponType2=this.getChildAt(11),this.m_level2=this.getChildAt(12),this.m_n18=this.getChildAt(13),this.m_zhanDouLiText2=this.getChildAt(14),this.m_arrowsCom=this.getChildAt(15),this.m_weaponName2=this.getChildAt(16),this.m_n28=this.getChildAt(17)}}),vr=(wr.URL="ui://lcl1uligk4m9y3y3qn",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","ChangeBtn")}onConstruct(){this.m_n3=this.getChildAt(0),this.m_n4=this.getChildAt(1),this.m_n5=this.getChildAt(2),this.m_t0=this.getTransitionAt(0)}}),Dr=(vr.URL="ui://lcl1uligk4m9y3y3qr",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","ChangeSkillCom")}onConstruct(){this.m_n0=this.getChildAt(0),this.m_n40=this.getChildAt(1),this.m_n41=this.getChildAt(2),this.m_n12=this.getChildAt(3),this.m_SkillCom2=this.getChildAt(4),this.m_SkillCom1=this.getChildAt(5),this.m_SkillCom3=this.getChildAt(6)}}),Ur=(Dr.URL="ui://lcl1uligk4m9y3y3qt",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","TentCom")}onConstruct(){this.m_ShengJiBtn=this.getChildAt(0),this.m_ShangdianBtn=this.getChildAt(1),this.m_leftBar=this.getChildAt(2),this.m_QuestBtn=this.getChildAt(3)}}),Lr=(Ur.URL="ui://lcl1uligk4m9y3y3qv",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","DoorCom")}onConstruct(){this.m_doorBtn=this.getChildAt(0),this.m_xiuliBtn=this.getChildAt(1),this.m_leftBar=this.getChildAt(2)}}),Br=(Lr.URL="ui://lcl1uligk4m9y3y3qx",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","CarCom")}onConstruct(){this.m_jiaYouBtn=this.getChildAt(0),this.m_rightBar=this.getChildAt(1),this.m_xiuliCheBtn=this.getChildAt(2),this.m_cheMenBtn=this.getChildAt(3)}}),br=(Br.URL="ui://lcl1uligk4m9y3y3qy",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","TentShopUI")}onConstruct(){this.m_bg=this.getChildAt(0),this.m_n14=this.getChildAt(1),this.m_n16=this.getChildAt(2),this.m_closeBtn=this.getChildAt(3),this.m_ShopList=this.getChildAt(4),this.m_n26=this.getChildAt(5),this.m_t0=this.getTransitionAt(0)}}),Ar=(br.URL="ui://lcl1uligk4m9y3y3rm",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Fireworks")}onConstruct(){this.m_Point1=this.getChildAt(0),this.m_Point2=this.getChildAt(1),this.m_Point3=this.getChildAt(2)}}),xr=(Ar.URL="ui://lcl1uligk5vq3y2k3",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Btn_CDK")}onConstruct(){this.m_n82=this.getChildAt(0),this.m_n83=this.getChildAt(1),this.m_t0=this.getTransitionAt(0)}}),Tr=(xr.URL="ui://lcl1uligktab3y3bc",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","ZombieFactoryMaxTip")}onConstruct(){this.m_c1=this.getControllerAt(0),this.m_n268=this.getChildAt(0),this.m_Text=this.getChildAt(1)}}),kr=(Tr.URL="ui://lcl1uligl99ty3y462",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","ZombieRadiation")}onConstruct(){this.m_n0=this.getChildAt(0),this.m_Title=this.getChildAt(1),this.m_Level=this.getChildAt(2)}}),Mr=(kr.URL="ui://lcl1uligl99ty3y463",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","GetHeroUI")}onConstruct(){this.m_ShowTimes=this.getControllerAt(0),this.m_YLPlatform=this.getControllerAt(1),this.m_text_name=this.getChildAt(0),this.m_text_rare=this.getChildAt(1),this.m_closeBtn1=this.getChildAt(2),this.m_n29=this.getChildAt(3),this.m_text_info=this.getChildAt(4),this.m_n2=this.getChildAt(5),this.m_n35=this.getChildAt(6),this.m_videoBtn=this.getChildAt(7),this.m_closeBtn2=this.getChildAt(8),this.m_n33=this.getChildAt(9),this.m_buyBtn=this.getChildAt(10),this.m_OppoBannerAdBtn=this.getChildAt(11),this.m_t0=this.getTransitionAt(0)}}),Rr=(Mr.URL="ui://lcl1uligld2ay3y3m1",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Btn_QQaddDesktop")}onConstruct(){this.m_n87=this.getChildAt(0),this.m_n88=this.getChildAt(1),this.m_t0=this.getTransitionAt(0)}}),Pr=(Rr.URL="ui://lcl1uligldsay3y3wb",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Sign_Com2")}onConstruct(){this.m_n8=this.getChildAt(0),this.m_dayIng=this.getChildAt(1)}}),Er=(Pr.URL="ui://lcl1uligllj43y2xq",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","subHeroUI_btn2")}onConstruct(){this.m_n75=this.getChildAt(0),this.m_n79=this.getChildAt(1),this.m_n81=this.getChildAt(2),this.m_n82=this.getChildAt(3),this.m_n86=this.getChildAt(4)}}),Nr=(Er.URL="ui://lcl1uliglq0py3y48h",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","TryTheSkin3DUI")}onConstruct(){this.m_ad=this.getControllerAt(0),this.m_c1=this.getControllerAt(1),this.m_text_name=this.getChildAt(0),this.m_text_rare=this.getChildAt(1),this.m_text_info=this.getChildAt(2),this.m_bar=this.getChildAt(3),this.m_text_nowCount=this.getChildAt(4),this.m_text_addCount=this.getChildAt(5),this.m_text_info3=this.getChildAt(6),this.m_btn_close2=this.getChildAt(7),this.m_n26=this.getChildAt(8),this.m_text_info2=this.getChildAt(9),this.m_closeBtn2=this.getChildAt(10),this.m_videoBtn=this.getChildAt(11),this.m_n2=this.getChildAt(12),this.m_OppoLookBtn=this.getChildAt(13),this.m_OppoVideoBtn=this.getChildAt(14),this.m_OppoBannerAdBtn=this.getChildAt(15),this.m_n32=this.getChildAt(16),this.m_n33=this.getChildAt(17),this.m_n34=this.getChildAt(18),this.m_n35=this.getChildAt(19)}}),Fr=(Nr.URL="ui://lcl1uliglwrs3y371",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Btn1_Video2")}onConstruct(){this.m_c1=this.getControllerAt(0),this.m_n75=this.getChildAt(0),this.m_icon=this.getChildAt(1),this.m_type=this.getChildAt(2),this.m_n79=this.getChildAt(3),this.m_n80=this.getChildAt(4),this.m_t0=this.getTransitionAt(0)}}),Or=(Fr.URL="ui://lcl1uliglwrs3y379",class extends fgui.GProgressBar{static createInstance(){return fgui.UIPackage.createObject("InGameUI","TryTheSkinUI_bar1")}onConstruct(){this.m_n0=this.getChildAt(0),this.m_bar=this.getChildAt(1),this.m_n7=this.getChildAt(2)}}),Hr=(Or.URL="ui://lcl1uliglwrs3y37a",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","SignNewYearUI")}onConstruct(){this.m_Btn=this.getControllerAt(0),this.m_c1=this.getControllerAt(1),this.m_maskBg=this.getChildAt(0),this.m_n22=this.getChildAt(1),this.m_load_bg1=this.getChildAt(2),this.m_load_bg2=this.getChildAt(3),this.m_n42=this.getChildAt(4),this.m_n43=this.getChildAt(5),this.m_n44=this.getChildAt(6),this.m_list=this.getChildAt(7),this.m_Btn_Close=this.getChildAt(8),this.m_getBtn=this.getChildAt(9),this.m_n13=this.getChildAt(10),this.m_load_bg3=this.getChildAt(11),this.m_load_bg4=this.getChildAt(12),this.m_n45=this.getChildAt(13),this.m_btn_day7=this.getChildAt(14),this.m_text_info=this.getChildAt(15)}}),Vr=(Hr.URL="ui://lcl1uliglypqy3y49t",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","BuleBg3AnimationCom")}onConstruct(){this.m_bg=this.getChildAt(0),this.m_t0=this.getTransitionAt(0)}}),zr=(Vr.URL="ui://lcl1uliglypqy3y49u",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Btn_Get3")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n3=this.getChildAt(0),this.m_n10=this.getChildAt(1)}}),Wr=(zr.URL="ui://lcl1uliglypqy3y4a1",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Btn_Sign_End2")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n3=this.getChildAt(0),this.m_n9=this.getChildAt(1)}}),Zr=(Wr.URL="ui://lcl1uliglypqy3y4a2",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Sign_Btn_Com3")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_C_type=this.getControllerAt(1),this.m_C_end=this.getControllerAt(2),this.m_n10=this.getChildAt(0),this.m_n11=this.getChildAt(1),this.m_mask1=this.getChildAt(2),this.m_n18=this.getChildAt(3),this.m_load_icon=this.getChildAt(4),this.m_text_day=this.getChildAt(5),this.m_text_name=this.getChildAt(6),this.m_n15=this.getChildAt(7),this.m_text_count=this.getChildAt(8),this.m_mask=this.getChildAt(9),this.m_n17=this.getChildAt(10),this.m_t0=this.getTransitionAt(0)}}),jr=(Zr.URL="ui://lcl1uliglypqy3y4a4",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Sign_Btn_Com4")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_C_type=this.getControllerAt(1),this.m_C_end=this.getControllerAt(2),this.m_n10=this.getChildAt(0),this.m_n11=this.getChildAt(1),this.m_mask1=this.getChildAt(2),this.m_n15=this.getChildAt(3),this.m_n16=this.getChildAt(4),this.m_n17=this.getChildAt(5),this.m_n18=this.getChildAt(6),this.m_n19=this.getChildAt(7),this.m_n20=this.getChildAt(8),this.m_n12=this.getChildAt(9),this.m_text_text=this.getChildAt(10),this.m_n21=this.getChildAt(11),this.m_mask=this.getChildAt(12),this.m_t0=this.getTransitionAt(0)}}),Kr=(jr.URL="ui://lcl1uliglypqy3y4ab",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Cover_Btn_signNewYear")}onConstruct(){this.m_n83=this.getChildAt(0),this.m_n84=this.getChildAt(1),this.m_t0=this.getTransitionAt(0)}}),qr=(Kr.URL="ui://lcl1uliglypqy3y4aj",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","GMUI_Btn_grid")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n0=this.getChildAt(0),this.m_n1=this.getChildAt(1),this.m_n2=this.getChildAt(2),this.m_info=this.getChildAt(3)}}),Yr=(qr.URL="ui://lcl1uliglypqy3y4aq",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","UserInfoUI")}onConstruct(){this.m_c1=this.getControllerAt(0),this.m_n0=this.getChildAt(0),this.m_n32=this.getChildAt(1),this.m_TabBtn=this.getChildAt(2),this.m_n7=this.getChildAt(3),this.m_bar=this.getChildAt(4),this.m_n9=this.getChildAt(5),this.m_levelText=this.getChildAt(6),this.m_expText=this.getChildAt(7),this.m_n17=this.getChildAt(8),this.m_n18=this.getChildAt(9),this.m_list=this.getChildAt(10),this.m_icon=this.getChildAt(11),this.m_audioBtn=this.getChildAt(12),this.m_shakeBtn=this.getChildAt(13),this.m_closeBtn=this.getChildAt(14),this.m_n26=this.getChildAt(15),this.m_text_name=this.getChildAt(16),this.m_n27=this.getChildAt(17),this.m_n38=this.getChildAt(18),this.m_n39=this.getChildAt(19),this.m_copy2Btn=this.getChildAt(20),this.m_n41=this.getChildAt(21),this.m_n31=this.getChildAt(22),this.m_n42=this.getChildAt(23),this.m_n43=this.getChildAt(24),this.m_inputText=this.getChildAt(25),this.m_YesBtn=this.getChildAt(26),this.m_n46=this.getChildAt(27),this.m_textBtn=this.getChildAt(28),this.m_btn_rms=this.getChildAt(29),this.m_copyBtn=this.getChildAt(30),this.m_text_id=this.getChildAt(31)}}),Qr=(Yr.URL="ui://lcl1uliglzody3y3tx",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","UserinfoUI_com1")}onConstruct(){this.m_n24=this.getChildAt(0),this.m_text_count=this.getChildAt(1),this.m_text_info1=this.getChildAt(2),this.m_text_info2=this.getChildAt(3),this.m_icon=this.getChildAt(4)}}),Jr=(Qr.URL="ui://lcl1uliglzody3y3ty",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","userInfo_Btn1")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n4=this.getChildAt(0),this.m_offBg=this.getChildAt(1),this.m_text_info=this.getChildAt(2)}}),Xr=(Jr.URL="ui://lcl1uliglzody3y3tz",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","cover_com2")}onConstruct(){this.m_c1=this.getControllerAt(0),this.m_textCover6=this.getChildAt(0),this.m_n177=this.getChildAt(1)}}),$r=(Xr.URL="ui://lcl1uliglzody3y3u0",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","ChangeBulletBtn")}onConstruct(){this.m_n107=this.getChildAt(0),this.m_mask=this.getChildAt(1),this.m_text=this.getChildAt(2)}}),eh=($r.URL="ui://lcl1uligm0d13y3hd",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","KillTips")}onConstruct(){this.m_n0=this.getChildAt(0),this.m_N1=this.getChildAt(1),this.m_N2=this.getChildAt(2),this.m_N3=this.getChildAt(3),this.m_N4=this.getChildAt(4),this.m_N5=this.getChildAt(5),this.m_N6=this.getChildAt(6),this.m_t0=this.getTransitionAt(0)}}),th=(eh.URL="ui://lcl1uligm0d13y3hi",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","DanJiaCom1")}onConstruct(){this.m_list=this.getChildAt(0),this.m_m10=this.getChildAt(1),this.m_m9=this.getChildAt(2),this.m_m8=this.getChildAt(3),this.m_m7=this.getChildAt(4),this.m_m6=this.getChildAt(5),this.m_m5=this.getChildAt(6),this.m_m4=this.getChildAt(7),this.m_m3=this.getChildAt(8),this.m_m2=this.getChildAt(9),this.m_m1=this.getChildAt(10)}}),ih=(th.URL="ui://lcl1uligm0d13y3hj",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","DanJiaCom2")}onConstruct(){this.m_n197=this.getChildAt(0),this.m_bar=this.getChildAt(1),this.m_t0=this.getTransitionAt(0)}}),oh=(ih.URL="ui://lcl1uligm0d13y3ho",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","DanJiaCom3")}onConstruct(){this.m_n204=this.getChildAt(0),this.m_n199=this.getChildAt(1),this.m_n200=this.getChildAt(2),this.m_t0=this.getTransitionAt(0)}}),ah=(oh.URL="ui://lcl1uligm0d13y3hp",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","PlvUnlockSkill")}onConstruct(){this.m_c1=this.getControllerAt(0),this.m_n20=this.getChildAt(0),this.m_icon=this.getChildAt(1),this.m_skillName=this.getChildAt(2),this.m_n23=this.getChildAt(3),this.m_n24=this.getChildAt(4)}}),nh=(ah.URL="ui://lcl1uligmb2w3y39e",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","AddToDesktopUI")}onConstruct(){this.m_AddtoDesktop=this.getControllerAt(0),this.m_bg=this.getChildAt(0),this.m_n19=this.getChildAt(1),this.m_load_a1=this.getChildAt(2),this.m_load_b1=this.getChildAt(3),this.m_loadBg=this.getChildAt(4),this.m_load_icon1=this.getChildAt(5),this.m_addBtn=this.getChildAt(6),this.m_videoBtn=this.getChildAt(7),this.m_Btn_Close=this.getChildAt(8),this.m_n28=this.getChildAt(9),this.m_t0=this.getTransitionAt(0),this.m_t2=this.getTransitionAt(1)}}),sh=(nh.URL="ui://lcl1uligmb2w3y39h",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","TryHeroSkin3DUI")}onConstruct(){this.m_sp=this.getControllerAt(0),this.m_debris=this.getControllerAt(1),this.m_ad=this.getControllerAt(2),this.m_n21=this.getChildAt(0),this.m_text_name=this.getChildAt(1),this.m_text_rare=this.getChildAt(2),this.m_bar=this.getChildAt(3),this.m_text_nowCount=this.getChildAt(4),this.m_text_addCount=this.getChildAt(5),this.m_videoBtn=this.getChildAt(6),this.m_closeBtn1=this.getChildAt(7),this.m_n29=this.getChildAt(8),this.m_n27=this.getChildAt(9),this.m_text_info2=this.getChildAt(10),this.m_text_info=this.getChildAt(11),this.m_n2=this.getChildAt(12),this.m_closeBtn3=this.getChildAt(13),this.m_OppoLookBtn=this.getChildAt(14),this.m_OppoVideoBtn=this.getChildAt(15),this.m_OppoBannerAdBtn=this.getChildAt(16),this.m_n36=this.getChildAt(17),this.m_n38=this.getChildAt(18),this.m_n40=this.getChildAt(19),this.m_n42=this.getChildAt(20),this.m_closeBtn2=this.getChildAt(21),this.m_t0=this.getTransitionAt(0)}}),lh=(sh.URL="ui://lcl1uligmb2w3y39j",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","ImageTestBtn")}onConstruct(){this.m_n77=this.getChildAt(0),this.m_n79=this.getChildAt(1)}}),rh=(lh.URL="ui://lcl1uligmd8o3y3gn",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","HudArrow")}onConstruct(){this.m_c1=this.getControllerAt(0),this.m_arrow=this.getChildAt(0),this.m_n143=this.getChildAt(1),this.m_n145=this.getChildAt(2),this.m_n146=this.getChildAt(3),this.m_n147=this.getChildAt(4),this.m_n149=this.getChildAt(5),this.m_n152=this.getChildAt(6),this.m_icon=this.getChildAt(7),this.m_n153=this.getChildAt(8),this.m_QuestShow=this.getTransitionAt(0)}}),hh=(rh.URL="ui://lcl1uligmnzv3y300",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Cover_weaponSkinBtn")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n6=this.getChildAt(0),this.m_rewardItem=this.getChildAt(1),this.m_text_2=this.getChildAt(2)}}),mh=(hh.URL="ui://lcl1uligmury3y37c",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","weaponSkinCom")}onConstruct(){this.m_weaponSkinBtn=this.getChildAt(0)}}),dh=(mh.URL="ui://lcl1uligmury3y37d",class extends fgui.GProgressBar{static createInstance(){return fgui.UIPackage.createObject("InGameUI","TryTheSkinUI_bar2")}onConstruct(){this.m_n0=this.getChildAt(0),this.m_bar=this.getChildAt(1),this.m_n7=this.getChildAt(2)}}),ch=(dh.URL="ui://lcl1uligmury3y37f",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Btn_weaponSkinComBtn")}onConstruct(){this.m_bg=this.getChildAt(0),this.m_selectBg=this.getChildAt(1),this.m_text_info=this.getChildAt(2),this.m_text_name=this.getChildAt(3),this.m_rewardItem=this.getChildAt(4),this.m_bar=this.getChildAt(5),this.m_tick=this.getChildAt(6),this.m_lock=this.getChildAt(7),this.m_text_nowCount=this.getChildAt(8),this.m_isTryCardBG=this.getChildAt(9),this.m_isTryCard=this.getChildAt(10)}}),uh=(ch.URL="ui://lcl1uligmury3y37g",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","WeaponSkinComUI")}onConstruct(){this.m_inputBg=this.getChildAt(0),this.m_weaponSkinCom=this.getChildAt(1),this.m_listCom=this.getChildAt(2)}}),ph=(uh.URL="ui://lcl1uligmury3y37i",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","WeaponSkinComUI_ListCom")}onConstruct(){this.m_listBg=this.getChildAt(0),this.m_list=this.getChildAt(1)}}),gh=(ph.URL="ui://lcl1uligmury3y37j",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","DialogWindow")}onConstruct(){this.m_c1=this.getControllerAt(0),this.m_n2=this.getChildAt(0),this.m_n7=this.getChildAt(1),this.m_YesBtn=this.getChildAt(2),this.m_NoBtn=this.getChildAt(3),this.m_info=this.getChildAt(4),this.m_OKBtn=this.getChildAt(5),this.m_t0=this.getTransitionAt(0)}}),fh=(gh.URL="ui://lcl1uligmx6dy1gq",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","OKButton")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n0=this.getChildAt(0)}}),_h=(fh.URL="ui://lcl1uligmx6dy1gt",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","NoButton")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n1=this.getChildAt(0)}}),Ih=(_h.URL="ui://lcl1uligmx6dy1gv",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","PromptSaleUI")}onConstruct(){this.m_YLPlatform=this.getControllerAt(0),this.m_bg=this.getChildAt(0),this.m_n1=this.getChildAt(1),this.m_Btn_Close=this.getChildAt(2),this.m_Btn1_SellEquipment=this.getChildAt(3),this.m_tittleIcon=this.getChildAt(4),this.m_hintIcon=this.getChildAt(5),this.m_n6=this.getChildAt(6),this.m_OppoAdBtn=this.getChildAt(7)}}),Ch=(Ih.URL="ui://lcl1ulign8o23y3du",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Btn1_SellEquipment")}onConstruct(){this.m_n75=this.getChildAt(0),this.m_icon=this.getChildAt(1)}}),Gh=(Ch.URL="ui://lcl1ulign8o23y3dw",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","ZombieHeroTips")}onConstruct(){this.m_n0=this.getChildAt(0),this.m_n1=this.getChildAt(1)}}),Sh=(Gh.URL="ui://lcl1ulignq0hy3y49i",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Btn1_local")}onConstruct(){this.m_n75=this.getChildAt(0),this.m_redDot=this.getChildAt(1),this.m_n78=this.getChildAt(2),this.m_n80=this.getChildAt(3),this.m_finger=this.getChildAt(4)}}),yh=(Sh.URL="ui://lcl1uligo70k3y3az",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","GMUI_Btn_escGM")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n0=this.getChildAt(0),this.m_n1=this.getChildAt(1),this.m_n2=this.getChildAt(2),this.m_n3=this.getChildAt(3)}}),wh=(yh.URL="ui://lcl1uligobkm3y2yj",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","GMUI_Btn_Rank")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n0=this.getChildAt(0),this.m_n1=this.getChildAt(1),this.m_n2=this.getChildAt(2),this.m_n3=this.getChildAt(3)}}),vh=(wh.URL="ui://lcl1uligobkm3y2yk",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","authUI_btn3")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n4=this.getChildAt(0)}}),Dh=(vh.URL="ui://lcl1uligoi7sy3y46g",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","AuthUI_comzc_qq")}onConstruct(){this.m_n9=this.getChildAt(0)}}),Uh=(Dh.URL="ui://lcl1uligoi7sy3y46h",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","MergeUI")}onConstruct(){this.m_RecycleCtrl=this.getControllerAt(0),this.m_bg=this.getChildAt(0),this.m_rootPos=this.getChildAt(1),this.m_heroPos=this.getChildAt(2),this.m_recyclePos=this.getChildAt(3),this.m_n147=this.getChildAt(4),this.m_BuyBtn=this.getChildAt(5),this.m_mergeShopBtn=this.getChildAt(6),this.m_freeGoldBtn=this.getChildAt(7),this.m_n148=this.getChildAt(8),this.m_finger=this.getChildAt(9),this.m_coinAddReward=this.getChildAt(10),this.m_youZiAdPos=this.getChildAt(11)}}),Lh=(Uh.URL="ui://lcl1uligoil73y2go",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","MergeItem")}onConstruct(){this.m_c1=this.getControllerAt(0),this.m_Lucky=this.getControllerAt(1),this.m_bottom=this.getChildAt(0),this.m_choose=this.getChildAt(1),this.m_Icon=this.getChildAt(2),this.m_LevelText=this.getChildAt(3),this.m_MergeLevelText=this.getChildAt(4),this.m_mergeEffect=this.getChildAt(5),this.m_Icon1=this.getChildAt(6),this.m_Icon2=this.getChildAt(7),this.m_coin=this.getChildAt(8),this.m_coinText=this.getChildAt(9),this.m_luckyBtn=this.getChildAt(10),this.m_mergeAni=this.getTransitionAt(0),this.m_New=this.getTransitionAt(1),this.m_AddCoin=this.getTransitionAt(2),this.m_DropBox=this.getTransitionAt(3),this.m_ShowEffect=this.getTransitionAt(4),this.m_ClickBtn=this.getTransitionAt(5),this.m_Shake=this.getTransitionAt(6),this.m_Shake2=this.getTransitionAt(7)}}),Bh=(Lh.URL="ui://lcl1uligoil73y2gu",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","BuyMergeBtn")}onConstruct(){this.m_n150=this.getChildAt(0),this.m_icon=this.getChildAt(1),this.m_coin=this.getChildAt(2),this.m_n153=this.getChildAt(3)}}),bh=(Bh.URL="ui://lcl1uligoil73y2ha",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","CDKeyUI")}onConstruct(){this.m_bg=this.getChildAt(0),this.m_n1=this.getChildAt(1),this.m_n8=this.getChildAt(2),this.m_Btn_Close=this.getChildAt(3),this.m_n3=this.getChildAt(4),this.m_inputText=this.getChildAt(5),this.m_YesBtn=this.getChildAt(6),this.m_n9=this.getChildAt(7),this.m_n7=this.getChildAt(8)}}),Ah=(bh.URL="ui://lcl1uligou0v0",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","MergeNewUI_Btn_double")}onConstruct(){this.m_n75=this.getChildAt(0),this.m_icon=this.getChildAt(1),this.m_type=this.getChildAt(2)}}),xh=(Ah.URL="ui://lcl1uligp1tw3y314",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","RankInfoUI_Com1")}onConstruct(){this.m_isEnd=this.getControllerAt(0),this.m_nowRankBg=this.getChildAt(0),this.m_n11=this.getChildAt(1),this.m_n5=this.getChildAt(2),this.m_userMedal=this.getChildAt(3),this.m_nowRank=this.getChildAt(4),this.m_list=this.getChildAt(5),this.m_mask=this.getChildAt(6),this.m_n17=this.getChildAt(7),this.m_t0=this.getTransitionAt(0)}}),Th=(xh.URL="ui://lcl1uligph8x3y30g",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Cover_rankInfoBtn")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_medal=this.getChildAt(0)}}),kh=(Th.URL="ui://lcl1uligph8x3y30j",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","BuleBg2AnimationCom")}onConstruct(){this.m_bg=this.getChildAt(0),this.m_t0=this.getTransitionAt(0)}}),Mh=(kh.URL="ui://lcl1uligpn2t3y2wa",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","EggUI")}onConstruct(){this.m_Closeable=this.getControllerAt(0),this.m_Click=this.getControllerAt(1),this.m_bg=this.getChildAt(0),this.m_n1=this.getChildAt(1),this.m_bar=this.getChildAt(2),this.m_onBtn=this.getChildAt(3),this.m_n5=this.getChildAt(4),this.m_n8=this.getChildAt(5),this.m_n9=this.getChildAt(6),this.m_n11=this.getChildAt(7),this.m_n10=this.getChildAt(8),this.m_n15=this.getChildAt(9),this.m_GetBtn=this.getChildAt(10),this.m_n7=this.getChildAt(11),this.m_CloseBtn=this.getChildAt(12),this.m_t0=this.getTransitionAt(0)}}),Rh=(Mh.URL="ui://lcl1uligpyczy3y3vu",class extends fgui.GProgressBar{static createInstance(){return fgui.UIPackage.createObject("InGameUI","EggUI_BarCom1")}onConstruct(){this.m_n0=this.getChildAt(0),this.m_bar=this.getChildAt(1)}}),Ph=(Rh.URL="ui://lcl1uligpyczy3y3vx",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","EggUI_Btn_click")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n3=this.getChildAt(0),this.m_ChargeText=this.getChildAt(1)}}),Eh=(Ph.URL="ui://lcl1uligpyczy3y3w0",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","MergeFinger_Guidance_")}onConstruct(){this.m_Finger=this.getControllerAt(0),this.m_n156=this.getChildAt(0),this.m_n157=this.getChildAt(1),this.m_t0=this.getTransitionAt(0)}}),Nh=(Eh.URL="ui://lcl1uligpyczy3y3w2",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","TopUI_KeyCom")}onConstruct(){this.m_n133=this.getChildAt(0),this.m_icon=this.getChildAt(1),this.m_coinText=this.getChildAt(2)}}),Fh=(Nh.URL="ui://lcl1uligq2i13y364",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","TreasureUI_Btn_shopCom2")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_btnBg=this.getChildAt(0),this.m_backBg=this.getChildAt(1),this.m_icon=this.getChildAt(2),this.m_coinText=this.getChildAt(3),this.m_guidance=this.getChildAt(4),this.m_redDot=this.getChildAt(5)}}),Oh=(Fh.URL="ui://lcl1uligq2i13y369",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Btn_Green_Buy2")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n4=this.getChildAt(0),this.m_btnBtnBg=this.getChildAt(1),this.m_DiamondText=this.getChildAt(2),this.m_n8=this.getChildAt(3)}}),Hh=(Oh.URL="ui://lcl1uligq2i13y36a",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Btn_Video_Get3")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n3=this.getChildAt(0),this.m_type=this.getChildAt(1),this.m_n7=this.getChildAt(2)}}),Vh=(Hh.URL="ui://lcl1uligq2i13y36b",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","GameOverUI_starBtn")}onConstruct(){this.m_isWin=this.getControllerAt(0),this.m_icon=this.getChildAt(0),this.m_n78=this.getChildAt(1),this.m_type=this.getChildAt(2),this.m_n80=this.getChildAt(3),this.m_n81=this.getChildAt(4)}}),zh=(Vh.URL="ui://lcl1uligq2i13y36n",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","BtnGuidanceCom")}onConstruct(){this.m_n12=this.getChildAt(0),this.m_n14=this.getChildAt(1),this.m_t0=this.getTransitionAt(0)}}),Wh=(zh.URL="ui://lcl1uligq2i13y36q",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","GameOverUI_Btn2")}onConstruct(){this.m_n75=this.getChildAt(0),this.m_n78=this.getChildAt(1)}}),Zh=(Wh.URL="ui://lcl1uligq2i13y36u",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","WindowInfoUI")}onConstruct(){this.m_bg=this.getChildAt(0),this.m_n0=this.getChildAt(1),this.m_Btn_Yes=this.getChildAt(2),this.m_escBtn=this.getChildAt(3),this.m_n18=this.getChildAt(4),this.m_n20=this.getChildAt(5),this.m_n14=this.getChildAt(6)}}),jh=(Zh.URL="ui://lcl1uligq9cw3y2zc",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Btn_Video_confirm")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n3=this.getChildAt(0),this.m_n8=this.getChildAt(1)}}),Kh=(jh.URL="ui://lcl1uligq9cw3y2zd",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","equitUI_sellBtn")}onConstruct(){this.m_n75=this.getChildAt(0),this.m_n80=this.getChildAt(1)}}),qh=(Kh.URL="ui://lcl1uligq9cw3y2zf",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","GameOver_Btn1")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n8=this.getChildAt(0),this.m_n9=this.getChildAt(1)}}),Yh=(qh.URL="ui://lcl1uligqawwy3y3o5",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","GameOver_Btn2")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n10=this.getChildAt(0),this.m_n9=this.getChildAt(1)}}),Qh=(Yh.URL="ui://lcl1uligqawwy3y3o7",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","GameOver_Btn3")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n8=this.getChildAt(0),this.m_n9=this.getChildAt(1)}}),Jh=(Qh.URL="ui://lcl1uligqawwy3y3o8",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","over_com1")}onConstruct(){this.m_load_a1=this.getChildAt(0),this.m_load_a2=this.getChildAt(1),this.m_t0=this.getTransitionAt(0)}}),Xh=(Jh.URL="ui://lcl1uligqawwy3y3oh",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","over_com2")}onConstruct(){this.m_load_b1=this.getChildAt(0),this.m_t0=this.getTransitionAt(0)}}),$h=(Xh.URL="ui://lcl1uligqawwy3y3oi",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","GuidanceUI")}onConstruct(){this.m_bg=this.getChildAt(0),this.m_Btn_Close=this.getChildAt(1),this.m_maskBg=this.getChildAt(2),this.m_finger=this.getChildAt(3),this.m_n5=this.getChildAt(4),this.m_info=this.getChildAt(5),this.m_n7=this.getChildAt(6),this.m_finger2=this.getChildAt(7),this.m_n9=this.getChildAt(8),this.m_info2=this.getChildAt(9),this.m_n11=this.getChildAt(10),this.m_n13=this.getChildAt(11),this.m_info3=this.getChildAt(12),this.m_n15=this.getChildAt(13)}}),em=($h.URL="ui://lcl1uligql983y319",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Cover_desktop")}onConstruct(){this.m_c1=this.getControllerAt(0),this.m_n12=this.getChildAt(0),this.m_n7=this.getChildAt(1),this.m_n10=this.getChildAt(2),this.m_n11=this.getChildAt(3)}}),tm=(em.URL="ui://lcl1uligquok3y39r",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Btn_Close")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n3=this.getChildAt(0)}}),im=(tm.URL="ui://lcl1uligr2o63y2n0",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Btn_Video")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n3=this.getChildAt(0),this.m_type=this.getChildAt(1),this.m_n5=this.getChildAt(2)}}),om=(im.URL="ui://lcl1uligr2o63y2n2",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Btn_GetVideoReward")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n3=this.getChildAt(0),this.m_n4=this.getChildAt(1),this.m_type=this.getChildAt(2)}}),am=(om.URL="ui://lcl1uligr2o63y2n3",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","AlwaysShowUI_Btn_GM")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n0=this.getChildAt(0),this.m_n1=this.getChildAt(1),this.m_n2=this.getChildAt(2),this.m_n3=this.getChildAt(3)}}),nm=(am.URL="ui://lcl1uligr2o63y2n4",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","GMUI_BtnTest")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n0=this.getChildAt(0),this.m_n1=this.getChildAt(1),this.m_n2=this.getChildAt(2),this.m_info=this.getChildAt(3)}}),sm=(nm.URL="ui://lcl1uligr2o63y2n5",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","GMUI_BtnTest2")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n0=this.getChildAt(0),this.m_n1=this.getChildAt(1),this.m_n2=this.getChildAt(2),this.m_n3=this.getChildAt(3)}}),lm=(sm.URL="ui://lcl1uligr2o63y2n6",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","GMUI_Btn_AddCoin")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n0=this.getChildAt(0),this.m_n1=this.getChildAt(1),this.m_n2=this.getChildAt(2),this.m_n3=this.getChildAt(3)}}),rm=(lm.URL="ui://lcl1uligr2o63y2n7",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","GMUI_Btn_AddDiamond")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n0=this.getChildAt(0),this.m_n1=this.getChildAt(1),this.m_n2=this.getChildAt(2),this.m_n3=this.getChildAt(3)}}),hm=(rm.URL="ui://lcl1uligr2o63y2n8",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","GMUI_Btn_AddEquip")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n0=this.getChildAt(0),this.m_n1=this.getChildAt(1),this.m_n2=this.getChildAt(2),this.m_title=this.getChildAt(3)}}),mm=(hm.URL="ui://lcl1uligr2o63y2n9",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","GMUI_Btn_clear")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n0=this.getChildAt(0),this.m_n1=this.getChildAt(1),this.m_n2=this.getChildAt(2),this.m_n3=this.getChildAt(3)}}),dm=(mm.URL="ui://lcl1uligr2o63y2na",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","GMUI_Btn_drop")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n0=this.getChildAt(0),this.m_n1=this.getChildAt(1),this.m_n2=this.getChildAt(2),this.m_n3=this.getChildAt(3)}}),cm=(dm.URL="ui://lcl1uligr2o63y2nc",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","GMUI_Btn_esc")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n0=this.getChildAt(0),this.m_n1=this.getChildAt(1),this.m_n2=this.getChildAt(2),this.m_n3=this.getChildAt(3)}}),um=(cm.URL="ui://lcl1uligr2o63y2nd",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","GMUI_Btn_EscGame")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n0=this.getChildAt(0),this.m_n1=this.getChildAt(1),this.m_n2=this.getChildAt(2),this.m_n3=this.getChildAt(3)}}),pm=(um.URL="ui://lcl1uligr2o63y2ne",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","LevelRewardUI_Btn_Item")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_IsHero=this.getControllerAt(1),this.m_isVideoGet=this.getControllerAt(2),this.m_n8=this.getChildAt(0),this.m_videoBg=this.getChildAt(1),this.m_rewardCom=this.getChildAt(2),this.m_mask=this.getChildAt(3),this.m_lockBg=this.getChildAt(4),this.m_fluxay=this.getChildAt(5),this.m_n23=this.getChildAt(6),this.m_info=this.getChildAt(7),this.m_info2=this.getChildAt(8),this.m_isGet=this.getChildAt(9),this.m_unlock=this.getChildAt(10),this.m_type=this.getChildAt(11),this.m_videoMaskBg=this.getChildAt(12),this.m_freeMaskBg=this.getChildAt(13),this.m_endBg=this.getChildAt(14),this.m_redDot=this.getChildAt(15),this.m_t0=this.getTransitionAt(0)}}),gm=(pm.URL="ui://lcl1uligr2o63y2nj",class extends fgui.GProgressBar{static createInstance(){return fgui.UIPackage.createObject("InGameUI","LevelReward_BarCom")}onConstruct(){this.m_n0=this.getChildAt(0),this.m_bar=this.getChildAt(1)}}),fm=(gm.URL="ui://lcl1uligr2o63y2nk",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","LevelRewawrd_Com_ListBar")}onConstruct(){this.m_barCom=this.getChildAt(0),this.m_BackDot=this.getChildAt(1),this.m_yellowDot=this.getChildAt(2),this.m_NumTime=this.getChildAt(3),this.m_freeCom=this.getChildAt(4),this.m_videoCom=this.getChildAt(5),this.m_skillUnlock=this.getChildAt(6),this.m_videoBtn=this.getChildAt(7)}}),_m=(fm.URL="ui://lcl1uligr2o63y2nl",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Cover_huoyueBtn")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n8=this.getChildAt(0),this.m_n6=this.getChildAt(1),this.m_n5=this.getChildAt(2),this.m_n9=this.getChildAt(3)}}),Im=(_m.URL="ui://lcl1uligr3y6y3y46n",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","HuoYueUI")}onConstruct(){this.m_bg=this.getChildAt(0),this.m_n43=this.getChildAt(1),this.m_Btn_Close=this.getChildAt(2),this.m_list=this.getChildAt(3),this.m_n23=this.getChildAt(4),this.m_n24=this.getChildAt(5),this.m_n26=this.getChildAt(6),this.m_n40=this.getChildAt(7),this.m_n57=this.getChildAt(8),this.m_n58=this.getChildAt(9),this.m_n59=this.getChildAt(10),this.m_n60=this.getChildAt(11),this.m_bar1=this.getChildAt(12),this.m_n36=this.getChildAt(13),this.m_btn_exit=this.getChildAt(14),this.m_btn_big=this.getChildAt(15),this.m_n62=this.getChildAt(16),this.m_n63=this.getChildAt(17),this.m_n64=this.getChildAt(18),this.m_n65=this.getChildAt(19),this.m_n66=this.getChildAt(20),this.m_n67=this.getChildAt(21),this.m_text_time=this.getChildAt(22),this.m_n68=this.getChildAt(23)}}),Cm=(Im.URL="ui://lcl1uligr3y6y3y46q",class extends fgui.GProgressBar{static createInstance(){return fgui.UIPackage.createObject("InGameUI","HuoYue_bar1")}onConstruct(){this.m_n0=this.getChildAt(0),this.m_bar=this.getChildAt(1),this.m_n5=this.getChildAt(2),this.m_n4=this.getChildAt(3),this.m_n6=this.getChildAt(4),this.m_n7=this.getChildAt(5),this.m_n2=this.getChildAt(6),this.m_text_now=this.getChildAt(7)}}),Gm=(Cm.URL="ui://lcl1uligr3y6y3y47e",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","HuoYueUI_Com1")}onConstruct(){this.m_C_rare=this.getControllerAt(0),this.m_C_lv=this.getControllerAt(1),this.m_C_get=this.getControllerAt(2),this.m_n44=this.getChildAt(0),this.m_n46=this.getChildAt(1),this.m_load_icon0=this.getChildAt(2),this.m_load_icon1=this.getChildAt(3),this.m_load_icon2=this.getChildAt(4),this.m_load_icon3=this.getChildAt(5),this.m_textEnd=this.getChildAt(6),this.m_n43=this.getChildAt(7),this.m_text_name=this.getChildAt(8),this.m_n37=this.getChildAt(9),this.m_t0=this.getTransitionAt(0)}}),Sm=(Gm.URL="ui://lcl1uligr3y6y3y47g",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","HuoYueUI_btn_com1")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_Com=this.getChildAt(0)}}),ym=(Sm.URL="ui://lcl1uligr3y6y3y47h",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","HuoYueUI_Com2")}onConstruct(){this.m_C_get=this.getControllerAt(0),this.m_n59=this.getChildAt(0),this.m_load_icon0=this.getChildAt(1),this.m_n39=this.getChildAt(2),this.m_n43=this.getChildAt(3),this.m_text_name=this.getChildAt(4),this.m_n37=this.getChildAt(5),this.m_n60=this.getChildAt(6),this.m_n61=this.getChildAt(7),this.m_n62=this.getChildAt(8),this.m_n63=this.getChildAt(9),this.m_n66=this.getChildAt(10),this.m_n64=this.getChildAt(11),this.m_n65=this.getChildAt(12),this.m_t0=this.getTransitionAt(0)}}),wm=(ym.URL="ui://lcl1uligr3y6y3y47i",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","HuoYueUI_btn_com2")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_Com=this.getChildAt(0)}}),vm=(wm.URL="ui://lcl1uligr3y6y3y47j",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","GMUI_Btn_clear2")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n0=this.getChildAt(0),this.m_n1=this.getChildAt(1),this.m_n2=this.getChildAt(2),this.m_n3=this.getChildAt(3)}}),Dm=(vm.URL="ui://lcl1uligrabw3y393",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","ReviceHint")}onConstruct(){this.m_n159=this.getChildAt(0),this.m_n160=this.getChildAt(1)}}),Um=(Dm.URL="ui://lcl1uligre0o3y3ew",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Btn_Sign_End")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n3=this.getChildAt(0),this.m_n8=this.getChildAt(1)}}),Lm=(Um.URL="ui://lcl1uligs12b3y2wy",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","LevelRewardUI_Com_Mask")}onConstruct(){this.m_videoBg=this.getChildAt(0),this.m_rewardCom=this.getChildAt(1)}}),Bm=(Lm.URL="ui://lcl1uligs12b3y2x0",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Revive_Btn1")}onConstruct(){this.m_n75=this.getChildAt(0),this.m_type=this.getChildAt(1),this.m_n79=this.getChildAt(2)}}),bm=(Bm.URL="ui://lcl1uligs3853y31e",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","GMUI_videoID")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n0=this.getChildAt(0),this.m_n1=this.getChildAt(1),this.m_n2=this.getChildAt(2),this.m_info=this.getChildAt(3)}}),Am=(bm.URL="ui://lcl1uligs3853y31f",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","SIgn_Btn")}onConstruct(){this.m_n75=this.getChildAt(0),this.m_icon=this.getChildAt(1),this.m_icon2=this.getChildAt(2),this.m_redDot=this.getChildAt(3),this.m_gui1=this.getChildAt(4),this.m_gui2=this.getChildAt(5),this.m_n82=this.getChildAt(6),this.m_t0=this.getTransitionAt(0)}}),xm=(Am.URL="ui://lcl1uligs4y83y3lg",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","TreasureUI_Com1")}onConstruct(){this.m_n51=this.getChildAt(0),this.m_box1=this.getChildAt(1),this.m_n53=this.getChildAt(2),this.m_box2=this.getChildAt(3),this.m_t0=this.getTransitionAt(0)}}),Tm=(xm.URL="ui://lcl1uligsjns3y2x7",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","TreasureUI_Com2")}onConstruct(){this.m_n51=this.getChildAt(0),this.m_n52=this.getChildAt(1),this.m_n53=this.getChildAt(2)}}),km=(Tm.URL="ui://lcl1uligsjns3y2x8",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","TreasureUI_Btn_info")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n3=this.getChildAt(0),this.m_n4=this.getChildAt(1)}}),Mm=(km.URL="ui://lcl1uligsjns3y2x9",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","TreasureUI_Btn_shopCom1")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n5=this.getChildAt(0),this.m_n6=this.getChildAt(1)}}),Rm=(Mm.URL="ui://lcl1uligsjns3y2xb",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","RedDot_Animation")}onConstruct(){this.m_n19=this.getChildAt(0),this.m_t0=this.getTransitionAt(0)}}),Pm=(Rm.URL="ui://lcl1uligsjns3y2xe",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","UserTopExpBtn2")}onConstruct(){this.m_c_skillnew=this.getControllerAt(0),this.m_n127=this.getChildAt(0),this.m_n130=this.getChildAt(1),this.m_levelText=this.getChildAt(2),this.m_RewardItem=this.getChildAt(3),this.m_n133=this.getChildAt(4),this.m_n136=this.getChildAt(5),this.m_n139=this.getChildAt(6),this.m_redDot=this.getChildAt(7),this.m_n141=this.getChildAt(8),this.m_n142=this.getChildAt(9),this.m_t0=this.getTransitionAt(0),this.m_t1=this.getTransitionAt(1)}}),Em=(Pm.URL="ui://lcl1uligsjns3y2xl",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Guidance_Com1")}onConstruct(){this.m_n0=this.getChildAt(0),this.m_textTip1=this.getChildAt(1),this.m_Btn_Close=this.getChildAt(2),this.m_n23=this.getChildAt(3),this.m_t0=this.getTransitionAt(0)}}),Nm=(Em.URL="ui://lcl1uligst1xy3y3p7",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","VideoGetAllSkillBtn")}onConstruct(){this.m_c1=this.getControllerAt(0),this.m_n3=this.getChildAt(0),this.m_n4=this.getChildAt(1)}}),Fm=(Nm.URL="ui://lcl1uligsuduy3y49n",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","GetRewardUI_Btn")}onConstruct(){this.m_n75=this.getChildAt(0),this.m_icon=this.getChildAt(1)}}),Om=(Fm.URL="ui://lcl1uligt4a53y2zw",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","ZombieGameOverUI")}onConstruct(){this.m_YLPlatform=this.getControllerAt(0),this.m_ShowTImes=this.getControllerAt(1),this.m_IsUnlock=this.getControllerAt(2),this.m_firework=this.getChildAt(0),this.m_n193=this.getChildAt(1),this.m_Bg=this.getChildAt(2),this.m_title=this.getChildAt(3),this.m_exitBtn=this.getChildAt(4),this.m_failed=this.getChildAt(5),this.m_tips=this.getChildAt(6),this.m_GetNewHeroBtn=this.getChildAt(7),this.m_GetEquitBtn=this.getChildAt(8),this.m_GetLotteryBtn=this.getChildAt(9),this.m_n191=this.getChildAt(10),this.m_Dead=this.getChildAt(11),this.m_titleBg=this.getChildAt(12),this.m_BigTitle=this.getChildAt(13),this.m_dayText=this.getChildAt(14),this.m_GameOverDetail=this.getChildAt(15),this.m_n196=this.getChildAt(16),this.m_n197=this.getChildAt(17),this.m_MedalRewardList=this.getChildAt(18),this.m_medalGroup=this.getChildAt(19),this.m_n210=this.getChildAt(20),this.m_n211=this.getChildAt(21),this.m_rewardList=this.getChildAt(22),this.m_rewardGroup=this.getChildAt(23),this.m_continueBtn=this.getChildAt(24),this.m_Btn_Shard=this.getChildAt(25),this.m_show=this.getTransitionAt(0),this.m_GameOverAni=this.getTransitionAt(1),this.m_levelUp=this.getTransitionAt(2),this.m_AddExp=this.getTransitionAt(3),this.m_GetMedalAni=this.getTransitionAt(4),this.m_GetBaseAni=this.getTransitionAt(5),this.m_t6=this.getTransitionAt(6)}}),Hm=(Om.URL="ui://lcl1uligt6qby3y3rv",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","SurvivalGuideBtn")}onConstruct(){this.m_n3=this.getChildAt(0)}}),Vm=(Hm.URL="ui://lcl1uligt6qby3y3rz",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","SurvivalGuideUI")}onConstruct(){this.m_maskBg=this.getChildAt(0),this.m_n0=this.getChildAt(1),this.m_Icon=this.getChildAt(2),this.m_n3=this.getChildAt(3),this.m_jixuBtn=this.getChildAt(4),this.m_n5=this.getChildAt(5)}}),zm=(Vm.URL="ui://lcl1uligt6qby3y3s0",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","RewardItem")}onConstruct(){this.m_c1=this.getControllerAt(0),this.m_bg=this.getChildAt(0),this.m_bg_default=this.getChildAt(1),this.m_gear=this.getChildAt(2),this.m_icon=this.getChildAt(3),this.m_iconNotAutoSize=this.getChildAt(4),this.m_iconDefault=this.getChildAt(5),this.m_Count=this.getChildAt(6),this.m_ItemName=this.getChildAt(7),this.m_topIcon=this.getChildAt(8),this.m_effice_fluxes=this.getChildAt(9),this.m_Image_Piece=this.getChildAt(10)}}),Wm=(zm.URL="ui://lcl1uligt9vv3y2km",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","UserTopExpBtn")}onConstruct(){this.m_n127=this.getChildAt(0),this.m_n128=this.getChildAt(1),this.m_bar=this.getChildAt(2),this.m_n130=this.getChildAt(3),this.m_levelText=this.getChildAt(4),this.m_expText=this.getChildAt(5)}}),Zm=(Wm.URL="ui://lcl1uligt9vv3y2ko",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","GetRewardUI")}onConstruct(){this.m_c1=this.getControllerAt(0),this.m_title=this.getControllerAt(1),this.m_BtnType=this.getControllerAt(2),this.m_isNianMode=this.getControllerAt(3),this.m_YLPlatform=this.getControllerAt(4),this.m_Bg2=this.getChildAt(0),this.m_bg=this.getChildAt(1),this.m_light=this.getChildAt(2),this.m_BgLight=this.getChildAt(3),this.m_n139=this.getChildAt(4),this.m_n114=this.getChildAt(5),this.m_n135=this.getChildAt(6),this.m_n127=this.getChildAt(7),this.m_n138=this.getChildAt(8),this.m_GetReward=this.getChildAt(9),this.m_rewardList=this.getChildAt(10),this.m_newHero=this.getChildAt(11),this.m_Btn_Shard=this.getChildAt(12),this.m_giveUpBtn=this.getChildAt(13),this.m_continueBtn=this.getChildAt(14),this.m_videoBtn=this.getChildAt(15),this.m_KillcontinueBtn=this.getChildAt(16),this.m_videoGetBtn=this.getChildAt(17),this.m_Box=this.getChildAt(18),this.m_OppoGiveUpBtn=this.getChildAt(19),this.m_OppoContinueBtn=this.getChildAt(20),this.m_OppoVideoBtn=this.getChildAt(21),this.m_OppoKillcontinueBtn=this.getChildAt(22),this.m_OppoVideoGetBtn=this.getChildAt(23),this.m_OppoBannerAdBtn=this.getChildAt(24),this.m_OppoLookBtn=this.getChildAt(25),this.m_show=this.getTransitionAt(0),this.m_ShowBox=this.getTransitionAt(1),this.m_ShowReward=this.getTransitionAt(2)}}),jm=(Zm.URL="ui://lcl1uligt9vv3y2kq",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","EntryItem")}onConstruct(){this.m_c1=this.getControllerAt(0),this.m_icon=this.getChildAt(0),this.m_text=this.getChildAt(1)}}),Km=(jm.URL="ui://lcl1uligt9vv3y2l0",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","BuyBtn")}onConstruct(){this.m_c1=this.getControllerAt(0),this.m_n82=this.getChildAt(0),this.m_n75=this.getChildAt(1),this.m_n81=this.getChildAt(2),this.m_n77=this.getChildAt(3),this.m_n78=this.getChildAt(4),this.m_count=this.getChildAt(5),this.m_n83=this.getChildAt(6)}}),qm=(Km.URL="ui://lcl1uligt9vv3y2l2",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","GameOverUI")}onConstruct(){this.m_c1=this.getControllerAt(0),this.m_isStar=this.getControllerAt(1),this.m_rank=this.getControllerAt(2),this.m_YLPlatform=this.getControllerAt(3),this.m_firework=this.getChildAt(0),this.m_Bg=this.getChildAt(1),this.m_youZiAdPos1=this.getChildAt(2),this.m_title=this.getChildAt(3),this.m_exitBtn=this.getChildAt(4),this.m_failed=this.getChildAt(5),this.m_OppoExitBtn=this.getChildAt(6),this.m_OppoBannerAdBtn1=this.getChildAt(7),this.m_OppoLookBtn1=this.getChildAt(8),this.m_youZiAdPos2=this.getChildAt(9),this.m_tips=this.getChildAt(10),this.m_bianQiangBtn=this.getChildAt(11),this.m_Dead=this.getChildAt(12),this.m_youZiAdPos3=this.getChildAt(13),this.m_titleBg=this.getChildAt(14),this.m_n160=this.getChildAt(15),this.m_BigTitle=this.getChildAt(16),this.m_rankText=this.getChildAt(17),this.m_continueBtn=this.getChildAt(18),this.m_Btn_Shard=this.getChildAt(19),this.m_n117=this.getChildAt(20),this.m_n115=this.getChildAt(21),this.m_MedalRewardList=this.getChildAt(22),this.m_medalInfoText=this.getChildAt(23),this.m_medalGroup=this.getChildAt(24),this.m_n118=this.getChildAt(25),this.m_n121=this.getChildAt(26),this.m_n136=this.getChildAt(27),this.m_expBar=this.getChildAt(28),this.m_n138=this.getChildAt(29),this.m_userLevelText=this.getChildAt(30),this.m_expText=this.getChildAt(31),this.m_addExpText=this.getChildAt(32),this.m_userExpGroup=this.getChildAt(33),this.m_n119=this.getChildAt(34),this.m_n120=this.getChildAt(35),this.m_rewardList=this.getChildAt(36),this.m_rewardGroup=this.getChildAt(37),this.m_shareVideoBtn=this.getChildAt(38),this.m_n150=this.getChildAt(39),this.m_n152=this.getChildAt(40),this.m_share=this.getChildAt(41),this.m_starBtn=this.getChildAt(42),this.m_OppoLookBtn=this.getChildAt(43),this.m_oppoContinueBtn=this.getChildAt(44),this.m_OppoBannerAdBtn=this.getChildAt(45),this.m_key1=this.getChildAt(46),this.m_key2=this.getChildAt(47),this.m_key3=this.getChildAt(48),this.m_n156=this.getChildAt(49),this.m_n172=this.getChildAt(50),this.m_DWContinuBtn=this.getChildAt(51),this.m_nowRankBg=this.getChildAt(52),this.m_medal=this.getChildAt(53),this.m_MedalRewardList1=this.getChildAt(54),this.m_medalInfoText1=this.getChildAt(55),this.m_FailedTittle=this.getChildAt(56),this.m_WinTittle=this.getChildAt(57),this.m_GameOverDetail=this.getChildAt(58),this.m_show=this.getTransitionAt(0),this.m_GameOverAni=this.getTransitionAt(1),this.m_levelUp=this.getTransitionAt(2),this.m_AddExp=this.getTransitionAt(3),this.m_GetMedalAni=this.getTransitionAt(4),this.m_GetBaseAni=this.getTransitionAt(5),this.m_t6=this.getTransitionAt(6)}}),Ym=(qm.URL="ui://lcl1uligtjrr3y2ft",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","MatchUI")}onConstruct(){this.m_c1=this.getControllerAt(0),this.m_n104=this.getChildAt(0),this.m_title=this.getChildAt(1),this.m_startMatchBtn=this.getChildAt(2),this.m_stopMatchBtn=this.getChildAt(3),this.m_n112=this.getChildAt(4),this.m_n113=this.getChildAt(5),this.m_show=this.getTransitionAt(0)}}),Qm=(Ym.URL="ui://lcl1uligtjrr3y2fu",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","WaitAni")}onConstruct(){this.m_headBg=this.getChildAt(0),this.m_headIcon=this.getChildAt(1),this.m_t0=this.getTransitionAt(0)}}),Jm=(Qm.URL="ui://lcl1uligtjrr3y2g2",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Btn2")}onConstruct(){this.m_n75=this.getChildAt(0),this.m_icon=this.getChildAt(1)}}),Xm=(Jm.URL="ui://lcl1uligtjrr3y2g6",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Btn3")}onConstruct(){this.m_n75=this.getChildAt(0),this.m_icon=this.getChildAt(1)}}),$m=(Xm.URL="ui://lcl1uligtjrr3y2gb",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Cover_wheelBtn")}onConstruct(){this.m_n75=this.getChildAt(0),this.m_redDot=this.getChildAt(1),this.m_n80=this.getChildAt(2),this.m_n81=this.getChildAt(3),this.m_t0=this.getTransitionAt(0)}}),ed=($m.URL="ui://lcl1uligttj13y2zx",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","sell_bar1_item")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_title=this.getChildAt(0)}}),td=(ed.URL="ui://lcl1uligu5up3y2yv",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","sell_bar1_popup")}onConstruct(){this.m_n0=this.getChildAt(0),this.m_list=this.getChildAt(1)}}),id=(td.URL="ui://lcl1uligu5up3y2yw",class extends fgui.GComboBox{static createInstance(){return fgui.UIPackage.createObject("InGameUI","sell_bar1")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n0=this.getChildAt(0),this.m_title=this.getChildAt(1),this.m_n3=this.getChildAt(2)}}),od=(id.URL="ui://lcl1uligu5up3y2yx",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","QuestPanelBtn")}onConstruct(){this.m_Status=this.getControllerAt(0),this.m_n91=this.getChildAt(0),this.m_n92=this.getChildAt(1),this.m_t0=this.getTransitionAt(0)}}),ad=(od.URL="ui://lcl1uliguj25y3y45u",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","AgainAward")}onConstruct(){this.m_n36=this.getChildAt(0),this.m_videoBg=this.getChildAt(1),this.m_fluxay=this.getChildAt(2),this.m_n35=this.getChildAt(3),this.m_mask=this.getChildAt(4),this.m_GetAgianBtn=this.getChildAt(5),this.m_n40=this.getChildAt(6)}}),nd=(ad.URL="ui://lcl1uliguwtjy3y3mc",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","BuyBtnVideo")}onConstruct(){this.m_n75=this.getChildAt(0),this.m_type=this.getChildAt(1),this.m_n81=this.getChildAt(2)}}),sd=(nd.URL="ui://lcl1uliguzkg3y37z",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","QuestOperateBtn")}onConstruct(){this.m_n3=this.getChildAt(0),this.m_n5=this.getChildAt(1),this.m_t0=this.getTransitionAt(0)}}),ld=(sd.URL="ui://lcl1uligv6h5y3y49m",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","TreasureUI_list_ItemCom1")}onConstruct(){this.m_BtnShow=this.getControllerAt(0),this.m_n4=this.getChildAt(0),this.m_rewardItem=this.getChildAt(1),this.m_buyBtn=this.getChildAt(2),this.m_videoBtn=this.getChildAt(3),this.m_free=this.getChildAt(4),this.m_absenceBtn=this.getChildAt(5),this.m_n5=this.getChildAt(6),this.m_LvText=this.getChildAt(7)}}),rd=(ld.URL="ui://lcl1uligvbv73y2tz",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Btn_Green_Buy")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n4=this.getChildAt(0),this.m_n6=this.getChildAt(1),this.m_DiamondText=this.getChildAt(2),this.m_n8=this.getChildAt(3)}}),hd=(rd.URL="ui://lcl1uligvbv73y2u1",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","TreasureUI_list_boxCom")}onConstruct(){this.m_BtnShow=this.getControllerAt(0),this.m_n38=this.getChildAt(0),this.m_n30=this.getChildAt(1),this.m_icon=this.getChildAt(2),this.m_myName=this.getChildAt(3),this.m_count=this.getChildAt(4),this.m_getBtn=this.getChildAt(5),this.m_buyBtn=this.getChildAt(6),this.m_btn_info=this.getChildAt(7),this.m_absenceBtn=this.getChildAt(8),this.m_n43=this.getChildAt(9),this.m_time=this.getChildAt(10),this.m_n49=this.getChildAt(11),this.m_keyBtn=this.getChildAt(12),this.m_nokey_getBtn=this.getChildAt(13),this.m_nokey_buyBtn=this.getChildAt(14),this.m_qq_tip=this.getChildAt(15)}}),md=(hd.URL="ui://lcl1uligvbv73y2u9",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","GameScenesUI")}onConstruct(){this.m_bg=this.getChildAt(0),this.m_Btn_Close=this.getChildAt(1),this.m_TabBtn=this.getChildAt(2),this.m_list=this.getChildAt(3),this.m_n13=this.getChildAt(4)}}),dd=(md.URL="ui://lcl1uligvn3h3y3jq",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","GameScene_Btn1")}onConstruct(){this.m_com=this.getChildAt(0),this.m_t0=this.getTransitionAt(0),this.m_t1=this.getTransitionAt(1)}}),cd=(dd.URL="ui://lcl1uligvn3h3y3jy",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","GameScene_com1")}onConstruct(){this.m_c1=this.getControllerAt(0),this.m_bg=this.getChildAt(0),this.m_load_bg=this.getChildAt(1),this.m_load_rank=this.getChildAt(2),this.m_load_rank_icon=this.getChildAt(3),this.m_load_info=this.getChildAt(4),this.m_load_count=this.getChildAt(5)}}),ud=(cd.URL="ui://lcl1uligvn3h3y3jz",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","TaskUI")}onConstruct(){this.m_n0=this.getChildAt(0),this.m_n2=this.getChildAt(1),this.m_n17=this.getChildAt(2),this.m_Btn_Close=this.getChildAt(3),this.m_n4=this.getChildAt(4),this.m_barCom=this.getChildAt(5),this.m_BackDot=this.getChildAt(6),this.m_n11=this.getChildAt(7),this.m_BackDotStart=this.getChildAt(8),this.m_list=this.getChildAt(9)}}),pd=(ud.URL="ui://lcl1uligvnfq3y3gq",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Cover_taskBtn")}onConstruct(){this.m_n75=this.getChildAt(0),this.m_redDot=this.getChildAt(1),this.m_n82=this.getChildAt(2),this.m_n81=this.getChildAt(3),this.m_t0=this.getTransitionAt(0)}}),gd=(pd.URL="ui://lcl1uligvnfq3y3gr",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Btn_Get2")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n8=this.getChildAt(0),this.m_n7=this.getChildAt(1)}}),fd=(gd.URL="ui://lcl1uligvnfq3y3gv",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Task_Btn1")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n1=this.getChildAt(0),this.m_n4=this.getChildAt(1),this.m_endBg=this.getChildAt(2)}}),_d=(fd.URL="ui://lcl1uligvnfq3y3gy",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Task_Bar_Com1")}onConstruct(){this.m_BackDot=this.getChildAt(0),this.m_yellowDot=this.getChildAt(1),this.m_n18=this.getChildAt(2)}}),Id=(_d.URL="ui://lcl1uligvnfq3y3gz",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Btn_Video_Get2")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n8=this.getChildAt(0),this.m_n7=this.getChildAt(1),this.m_type=this.getChildAt(2)}}),Cd=(Id.URL="ui://lcl1uligvnfq3y3h0",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Task_item_Com1")}onConstruct(){this.m_n5=this.getChildAt(0),this.m_text_title=this.getChildAt(1),this.m_text_now=this.getChildAt(2),this.m_threeBtn=this.getChildAt(3),this.m_getBtn=this.getChildAt(4),this.m_videoBtn=this.getChildAt(5),this.m_reward=this.getChildAt(6),this.m_text_count=this.getChildAt(7),this.m_endBg=this.getChildAt(8)}}),Gd=(Cd.URL="ui://lcl1uligvnfq3y3h1",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","GMUI_BtnVideo")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n0=this.getChildAt(0),this.m_n1=this.getChildAt(1),this.m_n2=this.getChildAt(2),this.m_n3=this.getChildAt(3)}}),Sd=(Gd.URL="ui://lcl1uligvof23y2yi",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","SkillUnlockUI")}onConstruct(){this.m_bg=this.getChildAt(0),this.m_n4=this.getChildAt(1),this.m_n8=this.getChildAt(2),this.m_btn_continue=this.getChildAt(3),this.m_n3=this.getChildAt(4),this.m_load_skill=this.getChildAt(5),this.m_text_skillName=this.getChildAt(6),this.m_text_skillInfo=this.getChildAt(7),this.m_n11=this.getChildAt(8),this.m_t0=this.getTransitionAt(0)}}),yd=(Sd.URL="ui://lcl1uligvpv4y3y3vo",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","AuthUI_com1")}onConstruct(){this.m_cn=this.getControllerAt(0),this.m_n9=this.getChildAt(0)}}),wd=(yd.URL="ui://lcl1uligvpv4y3y3vr",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","MergeNewUI")}onConstruct(){this.m_Video_C=this.getControllerAt(0),this.m_YLPlatform=this.getControllerAt(1),this.m_cn=this.getControllerAt(2),this.m_n127=this.getChildAt(0),this.m_n143=this.getChildAt(1),this.m_weaponName=this.getChildAt(2),this.m_n125=this.getChildAt(3),this.m_count=this.getChildAt(4),this.m_n146=this.getChildAt(5),this.m_weaponTypeText=this.getChildAt(6),this.m_n148=this.getChildAt(7),this.m_text_power=this.getChildAt(8),this.m_ZhanDouLiText=this.getChildAt(9),this.m_Value1=this.getChildAt(10),this.m_Value2=this.getChildAt(11),this.m_Value3=this.getChildAt(12),this.m_text_skill=this.getChildAt(13),this.m_text_atk=this.getChildAt(14),this.m_text_speed=this.getChildAt(15),this.m_n159=this.getChildAt(16),this.m_n160=this.getChildAt(17),this.m_n161=this.getChildAt(18),this.m_n129=this.getChildAt(19),this.m_Weapon1=this.getChildAt(20),this.m_Btn_Video=this.getChildAt(21),this.m_continueBtn=this.getChildAt(22),this.m_MergeEffect=this.getChildAt(23),this.m_Weapon2=this.getChildAt(24),this.m_continueBtn2=this.getChildAt(25),this.m_Btn_Shard=this.getChildAt(26),this.m_OppoBtn_Video=this.getChildAt(27),this.m_OppoLookBtn=this.getChildAt(28),this.m_OppoBannerAdBtn=this.getChildAt(29),this.m_MergeAni=this.getTransitionAt(0)}}),vd=(wd.URL="ui://lcl1uligw79v3y2is",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","WeaponStoreItem")}onConstruct(){this.m_c1=this.getControllerAt(0),this.m_c2=this.getControllerAt(1),this.m_n158=this.getChildAt(0),this.m_n133=this.getChildAt(1),this.m_icon=this.getChildAt(2),this.m_iconBlack=this.getChildAt(3),this.m_LvText=this.getChildAt(4),this.m_combatValue=this.getChildAt(5),this.m_Name=this.getChildAt(6),this.m_n148=this.getChildAt(7),this.m_n149=this.getChildAt(8),this.m_buyBtn=this.getChildAt(9),this.m_costText=this.getChildAt(10)}}),Dd=(vd.URL="ui://lcl1uligw79v3y2j3",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","GoMergeShopBtn")}onConstruct(){this.m_n150=this.getChildAt(0),this.m_n153=this.getChildAt(1)}}),Ud=(Dd.URL="ui://lcl1uligw79v3y2j6",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","WeaponStoreList")}onConstruct(){this.m_List=this.getChildAt(0)}}),Ld=(Ud.URL="ui://lcl1uligw79v3y2j8",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","EquitSlot")}onConstruct(){this.m_icon=this.getChildAt(0)}}),Bd=(Ld.URL="ui://lcl1uligw7ep3y2ii",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","EquitSideBtn")}onConstruct(){this.m_c1=this.getControllerAt(0),this.m_n34=this.getChildAt(0),this.m_n36=this.getChildAt(1),this.m_icon=this.getChildAt(2),this.m_redDot=this.getChildAt(3)}}),bd=(Bd.URL="ui://lcl1uligw7ep3y2ij",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","EquitItemBtn")}onConstruct(){this.m_c1=this.getControllerAt(0),this.m_bg=this.getChildAt(0),this.m_icon=this.getChildAt(1),this.m_leveltext=this.getChildAt(2),this.m_rare_bg=this.getChildAt(3),this.m_rare=this.getChildAt(4),this.m_weaponTypeText=this.getChildAt(5),this.m_isEquitedBg=this.getChildAt(6),this.m_isEquited=this.getChildAt(7),this.m_redDot=this.getChildAt(8)}}),Ad=(bd.URL="ui://lcl1uligw7ep3y2ik",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","UpgradeChooseBtn")}onConstruct(){this.m_c1=this.getControllerAt(0),this.m_PcKey=this.getControllerAt(1),this.m_c2=this.getControllerAt(2),this.m_SkillIconCom=this.getChildAt(0),this.m_icon=this.getChildAt(1),this.m_line1=this.getChildAt(2),this.m_line2=this.getChildAt(3),this.m_info2=this.getChildAt(4),this.m_Passivity=this.getChildAt(5),this.m_n118=this.getChildAt(6),this.m_n119=this.getChildAt(7),this.m_SkillInfo=this.getChildAt(8),this.m_Level=this.getChildAt(9),this.m_n123=this.getChildAt(10),this.m_n125=this.getChildAt(11),this.m_info1=this.getChildAt(12),this.m_n127=this.getChildAt(13),this.m_n128=this.getChildAt(14),this.m_n129=this.getChildAt(15),this.m_outline=this.getTransitionAt(0)}}),xd=(Ad.URL="ui://lcl1uligwm1h3y2fp",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","SkillBtn")}onConstruct(){this.m_c1=this.getControllerAt(0),this.m_PcKey=this.getControllerAt(1),this.m_n132=this.getChildAt(0),this.m_Icon=this.getChildAt(1),this.m_SkillIconCom=this.getChildAt(2),this.m_bar=this.getChildAt(3),this.m_n122=this.getChildAt(4),this.m_Timestext=this.getChildAt(5),this.m_Lvtext=this.getChildAt(6),this.m_n124=this.getChildAt(7),this.m_n125=this.getChildAt(8),this.m_n126=this.getChildAt(9),this.m_n127=this.getChildAt(10),this.m_n128=this.getChildAt(11),this.m_n129=this.getChildAt(12),this.m_lock=this.getChildAt(13),this.m_Ready=this.getTransitionAt(0)}}),Td=(xd.URL="ui://lcl1uligwm1h3y2fq",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","GuidanceWindowUI")}onConstruct(){this.m_C_isShow=this.getControllerAt(0),this.m_bg=this.getChildAt(0),this.m_firework=this.getChildAt(1),this.m_Com1=this.getChildAt(2),this.m_btn4=this.getChildAt(3),this.m_btn5=this.getChildAt(4),this.m_btn3=this.getChildAt(5),this.m_btn6=this.getChildAt(6),this.m_btnlv=this.getChildAt(7),this.m_text_level=this.getChildAt(8),this.m_btn7=this.getChildAt(9),this.m_t0=this.getTransitionAt(0),this.m_t1=this.getTransitionAt(1)}}),kd=(Td.URL="ui://lcl1uligwo7ry3y3p0",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","DanJiaCom")}onConstruct(){this.m_nowBullets=this.getChildAt(0),this.m_n194=this.getChildAt(1),this.m_addBullet=this.getChildAt(2),this.m_t0=this.getTransitionAt(0)}}),Md=(kd.URL="ui://lcl1uligwv8r3y3h4",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Btn1_Next")}onConstruct(){this.m_n75=this.getChildAt(0),this.m_n77=this.getChildAt(1)}}),Rd=(Md.URL="ui://lcl1uligwvwzy3y453",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","AuthUI_com2")}onConstruct(){this.m_n9=this.getChildAt(0)}}),Pd=(Rd.URL="ui://lcl1uligwvwzy3y455",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","AuthUI_com3")}onConstruct(){this.m_n9=this.getChildAt(0)}}),Ed=(Pd.URL="ui://lcl1uligwvwzy3y456",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","ImageTestBtn2")}onConstruct(){this.m_n77=this.getChildAt(0),this.m_n79=this.getChildAt(1)}}),Nd=(Ed.URL="ui://lcl1uligwvwzy3y457",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","AuthUI_com4")}onConstruct(){this.m_n9=this.getChildAt(0)}}),Fd=(Nd.URL="ui://lcl1uligwvwzy3y459",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","AuthUI_com5")}onConstruct(){this.m_n9=this.getChildAt(0)}}),Od=(Fd.URL="ui://lcl1uligwvwzy3y45a",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","AuthUI_com6")}onConstruct(){this.m_n9=this.getChildAt(0)}}),Hd=(Od.URL="ui://lcl1uligwvwzy3y45b",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","VideoAndShareType")}onConstruct(){this.m_showType=this.getControllerAt(0),this.m_n0=this.getChildAt(0),this.m_n1=this.getChildAt(1),this.m_n3=this.getChildAt(2),this.m_n4=this.getChildAt(3)}}),Vd=(Hd.URL="ui://lcl1uligx37y3y2w7",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Btn1_Video")}onConstruct(){this.m_n75=this.getChildAt(0),this.m_icon=this.getChildAt(1),this.m_type=this.getChildAt(2)}}),zd=(Vd.URL="ui://lcl1uligx37y3y2w8",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","JoyInput")}onConstruct(){this.m_c1=this.getControllerAt(0),this.m_FistJoyBg=this.getChildAt(0),this.m_skill1=this.getChildAt(1),this.m_JoyBg=this.getChildAt(2),this.m_Joy=this.getChildAt(3),this.m_FistBtn=this.getChildAt(4)}}),Wd=(zd.URL="ui://lcl1uligxqtl3y2f4",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","FistBtn")}onConstruct(){this.m_FistBtn=this.getChildAt(0)}}),Zd=(Wd.URL="ui://lcl1uligxqtl3y2f5",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","TopUI_windowTip1")}onConstruct(){this.m_n5=this.getChildAt(0),this.m_info=this.getChildAt(1)}}),jd=(Zd.URL="ui://lcl1uligxxc30",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","MergeFinger_Guidance")}onConstruct(){this.m_Finger=this.getControllerAt(0),this.m_n156=this.getChildAt(0),this.m_n157=this.getChildAt(1),this.m_t0=this.getTransitionAt(0)}}),Kd=(jd.URL="ui://lcl1uligxxc33y31c",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Btn6TT")}onConstruct(){this.m_n0=this.getChildAt(0),this.m_n1=this.getChildAt(1),this.m_t0=this.getTransitionAt(0)}}),qd=(Kd.URL="ui://lcl1uligywqjy3y3lv",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("InGameUI","ZombieInfoTips")}onConstruct(){this.m_c1=this.getControllerAt(0),this.m_n19=this.getChildAt(0),this.m_n5=this.getChildAt(1),this.m_SkillName_2=this.getChildAt(2),this.m_SkillIcon_2=this.getChildAt(3),this.m_SkillLevel_2=this.getChildAt(4),this.m_n10=this.getChildAt(5),this.m_n29=this.getChildAt(6),this.m_n11=this.getChildAt(7),this.m_SkillIcon_3=this.getChildAt(8),this.m_SkillName_3=this.getChildAt(9),this.m_n14=this.getChildAt(10),this.m_n30=this.getChildAt(11),this.m_n15=this.getChildAt(12),this.m_n16=this.getChildAt(13),this.m_n17=this.getChildAt(14),this.m_n31=this.getChildAt(15),this.m_n4=this.getChildAt(16),this.m_n22=this.getChildAt(17),this.m_n32=this.getChildAt(18),this.m_n23=this.getChildAt(19),this.m_SkillName_4=this.getChildAt(20),this.m_SkillIcon_4=this.getChildAt(21),this.m_SkillLeve_4=this.getChildAt(22),this.m_n28=this.getChildAt(23),this.m_n38=this.getChildAt(24),this.m_NotQuest=this.getChildAt(25),this.m_n37=this.getChildAt(26),this.m_n42=this.getChildAt(27),this.m_n45=this.getChildAt(28),this.m_n44=this.getChildAt(29),this.m_n46=this.getChildAt(30),this.m_n51=this.getChildAt(31),this.m_n49=this.getChildAt(32),this.m_RadiationLevel=this.getChildAt(33),this.m_n48=this.getChildAt(34),this.m_n55=this.getChildAt(35),this.m_QuestTip=this.getChildAt(36),this.m_n54=this.getChildAt(37),this.m_enter=this.getTransitionAt(0),this.m_out=this.getTransitionAt(1),this.m_t3=this.getTransitionAt(2)}}),Yd=(qd.URL="ui://lcl1uligyzgoy3y3ug",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("InGameUI","Cover_playerBtn")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n6=this.getChildAt(0),this.m_n7=this.getChildAt(1)}}),Qd=(Yd.URL="ui://lcl1uligzb0d3y39a",class{constructor(){this.server=""}Init(e){this.server=e}Request(e,t,i,o,a=null,n="post"){let s=new Laya.HttpRequest;s.once(Laya.Event.COMPLETE,this,function(e){try{i&&o&&o.call(this,e)}catch(e){console.warn("请求出现error",e),i&&a&&a.call(this,e)}}),s.once(Laya.Event.ERROR,this,function(e){i&&a&&a.call(this,e)}),s.send(t,JSON.stringify(e),n,"json",["Content-Type","application/json"])}}),Jd=class extends u{constructor(){super(...arguments),this.ModuleName="网络模块",this.httpClient=new Qd}Init(){Jd.Instance=this,super.Init(),this.InitOver()}Request(e,t,i,o,a,n=0,s="post"){this.httpClient.Request(e,t,i,function(e){i&&o&&o.call(i,e)},function(){i&&a&&a.call(i)},s)}},Xd=class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("BaseUI","BaseDialogWindow")}onConstruct(){this.m_c1=this.getControllerAt(0),this.m_n2=this.getChildAt(0),this.m_n7=this.getChildAt(1),this.m_YesBtn=this.getChildAt(2),this.m_NoBtn=this.getChildAt(3),this.m_info=this.getChildAt(4),this.m_OKBtn=this.getChildAt(5),this.m_t0=this.getTransitionAt(0)}},$d=(Xd.URL="ui://3u5yggm9c7k6j",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("BaseUI","BaseOKButton")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n0=this.getChildAt(0)}}),ec=($d.URL="ui://3u5yggm9c7k6l",class extends fgui.GButton{static createInstance(){return fgui.UIPackage.createObject("BaseUI","BaseNoButton")}onConstruct(){this.m_button=this.getControllerAt(0),this.m_n1=this.getChildAt(0)}}),tc=(ec.URL="ui://3u5yggm9c7k6n",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("BaseUI","BaseLoadingUI")}onConstruct(){this.m_newYear=this.getControllerAt(0),this.m_YLPlatform=this.getControllerAt(1),this.m_c1=this.getControllerAt(2),this.m_n23=this.getChildAt(0),this.m_n42=this.getChildAt(1),this.m_loadBgBule=this.getChildAt(2),this.m_n25=this.getChildAt(3),this.m_n30=this.getChildAt(4),this.m_n32=this.getChildAt(5),this.m_buleWaitAni=this.getChildAt(6),this.m_LoadingFrame=this.getChildAt(7),this.m_LoadingBar=this.getChildAt(8),this.m_n34=this.getChildAt(9),this.m_n33=this.getChildAt(10),this.m_tipInfo=this.getChildAt(11),this.m_ver_Text=this.getChildAt(12),this.m_n47=this.getChildAt(13),this.m_n49=this.getChildAt(14),this.m_n51=this.getChildAt(15),this.m_n52=this.getChildAt(16),this.m_loadingLable=this.getChildAt(17),this.m_TTHint=this.getChildAt(18),this.m_n53=this.getChildAt(19),this.m_t0=this.getTransitionAt(0)}}),ic=(tc.URL="ui://3u5yggm9c7k6p",class extends fgui.GComponent{static createInstance(){return fgui.UIPackage.createObject("BaseUI","BaseWaitAni")}onConstruct(){this.m_headBg=this.getChildAt(0),this.m_headIcon=this.getChildAt(1),this.m_t0=this.getTransitionAt(0)}}),oc=(ic.URL="ui://3u5yggm9c7k6t",class extends u{constructor(){super(...arguments),this.ModuleName="初始化模块",this.resDataCreator=new Li}Init(){super.Init(),window.InitModuleIns=this;let t=new Li,i=sn.GetResPaths();for(let e=0;e<i.length;e++)t.AddPrefab(i[e]);T.IS_4399?t.AddBUFFER("res/BaseUI.png"):t.AddBUFFER("res/BaseUI.zip"),t.AddImage("res/BaseUI_atlas0.png"),Q.Instance.StartLoad(t.resList,this,this.OnFristResLoadComplete,this.OnFristResLoadChanged,this.OnFristResLoadErro)}OnFristResLoadChanged(){}OnFristResLoadErro(){}OnFristResLoadComplete(){console.log("开始加载base"),fairygui.UIPackage.addPackage("res/BaseUI"),class{static bindAll(){fgui.UIObjectFactory.setExtension(hn.URL,hn),fgui.UIObjectFactory.setExtension(mn.URL,mn),fgui.UIObjectFactory.setExtension(dn.URL,dn),fgui.UIObjectFactory.setExtension(cn.URL,cn),fgui.UIObjectFactory.setExtension(un.URL,un),fgui.UIObjectFactory.setExtension(pn.URL,pn),fgui.UIObjectFactory.setExtension(gn.URL,gn),fgui.UIObjectFactory.setExtension(fn.URL,fn),fgui.UIObjectFactory.setExtension(_n.URL,_n),fgui.UIObjectFactory.setExtension(In.URL,In),fgui.UIObjectFactory.setExtension(Cn.URL,Cn),fgui.UIObjectFactory.setExtension(Gn.URL,Gn),fgui.UIObjectFactory.setExtension(Sn.URL,Sn),fgui.UIObjectFactory.setExtension(yn.URL,yn),fgui.UIObjectFactory.setExtension(wn.URL,wn),fgui.UIObjectFactory.setExtension(vn.URL,vn),fgui.UIObjectFactory.setExtension(Dn.URL,Dn),fgui.UIObjectFactory.setExtension(Un.URL,Un),fgui.UIObjectFactory.setExtension(Ln.URL,Ln),fgui.UIObjectFactory.setExtension(Bn.URL,Bn),fgui.UIObjectFactory.setExtension(bn.URL,bn),fgui.UIObjectFactory.setExtension(An.URL,An),fgui.UIObjectFactory.setExtension(xn.URL,xn),fgui.UIObjectFactory.setExtension(Tn.URL,Tn),fgui.UIObjectFactory.setExtension(kn.URL,kn),fgui.UIObjectFactory.setExtension(Mn.URL,Mn),fgui.UIObjectFactory.setExtension(Rn.URL,Rn),fgui.UIObjectFactory.setExtension(Pn.URL,Pn),fgui.UIObjectFactory.setExtension(En.URL,En),fgui.UIObjectFactory.setExtension(Nn.URL,Nn),fgui.UIObjectFactory.setExtension(Fn.URL,Fn),fgui.UIObjectFactory.setExtension(On.URL,On),fgui.UIObjectFactory.setExtension(ja.URL,ja),fgui.UIObjectFactory.setExtension(Hn.URL,Hn),fgui.UIObjectFactory.setExtension(Vn.URL,Vn),fgui.UIObjectFactory.setExtension(zn.URL,zn),fgui.UIObjectFactory.setExtension(ma.URL,ma),fgui.UIObjectFactory.setExtension(Wn.URL,Wn),fgui.UIObjectFactory.setExtension(Zn.URL,Zn),fgui.UIObjectFactory.setExtension(jn.URL,jn),fgui.UIObjectFactory.setExtension(Kn.URL,Kn),fgui.UIObjectFactory.setExtension(qn.URL,qn),fgui.UIObjectFactory.setExtension(Yn.URL,Yn),fgui.UIObjectFactory.setExtension(Qn.URL,Qn),fgui.UIObjectFactory.setExtension(Jn.URL,Jn),fgui.UIObjectFactory.setExtension(Ea.URL,Ea),fgui.UIObjectFactory.setExtension(Xn.URL,Xn),fgui.UIObjectFactory.setExtension($n.URL,$n),fgui.UIObjectFactory.setExtension(es.URL,es),fgui.UIObjectFactory.setExtension(ts.URL,ts),fgui.UIObjectFactory.setExtension(is.URL,is),fgui.UIObjectFactory.setExtension(os.URL,os),fgui.UIObjectFactory.setExtension(as.URL,as),fgui.UIObjectFactory.setExtension(ns.URL,ns),fgui.UIObjectFactory.setExtension(ss.URL,ss),fgui.UIObjectFactory.setExtension(ls.URL,ls),fgui.UIObjectFactory.setExtension(rs.URL,rs),fgui.UIObjectFactory.setExtension(hs.URL,hs),fgui.UIObjectFactory.setExtension(eo.URL,eo),fgui.UIObjectFactory.setExtension(ms.URL,ms),fgui.UIObjectFactory.setExtension(ds.URL,ds),fgui.UIObjectFactory.setExtension(cs.URL,cs),fgui.UIObjectFactory.setExtension(us.URL,us),fgui.UIObjectFactory.setExtension(ps.URL,ps),fgui.UIObjectFactory.setExtension(gs.URL,gs),fgui.UIObjectFactory.setExtension(fs.URL,fs),fgui.UIObjectFactory.setExtension(_s.URL,_s),fgui.UIObjectFactory.setExtension(Is.URL,Is),fgui.UIObjectFactory.setExtension(Cs.URL,Cs),fgui.UIObjectFactory.setExtension(Gs.URL,Gs),fgui.UIObjectFactory.setExtension(Ss.URL,Ss),fgui.UIObjectFactory.setExtension(ys.URL,ys),fgui.UIObjectFactory.setExtension(ws.URL,ws),fgui.UIObjectFactory.setExtension(Ro.URL,Ro),fgui.UIObjectFactory.setExtension(vs.URL,vs),fgui.UIObjectFactory.setExtension(Ds.URL,Ds),fgui.UIObjectFactory.setExtension(Us.URL,Us),fgui.UIObjectFactory.setExtension(Ls.URL,Ls),fgui.UIObjectFactory.setExtension(Bs.URL,Bs),fgui.UIObjectFactory.setExtension(bs.URL,bs),fgui.UIObjectFactory.setExtension(As.URL,As),fgui.UIObjectFactory.setExtension(xs.URL,xs),fgui.UIObjectFactory.setExtension(Ts.URL,Ts),fgui.UIObjectFactory.setExtension(ks.URL,ks),fgui.UIObjectFactory.setExtension(Ms.URL,Ms),fgui.UIObjectFactory.setExtension(Rs.URL,Rs),fgui.UIObjectFactory.setExtension(Ps.URL,Ps),fgui.UIObjectFactory.setExtension(Es.URL,Es),fgui.UIObjectFactory.setExtension(Zi.URL,Zi),fgui.UIObjectFactory.setExtension(Ns.URL,Ns),fgui.UIObjectFactory.setExtension(Fs.URL,Fs),fgui.UIObjectFactory.setExtension(Os.URL,Os),fgui.UIObjectFactory.setExtension(Hs.URL,Hs),fgui.UIObjectFactory.setExtension(Vs.URL,Vs),fgui.UIObjectFactory.setExtension(zs.URL,zs),fgui.UIObjectFactory.setExtension(Ws.URL,Ws),fgui.UIObjectFactory.setExtension(Zs.URL,Zs),fgui.UIObjectFactory.setExtension(js.URL,js),fgui.UIObjectFactory.setExtension(Ks.URL,Ks),fgui.UIObjectFactory.setExtension(qs.URL,qs),fgui.UIObjectFactory.setExtension(Ys.URL,Ys),fgui.UIObjectFactory.setExtension(Qs.URL,Qs),fgui.UIObjectFactory.setExtension(Js.URL,Js),fgui.UIObjectFactory.setExtension(Xs.URL,Xs),fgui.UIObjectFactory.setExtension(ga.URL,ga),fgui.UIObjectFactory.setExtension($s.URL,$s),fgui.UIObjectFactory.setExtension(el.URL,el),fgui.UIObjectFactory.setExtension(Xa.URL,Xa),fgui.UIObjectFactory.setExtension(tl.URL,tl),fgui.UIObjectFactory.setExtension(il.URL,il),fgui.UIObjectFactory.setExtension(Qi.URL,Qi),fgui.UIObjectFactory.setExtension(ol.URL,ol),fgui.UIObjectFactory.setExtension(al.URL,al),fgui.UIObjectFactory.setExtension(nl.URL,nl),fgui.UIObjectFactory.setExtension(sl.URL,sl),fgui.UIObjectFactory.setExtension(ll.URL,ll),fgui.UIObjectFactory.setExtension(rl.URL,rl),fgui.UIObjectFactory.setExtension(hl.URL,hl),fgui.UIObjectFactory.setExtension(ml.URL,ml),fgui.UIObjectFactory.setExtension(dl.URL,dl),fgui.UIObjectFactory.setExtension(cl.URL,cl),fgui.UIObjectFactory.setExtension(ul.URL,ul),fgui.UIObjectFactory.setExtension(pl.URL,pl),fgui.UIObjectFactory.setExtension(gl.URL,gl),fgui.UIObjectFactory.setExtension(fl.URL,fl),fgui.UIObjectFactory.setExtension(_l.URL,_l),fgui.UIObjectFactory.setExtension(Il.URL,Il),fgui.UIObjectFactory.setExtension(Cl.URL,Cl),fgui.UIObjectFactory.setExtension(Eo.URL,Eo),fgui.UIObjectFactory.setExtension(Gl.URL,Gl),fgui.UIObjectFactory.setExtension(Po.URL,Po),fgui.UIObjectFactory.setExtension(oa.URL,oa),fgui.UIObjectFactory.setExtension(La.URL,La),fgui.UIObjectFactory.setExtension(Sl.URL,Sl),fgui.UIObjectFactory.setExtension(yl.URL,yl),fgui.UIObjectFactory.setExtension(aa.URL,aa),fgui.UIObjectFactory.setExtension(wl.URL,wl),fgui.UIObjectFactory.setExtension(vl.URL,vl),fgui.UIObjectFactory.setExtension(Dl.URL,Dl),fgui.UIObjectFactory.setExtension(Ul.URL,Ul),fgui.UIObjectFactory.setExtension(Ll.URL,Ll),fgui.UIObjectFactory.setExtension(zo.URL,zo),fgui.UIObjectFactory.setExtension(Bl.URL,Bl),fgui.UIObjectFactory.setExtension(bl.URL,bl),fgui.UIObjectFactory.setExtension(Al.URL,Al),fgui.UIObjectFactory.setExtension(Ya.URL,Ya),fgui.UIObjectFactory.setExtension(xl.URL,xl),fgui.UIObjectFactory.setExtension(Bo.URL,Bo),fgui.UIObjectFactory.setExtension(Tl.URL,Tl),fgui.UIObjectFactory.setExtension(kl.URL,kl),fgui.UIObjectFactory.setExtension(Ml.URL,Ml),fgui.UIObjectFactory.setExtension(Rl.URL,Rl),fgui.UIObjectFactory.setExtension(Pl.URL,Pl),fgui.UIObjectFactory.setExtension(El.URL,El),fgui.UIObjectFactory.setExtension(Nl.URL,Nl),fgui.UIObjectFactory.setExtension(Fl.URL,Fl),fgui.UIObjectFactory.setExtension(Ol.URL,Ol),fgui.UIObjectFactory.setExtension(Hl.URL,Hl),fgui.UIObjectFactory.setExtension(Vl.URL,Vl),fgui.UIObjectFactory.setExtension(zl.URL,zl),fgui.UIObjectFactory.setExtension(Wl.URL,Wl),fgui.UIObjectFactory.setExtension(Zl.URL,Zl),fgui.UIObjectFactory.setExtension(jl.URL,jl),fgui.UIObjectFactory.setExtension(Kl.URL,Kl),fgui.UIObjectFactory.setExtension(ql.URL,ql),fgui.UIObjectFactory.setExtension(Yl.URL,Yl),fgui.UIObjectFactory.setExtension(Ql.URL,Ql),fgui.UIObjectFactory.setExtension(Jl.URL,Jl),fgui.UIObjectFactory.setExtension(Xl.URL,Xl),fgui.UIObjectFactory.setExtension($l.URL,$l),fgui.UIObjectFactory.setExtension(er.URL,er),fgui.UIObjectFactory.setExtension(ha.URL,ha),fgui.UIObjectFactory.setExtension(tr.URL,tr),fgui.UIObjectFactory.setExtension(ir.URL,ir),fgui.UIObjectFactory.setExtension(sa.URL,sa),fgui.UIObjectFactory.setExtension(or.URL,or),fgui.UIObjectFactory.setExtension(ar.URL,ar),fgui.UIObjectFactory.setExtension(nr.URL,nr),fgui.UIObjectFactory.setExtension(sr.URL,sr),fgui.UIObjectFactory.setExtension(lr.URL,lr),fgui.UIObjectFactory.setExtension(rr.URL,rr),fgui.UIObjectFactory.setExtension(hr.URL,hr),fgui.UIObjectFactory.setExtension(Vo.URL,Vo),fgui.UIObjectFactory.setExtension(mr.URL,mr),fgui.UIObjectFactory.setExtension(dr.URL,dr),fgui.UIObjectFactory.setExtension(cr.URL,cr),fgui.UIObjectFactory.setExtension(ur.URL,ur),fgui.UIObjectFactory.setExtension(pr.URL,pr),fgui.UIObjectFactory.setExtension(gr.URL,gr),fgui.UIObjectFactory.setExtension(fr.URL,fr),fgui.UIObjectFactory.setExtension(_r.URL,_r),fgui.UIObjectFactory.setExtension(Ir.URL,Ir),fgui.UIObjectFactory.setExtension(Cr.URL,Cr),fgui.UIObjectFactory.setExtension(Gr.URL,Gr),fgui.UIObjectFactory.setExtension(Sr.URL,Sr),fgui.UIObjectFactory.setExtension(yr.URL,yr),fgui.UIObjectFactory.setExtension(wr.URL,wr),fgui.UIObjectFactory.setExtension(vr.URL,vr),fgui.UIObjectFactory.setExtension(Dr.URL,Dr),fgui.UIObjectFactory.setExtension(Ur.URL,Ur),fgui.UIObjectFactory.setExtension(Lr.URL,Lr),fgui.UIObjectFactory.setExtension(Br.URL,Br),fgui.UIObjectFactory.setExtension(br.URL,br),fgui.UIObjectFactory.setExtension(Ar.URL,Ar),fgui.UIObjectFactory.setExtension(xr.URL,xr),fgui.UIObjectFactory.setExtension(Fi.URL,Fi),fgui.UIObjectFactory.setExtension(Tr.URL,Tr),fgui.UIObjectFactory.setExtension(kr.URL,kr),fgui.UIObjectFactory.setExtension(Mr.URL,Mr),fgui.UIObjectFactory.setExtension(Rr.URL,Rr),fgui.UIObjectFactory.setExtension(Pr.URL,Pr),fgui.UIObjectFactory.setExtension(Er.URL,Er),fgui.UIObjectFactory.setExtension(Nr.URL,Nr),fgui.UIObjectFactory.setExtension(Fr.URL,Fr),fgui.UIObjectFactory.setExtension(Or.URL,Or),fgui.UIObjectFactory.setExtension(Hr.URL,Hr),fgui.UIObjectFactory.setExtension(Vr.URL,Vr),fgui.UIObjectFactory.setExtension(zr.URL,zr),fgui.UIObjectFactory.setExtension(Wr.URL,Wr),fgui.UIObjectFactory.setExtension(Zr.URL,Zr),fgui.UIObjectFactory.setExtension(jr.URL,jr),fgui.UIObjectFactory.setExtension(Kr.URL,Kr),fgui.UIObjectFactory.setExtension(qr.URL,qr),fgui.UIObjectFactory.setExtension(Yr.URL,Yr),fgui.UIObjectFactory.setExtension(Qr.URL,Qr),fgui.UIObjectFactory.setExtension(Jr.URL,Jr),fgui.UIObjectFactory.setExtension(Xr.URL,Xr),fgui.UIObjectFactory.setExtension($r.URL,$r),fgui.UIObjectFactory.setExtension(eh.URL,eh),fgui.UIObjectFactory.setExtension(th.URL,th),fgui.UIObjectFactory.setExtension(ih.URL,ih),fgui.UIObjectFactory.setExtension(oh.URL,oh),fgui.UIObjectFactory.setExtension(ah.URL,ah),fgui.UIObjectFactory.setExtension(nh.URL,nh),fgui.UIObjectFactory.setExtension(sh.URL,sh),fgui.UIObjectFactory.setExtension(lh.URL,lh),fgui.UIObjectFactory.setExtension(rh.URL,rh),fgui.UIObjectFactory.setExtension(hh.URL,hh),fgui.UIObjectFactory.setExtension(mh.URL,mh),fgui.UIObjectFactory.setExtension(dh.URL,dh),fgui.UIObjectFactory.setExtension(ch.URL,ch),fgui.UIObjectFactory.setExtension(uh.URL,uh),fgui.UIObjectFactory.setExtension(ph.URL,ph),fgui.UIObjectFactory.setExtension(gh.URL,gh),fgui.UIObjectFactory.setExtension(fh.URL,fh),fgui.UIObjectFactory.setExtension(_h.URL,_h),fgui.UIObjectFactory.setExtension(Ih.URL,Ih),fgui.UIObjectFactory.setExtension(Ch.URL,Ch),fgui.UIObjectFactory.setExtension(Gh.URL,Gh),fgui.UIObjectFactory.setExtension(Sh.URL,Sh),fgui.UIObjectFactory.setExtension(yh.URL,yh),fgui.UIObjectFactory.setExtension(wh.URL,wh),fgui.UIObjectFactory.setExtension(xa.URL,xa),fgui.UIObjectFactory.setExtension(tn.URL,tn),fgui.UIObjectFactory.setExtension(vh.URL,vh),fgui.UIObjectFactory.setExtension(Dh.URL,Dh),fgui.UIObjectFactory.setExtension(Uh.URL,Uh),fgui.UIObjectFactory.setExtension(Lh.URL,Lh),fgui.UIObjectFactory.setExtension(Bh.URL,Bh),fgui.UIObjectFactory.setExtension(bh.URL,bh),fgui.UIObjectFactory.setExtension(Ah.URL,Ah),fgui.UIObjectFactory.setExtension(xh.URL,xh),fgui.UIObjectFactory.setExtension(Th.URL,Th),fgui.UIObjectFactory.setExtension(kh.URL,kh),fgui.UIObjectFactory.setExtension(Mh.URL,Mh),fgui.UIObjectFactory.setExtension(Rh.URL,Rh),fgui.UIObjectFactory.setExtension(Ph.URL,Ph),fgui.UIObjectFactory.setExtension(Eh.URL,Eh),fgui.UIObjectFactory.setExtension(Nh.URL,Nh),fgui.UIObjectFactory.setExtension(Fh.URL,Fh),fgui.UIObjectFactory.setExtension(Oh.URL,Oh),fgui.UIObjectFactory.setExtension(Hh.URL,Hh),fgui.UIObjectFactory.setExtension(Vh.URL,Vh),fgui.UIObjectFactory.setExtension(zh.URL,zh),fgui.UIObjectFactory.setExtension(Wh.URL,Wh),fgui.UIObjectFactory.setExtension(Zh.URL,Zh),fgui.UIObjectFactory.setExtension(jh.URL,jh),fgui.UIObjectFactory.setExtension(Kh.URL,Kh),fgui.UIObjectFactory.setExtension(qh.URL,qh),fgui.UIObjectFactory.setExtension(Yh.URL,Yh),fgui.UIObjectFactory.setExtension(Qh.URL,Qh),fgui.UIObjectFactory.setExtension(Jh.URL,Jh),fgui.UIObjectFactory.setExtension(Xh.URL,Xh),fgui.UIObjectFactory.setExtension($h.URL,$h),fgui.UIObjectFactory.setExtension(Ba.URL,Ba),fgui.UIObjectFactory.setExtension(em.URL,em),fgui.UIObjectFactory.setExtension(qi.URL,qi),fgui.UIObjectFactory.setExtension(Qo.URL,Qo),fgui.UIObjectFactory.setExtension(Yi.URL,Yi),fgui.UIObjectFactory.setExtension(ia.URL,ia),fgui.UIObjectFactory.setExtension(No.URL,No),fgui.UIObjectFactory.setExtension(tm.URL,tm),fgui.UIObjectFactory.setExtension(im.URL,im),fgui.UIObjectFactory.setExtension(om.URL,om),fgui.UIObjectFactory.setExtension(am.URL,am),fgui.UIObjectFactory.setExtension(nm.URL,nm),fgui.UIObjectFactory.setExtension(sm.URL,sm),fgui.UIObjectFactory.setExtension(lm.URL,lm),fgui.UIObjectFactory.setExtension(rm.URL,rm),fgui.UIObjectFactory.setExtension(hm.URL,hm),fgui.UIObjectFactory.setExtension(mm.URL,mm),fgui.UIObjectFactory.setExtension(dm.URL,dm),fgui.UIObjectFactory.setExtension(cm.URL,cm),fgui.UIObjectFactory.setExtension(um.URL,um),fgui.UIObjectFactory.setExtension(pm.URL,pm),fgui.UIObjectFactory.setExtension(gm.URL,gm),fgui.UIObjectFactory.setExtension(fm.URL,fm),fgui.UIObjectFactory.setExtension(_m.URL,_m),fgui.UIObjectFactory.setExtension(Im.URL,Im),fgui.UIObjectFactory.setExtension(Cm.URL,Cm),fgui.UIObjectFactory.setExtension(Gm.URL,Gm),fgui.UIObjectFactory.setExtension(Sm.URL,Sm),fgui.UIObjectFactory.setExtension(ym.URL,ym),fgui.UIObjectFactory.setExtension(wm.URL,wm),fgui.UIObjectFactory.setExtension(vm.URL,vm),fgui.UIObjectFactory.setExtension(Dm.URL,Dm),fgui.UIObjectFactory.setExtension(Um.URL,Um),fgui.UIObjectFactory.setExtension(Lm.URL,Lm),fgui.UIObjectFactory.setExtension(Bm.URL,Bm),fgui.UIObjectFactory.setExtension(bm.URL,bm),fgui.UIObjectFactory.setExtension(Am.URL,Am),fgui.UIObjectFactory.setExtension(xm.URL,xm),fgui.UIObjectFactory.setExtension(Tm.URL,Tm),fgui.UIObjectFactory.setExtension(km.URL,km),fgui.UIObjectFactory.setExtension(Mm.URL,Mm),fgui.UIObjectFactory.setExtension(Rm.URL,Rm),fgui.UIObjectFactory.setExtension(Pm.URL,Pm),fgui.UIObjectFactory.setExtension(Em.URL,Em),fgui.UIObjectFactory.setExtension(Nm.URL,Nm),fgui.UIObjectFactory.setExtension(Fm.URL,Fm),fgui.UIObjectFactory.setExtension(Om.URL,Om),fgui.UIObjectFactory.setExtension(Hm.URL,Hm),fgui.UIObjectFactory.setExtension(Vm.URL,Vm),fgui.UIObjectFactory.setExtension(zm.URL,zm),fgui.UIObjectFactory.setExtension(Wm.URL,Wm),fgui.UIObjectFactory.setExtension(Zm.URL,Zm),fgui.UIObjectFactory.setExtension(jm.URL,jm),fgui.UIObjectFactory.setExtension(Km.URL,Km),fgui.UIObjectFactory.setExtension(qm.URL,qm),fgui.UIObjectFactory.setExtension(Ym.URL,Ym),fgui.UIObjectFactory.setExtension(Qm.URL,Qm),fgui.UIObjectFactory.setExtension(Jm.URL,Jm),fgui.UIObjectFactory.setExtension(Xm.URL,Xm),fgui.UIObjectFactory.setExtension($m.URL,$m),fgui.UIObjectFactory.setExtension(ed.URL,ed),fgui.UIObjectFactory.setExtension(td.URL,td),fgui.UIObjectFactory.setExtension(id.URL,id),fgui.UIObjectFactory.setExtension(od.URL,od),fgui.UIObjectFactory.setExtension(ad.URL,ad),fgui.UIObjectFactory.setExtension(nd.URL,nd),fgui.UIObjectFactory.setExtension(sd.URL,sd),fgui.UIObjectFactory.setExtension(ld.URL,ld),fgui.UIObjectFactory.setExtension(rd.URL,rd),fgui.UIObjectFactory.setExtension(hd.URL,hd),fgui.UIObjectFactory.setExtension(md.URL,md),fgui.UIObjectFactory.setExtension(dd.URL,dd),fgui.UIObjectFactory.setExtension(cd.URL,cd),fgui.UIObjectFactory.setExtension(ud.URL,ud),fgui.UIObjectFactory.setExtension(pd.URL,pd),fgui.UIObjectFactory.setExtension(gd.URL,gd),fgui.UIObjectFactory.setExtension(fd.URL,fd),fgui.UIObjectFactory.setExtension(_d.URL,_d),fgui.UIObjectFactory.setExtension(Id.URL,Id),fgui.UIObjectFactory.setExtension(Cd.URL,Cd),fgui.UIObjectFactory.setExtension(Gd.URL,Gd),fgui.UIObjectFactory.setExtension(Sd.URL,Sd),fgui.UIObjectFactory.setExtension(yd.URL,yd),fgui.UIObjectFactory.setExtension(Gi.URL,Gi),fgui.UIObjectFactory.setExtension(wd.URL,wd),fgui.UIObjectFactory.setExtension($o.URL,$o),fgui.UIObjectFactory.setExtension(vd.URL,vd),fgui.UIObjectFactory.setExtension(Dd.URL,Dd),fgui.UIObjectFactory.setExtension(Ud.URL,Ud),fgui.UIObjectFactory.setExtension(Vi.URL,Vi),fgui.UIObjectFactory.setExtension(na.URL,na),fgui.UIObjectFactory.setExtension(Ld.URL,Ld),fgui.UIObjectFactory.setExtension(Bd.URL,Bd),fgui.UIObjectFactory.setExtension(bd.URL,bd),fgui.UIObjectFactory.setExtension(Ad.URL,Ad),fgui.UIObjectFactory.setExtension(xd.URL,xd),fgui.UIObjectFactory.setExtension(Td.URL,Td),fgui.UIObjectFactory.setExtension(kd.URL,kd),fgui.UIObjectFactory.setExtension(Md.URL,Md),fgui.UIObjectFactory.setExtension(Rd.URL,Rd),fgui.UIObjectFactory.setExtension(Pd.URL,Pd),fgui.UIObjectFactory.setExtension(Ed.URL,Ed),fgui.UIObjectFactory.setExtension(Nd.URL,Nd),fgui.UIObjectFactory.setExtension(Fd.URL,Fd),fgui.UIObjectFactory.setExtension(Od.URL,Od),fgui.UIObjectFactory.setExtension(Hd.URL,Hd),fgui.UIObjectFactory.setExtension(Vd.URL,Vd),fgui.UIObjectFactory.setExtension(Ii.URL,Ii),fgui.UIObjectFactory.setExtension(zd.URL,zd),fgui.UIObjectFactory.setExtension(Wd.URL,Wd),fgui.UIObjectFactory.setExtension(Zd.URL,Zd),fgui.UIObjectFactory.setExtension(jd.URL,jd),fgui.UIObjectFactory.setExtension(Kd.URL,Kd),fgui.UIObjectFactory.setExtension(qd.URL,qd),fgui.UIObjectFactory.setExtension(Yd.URL,Yd)}}.bindAll(),class{static bindAll(){fgui.UIObjectFactory.setExtension(Pi.URL,Pi),fgui.UIObjectFactory.setExtension(ki.URL,ki),fgui.UIObjectFactory.setExtension(Xd.URL,Xd),fgui.UIObjectFactory.setExtension($d.URL,$d),fgui.UIObjectFactory.setExtension(ec.URL,ec),fgui.UIObjectFactory.setExtension(tc.URL,tc),fgui.UIObjectFactory.setExtension(ic.URL,ic)}}.bindAll(),j.ShowLoading(0),K.PlatformModule().LoadSubPack("3DRes",this,this.OnLoadSubPackSucceed,this.OnLoadSubPackFailed,this.OnLoadSubPackChanged)}OnLoadSubPackChanged(e){console.log("加载子包中",e),j.ShowLoading(.5*e*.01)}OnLoadSubPackFailed(){j.ShowCheckDialog("加载失败请检查网络后重试",this,function(){K.PlatformModule().LoadSubPack("3DRes",this,this.OnLoadSubPackSucceed,this.OnLoadSubPackFailed,this.OnLoadSubPackChanged)})}static LoadSubPack_Scene(e,t){this.loadSceneSubPackName=e,this.loadSceneSubPackSuccFunc=t,console.log("加载子包["+this.loadSceneSubPackName+"]"),K.PlatformModule().LoadSubPack(this.loadSceneSubPackName,this,oc.OnLoadSubPackSucceed_Scene,oc.OnLoadSubPackFailed_Scene,oc.OnLoadSubPackChanged_Scene)}static OnLoadSubPackChanged_Scene(e){console.log("加载子包["+this.loadSceneSubPackName+"]进度: "+e),j.ShowLoading(.5*e*.01)}static OnLoadSubPackSucceed_Scene(){console.log("加载子包["+this.loadSceneSubPackName+"]成功"),this.loadSceneSubPackSuccFunc&&this.loadSceneSubPackSuccFunc()}static OnLoadSubPackFailed_Scene(){console.log("加载子包["+this.loadSceneSubPackName+"]失败"),j.ShowCheckDialog("加载失败请检查网络后重试",this,function(){K.PlatformModule().LoadSubPack(this.sceneRes,this,this.OnLoadSubPackSucceed_Scene,this.OnLoadSubPackChanged_Scene,this.OnLoadSubPackFailed_Scene)})}OnLoadSubPackSucceed(){T.IS_4399?this.resDataCreator.AddBUFFER("3DRes/res/InGameUI.png"):this.resDataCreator.AddBUFFER("3DRes/res/InGameUI.zip"),this.resDataCreator.AddImage("3DRes/res/InGameUI_atlas0.png"),this.resDataCreator.AddImage("3DRes/res/InGameUI_atlas0_1.png"),this.resDataCreator.AddImage("3DRes/res/InGameUI_atlas0_2.png"),this.resDataCreator.AddImage("3DRes/res/InGameUI_atlas10.png"),this.resDataCreator.AddJson(x.localizationJsonData),this.resDataCreator.AddJson(x.GameRuleData),this.resDataCreator.AddJson(x.SkillData),this.resDataCreator.AddJson(x.UserData),this.resDataCreator.AddJson(x.UserData2),this.resDataCreator.AddJson(x.HeroData),this.resDataCreator.AddJson(x.WeaponData),this.resDataCreator.AddJson(x.GearData),this.resDataCreator.AddJson(x.MedalLevelData),this.resDataCreator.AddJson(x.PlayerLvData),this.resDataCreator.AddJson(x.EntryData),this.resDataCreator.AddJson(x.AIData),this.resDataCreator.AddJson(x.PlatformSettingData),this.resDataCreator.AddJson(x.propData),this.resDataCreator.AddJson(x.LotteryData),this.resDataCreator.AddJson(x.ShopData),this.resDataCreator.AddJson(x.QuestData),this.resDataCreator.AddJson(x.EventData),this.resDataCreator.AddJson(x.WeaponSkinData),this.resDataCreator.AddJson(x.HeroLvlData),this.resDataCreator.AddJson(x.ZombieData),this.resDataCreator.AddJson(x.ZombieSchedule),this.resDataCreator.AddJson(x.ItemData),this.resDataCreator.AddJson(x.ZModePassiveSkill),this.resDataCreator.AddJson(x.Z_Quest),k.language,this.resDataCreator.AddJson(x.PlayerNames_EN),Q.Instance.StartLoad(this.resDataCreator.resList,this,this.OnResLoadComplete,this.OnResLoadChanged,this.OnResLoadErro)}OnResLoadChanged(e){j.ShowLoading(.5+.5*e)}OnResLoadComplete(){fairygui.UIPackage.addPackage("3DRes/res/InGameUI"),Laya.loader.getRes("res/BaseUI_atlas0.png").bitmap.lock=!0,b.Log("下载完成"),"Save"==Laya.LocalStorage.getItem("HasSaveUserData12")&&!W.newPlayer||z.Instance.LeYou_Guidance(103),this.Init_NetModule(),this.Init_InputModule(),this.Init_DataModule(),this.Init_PlatformModule(),this.Init_DebugModule(),this.Init_Over()}OnResLoadErro(){b.Log("下载失败")}Init_NetModule(){Jd.Instance.httpClient.Init(k.httpServerPath)}Init_InputModule(){rn.Instance.CreatAxis(Ci.HorizontalAxis,Laya.Keyboard.A,Laya.Keyboard.D),rn.Instance.CreatAxis(Ci.VerticalAxis,Laya.Keyboard.W,Laya.Keyboard.S),rn.Instance.CreatAxis0(Ci.HorizontalAxis0,null,null),rn.Instance.CreatAxis0(Ci.VerticalAxis0,null,null),rn.Instance.CreatAxis1(Ci.SkillHorizontalAxis,null,null),rn.Instance.CreatAxis1(Ci.SkillVerticalAxis,null,null)}Init_DataModule(){YC.Instance.GetLocal().Init(),YC.Instance.GetUser().Init()}Init_PlatformModule(){W.Instance.LoadConfig()}Init_DebugModule(){b.Init(k.debugLevel,k.debugModule)}Init_Over(){this.InitOver(),k.Platform==T.IOS?window.jsCallIosInit():this.startGame()}startGame(){this.UpNetData(),tG.startScene&&Laya.Scene.open(tG.startScene)}UpNetData(){try{SC.UpNetData()}catch(e){console.log("UpNetData_error:",e)}}ReportInvite(){}initKvMap(e){if(k.Platform==T.IOS){console.log("LoadDataTest:"+Laya.LocalStorage.getItem("HasSaveUserData9"));let i=Laya.LocalStorage.setItem;Laya.LocalStorage.setItem=function(e,t){-1!=e.indexOf("qsll_")?(i(e.substring(5),t),window.jsCallIos_setItem(e,t),window.IsGM||window.jsCallIos_setItem("qsll_HasSaveUserData9","Save")):(i(e,t),window.IsGM||window.jsCallIos_setItem("qsll_HasSaveUserData9","Save"),window.jsCallIos_setItem("qsll_"+e,t))}}console.log("kv::"+e),e.split("___").forEach(o=>{if(0<o.length){let e=o.split("|"),t=e[0],i=e[1];console.log("keyy:"+t+"  index: "+t.indexOf("qsll_")),-1!=t.indexOf("qsll_")&&(o=t.substring(5),console.log("key:"+t+" newKey:"+o+" value:"+i),Laya.LocalStorage.setItem(t,i))}}),this.Init_DataModule(),this.startGame()}}),ac=oc,nc=(ac.loadSceneSubPackName="",ac.loadSceneSubPackSuccFunc=null,class{constructor(){this.nowScenePath="",this.scenePath="",this.sceneZip="",this.progress=0,this.isEcsInit=!1,this.isSceneLoad=!1,this.isNecessaryResLoadOver=!1,this.isAwakeOver=!1,this.sceneProgress=.34,this.necessaryProgress=.34,this.otherProgress=.32,this.delayStartGame=0,this.onStartGame=new yi,this.isLoadFailed=!1,this.isDispose=!1,this.regularClearCD=0}StartGame(){this.isEcsInit||(this.gameElementCreator=new class{constructor(){this.pool=new class{constructor(){this.pools=[]}GetObject(e){return this.pools[e]?0<this.pools[e].size()?this.pools[e].get():this.pools[e].CreatNode():(b.Warn("拿取时 没有这个对象池"+e),null)}PutObjectToPool(e,t){this.pools[e]?this.pools[e].put(t):b.Warn("移除时 没这个对象池"+e)}Creat2DNodePool(e,t,i,o=0,a=!1){let n=new Ai;n.prefab=t,n.parent=i,n.nodeType=Ai.nodeType_Sprite2D,n.usePositionHide=a,n.poolName=e,n.layer=o,this.pools[e]=n}Creat3DNodePool(t,i,o,a=0,n=!1){if(null==this.pools[t]){let e=new Ai;e.sprite3d=i,e.sprite3d.active=!1,e.parent=o,e.nodeType=Ai.nodeType_Sprite3D,e.usePositionHide=n,e.poolName=t,e.layer=a,this.pools[t]=e}}ClearPoolByLayer(e){for(const t in this.pools)if(this.pools.hasOwnProperty(t)){const i=this.pools[t];i.layer==e&&(i.Clear(),delete this.pools[t])}}ClearAll(){for(const e in this.pools)this.pools.hasOwnProperty(e)&&(this.pools[e].Clear(),delete this.pools[e])}RegularClear(){for(const e in this.pools)this.pools.hasOwnProperty(e)&&this.pools[e].RegularClear()}},this.prefabRootDatas=[]}Init(e){this.elementRoot=e}LoadPrefabJsonData(e){var t=e;for(let e=0;e<t.list.length;e++)t.list[e].isPrefab&&(this.prefabRootDatas[t.list[e].name]=t.list[e])}GetPrefabData(e){return this.prefabRootDatas[e]}GetPrefabComponentData(e,t){var i=this.GetPrefabData(e);for(let e=0;e<i.list.length;e++)if(i.list[e].name==t)return i.list[e].component}CreatPre(t,i){let o=[];for(let e=0;e<i;e++)o.push(this.Creat3DRender(t));Laya.timer.once(500,this,function(){for(let e=0;e<i;e++)this.Remove3DRender(o[e],t)})}Creat2DSprite(e){return this.pool.GetObject(e)}Remove2DSprite(e){e.getComponent(Bi).UseDestory()}Creat3DRender(e){return this.pool.GetObject(e)}Remove3DRender(e){null!=e&&null!=e.getComponent(Bi)&&e.getComponent(Bi).UseDestory()}Clear(){this.pool.ClearAll()}RegularClear(){this.pool.RegularClear()}CompileShader(i,e,t,o){let a=new Laya.Camera(0,.1,100),n=[];a.clearFlag=Laya.BaseCamera.CLEARFLAG_SOLIDCOLOR,a.fieldOfView=45,this.elementRoot.addChild(a),a.transform.localPosition=new Laya.Vector3(0,0,0),a.transform.localRotationEuler=new Laya.Vector3(0,0,0);for(let t=0;t<i.length;t++){let e=this.Creat3DRender(i[t]);e.transform.localPosition=new Laya.Vector3(0,0,-2),e.active=!0,n.push(e)}let s=this;Laya.timer.once(1e3*e,this,function(){for(let e=0;e<n.length;e++)n[e].active=!1,s.Remove3DRender(n[e]);a.destroy(),o.call(t)})}},this.elementRoot=new Laya.Sprite3D,this.gameElementCreator.Init(this.elementRoot),this.Init(),this.isEcsInit=!0),this.progress=0,this.isDispose=!1,this.LoadProgress(0),this.LoadNecessaryRes()}Init(){this.world=new class{constructor(){this.idIndex=0,this.entitys=[],this.groups={},this.entitysMap={},this.onAddComponent=new yi,this.onRemoveComponent=new yi,this.onCreatEntity=new yi,this.onDestroyEntity=new yi,N_.ComponentIdInit()}CreatEntity(){let e=new class{constructor(){this._id=0,this.components={},this._componentIdMask=new ht(mt.ComponentCount),this.destoryed=!1}get id(){return this._id}get componentIdMask(){return this._componentIdMask}Init(e,t){this._id=e,this._world=t}AddComponentAdv(t,i){t=t.id;if(null==this.components[t]){let e=i;return e.InitComponentId(t),this._componentIdMask.set(t),this.components[t]=e,this._world.AddToGroup(this,this._componentIdMask),this._world.onAddComponent.Call(this,this.components[t]),e}}GetComponents(){return this.components}AddComponent(t){var i=t.id;if(null==this.components[i]){let e=new t;return e.InitComponentId(i),this._componentIdMask.set(i),this.components[i]=e,this._world.AddToGroup(this,this._componentIdMask),this._world.onAddComponent.Call(this,this.components[i]),e}}GetComponent(e){return this.components[e.id]}RemoveComponent(e){var t,e=e.id;null!=this.components[e]&&(t=mt.CopyToTempBitSet(this._componentIdMask),this._componentIdMask.unset(e),this._world.RemoveFromGroup(this,t,this._componentIdMask),this._world.onRemoveComponent.Call(this,this.components[e]),delete this.components[e])}HasComponent(e){return!!this._componentIdMask.isset(e)}Destory(){if(!this.destoryed){this.destoryed=!0;var t=Object.keys(this.components),i=t.length;for(let e=0;e<i;e++){var o=Number(t[e]),a=mt.CopyToTempBitSet(this._componentIdMask);this._componentIdMask.unset(o),this._world.RemoveFromGroup(this,a,this._componentIdMask),null!=this.components[o]&&this._world.onRemoveComponent.Call(this,this.components[o])}this._world.DestoryEntity(this)}}IsDestory(){return this.destoryed}};return e.Init(this.idIndex,this),this.entitys.push(e),this.entitysMap[this.idIndex]=e,this.onCreatEntity.Call(e),this.idIndex++,e}GetEntityByID(e){return this.entitysMap[e]}GetAllEntity(){let t=[];for(let e=0;e<this.entitys.length;e++)t.push(this.entitys[e]);return t}GetEntitys(t){let i="";mt.tempBitSet.unset();for(let e=0;e<t.length;e++)i+=t[e]+"_",mt.tempBitSet.set(t[e]);if(null==this.groups[i]){let e=new Si;e.Init(mt.tempBitSet,this.entitys),this.groups[i]=e}return this.groups[i].GetEntitys()}GetEntitysByMatcher(t){if(null==this.groups[t.id]){let e=new Si;e.Init(t.mask,this.entitys),this.groups[t.id]=e}return this.groups[t.id].GetEntitys()}DestoryEntity(t){for(let e=0;e<this.entitys.length;e++)if(this.entitys[e].id==t.id){this.entitys.splice(e,1),this.onDestroyEntity.Call(t),delete this.entitysMap[t.id];break}var i=Object.keys(this.groups),o=i.length;for(let e=0;e<o;e++)this.groups[i[e]].Remove(t,t.componentIdMask,mt.emptyBitSet)}GetSingleCompoent(e){var t=e.id;let i=this.GetEntitys([t]);return 0<i.length?i[0].GetComponent(e):null}GetSingleCompoentEntity(e){e=e.id,e=this.GetEntitys([e]);return 0<e.length?e[0]:null}DestoryAllEntitys(){let t=this.GetAllEntity();for(let e=0;e<t.length;e++)t[e].Destory();this.idIndex=0,this.entitys=[],this.groups={},this.entitysMap={}}RemoveFromGroup(t,i,o){var a=Object.keys(this.groups),n=a.length;for(let e=0;e<n;e++)this.groups[a[e]].Remove(t,i,o)}AddToGroup(t,i){var o=Object.keys(this.groups),a=o.length;for(let e=0;e<a;e++)this.groups[o[e]].Add(t,i)}},this.systemMgr=new class{constructor(e){this.systems=[],this.lastPrintStatTs=0,this.world=e,this.world.onAddComponent.AddCallBack(this,this.OnAddComponent),this.world.onRemoveComponent.AddCallBack(this,this.OnRemoveComponent)}AddSystem(e){e.LoadWorld(this.world),this.systems.push(e)}RemoveSystem(t){for(let e=0;e<this.systems.length;e++)this.systems[e].systemName==t&&(this.systems[e].Destroy(),this.systems.splice(e,1))}DestroyAllSystem(){for(let e=0;e<this.systems.length;e++)this.systems[e].Destroy();this.systems=[]}OnAddComponent(t,i){for(let e=0;e<this.systems.length;e++)this.systems[e].OnAddComponent(t,i)}OnRemoveComponent(t,i){for(let e=0;e<this.systems.length;e++)this.systems[e].OnRemoveComponent(t,i)}InitSystems(){for(let e=0;e<this.systems.length;e++)this.systems[e].Init()}UpdateSystems(){for(let e=0;e<this.systems.length;e++)this.systems[e].Update()}LateUpdateSystems(){for(let e=0;e<this.systems.length;e++)this.systems[e].LateUpdate()}FixedUpdateSystems(){Di.PreformanceRecord("Systems",!0);for(let e=0;e<this.systems.length;e++)Di.PreformanceRecord(this.systems[e].systemName,!0),this.systems[e].FixedUpdate(),Di.PreformanceRecord(this.systems[e].systemName,!1);Di.PreformanceRecord("Systems",!1)}}(this.world)}ClearGame(){this.world.DestoryAllEntitys(),this.systemMgr.DestroyAllSystem()}DesoryGame(){this.world.DestoryAllEntitys(),this.systemMgr.DestroyAllSystem(),this.elementRoot.destroy(),this.gameElementCreator.Clear(),this.scene3D&&this.scene3D.destroy()}LoadNecessaryRes(){this.isLoadFailed=!1;let t=this;Laya.timer.frameOnce(2,this,function(){var e;t.isNecessaryResLoadOver?t.LoadOtherRes():0<(e=t.NecessaryRes()).resList.length?K.ResModule().StartLoad(e.resList,t,t.OnNecessaryComplete,t.OnNecessaryRes,t.LoadFailed,"Game"):(t.isNecessaryResLoadOver=!0,t.LoadOtherRes())})}OnNecessaryRes(e){this.LoadProgress(this.necessaryProgress*e)}OnNecessaryComplete(){this.isDispose||this.isLoadFailed||(this.isNecessaryResLoadOver=!0,this.InitNecessaryResPool(),this.LoadOtherRes())}LoadFailed(){b.Warn("加载失败")}LoadOtherRes(){if(!this.isDispose&&!this.isLoadFailed){var e=this.OtherRes();if(0<e.resList.length)K.ResModule().StartLoad(e.resList,this,this.OnOtherResComplete,this.OnOtherRes,this.LoadFailed,"Game");else{let e=this;ac.LoadSubPack_Scene(V.nowScene,function(){e.LoadScene()})}}}OnOtherRes(e){this.LoadProgress(this.necessaryProgress+this.otherProgress*e)}OnOtherResComplete(){if(!this.isDispose&&!this.isLoadFailed){this.InitOtherResPool();let e=this;ac.LoadSubPack_Scene(V.nowScene,function(){e.LoadScene()})}}LoadScene(){this.scenePath=this.GetScenePath();let e=!1;if(this.isSceneLoad?this.nowScenePath!=this.scenePath&&(this.isSceneLoad=!1,e=!0):e=!0,""==this.scenePath&&b.Warn("场景不能为空字符串"),e){null!=this.scene3D&&(this.elementRoot.removeSelf(),this.scene3D.destroy(),this.scene3D=null);let e=new Li;""!=this.sceneZip?e.AddZipPack(this.sceneZip):e.Add3D(this.scenePath),K.ResModule().StartLoad(e.resList,this,this.OnLoadSceneComplete,this.OnLoadScene)}else this.isSceneLoad=!0,this.nowScenePath=this.scenePath,this.InitEcsSystem(),this.systemMgr.InitSystems(),this.onStartGame.Call(),this.Start()}OnLoadScene(e){this.LoadProgress(this.necessaryProgress+this.otherProgress+this.sceneProgress*e)}OnLoadSceneComplete(){if(!this.isDispose){this.isSceneLoad=!0,this.nowScenePath=this.scenePath;let e=K.ResModule().Get3DRes(this.nowScenePath);Ti.InterceptException_SimpleSingleLidy(e),this.root.addChild(e),e.addChild(this.elementRoot),this.scene3D=e,this.OnAllLoadOver()}}OnAllLoadOver(){this.TriggerStartGame()}TriggerStartGame(){let e=this;0<this.delayStartGame?(this.InitEcsSystem(),this.systemMgr.InitSystems(),Laya.timer.once(1e3*this.delayStartGame,this,function(){e.isAwakeOver||(e.isAwakeOver=!0,e.Awake()),e.onStartGame.Call(),e.Start()})):(this.isAwakeOver||(this.isAwakeOver=!0,this.Awake()),this.InitEcsSystem(),this.systemMgr.InitSystems(),this.onStartGame.Call(),this.Start())}Update(){this.systemMgr.UpdateSystems(),this.regularClearCD-=A.TimeDelta,this.regularClearCD<0&&(this.regularClearCD=5,this.gameElementCreator.RegularClear())}LateUpdate(){this.systemMgr.LateUpdateSystems()}FixedUpdate(){this.systemMgr.FixedUpdateSystems()}GetWorld(){return this.world}}),sc=class extends lt{constructor(){super(...arguments),this.systemName="Render3DSystem",this.vec3=new Laya.Vector3,this._vec3=new Laya.Vector3}Init(){console.warn(this.systemName)}Update(){var a,n=this.world.GetEntitys([M.id,B.id]);for(let o=0;o<n.length;o++){let e=n[o],t=e.GetComponent(M),i=e.GetComponent(B);if(t.isInCameraArea=V.IsInCameraArea(t.pos),i.updateTransfrom){if(!k.IsInWebTest&&!k.banHideByCamera&&!i.banCull){if(!t.isInCameraArea){i.visble=!1,i.sp.active=i.render&&i.visble;continue}i.visble||(i.visble=!0)}null!=i.sp&&(this.IsChanged(i.sp.transform.localPosition,t.pos,.01)&&(i.useLerp?i.lerpStart?i.useMoveCom?(a=e.GetComponent(w),Laya.Vector3.scale(a.dir,a.speed,a.vec),this.vec3.setValue(i.sp.transform.localPositionX+a.vec.x*A.LimitTimeDelta*a.speedScale,i.sp.transform.localPositionY+a.vec.y*A.LimitTimeDelta*a.speedScale,i.sp.transform.localPositionZ+a.vec.z*A.LimitTimeDelta*a.speedScale)):Laya.Vector3.lerp(i.sp.transform.localPosition,t.pos,10*A.LimitTimeDelta,this.vec3):(i.lerpStart=!0,this.vec3.setValue(t.pos.x,t.pos.y,t.pos.z)):this.vec3.setValue(t.pos.x,t.pos.y,t.pos.z),i.sp.transform.localPosition=this.vec3),i.updateRotation&&this.IsChanged(i.sp.transform.localRotationEuler,t.rotation,.1)&&(this.vec3.setValue(t.rotation.x,i.useLerp?S.LerpAngle(i.sp.transform.localRotationEulerY,t.rotation.y,20*A.LimitTimeDelta):t.rotation.y,t.rotation.z),i.sp.transform.localRotationEuler=this.vec3),i.updateScale&&this.IsChanged(i.sp.transform.localScale,t.scale,1e-6)&&(this.vec3.setValue(t.scale.x,t.scale.y,t.scale.z),i.sp.transform.localScale=this.vec3),i.sp.active=i.render&&i.visble)}}}FixedUpdate(){}LateUpdate(){}Destroy(){}OnAddComponent(o,a){if(a.componentId==B.id){let t=a,e=this.elementCreator.Creat3DRender(t.spName),i=!1;if(null==e?""!=t.spPath&&(i=!0,e=this.elementCreator.Creat3DRender(N.DefaultSp)):t.isSpLoad=!0,t.sp=e,o.HasComponent(M.id)){let e=o.GetComponent(M);t.sp.transform.localPositionX=e.pos.x,t.sp.transform.localPositionY=e.pos.y,t.sp.transform.localPositionZ=e.pos.z,t.sp.transform.localRotationEulerX=e.rotation.x,t.sp.transform.localRotationEulerY=e.rotation.y,t.sp.transform.localRotationEulerZ=e.rotation.z,t.sp.transform.localScaleX=e.scale.x,t.sp.transform.localScaleY=e.scale.y,t.sp.transform.localScaleZ=e.scale.z,e.isInCameraArea=V.IsInCameraArea(e.pos),t.sp.active=!0}if(t.saveoldMat)if(t.isSkinMat){let e=t.sp.getChildByName("Body");e=e||t.sp.getChildByName("Model").getChildByName("Body"),t.matRender=e.skinnedMeshRenderer,t.oldMat=t.matRender.sharedMaterial,t.matId=t.oldMat.id}else t.isChildMat?t.matRender=t.sp.getChildByName("Body").meshRenderer:t.matRender=t.sp.meshRenderer,t.oldMat=t.matRender.sharedMaterial,t.matId=t.oldMat.id;if(i){let e=new Li;e.Add3D(t.spPath),K.ResModule().SynLoad(e.resList,this,function(){var e;null!=t&&null!=t.sp&&(O.Creat3DNodePoolByPath(t.spName,t.spPath),(e=q.EcsGameMgr.nowGame.gameElementCreator.Creat3DRender(t.spName))&&(t.sp.parent.addChild(e),q.EcsGameMgr.nowGame.gameElementCreator.Remove3DRender(t.sp),t.sp=e,e=o.GetComponent(M),t.sp.transform.localPositionX=e.pos.x,t.sp.transform.localPositionY=e.pos.y,t.sp.transform.localPositionZ=e.pos.z,t.sp.transform.localRotationEulerX=e.rotation.x,t.sp.transform.localRotationEulerY=e.rotation.y,t.sp.transform.localRotationEulerZ=e.rotation.z,t.sp.transform.localScaleX=e.scale.x,t.sp.transform.localScaleY=e.scale.y,t.sp.transform.localScaleZ=e.scale.z,t.sp.active=t.render,t.isSpLoad=!0,b.Warn("3d资源动态加载完毕 spPath:",t.spPath,"|spName:",t.spName)))})}}}OnRemoveComponent(e,t){if(t.componentId==B.id){let e=t;e.saveoldMat&&e.matRender&&e.matRender._sharedMaterials&&(e.matRender.sharedMaterial=e.oldMat),this.elementCreator.Remove3DRender(e.sp),e.sp=null}}IsChanged(e,t,i=.01){return this._vec3.setValue(e.x-t.x,e.y-t.y,e.z-t.z),this._vec3.x*this._vec3.x>i||this._vec3.y*this._vec3.y>i||this._vec3.z*this._vec3.z>i}},lc=class extends Laya.Script{constructor(){super(...arguments),this.duration=.2,this.dtCost=.1,this.shakeDur=.01,this.shakeStrengthX=.1,this.shakeStrengthY=.1,this.shakeStrengthZ=.1,this.nodeInitialPos=new Laya.Vector3(0,0,0),this.isTweenShakisTweenShake=!1,this.noEffectByOther=!1,this.shakeTime=0}Shake(){this.isTweenShakisTweenShake||(this.nodeInitialPos=this.owner.transform.localPosition.clone()),this.isTweenShakisTweenShake=!0,this.shakeTime=0,this.dtCost=0}BigShake(e=.1,t=.5){this.duration=t,this.dtCost=.1,this.shakeDur=.01,this.shakeStrengthX=e,this.shakeStrengthY=e,this.shakeStrengthZ=e,this.Shake()}onUpdate(){var e,t,i;this.isTweenShakisTweenShake&&(this.shakeTime+=A.TimeDelta,this.dtCost+=A.TimeDelta,this.shakeTime>this.shakeDur&&(i=1-this.dtCost/this.duration,e=this.getRandomStrength(-this.shakeStrengthX,this.shakeStrengthX)*i,t=this.getRandomStrength(-this.shakeStrengthY,this.shakeStrengthY)*i,i=this.getRandomStrength(-this.shakeStrengthZ,this.shakeStrengthZ)*i,this.owner.transform.localPosition=new Laya.Vector3(this.nodeInitialPos.x+e,this.nodeInitialPos.y+t,this.nodeInitialPos.z+i),this.shakeTime=0),this.dtCost>=this.duration&&(this.isTweenShakisTweenShake=!1,this.noEffectByOther=!1,this.owner.transform.localPosition=new Laya.Vector3(this.nodeInitialPos.x,this.nodeInitialPos.y,this.nodeInitialPos.z)))}getRandomStrength(e,t){return e+(t-e)*Math.random()}},rc=class{static hexTocolor(e,t=1){var i=e.toLowerCase();if(i&&this.reg.test(i)){if(4===i.length){for(var o="#",a=1;a<4;a+=1)o+=i.slice(a,a+1).concat(i.slice(a,a+1));i=o}for(var n=[],a=1;a<7;a+=2)n.push(parseInt("0x"+i.slice(a,a+2)));return 1==t?new Laya.Vector4(Number(n[0])/255,Number(n[1])/255,Number(n[2])/255,1):new Laya.Vector4(Number(n[0])/255,Number(n[1])/255,Number(n[2])/255,t/255)}return new Laya.Vector4(1,1,1,1)}static hexToVec3(e){e=this.hexTocolor(e);return new Laya.Vector3(e.x,e.y,e.z)}},hc=(rc.reg=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/,class extends e{constructor(){super(...arguments),this.shakeValue=.1,this.shakeTime=.5}}),mc=class extends lt{constructor(){super(...arguments),this.systemName="CameraSystem",this.vec=new Laya.Vector3(0,0,0),this.grounp=new dt([$i.id]),this.dis=-8,this.xAngle=25,this.height=1.1,this.intervals=0}Init(){}Update(){var a,n=this.world.GetEntitysByMatcher(this.grounp);for(let e=0;e<n.length;e++){let t=n[e],i=t.GetComponent($i),o=t.GetComponent(M);if(V.nowCameraPos.x=o.pos.x,V.nowCameraPos.y=o.pos.y,V.nowCameraPos.z=o.pos.z,i.useShake&&(i.useShake=!1,i.camera.getComponent(lc).BigShake(i.shakeValue,i.shakeTime)),i.state==$i.state_Sniper){i.camera.orthographicVerticalSize+=.6,28<i.camera.orthographicVerticalSize&&(i.camera.orthographicVerticalSize=28,this.intervals=.5);let e=this.world.GetEntityByID(i.followTargetId);e&&(a=e.GetComponent(M),this.vec.x=a.pos.x,this.vec.z=a.pos.z,this.vec.y=0,Laya.Vector3.lerp(o.pos,this.vec,5*A.TimeDeltaNoScale,o.pos),i.freshPos&&(i.freshPos=!1,o.pos.x=a.pos.x,o.pos.z=a.pos.z,t.GetComponent(B).sp.transform.localPositionX=a.pos.x,t.GetComponent(B).sp.transform.localPositionZ=a.pos.z,t.GetComponent(B).sp.transform.localRotationEulerY=45))}if(i.state==$i.state_InGame){0<this.intervals&&(this.intervals-=A.LimitTimeDelta),this.intervals<=0&&(i.camera.orthographicVerticalSize>i.orthographicVerticalSize?(--i.camera.orthographicVerticalSize,i.camera.orthographicVerticalSize<i.orthographicVerticalSize&&(V.CameraRange=20,i.camera.orthographicVerticalSize=i.orthographicVerticalSize)):i.camera.orthographicVerticalSize<i.orthographicVerticalSize&&(i.camera.orthographicVerticalSize+=1,i.camera.orthographicVerticalSize>=i.orthographicVerticalSize&&(i.camera.orthographicVerticalSize=i.orthographicVerticalSize)));let e=this.world.GetEntityByID(i.followTargetId);e&&(a=e.GetComponent(M),this.vec.x=a.pos.x,this.vec.z=a.pos.z,this.vec.y=0,Laya.Vector3.lerp(o.pos,this.vec,5*A.TimeDeltaNoScale,o.pos),i.freshPos&&(i.freshPos=!1,o.pos.x=a.pos.x,o.pos.z=a.pos.z,t.GetComponent(B).sp.transform.localPositionX=a.pos.x,t.GetComponent(B).sp.transform.localPositionZ=a.pos.z,t.GetComponent(B).sp.transform.localRotationEulerY=45)),o.rotation.x=45,o.rotation.y=45}if(i.state==$i.state_Win){let e=this.world.GetEntityByID(i.followTargetId);e&&(s=e.GetComponent(M),this.vec.x=s.pos.x,this.vec.z=s.pos.z,this.vec.y=0,o.pos.x=s.pos.x,o.pos.z=s.pos.z,o.pos.y=.82,i.cameraRoot.localPositionZ=S.Lerp(i.cameraRoot.localPositionZ,-2.35,1.5*A.TimeDeltaNoScale),i.cameraRoot.localPositionX=S.Lerp(i.cameraRoot.localPositionX,-.71,1.5*A.TimeDeltaNoScale),o.rotation.x=S.LerpAngle(o.rotation.x,15.2,2*A.TimeDeltaNoScale),o.rotation.y=S.LerpAngle(o.rotation.y,s.rotation.y+180-18,2*A.TimeDeltaNoScale))}if("Sp2"==i.state){let e=this.world.GetEntityByID(i.followTargetId);if(e){var s=e.GetComponent(M);if(this.vec.x=s.pos.x,this.vec.z=s.pos.z,this.vec.y=0,o.pos.x=s.pos.x,o.pos.z=s.pos.z,o.pos.y=this.height,i.cameraRoot.localPositionZ=S.Lerp(i.cameraRoot.localPositionZ,this.dis,1.5*A.TimeDeltaNoScale),o.rotation.x=S.LerpAngle(o.rotation.x,this.xAngle,2*A.TimeDeltaNoScale),i.followAngle){let e=new Laya.Vector2(0,0);e.y=K.InputModule().GetAxisValue(Ci.VerticalAxis),e.x=K.InputModule().GetAxisValue(Ci.HorizontalAxis);var l=S.VecToAngle(e);(0==e.x&&0==e.y||-110<=l&&l<=110)&&(o.rotation.y=S.LerpAngle(o.rotation.y,s.rotation.y,1.6*A.TimeDeltaNoScale))}else o.rotation.y=S.LerpAngle(o.rotation.y,i.angle,5*A.TimeDeltaNoScale)}}}}SetLayer(t,i){t.layer=i;for(let e=0;e<t.numChildren;e++)this.SetLayer(t.getChildAt(e),i)}FixedUpdate(){}LateUpdate(){}Destroy(){}OnAddComponent(e,o){if(o.componentId==$i.id){let t=o,i=e.GetComponent(B);if(t.cameraRoot=i.sp.getChildByName("Camera").transform,t.camera=i.sp.getChildByName("Camera").getChildByName("Camera"),t.camera.fieldOfView=t.feildOfView,t.state==$i.state_InGame&&("Normal"!=V.useSpCamera?(t.camera.orthographic=!1,t.state="Sp2","SpF"==V.useSpCamera&&(t.followAngle=!0),"SpNoF"==V.useSpCamera&&(t.followAngle=!1)):(t.camera.orthographic=!0,t.camera.orthographicVerticalSize=5,t.orthographicVerticalSize=5)),q.EcsGameMgr.nowGame.scene3D.getChildByName("BgColor")&&(a=q.EcsGameMgr.nowGame.scene3D.getChildByName("BgColor").getChildAt(0).name,t.camera.clearColor=rc.hexTocolor(a)),t.state,null==t.camera.getComponent(lc)&&t.camera.addComponent(lc),""!=t.bgPath){b.Warn(t.bgPath);let e=new Li;e.AddTEXTURE2D(t.bgPath),K.ResModule().StartLoad(e.resList,this,function(){let e=i.sp.getChildByName("Camera").getChildByName("Quad");e.meshRenderer.material.albedoTexture=K.ResModule().GetTex2d(t.bgPath),b.Warn(T.IsIPhoneXScreen),T.IsIPhoneXScreen&&(e.transform.localScaleX=31.9)})}}if(o.componentId==hc.id){var a=e.GetComponent(M);if(V.IsInCameraArea(a.pos)){let e=this.world.GetSingleCompoent($i),t=o;e.useShake?e.shakeValue<t.shakeValue&&(e.shakeValue=t.shakeValue,e.shakeTime=t.shakeTime):(e.useShake=!0,e.shakeValue=t.shakeValue,e.shakeTime=t.shakeTime)}}}OnRemoveComponent(e,t){}},dc=class extends e{constructor(){super(...arguments),this.showSound="",this.destorySound="",this.usePos=!0,this.delay=0,this.optimize=!0}},cc=class extends lt{constructor(){super(...arguments),this.systemName="SoundSystem",this.soundList=[],this.time=0}Init(){}Update(){this.time+=A.TimeDeltaNoScale,1e4<this.time&&(this.time=0)}FixedUpdate(){}LateUpdate(){}Destroy(){}OnAddComponent(i,o){if(o.componentId==dc.id){let e=o,t=.1;V.IsGameMode_Nian()&&("Shot"==e.showSound&&(t=.2),"HitSound"==e.showSound&&(t=.2),"HitChest"==e.showSound&&(t=.2)),""==e.showSound||this.soundList[e.showSound]&&Math.abs(this.time-this.soundList[e.showSound])<t||(e.usePos?i.GetComponent(M).isInCameraArea&&(o=x.GetSound2(e.showSound),e.optimize?K.AudioModule().OptimizePlayOnce(o):K.AudioModule().CanSoundPlay(o,100)&&K.AudioModule().PlayOnce(o),this.soundList[e.showSound]=this.time):(i=x.GetSound2(e.showSound),e.optimize?K.AudioModule().OptimizePlayOnce(i):K.AudioModule().CanSoundPlay(i,100)&&K.AudioModule().PlayOnce(i),this.soundList[e.showSound]=this.time))}}OnRemoveComponent(e,t){}},uc=class{static EnterState(e,t){let i="Hited";t.HasComponent(ut.id)&&(i=V.GetZombieRandomHitAnim()),t.GetComponent(xt).SetAnimation(i,.1),t.GetComponent(w).banDirCtrl+=1,t.GetComponent(w).banDirRotationCtrl+=1,t.GetComponent(F).t1=1}static StateUpdate(e,t,i){let o=t.GetComponent(R),a=(i*=o.GetAnyScale(),t.GetComponent(F));a.time-=i,a.t1--,a.t1<0?t.GetComponent(xt).animatorSpeedScale=o.GetAnyScale():t.GetComponent(xt).animatorSpeedScale=1,a.time<0&&(a.ChangeState(Mf.StateName),o.GetIsDizz()&&a.ChangeState(si.StateName))}static StateExit(e,t){--t.GetComponent(w).banDirCtrl,--t.GetComponent(w).banDirRotationCtrl}},pc=(uc.StateName="Hited",class{static EnterState(e,t){t.GetComponent(xt).SetAnimation("Spin2",0),t.GetComponent(w).yRotationFollow=!1;let i=t.GetComponent(F),o=(i.step=0,t.GetComponent(R));o.banAtt+=1,o.attSoundIsPlay=!0;t=t.GetComponent(U);i.str1=t.bullet0,i.t5=t.bullet0Dis,i.t6=t.bullet0height}static IsCanShot(e){e=e.GetComponent(U);return e.shotCDTime<=0&&e.bulletLoadTime<=0}static StateUpdate(e,t,i){let o=t.GetComponent(M),a=t.GetComponent(R),n=(o.rotation.y+=800*i*a.GetAnyScale(),t.GetComponent(U)),s=t.GetComponent(F);n.gunMode&&this.IsCanShot(t)&&(V.attFun(t,t.GetComponent(M).rotation.y,!0,!1),t.GetComponent(R).superArmor+=s.r4,s.t7=s.r4)}static StateExit(e,t){t.GetComponent(w).yRotationFollow=!0;let i=t.GetComponent(U),o=t.GetComponent(R);--o.banAtt,o.attSoundIsPlay=!1,i.singleShotLoading?i.nowBulletCount<i.bulletCount&&((i.bulletLoadTime=0)==i.nowBulletCount?(t=i.bulletLoadCD/i.bulletCount,i.singleShotLoadingTime=t,i.singleShotLoadingCDTime=0):(i.singleShotLoadingTime=0,i.singleShotLoadingCDTime=i.singleShotLoadingCD)):i.nowBulletCount<=0&&(i.bulletLoadTime=i.bulletLoadCD)}}),gc=(pc.StateName="SpinAtt",pc.bulletScale=new Laya.Vector3(1,1,1),pc.color=new Laya.Vector4(1,1,1,1),class{static EnterState(e,t){t.GetComponent(xt).SetAnimation("Roll",.1);let i=t.GetComponent(w);i.banDirCtrl+=1,i.banDirRotationCtrl+=1}static StateUpdate(e,t,i){let o=t.GetComponent(R);t.GetComponent(xt).animatorSpeedScale=2*o.GetAnyScale()}static StateExit(e,t){t.GetComponent(xt).animatorSpeedScale=1;let i=t.GetComponent(w);--i.banDirCtrl,--i.banDirRotationCtrl}}),fc=(gc.StateName="Roll",class{static EnterState(e,t){t.GetComponent(xt).SetAnimation("Idle")}static StateUpdate(e,t,i){}static StateExit(e,t){}}),_c=(fc.StateName="ChestIdle",class{static EnterState(e,t){t.GetComponent(xt).SetAnimation("HitBox",0),t.GetComponent(F).time=.15}static StateUpdate(e,t,i){let o=t.GetComponent(F);o.time-=i,o.time<0&&o.ChangeState(fc.StateName)}static StateExit(e,t){}}),Ic=(_c.StateName="ChestHited",class{static EnterState(e,t){var i;t.GetComponent(xt).SetAnimation("OpenBox",0),t.RemoveComponent(D),t.RemoveComponent(Ft),t.GetComponent(v).enable=!1,t.HasComponent(y.id)&&"BaoZhu"==t.GetComponent(y).itemID&&(i=t.GetComponent(M),t.GetComponent(B).banCull=!0,t.GetComponent(B).render=!1,O.CreatPrefabEntityUsePos(N.Effect_FireWork,new Laya.Vector3(i.pos.x,i.pos.y+5,i.pos.z)),O.CreatPrefabEntityUsePos(N.Effect_NianExpo,new Laya.Vector3(i.pos.x,i.pos.y+1,i.pos.z)))}static StateUpdate(e,t,i){let o=t.GetComponent(M),a=(o.isInCameraArea?(t.GetComponent(B).updateTransfrom=!0,t.GetComponent(B).useLerp=!0):(t.GetComponent(B).updateTransfrom=!1,t.GetComponent(B).useLerp=!1),t.GetComponent(F));a.time-=i,a.time<0&&(o.pos.y-=i,o.pos.y<-2&&(V.canCreatChestPos.push(o.pos),t.Destory()))}static StateExit(e,t){}}),Cc=(Ic.StateName="ChestOpen",class{static EnterState(e,t){let i=e.GetEntityByID(t.GetComponent(F).entity1Id);i.GetComponent(gi).isPathing||(e=i.GetComponent(v),e=(t=V.GetRoundTile(e.nowMapPos.x,e.nowMapPos.y))[Math.floor(q.Random()*t.length)],t=-yt.tileSize*e.x-yt.tileSize*q.Random(),e=yt.tileSize*e.y+yt.tileSize*q.Random(),i.GetComponent(gi).SetNewTarget(t,0,e))}static StateUpdate(e,t,i){let o=e.GetEntityByID(t.GetComponent(F).entity1Id),a=o.GetComponent(gi),n=t.GetComponent(F);if(!a.isPathing&&(n.t1-=i,n.t1<0)){n.t1=.3;let e=360*q.Random(),t=S.AngleToDir(e),i=o.GetComponent(w);i.dir.x=t.x,i.dir.z=t.y}}static StateExit(e,t){}}),Gc=(Cc.StateName="State_AIMove",class{static EnterState(i,o){let a=i.GetEntityByID(o.GetComponent(F).entity1Id),n=a.GetComponent(Et),s=i.GetEntityByID(n.targetItem);if(s){let e=a.GetComponent(gi),t=!1;if(n.hasGetItemPath?e.isPathing||(o=s.GetComponent(M),i=a.GetComponent(M),4<Laya.Vector3.distance(o.pos,i.pos)&&(t=!0)):t=!0,t){let e=s.GetComponent(M),t=2*q.Random()+2,i=0,o=(i=q.Random()<.5?-t:t,0);o=q.Random()<.5?-t:t,""!=s.GetComponent(y).addBuff&&(i=0,o=0),a.GetComponent(gi).SetNewTarget(e.pos.x+i,0,e.pos.z+o),n.hasGetItemPath=!0}}}static StateUpdate(t,e,i){let o=t.GetEntityByID(e.GetComponent(F).entity1Id),a=o.GetComponent(Et),n=t.GetEntityByID(a.targetItem);if(n){e=n.GetComponent(y);if(e.type==y.Type_Box&&0<e.hp){var t=n.GetComponent(M),s=o.GetComponent(M),l=Laya.Vector3.distance(t.pos,s.pos);if(a.attTime-=i,l<=4){o.GetComponent(w).dir2FollowDir=!1,this.vecCache.x=t.pos.x-s.pos.x,this.vecCache.z=t.pos.z-s.pos.z,Laya.Vector3.normalize(this.vecCache,this.vecCache);let e=o.GetComponent(w);if(e.dir2.x=this.vecCache.x,e.dir2.y=this.vecCache.y,e.dir2.z=this.vecCache.z,a.attTime<=0&&(a.attTime=a.attTimeCd,a.triggerAtt=!0,a.triggerAttTime=a.attTimeRangeMin+(a.attTimeRangeMax-a.attTimeRangeMin)*q.Random(),o.GetComponent(U).isSniperRifle)){let e=o.GetComponent(w);e.ChangeBanDir(1),e.vec=new Laya.Vector3(0,0,0),o.GetComponent(U).sniperRifleattRange=o.GetComponent(U).attackRange}}}if(e.type==y.Type_WallBox&&0!=e.wallLeftTime){a.attTime-=i;l=n.GetComponent(M),t=o.GetComponent(M);if(Laya.Vector3.distance(l.pos,t.pos)<=4){o.GetComponent(w).dir2FollowDir=!1,this.vecCache.x=l.pos.x-t.pos.x,this.vecCache.z=l.pos.z-t.pos.z,Laya.Vector3.normalize(this.vecCache,this.vecCache);let e=o.GetComponent(w);if(e.dir2.x=this.vecCache.x,e.dir2.y=this.vecCache.y,e.dir2.z=this.vecCache.z,a.attTime<=0&&(a.attTime=a.attTimeCd,a.triggerAtt=!0,a.triggerAttTime=a.attTimeRangeMin+(a.attTimeRangeMax-a.attTimeRangeMin)*q.Random(),o.GetComponent(U).isSniperRifle)){let e=o.GetComponent(w);e.ChangeBanDir(1),e.vec=new Laya.Vector3(0,0,0),o.GetComponent(U).sniperRifleattRange=o.GetComponent(U).attackRange}}}}}static StateExit(e,t){}}),Sc=(Gc.StateName="State_AIGetItem",Gc.vecCache=new Laya.Vector3(0,0,0),class{static EnterState(e,t){}static StateUpdate(a,n,t){let s=a.GetEntityByID(n.GetComponent(F).entity1Id),l=s.GetComponent(Et),e=a.GetEntityByID(l.targetEnemy);if(e){var n=e.GetComponent(M),a=s.GetComponent(M),i=(s.GetComponent(R),e.GetComponent(R));if(l.searchEnemyTime-=t,l.attTime-=t,l.searchEnemyTime<0&&(l.searchEnemyTime=l.attPathTime,m=s.GetComponent(U).attackRange,m=q.Random()*(m-2)+2,h=S.AngleToDir(180*q.Random()),s.GetComponent(gi).SetNewTarget(n.pos.x+h.x+m,0,n.pos.z+h.y+m)),0<i.hp){if(Laya.Vector3.distance(n.pos,a.pos)<=l.triggerAttRange){let o=[];if(s.HasComponent(L.id)){var r=s.GetComponent(L);for(let e=0;e<r.skillList.length;e++)r.skillList[e].cdTime<=0&&o.push(r.skillList[e].skillID)}if(0<o.length&&(l.useSkillTime-=t,l.useSkillTime<0&&!V.aiUseSkillWithMe)){let e=s.GetComponent(L),t=Math.floor(q.Random()*o.length),i=(e.triggerSkllId=o[t],l.useSkillTime=l.skillTimeRangeMin+(l.skillTimeRangeMax-l.skillTimeRangeMin)*q.Random(),s.GetComponent(gi).isArrive=!0,s.GetComponent(w));this.vec2.x=n.pos.x-a.pos.x,this.vec2.y=n.pos.z-a.pos.z;var h=S.VecToAngle(this.vec2),m=(h+=-l.skillOffset+2*l.skillOffset*q.Random(),S.AngleToDir(h));i.dir.x=m.x,i.dir.z=m.y}if(l.attTime<=0&&(l.attTime=l.attTimeCd,l.triggerAtt=!0,l.triggerAttTime=l.attTimeRangeMin+(l.attTimeRangeMax-l.attTimeRangeMin)*q.Random(),l.randomShootingAngle=-l.randomShootingAngleRange+2*l.randomShootingAngleRange*q.Random(),s.GetComponent(U).isSniperRifle)){let e=s.GetComponent(w);e.ChangeBanDir(1),e.vec=new Laya.Vector3(0,0,0),s.GetComponent(U).sniperRifleattRange=s.GetComponent(U).attackRange}}else s.GetComponent(F).nowState==ui.StateName||s.GetComponent(gi).isPathing||(i=S.AngleToDir(180*q.Random()),s.GetComponent(gi).SetNewTarget(n.pos.x+i.x,0,n.pos.z+i.y));if(s.GetComponent(F).nowState==ui.StateName){s.GetComponent(gi).isArrive=!0;let e=s.GetComponent(w);this.vec2.x=n.pos.x-a.pos.x,this.vec2.y=n.pos.z-a.pos.z;h=S.VecToAngle(this.vec2),m=(this.vec2.x=e.dir.x,this.vec2.y=e.dir.z,S.VecToAngle(this.vec2)),m=S.MoveTowardsAngle(m,h,l.attRotateSpeed*t),i=S.AngleToDir(m);e.dir.x=i.x,e.dir.z=i.y}}}}static StateExit(e,t){}}),yc=(Sc.StateName="State_AIFight",Sc.vec2=new Laya.Vector2(0,0),class{static EnterState(e,t){let i=e.GetEntityByID(t.GetComponent(F).entity1Id).GetComponent(R);var o;0<i.upgRadeList.length&&(e=i.upgRadeList[0].split("|"),o=Math.floor(q.Random()*e.length),i.chooseUpGrade=e[o]),t.GetComponent(F).ChangeState(Dc.StateName)}static StateUpdate(e,t,i){}static StateExit(e,t){}}),wc=(yc.StateName="State_AIUpgrade",class{static EnterState(i,o){let a=i.GetEntityByID(o.GetComponent(F).entity1Id),e=a.GetComponent(Et),n=a.GetComponent(gi);if(q.Random()<e.escapNappChance)return n.isArrive=!0,n.needFindPath=!1,a.GetComponent(w).dir.x=0,void(a.GetComponent(w).dir.z=0);o=a.GetComponent(M);if(e.nowFogDir>V.fogRange-5){let e=new Laya.Vector3(V.fogPos.x-o.pos.x,0,V.fogPos.z-o.pos.z);Laya.Vector3.normalize(e,e),Laya.Vector3.scale(e,20*q.Random(),e),e.x=o.pos.x+e.x,e.z=o.pos.z+e.z,a.GetComponent(gi).SetNewTarget(e.x,0,e.z)}else{let t=i.GetEntityByID(e.targetEnemy);if(t){let e=a.GetComponent(w);if(a.GetComponent(v).isHitWall){let e=new Laya.Vector3(V.fogPos.x-o.pos.x,0,V.fogPos.z-o.pos.z);Laya.Vector3.normalize(e,e),Laya.Vector3.scale(e,20*q.Random(),e),e.x=o.pos.x+e.x,e.z=o.pos.z+e.z,a.GetComponent(gi).SetNewTarget(e.x,0,e.z)}else{n.isArrive=!0,n.isPathing=!1;i=t.GetComponent(M),o=new Laya.Vector3(o.pos.x-i.pos.x,0,o.pos.z-i.pos.z);Laya.Vector3.normalize(o,o),e.dir.x=o.x,e.dir.z=o.z}}}}static StateUpdate(e,t,i){let o=e.GetEntityByID(t.GetComponent(F).entity1Id),a=o.GetComponent(Et),n=e.GetEntityByID(a.targetEnemy);if(n){var t=n.GetComponent(R),e=n.GetComponent(M),s=o.GetComponent(M);if(a.attTime-=i,0<t.hp&&Laya.Vector3.distance(e.pos,s.pos)<=a.triggerAttRange&&a.attTime<=0&&(a.attTime=a.attTimeCd,a.triggerAttTime=a.attTimeRangeMin+(a.attTimeRangeMax-a.attTimeRangeMin)*q.Random(),a.randomShootingAngle=-a.randomShootingAngleRange+2*a.randomShootingAngleRange*q.Random(),a.triggerAtt=!0,o.GetComponent(U).isSniperRifle)){let e=o.GetComponent(w);e.ChangeBanDir(1),e.vec=new Laya.Vector3(0,0,0),o.GetComponent(U).sniperRifleattRange=o.GetComponent(U).attackRange}}}static StateExit(e,t){}});wc.StateName="State_Escape";var vc=class{static BuffInit(e,t,i,o){o?o.buffKeepTime>i.buffKeepTime&&(i.buffKeepTime=o.buffKeepTime):(i.t1=0,i.t2=0);let a=t.GetComponent(M),n=O.CreatPrefabEntityUsePos(N.Effect_EatMashRoomEffect,new Laya.Vector3(a.pos.x,a.pos.y,a.pos.z));n.GetComponent(Mt).followTargetId=t.id,n.GetComponent(M).SetScale(a.scale.x,a.scale.y,a.scale.z)}static BuffUpdate(e,t,i,o){i.t1<5&&(i.t2-=o,i.t2<0&&(1==t.GetComponent(R).sizeScale?(o=i.f1,t.GetComponent(R).sizeScale=o):t.GetComponent(R).sizeScale=1,i.t2=.1,i.t1++),5<=i.t1&&(o=i.f1,t.GetComponent(R).sizeScale=o))}static BuffDispose(e,t,i,o){t.GetComponent(R).sizeScale=1}static HitedBuffDeal(e,t,i,o){}static HitBuffDeal(e,t,i,o){}},Dc=(vc.BuffName="Bigger",0,class{static EnterState(t,e){let i=t.GetEntityByID(e.GetComponent(F).entity1Id),o=i.GetComponent(R),a=i.GetComponent(v),n=i.GetComponent(M),s=e.GetComponent(F),l=V.GetNestItem(n.pos,a.nowMapPos.x,a.nowMapPos.y,10),r=i.GetComponent(Et),h=V.GetNestUnit(n.pos,a.nowMapPos.x,a.nowMapPos.y,10,i.id),m=V.GetFogDis(n.pos),d=(r.nowFogDir=m,Cc.StateName);if(-1!=l){let e=t.GetEntityByID(l);e&&e.GetComponent(y).addBuff==vc.BuffName&&(h=-1)}if(-1!=h){r.targetEnemy=h;let e=t.GetEntityByID(h);if(d=(i.GetComponent(R).hp<r.escapHp&&V.playerCounts>r.mustFightCount?wc:Sc).StateName,e.HasComponent(L.id)){var c=e.GetComponent(L).skillList;for(let e=0;e<c.length;e++)c[e].isSklling&&(d=wc.StateName)}}else r.targetEnemy=-1,d=-1!=l?(l!=r.targetItem&&(r.targetItem=l,r.hasGetItemPath=!1),Gc.StateName):Cc.StateName;if(r.eatBuffItemFirst&&-1!=l){let e=t.GetEntityByID(l);e&&e.GetComponent(y).type==y.Type_Eat&&(l!=r.targetItem&&(r.targetItem=l,r.hasGetItemPath=!1),d=Gc.StateName)}0<o.upgRadeList.length&&(d=yc.StateName),(d=m>V.fogRange?wc.StateName:d)==Cc.StateName&&s.preState==Gc.StateName&&(r.targetItem=-1,r.hasGetItemPath=!1,i.GetComponent(gi).isPathing=!1),d==Gc.StateName&&s.preState!=Gc.StateName&&(r.hasGetItemPath=!1),s.ChangeState(d)}static StateUpdate(e,t,i){}static StateExit(e,t){}}),Uc=(Dc.StateName="State_AIThink",class{static EnterState(e,t){t.GetComponent(xt).SetAnimation("Ready",.1),t.GetComponent(w).banDirCtrl+=1;var i=new Laya.Vector3(t.GetComponent(M).pos.x,10,t.GetComponent(M).pos.z),i=O.CreatPrefabEntityUsePos(N.DropBox,i);t.GetComponent(F).t1=i.id,t.GetComponent(F).t2=0,t.GetComponent(F).time=4.5,t.GetComponent(M).pos.y=1e3,t.GetComponent(B).useLerp=!1,t.GetComponent(D).banHud=!0,t.HasComponent(Ft.id)&&(t.GetComponent(Ft).ban=!0)}static StateUpdate(t,i,o){let a=i.GetComponent(F);if(a.time-=o,0==a.t2){let e=t.GetEntityByID(a.t1).GetComponent(M);e.pos.y-=10*o,e.pos.y<-1&&(e.pos.y=0,a.t2=1,a.t3=.5,e.isInCameraArea&&(t.GetSingleCompoent($i).useShake=!0,t.GetSingleCompoent($i).shakeValue=.1,i.GetComponent(M).isInCameraArea&&K.AudioModule().OptimizePlayOnce(x.GetSound2("HitGround"))))}if(1==a.t2&&(a.t3-=o,a.t3<0)){let e=t.GetEntityByID(a.t1);i.GetComponent(M).pos.y=0,e.GetComponent(xt).SetAnimation("OpenDropBox"),O.CreatPrefabEntityUsePos(N.Effect_ReadyEffect,e.GetComponent(M).pos),a.t2=2,i.GetComponent(D).banHud=!1,i.HasComponent(Ft.id)&&(i.GetComponent(Ft).ban=!1)}a.time<0&&(i.GetComponent(B).useLerp=!0,--i.GetComponent(w).banDirCtrl,a.nowState=Mf.StateName)}static StateExit(e,t){let i=t.GetComponent(w);0<i.banDirCtrl&&(t.GetComponent(B).useLerp=!0,i.banDirCtrl=0)}}),Lc=(Uc.StateName="Ready",class{static EnterState(e,t){t.GetComponent(xt).SetAnimation("dagger_Att2",.1),t.GetComponent(xt).animatorSpeedScale=1,t.GetComponent(F).time=.5,console.warn("释放技能状态")}static StateUpdate(e,t,i){let o=t.GetComponent(F);o.time-=i,o.time<0&&(console.warn("转换状态到站立"),o.ChangeState(Mf.StateName))}static StateExit(e,t){console.warn("转换状态到站立退出状态")}}),Bc=(Lc.StateName="Skill1",class{static EnterState(e,t){t.GetComponent(xt).SetAnimation("UseSkill",.1),t.GetComponent(xt).animatorSpeedScale=1}static StateUpdate(e,t,i){}static StateExit(e,t){}}),bc=(Bc.StateName="Skill2",class{static EnterState(e,t){t.GetComponent(xt).SetAnimation("Jump",.1),t.GetComponent(xt).animatorSpeedScale=1,t.GetComponent(R).invincible+=1}static StateUpdate(e,t,i){}static StateExit(e,t){--t.GetComponent(R).invincible}}),Ac=(bc.StateName="Jump",class{static EnterState(e,t){t.GetComponent(xt).SetAnimation("Victory"),t.GetComponent(w).banDirCtrl+=1,t.GetComponent(w).banDirRotationCtrl+=1,t.GetComponent(w).vec.x=0,t.GetComponent(w).vec.z=0,t.GetComponent(F).t1=.1,t.HasComponent(Et.id)&&(t.GetComponent(Et).destory=!0,t.GetComponent(gi).enable=!1)}static StateUpdate(e,t,i){0<t.GetComponent(F).t1&&(t.GetComponent(F).t1-=i,t.GetComponent(F).t1<=0&&(t.GetComponent(xt).SetAnimation("Victory"),t.GetComponent(xt).nowClipName=""))}static StateExit(e,t){--t.GetComponent(w).banDirCtrl,--t.GetComponent(w).banDirRotationCtrl}}),xc=(Ac.StateName="Victory",class{static EnterState(e,t){t.GetComponent(xt).SetAnimation("Crying"),t.GetComponent(w).speedScale=0,t.GetComponent(F).t1=.1}static StateUpdate(e,t,i){0<t.GetComponent(F).t1&&(t.GetComponent(F).t1-=i,t.GetComponent(F).t1<=0&&(t.GetComponent(xt).SetAnimation("Crying"),t.GetComponent(xt).nowClipName=""))}static StateExit(e,t){}}),Tc=(xc.StateName="Sad",class{static EnterState(e,t){t.GetComponent(xt).SetAnimation("UseLazer",0);let i=t.GetComponent(w);i.banDirRotationCtrl++,i.vec.x=0,i.vec.z=0,i.banDirCtrl++}static StateUpdate(e,t,i){}static StateExit(e,t){let i=t.GetComponent(w);i.banDirCtrl--,i.banDirRotationCtrl--}}),kc=(Tc.StateName="UseLazer",class{static EnterState(e,t){let i=e.GetEntityByID(t.GetComponent(F).entity1Id),o=(i.GetComponent(gi),i.GetComponent(v)),a=V.GetRoundTile(o.nowMapPos.x,o.nowMapPos.y),n=a[Math.floor(q.Random()*a.length)],s=-yt.tileSize*n.x-yt.tileSize*q.Random(),l=yt.tileSize*n.y+yt.tileSize*q.Random();i.GetComponent(gi).SetNewTarget(s,0,l),i.GetComponent(Et).stepTime=3+5*q.Random()}static StateUpdate(e,t,i){let o=e.GetEntityByID(t.GetComponent(F).entity1Id),a=o.GetComponent(gi),n=o.GetComponent(Et),s=t.GetComponent(F);a.isPathing||(e=o.GetComponent(v),e=(t=V.GetRoundTile(e.nowMapPos.x,e.nowMapPos.y))[Math.floor(q.Random()*t.length)],t=-yt.tileSize*e.x-yt.tileSize*q.Random(),e=yt.tileSize*e.y+yt.tileSize*q.Random(),o.GetComponent(gi).SetNewTarget(t,0,e)),n.stepTime-=i,n.stepTime<0&&s.ChangeState(Mc.StateName)}static StateExit(e,t){}}),Mc=(kc.StateName="BossAIMove",class{static EnterState(e,t){e.GetEntityByID(t.GetComponent(F).entity1Id).GetComponent(Et).stepTime=10+3*q.Random(),t.GetComponent(F).t1=0}static StateUpdate(a,e,n){let s=a.GetEntityByID(e.GetComponent(F).entity1Id),l=s.GetComponent(Et),t=s.GetComponent(v),r=s.GetComponent(M),i=e.GetComponent(F);(i.t1-=n)&&i.t1<0&&(m=-1,m=V.GetNestUnit(r.pos,t.nowMapPos.x,t.nowMapPos.y,10,s.id,0),l.targetEnemy=m,i.t1=1);let o=a.GetEntityByID(l.targetEnemy);if(o){let t=o.GetComponent(M),e=s.GetComponent(R),i=o.GetComponent(R);if(l.searchEnemyTime-=n,l.triggerAttTime-=n,0<i.hp){if(Laya.Vector3.distance(t.pos,r.pos)<=l.triggerAttRange){let i=[],o=!1;if(s.HasComponent(L.id)){var h=s.GetComponent(L);for(let e=0;e<h.skillList.length;e++)h.skillList[e].cdTime<=0&&i.push(h.skillList[e].skillID),h.skillList[e].isSklling&&(o=!0)}if(0<i.length&&(l.useSkillTime-=n,l.useSkillTime<0)){let t=s.GetComponent(L);if(!o){t.triggerSkllId=i[i.length-1],l.useSkillTime=l.skillTimeRangeMin+(l.skillTimeRangeMax-l.skillTimeRangeMin)*q.Random(),s.GetComponent(gi).isArrive=!0;let e=s.GetComponent(w);e.dir.x=0,e.dir.z=0}}if(e.triggerAtt||l.triggerAttTime<=0&&(e.StartTriggerAtt(),l.triggerAttTime=l.attTimeRangeMin+(l.attTimeRangeMax-l.attTimeRangeMin)*q.Random()),s.GetComponent(gi).isArrive=!0,!o){let e=s.GetComponent(w);e.dir.x=0,e.dir.z=0,this.vec2.x=t.pos.x-r.pos.x,this.vec2.y=t.pos.z-r.pos.z;var m=S.VecToAngle(this.vec2),a=S.AngleToDir(m);e.dir.x=a.x,e.dir.z=a.y}}else l.searchEnemyTime<0&&(l.searchEnemyTime=l.attPathTime,s.GetComponent(gi).SetNewTarget(t.pos.x,0,t.pos.z)),s.GetComponent(F).nowState==ui.StateName||s.GetComponent(gi).isPathing||s.GetComponent(gi).SetNewTarget(t.pos.x,0,t.pos.z);if(s.GetComponent(F).nowState==ui.StateName){s.GetComponent(gi).isArrive=!0;let e=s.GetComponent(w);e.dir.x=0,e.dir.z=0,this.vec2.x=t.pos.x-r.pos.x,this.vec2.y=t.pos.z-r.pos.z;m=S.VecToAngle(this.vec2),a=S.AngleToDir(m);e.dir.x=a.x,e.dir.z=a.y}}}else e.GetComponent(F).ChangeState(kc.StateName);l.stepTime-=n,l.stepTime<0&&i.ChangeState(kc.StateName)}static StateExit(e,t){}}),Rc=(Mc.StateName="BossAIFight",Mc.dir=new Laya.Vector3(0,0,0),Mc.vec2=new Laya.Vector2(0,0),class{static EnterState(e,t){let i=e.GetEntityByID(t.GetComponent(F).entity1Id),o=(i.GetComponent(R),i.GetComponent(v)),a=i.GetComponent(M),n=t.GetComponent(F),s=(V.GetNestItem(a.pos,o.nowMapPos.x,o.nowMapPos.y,10),i.GetComponent(Et)),l;l=V.GetNestUnit(a.pos,o.nowMapPos.x,o.nowMapPos.y,10,i.id,0);e=V.GetFogDis(a.pos);s.nowFogDir=e;let r=Cc.StateName;r=-1!=l?(s.targetEnemy=l,Mc.StateName):Cc.StateName,n.ChangeState(r)}static StateUpdate(e,t,i){}static StateExit(e,t){}}),Pc=(Rc.StateName="State_BossAIThink",class{static EnterState(e,t){let i=t.GetComponent(F),o=t.GetComponent(U),a=t.GetComponent(R),n=o.act0Clip,s=o.act0Time*(1/a.GetAttSpeedScale()),l=o.act0Step1Time,r=o.act0Step2Time,h=o.act0Step3Time,m=1,d=1,c=1,u=o.att0Time;switch(i.str1=o.bullet0,i.t5=o.bullet0Dis,t.GetComponent(w).banDirCtrl++,t.GetComponent(w).vec.x=0,t.GetComponent(w).vec.z=0,o.nowAct){case 0:n=o.act0Clip,s=o.act0Time*(1/a.GetAttSpeedScale()),l=o.act0Step1Time,r=o.act0Step2Time,h=o.act0Step3Time,u=o.att0Time,i.str1=o.bullet0,i.t5=o.bullet0Dis,i.t6=o.bullet0height,i.r4=o.superArmor0;break;case 1:n=o.act1Clip,s=o.act1Time*(1/a.GetAttSpeedScale()),l=o.act1Step1Time,r=o.act1Step2Time,h=o.act1Step3Time,u=o.att1Time,i.str1=o.bullet1,i.t5=o.bullet1Dis,i.t6=o.bullet1height,i.r4=o.superArmor1;break;case 2:n=o.act2Clip,s=o.act2Time*(1/a.GetAttSpeedScale()),l=o.act2Step1Time,r=o.act2Step2Time,h=o.act2Step3Time,u=o.att2Time,i.str1=o.bullet2,i.t5=o.bullet2Dis,i.t6=o.bullet2height,i.r4=o.superArmor2}o.comboTime<=0&&(n=o.act0Clip,s=o.act0Time*(1/a.GetAttSpeedScale()),l=o.act0Step1Time,r=o.act0Step2Time,h=o.act0Step3Time,u=o.att0Time,i.str1=o.bullet0,i.t5=o.bullet0Dis,i.t6=o.bullet0height,i.r4=o.superArmor0,o.nowAct=0),i.t7=0,t.GetComponent(xt).SetAnimation(n);var p,g=l+r+h;g>=s?(p=s/g,l*=p,r*=p,h*=p,u*=p,m=g/s,d=g/s,c=g/s):(p=s-r,g=l/(l+h)*p,p=h/(l+h)*p,u=u-l+g,m=l/g,c=h/p,l=g,h=p),t.GetComponent(F).time=s,t.GetComponent(R).triggerAtt=!1,i.step=0,i.t1=l,i.t2=r,i.t3=h,i.r1=m,i.r2=d,i.r3=c,i.t4=u,i.entity1Id=-1,o.nowAct++,o.nowAct>=o.maxAct&&(o.nowAct=0),ci.QianRenCutStar(t),ci.MonkeyKingBarStar(t)}static StateUpdate(t,o,e){let a=o.GetComponent(R),n=o.GetComponent(F);if(e*=a.GetAnyScale(),n.time-=e,0<n.t4&&(n.t4-=e,n.t4<=0)){let e=new Laya.Vector3(0,0,0),t=new Laya.Vector3(0,o.GetComponent(M).rotation.y,0);this.bulletScale.x=1,this.bulletScale.y=1;this.bulletScale.z=1;e.x=o.GetComponent(M).pos.x,e.y=o.GetComponent(M).pos.y+n.t6,e.z=o.GetComponent(M).pos.z;var s=S.VecRotate(new Laya.Vector2(0,1),o.GetComponent(M).rotation.y);Laya.Vector2.scale(s,n.t5,s),e.x-=s.x,e.z+=s.y,this.color.x=1,this.color.y=1,this.color.z=1,this.color.w=.82;let i=O.CreatPrefabEntityUsePos(n.str1,e,t,this.bulletScale);if(null!=i.GetComponent(B).sp){let e=i.GetComponent(B).sp.particleSystem;e&&(e.startColorConstant.x=this.color.x,e.startColorConstant.y=this.color.y,e.startColorConstant.z=this.color.z,e.startColorConstant.w=this.color.w)}o.GetComponent(R).superArmor+=n.r4,n.t7=n.r4,i.GetComponent(v).radius=+i.GetComponent(v).radius,i.GetComponent(C).dmg=a.dmg,i.HasComponent(w.id)&&(Laya.Vector2.normalize(s,s),i.GetComponent(w).dir.x=-s.x,i.GetComponent(w).dir.z=s.y),i.GetComponent(C).creatorId=o.id}if(-1!=n.entity1Id){let e=t.GetEntityByID(n.entity1Id);e&&(e.GetComponent(M).SetPos(o.GetComponent(M).pos),e.GetComponent(M).pos.y+=.5,e.GetComponent(M).rotation.y=o.GetComponent(M).rotation.y,s=S.VecRotate(new Laya.Vector2(0,1),o.GetComponent(M).rotation.y),Laya.Vector2.scale(s,n.t5,s),e.GetComponent(M).pos.x-=s.x,e.GetComponent(M).pos.z+=s.y)}0==n.step&&(o.GetComponent(xt).animatorSpeedScale=n.r1*a.GetAnyScale(),n.t1-=e,n.t1<=0&&(n.step=1)),1==n.step&&(o.GetComponent(xt).animatorSpeedScale=n.r2*a.GetAnyScale(),n.t2-=e,n.t2<=0&&(n.step=2)),2==n.step&&(o.GetComponent(xt).animatorSpeedScale=n.r3*a.GetAnyScale(),n.t3-=e,n.t3<=0&&(n.step=3,o.GetComponent(xt).animatorSpeedScale=1,n.ChangeState(Nc.StateName)))}static StateExit(e,t){ci.MonkeyKingBarEnd2(t),t.GetComponent(R).superArmor-=t.GetComponent(F).t7,t.GetComponent(w).banDirCtrl--,t.GetComponent(w).vec.x=0,t.GetComponent(w).vec.z=0,t.GetComponent(xt).animatorSpeedScale=1,t.GetComponent(U).comboTime=.5}}),Ec=(Pc.StateName="BossAtt",Pc.bulletScale=new Laya.Vector3(1,1,1),Pc.color=new Laya.Vector4(1,1,1,1),class{static EnterState(e,t){var i=t.GetComponent(U);t.GetComponent(xt).SetAnimation(i.runClip),t.GetComponent(F).t1=0}static StateUpdate(e,t,i){let o=t.GetComponent(F),a=t.GetComponent(w),n=t.GetComponent(R);t.GetComponent(xt).animatorSpeedScale=n.GetAnyScale(),Laya.Vector3.scalarLength(a.dir)<=0&&t.GetComponent(F).ChangeState(Nc.StateName),n.triggerAtt&&(n.IsBanAtt()?n.triggerAtt=!1:t.GetComponent(F).ChangeState(Pc.StateName)),o.t1+=i,.6<o.t1&&(o.t1=0,O.CreatPrefabEntityUsePos(N.Effect_BossDust,t.GetComponent(M).pos))}static StateExit(e,t){}}),Nc=(Ec.StateName="BossMove",class{static EnterState(e,t){var i=t.GetComponent(U);t.GetComponent(xt).SetAnimation(i.idleClip),t.GetComponent(F).t1=.05}static StateUpdate(e,t,i){let o=t.GetComponent(w),a=t.GetComponent(R),n=t.GetComponent(F);t.GetComponent(xt).animatorSpeedScale=a.GetAnyScale(),0<Laya.Vector3.scalarLength(o.dir)&&t.GetComponent(F).ChangeState(Ec.StateName),0<=n.t1&&(n.t1-=i),n.t1<0&&a.triggerAtt&&(a.triggerAtt=!1,a.IsBanAtt()||t.GetComponent(F).ChangeState(Pc.StateName))}static StateExit(e,t){}}),Fc=(Nc.StateName="BossIdle",class{static EnterState(e,t){t.GetComponent(xt).SetAnimation("Idle",.1);let i=t.GetComponent(w);i.banDirCtrl+=1,i.banDirRotationCtrl+=1,t.GetComponent(F).t3=1.5,t.GetComponent(F).time=4.5,K.AudioModule().StopMusic()}static StateUpdate(i,o,e){let a=o.GetComponent(F);if(a.time-=e,0==a.t2&&(a.t3-=e,a.t3<0)){a.t3=.5,a.t2=1;let e=i.GetSingleCompoent($i),t=(a.t7=e.followTargetId,e.followTargetId=o.id,i.GetEntitys([R.id]));for(let e=0;e<t.length;e++)t[e].GetComponent(w).banDirCtrl++,t[e].GetComponent(w).banDirRotationCtrl++}if(1==a.t2&&(a.t3-=e,a.t3<0)){o.GetComponent(xt).SetAnimation("Anger",.1);let e=i.GetSingleCompoent($i);e.shakeValue=.8,e.shakeTime=.5,K.AudioModule().PlayOnce(x.GetSound2("NianBoss")),e.useShake=!0,a.t2=2,a.t3=.7}if(2==a.t2&&(a.t3-=e,a.t3<0&&(a.t2=3,o.GetComponent(xt).SetAnimation("Idle",.5),K.AudioModule().PlayMusicAgain())),a.time<0){i.GetSingleCompoent($i).followTargetId=a.t7,o.GetComponent(B).useLerp=!0;let e=o.GetComponent(w);--e.banDirCtrl,--e.banDirRotationCtrl,a.nowState=Nc.StateName}}static StateExit(e,t){let i=e.GetEntitys([R.id]);for(let e=0;e<i.length;e++)i[e].GetComponent(w).banDirCtrl--,i[e].GetComponent(w).banDirRotationCtrl--}}),Oc=(Fc.StateName="BossReady",class{static EnterState(e,t){t.GetComponent(U),t.GetComponent(xt).SetAnimation("Anger");let i=t.GetComponent(w);i.banDirRotationCtrl++,i.vec.x=0,i.vec.z=0,i.banDirCtrl++}static StateUpdate(e,t,i){}static StateExit(e,t){let i=t.GetComponent(w);i.banDirCtrl--,i.banDirRotationCtrl--}}),Hc=(Oc.StateName="BossWarnIdle1",class{static EnterState(e,t){t.GetComponent(xt).SetAnimation("Skill2",.1),t.GetComponent(xt).animatorSpeedScale=1,t.GetComponent(F).time=.5}static StateUpdate(e,t,i){let o=t.GetComponent(F);o.time-=i,o.time<0&&o.ChangeState(Nc.StateName)}static StateExit(e,t){}}),Vc=(Hc.StateName="BossSkill1",class{static EnterState(e,t){t.GetComponent(xt).SetAnimation("FireAtt",.5);let i=t.GetComponent(w);i.banDirRotationCtrl++,i.vec.x=0,i.vec.z=0,i.ChangeBanDir(1,!0)}static StateUpdate(e,t,i){}static StateExit(e,t){let i=t.GetComponent(w);i.ChangeBanDir(-1,!0),i.banDirRotationCtrl--}}),zc=(Vc.StateName="BossUseLazer",class{static EnterState(e,o){let a=e.GetEntityByID(o.GetComponent(F).entity1Id),t=a.GetComponent(Et),n=a.GetComponent(gi);if(q.Random()<t.escapNappChance)return n.isArrive=!0,n.needFindPath=!1,a.GetComponent(w).dir.x=0,void(a.GetComponent(w).dir.z=0);let s=a.GetComponent(M),l=e.GetEntityByID(t.targetEnemy);if(l){let t=a.GetComponent(w),i=a.GetComponent(v);n.isArrive=!0,n.isPathing=!1;var r=l.GetComponent(M),o=new Laya.Vector3(s.pos.x-r.pos.x,0,s.pos.z-r.pos.z);if(Laya.Vector3.normalize(o,o),t.dir.x=o.x,t.dir.z=o.z,l.HasComponent(L.id)){var h=l.GetComponent(L).skillList;for(let e=0;e<h.length;e++)if(h[e].isSklling){if(360==h[e].dangerAngle){if(i.isHitWall){let e=new Laya.Vector3(-100-s.pos.x,0,100-s.pos.z);return Laya.Vector3.normalize(e,e),Laya.Vector3.scale(e,20*q.Random(),e),e.x=s.pos.x+e.x,e.z=s.pos.z+e.z,void a.GetComponent(gi).SetNewTarget(e.x,0,e.z)}n.isArrive=!0,n.isPathing=!1;var m=l.GetComponent(M),m=new Laya.Vector3(s.pos.x-m.pos.x,0,s.pos.z-m.pos.z);return Laya.Vector3.normalize(m,m),t.dir.x=m.x,void(t.dir.z=m.z)}m=S.AngleToDir(r.rotation.y);return t.dir.x=-m.x,void(t.dir.z=-m.y)}}}}static StateUpdate(e,t,i){}static StateExit(e,t){}}),Wc=(zc.StateName="EscapeSkill",class{static EnterState(o,e){let t=o.GetEntityByID(e.GetComponent(F).entity1Id),i=t.GetComponent(R),a=t.GetComponent(v),n=t.GetComponent(M),s=e.GetComponent(F),l=V.GetNestItem(n.pos,a.nowMapPos.x,a.nowMapPos.y,10),r=t.GetComponent(Et),h=V.GetBossByRange(n.pos,100),m=V.GetFogDis(n.pos),d=(r.nowFogDir=m,Cc.StateName);if(-1!=h){r.targetEnemy=h;let t=o.GetEntityByID(h),i=Laya.Vector3.distance(t.GetComponent(M).pos,n.pos);if(d=Sc.StateName,t.HasComponent(L.id)){var c,u=t.GetComponent(L).skillList;for(let e=0;e<u.length;e++)u[e].isSklling&&i<u[e].range&&(c=t.GetComponent(M),V.IsInDangerAngle(c.pos,n.pos,c.rotation.y,u[e].dangerAngle)&&(d=zc.StateName))}d==Sc.StateName&&(i<8?-1!=l&&(l!=r.targetItem&&(r.targetItem=l,r.hasGetItemPath=!1),d=Gc.StateName):r.likeGetItem&&-1!=l&&(l!=r.targetItem&&(r.targetItem=l,r.hasGetItemPath=!1),d=Gc.StateName))}else r.targetEnemy=-1,d=-1!=l?(l!=r.targetItem&&(r.targetItem=l,r.hasGetItemPath=!1),Gc.StateName):Cc.StateName;if(r.eatBuffItemFirst&&-1!=l){let e=o.GetEntityByID(l);e&&e.GetComponent(y).type==y.Type_Eat&&(l!=r.targetItem&&(r.targetItem=l,r.hasGetItemPath=!1),d=Gc.StateName)}(d=0<i.upgRadeList.length?yc.StateName:d)==Cc.StateName&&s.preState==Gc.StateName&&(r.targetItem=-1,r.hasGetItemPath=!1,t.GetComponent(gi).isPathing=!1),d==Gc.StateName&&s.preState!=Gc.StateName&&(r.hasGetItemPath=!1),s.ChangeState(d)}static StateUpdate(e,t,i){}static StateExit(e,t){}}),Zc=(Wc.StateName="AIFightBossThink",class extends e{constructor(){super(...arguments),this.targetId=-1,this.dir=new Laya.Vector3(0,0,0),this.vec=new Laya.Vector3(0,0,0),this.speed=20,this.keepTime=1}}),jc=class{static BuffInit(e,t,i,o){o&&(i.f1+=o.f1)}static BuffUpdate(e,t,i,o){i.t1+=o,3<i.t1&&((i.t1=0)<(o=t.GetComponent(R)).hp&&o.hp<o.maxHp&&H.AddHp(t,i.f1),i.t1=0)}static BuffDispose(e,t,i,o){let a=e.GetEntityByID(i.effectId);a&&a.Destory()}static HitedBuffDeal(e,t,i,o){}static HitBuffDeal(e,t,i,o){}},Kc=(jc.BuffName="HealByTime",class extends e{constructor(){super(...arguments),this.tag=""}}),qc=class{static BuffInit(e,t,i,o){let a=t.GetComponent(B).sp.getChildByName("ExpoPoint");if(a)for(let e=0;e<a.numChildren;e++)t.GetComponent(Lt).expoPoins.push(a.getChildAt(e));let n=t.GetComponent(Lt),s=K.DataModule().GetLocal().event.Get("2021YearMonster_Rule");i.t1=Number(s.F6);var l=.01*(s.F2+q.Random()*(s.F3-s.F2));n.nextCreatHp=t.GetComponent(R).hp-t.GetComponent(R).maxHp*l,i.f1=.3,i.f2=0}static BuffUpdate(e,a,n,t){let s=a.GetComponent(Lt),i=a.GetComponent(R);if(i.hp<s.nextCreatHp&&qc.AddNewTargetItem(a),0==n.f2&&i.isDead&&(n.f2=1,qc.AddNewTargetItem(a),n.f1=.2),0<s.items.length&&(n.t2-=t,n.t2<0)){n.t2=n.f1;let e=Math.floor(Math.random()*s.expoPoins.length),t=s.expoPoins[e],i=s.items.pop(),o=Jc.CreatBonuseItem(a.GetComponent(M).pos,i,3,n.t1-3,!0);1==n.f2&&(o.GetComponent(Ht).showTime+=10),O.CreatPrefabEntityUsePos(N.Effect_NianExpo,t.transform.position)}}static BuffLateUpdate(e,t,i,o){}static BuffDispose(e,t,i,o){}static HitedBuffDeal(e,t,i,o){}static HitBuffDeal(e,t,i,o){}static AddNewTargetItem(n){if(n.GetComponent(R).isDead){let t=n.GetComponent(Lt),e=K.DataModule().GetLocal().event.Get("2021YearMonster_Rule"),i=Number(e.F8),o=Math.floor(.5*i+Math.random()*i*.5);for(let e=0;e<i;e++){var a,s;o==e?(a=K.DataModule().GetLocal().lottery.GetChest("YearMonsterDrop2"),a=K.DataModule().GetUser().GetUserItemDataList(a),t.items=t.items.concat(a)):(a=K.DataModule().GetLocal().lottery.GetChest("YearMonsterDrop1"),s=K.DataModule().GetUser().GetUserItemDataList(a),t.items=t.items.concat(s))}}else{let t=n.GetComponent(Lt),e=K.DataModule().GetLocal().event.Get("2021YearMonster_Rule"),i=e.F4,o=Number(e.F5),a=i+Math.floor(q.Random()*(o-i));for(let e=0;e<a;e++){var l=K.DataModule().GetLocal().lottery.GetChest("YearMonsterDrop1"),l=K.DataModule().GetUser().GetUserItemDataList(l);t.items=t.items.concat(l)}var r=.01*(e.F2+q.Random()*(e.F3-e.F2));t.nextCreatHp=n.GetComponent(R).hp-n.GetComponent(R).maxHp*r}}},Yc=qc,Qc=(Yc.BuffName="NianBossDropItem",Yc.vec2=new Laya.Vector2(0,0),class extends e{constructor(){super(...arguments),this.showLoopSound="",this.showSound="",this.isPlay=!1,this.firstShot=!1,this.t1=0,this.bulletCount=-1,this.nowState=0,this.playSameSoundInterval=0}}),Jc=class{static CreatExpEffect(i,o,t=5){if(o.GetComponent(M).isInCameraArea)for(let e=0;e<t;e++){let e=O.CreatPrefabEntityUsePos(N.Effect_ExpPoint,i),t=e.GetComponent(Zc);t.dir.y=.8,t.dir.z=2*Math.random()-1,t.dir.x=2*Math.random()-1,Laya.Vector3.normalize(t.dir,t.dir),e.GetComponent(Zc).targetId=o.id}}static CreatHero(e,t,s,i=!1,o="",a="",n="",l=1){let r=O.CreatPrefabEntityUsePos(N.Player,e),h=K.DataModule().GetLocal().weapon.Get(s),m=K.DataModule().GetLocal().hero.Get(t),d=r.GetComponent(R),c=(d.speed=h.Speed,d.maxHp=m.Hp,d.hp=d.maxHp,d.nowLevel=1,d.maxExp=K.DataModule().GetLocal().gameRule.InGameUpgradeNeedExp(d.nowLevel),new bt);if(null!=h){c.mainWeapon=h.BaseWeaponPrefab,V.IsGameMode_Zombie()?d.dmg=h.Z_Dmg:d.dmg=h.Dmg;let e=r.GetComponent(U),t=(e.readOnlyAttackRange=h.AttackRange,""!=h.BulletPrefab?e.bullet0=h.BulletPrefab:e.bullet0="",e.sniperRifleattRange=h.AttackRange,e.attackRange=h.AttackRange,e.recoilTime=h.Recoil,""!=h.ClassFactor?e.consecutiveShots=h.ClassFactor.split(",").length:e.consecutiveShots=1,e.bulletLoadCD=h.LoadBulletTime,e.bulletCount=h.BulletCount,e.nowBulletCount=h.BulletCount,e.shotCD=1/h.AttSpeed,V.IsGameMode_Zombie()&&(e.bulletSapTime=h.ZombieMode_SapTime,e.bulletStiffnessDis=h.ZombieMode_StiffnessDis),q.NowGameWorld.GetSingleCompoentEntity($i));t&&!i&&((t.GetComponent($i).orthographicVerticalSize=15)<t.GetComponent($i).orthographicVerticalSize&&(t.GetComponent($i).orthographicVerticalSize=15),console.warn("创建英雄",i,e.attackRange,t.GetComponent($i).orthographicVerticalSize,e.attackRange,e.sniperRifleattRange))}else q.Random()<.5?c.mainWeapon=N.Weapon_THAxe:c.mainWeapon=N.Weapon_THSword;if(r.AddComponentAdv(bt,c),r.AddComponent(L),V.IsGameMode_Zombie()){let o=K.DataModule().GetUser().GetData().ZombieUnlockItemList,a=K.DataModule().GetLocal().item.GetDatas(),n=[];for(let e=0;e<a.length;e++){let t=a[e],i=!1;for(let e=0;e<o.length;e++){const s=o[e];t.ItemID==s&&(i=!0)}i&&n.push({ItemID:t.ItemID,NowLevel:1,Name:t.ChineseName,MaxLv:t.MaxLv,Weight:t.Weight})}r.GetComponent(L).zombieInGameItemDatas=n}let u=new ti;if(u.BodySkin="",u.WeaponSkin="",null!=m&&(u.BodySkin=m.Res,u.skinId=m.ID),null!=h&&(e=K.DataModule().GetLocal().weapon.Get(s),u.WeaponSkin=e.Res,u.weaponId=e.ID,u.weaponSkinID=n),i){r.AddComponent(gi);let e=new Et;e.aiId=o,r.AddComponentAdv(Et,e)}if(""!=a){let t=a.split(",");for(let e=0;e<t.length;e++){var p=t[e].split("_"),g=p[0],f=Number(p[1]);"MaxHp"==g&&(d.maxHp=f,d.hp=d.maxHp),"Speed"==g&&(d.speed=f),"AttSpeed"==g&&(d.attSpeedScale=f),"Heal"==g&&ri.AddBuffToTarget(r,jc.BuffName,!0,-1,f),"DodgePer"==g&&(d.dodgePer=.01*f),"CritPer"==g&&(d.critPer=.01*f),V.IsGameMode_Zombie()||("Dmg"==g&&(d.dmg=f),"LifeLeechPer"==g&&(d.suckBlood=.01*f),"Skill"==g&&(b.Warn("加入技能"+p[1]+"_"+p[2]),d.willRandomSkill.push(p[1]+"_"+p[2]))),"SkillCD"==g&&(r.GetComponent(L).skillCdScale+=.01*f),"FastHitRecovery"==g&&(d.hitRecovery+=.01*f),"ParryChance"==g&&(d.parryChance+=.01*f),"SkillDmgPer"==g&&(r.GetComponent(L).skillDmgScale+=.01*f),"SpecialEffect"==g&&u.skinSpEffectList.push(p[1]),"SuperLevelUp"==g&&(d.superLevelUp=f),"Intelligency"==g&&(d.intelligency=f),"Zmode"==g&&u.skinSpEffectList.push(t[e])}}return i?(t=K.DataModule().GetLocal().medal.Get("Level"+l),d.basedmg=Math.floor(d.dmg*(.01*t.AIDamagePer)),d.dmg=d.basedmg,d.maxHp=Math.floor(d.maxHp*(.01*t.AIHPPer)),d.hp=d.maxHp):(d.basedmg=d.dmg,console.warn(" 我的伤害！！！：",d.dmg,d.basedmg)),r.AddComponentAdv(ti,u),ci.SnowSceneAddSkill(r),ci.ThorPower(r),ci.Sportsman(r),""!=V.hasSameSkillAtStart&&(s=K.DataModule().GetLocal().skill.Get(V.hasSameSkillAtStart))&&H.AddSkill(r,s.SkillFun,s.SkillID,1,1,s.SkillMaxLevel),r}static CreatZombie(e,t,i,o=!1,a,n,s,l){let r=O.CreatPrefabEntityUsePos("Zombie",e),h=null,m=(i&&(h=K.DataModule().GetLocal().weapon.Get(i)),K.DataModule().GetLocal().zombie.Get(t)),d=D.Zombie_Normal;switch(m.Type){case"Normal":d=D.Zombie_Normal;break;case"Elite":d=D.Zombie_Elite;break;case"Boss":d=D.Zombie_Boss}r.GetComponent(ut).type=m.Type,r.GetComponent(D).useUICtrl=d;let c=r.GetComponent(R),u=K.DataModule().GetLocal().gameRule,p=V.radiationLevel,g=1+2*u.ZombieMode_ZombieMoveSpeedEnhanceFloatRatio()*(Math.random()-.5),f=(c.speed=Math.min(m.SpeedLimit,m.Speed*u.ZombieMode_ZombieMoveSpeedEnhanceRatio(p)*g),g=1+2*u.ZombieMode_ZombieHPEnhanceFloatRatio()*(Math.random()-.5),c.maxHp=m.Hp*u.ZombieMode_ZombieHPEnhanceRatio(p)*g,c.hp=c.maxHp,c.sizeScale=m.Scale,c.nowLevel=1,c.maxExp=1e3,q.NowGameWorld.GetSingleCompoentEntity($i)),_=(f&&!o&&((f.GetComponent($i).orthographicVerticalSize=15)<f.GetComponent($i).orthographicVerticalSize&&(f.GetComponent($i).orthographicVerticalSize=15)),new ti),I=(_.BodySkin="",_.WeaponSkin="",null!=m&&(_.BodySkin=m.Res[Math.floor(Math.random()*m.Res.length)],_.skinId=m.ID),new bt),C=(g=1+2*u.ZombieMode_ZombieDmgEnhanceFloatRatio()*(Math.random()-.5),c.dmg=m.Att*u.ZombieMode_ZombieDmgEnhance(p)*g,c.boxDmg=c.dmg,c.attSpeedScale=1,r.GetComponent(U)),G=r.GetComponent(ut),S=r.GetComponent(Qc);if(h?(e=K.DataModule().GetLocal().weapon.Get(i),_.weaponId=e.ID,_.WeaponSkin=e.Res,_.weaponSkinID="",I.mainWeapon=e.BaseWeaponPrefab,C.bullet0=e.BulletPrefab,G.isRangedUnit=!0):(_.WeaponSkin="WeaponSkin_ZombieWeapon",I.mainWeapon="Weapon_THGun",C.bullet0="Bullet_ZombieBullet",G.isRangedUnit=!1),r.AddComponentAdv(bt,I),C.readOnlyAttackRange=m.AttRange,C.sniperRifleattRange=0,C.attackRange=m.AttRange,C.recoilTime=0,C.bulletLoadCD=m.WeaponReloadCD,C.bulletCount=m.WeaponCapacity,C.nowBulletCount=m.WeaponCapacity,C.shotCD=m.AttInterval,C.bulletSpeed=m.BulletSpeed,C.bulletScatter=m.BulletScatter,C.idleClip="",C.runClip="",G.attTimeCd=m.AttInterval,G.attAnimTime=0,m.Weapon||(G.attAnimTime=.4/m.Speed,G.attTimeCd+=.2),G.killExp=m.KillExp,G.zombieID=t,G.atkSapTime=m.AtkSapTime,G.hitedSapTimeRatio=m.HitedSapTimeRatio,G.atkStiffnessDis=m.AtkStiffnessDis,G.hitedStiffnessDisRatio=m.HitedStiffnessDisRatio,G.AttAnim=m.AttAnim,G.WalkAnim=m.WalkAnim,G.RunAnim=m.RunAnim,G.DieAnim=m.DieAnim,G.NoiseSound=m.NoiseSound,G.AttSound=m.AttSound,G.DeadSound=m.DeadSound,G.viewRange_Day=m.DayView,G.viewRange_Night=m.NightView,G.viewRange_BloodNight=m.BloodNightView,G.angryChaseRangeRatio=m.Angry_ChaseRangeFactor,G.angryChaseSpeedRatio=m.Angry_Speed/m.Speed,G.angryChaseCallRange=m.Angry_CallRange,G.bulletScale=m.BulletScale,G.bulletOffsetZ=m.BulletOffsetZ,G.level=V.radiationLevel,r.GetComponent(v).weight=m.Mass,r.GetComponent(v).radius=m.Scale/2,o&&r.AddComponent(gi),c.basedmg=c.dmg,r.AddComponentAdv(ti,_),S.showSound=G.GetRandomAttSound(Math.random()),S.showLoopSound=S.showSound+"Loop",S.playSameSoundInterval=.6,ci.SnowSceneAddSkill(r),ci.ThorPower(r),ci.Sportsman(r),r.AddComponent(L),0<m.Skills.length)for(let e=0;e<m.Skills.length;e++){var y=m.Skills[e].split("_"),w=y[0],y=parseInt(y[1]),w=K.DataModule().GetLocal().skill.Get(w);w&&(console.log("AddSkill",w),H.AddSkill(r,w.SkillFun,w.SkillID,y,1,w.SkillMaxLevel))}return Tf.UpdateZombieSceneStatusEnhanceBuff(r),r}static CreatZombieKing(e,t){let i=O.CreatPrefabEntityUsePos(N.ZombieKing,e),o=K.DataModule().GetLocal().weapon.Get("Weapon1"),a=i.GetComponent(R),n=(a.speed=o.Speed,a.maxHp=t,a.hp=a.maxHp,a.nowLevel=1,a.maxExp=K.DataModule().GetLocal().gameRule.InGameUpgradeNeedExp(a.nowLevel),a.dmg=10,i.GetComponent(U).shotCD=1/o.AttSpeed,i.AddComponent(L),new ti);n.BodySkin="",n.WeaponSkin="";{i.AddComponent(gi);let e=new Et;e.aiId="Ai54",e.thinkState="",e.StartState=kc.StateName,i.AddComponentAdv(Et,e),e.attTimeRangeMin=1,e.attTimeRangeMax=1.5,e.triggerAttRange=3,e.attRotateSpeed=180}a.basedmg=a.dmg,i.AddComponentAdv(ti,n);e=K.DataModule().GetLocal().skill.Get("2021YearMonster_BossSkill1"),H.AddSkill(i,e.SkillFun,e.SkillID,1,1,e.SkillMaxLevel),t=K.DataModule().GetLocal().skill.Get("2021YearMonster_BossSkill2"),H.AddSkill(i,t.SkillFun,t.SkillID,1,1,t.SkillMaxLevel),e=K.DataModule().GetLocal().skill.Get("2021YearMonster_BossSkill3");return H.AddSkill(i,e.SkillFun,e.SkillID,1,1,e.SkillMaxLevel),ri.AddBuffToTarget(i,Yc.BuffName,!0,-1),i}static CreatEnemy(e,t){let i=O.CreatPrefabEntityUsePos(N.Monster1,e),o=K.DataModule().GetLocal().weapon.Get("Weapon1"),a=i.GetComponent(R),n=(a.speed=o.Speed,a.maxHp=t,a.hp=a.maxHp,a.nowLevel=1,a.maxExp=K.DataModule().GetLocal().gameRule.InGameUpgradeNeedExp(a.nowLevel),a.dmg=10,i.GetComponent(U).shotCD=1/o.AttSpeed,i.AddComponent(L),new ti);n.BodySkin="",n.WeaponSkin="";{i.AddComponent(gi);let e=new Et;e.aiId="Ai54",e.thinkState="",e.StartState=kc.StateName,i.AddComponentAdv(Et,e),e.attTimeRangeMin=1,e.attTimeRangeMax=1.5,e.triggerAttRange=3,e.attRotateSpeed=180}a.basedmg=a.dmg,i.AddComponentAdv(ti,n);e=K.DataModule().GetLocal().skill.Get("2021YearMonster_BossSkill1"),H.AddSkill(i,e.SkillFun,e.SkillID,1,1,e.SkillMaxLevel),t=K.DataModule().GetLocal().skill.Get("2021YearMonster_BossSkill2"),H.AddSkill(i,t.SkillFun,t.SkillID,1,1,t.SkillMaxLevel),e=K.DataModule().GetLocal().skill.Get("2021YearMonster_BossSkill3");return H.AddSkill(i,e.SkillFun,e.SkillID,1,1,e.SkillMaxLevel),ri.AddBuffToTarget(i,Yc.BuffName,!0,-1),i}static CreatBonuseItem(i,n,e=1,t=1.5,o=!1){let a=N.Item_Coins;switch(n.type){case Z.Chest:a=N.Item_Gear_Chest;break;case Z.Foot:a=N.Item_Gear_Foot;break;case Z.Ring:a=N.Item_Gear_Ring;break;case Z.Head:a=N.Item_Gear_Head;break;case Z.Coin:a=N.Item_Coins;break;case Z.Diamond:a=N.Item_Diamond;break;case Z.NewYearFont:a=N.Item_NewYear_Char;break;case Z.InGameHongBao:a=N.Item_HongBao;break;case Z.HeroPiece:a=N.Item_SpItem;break;case Z.ChestKey:a=N.Item_SpItemKey;break;case Z.Battery:a=N.Item_Battery;break;case Z.Bolt:a=N.Item_Bolt;break;case Z.TurretItem:a=N.Item_TurretItem;break;case Z.AddSkill:a=N.Item_AddSkill;break;case Z.AddItem:a=N.Item_AddItem;break;case Z.AddWeapon:a=N.Item_AddWeapon;break;case Z.ZombieCoin:a=N.Item_ZCoins}let s=O.CreatPrefabEntity(a,t=>{if(t.componentId==M.id){let e=t;e.pos.x=i.x,e.pos.z=i.z,e.pos.y=i.y}var e;t.componentId==Ht.id&&(t.itemData=n,t.selfGetMode=o),t.componentId==D.id&&(n.type!=Z.Head&&n.type!=Z.Chest&&n.type!=Z.Foot&&n.type!=Z.Ring||(t.playerName=K.DataModule().GetLz().GetText("GN_"+n.tableID),(e=K.DataModule().GetLocal().gameRule.Get("GearGrade"+n.rare))&&(t.color=e.F6)),n.type==Z.Coin&&(t.playerName=Y.converStr(n.count)),n.type==Z.Diamond&&(t.playerName=n.count.toString()),n.type==Z.HeroPiece&&(t.playerName=K.DataModule().GetLz().GetText("Hero_"+n.tableID)+K.DataModule().GetLz().GetText("debris"),(e=K.DataModule().GetLocal().gameRule.Get("GearGrade"+n.rare))&&(t.color=e.F6)),n.type==Z.ChestKey&&(t.playerName=K.DataModule().GetLz().GetText("ChestKey")))});if(n.type==Z.HeroPiece){let o=K.DataModule().GetLocal().hero.GetAllHeroIds(),a=s.GetComponent(B).sp.getChildByName("Item").getChildByName("tab");for(let i=0;i<o.length;i++){let e=o[i],t=a.getChildByName(e);t&&(e==n.tableID?t.active=!0:t.active=!1)}}var l=new Laya.Vector2(0,1),l=S.VecRotate(l,360*q.Random());return Laya.Vector2.scale(l,e+q.Random()*t,l),s.GetComponent(M).pos.x+=l.x,s.GetComponent(M).pos.z+=l.y,s}static CreatWeapon(e,t,i){let o=q.NowGameWorld.CreatEntity(),a=(o.AddComponent(M).SetPos(e),new B);return a.spName=t,a.spPath=i,a.useLerp=!0,o.AddComponentAdv(B,a),o.AddComponent(Kc).tag="Weapon",o}},Xc=class{static EnterState(e,t){t.GetComponent(xt).SetAnimation("NianCreatItem"),t.GetComponent(F).t1=0;let i=t.GetComponent(B).sp.getChildByName("ExpoPoint");if(i)for(let e=0;e<i.numChildren;e++)t.GetComponent(Lt).expoPoins.push(i.getChildAt(e));let o=t.GetComponent(w),a=(o.banDirRotationCtrl++,o.vec.x=0,o.vec.z=0,o.banDirCtrl++,K.DataModule().GetLocal().event.Get("2021YearMonster_Rule")),n=a.F4,s=Number(a.F5),l=n+Math.floor(q.Random()*(s-n)),r=t.GetComponent(Lt);r.items=[];for(let e=0;e<l;e++){var h=K.DataModule().GetLocal().lottery.GetChest("YearMonsterDrop1"),h=K.DataModule().GetUser().GetUserItemDataList(h);r.items=r.items.concat(h)}}static StateUpdate(e,a,t){a.GetComponent(w),a.GetComponent(R);let n=a.GetComponent(F);if(n.t1-=t,n.t1<0){n.t1=.5;let e=a.GetComponent(Lt),t=Math.floor(Math.random()*e.expoPoins.length),i=e.expoPoins[t],o=K.DataModule().GetUser().NewUserItemData();o.id="2l76s1mldiu000",o.type="Chest",o.tableID="Chest2_5",Jc.CreatBonuseItem(a.GetComponent(M).pos,o,3,3,!0).GetComponent(Ht).showTime=10,O.CreatPrefabEntityUsePos(N.Effect_NianExpo,i.transform.position)}}static StateExit(e,t){let i=t.GetComponent(w);i.banDirCtrl--,i.banDirRotationCtrl--}},$c=(Xc.StateName="BossCreatItem",class{static EnterState(e,i){i.GetComponent(R).isDead=!0,i.GetComponent(v).enable=!1,i.GetComponent(xt).SetAnimation("NianCreatItem"),i.GetComponent(w).ChangeBanDir(1,!0),i.GetComponent(w).banDirRotationCtrl+=100,i.GetComponent(w).vec=new Laya.Vector3(0,0,0),i.HasComponent(Et.id)&&(i.GetComponent(Et).destory=!0,i.GetComponent(gi).enable=!1);let t=!0,o=(q.Instance().netFrame||V.myInGamePlayerData.netId==i.GetComponent(E).netId&&(t=!1),t&&(i.RemoveComponent(D),i.RemoveComponent(Ft),i.RemoveComponent(fi)),i.GetComponent(F).time=3,i.GetComponent(xt).animatorSpeedScale=1,e.GetEntitys([R.id]));for(let e=0;e<o.length;e++)o[e].GetComponent(w).banDirCtrl++,o[e].GetComponent(w).banDirRotationCtrl++,o[e].GetComponent(w).vec=new Laya.Vector3(0,0,0),o[e].GetComponent(R).anyScale-=100;let a=e.GetSingleCompoent($i);if(i.GetComponent(F).t7=a.followTargetId,a.followTargetId=i.id,i.HasComponent(L.id)){let t=i.GetComponent(L).skillList;for(let e=0;e<t.length;e++)t[e].isSklling&&(t[e].skillKeepTime=0)}i.GetComponent(F).step=0,i.GetComponent(F).t1=1,i.GetComponent(F).t3=-1}static StateUpdate(i,t,o){let a=t.GetComponent(F),n=i.GetEntityByID(a.t3);if(n){let e=n.GetComponent(M);7<e.pos.y&&(e.pos.y-=15*o)}if(0==a.step&&(a.t1-=o,a.t1<0&&(a.t1=1,0==t.GetComponent(Lt).items.length))&&(t.GetComponent(xt).SetAnimation("Die",.5),K.AudioModule().PlayOnce(x.GetSound2("NianBoss")),s=t.GetComponent(M),O.CreatPrefabEntityUsePos(N.Effect_FireWork,new Laya.Vector3(s.pos.x,s.pos.y+5,s.pos.z)),s=O.CreatPrefabEntityUsePos(N.Effect_ChunLian,new Laya.Vector3(s.pos.x,30,s.pos.z)),a.t3=s.id,a.step=1),1==a.step&&(a.t1-=o,a.t1<0)){a.t1=.5;let e=i.GetSingleCompoent($i);e.shakeValue=.8,e.shakeTime=.5;var s=t.GetComponent(M);O.CreatPrefabEntityUsePos(N.Effect_FireWork,new Laya.Vector3(s.pos.x,s.pos.y+5,s.pos.z)),e.useShake=!0,a.step=2}if(2==a.step&&(a.t1-=o,a.t1<0)){i.GetSingleCompoent($i).followTargetId=a.t7,a.step=3;let t=i.GetEntitys([R.id]);K.AudioModule().PlayOnce(x.GetSound2("Footstep_Boss"));for(let e=0;e<t.length;e++)t[e].GetComponent(w).banDirCtrl--,t[e].GetComponent(w).banDirRotationCtrl--,t[e].GetComponent(R).anyScale+=100}3==a.step&&(t.GetComponent(M).pos.y-=.5*o,t.GetComponent(M).pos.y<-3&&t.Destory())}static StateExit(e,t){t.GetComponent(w).ChangeBanDir(-1,!0),--t.GetComponent(w).banDirRotationCtrl}}),eu=($c.StateName="BossDead",class{static EnterState(e,t){t.GetComponent(B).spName==N.Item_WallBox2?t.GetComponent(xt).SetAnimation("BoxIdle2"):t.GetComponent(xt).SetAnimation("BoxIdle")}static StateUpdate(e,t,i){}static StateExit(e,t){}}),tu=(eu.StateName="WallBoxIdle",class{static EnterState(e,t){t.GetComponent(xt).SetAnimation("BoxHit",0),t.GetComponent(F).time=.16}static StateUpdate(e,t,i){let o=t.GetComponent(F);o.time-=i,o.time<0&&o.ChangeState(eu.StateName)}static StateExit(e,t){}}),iu=(tu.StateName="WallBoxHited",class{static EnterState(e,t){}static StateUpdate(e,t,i){}static StateExit(e,t){}}),ou=(iu.StateName="WallBoxOpen",class{static EnterState(e,t){t.GetComponent(y).type=-1,t.GetComponent(F).t1=1,t.GetComponent(F).t2=0,t.GetComponent(v).hitWithWall=!1}static StateUpdate(e,t,i){let o=t.GetComponent(F);var a;0==o.t2&&(o.t1-=i,o.t1<0)&&(o.t1=.6,o.t2=1,t.GetComponent(w).speed=t.GetComponent(y).speed,a=360*q.Random(),a=S.AngleToDir(a),t.GetComponent(w).dir.x=a.x,t.GetComponent(w).dir.z=a.y),1==o.t2&&(o.t1-=i,o.t1<0&&(o.t2=2,t.GetComponent(y).type=1,t.GetComponent(v).hitWithWall=!0)),t.GetComponent(v).isHitWall&&(q.Random()<.5?(t.GetComponent(w).dir.x=t.GetComponent(w).dir.x,t.GetComponent(w).dir.z=-t.GetComponent(w).dir.z):(t.GetComponent(w).dir.x=-t.GetComponent(w).dir.x,t.GetComponent(w).dir.z=t.GetComponent(w).dir.z),t.GetComponent(v).isHitWall=!1)}static StateExit(e,t){}}),au=(ou.StateName="MashRoom",class{static EnterState(e,t){t.GetComponent(xt).SetAnimation("BoxHit2",0),t.GetComponent(F).time=.16}static StateUpdate(e,t,i){let o=t.GetComponent(F);o.time-=i,o.time<0&&o.ChangeState(eu.StateName)}static StateExit(e,t){}}),nu=(au.StateName="WallBoxHited2",class{static EnterState(e,t){t.GetComponent(xt).SetAnimation("JumpAtt2",.1),t.GetComponent(xt).animatorSpeedScale=1,t.GetComponent(R).invincible+=1}static StateUpdate(e,t,i){}static StateExit(e,t){--t.GetComponent(R).invincible}}),su=(nu.StateName="JumpCut",class{static EnterState(e,t){t.GetComponent(xt).SetAnimation("InfantryGun_Idle",0),t.GetComponent(U).sniperRifleattRange=t.GetComponent(U).readOnlyAttackRange,e.GetSingleCompoent($i).state=$i.state_Sniper,V.CameraRange=26;let i=t.GetComponent(w);i.ChangeBanDir(1),i.vec=new Laya.Vector3(0,0,0),t.GetComponent(R).superArmor+=1}static StateUpdate(e,t,i){t.GetComponent(U).attackRange<2*t.GetComponent(U).readOnlyAttackRange&&(t.GetComponent(U).attackRange+=.5,t.GetComponent(U).sniperRifleattRange+=.5)}static StateExit(e,t){t.GetComponent(w).ChangeBanDir(-1),t.GetComponent(U).attackRange=t.GetComponent(U).readOnlyAttackRange,e.GetSingleCompoent($i).state=$i.state_InGame,--t.GetComponent(R).superArmor}}),lu=(su.StateName="Sniper",class{static EnterState(e,t){var i=t.GetComponent(L);console.warn("释放技能的状态",i),this.pos=t.GetComponent(M).pos.clone()}static StateUpdate(e,t,i){var o=t.GetComponent(M).pos;this.pos.x==o.x&&this.pos.y==o.y&&this.pos.z==o.z||t.GetComponent(F).ChangeState(Mf.StateName)}static StateExit(e,t){let i=t.GetComponent(L),o=i.skillList.filter(e=>"RainOfBullets"==e.skillID);console.warn("释放技能的退出状态",i),t.GetComponent(F).ChangeState(Mf.StateName),0<o.length&&(o[0].skillKeepTime=0)}}),ru=(lu.StateName="Skill3",class{static EnterState(e,t){t.GetComponent(F),t.GetComponent(xt).SetAnimation("Run")}static StateUpdate(e,t,i){}static StateExit(e,t){}}),hu=(ru.StateName="RobotDead",class{static EnterState(e,t){t.GetComponent(F).t1=1e7;var i=t.GetComponent(v),i=(t.GetComponent(M),V.GetRoundTile(i.nowMapPos.x,i.nowMapPos.y)),i=i[Math.floor(q.Random()*i.length)],o=-yt.tileSize*i.x-yt.tileSize*q.Random(),i=yt.tileSize*i.y+yt.tileSize*q.Random();t.GetComponent(gi).SetNewTarget(o,0,i)}static StateUpdate(e,t,i){let o=t.GetComponent(F);t.GetComponent(w),t.GetComponent(R),o.t1-=i,o.t1<=0&&o.ChangeState(ru.StateName)}static StateExit(e,t){}}),mu=(hu.StateName="RobotMove",class{static EnterState(e,t){t.GetComponent(xt).SetAnimation("InfantryGun_Idle",0);let i=t.GetComponent(w);i.ChangeBanDir(1),i.vec=new Laya.Vector3(0,0,0)}static StateUpdate(e,t,i){}static StateExit(e,t){t.GetComponent(w).ChangeBanDir(-1)}}),du=(mu.StateName="ProhibitedMoveState",class{static EnterState(e,t){}static StateUpdate(e,t,i){}static StateExit(e,t){}}),cu=(du.StateName="State_ZombieAtt",class{static EnterState(e,t){let i=e.GetEntityByID(t.GetComponent(F).entity1Id);if(i){let e=i.GetComponent(xt);e&&(e.useClipName="Idle",e.useSpeed=1,e.useCross=.2)}}static StateUpdate(e,t,i){}static StateExit(e,t){}}),uu=(cu.StateName="State_ZombieIdle",class{static EnterState(e,t){let i=e.GetEntityByID(t.GetComponent(F).entity1Id);i&&!i.GetComponent(gi).isPathing&&(e=i.GetComponent(v),e=(t=V.GetRoundTile(e.nowMapPos.x,e.nowMapPos.y))[Math.floor(q.Random()*t.length)],t=-yt.tileSize*e.x-yt.tileSize*q.Random(),e=yt.tileSize*e.y+yt.tileSize*q.Random(),i.GetComponent(gi).SetNewTarget(t,0,e))}static StateUpdate(e,t,i){}static StateExit(e,t){}}),pu=(uu.StateName="State_ZombieMove",class extends e{constructor(){super(...arguments),this.nowRemainZombie=0,this.initCreateZombieRemainCDTime=0,this.initActiveZombieRemainCDTime=0,this.level=1,this.type="",this.isUnderAttacked=!1,this.remainUnderAttackSpeedUpTime=0,this.remainUnderAttackLevelUpTime=0,this.orginMat_model1=new Laya.Vector3,this.orginMat_model2=new Laya.Vector3,this.orginMat_danger=new Laya.Vector3}}),gu=class extends lt{constructor(){super(...arguments),this.systemName="MapSystem",this.creatPoint=[],this.chestPoint=[],this.creatItemPoint=[],this.bornPoint=[],this.bornPointBak=[],this.spItemPoint=[],this.spItemPointBak=[],this.vechiclePointList=[],this.zspPointList=[],this.zspPointListBak=[],this.smallX=0,this.smallY=0,this.zombieFactoryNum=0,this.collders=[],this.zombieMode_ChestCreateCDTime=0,this.pos=new Laya.Vector3(0,0,0)}Init(){var i=K.ResModule().GetJson(x.GetSceneMapData(V.nowScene));this.creatPoint=i.points,this.chestPoint=i.chestPoints,this.creatItemPoint=i.itemCreatPoints,this.spItemPoint=i.spItems,this.spItemPointBak=i.spItems,this.collders=i.collders;for(let e=0;e<i.bornPoints.length;e++){var t=new Laya.Vector3(i.bornPoints[e].x,0,i.bornPoints[e].z);this.bornPoint.push(t),this.bornPointBak.push(t)}if(this.smallX=2*i.x,this.smallY=2*i.y,V.canCreatChestPos=[],V.IsGameMode_Zombie()){for(let t=0;t<i.spItems.length;t++){let e=i.spItems[t];switch(e.t){case"ZSP":this.zspPointList.push(e),this.zspPointListBak.push(e);break;case"VP":this.vechiclePointList.push(e);break;default:-1!=e.t.indexOf("Bunker")&&this.CreateBunker(e)}}for(let e=0;e<this.chestPoint.length;e++)V.canCreatChestPos.push(this.chestPoint[e]);for(let e=0;e<5;e++)this.CreatZombieFactory();let e=K.DataModule().GetLocal().gameRule;this.CreatZombieChest(e.ZombieMode_Chest_InitCount()),this.CreatItemCreatPoint(),this.CreatVehiclePoint()}else{let e=!0;(e=k.isOpenNewInGameGuide&&K.DataModule().GetUser().isFistGame?!1:e)&&(V.gameMode!=$I.Deathmatch&&this.CreatChest(),this.CreatItemCreatPoint(),this.CreatSpItem())}gu.Instance=this}GuideCreateItem(){this.CreatChest(),this.CreatItemCreatPoint(),this.CreatSpItem()}GetRandomZombieCreateItemDataPoint(){if(0==this.zspPointList.length)return e=Math.floor(q.Random()*this.zspPointListBak.length),this.zspPointListBak[e];var e=Math.floor(q.Random()*this.zspPointList.length),t=this.zspPointList[e];return this.zspPointList.splice(e,1),t}CreateBunker(e){let t=O.CreatPrefabEntityUsePos("Item_"+e.t,new Laya.Vector3(e.p.x,0,e.p.z)),i=t.GetComponent(B),o=i.sp.getChildByName("DoorPoint"),a=(t.GetComponent(E).team=0,t.GetComponent(pt).doorNode=o,t.GetComponent(y)),n=V.zombieMode_bunkerLevelHP(1),s=(a.hp=n,a.maxhp=n,t.GetComponent(D).freshUI=!0,t.GetComponent(D).maxhp=t.GetComponent(y).maxhp,t.GetComponent(D).hp=t.GetComponent(y).maxhp,t.GetComponent(B).banCull=!0,O.CreatPrefabEntityUsePos(N.Item_DoorTriggerArea,new Laya.Vector3(o.transform.position.x,.3,o.transform.position.z))),l=(s.GetComponent(gt).bunkerId=t.id,s.GetComponent(M).SetRotation2(0,o.transform.rotation.y,0),i.sp.getChildByName("TentPoint")),r=O.CreatPrefabEntityUsePos(N.Item_TentTrigger,new Laya.Vector3(l.transform.position.x,.2,l.transform.position.z)),h=(r.GetComponent(Ct).bunkerId=t.id,r.GetComponent(M).SetRotation2(0,l.transform.rotation.y,0),i.sp.getChildByName("BunkerTrigger")),m=O.CreatPrefabEntityUsePos(N.Item_BunkerTrigger,new Laya.Vector3(h.transform.position.x,.2,h.transform.position.z));m.GetComponent(St).bunkerId=t.id,m.GetComponent(M).SetRotation2(0,h.transform.rotation.y,0),m.GetComponent(M).SetScale(h.transform.localScaleX,1,h.transform.localScaleZ),m.GetComponent(v).width=h.transform.localScaleX,m.GetComponent(v).height=h.transform.localScaleZ,t.GetComponent(pt).bunkerTriggerEcsID=m.id}CreatZombieFactory(){this.zombieFactoryNum+=1;let e=this.GetRandomZombieCreateItemDataPoint(),t=O.CreatPrefabEntityUsePos(N.Item_ZombieFactory,new Laya.Vector3(e.p.x,.1,e.p.z),new Laya.Vector3(e.r.x,e.r.y,e.r.z)),i=K.DataModule().GetLocal().gameRule,o=t.GetComponent(pu),a=(o.level=i.ZombieMode_ZombieFactory_InitLevel(V.CurrentDay),t.GetComponent(y)),n=i.ZombieMode_ZombieFactory_InitHP()+o.level*i.ZombieMode_ZombieFactory_AddHpPreLevel(),s=(a.hp=n,a.maxhp=n,t.AddComponent(E)),l=(s.team=1,s.netId="ZombieFactory"+this.zombieFactoryNum,o.level>=i.ZombieMode_ZombieFactory_HighLevel()),r=t.GetComponent(B).sp.getChildByName("Node"),h=r.getChildByName("Level_1");h.active=!l;var m=h.getChildByName("Model").meshRenderer.material,m=(o.orginMat_model1.setValue(m.albedoColorR,m.albedoColorG,m.albedoColorB),h.getChildByName("_danger").meshRenderer.material);o.orginMat_danger.setValue(m.albedoColorR,m.albedoColorG,m.albedoColorB);let d=r.getChildByName("Level_2");d.active=l;m=d.getChildByName("Model").meshRenderer.material;o.orginMat_model2.setValue(m.albedoColorR,m.albedoColorG,m.albedoColorB),V.nowSceneZombieFactoryNum+=1}CreatZombieChest(t){if(!(V.canCreatChestPos.length<=0)){let e=K.DataModule().GetLocal().gameRule,s=new Bt,i=(s.AddWeightItem("Wood",100*e.ZombieMode_Chest_Wood_Pobability()),s.AddWeightItem("Silver",100*e.ZombieMode_Chest_Sliver_Pobability()),s.AddWeightItem("Gold",100*e.ZombieMode_Chest_Gold_Pobability()),s.Calculate(),[]);q.NowGameWorld.GetEntitys([y.id,Ft.id]).forEach(function(e){e.GetComponent(y).type==y.Type_Box&&(e=e.GetComponent(M),i.push(e.pos))}),console.warn("已存在的宝箱数量=",i.length);var l=V.canCreatChestPos.filter(function(t){for(let e=0;e<i.length;e++)if(Laya.Vector3.distance(i[e],t)<3)return!1;return!0});for(let e=0;e<l.length&&e<t;e++){let e=Ut.RandomGetAndClear(l),t=s.RandomItem(),i=N.Item_Chest0,o="Chest_ZombieInGame1",a=("Wood"==t&&(i=N.Item_Chest0,o="Chest_ZombieInGame1"),"Silver"==t&&(i=N.Item_Chest1,o="Chest_ZombieInGame2"),"Gold"==t&&(i=N.Item_Chest,o="Chest_ZombieInGame3"),O.CreatPrefabEntityUsePos(i,new Laya.Vector3(e.x,0,e.z))),n=(a.GetComponent(Ft).showRange=35,[]);K.DataModule().GetLocal().lottery.GetChest(o).forEach(function(e){var e=e.split("_"),t=e[0],i=parseInt(e[1]);for(let e=0;e<i;e++){let e=K.DataModule().GetUser().NewUserItemData();e.id=t,e.type=t,e.tableID=t,n.push(e)}}),a.GetComponent(y).userItemDatas=n,a.GetComponent(y).addExp=0,O.CreatPrefabEntityUsePos(N.Effect_AddChestEffect,e)}}}CreatChest(i=!1){if(!(i&&V.canCreatChestPos.length<=0)){let e=K.DataModule().GetLocal().gameRule.Get("BattleGenerateChest"),s=K.DataModule().GetLocal().gameRule.Get("InGameChestExp"),l=new Bt,t=(l.AddWeightItem("Gold",e.F3),l.AddWeightItem("Silver",e.F2),l.AddWeightItem("Wood",e.F1),l.Calculate(),0),r=0,h=0;var o;k.use2021NewYear&&(t=.01*K.DataModule().GetLocal().event.Get("2021NewYear").F1),k.Hongbao&&(V.IsGameMode_Nian()?"BattleSceneNian"==V.nowScene&&(o=K.DataModule().GetLocal().event.Get("2021YearRedPackets2"),r=.01*o.F1,h=.01*o.F2):"BattleSceneNian"==V.nowScene&&(o=K.DataModule().GetLocal().event.Get("2021YearRedPackets1"),r=.01*o.F1,h=.01*o.F2));for(let e=0;e<this.chestPoint.length;e++){let n=this.chestPoint[e];if(i&&(n=Ut.RandomGetAndClear(V.canCreatChestPos)),q.Random()<t){b.Warn("创建礼物盒子");let e=l.RandomItem(),t=N.Item_NewYearChest,i=(q.Random()<r&&(t=N.Item_BaoZhuChest),O.CreatPrefabEntityUsePos(t,new Laya.Vector3(n.x,0,n.z)));"Wood"==e&&(i.GetComponent(y).addExp=s.F1),"Silver"==e&&(i.GetComponent(y).addExp=s.F2),"Gold"==e&&(i.GetComponent(y).addExp=s.F3);var m=K.DataModule().GetLocal().lottery.GetChest("2021NewYearGift"),m=K.DataModule().GetUser().GetUserItemDataList(m);if(i.GetComponent(y).userItemDatas=m,t==N.Item_BaoZhuChest&&q.Random()<h){let e=K.DataModule().GetUser().NewUserItemData();e.id=Z.InGameHongBao,e.type=Z.InGameHongBao,i.GetComponent(y).userItemDatas.push(e)}}else{let e=l.RandomItem(),t=N.Item_Chest0,i="Chest_InGame1",o=s.F1,a=("Wood"==e&&(t=N.Item_Chest0,i="Chest_InGame1",o=s.F1),"Silver"==e&&(t=N.Item_Chest1,i="Chest_InGame2",o=s.F2),"Gold"==e&&(t=N.Item_Chest,i="Chest_InGame3",o=s.F3),q.Random()<r&&(t=N.Item_BaoZhuChest),O.CreatPrefabEntityUsePos(t,new Laya.Vector3(n.x,0,n.z)));a.GetComponent(y).addExp=o;var m=K.DataModule().GetLocal().lottery.GetChest(i),d=K.DataModule().GetUser().GetUserItemDataList(m);if(a.GetComponent(y).userItemDatas=d,t==N.Item_BaoZhuChest&&q.Random()<h){let e=K.DataModule().GetUser().NewUserItemData();e.id=Z.InGameHongBao,e.type=Z.InGameHongBao,a.GetComponent(y).userItemDatas.push(e)}}if(i)return void O.CreatPrefabEntityUsePos(N.Effect_AddChestEffect,n)}}}CreatItemCreatPoint(){for(let e=0;e<this.creatItemPoint.length;e++){var t=this.creatItemPoint[e];O.CreatPrefabEntityUsePos(N.Item_ItemCreator,new Laya.Vector3(t.x,.1,t.z))}}CreatVehiclePoint(){let o=[];for(let e=0;e<this.vechiclePointList.length;e++)o.push(this.vechiclePointList[e].p);let a=K.DataModule().GetLocal().gameRule,t=a.ZombieMode_ZombieVechicleCount(Math.random()),i=o.length;for(let e=0;e<Math.min(i,t);e++){let e=o.splice(Math.floor(q.Random()*o.length),1)[0],t=O.CreatPrefabEntityUsePos(N.Item_Car1,new Laya.Vector3(e.x,.1,e.z)),i=O.CreatPrefabEntityUsePos(N.Item_CarTrigger,new Laya.Vector3(e.x,.1,e.z));i.GetComponent(ft).carId=t.id,i.GetComponent(Mt).followTargetId=t.id,t.GetComponent(pi).carDoorId=i.id,t.GetComponent(pi).carRuntime=a.ZombieMode_Car_InitEnergy(Math.random()),t.GetComponent(y).maxhp=a.ZombieMode_Car_MaxHP(),t.GetComponent(y).hp=a.ZombieMode_Car_InitHP(Math.random()),t.GetComponent(D).maxhp=t.GetComponent(y).maxhp,t.GetComponent(D).hp=t.GetComponent(y).hp}}CreatSpItem(){if(k.WallBox){var e=K.DataModule().GetLocal().event.Get("GetPlumber_Rule");if(null!=e){let i=.01*e.F1,o=.01*e.F2,a=0,n=K.DataModule().GetLocal().hero.Get("Plumber");if(n&&(a=.01*n.F1),this.spItemPointBak)for(let e=0;e<this.spItemPointBak.length;e++){var s=this.spItemPointBak[e];if("WB"==s.t){let e=O.CreatPrefabEntityUsePos(N.Item_WallBox,new Laya.Vector3(s.p.x,0,s.p.z)),t=e.GetComponent(y);e.GetComponent(B).sp.getChildByName("box").getChildByName("box1").active=!1,e.GetComponent(B).sp.getChildByName("box").getChildByName("box2").active=!1,e.GetComponent(B).sp.getChildByName("box").getChildByName("box3").active=!1,q.Random()<a?(t.willGetMashRoom=!0,e.GetComponent(B).sp.getChildByName("box").getChildByName("box2").active=!0,n&&(t.wallLeftTime=Number(n.F8),t.willGetExItem=n.F9)):(e.GetComponent(B).sp.getChildByName("box").getChildByName("box1").active=!0,q.Random()<i&&(t.wallWillCreatChance=o,t.wallWillCreatItem="HeroPiece_Plumber_1"))}if("MR"==s.t){let e=O.CreatPrefabEntityUsePos(N.Item_WallBox2,new Laya.Vector3(s.p.x,0,s.p.z)),t=e.GetComponent(y);e.GetComponent(B).sp.getChildByName("box").getChildByName("box1").active=!1,e.GetComponent(B).sp.getChildByName("box").getChildByName("box2").active=!1,e.GetComponent(B).sp.getChildByName("box").getChildByName("box3").active=!1,t.willGetMashRoom=!0,e.GetComponent(B).sp.getChildByName("box").getChildByName("box2").active=!0,n&&(t.wallLeftTime=Number(n.F8),t.willGetExItem=n.F9)}}}}}IndexToPos(e){var t=Math.floor(e/this.smallX),e=e-t*this.smallX;return this.pos.x=-e*yt.smallTileSize,this.pos.z=t*yt.smallTileSize,this.pos.y=0,this.pos}GetRandomPoint(){var e=this.creatPoint[Math.floor(q.Random()*this.creatPoint.length)];return this.IndexToPos(e)}GetRandomBornPoint(){if(0==this.bornPoint.length)return b.Warn("没位置了++"),e=Math.floor(q.Random()*this.bornPointBak.length),e=this.bornPointBak[e],new Laya.Vector3(e.x,e.y,e.z);var e=Math.floor(q.Random()*this.bornPoint.length),t=this.bornPoint[e];return this.bornPoint.splice(e,1),new Laya.Vector3(t.x,t.y,t.z)}GetGuidePoint(i){let o=K.ResModule().GetJson(x.GetSceneMapData(V.nowScene)),a=new Laya.Vector3(0,0,0);for(let t=0;t<o.spItems.length;t++){let e=o.spItems[t];if(-1!=e.t.indexOf(i)){a.x=e.p.x,a.z=e.p.z;break}}return new Laya.Vector3(a.x,a.y,a.z)}Update(){}FixedUpdate(){var e=A.FixedTimeDelta;if(V.IsGameMode_Zombie()&&(this.zombieMode_ChestCreateCDTime-=e,this.zombieMode_ChestCreateCDTime<=0)){let e=K.DataModule().GetLocal().gameRule;this.zombieMode_ChestCreateCDTime=e.ZombieMode_Chest_CreateCD(),this.CreatZombieChest(1),console.log("生成宝箱")}}LateUpdate(){}Destroy(){}OnAddComponent(e,t){t.componentId==$i.id&&"BattleScene3"==V.nowScene&&(O.CreatPrefabEntity(N.Effect_SnowWeatherEffect).GetComponent(Mt).followTargetId=e.id)}GetRandomBornPointInFog(){if(0==this.bornPoint.length){b.Warn("没位置了++");let t=[];for(let e=0;e<this.bornPointBak.length;e++){var i=this.bornPointBak[e];V.GetFogDis(i)<V.fogRange-1&&t.push(i)}var e=t[Math.floor(q.Random()*t.length)];return new Laya.Vector3(e.x,e.y,e.z)}let t=[];for(let e=0;e<this.bornPoint.length;e++){var o=this.bornPoint[e];V.GetFogDis(o)<V.fogRange-1&&t.push(o)}var e=Math.floor(q.Random()*t.length),a=t[e];return this.bornPoint.splice(e,1),new Laya.Vector3(a.x,a.y,a.z)}DeathmatchGetRandomBornPoint(){if(0==this.bornPoint.length){b.Warn("没位置了++");let t=[];for(let e=0;e<this.bornPointBak.length;e++){var i=this.bornPointBak[e];V.GetFogDis(i)<V.fogRange&&t.push(i)}var e=t[Math.floor(q.Random()*t.length)];return new Laya.Vector3(e.x,e.y,e.z)}let t=[];for(let e=0;e<this.bornPoint.length;e++){var o=this.bornPoint[e];V.GetFogDis(o)<V.fogRange&&t.push(o)}var e=Math.floor(q.Random()*t.length),a=t[e];return this.bornPoint.splice(e,1),new Laya.Vector3(a.x,a.y,a.z)}OnRemoveComponent(e,t){}},fu=class{static getRandomNameList(){if(T.IS_4399)return"Player";0==this.nameList.length&&(k.language,fu.randomPlayerInfo=K.ResModule().GetJson(x.PlayerNames_EN).names,this.nameList=fu.randomPlayerInfo.split("|"));var e=Math.floor(Math.random()*this.nameList.length);return this.nameList[e]}},_u=fu,Iu=(_u.nameList=[],_u.randomPlayerInfo="",class extends e{constructor(){super(...arguments),this.t1=1,this.attCD=0,this.amg=0}}),Cu=class extends e{constructor(){super(...arguments),this.questList=[]}},Gu=class{constructor(e){this.uiItem=null,this.uiRes="",this.questIndex=-1,this.questID="",this.level=1,this.isNeedSelected=!0,this.isFirstSelect=!0,this.isSelected=!1,this.hasFinished=!1,this.hasGetReward=!1,this.ecs=null,this.nowStep=0,this.nowStepRemainTime=0,this.titleText="",this.contextText="",this.rewardText="",this.miniTitleText="",this.miniContextText="",this.miniCountContextText="",this.initIconPos=new Laya.Vector2,this.rewardItemList=[],this.questID=e,this.questIndex=Gu.Index++}Init(){this.OnInit()}Start(){let e=K.UIModule().GetUI(Uf.UIName),t=(this.uiItem=e.view.m_QuestPanel.m_List.addItemFromPool(),this.uiItem.m_Status.setSelectedPage("ToDo"),this.uiItem.m_Title.text=K.Lz("ZQuest_"+this.questID+"_MiniTitle"),this.uiItem.m_Context.text=K.Lz("ZQuest_"+this.questID+"_MiniContext"),this.uiItem.m_CountText.text="",this.uiItem.m_Title1.text=K.Lz("ZQuest_"+this.questID+"_MiniTitle"),this.uiItem.m_Context1.text=K.Lz("ZQuest_"+this.questID+"_MiniContext"),this.uiItem.m_CountText1.text="",this);this.uiItem.m_SelectBtn.onClick(this,function(){sp.SelectQuest(t.ecs,t.questIndex)}),this.uiItem.m_FinishBtn.onClick(this,function(){t.Reward()}),this.uiItem.m_GiveUpBtn.onClick(this,function(){j.ShowSureDialog(K.Lz("ZQuest_GiveUp"),t,function(){t.GiveUp()})}),this.uiItem.m_Star.setSelectedIndex(this.level-1),this.uiItem.m_Icon.url=x.GetImage("Quest_"+this.uiRes),this.OnStart()}Update(e){this.uiItem&&(this.uiItem.m_Title.text=this.miniTitleText,this.uiItem.m_Context.text=this.miniContextText,this.uiItem.m_CountText.text=this.miniCountContextText,this.uiItem.m_Title1.text=this.miniTitleText,this.uiItem.m_Context1.text=this.miniContextText,this.uiItem.m_CountText1.text=this.miniCountContextText),this.OnUpdate(e)}Finish(){P.onQuestTip.Trigger(K.Lz("ZQuest_"+this.questID+"_Finish")),this.hasFinished=!0,this.uiItem.m_Status.setSelectedPage("Finish"),K.AudioModule().PlayOnce(x.GetSound2("QuestComplete")),this.OnFinish(),sp.AutoSelectQuest(this.ecs)}Reward(){let e=K.UIModule().GetUI(Uf.UIName),t=(this.uiItem.touchable=!1,this.uiItem.m_FinishBtn.visible=!1,this),i=7*(Math.pow(this.level,.5)+2),o=100;for(let e=0;e<=i;e++)setTimeout(()=>{var n=q.NowGameWorld.GetEntitys([$i.id]);if(0<n.length){let e=n[0],t=new Laya.Ray(new Laya.Vector3,new Laya.Vector3),i=Di.GetUINode2DWorldPos(this.uiItem.m_Icon),o=(e.GetComponent($i).camera.viewportPointToRay(new Laya.Vector2(i.x,i.y),t),-t.origin.y/t.direction.y),a=new Laya.Vector3;a.x=t.origin.x+o*t.direction.x,a.y=t.origin.y+o*t.direction.y,a.z=t.origin.z+o*t.direction.z;n=V.GetLocalPlayer();n&&Jc.CreatExpEffect(a,n,2)}e%2==0&&t.uiItem.m_Reward.play(),K.AudioModule().PlayOnce(x.GetSound2("GetExp"))},e*o);setTimeout(()=>{e.view.m_QuestPanel.m_List.removeChild(t.uiItem),sp.DelQuest(t.ecs,t.questIndex),t.uiItem=null},o*(8+i)),this.OnReward();let a=[];for(let e=0;e<this.rewardItemList.length;e++){var n=this.rewardItemList[e];if(n.type==Z.Exp)a.push(n);else for(let e=0;e<n.count;e++){let e=K.DataModule().GetUser().NewUserItemData();e.id=n.id,e.type=n.type,e.tableID=n.tableID,e.count=1,a.push(e)}}if(0<a.length){o=o*i/a.length;for(let e=0;e<a.length;e++)setTimeout(()=>{V.BonuseItem(t.ecs,t.ecs,a,e,3)},e*o)}this.rewardItemList=[]}GiveUp(){this.OnGiveUp(),K.UIModule().GetUI(Uf.UIName).view.m_QuestPanel.m_List.removeChild(this.uiItem),this.uiItem=null,sp.DelQuest(this.ecs,this.questIndex),sp.AutoSelectQuest(this.ecs)}},G=Gu,Su=(G.Index=1,class extends lt{constructor(){super(...arguments),this.systemName="NavMeshSystem",this.grounp=new dt([gi.id,w.id,M.id]),this.dirVec2=new Laya.Vector2(0,0),this.creatPoint=[]}Init(){let a=K.ResModule().GetJson(x.GetSceneNav(V.nowScene)),n=null,e=Date.now();if(console.log("开始初始化寻路组件"),a.hasBake){console.log("寻路数据已烘焙");let o=a.groups,t=a.vertices,e=[];for(let i=0;i<o.length;i++){let t=[];for(let e=0;e<o[i].length;e++){var s=o[i][e];t.push({centroid:new Laya.Vector3(s[0][0],s[0][1],s[0][2]),id:s[1],neighbours:s[2],portals:s[3],vertexIds:s[4]})}e.push(t)}let i=[];for(let e=0;e<t.length;e++)i.push(new Laya.Vector3(t[e][0],t[e][1],t[e][2]));n={groups:e,vertices:i}}else{console.log("寻路数据未烘焙,开始烘焙");for(var t=a.vertices,i=a.faces,o=[],l=0;l<i.length/5;l++)o.push(new yu(i[5*l+1],i[5*l+2],i[5*l+3]));for(var r=[],l=0;l<t.length;l+=3)r.push(new Laya.Vector3(t[l],t[l+1],t[l+2]));var h=new wu;if(h.faces=o,h.vertices=r,n=window.patrol.buildNodes(h),k.IsGM&&k.IsInWebTest){let e=[];for(let i=0;i<n.groups.length;i++){let t=[];for(let e=0;e<n.groups[i].length;e++){var m=n.groups[i][e];t.push([[m.centroid.x,m.centroid.y,m.centroid.z],m.id,m.neighbours,m.portals,m.vertexIds])}e.push(t)}let t=[];for(let e=0;e<n.vertices.length;e++){var d=n.vertices[e];t.push([d.x,d.y,d.z])}console.log("寻路烘焙数据:",JSON.stringify({hasBake:!0,groups:e,vertices:t}))}}console.log("初始化寻路组件耗时(Ms)：",Date.now()-e),window.patrol.setZoneData("level",n),Su.Instance=this}GetRandomPoint(e,t,i=q.Random()){return window.patrol.getRandomNode("level",0,e,t,i)}Update(){}FixedUpdate(){var n,s=this.world.GetEntitysByMatcher(this.grounp);for(let a=0;a<s.length;a++){let e=s[a],t=e.GetComponent(M),i=e.GetComponent(w),o=e.GetComponent(gi);o.enable&&(o.needFindPath&&(o.needFindPath=!1,(n=window.patrol.findPath(t.pos,o.targetPos,"level",0))&&n.length?(o.path=n,o.findPathFailed=!0,o.isPathing=!0):(o.path=[],o.isPathing=!1)),o.isArrive||(0<o.path.length?(n=o.path[0],this.dirVec2.x=n.x-t.pos.x,this.dirVec2.y=n.z-t.pos.z,Laya.Vector2.scalarLength(this.dirVec2)<.5?o.path.shift():(Laya.Vector2.normalize(this.dirVec2,this.dirVec2),i.IsBanDirCtrl()||(i.dir.x=this.dirVec2.x,i.dir.z=this.dirVec2.y))):(i.dir.x=0,i.dir.z=0,o.isArrive=!0,o.isPathing=!1)))}}LateUpdate(){}Destroy(){}OnAddComponent(e,t){}OnRemoveComponent(e,t){}}),yu=class{constructor(e,t,i){this.a=0,this.b=0,this.c=0,this.c=i,this.b=t,this.a=e}},wu=class{constructor(){this.faces=[],this.vertices=[],this.faces=[],this.vertices=[]}mergeVertices(){for(var e,t,i,o={},a=new Array,n=[],s=Math.pow(10,4),l=0,r=this.vertices.length;l<r;l++)e=this.vertices[l],null==o[t=Math.round(e.x*s)+"_"+Math.round(e.y*s)+"_"+Math.round(e.z*s)]?(o[t]=l,a.push(e),n[l]=a.length-1):n[l]=n[o[t]];var h=[];for(l=0,r=this.faces.length;l<r;l++){(i=this.faces[l]).a=n[i.a],i.b=n[i.b],i.c=n[i.c];for(var m=[i.a,i.b,i.c],d=0;d<3;d++)if(m[d]==m[(d+1)%3]){h.push(l);break}}for(l=h.length-1;0<=l;l--){var c=h[l];this.faces.splice(c,1)}var u=this.vertices.length-a.length;return this.vertices=a,u}},vu=class extends lt{constructor(){super(...arguments),this.systemName="BunkerSystem",this.grounp=new dt([pt.id])}Init(){}Update(){let o=this.world.GetEntitys([pt.id]);for(let i=0;i<o.length;i++){let e=o[i].GetComponent(B).sp.getChildByName("Fence"),t=7.5*A.TimeDelta;e.transform.localScaleX=S.Lerp(e.transform.localScaleX,1,t),e.transform.localScaleY=S.Lerp(e.transform.localScaleY,1,t),e.transform.localScaleZ=S.Lerp(e.transform.localScaleZ,1,t)}}FixedUpdate(){var o=this.world.GetEntitys([pt.id]);for(let i=0;i<o.length;i++){let e=o[i],a=e.GetComponent(pt),t=e.GetComponent(y),n=Math.floor(10*(1-Math.max(0,t.hp)/t.maxhp)),s=e.GetComponent(B).sp.getChildByName("Fence");for(let o=0;o<s.numChildren;o++){null==a.fencePerformanceRotList[o]&&(a.fencePerformanceRotList[o]=new Laya.Vector2(10*(2*Math.random()-1),20*(2*Math.random()-1)));let e=s.getChildAt(o),t=n/10,i=A.TimeDelta;e.transform.localRotationEulerX=S.MoveTowards(e.transform.localRotationEulerX,a.fencePerformanceRotList[o].x*t,360*i),e.transform.localRotationEulerZ=S.MoveTowards(e.transform.localRotationEulerZ,1==t?-90:a.fencePerformanceRotList[o].y*t,360*i),e.transform.localPositionY=-.04}}}static IsPosInBunker(e,t){var i=e.GetComponent(M),e=e.GetComponent(v);return t.x>i.pos.x-e.width/2&&t.x<i.pos.x+e.width/2&&t.z>i.pos.z-e.height/2&&t.z<i.pos.z+e.height/2}static IsPosInBunkerTrigger(e,t){let i=e.GetComponent(pt),o=q.NowGameWorld.GetEntityByID(i.bunkerTriggerEcsID),a=o.GetComponent(M),n=o.GetComponent(v);return t.x>a.pos.x-n.width/2&&t.x<a.pos.x+n.width/2&&t.z>a.pos.z-n.height/2&&t.z<a.pos.z+n.height/2}static IsPosInBunkersTrigger(t){let i=q.NowGameWorld.GetEntitys([pt.id]),o=!1;for(let e=0;e<i.length;e++){var a=i[e];if(vu.IsPosInBunker(a,t)){o=!0;break}}return o}static UpdateBunkerWallCollider(e){var i=e.GetComponent(pt),o=yt.BunkerWall_Prefix+i.bunkerID,a=yt.BunkerDoor_Prefix+i.bunkerID;for(let t=0;t<vt.Instance.sceneData.collders.length;t++){let e=vt.Instance.sceneData.collders[t];switch(e.id){case o:e.enabled=!i.isDamage;break;case a:e.enabled=!i.isDamage&&!i.doorIsOpen}}}LateUpdate(){}Destroy(){}OnAddComponent(e,t){}OnRemoveComponent(e,t){}},Du=class extends G{constructor(){super(Du.id),this.targetPos=new Laya.Vector3,this.signPos=new Laya.Vector3,this.digRange=0,this.digCostTime=0,this.digSpeedUpTime=0,this.dropAndZombieCreateRange=0,this.zombieCount=0,this.isClickDigBtn=!1,this.isClickDigSpeedUpBtn=!1,this.isInDigging=!1,this.remainDigTime=0,this.questRange=0,this.questSignEffectEcs=null,this.questRangeEffectEcs=null,this.digHoleEffectEcsList=[]}OnInit(){var e=K.DataModule().GetLocal().zQuest.GetByKey(Du.id);this.titleText=K.Lz("ZQuest_"+Du.id+"_Title"),this.contextText=K.Lz("ZQuest_"+Du.id+"_Context"),this.rewardText=K.Lz("ZQuest_"+Du.id+"_Reward"),this.miniTitleText=K.Lz("ZQuest_"+Du.id+"_MiniTitle"),this.miniContextText=K.Lz("ZQuest_"+Du.id+"_MiniContext"),this.uiRes=e.UIRes}OnStart(){var e=K.DataModule().GetLocal().zQuest.GetByKey(Du.id),t=this.ecs.GetComponent(M);this.digRange=e.F3,this.digCostTime=e.F4/1e3,this.digSpeedUpTime=parseFloat(e.F7)/1e3,this.dropAndZombieCreateRange=e.F5,this.zombieCount=e.F6*this.level,this.questRange=e.F2;let i=e.QuestLevelRange,o=null;for(;!o;)(o=Su.Instance.GetRandomPoint(t.pos,(this.level+1)*i))&&(Laya.Vector3.distance(o,t.pos)<this.level*i||vu.IsPosInBunkersTrigger(o))&&(o=null);for(this.targetPos.setValue(o.x,.1,o.z),o=null;!o;)(o=Su.Instance.GetRandomPoint(this.targetPos,e.F2))&&(Laya.Vector3.distance(o,this.targetPos)<e.F1||vu.IsPosInBunkersTrigger(o))&&(o=null);this.signPos.setValue(o.x,.1,o.z),P.onClickQuestDigBtn.Register(this,this.OnClickQuestDigBtn),P.onClickQuestDigSpeedUpBtn.Register(this,this.OnClickQuestDigSpeedUpBtn)}OnClickQuestDigBtn(){this.isClickDigBtn=!0}OnClickQuestDigSpeedUpBtn(){this.isClickDigSpeedUpBtn=!0}OnSelectedChange(e){if(e){if(!this.questSignEffectEcs){this.questSignEffectEcs=O.CreatPrefabEntityUsePos(N.Effect_QuestSign,this.signPos);let e=this.questSignEffectEcs.GetComponent(Ft),t=(e.iconUrl=x.GetImage("Quest_"+this.questID),null);e.hudShowEffect_Progress=-.5,t=this.isFirstSelect?(e.isFirstRun=!0,this.initIconPos):Di.GetUINode2DWorldPos(this.uiItem.m_Icon),e.hudShowEffect_FromPos.setValue(t.x,t.y)}this.questRangeEffectEcs||(this.questRangeEffectEcs=O.CreatPrefabEntityUsePos(N.Effect_QuestRange,this.signPos,null,new Laya.Vector3(2*this.questRange,1,2*this.questRange)))}else this.questSignEffectEcs&&(this.questSignEffectEcs.Destory(),this.questSignEffectEcs=null),this.questRangeEffectEcs&&(this.questRangeEffectEcs.Destory(),this.questRangeEffectEcs=null);e?this.uiItem.m_Status.setSelectedPage("Doing"):this.hasFinished||this.uiItem.m_Status.setSelectedPage("ToDo")}OnUpdate(e){if(this.isSelected&&!this.hasFinished){let t=K.UIModule().GetUI(Uf.UIName);if(t.view){let e=t.view.m_QuestCom;this.isInDigging&&(e.m_QuestProgress.value=Math.round(100*(1-this.remainDigTime/this.digCostTime))),e.m_QuestCon.setSelectedPage(this.questID),e.m_QuestProgress.visible=this.isInDigging,e.m_DigBtn.visible=!this.isInDigging,e.m_DigSpeedUpTip.visible=this.isInDigging,e.m_DigSpeedUpBtn.visible=this.isInDigging,t.view.m_Joy1.visible=!this.isInDigging}}}OnFixedUpdate(o){if(this.isSelected&&!this.hasFinished){let e=K.UIModule().GetUI(Uf.UIName),t=this.ecs.GetComponent(M),i=(e.view&&(e.view.m_QuestCom.visible=-1==this.ecs.GetComponent(R).areYouDriving&&Laya.Vector3.distance(t.pos,this.signPos)<=this.questRange),this.ecs.GetComponent(F));if(this.isClickDigBtn&&(this.isClickDigBtn=!1,this.isInDigging=!0,this.remainDigTime=this.digCostTime,i.nowState=Mf.StateName,this.ecs.GetComponent(v).isInFixed=!0,this.ecs.GetComponent(R).superArmor++),this.isInDigging){if(this.isClickDigSpeedUpBtn){this.isClickDigSpeedUpBtn=!1,this.remainDigTime-=this.digSpeedUpTime;let e=K.UIModule().GetUI(Uf.UIName);e.view&&e.view.m_QuestCom.m_QuestProgress.m_SpeedUp.play()}var a;i.nowState!=Mf.StateName&&i.nowState!=uc.StateName?(console.log("Stop Dig",i.nowState),this.OnDigOver()):(this.remainDigTime-=o,this.remainDigTime<=0&&(this.OnDigOver(),o=this.ecs.GetComponent(M),this.digHoleEffectEcsList.push(O.CreatPrefabEntityUsePos(N.Effect_QuestDigHole,o.pos,null,new Laya.Vector3(2*this.digRange,1,2*this.digRange))),o=new Laya.Vector2(this.targetPos.x-o.pos.x,this.targetPos.z-o.pos.z),S.VecRotate(o,45),Laya.Vector2.scalarLength(o)>this.digRange?(a="",a=Math.abs(o.x)>Math.abs(o.y)?0<o.x?"Left":"Right":0<o.y?"Up":"Down",P.onQuestTip.Trigger(K.Lz("ZQuest_"+Du.id+"_Tip_"+a))):this.hasFinished||this.Finish()))}}}OnDigOver(){this.ecs&&this.isInDigging&&(this.isInDigging=!1,this.ecs.GetComponent(v).isInFixed=!1,this.ecs.GetComponent(R).superArmor--)}OnFinish(){let e=K.UIModule().GetUI(Uf.UIName);e.view&&(e.view.m_QuestCom.visible=!1),V.BonuseLotteryItem(this.ecs,this.ecs,"TreasureHuntDrop-Star"+this.level,this.dropAndZombieCreateRange);var t=this.ecs.GetComponent(M);for(let e=0;e<this.zombieCount;e++){var i=K.DataModule().GetLocal().zombie.GetRandomZombie(V.CurrentDay,Math.random(),["Normal"]).ID,o=Su.Instance.GetRandomPoint(t.pos,this.dropAndZombieCreateRange);o?vu.IsPosInBunkersTrigger(o)?e--:Tf.CreatZombie(i,o):e--}this._Destroy()}OnReward(){this.rewardItemList=V.GetBonuseLotteryItemListByID("ZQuestTreasureHunt-Star"+this.level)}OnGiveUp(){let e=K.UIModule().GetUI(Uf.UIName);e.view&&(e.view.m_QuestCom.visible=!1),this._Destroy()}_Destroy(){this.questRangeEffectEcs&&this.questRangeEffectEcs.Destory(),this.questSignEffectEcs&&this.questSignEffectEcs.Destory();for(let e=0;e<this.digHoleEffectEcsList.length;e++)this.digHoleEffectEcsList[e].Destory();this.OnDigOver();let e=K.UIModule().GetUI(Uf.UIName);e.view&&(e.view.m_Joy1.visible=!0),P.onClickQuestDigBtn.Remove(this,this.OnClickQuestDigBtn),P.onClickQuestDigSpeedUpBtn.Remove(this,this.OnClickQuestDigSpeedUpBtn)}},Uu=Du,Lu=(Uu.id="TreasureHunt",class extends G{constructor(){super(Lu.id),this.killZombieCount=0,this.targetKillZombieCount=0,this.isNeedSelected=!1}OnInit(){var e=K.DataModule().GetLocal().zQuest.GetByKey(Lu.id);this.targetKillZombieCount=Math.round(this.level*(e.F1+(e.F2-e.F1)*q.Random())),this.titleText=K.Lz("ZQuest_"+Lu.id+"_Title"),this.contextText=K.Lz("ZQuest_"+Lu.id+"_Context",this.targetKillZombieCount),this.rewardText=K.Lz("ZQuest_"+Lu.id+"_Reward"),this.miniTitleText=K.Lz("ZQuest_"+Lu.id+"_MiniTitle"),this.miniContextText=K.Lz("ZQuest_"+Lu.id+"_MiniContext",""+this.targetKillZombieCount),this.miniCountContextText=K.Lz("ZQuest_Common_MiniCountText","0",""+this.targetKillZombieCount),this.uiRes=e.UIRes}OnStart(){this.killZombieCount=0,P.onKill.Register(this,this.OnKill),this.uiItem.m_Status.setSelectedPage("Doing")}OnKill(e,t,i,o){o.id==this.ecs.id&&t.GetComponent(ut)&&(this.killZombieCount++,this.miniCountContextText=K.Lz("ZQuest_Common_MiniCountText",""+Math.min(this.killZombieCount,this.targetKillZombieCount),""+this.targetKillZombieCount))}OnSelectedChange(e){}OnUpdate(e){this.hasFinished}OnFixedUpdate(e){this.hasFinished||this.killZombieCount>=this.targetKillZombieCount&&this.Finish()}OnFinish(){}OnReward(){this.rewardItemList=V.GetBonuseLotteryItemListByID("ZQuestKillZombie1-Star"+this.level)}OnGiveUp(){this._Destroy()}_Destroy(){P.onKill.Remove(this,this.OnKill)}}),Bu=Lu,bu=(Bu.id="KillZombie_1",class extends G{constructor(){super(bu.id),this.killZombieCount=0,this.targetKillZombieCount=0,this.isNeedSelected=!1}OnInit(){var e=K.DataModule().GetLocal().zQuest.GetByKey(bu.id);this.targetKillZombieCount=Math.round(this.level*(e.F1+(e.F2-e.F1)*q.Random())),this.titleText=K.Lz("ZQuest_"+bu.id+"_Title"),this.contextText=K.Lz("ZQuest_"+bu.id+"_Context",this.targetKillZombieCount),this.rewardText=K.Lz("ZQuest_"+bu.id+"_Reward"),this.miniTitleText=K.Lz("ZQuest_"+bu.id+"_MiniTitle"),this.miniContextText=K.Lz("ZQuest_"+bu.id+"_MiniContext",""+this.targetKillZombieCount),this.miniCountContextText=K.Lz("ZQuest_Common_MiniCountText","0",""+this.targetKillZombieCount),this.uiRes=e.UIRes}OnStart(){this.killZombieCount=0,P.onKill.Register(this,this.OnKill),this.uiItem.m_Status.setSelectedPage("Doing")}OnKill(e,t,i,o){o.id==this.ecs.id&&(o=t.GetComponent(ut))&&"Zombie_2"==o.zombieID&&(this.killZombieCount++,this.miniCountContextText=K.Lz("ZQuest_Common_MiniCountText",""+Math.min(this.killZombieCount,this.targetKillZombieCount),""+this.targetKillZombieCount))}OnSelectedChange(e){}OnUpdate(e){this.hasFinished}OnFixedUpdate(e){this.hasFinished||this.killZombieCount>=this.targetKillZombieCount&&this.Finish()}OnFinish(){}OnReward(){this.rewardItemList=V.GetBonuseLotteryItemListByID("ZQuestKillZombie1-Star"+this.level)}OnGiveUp(){this._Destroy()}_Destroy(){P.onKill.Remove(this,this.OnKill)}}),Au=bu,xu=(Au.id="KillZombie_2",class extends G{constructor(){super(xu.id),this.killZombieCount=0,this.targetKillZombieCount=0,this.isNeedSelected=!1}OnInit(){var e=K.DataModule().GetLocal().zQuest.GetByKey(xu.id);this.targetKillZombieCount=Math.round(this.level*(e.F1+(e.F2-e.F1)*q.Random())),this.titleText=K.Lz("ZQuest_"+xu.id+"_Title"),this.contextText=K.Lz("ZQuest_"+xu.id+"_Context",this.targetKillZombieCount),this.rewardText=K.Lz("ZQuest_"+xu.id+"_Reward"),this.miniTitleText=K.Lz("ZQuest_"+xu.id+"_MiniTitle"),this.miniContextText=K.Lz("ZQuest_"+xu.id+"_MiniContext",""+this.targetKillZombieCount),this.miniCountContextText=K.Lz("ZQuest_Common_MiniCountText","0",""+this.targetKillZombieCount),this.uiRes=e.UIRes}OnStart(){this.killZombieCount=0,P.onKill.Register(this,this.OnKill),this.uiItem.m_Status.setSelectedPage("Doing")}OnKill(e,t,i,o){o.id==this.ecs.id&&(o=t.GetComponent(ut))&&"Zombie_5"==o.zombieID&&(this.killZombieCount++,this.miniCountContextText=K.Lz("ZQuest_Common_MiniCountText",""+Math.min(this.killZombieCount,this.targetKillZombieCount),""+this.targetKillZombieCount))}OnSelectedChange(e){}OnUpdate(e){this.hasFinished}OnFixedUpdate(e){this.hasFinished||this.killZombieCount>=this.targetKillZombieCount&&this.Finish()}OnFinish(){}OnReward(){this.rewardItemList=V.GetBonuseLotteryItemListByID("ZQuestKillZombie1-Star"+this.level)}OnGiveUp(){this._Destroy()}_Destroy(){P.onKill.Remove(this,this.OnKill)}}),Tu=xu,ku=(Tu.id="KillZombie_5",class extends G{constructor(){super(ku.id),this.killZombieCount=0,this.targetKillZombieCount=0,this.isNeedSelected=!1}OnInit(){var e=K.DataModule().GetLocal().zQuest.GetByKey(ku.id);this.targetKillZombieCount=Math.round(this.level*(e.F1+(e.F2-e.F1)*q.Random())),this.titleText=K.Lz("ZQuest_"+ku.id+"_Title"),this.contextText=K.Lz("ZQuest_"+ku.id+"_Context",this.targetKillZombieCount),this.rewardText=K.Lz("ZQuest_"+ku.id+"_Reward"),this.miniTitleText=K.Lz("ZQuest_"+ku.id+"_MiniTitle"),this.miniContextText=K.Lz("ZQuest_"+ku.id+"_MiniContext",""+this.targetKillZombieCount),this.miniCountContextText=K.Lz("ZQuest_Common_MiniCountText","0",""+this.targetKillZombieCount),this.uiRes=e.UIRes}OnStart(){this.killZombieCount=0,P.onKill.Register(this,this.OnKill),this.uiItem.m_Status.setSelectedPage("Doing")}OnKill(e,t,i,o){o.id==this.ecs.id&&(o=t.GetComponent(ut))&&"Zombie_6"==o.zombieID&&(this.killZombieCount++,this.miniCountContextText=K.Lz("ZQuest_Common_MiniCountText",""+Math.min(this.killZombieCount,this.targetKillZombieCount),""+this.targetKillZombieCount))}OnSelectedChange(e){}OnUpdate(e){this.hasFinished}OnFixedUpdate(e){this.hasFinished||this.killZombieCount>=this.targetKillZombieCount&&this.Finish()}OnFinish(){}OnReward(){this.rewardItemList=V.GetBonuseLotteryItemListByID("ZQuestKillZombie1-Star"+this.level)}OnGiveUp(){this._Destroy()}_Destroy(){P.onKill.Remove(this,this.OnKill)}}),Mu=ku,Ru=(Mu.id="KillZombie_6",class extends G{constructor(){super(Ru.id),this.killZombieCount=0,this.targetKillZombieCount=0,this.isNeedSelected=!1}OnInit(){var e=K.DataModule().GetLocal().zQuest.GetByKey(Ru.id);this.targetKillZombieCount=Math.round(this.level*(e.F1+(e.F2-e.F1)*q.Random())),this.titleText=K.Lz("ZQuest_"+Ru.id+"_Title"),this.contextText=K.Lz("ZQuest_"+Ru.id+"_Context",this.targetKillZombieCount),this.rewardText=K.Lz("ZQuest_"+Ru.id+"_Reward"),this.miniTitleText=K.Lz("ZQuest_"+Ru.id+"_MiniTitle"),this.miniContextText=K.Lz("ZQuest_"+Ru.id+"_MiniContext",""+this.targetKillZombieCount),this.miniCountContextText=K.Lz("ZQuest_Common_MiniCountText","0",""+this.targetKillZombieCount),this.uiRes=e.UIRes}OnStart(){this.killZombieCount=0,P.onKill.Register(this,this.OnKill),this.uiItem.m_Status.setSelectedPage("Doing")}OnKill(e,t,i,o){o.id==this.ecs.id&&(o=t.GetComponent(ut))&&"Zombie_3"==o.zombieID&&(this.killZombieCount++,this.miniCountContextText=K.Lz("ZQuest_Common_MiniCountText",""+Math.min(this.killZombieCount,this.targetKillZombieCount),""+this.targetKillZombieCount))}OnSelectedChange(e){}OnUpdate(e){this.hasFinished}OnFixedUpdate(e){this.hasFinished||this.killZombieCount>=this.targetKillZombieCount&&this.Finish()}OnFinish(){}OnReward(){this.rewardItemList=V.GetBonuseLotteryItemListByID("ZQuestKillZombie1-Star"+this.level)}OnGiveUp(){this._Destroy()}_Destroy(){P.onKill.Remove(this,this.OnKill)}}),Pu=Ru,Eu=(Pu.id="KillZombie_3",class extends G{constructor(){super(Eu.id),this.killZombieCount=0,this.targetKillZombieCount=0,this.isNeedSelected=!1}OnInit(){var e=K.DataModule().GetLocal().zQuest.GetByKey(Eu.id);this.targetKillZombieCount=Math.round(this.level*(e.F1+(e.F2-e.F1)*q.Random())),this.titleText=K.Lz("ZQuest_"+Eu.id+"_Title"),this.contextText=K.Lz("ZQuest_"+Eu.id+"_Context",this.targetKillZombieCount),this.rewardText=K.Lz("ZQuest_"+Eu.id+"_Reward"),this.miniTitleText=K.Lz("ZQuest_"+Eu.id+"_MiniTitle"),this.miniContextText=K.Lz("ZQuest_"+Eu.id+"_MiniContext",""+this.targetKillZombieCount),this.miniCountContextText=K.Lz("ZQuest_Common_MiniCountText","0",""+this.targetKillZombieCount),this.uiRes=e.UIRes}OnStart(){this.killZombieCount=0,P.onKill.Register(this,this.OnKill),this.uiItem.m_Status.setSelectedPage("Doing")}OnKill(e,t,i,o){o.id==this.ecs.id&&(o=t.GetComponent(ut))&&"Zombie_4"==o.zombieID&&(this.killZombieCount++,this.miniCountContextText=K.Lz("ZQuest_Common_MiniCountText",""+Math.min(this.killZombieCount,this.targetKillZombieCount),""+this.targetKillZombieCount))}OnSelectedChange(e){}OnUpdate(e){this.hasFinished}OnFixedUpdate(e){this.hasFinished||this.killZombieCount>=this.targetKillZombieCount&&this.Finish()}OnFinish(){}OnReward(){this.rewardItemList=V.GetBonuseLotteryItemListByID("ZQuestKillZombie1-Star"+this.level)}OnGiveUp(){this._Destroy()}_Destroy(){P.onKill.Remove(this,this.OnKill)}}),Nu=Eu,Fu=(Nu.id="KillZombie_4",class extends G{constructor(){super(Fu.id),this.killZombieCount=0,this.targetKillZombieCount=0,this.isNeedSelected=!1}OnInit(){var e=K.DataModule().GetLocal().zQuest.GetByKey(Fu.id);this.targetKillZombieCount=Math.round(this.level*(e.F1+(e.F2-e.F1)*q.Random())),this.titleText=K.Lz("ZQuest_"+Fu.id+"_Title"),this.contextText=K.Lz("ZQuest_"+Fu.id+"_Context",this.targetKillZombieCount),this.rewardText=K.Lz("ZQuest_"+Fu.id+"_Reward"),this.miniTitleText=K.Lz("ZQuest_"+Fu.id+"_MiniTitle"),this.miniContextText=K.Lz("ZQuest_"+Fu.id+"_MiniContext",""+this.targetKillZombieCount),this.miniCountContextText=K.Lz("ZQuest_Common_MiniCountText","0",""+this.targetKillZombieCount),this.uiRes=e.UIRes}OnStart(){this.killZombieCount=0,P.onKill.Register(this,this.OnKill),this.uiItem.m_Status.setSelectedPage("Doing")}OnKill(e,t,i,o){o.id==this.ecs.id&&(o=t.GetComponent(ut))&&"Zombie_7"==o.zombieID&&(this.killZombieCount++,this.miniCountContextText=K.Lz("ZQuest_Common_MiniCountText",""+Math.min(this.killZombieCount,this.targetKillZombieCount),""+this.targetKillZombieCount))}OnSelectedChange(e){}OnUpdate(e){this.hasFinished}OnFixedUpdate(e){this.hasFinished||this.killZombieCount>=this.targetKillZombieCount&&this.Finish()}OnFinish(){}OnReward(){this.rewardItemList=V.GetBonuseLotteryItemListByID("ZQuestKillZombie1-Star"+this.level)}OnGiveUp(){this._Destroy()}_Destroy(){P.onKill.Remove(this,this.OnKill)}}),Ou=Fu,Hu=(Ou.id="KillZombie_7",class extends G{constructor(){super(Hu.id),this.killZombieCount=0,this.targetKillZombieCount=0,this.isNeedSelected=!1}OnInit(){var e=K.DataModule().GetLocal().zQuest.GetByKey(Hu.id);this.targetKillZombieCount=Math.round(this.level*(e.F1+(e.F2-e.F1)*q.Random())),this.titleText=K.Lz("ZQuest_"+Hu.id+"_Title"),this.contextText=K.Lz("ZQuest_"+Hu.id+"_Context",this.targetKillZombieCount),this.rewardText=K.Lz("ZQuest_"+Hu.id+"_Reward"),this.miniTitleText=K.Lz("ZQuest_"+Hu.id+"_MiniTitle"),this.miniContextText=K.Lz("ZQuest_"+Hu.id+"_MiniContext",""+this.targetKillZombieCount),this.miniCountContextText=K.Lz("ZQuest_Common_MiniCountText","0",""+this.targetKillZombieCount),this.uiRes=e.UIRes}OnStart(){this.killZombieCount=0,P.onKill.Register(this,this.OnKill),this.uiItem.m_Status.setSelectedPage("Doing")}OnKill(e,t,i,o){o.id==this.ecs.id&&(o=t.GetComponent(ut))&&"Elite"==K.DataModule().GetLocal().zombie.GetByKey(o.zombieID).Type&&(this.killZombieCount++,this.miniCountContextText=K.Lz("ZQuest_Common_MiniCountText",""+Math.min(this.killZombieCount,this.targetKillZombieCount),""+this.targetKillZombieCount))}OnSelectedChange(e){e?(this.uiItem.m_Status.setSelectedPage("Doing"),this.uiItem.m_GiveUpBtn.visible=!1):this.hasFinished||this.uiItem.m_Status.setSelectedPage("ToDo")}OnUpdate(e){this.hasFinished}OnFixedUpdate(e){this.hasFinished||this.killZombieCount>=this.targetKillZombieCount&&this.Finish()}OnFinish(){}OnReward(){this.rewardItemList=V.GetBonuseLotteryItemListByID("ZQuestKillEliteZombie1-Star"+this.level)}OnGiveUp(){this._Destroy()}_Destroy(){P.onKill.Remove(this,this.OnKill)}}),Vu=Hu,zu=(Vu.id="KillEliteZombie_1",class extends G{constructor(){super(zu.id),this.killZombieCount=0,this.targetKillZombieCount=0,this.isNeedSelected=!1}OnInit(){var e=K.DataModule().GetLocal().zQuest.GetByKey(zu.id);this.targetKillZombieCount=Math.round(this.level*(e.F1+(e.F2-e.F1)*q.Random())),this.titleText=K.Lz("ZQuest_"+zu.id+"_Title"),this.contextText=K.Lz("ZQuest_"+zu.id+"_Context",this.targetKillZombieCount),this.rewardText=K.Lz("ZQuest_"+zu.id+"_Reward"),this.miniTitleText=K.Lz("ZQuest_"+zu.id+"_MiniTitle"),this.miniContextText=K.Lz("ZQuest_"+zu.id+"_MiniContext",""+this.targetKillZombieCount),this.miniCountContextText=K.Lz("ZQuest_Common_MiniCountText","0",""+this.targetKillZombieCount),this.uiRes=e.UIRes}OnStart(){this.killZombieCount=0,P.onKill.Register(this,this.OnKill),this.uiItem.m_Status.setSelectedPage("Doing")}OnKill(e,t,i,o){o.id==this.ecs.id&&(o=t.GetComponent(ut))&&"Zombie_Tank"==o.zombieID&&(this.killZombieCount++,this.miniCountContextText=K.Lz("ZQuest_Common_MiniCountText",""+Math.min(this.killZombieCount,this.targetKillZombieCount),""+this.targetKillZombieCount))}OnSelectedChange(e){}OnUpdate(e){this.hasFinished}OnFixedUpdate(e){this.hasFinished||this.killZombieCount>=this.targetKillZombieCount&&this.Finish()}OnFinish(){}OnReward(){this.rewardItemList=V.GetBonuseLotteryItemListByID("ZQuestKillEliteZombie1-Star"+this.level)}OnGiveUp(){this._Destroy()}_Destroy(){P.onKill.Remove(this,this.OnKill)}}),Wu=zu,Zu=(Wu.id="KillEliteZombie_2",class extends G{constructor(){super(Zu.id),this.killZombieCount=0,this.targetKillZombieCount=0,this.isNeedSelected=!1}OnInit(){var e=K.DataModule().GetLocal().zQuest.GetByKey(Zu.id);this.targetKillZombieCount=Math.round(this.level*(e.F1+(e.F2-e.F1)*q.Random())),this.titleText=K.Lz("ZQuest_"+Zu.id+"_Title"),this.contextText=K.Lz("ZQuest_"+Zu.id+"_Context",this.targetKillZombieCount),this.rewardText=K.Lz("ZQuest_"+Zu.id+"_Reward"),this.miniTitleText=K.Lz("ZQuest_"+Zu.id+"_MiniTitle"),this.miniContextText=K.Lz("ZQuest_"+Zu.id+"_MiniContext",""+this.targetKillZombieCount),this.miniCountContextText=K.Lz("ZQuest_Common_MiniCountText","0",""+this.targetKillZombieCount),this.uiRes=e.UIRes}OnStart(){this.killZombieCount=0,P.onKill.Register(this,this.OnKill),this.uiItem.m_Status.setSelectedPage("Doing")}OnKill(e,t,i,o){o.id==this.ecs.id&&(o=t.GetComponent(ut))&&"Zombie_Butcher"==o.zombieID&&(this.killZombieCount++,this.miniCountContextText=K.Lz("ZQuest_Common_MiniCountText",""+Math.min(this.killZombieCount,this.targetKillZombieCount),""+this.targetKillZombieCount))}OnSelectedChange(e){}OnUpdate(e){this.hasFinished}OnFixedUpdate(e){this.hasFinished||this.killZombieCount>=this.targetKillZombieCount&&this.Finish()}OnFinish(){}OnReward(){this.rewardItemList=V.GetBonuseLotteryItemListByID("ZQuestKillEliteZombie1-Star"+this.level)}OnGiveUp(){this._Destroy()}_Destroy(){P.onKill.Remove(this,this.OnKill)}}),ju=Zu,Ku=(ju.id="KillEliteZombie_3",class extends G{constructor(){super(Ku.id),this.questSignEffectEcs=null,this.questRangeEffectEcs=null,this.destroyZombieFactoryCount=0,this.targetDestroyZombieFactoryCount=0}OnInit(){var e=K.DataModule().GetLocal().zQuest.GetByKey(Ku.id);this.targetDestroyZombieFactoryCount=Math.round(this.level*e.F1),this.titleText=K.Lz("ZQuest_"+Ku.id+"_Title"),this.contextText=K.Lz("ZQuest_"+Ku.id+"_Context",this.targetDestroyZombieFactoryCount),this.rewardText=K.Lz("ZQuest_"+Ku.id+"_Reward"),this.miniTitleText=K.Lz("ZQuest_"+Ku.id+"_MiniTitle"),this.miniContextText=K.Lz("ZQuest_"+Ku.id+"_MiniContext",""+this.targetDestroyZombieFactoryCount),this.miniCountContextText=K.Lz("ZQuest_Common_MiniCountText","0",""+this.targetDestroyZombieFactoryCount),this.uiRes=e.UIRes}OnStart(){P.onDestroyItem.Register(this,this.OnDestroyZombieFactory),this.uiItem.m_Status.setSelectedPage("Doing")}OnDestroyZombieFactory(e,t,i){i.id==this.ecs.id&&t.GetComponent(pu)&&(this.destroyZombieFactoryCount++,this.miniCountContextText=K.Lz("ZQuest_Common_MiniCountText",""+Math.min(this.destroyZombieFactoryCount,this.targetDestroyZombieFactoryCount),""+this.targetDestroyZombieFactoryCount))}OnSelectedChange(e){e?this.uiItem.m_Status.setSelectedPage("Doing"):this.hasFinished||this.uiItem.m_Status.setSelectedPage("ToDo")}OnUpdate(e){this.hasFinished}OnFixedUpdate(e){if(!this.hasFinished)if(this.destroyZombieFactoryCount>=this.targetDestroyZombieFactoryCount)this.Finish();else{let r=q.NowGameWorld.GetEntitys([pu.id]),e=!0;if(this.isSelected&&0<r.length){e=!1;let a=1/0,n=null,s=-1,l=this.ecs.GetComponent(M).pos;for(let o=0;o<r.length;o++){let e=r[o],t=e.GetComponent(M).pos,i=Laya.Vector3.distanceSquared(t,l);i<a&&(n=t,s=e.id,a=i)}if(n){if(this.questSignEffectEcs)this.questSignEffectEcs.GetComponent(M).SetPos1(n.x-3,3.5,n.z-3);else{this.questSignEffectEcs=O.CreatPrefabEntityUsePos(N.Effect_QuestSign,new Laya.Vector3);let e=this.questSignEffectEcs.GetComponent(Ft),t=(e.iconUrl=x.GetImage("Quest_"+this.questID),null);e.hudShowEffect_Progress=-.5,t=this.isFirstSelect?(e.isFirstRun=!0,this.initIconPos):Di.GetUINode2DWorldPos(this.uiItem.m_Icon),e.hudShowEffect_FromPos.setValue(t.x,t.y)}this.questRangeEffectEcs?this.questRangeEffectEcs.GetComponent(M).SetPos1(n.x,.1,n.z):this.questRangeEffectEcs=O.CreatPrefabEntityUsePos(N.Effect_QuestRange,new Laya.Vector3,null,new Laya.Vector3(12,1,12))}for(let t=0;t<r.length;t++){let e=r[t];e.GetComponent(Ft).ban=e.id==s}}e&&this._DestroyQuestSign()}}OnFinish(){this._Destroy()}OnReward(){this.rewardItemList=V.GetBonuseLotteryItemListByID("ZQuestDestroyZombieFactory-Star"+this.level)}OnGiveUp(){this._Destroy()}_DestroyQuestSign(){this.questSignEffectEcs&&(this.questSignEffectEcs.Destory(),this.questSignEffectEcs=null),this.questRangeEffectEcs&&(this.questRangeEffectEcs.Destory(),this.questRangeEffectEcs=null);let t=q.NowGameWorld.GetEntitys([pu.id]);for(let e=0;e<t.length;e++)t[e].GetComponent(Ft).ban=!1}_Destroy(){this._DestroyQuestSign(),P.onDestroyItem.Remove(this,this.OnDestroyZombieFactory)}}),qu=Ku,Yu=(qu.id="DestroyZombieFactory",class extends G{constructor(){super(Yu.id),this.killZombieCount=0,this.targetKillZombieCount=0,this.isNeedSelected=!1}OnInit(){var e=K.DataModule().GetLocal().zQuest.GetByKey(Yu.id);this.targetKillZombieCount=Math.round(this.level*(e.F1+(e.F2-e.F1)*q.Random())),this.titleText=K.Lz("ZQuest_"+Yu.id+"_Title"),this.contextText=K.Lz("ZQuest_"+Yu.id+"_Context",this.targetKillZombieCount),this.rewardText=K.Lz("ZQuest_"+Yu.id+"_Reward"),this.miniTitleText=K.Lz("ZQuest_"+Yu.id+"_MiniTitle"),this.miniContextText=K.Lz("ZQuest_"+Yu.id+"_MiniContext",""+this.targetKillZombieCount),this.miniCountContextText=K.Lz("ZQuest_Common_MiniCountText","0",""+this.targetKillZombieCount),this.uiRes=e.UIRes}OnStart(){this.killZombieCount=0,P.onKill.Register(this,this.OnKill),this.uiItem.m_Status.setSelectedPage("Doing")}OnKill(e,t,i,o){o.id==this.ecs.id&&(o=t.GetComponent(ut))&&"Zombie_CowBoy"==o.zombieID&&(this.killZombieCount++,this.miniCountContextText=K.Lz("ZQuest_Common_MiniCountText",""+Math.min(this.killZombieCount,this.targetKillZombieCount),""+this.targetKillZombieCount))}OnSelectedChange(e){}OnUpdate(e){this.hasFinished}OnFixedUpdate(e){this.hasFinished||this.killZombieCount>=this.targetKillZombieCount&&this.Finish()}OnFinish(){}OnReward(){this.rewardItemList=V.GetBonuseLotteryItemListByID("ZQuestKillEliteZombie1-Star"+this.level)}OnGiveUp(){this._Destroy()}_Destroy(){P.onKill.Remove(this,this.OnKill)}}),Qu=Yu,Ju=(Qu.id="KillEliteZombie_4",class extends G{constructor(){super(Ju.id),this.killZombieCount=0,this.targetKillZombieCount=0,this.isNeedSelected=!1}OnInit(){var e=K.DataModule().GetLocal().zQuest.GetByKey(Ju.id);this.targetKillZombieCount=Math.round(this.level*(e.F1+(e.F2-e.F1)*q.Random())),this.titleText=K.Lz("ZQuest_"+Ju.id+"_Title"),this.contextText=K.Lz("ZQuest_"+Ju.id+"_Context",this.targetKillZombieCount),this.rewardText=K.Lz("ZQuest_"+Ju.id+"_Reward"),this.miniTitleText=K.Lz("ZQuest_"+Ju.id+"_MiniTitle"),this.miniContextText=K.Lz("ZQuest_"+Ju.id+"_MiniContext",""+this.targetKillZombieCount),this.miniCountContextText=K.Lz("ZQuest_Common_MiniCountText","0",""+this.targetKillZombieCount),this.uiRes=e.UIRes}OnStart(){this.killZombieCount=0,P.onKill.Register(this,this.OnKill),this.uiItem.m_Status.setSelectedPage("Doing")}OnKill(e,t,i,o){o.id==this.ecs.id&&(o=t.GetComponent(ut))&&"Zombie_Jumper"==o.zombieID&&(this.killZombieCount++,this.miniCountContextText=K.Lz("ZQuest_Common_MiniCountText",""+Math.min(this.killZombieCount,this.targetKillZombieCount),""+this.targetKillZombieCount))}OnSelectedChange(e){}OnUpdate(e){this.hasFinished}OnFixedUpdate(e){this.hasFinished||this.killZombieCount>=this.targetKillZombieCount&&this.Finish()}OnFinish(){}OnReward(){this.rewardItemList=V.GetBonuseLotteryItemListByID("ZQuestKillEliteZombie1-Star"+this.level)}OnGiveUp(){this._Destroy()}_Destroy(){P.onKill.Remove(this,this.OnKill)}}),Xu=Ju,$u=(Xu.id="KillEliteZombie_5",class extends G{constructor(){super($u.id),this.questSignEffectEcs=null,this.questRangeEffectEcs=null}OnInit(){var e=K.DataModule().GetLocal().zQuest.GetByKey($u.id);this.titleText=K.Lz("ZQuest_"+$u.id+"_Title"),this.contextText=K.Lz("ZQuest_"+$u.id+"_Context"),this.rewardText=K.Lz("ZQuest_"+$u.id+"_Reward"),this.miniTitleText=K.Lz("ZQuest_"+$u.id+"_MiniTitle"),this.miniContextText=K.Lz("ZQuest_"+$u.id+"_MiniContext"),this.miniCountContextText="",this.uiRes=e.UIRes}OnStart(){this.isFirstSelect=!1,this.uiItem.m_Status.setSelectedPage("Doing"),P.onEnterTent.Register(this,this.onEnterTent)}OnSelectedChange(e){e?this.uiItem.m_Status.setSelectedPage("Doing"):this.hasFinished||this.uiItem.m_Status.setSelectedPage("ToDo")}OnUpdate(e){this.hasFinished}onEnterTent(){this.Finish()}OnFixedUpdate(e){if(!this.hasFinished){let r=q.NowGameWorld.GetEntitys([pt.id]),e=!0;if(this.isSelected&&0<r.length){e=!1;let a=1/0,n=null,s=-1,l=this.ecs.GetComponent(M).pos;for(let o=0;o<r.length;o++){let e=r[o],t=e.GetComponent(M).pos,i=Laya.Vector3.distanceSquared(t,l);i<a&&(n=e.GetComponent(B).sp.getChildByName("TentPoint").transform.position,s=e.id,a=i)}if(n){if(this.questSignEffectEcs)this.questSignEffectEcs.GetComponent(M).SetPos1(n.x-4,3.5,n.z-4);else{this.questSignEffectEcs=O.CreatPrefabEntityUsePos(N.Effect_QuestSign,new Laya.Vector3);let e=this.questSignEffectEcs.GetComponent(Ft),t=(e.iconUrl=x.GetImage("Quest_"+this.questID),null);e.hudShowEffect_Progress=-.5,t=this.isFirstSelect?(e.isFirstRun=!0,this.initIconPos):Di.GetUINode2DWorldPos(this.uiItem.m_Icon),e.hudShowEffect_FromPos.setValue(t.x,t.y)}this.questRangeEffectEcs?this.questRangeEffectEcs.GetComponent(M).SetPos1(n.x,.1,n.z):this.questRangeEffectEcs=O.CreatPrefabEntityUsePos(N.Effect_QuestRange,new Laya.Vector3,null,new Laya.Vector3(5,1,5))}for(let t=0;t<r.length;t++){let e=r[t];e.GetComponent(Ft).ban=e.id==s}}e&&this._DestroyQuestSign()}}OnFinish(){this._Destroy()}OnReward(){this.rewardItemList=V.GetBonuseLotteryItemListByID("ZQuestGoToBunker")}OnGiveUp(){this._Destroy()}_DestroyQuestSign(){this.questSignEffectEcs&&(this.questSignEffectEcs.Destory(),this.questSignEffectEcs=null),this.questRangeEffectEcs&&(this.questRangeEffectEcs.Destory(),this.questRangeEffectEcs=null);let t=q.NowGameWorld.GetEntitys([pt.id]);for(let e=0;e<t.length;e++)t[e].GetComponent(Ft).ban=!1}_Destroy(){this._DestroyQuestSign(),P.onEnterTent.Remove(this,this.onEnterTent)}}),ep=$u,tp=(ep.id="GoToBunker",class extends G{constructor(){super(tp.id),this.questSignEffectEcs=null,this.questRangeEffectEcs=null}OnInit(){var e=K.DataModule().GetLocal().zQuest.GetByKey(tp.id);this.titleText=K.Lz("ZQuest_"+tp.id+"_Title"),this.contextText=K.Lz("ZQuest_"+tp.id+"_Context"),this.rewardText=K.Lz("ZQuest_"+tp.id+"_Reward"),this.miniTitleText=K.Lz("ZQuest_"+tp.id+"_MiniTitle"),this.miniContextText=K.Lz("ZQuest_"+tp.id+"_MiniContext"),this.miniCountContextText="",this.uiRes=e.UIRes}OnStart(){this.isFirstSelect=!1,this.uiItem.m_Status.setSelectedPage("Doing"),P.onDestroyItem.Register(this,this.onDestroyItem)}OnSelectedChange(e){e?this.uiItem.m_Status.setSelectedPage("Doing"):this.hasFinished||this.uiItem.m_Status.setSelectedPage("ToDo")}OnUpdate(e){this.hasFinished}onDestroyItem(e,t,i){i.id==this.ecs.id&&t.GetComponent(Ft).type==Z.Chest&&this.Finish()}OnFixedUpdate(e){if(!this.hasFinished){let r=q.NowGameWorld.GetEntitys([Ft.id]),e=(r=r.filter(function(e){if(e.GetComponent(Ft).type==Z.Chest)return!0}),!0);if(this.isSelected&&0<r.length){e=!1;let a=1/0,n=null,s=-1,l=this.ecs.GetComponent(M).pos;for(let o=0;o<r.length;o++){let e=r[o],t=e.GetComponent(M).pos,i=Laya.Vector3.distanceSquared(t,l);i<a&&(n=t,s=e.id,a=i)}if(n){if(this.questSignEffectEcs)this.questSignEffectEcs.GetComponent(M).SetPos1(n.x-3,3.5,n.z-3);else{this.questSignEffectEcs=O.CreatPrefabEntityUsePos(N.Effect_QuestSign,new Laya.Vector3,new Laya.Vector3,new Laya.Vector3(.5,.5,.5));let e=this.questSignEffectEcs.GetComponent(Ft),t=(e.iconUrl=x.GetImage("Quest_"+this.questID),null);e.hudShowEffect_Progress=-.5,t=this.isFirstSelect?(e.isFirstRun=!0,this.initIconPos):Di.GetUINode2DWorldPos(this.uiItem.m_Icon),e.hudShowEffect_FromPos.setValue(t.x,t.y)}this.questRangeEffectEcs?this.questRangeEffectEcs.GetComponent(M).SetPos1(n.x,.1,n.z):this.questRangeEffectEcs=O.CreatPrefabEntityUsePos(N.Effect_QuestRange,new Laya.Vector3,null,new Laya.Vector3(5,1,5))}for(let t=0;t<r.length;t++){let e=r[t];e.GetComponent(Ft).ban=e.id==s}}e&&this._DestroyQuestSign()}}OnFinish(){this._Destroy()}OnReward(){this.rewardItemList=V.GetBonuseLotteryItemListByID("ZQuestOpenChest")}OnGiveUp(){this._Destroy()}_DestroyQuestSign(){this.questSignEffectEcs&&(this.questSignEffectEcs.Destory(),this.questSignEffectEcs=null),this.questRangeEffectEcs&&(this.questRangeEffectEcs.Destory(),this.questRangeEffectEcs=null);let t=q.NowGameWorld.GetEntitys([Ft.id]);t=t.filter(function(e){if("Chest"==e.GetComponent(Ft).type)return!0});for(let e=0;e<t.length;e++)t[e].GetComponent(Ft).ban=!1}_Destroy(){this._DestroyQuestSign(),P.onDestroyItem.Remove(this,this.onDestroyItem)}}),ip=tp,op=(ip.id="OpenChest",class{static get dict(){return op._dict||(op._dict={},op._dict[ep.id]=ep,op._dict[ip.id]=ip,op._dict[qu.id]=qu,op._dict[Uu.id]=Uu,op._dict[Bu.id]=Bu,op._dict[Au.id]=Au,op._dict[Pu.id]=Pu,op._dict[Nu.id]=Nu,op._dict[Tu.id]=Tu,op._dict[Mu.id]=Mu,op._dict[Ou.id]=Ou,op._dict[Vu.id]=Vu,op._dict[Wu.id]=Wu,op._dict[ju.id]=ju,op._dict[Qu.id]=Qu,op._dict[Xu.id]=Xu),op._dict}static CreateByID(e){let t=op.dict[e];return t?new t:null}}),ap=op;ap.Index=1,ap._dict=null;var np,sp=class extends lt{constructor(){super(...arguments),this.systemName="QuestSystem",this.grounp=new dt([Cu.id]),this.nowQuestMaxStar=0}Init(){this.nowQuestMaxStar=1}Update(){let s=A.TimeDelta,l=this.world.GetEntitysByMatcher(this.grounp),r=K.UIModule().GetUI(Uf.UIName);for(let t=0;t<l.length;t++){let e=l[t],i=e.HasComponent(_t.id),o=e.GetComponent(Cu),a=0,n=0;for(let t=0;t<o.questList.length;t++){let e=o.questList[t];e.Update(s),i&&(a++,e.hasFinished&&n++)}r.view&&(r.view.m_QuestPanel.m_Status.setSelectedIndex(0<a?1:0),r.view.m_QuestPanelBtn.m_Status.setSelectedIndex(0==a||0<n?1:0),r.view.m_QuestPanel.m_QuestCount.setSelectedIndex(o.questList.length))}}FixedUpdate(){let i=A.FixedTimeDelta,o=this.world.GetEntitysByMatcher(this.grounp);for(let e=0;e<o.length;e++){let t=o[e].GetComponent(Cu);for(let e=0;e<t.questList.length;e++)t.questList[e].OnFixedUpdate(i)}V.zombieMode_QuestStar>this.nowQuestMaxStar&&(this.nowQuestMaxStar=V.zombieMode_QuestStar,P.onQuestStarLevelUp.Trigger())}LateUpdate(){}Destroy(){}OnAddComponent(e,t){}OnRemoveComponent(e,t){}static GetQuest(e){let t=ap.CreateByID(e);return t&&(t.level=Math.ceil(Math.random()*V.zombieMode_QuestStar),t.Init()),t}static AddQuest(e,t){let i=e.GetComponent(Cu),o=(t.ecs=e,t.Start(),i.questList.push(t),t.isNeedSelected&&sp.SelectQuest(e,t.questIndex),K.UIModule().GetUI(Uf.UIName));o.view&&(o.view.m_QuestPanel.visible=!0)}static SelectQuest(e,i){var o=e.GetComponent(Cu);for(let t=0;t<o.questList.length;t++){let e=o.questList[t];e.isNeedSelected&&(e.questIndex==i?e.isSelected||(e.isSelected=!0,e.OnSelectedChange(!0)):e.isSelected&&(e.isSelected=!1,e.isFirstSelect=!1,e.OnSelectedChange(!1)))}}static DelQuest(e,t){let i=e.GetComponent(Cu);for(let e=0;e<i.questList.length;e++)if(i.questList[e].questIndex==t){i.questList.splice(e,1);break}}static AutoSelectQuest(t){let i=!1,o=t.GetComponent(Cu);for(let e=0;e<o.questList.length;e++){var a=o.questList[e];a.isNeedSelected&&a.isSelected&&!a.hasFinished&&(i=!0)}if(!i)for(let e=0;e<o.questList.length;e++){var n=o.questList[e];!n.isNeedSelected||n.isSelected||n.hasFinished||sp.SelectQuest(t,n.questIndex)}}},lp=((G=np=np||{}).Daytime="Daytime",G.Night="Night",G.BloodyNight="BloodyNight",class{static BuffInit(e,t,i,o){o?o.buffKeepTime>i.buffKeepTime&&(i.buffKeepTime=o.buffKeepTime):(t.GetComponent(R).speedScale*=i.f1,t.GetComponent(F).nowState==kf.StateName&&Tf.UpdateZombieMoveAnimation(t))}static BuffUpdate(e,t,i,o){}static BuffDispose(e,t,i,o){t.GetComponent(R).speedScale/=i.f1,t.GetComponent(F).nowState==kf.StateName&&Tf.UpdateZombieMoveAnimation(t)}static HitedBuffDeal(e,t,i,o){}static HitBuffDeal(e,t,i,o){}}),rp=(lp.BuffName="ZombieMode_ZombieAngry",class{static EnterState(o,a){let n=o.GetEntityByID(a.GetComponent(F).entity1Id);if(n){n.GetComponent(gi).isPathing=!1;let i=n.GetComponent(ut),t=0;switch(V.ScenesTatus){case np.Daytime:t=i.viewRange_Day;break;case np.Night:t=i.viewRange_Night;break;case np.BloodyNight:t=i.viewRange_BloodNight}if(-1!=i.enemyId){let e=o.GetEntityByID(i.enemyId);if(e){var a=n.GetComponent(M),s=e.GetComponent(M);if(Laya.Vector3.distance(s.pos,a.pos)<t*i.angryChaseRangeRatio){if(t*=i.angryChaseRangeRatio,!i.hasTriggerAngryChase){i.hasTriggerAngryChase=!0;var l=V.GetPlayerListRange(a.pos,i.angryChaseCallRange,-1,n.id,[ut.id,R.id,E.id]);for(let t=0;t<l.length;t++){let e=o.GetEntityByID(l[t]).GetComponent(ut);e.hasTriggerAngryChase||(e.enemyId=i.enemyId)}}}else i.enemyId=-1,i.hasTriggerAngryChase=!1}else i.enemyId=-1,i.hasTriggerAngryChase=!1;n.GetComponent(F).nowState==kf.StateName&&Tf.UpdateZombieMoveAnimation(n)}i.viewRange=t}}static StateUpdate(r,h,t){let m=r.GetEntityByID(h.GetComponent(F).entity1Id);if(m&&!m.GetComponent(R).isDead){let s=m.GetComponent(ut),l=m.GetComponent(M),e=m.GetComponent(E);-1!=s.enemyId&&ri.AddBuffToTarget(m,lp.BuffName,!0,1,s.angryChaseSpeedRatio);var d,h=V.GetPlayerRange(l.pos,s.GetViewRange(),e.team,m.id);if(-1==h)m.GetComponent(gi).isPathing||(o=m.GetComponent(v),o=(o=V.GetRoundTile(o.nowMapPos.x,o.nowMapPos.y))[Math.floor(q.Random()*o.length)],d=-yt.tileSize*o.x-yt.tileSize*q.Random(),o=yt.tileSize*o.y+yt.tileSize*q.Random(),m.GetComponent(gi).SetNewTarget(d,0,o));else{s.viewRangeRatio=Math.max(s.viewRange_Day/s.viewRange,s.viewRangeRatio-(s.pursueViewRangeRatioSubPreSec+s.recoveryViewRangeRatioAddPreSec)*t);let o=[],a=r.GetEntityByID(h).GetComponent(M),n=m.GetComponent(M);if(m.HasComponent(L.id)){var c=Laya.Vector3.distance(n.pos,a.pos),u=m.GetComponent(L);for(let e=0;e<u.skillList.length;e++){var p=u.skillList[e];p.cdTime<=0&&c<p.range&&o.push(p.skillID)}}if(0<o.length&&(s.useSkillTime-=t,s.useSkillTime<0)){let e=m.GetComponent(L),t=Math.floor(q.Random()*o.length),i=(e.triggerSkllId=o[t],s.useSkillTime=s.skillTimeRangeMin+(s.skillTimeRangeMax-s.skillTimeRangeMin)*q.Random(),m.GetComponent(gi).isArrive=!0,m.GetComponent(w));return s.enemyId=h,this.vec.x=a.pos.x-n.pos.x,this.vec.y=a.pos.z-n.pos.z,Laya.Vector2.normalize(this.vec,this.vec),i.dir.x=this.vec.x,void(i.dir.z=this.vec.y)}if(!m.GetComponent(gi).isPathing){let e=r.GetEntityByID(h),i=e.GetComponent(M);e.HasComponent(pt.id)?(d=e.GetComponent(pt).doorNode.transform.position,m.GetComponent(gi).SetNewTarget(d.x,0,d.z)):m.GetComponent(gi).SetNewTarget(i.pos.x,0,i.pos.z);let o=!0;if(-1!=s.inBunkerTriggerID){let e=q.NowGameWorld.GetEntityByID(s.inBunkerTriggerID),t=e.GetComponent(pt);vu.IsPosInBunker(e,i.pos)?t.doorIsOpen&&!t.isDamage||(o=!1):vu.IsPosInBunkerTrigger(e,i.pos)?t.isDamage&&(o=!1):vu.IsPosInBunker(e,l.pos)&&t.isDamage&&(o=!1)}o||(m.GetComponent(gi).needFindPath=!1,m.GetComponent(gi).path=[m.GetComponent(gi).targetPos])}}let i=-1;if(-1!=h){let e=r.GetEntityByID(h),t=m.GetComponent(U);s.triggerAttRange=1.5*t.attackRange;var o=e.GetComponent(M);this.vec.x=l.pos.x-o.pos.x,this.vec.y=l.pos.z-o.pos.z,i=Laya.Vector2.scalarLength(this.vec),s.enemyId=h}Tf.UpdateZombieAttack(m,i,t)}}static StateExit(e,t){}}),hp=(rp.StateName="State_ZombieFight",rp.vec=new Laya.Vector2(0,0),class extends e{constructor(){super(...arguments),this.ownerId=-1,this.distanceFromOwner=0,this.addMaxHp=0,this.addDmg=0,this.addSize=0,this.f2=0,this.f5=0,this.f7=0,this.f15=0,this.f16=0,this.invincible=!1,this.effectId=-1,this.isControlled=!1}}),mp=class{static BuffInit(e,t,i,o){let a=t.GetComponent(R);o?o.buffKeepTime>i.buffKeepTime&&(i.buffKeepTime=o.buffKeepTime):(a.speedScale*=1+i.f1/100,t.GetComponent(F).nowState==kf.StateName&&Tf.UpdateZombieMoveAnimation(t))}static BuffUpdate(e,t,i,o){}static BuffDispose(e,t,i,o){t.GetComponent(R).speedScale/=1+i.f1/100,t.GetComponent(F).nowState==kf.StateName&&Tf.UpdateZombieMoveAnimation(t)}static HitedBuffDeal(e,t,i,o){}static HitBuffDeal(e,t,i,o){}},dp=(mp.BuffName="ZombieFollowOwner",class{static EnterState(e,t){let i=e.GetEntityByID(t.GetComponent(F).entity1Id);var o;i&&i.HasComponent(hp.id)&&(t=i.GetComponent(M).pos,o=i.GetComponent(hp),e=e.GetEntityByID(o.ownerId).GetComponent(M).pos,Laya.Vector3.distance(t,e)>o.distanceFromOwner&&o.isControlled&&(i.GetComponent(gi).SetNewTarget(e.x,0,e.z),console.warn("State_ZombieFollow追主人状态"),i.GetComponent(F).ChangeState(kf.StateName),ri.ClearBuffByName(i,lp.BuffName),ri.AddBuffToTarget(i,mp.BuffName,!0,1.2,500)))}static StateUpdate(e,t,i){}static StateExit(e,t){}}),cp=(dp.StateName="State_ZombieFollow",dp.vec=new Laya.Vector2(0,0),class{static EnterState(n,s){let l=n.GetEntityByID(s.GetComponent(F).entity1Id);if(l){let e=uu.StateName,t=l.GetComponent(ut),i=s.GetComponent(F),o=l.GetComponent(M),a=l.GetComponent(E);var r;e=V.ScenesTatus==np.Daytime?(s=V.GetPlayerRange(o.pos,t.GetViewRange(),a.team,l.id),(-1!=t.enemyId||-1!=s?rp:uu).StateName):rp.StateName,l.HasComponent(hp.id)&&(s=l.GetComponent(M).pos,r=l.GetComponent(hp),n=n.GetEntityByID(r.ownerId).GetComponent(M).pos,Laya.Vector3.distance(s,n)>r.distanceFromOwner&&r.isControlled&&(e=dp.StateName)),i.ChangeState(e)}}static StateUpdate(e,t,i){}static StateExit(e,t){}}),up=(cp.StateName="State_ZombieThink",class{static EnterState(e,t){}static StateUpdate(e,t,i){}static StateExit(e,t){}}),pp=(up.StateName="State_ZombieUseSkill",class{static OnEnterState(e,t,i){switch(i){case Uc.StateName:Uc.EnterState(e,t);break;case kf.StateName:kf.EnterState(e,t);break;case ui.StateName:ui.EnterState(e,t);break;case Mf.StateName:Mf.EnterState(e,t);break;case bf.StateName:bf.EnterState(e,t);break;case uc.StateName:uc.EnterState(e,t);break;case pc.StateName:pc.EnterState(e,t);break;case su.StateName:su.EnterState(e,t);break;case gc.StateName:gc.EnterState(e,t);break;case Tt.StateName:Tt.EnterState(e,t);break;case Lc.StateName:Lc.EnterState(e,t);break;case Bc.StateName:Bc.EnterState(e,t);break;case lu.StateName:lu.EnterState(e,t);break;case bc.StateName:bc.EnterState(e,t);break;case _c.StateName:_c.EnterState(e,t);break;case fc.StateName:fc.EnterState(e,t);break;case Ic.StateName:Ic.EnterState(e,t);break;case Ac.StateName:Ac.EnterState(e,t);break;case xc.StateName:xc.EnterState(e,t);break;case si.StateName:si.EnterState(e,t);break;case Tc.StateName:Tc.EnterState(e,t);break;case Nc.StateName:Nc.EnterState(e,t);break;case Pc.StateName:Pc.EnterState(e,t);break;case Fc.StateName:Fc.EnterState(e,t);break;case Ec.StateName:Ec.EnterState(e,t);break;case Oc.StateName:Oc.EnterState(e,t);break;case Hc.StateName:Hc.EnterState(e,t);break;case Vc.StateName:Vc.EnterState(e,t);break;case Xc.StateName:Xc.EnterState(e,t);break;case $c.StateName:$c.EnterState(e,t);break;case eu.StateName:eu.EnterState(e,t);break;case tu.StateName:tu.EnterState(e,t);break;case iu.StateName:iu.EnterState(e,t);break;case ou.StateName:ou.EnterState(e,t);break;case au.StateName:au.EnterState(e,t);break;case nu.StateName:nu.EnterState(e,t);break;case Wc.StateName:Wc.EnterState(e,t);break;case Dc.StateName:Dc.EnterState(e,t);break;case Cc.StateName:Cc.EnterState(e,t);break;case Gc.StateName:Gc.EnterState(e,t);break;case Sc.StateName:Sc.EnterState(e,t);break;case yc.StateName:yc.EnterState(e,t);break;case wc.StateName:wc.EnterState(e,t);break;case zc.StateName:zc.EnterState(e,t);break;case Rc.StateName:Rc.EnterState(e,t);break;case Mc.StateName:Mc.EnterState(e,t);break;case kc.StateName:kc.EnterState(e,t);break;case hu.StateName:hu.EnterState(e,t);break;case ru.StateName:ru.EnterState(e,t);break;case mu.StateName:mu.EnterState(e,t);break;case du.StateName:du.EnterState(e,t);break;case rp.StateName:rp.EnterState(e,t);break;case cu.StateName:cu.EnterState(e,t);break;case uu.StateName:uu.EnterState(e,t);break;case cp.StateName:cp.EnterState(e,t);break;case up.StateName:up.EnterState(e,t);break;case dp.StateName:dp.EnterState(e,t)}}static OnExitState(e,t,i){switch(i){case Uc.StateName:Uc.StateExit(e,t);break;case kf.StateName:kf.StateExit(e,t);break;case bf.StateName:bf.StateExit(e,t);break;case Mf.StateName:Mf.StateExit(e,t);break;case ui.StateName:ui.StateExit(e,t);break;case uc.StateName:uc.StateExit(e,t);break;case pc.StateName:pc.StateExit(e,t);break;case su.StateName:su.StateExit(e,t);break;case gc.StateName:gc.StateExit(e,t);break;case Tt.StateName:Tt.StateExit(e,t);break;case Lc.StateName:Lc.StateExit(e,t);break;case Bc.StateName:Bc.StateExit(e,t);break;case lu.StateName:lu.StateExit(e,t);break;case bc.StateName:bc.StateExit(e,t);break;case _c.StateName:_c.StateExit(e,t);break;case fc.StateName:fc.StateExit(e,t);break;case Ic.StateName:Ic.StateExit(e,t);break;case Ac.StateName:Ac.StateExit(e,t);break;case xc.StateName:xc.StateExit(e,t);break;case si.StateName:si.StateExit(e,t);break;case Tc.StateName:Tc.StateExit(e,t);break;case Nc.StateName:Nc.StateExit(e,t);break;case Pc.StateName:Pc.StateExit(e,t);break;case Fc.StateName:Fc.StateExit(e,t);break;case Ec.StateName:Ec.StateExit(e,t);break;case Oc.StateName:Oc.StateExit(e,t);break;case Hc.StateName:Hc.StateExit(e,t);break;case Vc.StateName:Vc.StateExit(e,t);break;case Xc.StateName:Xc.StateExit(e,t);break;case $c.StateName:$c.StateExit(e,t);break;case eu.StateName:eu.StateExit(e,t);break;case tu.StateName:tu.StateExit(e,t);break;case iu.StateName:iu.StateExit(e,t);break;case ou.StateName:ou.StateExit(e,t);break;case au.StateName:au.StateExit(e,t);break;case nu.StateName:nu.StateExit(e,t);break;case Wc.StateName:Wc.StateExit(e,t);break;case Dc.StateName:Dc.StateExit(e,t);break;case Cc.StateName:Cc.StateExit(e,t);break;case Gc.StateName:Gc.StateExit(e,t);break;case Sc.StateName:Sc.StateExit(e,t);break;case yc.StateName:yc.StateExit(e,t);break;case wc.StateName:wc.StateExit(e,t);break;case zc.StateName:zc.StateExit(e,t);break;case Rc.StateName:Rc.StateExit(e,t);break;case Mc.StateName:Mc.StateExit(e,t);break;case kc.StateName:kc.StateExit(e,t);break;case hu.StateName:hu.StateExit(e,t);break;case ru.StateName:ru.StateExit(e,t);break;case mu.StateName:mu.StateExit(e,t);break;case du.StateName:du.StateExit(e,t);break;case rp.StateName:rp.StateExit(e,t);break;case cu.StateName:cu.StateExit(e,t);break;case uu.StateName:uu.StateExit(e,t);break;case cp.StateName:cp.StateExit(e,t);break;case up.StateName:up.StateExit(e,t);break;case dp.StateName:dp.StateExit(e,t)}}static OnUpdateState(e,t,i,o){switch(i){case Uc.StateName:Uc.StateUpdate(e,t,o);break;case kf.StateName:kf.StateUpdate(e,t,o);break;case bf.StateName:bf.StateUpdate(e,t,o);break;case Mf.StateName:Mf.StateUpdate(e,t,o);break;case ui.StateName:ui.StateUpdate(e,t,o);break;case uc.StateName:uc.StateUpdate(e,t,o);break;case pc.StateName:pc.StateUpdate(e,t,o);break;case su.StateName:su.StateUpdate(e,t,o);break;case gc.StateName:gc.StateUpdate(e,t,o);break;case Tt.StateName:Tt.StateUpdate(e,t,o);break;case Lc.StateName:Lc.StateUpdate(e,t,o);break;case Bc.StateName:Bc.StateUpdate(e,t,o);break;case lu.StateName:lu.StateUpdate(e,t,o);break;case bc.StateName:bc.StateUpdate(e,t,o);break;case _c.StateName:_c.StateUpdate(e,t,o);break;case fc.StateName:fc.StateUpdate(e,t,o);break;case Ic.StateName:Ic.StateUpdate(e,t,o);break;case Ac.StateName:Ac.StateUpdate(e,t,o);break;case xc.StateName:xc.StateUpdate(e,t,o);break;case si.StateName:si.StateUpdate(e,t,o);break;case Tc.StateName:Tc.StateUpdate(e,t,o);break;case Nc.StateName:Nc.StateUpdate(e,t,o);break;case Pc.StateName:Pc.StateUpdate(e,t,o);break;case Fc.StateName:Fc.StateUpdate(e,t,o);break;case Ec.StateName:Ec.StateUpdate(e,t,o);break;case Oc.StateName:Oc.StateUpdate(e,t,o);break;case Hc.StateName:Hc.StateUpdate(e,t,o);break;case Vc.StateName:Vc.StateUpdate(e,t,o);break;case Xc.StateName:Xc.StateUpdate(e,t,o);break;case $c.StateName:$c.StateUpdate(e,t,o);break;case eu.StateName:eu.StateUpdate(e,t,o);break;case tu.StateName:tu.StateUpdate(e,t,o);break;case iu.StateName:iu.StateUpdate(e,t,o);break;case ou.StateName:ou.StateUpdate(e,t,o);break;case au.StateName:au.StateUpdate(e,t,o);break;case nu.StateName:nu.StateUpdate(e,t,o);break;case Wc.StateName:Wc.StateUpdate(e,t,o);break;case Dc.StateName:Dc.StateUpdate(e,t,o);break;case Cc.StateName:Cc.StateUpdate(e,t,o);break;case Gc.StateName:Gc.StateUpdate(e,t,o);break;case Sc.StateName:Sc.StateUpdate(e,t,o);break;case yc.StateName:yc.StateUpdate(e,t,o);break;case wc.StateName:wc.StateUpdate(e,t,o);break;case zc.StateName:zc.StateUpdate(e,t,o);break;case Rc.StateName:Rc.StateUpdate(e,t,o);break;case Mc.StateName:Mc.StateUpdate(e,t,o);break;case kc.StateName:kc.StateUpdate(e,t,o);break;case hu.StateName:hu.StateUpdate(e,t,o);break;case ru.StateName:ru.StateUpdate(e,t,o);break;case mu.StateName:mu.StateUpdate(e,t,o);break;case du.StateName:du.StateUpdate(e,t,o);break;case rp.StateName:rp.StateUpdate(e,t,o);break;case cu.StateName:cu.StateUpdate(e,t,o);break;case uu.StateName:uu.StateUpdate(e,t,o);break;case cp.StateName:cp.StateUpdate(e,t,o);break;case up.StateName:up.StateUpdate(e,t,o);break;case dp.StateName:dp.StateUpdate(e,t,o)}}static OnLateUpdateState(e,t,i,o){}}),gp=class extends lt{constructor(){super(...arguments),this.systemName="FsmSystem",this.grounp=new dt([F.id])}Init(){}Update(){}FixedUpdate(){var o=this.grounp.GetEntitys(this.world);for(let i=0;i<o.length;i++){let e=o[i],t=e.GetComponent(F);t.oldState!=t.nowState&&(pp.OnExitState(this.world,e,t.oldState),t.preState=t.oldState,t.oldState=t.nowState,pp.OnEnterState(this.world,e,t.nowState)),pp.OnUpdateState(this.world,e,t.nowState,A.FixedTimeDelta)}}LateUpdate(){var o=this.grounp.GetEntitys(this.world);for(let i=0;i<o.length;i++){let e=o[i],t=e.GetComponent(F);pp.OnLateUpdateState(this.world,e,t.nowState,A.FixedTimeDelta)}}Destroy(){}OnAddComponent(e,t){}OnRemoveComponent(e,t){}},fp=class extends lt{constructor(){super(...arguments),this.systemName="MoveSystem",this.vecCache=new Laya.Vector3(0,0,0),this.dirCache=new Laya.Vector2(0,0),this.grounp=new dt([w.id,M.id])}Init(){}Update(){}FixedUpdate(){let n=A.FixedTimeDelta,s=this.world.GetEntitysByMatcher(this.grounp);for(let a=0;a<s.length;a++){let e=s[a],t=e.GetComponent(M),i=e.GetComponent(w),o=e.GetComponent(C);if(o&&o.guided){const s=V.GetCurrentDirection(2,t.rotation.y,t.pos,e.GetComponent(v),7,o.creatorId);if(-1!==s){var l=this.world.GetEntityByID(s).GetComponent(M),r=S.VecToAngle(new Laya.Vector2(i.vec.x,i.vec.z)),l=S.VecToAngle(new Laya.Vector2(l.pos.x-t.pos.x,l.pos.z-t.pos.z)),h=l-r;let e=l;Math.abs(h)>o.maxAV*n&&(e=r+o.maxAV*n*(0<h?1:-1));l=S.AngleToDir(e);Laya.Vector3.normalize(new Laya.Vector3(l.x,0,l.y),i.dir)}}i.IsBanDirCtrl()||Laya.Vector3.scale(i.dir,i.speed,i.vec),i.dir2FollowDir&&(i.dir2.x=i.dir.x,i.dir2.y=i.dir.y,i.dir2.z=i.dir.z),t.pos.x+=i.vec.x*n*i.speedScale,t.pos.y+=i.vec.y*n*i.speedScale,t.pos.z+=i.vec.z*n*i.speedScale,i.IsBanDirRotationCtrl()||!i.yRotationFollow||0==i.dir2.x&&0==i.dir2.z||(this.dirCache.x=i.dir2.x,this.dirCache.y=i.dir2.z,0<i.speedScale&&(0<i.rotationLerp?t.rotation.y=S.MoveTowardsAngle(t.rotation.y,S.VecToAngle(this.dirCache),i.rotationLerp*n):t.rotation.y=S.VecToAngle(this.dirCache)))}}LateUpdate(){}Destroy(){}OnAddComponent(e,t){}OnRemoveComponent(e,t){}},_p=class extends lt{constructor(){super(...arguments),this.systemName="AnimatorSystem",this.grounp=new dt([xt.id,B.id])}Init(){}Update(){var o=this.grounp.GetEntitys(this.world);for(let i=0;i<o.length;i++){let e=o[i],t=e.GetComponent(xt);if(1<t.layerCount){let e=t.animator.getControllerLayer(1);e&&(t.useUpBody?e.defaultWeight=1:e.defaultWeight=0)}0<t.banKeepTime&&(t.banKeepTime-=A.LimitTimeDelta);var a=e.GetComponent(B);if(a.render!=t.oldRender){if(t.oldRender=a.render,!t.oldRender)continue;try{t.animator.play(t.nowClipName)}catch(o){console.error("动画播放错误:",o,t.nowClipName,a)}}if(""!=t.useClipName){if(t.nowClipName!=t.useClipName){let e=t.animator.getCurrentAnimatorPlayState(0).duration;e=0<e?t.useCross/e:t.useCross,t.animator.crossFade(t.useClipName,e,0),t.nowClipName=t.useClipName,t.useClipName="",t.isCanUseNext=!1}t.useClipName="",t.nowSpeed=t.useSpeed}""!=t.useUpBodyClipName&&(t.nowUpBodyClipName!=t.useUpBodyClipName&&(t.animator.getControllerLayer(1)?(t.animator.crossFade(t.useUpBodyClipName,.1,1),t.nowUpBodyClipName=t.useUpBodyClipName):(t.nextUseClipName=t.nowClipName,t.useClipName=t.useUpBodyClipName),t.useUpBodyClipName=""),t.useUpBodyClipName=""),t.isCanUseNext||""==t.nextUseClipName||t.animator.getCurrentAnimatorPlayState(0).normalizedTime<1&&(t.isCanUseNext=!0),""!=t.nextUseClipName&&""==t.useClipName&&t.isCanUseNext&&t.animator.getCurrentAnimatorPlayState(0).normalizedTime>=t.nextPlayTime&&(t.animator.crossFade(t.nextUseClipName,t.nextCross),t.nowClipName=t.nextUseClipName,t.nextUseClipName="",t.nowSpeed=t.nextSpeed),t.animator.speed=t.nowSpeed*t.animatorSpeedScale*A.TimeScale}}FixedUpdate(){}LateUpdate(){}Destroy(){}OnAddComponent(e,t){if(t.componentId==xt.id){let t=e.GetComponent(B).sp,i=t.getComponent(Laya.Animator);if(!i)for(let e=0;e<t.numChildren&&!(i=t.getChildAt(e).getComponent(Laya.Animator));e++);e.GetComponent(xt).animator=i}}OnRemoveComponent(e,t){}},Ip=class extends lt{constructor(){super(...arguments),this.systemName="ShadowSystem",this.grounp=new dt([fi.id])}Init(){}Update(){var t=this.world.GetEntitysByMatcher(this.grounp);for(let e=0;e<t.length;e++){let i=t[e],o=i.GetComponent(fi),a=this.world.GetEntityByID(o.shadowTargetId);if(a){let e=a.GetComponent(M),t=i.GetComponent(M);e.pos.x=t.pos.x,e.pos.z=t.pos.z,e.pos.y=o.height}}}FixedUpdate(){}LateUpdate(){}Destroy(){}OnAddComponent(e,o){if(o.componentId==fi.id){let e=o,t=O.CreatPrefabEntity(N.Shadow),i=(e.shadowTargetId=t.id,t.GetComponent(M));i.scale.x=e.size,i.scale.y=e.size,i.scale.z=e.size,t.GetComponent(B).sp.transform.localScaleX=e.size,t.GetComponent(B).sp.transform.localScaleY=e.size,t.GetComponent(B).sp.transform.localScaleZ=e.size,i.rotation.x=90}}OnRemoveComponent(e,i){if(i.componentId==fi.id){let e=i,t=this.world.GetEntityByID(e.shadowTargetId);null!=t&&t.Destory()}}},Cp=class{constructor(){this.ZombieMode_ZombieMoveSpeedEnhanceRatioDict=[],this.ZombieMode_ZombieHPEnhanceRatioDict=[],this.ZombieMode_ZombieDmgEnhanceRatioDict=[]}Parse(e){var t=e;this.datas=[],this.dictionary=[];for(var i=0;i<t.GameRuleDataList.length;i++)this.datas.push(t.GameRuleDataList[i]),this.dictionary[this.datas[i].Setting]=t.GameRuleDataList[i];this.SetLoadInfo()}SetLoadInfo(){k.isUseGridBoxKey&&(Cp.InGame_BoxProbability_ChestKey=this.GetChestKey_Probability_Chest()/100,Cp.InGame_KillProbability_ChestKey=this.GetChestKey_Probability_Kill()/100,console.log("获得钥匙:击杀掉率",Cp.InGame_KillProbability_ChestKey,"宝箱概率",Cp.InGame_BoxProbability_ChestKey))}Get(t){for(let e=0;e<this.datas.length;e++)if(this.datas[e].Setting==t)return this.datas[e];return console.warn("CanNotFind "+t+" in GameRuleDataHandler"),null}GetByKey(e){var t=this.dictionary[e];return null==t&&console.warn("CanNotFind "+e+" in GameRuleDataHandler"),t}GetDatas(){return this.datas}PlayerBaseSpeed(){return this.Get("PlayerBaseSpeed").F1}InGameKillExp(e){return this.Get("InGameKillExp").F1*e}InGameUpgradeNeedExp(e){if(V.IsGameMode_Zombie())return(e-1)*(t=this.Get("ZombieMode_LevelUp")).F2+t.F1;var t=this.Get("InGameUpgradeNeedExp");return(e-1)*t.F2+t.F1}InGameUpgrade_AddHp(){return(V.IsGameMode_Zombie()?this.Get("ZombieMode_LevelUp_AddHp"):this.Get("InGameUpgrade_AddHp")).F1}InGameUpgrade_MaxHp(){return(V.IsGameMode_Zombie()?this.Get("ZombieMode_LevelUp_MaxHp"):this.Get("InGameUpgrade_MaxHp")).F1}InGameUpgrade_Dmg(){return this.Get("InGameUpgrade_Dmg").F1}GetOpenBox_MoodReward(){return this.Get("OpenBox_MoodReward").F5}GetOpenBox_GoldReward(){return this.Get("OpenBox_GoldReward").F5}GetOpenBox_SilverReward(){return this.Get("OpenBox_SilverReward").F5}GetChestUnlockTime(){return this.Get("ChestUnlockTime")}GetBattleGetChest(){return this.Get("BattleGetChest")}GetChestDiamondValue(){return this.Get("ChestDiamondValue")}GetDropLevel(){return this.Get("DropLevel")}GetBoxEndless_Bonus(){return this.Get("BoxEndless_Bonus")}GetFreeCoin(){return this.Get("FreeCoin")}GetFreeGem(){return this.Get("FreeGem")}GetWeaponMergeGem(){return this.Get("WeaponMergeGem")}GetofflineGetCoin(){return this.Get("offlineGetCoin")}GetShopResetTime(){return this.Get("ShopResetTime").F1}GetChest_Piece_CD(){return this.Get("Chest_Piece_CD")}GetShopBox1Pertory(){return this.Get("ShopBox1Pertory").F1}GetShopBox2Pertory(){return this.Get("ShopBox2Pertory").F1}GetGradePropBonus(){return this.Get("GradePropBonus")}GetSellGearPrice(){return this.Get("SellGearPrice")}GetBattlePoint(){return this.Get("BattlePoint")}GetBattlePoint_weapon(e){var t=0,t=K.DataModule().GetLocal().weapon.Get(e).Level*this.GetBattlePoint().F1;return Math.round(t)}GetBattlePoint_gear(a){let e,t=1,i=[],o=a.data.split(","),n=[];for(let e=0;e<o.length;e++){var s,l,r,h=o[e].split("_");if(-1!=o[e].indexOf("Skill_"))3<=h.length&&i.push(Number(h[2]));else{let e=Number(h[1])/(this.GetGradePropBonus()["F"+a.rare]/100),t=a.type+a.rare+"_"+a.level,i=K.DataModule().GetLocal().gear.Get(t).PropLevelIncrease,o=(-1!=i.indexOf("-")&&(i=i.split("-")[1]),K.DataModule().GetLocal().prop.Get(a.type+(a.level+Number(i)))[h[0]]);o&&(s=(l=o.split("-"))[0],l=l[1],r=(Number(s)+Number(l))/2,k.isTestLog&&console.log("最大值",l,s,r,"计算稀有度额外属性前:",Number(h[1]),"计算后当前值",e),Number(e)<Number(s)&&(e=Number(s)),n.push(Number(e)/r))}}let m=100;if(0<i.length){let t=0;for(let e=0;e<i.length;e++)2<=i[e]?t+=this.GetBattlePoint().F3:t+=this.GetBattlePoint().F2;m=t/=i.length}let d=0;for(let e=0;e<n.length;e++)d+=n[e];return t=d/n.length,e=a.level*Math.pow(a.rare,2)*t*m*10/100,t=t||1,k.isTestLog&&console.log("装备战力最终计算",a.level,a.rare,"词条所有值",n,t,m),e=Math.round(e),k.isTestLog&&console.log("装备战斗力",e,a,"分数",t,"系数",m),e}GetBattlePoint_player(e=0){let t=K.DataModule().GetUser(),i=t.GetData().equipList,o=0,a=0,n=1,s=K.DataModule().GetUser().GetHeroItemData(t.GetData().nowChooseHero);s&&(n=s.level);var l,r=K.DataModule().GetLocal().hero.GetHeroBp(t.GetData().nowChooseHero,n);for(let e=0;e<i.length;e++)""!=i[e]&&(-1!=i[e].indexOf("Weapon")?o=this.GetBattlePoint_weapon(i[e]):(l=t.GetItemByID(i[e]),a+=this.GetBattlePoint_gear(l)));return e=Math.round((o+(a+e))*r/100),k.isTestLog&&console.log("当前玩家战斗力",e,"武器数值",o,"防具",a,"皮肤",r),e}GetWeaponMergeGemVideoBonus(){return this.Get("WeaponMergeGemVideoBonus")}GetShareVideo_Bonus(){let e=this.Get("ShareVideo_Bonus"),t=[];return t.push(e.F1),t.push(e.F2),0==f.GetWeightRandom(t)?Z.NewYearKey+"_"+tt.Silver+"_1":Z.NewYearKey+"_"+tt.Gold+"_1"}GetResultStarBonus(){return this.Get("ResultStarBonus")}GetWeaponSkin_Tryout(){return this.Get("WeaponSkin_Tryout")}GetGridChest_BigPrize(){return this.Get("GridChest_BigPrize")}GetGridChest_Probability(){return this.Get("GridChest_Probability")}GetGridChest_SmallPrize(){return this.Get("GridChest_SmallPrize")}GetChestKey_Probability_Kill(){return this.Get("ChestKey_Probability_Kill").F1}GetChestKey_Probability_Chest(){return this.Get("ChestKey_Probability_Chest").F1}GetSkillRandom_Lv2_Probability(){return this.Get("SkillRandom_Lv2_Probability").F1}ZombieMode_DayTime(){return this.Get("ZombieMode_DayTime").F1}ZombieMode_NightTime(){return this.Get("ZombieMode_DayTime").F2}ZombieMode_AddRadiationLevel_Night(){return this.Get("ZombieMode_DayAddRadiationLevel").F1}ZombieMode_AddRadiationLevel_BloodNight(){return this.Get("ZombieMode_DayAddRadiationLevel").F2}ZombieMode_ZombieFactory_MaxCount(){return this.Get("ZombieMode_ZombieFactory").F1}ZombieMode_ZombieFactory_CreateCD(){return this.Get("ZombieMode_ZombieFactory").F2}ZombieMode_AddRadiationLevel_ZombieFactoryOverflow(){return this.Get("ZombieMode_ZombieFactory").F3}ZombieMode_ZombieFactory_InitLevel(e){return Math.ceil(e/this.Get("ZombieMode_ZombieFactory").F4)}ZombieMode_ZombieFactory_InitHP(){return parseFloat(this.Get("ZombieMode_ZombieFactory").F5)}ZombieMode_ZombieFactory_AddHpPreLevel(){return parseFloat(this.Get("ZombieMode_ZombieFactory").F6)}ZombieMode_ZombieFactory_HighLevel(){return parseInt(this.Get("ZombieMode_ZombieFactory").F7)}ZombieMode_ZombieCreateMaxCount_Day(e){return Math.pow(e,.5)*this.Get("ZombieMode_ZombieBirthMaxCount").F1}ZombieMode_ZombieCreateMaxCount_Night(e){return Math.pow(e,.5)*this.Get("ZombieMode_ZombieBirthMaxCount").F2}ZombieMode_ZombieCreateMaxCount_BloodNight(e){return Math.pow(e,.5)*this.Get("ZombieMode_ZombieBirthMaxCount").F3}ZombieMode_ZombieCreateMaxCount_LimitSpeedRatio(){return this.Get("ZombieMode_ZombieBirthMaxCount").F4}ZombieMode_ZombieCreateMaxCount_MaxZombieCountInScreen(e){var t=this.Get("ZombieMode_ZombieBirthMaxCount");return parseFloat(t.F5)+Math.pow(e,.5)*parseFloat(t.F6)}ZombieMode_ZombieCreateCDRatio_Day(e){var t=this.Get("ZombieMode_ZombieBirthCD");return t.F1+e*t.F2}ZombieMode_BanZombieCreateInNightLastRatio(){return this.Get("ZombieMode_ZombieBirthCD").F3/100}ZombieMode_ZombieCreateCDRatio_Night(e,t){return e*(this.ZombieMode_NightTime()*(1-this.ZombieMode_BanZombieCreateInNightLastRatio())*2/(t*(t-1)))}ZombieMode_ZombieCreateCDRatio_BloodNight(e,t){return e*(this.ZombieMode_NightTime()*(1-this.ZombieMode_BanZombieCreateInNightLastRatio())*2/(t*(t-1)))}ZombieMode_ZombieVechicleCount(e){var t=this.Get("ZombieMode_ZombieVechicleCount");return Math.round(t.F1+e*(t.F2-t.F1))}ZombieMode_Chest_InitCount(){return this.Get("ZombieMode_Chest").F1}ZombieMode_Chest_CreateCD(){return this.Get("ZombieMode_Chest").F2}ZombieMode_Chest_Wood_Pobability(){return this.Get("ZombieMode_Chest").F3/100}ZombieMode_Chest_Sliver_Pobability(){return this.Get("ZombieMode_Chest").F4/100}ZombieMode_Chest_Gold_Pobability(){return parseFloat(this.Get("ZombieMode_Chest").F5)/100}ZombieMode_ZombieDrop_WeaponLevel(e,t){var i=this.Get("ZombieMode_ChestDropWeaponLevel");return Math.min(i.F3,Math.max(i.F2,Math.round((e-1)*i.F1+i.F1*t)))}ZombieMode_Shop_WeaponLevel(e,t,i){var o=this.Get("ZombieMode_ShopWeapon");return Math.min(parseFloat(o.F8),Math.max(parseFloat(o.F7),Math.round(e*o.F3+(2*t-1)*o.F4+((o.F2-o.F1)*i+o.F1))))}ZombieMode_Shop_WeaponLevel2(e,t){var i=this.Get("ZombieMode_ShopWeapon");return Math.min(parseFloat(i.F8),Math.max(parseFloat(i.F7),Math.round(e*i.F3+(2*t-1)*i.F4)))}ZombieMode_Shop_WeaponPrice(e,t){let i=this.Get("ZombieMode_ShopWeapon"),o=1;return t>e*i.F3&&(o=(t-e*i.F3)*parseFloat(i.F6)+1),Math.ceil(t*parseFloat(i.F5)*o)}ZombieMode_ItemCreateCD(e){var t=this.Get("ZombieMode_ItemCreateCD");return t.F1+e*t.F2}ZombieMode_Bunker_MaxLevel(){return this.Get("Zombie_Bunker").F1}ZombieMode_Bunker_HP(e){let t=this.Get("Zombie_Bunker");return parseInt(t.F5.split(",")[e-1])}ZombieMode_Bunker_UpgradePrice(e){let t=this.Get("Zombie_Bunker");return parseInt(t.F6.split(",")[e-1])}ZombieMode_Bunker_RepairPrice(e){let t=this.Get("Zombie_Bunker");return parseInt(t.F7.split(",")[e-1])}ZombieMode_Car_MaxHP(){return this.Get("Zombie_Car").F1}ZombieMode_Car_InitHP(e){return this.Get("Zombie_Car").F2*e}ZombieMode_Car_MaxEnergy(){return this.Get("Zombie_Car").F3}ZombieMode_Car_InitEnergy(e){return this.Get("Zombie_Car").F4*e}ZombieMode_Car_RepairPrice(){var e=this.Get("Zombie_Car");return parseFloat(e.F5)}ZombieMode_Car_ChargeEnergyPrice(){var e=this.Get("Zombie_Car");return parseFloat(e.F6)}ZombieMode_Car_AddMoveSpeed(){var e=this.Get("Zombie_Car");return parseFloat(e.F7)}ZombieMode_DiffRatio(){return this.Get("ZombieMode_DiffRatio").F1}ZombieMode_ZombieMoveSpeedEnhanceRatio(e){if(0==this.ZombieMode_ZombieMoveSpeedEnhanceRatioDict.length){let t=this.Get("ZombieMode_ZombieMoveSpeedEnhance"),i=1,o=(this.ZombieMode_ZombieMoveSpeedEnhanceRatioDict[0]=1)+t.F2/100;for(let e=0;e<t.F1;e++)i*=o,this.ZombieMode_ZombieMoveSpeedEnhanceRatioDict[e+1]=i;o=1+t.F4/100;for(let e=t.F1;e<t.F3;e++)i*=o,this.ZombieMode_ZombieMoveSpeedEnhanceRatioDict[e+1]=i;o=1+parseInt(t.F6)/100;for(let e=t.F3;e<parseInt(t.F5);e++)i*=o,this.ZombieMode_ZombieMoveSpeedEnhanceRatioDict[e+1]=i;o=1+parseInt(t.F7)/100;for(let e=parseInt(t.F5);e<300;e++)i*=o,this.ZombieMode_ZombieMoveSpeedEnhanceRatioDict[e+1]=i}return 300<e?this.ZombieMode_ZombieMoveSpeedEnhanceRatioDict[this.ZombieMode_ZombieMoveSpeedEnhanceRatioDict.length-1]:this.ZombieMode_ZombieMoveSpeedEnhanceRatioDict[e-1]}ZombieMode_ZombieMoveSpeedEnhanceFloatRatio(){var e=this.Get("ZombieMode_ZombieMoveSpeedEnhance");return parseFloat(e.F8)/100}ZombieMode_ZombieHPEnhanceRatio(e){if(0==this.ZombieMode_ZombieHPEnhanceRatioDict.length){let t=this.Get("ZombieMode_ZombieHPEnhance"),i=1,o=(this.ZombieMode_ZombieHPEnhanceRatioDict[0]=1)+t.F2/100;for(let e=0;e<t.F1;e++)i*=o,this.ZombieMode_ZombieHPEnhanceRatioDict[e+1]=i;o=1+t.F4/100;for(let e=t.F1;e<t.F3;e++)i*=o,this.ZombieMode_ZombieHPEnhanceRatioDict[e+1]=i;o=1+parseInt(t.F6)/100;for(let e=t.F3;e<parseInt(t.F5);e++)i*=o,this.ZombieMode_ZombieHPEnhanceRatioDict[e+1]=i;o=1+parseInt(t.F7)/100;for(let e=parseInt(t.F5);e<300;e++)i*=o,this.ZombieMode_ZombieHPEnhanceRatioDict[e+1]=i}return 300<e?this.ZombieMode_ZombieHPEnhanceRatioDict[this.ZombieMode_ZombieHPEnhanceRatioDict.length-1]:this.ZombieMode_ZombieHPEnhanceRatioDict[e-1]}ZombieMode_ZombieHPEnhanceFloatRatio(){var e=this.Get("ZombieMode_ZombieHPEnhance");return parseFloat(e.F8)/100}ZombieMode_ZombieDmgEnhance(e){if(0==this.ZombieMode_ZombieDmgEnhanceRatioDict.length){let t=this.Get("ZombieMode_ZombieDmgEnhance"),i=1,o=(this.ZombieMode_ZombieDmgEnhanceRatioDict[0]=1)+t.F2/100;for(let e=0;e<t.F1;e++)i*=o,this.ZombieMode_ZombieDmgEnhanceRatioDict[e+1]=i;o=1+t.F4/100;for(let e=t.F1;e<t.F3;e++)i*=o,this.ZombieMode_ZombieDmgEnhanceRatioDict[e+1]=i;o=1+parseInt(t.F6)/100;for(let e=t.F3;e<parseInt(t.F5);e++)i*=o,this.ZombieMode_ZombieDmgEnhanceRatioDict[e+1]=i;o=1+parseInt(t.F7)/100;for(let e=parseInt(t.F5);e<300;e++)i*=o,this.ZombieMode_ZombieDmgEnhanceRatioDict[e+1]=i}return 300<e?this.ZombieMode_ZombieDmgEnhanceRatioDict[this.ZombieMode_ZombieDmgEnhanceRatioDict.length-1]:this.ZombieMode_ZombieDmgEnhanceRatioDict[e-1]}ZombieMode_ZombieDmgEnhanceFloatRatio(){var e=this.Get("ZombieMode_ZombieDmgEnhance");return parseFloat(e.F8)/100}ZombieMode_ZombieFactory_CreateZombieCDTime(e){return this.Get("ZombieMode_ZombieFactoryCreateZombie").F1*Math.pow(e,-.2)}ZombieMode_ZombieFactory_ActiveZombieCDTime(e){return this.Get("ZombieMode_ZombieFactoryCreateZombie").F2*Math.pow(e,-.2)}ZombieMode_ZombieFactory_ZombieStorageMaxCount(e){var t=this.Get("ZombieMode_ZombieFactoryCreateZombie");return Math.ceil(t.F3+t.F4*Math.pow(e,.5))}ZombieMode_ZombieNightBuff_AddSpeedRatio(){return this.Get("ZombieMode_ZombieNightBuff").F1}ZombieMode_ZombieNightBuff_AddAttSpeedRatio(){return this.Get("ZombieMode_ZombieNightBuff").F2}ZombieMode_ZombieBloodNightBuff_AddSpeedRatio(){return this.Get("ZombieMode_ZombieNightBuff").F3}ZombieMode_ZombieBloodNightBuff_AddAttSpeedRatio(){return this.Get("ZombieMode_ZombieNightBuff").F4}ZombieMode_ZombieFactory_UnderAtkSpeedUp_CreateCDRatio(){return this.Get("ZombieMode_ZombieFactoryCreateZombie_UnderAtk").F1/100}ZombieMode_ZombieFactory_UnderAtkSpeedUp_Duration(){return this.Get("ZombieMode_ZombieFactoryCreateZombie_UnderAtk").F2/1e3}ZombieMode_ZombieFactory_UnderAtkLevelUp_Probability(){return this.Get("ZombieMode_ZombieFactoryCreateZombie_UnderAtk").F3/100}ZombieMode_ZombieFactory_UnderAtkLevelUp_CD(){return this.Get("ZombieMode_ZombieFactoryCreateZombie_UnderAtk").F4/1e3}ZombieMode_ItemUpgrade(){return this.Get("Zombie_ItemUpgrade")}},Gp=Cp,Sp=(Gp.InGame_KillProbability_ChestKey=0,Gp.InGame_BoxProbability_ChestKey=0,class extends e{constructor(){super(...arguments),this.targetId=-1,this.moveSpeed=0,this.nowValue=0,this.height=3,this.isGetTarget=!1,this.targetPos=new Laya.Vector3(0,0,0),this.isAoe=!1}}),yp=class{static BuffInit(e,t,i,o){o?(i.buffKeepTime+=.04,i.f1=o.f1,i.f2=o.f2):i.buffKeepTime=.04}static BuffUpdate(e,t,i,o){let a=t.GetComponent(M);a.pos.x+=i.f1*i.f3,a.pos.z-=i.f2*i.f3}static BuffDispose(e,t,i,o){}static HitedBuffDeal(e,t,i,o){}static HitBuffDeal(e,t,i,o){}},wp=(yp.BuffName="Recoil",class{static BuffInit(e,t,i,o){o?o.buffKeepTime>i.buffKeepTime&&(i.buffKeepTime=o.buffKeepTime):t.GetComponent(R).invincible+=100,console.warn("CarInvincible进入到车中，开启无敌")}static BuffUpdate(e,t,i,o){let a=e.GetEntityByID(i.effectId);a&&(e=t.GetComponent(R),a.GetComponent(M).SetScale(e.sizeScale,e.sizeScale,e.sizeScale),a.GetComponent(Mt).offset.y=.82*e.sizeScale)}static BuffDispose(e,t,i,o){t.GetComponent(R).invincible-=100;let a=e.GetEntityByID(i.effectId);console.warn("CarInvincible下车了，关闭无敌"),a&&a.Destory()}static HitedBuffDeal(e,t,i,o){}static HitBuffDeal(e,t,i,o){}}),vp=(wp.BuffName="CarInvincible",class{static BuffInit(e,t,i,o){if(o)o.buffKeepTime>i.buffKeepTime&&(i.buffKeepTime+=o.buffKeepTime);else{t.GetComponent(R).speed+=K.DataModule().GetLocal().gameRule.ZombieMode_Car_AddMoveSpeed();let e=O.CreatPrefabEntityUsePos(N.Effect_SpeedUpEffect,t.GetComponent(M).pos);e.GetComponent(Mt).followTargetId=t.id,i.effectId=e.id}}static BuffUpdate(e,t,i,o){}static BuffDispose(e,t,i,o){t.GetComponent(B).render=!0,t.GetComponent(R).speed-=K.DataModule().GetLocal().gameRule.ZombieMode_Car_AddMoveSpeed(),e.GetEntityByID(i.effectId).Destory()}static HitedBuffDeal(e,t,i,o){}static HitBuffDeal(e,t,i,o){}}),Dp=(vp.BuffName="Car",class extends lt{constructor(){super(...arguments),this.systemName="EquipSystem"}Init(){}Update(){}FixedUpdate(){}LateUpdate(){}Destroy(){}OnAddComponent(t,n){if(n.componentId==bt.id){let i=n,e=t.GetComponent(B),o=this.findChild(e.sp,"RightHandPoint"),a=O.CreatPrefabEntity(i.mainWeapon);if(o){o.addChild(a.GetComponent(B).sp);let e=a.GetComponent(M),t=a.GetComponent(B).sp;t.transform.localPositionX=e.pos.x,t.transform.localPositionY=e.pos.y,t.transform.localPositionZ=e.pos.z,t.transform.localRotationEulerX=e.rotation.x,t.transform.localRotationEulerY=e.rotation.y,t.transform.localRotationEulerZ=e.rotation.z,t.transform.localScaleX=1,t.transform.localScaleY=1,t.transform.localScaleZ=1,i.mainWeaponId=a.id}this.GetGunSound(t,a.GetComponent(Qc)),this.GetWeapondata(t,a.GetComponent(U))}}GetGunSound(e,t){let i=e.GetComponent(Qc);i.showLoopSound=t.showLoopSound,i.showSound=t.showSound,e.HasComponent(ut.id)&&(i.showLoopSound="",t.showLoopSound="",i.showSound="",t.showSound="")}GetWeapondata(e,t){let i=e.GetComponent(U);i.nowAct=t.nowAct,i.maxAct=t.maxAct,i.comboTime=t.comboTime,""==i.bullet0&&(i.bullet0=t.bullet0),i.gunMode=t.gunMode,i.isAR=t.isAR,i.bullet0Dis=t.bullet0Dis,i.act0Clip=t.act0Clip,i.act0Time=t.act0Time,i.act0Step1Time=t.act0Step1Time,i.act0Step2Time=t.act0Step2Time,i.act0Step3Time=t.act0Step3Time,i.att0Time=t.att0Time,i.superArmor0=t.superArmor0,i.bullet1=t.bullet1,i.bullet1Dis=t.bullet1Dis,i.act1Clip=t.act1Clip,i.act1Time=t.act1Time,i.act1Step1Time=t.act1Step1Time,i.act1Step2Time=t.act1Step2Time,i.act1Step3Time=t.act1Step3Time,i.att1Time=t.att1Time,i.superArmor1=t.superArmor1,i.bullet2=t.bullet2,i.bullet2Dis=t.bullet2Dis,i.act2Clip=t.act2Clip,i.act2Time=t.act2Time,i.act2Step1Time=t.act2Step1Time,i.act2Step2Time=t.act2Step2Time,i.act2Step3Time=t.act2Step3Time,i.att2Time=t.att2Time,i.superArmor2=t.superArmor2,i.idleClip=t.idleClip,i.runClip=t.runClip,i.bullet0height=t.bullet0height,i.bullet1height=t.bullet1height,i.bullet2height=t.bullet2height,i.isSniperRifle=t.isSniperRifle,i.singleShotLoading=t.singleShotLoading,i.bulletPathAimingEffect=t.bulletPathAimingEffect,i.randomShootingAngle=t.randomShootingAngle,i.bulletsFiredNumbers=t.bulletsFiredNumbers,i.attSpecialRangeId=-1,i.attackRangeId=-1}OnRemoveComponent(e,i){if(i.componentId==bt.id){let e=i,t=this.world.GetEntityByID(e.mainWeaponId);t&&t.Destory()}}findChild(e,t){return e.name==t?e:this._findChild(e._children,t)}_findChild(e,t){for(var i=[],o=0;o<e.length;o++){var a=e[o];if(a.name==t)return a;a.numChildren&&(i=i.concat(a._children))}return i.length?this._findChild(i,t):null}}),Up=class extends ${constructor(){super(...arguments),this.hpPool=[],this.arrowPool=[],this.changedHpPool=[]}Load(){null==this.view&&(this.view=this.CreatFGUIViewByView(Ss.createInstance()),this.hpPool=[],this.arrowPool=[],this.changedHpPool=[])}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null)}Show(){super.Show(),this.Load()}Hide(){super.Hide(),this.UnLoad()}onUpdate(){}GetArrowHud(){if(0<this.arrowPool.length){let e=this.arrowPool.pop();return e.visible=!0,e}let e=K.UIModule().GetUI(Uf.UIName),t=rh.createInstance();return(e.view?e:this).view.addChild(t),t}PutArrowHud(e){null!=e&&e.displayObject&&(e.visible=!1)}GetHpBar(){if(0<this.hpPool.length){let e=this.hpPool.pop();return e.visible=!0,e.m_playerNametxt.color="#FFFFFF",e.m_revengeIcon.visible=!1,e}var e=ys.createInstance();return this.view.addChild(e),e}PutHpBar(e){null!=e&&(e.visible=!1,this.hpPool.push(e))}GetChangedHp(){if(0<this.changedHpPool.length){let e=this.changedHpPool.pop();return e.visible=!0,e.sortingOrder=100,e}var e=Hl.createInstance();return this.view.addChild(e),e}PutChangedHp(e){e.visible=!1,this.changedHpPool.push(e)}ShowHpChanged(e){let t=e.split("_"),i=t[0],o=parseFloat(t[1]),a=Math.ceil(o),n=this.GetChangedHp(),s=!1;if(i==D.changeHpType_Sub&&(n.m_c1.setSelectedIndex(0),n.m_redText.text="-"+a,s=!0,n.m_redText.font="ui://InGameUI/Font30"),i==D.changeHpType_SuperSub&&(n.m_c1.setSelectedIndex(0),n.m_redText.text=K.DataModule().GetLz().GetText("InGame_crit")+"-"+a,s=!0,n.m_redText.font="ui://InGameUI/Font30Yellow"),s){let e=this,t=Math.floor(5*Math.random());n.m_t1.stop(),n.m_t2.stop(),n.m_t3.stop(),n.m_t4.stop(),n.m_t5.stop(),0==t&&n.m_t1.play(Laya.Handler.create(this,function(){e.PutChangedHp(n)})),1==t&&n.m_t2.play(Laya.Handler.create(this,function(){e.PutChangedHp(n)})),2==t&&n.m_t3.play(Laya.Handler.create(this,function(){e.PutChangedHp(n)})),3==t&&n.m_t4.play(Laya.Handler.create(this,function(){e.PutChangedHp(n)})),4==t&&n.m_t5.play(Laya.Handler.create(this,function(){e.PutChangedHp(n)}))}if(i==D.changeHpType_Add){n.m_c1.setSelectedIndex(1),n.m_greenText.text="+"+a;let e=this;n.m_green.play(Laya.Handler.create(this,function(){e.PutChangedHp(n)}))}if(i==D.changeHpType_Miss){n.m_c1.setSelectedIndex(2);let e=this;n.m_miss.play(Laya.Handler.create(this,function(){e.PutChangedHp(n)}))}if(i==D.changeHpType_Parry){n.m_c1.setSelectedIndex(3);let e=this;n.m_parry.play(Laya.Handler.create(this,function(){e.PutChangedHp(n)}))}return n}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(Up);return e.name=Up.UIName,t.uiName=Up.UIName,t}},Lp=Up,Bp=(Lp.UIName="HudUI",class extends e{constructor(){super(...arguments),this.banHud=!1,this.nodeName="HudPoint",this.isShow=!0,this.isGetUi=!1,this.useUICtrl="",this.useLerp=!1}}),bp=class extends e{constructor(){super(...arguments),this.nowTime=0,this.oldTime=-1,this.nowItemId=-1}},Ap=class extends e{constructor(){super(...arguments),this.baseRange=6,this.minRange=6,this.maxRange=50,this.nowRange=50,this.speed=.5,this.time=0}},xp=class extends lt{constructor(){super(...arguments),this.systemName="BattleGameRuleSystem",this.soundList=[],this.time=0,this.grounp=new dt([R.id]),this.frist=!1,this.State="",this.isMyOver=!1,this.myOverDealTime=3}Init(){V.CalState(),P.onRevive.Register(this,this.Revive),V.exitTime=0,console.warn("普通对战init")}Revive(){b.Warn("复活"),this.ReviveMyPlayer()}Update(){}FixedUpdate(){if(V.feiJiOn){let e=q.NowGameWorld.GetEntityByID(V.feiJiId);e&&(e.GetComponent(M).pos.z+=1.4,200<e.GetComponent(M).pos.z&&(V.feiJiOn=!1))}if(!this.frist){O.CreatPrefabEntity(N.CameraRoot),V.ingamePlayerDatas=[],this.frist=!0;let m=V.startGamePlayerCount,e=(1==V.chooseBattleSceneLevel&&(m=10,V.startGamePlayerCount=10),2==V.chooseBattleSceneLevel&&(m=15,V.startGamePlayerCount=15),3==V.chooseBattleSceneLevel&&(m=20,V.startGamePlayerCount=20),K.UIModule().ShowUI(Uf.UIName),K.AudioModule().PlayMusic(x.GetBGM("BGM1")),O.CreatPrefabEntity(N.Fog)),d=(V.banFogMove=!1,0),c=0;if(q.Instance().netFrame){let t=K.MGOBEModule().GetRoomInfo();for(let e=0;e<t.playerList.length;e++){var i=t.playerList[e].customProfile.split("|"),o=i[0],a=i[1],n=i[2],s=i[3],i=Number(i[4]),a=V.CreatInGamePlayerData(t.playerList[e].id,a,o,n,!1,K.MGOBEModule().IsSelf(t.playerList[e].id),s,i,"","",[],1,"");V.ingamePlayerDatas.push(a),d+=i,m--}d=Math.floor(d/t.playerList.length)}else{var g=K.DataModule().GetUser().GetData().nowChooseHero;K.DataModule().GetUser().GetData().nowChooseHero=ci.SnowSceneUseSantaSkin(g),""!=V.tryHeroSkinId&&(K.DataModule().GetUser().GetData().nowChooseHero=V.tryHeroSkinId);let e=K.DataModule().GetUser().GetData().nowChooseHero,t=K.DataModule().GetUser().GetEquitWeapon(),i=K.DataModule().GetLz().GetText("You"),o=(""!=V.tryWeaponId&&(t=V.tryWeaponId),K.DataModule().GetUser().GetItemByID(t)),a="",n=(o&&(a=o.data),""!=V.tryWeaponSkinId&&(a=V.tryWeaponSkinId),1),s=K.DataModule().GetUser().GetHeroItemData(e),l=(s&&(n=s.level),K.DataModule().GetLocal().skill.GetPlayerLvUnlockSkill(K.DataModule().GetUser().GetData().userLevel.level)),r=V.GetChinaState(K.PlatformModule().chinaState),h=V.CreatInGamePlayerData("Local",t,e,i,!1,!0,K.DataModule().GetUser().GetAllPropsStrs(t),K.DataModule().GetUser().GetData().userMedal.level,"",a,l,n,r);h.startSkills=V.startGetSkill,V.ingamePlayerDatas.push(h),d=h.level;var f=K.DataModule().GetUser().GetData().userMedal,_=K.DataModule().GetLocal().medal.GetByLevel(f.level);_&&f.star+1>=_.Star&&(b.Warn("难度增加"),d+=1),2<K.DataModule().GetUser().GetData().userBattleInfo.cv&&(c=K.DataModule().GetUser().GetData().userBattleInfo.cv-1),m--,K.DataModule().GetUser().GetData().nowChooseHero=g}let u=10,p=0;q.Instance().netFrame||(k.Platform==T.WECHAT&&!k.IsInWebTest&&(1==CC.Instance.abTest()||3==CC.Instance.abTest())?5<=(d=6<=d?ci.SnowSceneAddAILevel(d):d)&&(10<(u=2+2*K.DataModule().GetUser().GetData().userBattleInfo.winCount)&&(u=10),5<(p=+K.DataModule().GetUser().GetData().userBattleInfo.winCount+0)&&(p=5)):(10<(u=2+2*K.DataModule().GetUser().GetData().userBattleInfo.winCount)&&(u=10),5<(p=+K.DataModule().GetUser().GetData().userBattleInfo.winCount+0)&&(p=5),d=ci.SnowSceneAddAILevel(d)));f=K.DataModule().GetUser().GetData().userMedal;k.isNew2&&(1==f.level&&0==f.star&&(m=5),1==f.level&&1==f.star&&(m=5),1==f.level&&2==f.star&&(m=7),(m=2==f.level&&0==f.star?7:m)<=7&&(e.GetComponent(Ap).nowRange=30,V.fogRange=30)),b.Warn("当前段位",d,u,"人数：",m,"装备数",p,f);for(let h=0;h<m;h++){let e=K.DataModule().GetLocal().ai.GetByLevel(d,u),t=(0<c&&(e=K.DataModule().GetLocal().ai.GetByLevel(d+20,3),c--),e.UseHeroRange.split("-")),i=K.DataModule().GetLocal().hero.GetHeroIDsByRare(Number(t[0]),Number(t[1])),o=i[Math.floor(i.length*q.Random())],a=(o=ci.SnowSceneUseSantaSkin(o),V.useSameHeroSkinId&&(o=K.DataModule().GetUser().GetData().nowChooseHero),k.testVideo&&("Ultraman"==K.DataModule().GetUser().GetData().nowChooseHero&&(o="MonkeyKing"),"MonkeyKing"==K.DataModule().GetUser().GetData().nowChooseHero&&(o="Ultraman")),Math.floor(e.canUseWeaponLevelMin+(e.canUseWeaponLevelMax-e.canUseWeaponLevelMin)*q.Random())),n=K.DataModule().GetLocal().weapon.GetByLevel(a).ID,s=_u.getRandomNameList(),l=(q.Instance().netFrame&&(s="路人"),""),r=[];q.Instance().netFrame||(I=e.canUseGearLevelMin,C=e.canUseGearLevelMax,C=I+Math.floor(Math.random()*(C-I)),0<p&&this.GetEquitPros(Z.Head,C,r),1<p&&this.GetEquitPros(Z.Foot,C,r),2<p&&this.GetEquitPros(Z.Chest,C,r),3<p&&this.GetEquitPros(Z.Ring,C,r),4<p&&this.GetEquitPros(Z.Ring,C,r),Math.random()<.01*Number(e.UseWeaponSkinChance)&&(I=K.DataModule().GetLocal().weapon.Get(n).Type,0<(C=K.DataModule().GetLocal().weaponSkin.GetSkinByType(I)).length&&(l=C[Math.floor(C.length*Math.random())],b.Warn("激活皮肤",l))));var I=K.DataModule().GetUser().GetAllPropStrByData(o,n,l,r,1),C=e.PlayerLv.split("-"),G=Number(C[0]),S=Number(C[1]),S=(Math.floor(q.Random()*(S-G)),K.DataModule().GetLocal().skill.GetAIUnlockSkill()),G=V.RandomChinaState(),S=V.CreatInGamePlayerData("AI"+h,n,o,s,!0,!1,I,1,e.AiID,l,S,1,G);console.log("测试限制ai人数",S),V.ingamePlayerDatas.push(S)}for(let e=0;e<V.ingamePlayerDatas.length;e++){var t=V.ingamePlayerDatas[e];t.isSelf&&(V.myInGamePlayerData=t),this.CreatPlayer(t,m)}V.nowSavePlayer=V.ingamePlayerDatas.length,this.State="Ready"}if("Ready"==this.State&&(this.time+=A.FixedTimeDelta,3<this.time&&(this.State="Battle",P.onStartBattle.Trigger())),"Battle"==this.State){if(this.isMyOver||-1!=V.myInGamePlayerData.rank&&1!=V.myInGamePlayerData.rank&&(b.Warn("普通模式游戏失败"),this.isMyOver=!0,P.onBattleFail.Trigger()),V.nowSavePlayer<=1){let o=this.world.GetEntitys([R.id]);for(let i=0;i<o.length;i++){let e=o[i].GetComponent(E).netId,t=V.GetInGamePlayerData(e);null!=t&&(-1==t.rank&&(t.rank=V.nowSavePlayer),1==t.rank&&(o[i].GetComponent(F).ChangeState(Ac.StateName),o[i].GetComponent(F).banStateChange=!0,o[i].GetComponent(M).rotation.y=-135))}let e=this.world.GetSingleCompoentEntity(Ap);e&&e.Destory(),b.Warn("游戏正式结束"),this.State="GameOver"}0!=V.exitTime&&(V.exitTime>V.exitMaxTime&&((_=K.UIModule().GetNowTopUIName())==Uf.UIName||_==Bf.UIName)?(_==Bf.UIName&&K.UIModule().HideUI(Bf.UIName),eG.ResetGame()):V.exitTime=0)}"GameOver"==this.State&&(this.isMyOver||-1!=V.myInGamePlayerData.rank&&1!=V.myInGamePlayerData.rank&&(b.Warn("普通模式游戏失败"),this.isMyOver=!0,P.onBattleFail.Trigger()),this.isMyOver||1==V.myInGamePlayerData.rank&&(b.Warn("游戏胜利"),this.isMyOver=!0,P.onBattleWin.Trigger())),k.IsGM&&V.overGame&&(V.overGame=!1,V.myInGamePlayerData.rank=1,this.State="GameOver")}GetEquitPros(e,t,i){let o=e+"_"+t+"_"+(Math.floor(5*Math.random())+1)+"_1",a=K.DataModule().GetUser().GetUserItemData(o);if(""!=a.data){var n=a.data.split(",");for(let e=0;e<n.length;e++)i.push(n[e])}}LateUpdate(){}Destroy(){P.onRevive.Remove(this,this.Revive),K.UIModule().HideUI(Uf.UIName)}OnAddComponent(e,t){}OnRemoveComponent(e,t){}ReviveMyPlayer(){this.isMyOver=!1,V.nowSavePlayer++,V.myInGamePlayerData.rank=-1;let o=this.world.GetEntitys([R.id]);for(let i=0;i<o.length;i++)if(o[i].GetComponent(E).netId==V.myInGamePlayerData.netId){o[i].GetComponent(F).banStateChange=!1,o[i].GetComponent(F).ChangeState(Mf.StateName),o[i].GetComponent(R).hp=o[i].GetComponent(R).maxHp,o[i].GetComponent(R).fogHitedTimes=0,o[i].GetComponent(R).isDead=!1,o[i].GetComponent(R).triggerAtt=!1,o[i].GetComponent(v).enable=!0;let e=O.CreatPrefabEntityUsePos(N.Effect_HealEffect,o[i].GetComponent(M).pos),t=(e.GetComponent(Mt).followTargetId=o[i].id,e.AddComponent(kt),e.GetComponent(kt).keepTime=1,ri.AddBuffToTarget(o[i],_i.BuffName,!0,5),ci.ThorPower(o[i]),o[i].GetComponent(U).nowBulletCount=o[i].GetComponent(U).bulletCount,o[i].GetComponent(U).bulletLoadTime=0,o[i].GetComponent(U).singleShotLoadingTime=0,o[i].GetComponent(L).skillList);for(let e=0;e<t.length;e++)t[e].cdTime=0}}CreatPlayer(a,e){let t=gu.Instance.GetRandomBornPoint(),i=(e<8&&(t=gu.Instance.GetRandomBornPointInFog()),a.isAI),o=(""!=k.testSkill&&(i=!1),V.myInGamePlayerData.level),n=Jc.CreatHero(new Laya.Vector3(t.x,0,t.z),a.heroId,a.weaponId,i,a.aiId,a.props,a.weaponSkinId,o);a.isSelf?(n.AddComponent(_t),n.AddComponent(Nt),this.world.GetSingleCompoent($i).followTargetId=n.id,n.GetComponent(D).useUICtrl=D.My,V.showInGameGuide&&(n.GetComponent(R).willRandomSkill=["Spin_1","Grenade_1","IceBall_1"])):n.GetComponent(D).useUICtrl=D.Enemy;for(let o=0;o<a.startSkills.length;o++){let e=a.startSkills[o].split("_"),t=e[0],i=1;1<e.length&&(i=Number(e[1]));var s=K.DataModule().GetLocal().skill.Get(t);if(null!=s){if(""!=s.SkillFun)for(let e=0;e<i;e++)H.AddSkill(n,s.SkillFun,s.SkillID,1,1,s.SkillMaxLevel);if(""!=s.BuffFun)for(let e=0;e<i;e++)ri.AddBuffToTarget(n,s.BuffFun,s.IsOnlyBuff,.001*s.keepTime,s.F1,s.F2,s.F3,s.F4)}}return n.GetComponent(D).playerName=a.name,n.GetComponent(D).chinaState=a.chinaState,n.AddComponent(E).netId=a.netId,n}},Tp=class extends ${constructor(){super(...arguments),this.isMatching=!1}Load(){if(null==this.view){this.view=this.CreatFGUIViewByView(Ym.createInstance()),this.isMatching=!1;let e=this;this.view.m_startMatchBtn.onClick(this,function(){e.view.m_c1.setSelectedPage("Matching"),e.isMatching=!0,K.MGOBEModule().StartMatch()}),this.view.m_stopMatchBtn.onClick(this,function(){K.MGOBEModule().Leave(),K.UIModule().HideUI(Tp.UIName),eG.StartCover()})}}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null)}Show(){super.Show(),this.Load()}Hide(){super.Hide(),this.UnLoad()}onUpdate(){this.isShow&&this.isMatching&&(-1==K.MGOBEModule().roomPlayerCount&&(this.view.m_title.text="匹配中..."),0<K.MGOBEModule().roomPlayerCount&&(this.view.m_title.text="已加入玩家:"+K.MGOBEModule().roomPlayerCount,K.MGOBEModule().GetRoomInfo().isForbidJoin&&K.UIModule().HideUI(Tp.UIName)))}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(Tp);return e.name=Tp.UIName,t.uiName=Tp.UIName,t}},kp=Tp,Mp=(kp.UIName="MatchUI",class extends Laya.Script{constructor(){super(),this.pool=[],this.useList=[],this.time=0}onEnable(){this.body=this.owner.getChildAt(0)}onUpdate(){if(this.time-=A.TimeDelta,this.time<0){this.time=.01;let e=this.GetGhost();e.keepTime=.1,e.node.transform.position=this.body.transform.position.clone(),e.node.transform.rotation=this.body.transform.rotation.clone(),Laya.Vector3.scale(this.body.transform.localScale,1.37482,e.node.transform.localScale),this.useList.push(e)}for(let e=0;e<this.useList.length;e++)this.useList[e].keepTime-=A.TimeDelta,this.useList[e].mat.albedoColorA&&(this.useList[e].mat.albedoColorA-=10*A.TimeDelta),this.useList[e].keepTime<0&&(this.useList[e].node.active=!1,this.pool.push(this.useList[e]),this.useList.splice(e,1))}onDisable(){for(let e=0;e<this.pool.length;e++)this.pool[e].node.destroy();for(let e=0;e<this.useList.length;e++)this.useList[e].node.destroy();this.useList=[],this.pool=[]}onDestroy(){for(let e=0;e<this.pool.length;e++)this.pool[e].node.destroy();for(let e=0;e<this.useList.length;e++)this.useList[e].node.destroy();this.useList=[],this.pool=[]}GetGhost(){if(0<this.pool.length){let e=this.pool.pop();return e.node.active=!0,e.mat.albedoColorA=1,e}let e=new Rp,t=(e.node=Laya.Sprite3D.instantiate(this.body,q.EcsGameMgr.nowGame.gameElementCreator.elementRoot),e.node.meshRenderer.material.clone());return t.renderMode=Laya.BlinnPhongMaterial.RENDERMODE_TRANSPARENT,t.albedoColorA=1,e.node.meshRenderer.material=t,e.mat=t,e}}),Rp=class{},Pp=class extends e{constructor(){super(...arguments),this.puppetZombies=[],this.maximum=0}},Ep=class extends lt{constructor(){super(...arguments),this.systemName="SkinSystem"}Init(){}Update(){}FixedUpdate(){}LateUpdate(){}Destroy(){}OnAddComponent(m,o){if(o.componentId==ti.id){let h=o;if(""!=h.weaponId||""!=h.BodySkin){let n=this,e=new Li,s=h.BodySkin,l=h.WeaponSkin,t=null,i=(h.weaponId&&(t=K.DataModule().GetLocal().weapon.Get(h.weaponId),V.AddGunBuff(m,t.ID)),null);if(h.skinId&&!m.GetComponent(ut)&&(i=K.DataModule().GetLocal().hero.Get(h.skinId)),t&&(h.weaponType=t.Type),i&&(h.skinSpEffect=i.SpecialEffect,h.skinSpEffect_F1=i.F1,h.skinSpEffect_F2=i.F2,h.skinSpEffect_F3=i.F3,h.skinSpEffect_F4=i.F4,h.skinSpEffect_F5=i.F5,h.skinSpEffect_F6=i.F6,h.skinSpEffect_F7=i.F7),""!=h.weaponSkinID){o=K.DataModule().GetLocal().weaponSkin.Get(h.weaponSkinID);l=o.Res,h.weaponSkinSpEffect=o.SpecialEffect,h.weaponSkinSpEffect_F1=o.F1,h.weaponSkinSpEffect_F2=o.F2,h.weaponSkinSpEffect_F3=o.F3,h.weaponSkinSpEffect_F4=o.F4;let e=m.GetComponent(U);""!=o.BulletPrefab&&(e.bullet0=o.BulletPrefab)}var o=m.GetComponent(U);if(m.GetComponent(xt).nowClipName=o.idleClip,"MonkeyKingBar"==h.skinSpEffect&&"Axe"==h.weaponType&&(l="WeaponSkin_JGB"),"SuperAirBlade"==h.skinSpEffect&&"Dagger"==h.weaponType&&(l="WeaponSkin_Empty"),ci.Qi_WieldThousandBlades(),"Assassin7"==h.skinSpEffect&&-1!=h.skinSpEffectList.indexOf("WieldThousandBlades")&&"ThousandBlades"==h.weaponSkinID&&(s="Qi2"),"Leo_Zmode"==h.skinSpEffect&&t.Type==ot.Pistol&&V.IsGameMode_Zombie())for(let e=0;e<h.skinSpEffectList.length;e++){var a=h.skinSpEffectList[e];ri.AddBuffToTarget(m,a,!0,-1)}"Michelle_Zmode"==h.skinSpEffect&&V.IsGameMode_Zombie()&&(o=K.DataModule().GetLocal().skill.Get("Zmode_ZombieMastery"),H.AddSkill(m,o.SkillID,o.SkillID,1,1,o.SkillMaxLevel),o=new Pp,m.AddComponentAdv(Pp,o)),""!=s&&e.Add3D(x.GetBodySkin(s)),""!=l&&e.Add3D(x.GetWeaponSkin(l));let r=m.GetComponent(B);K.ResModule().SynLoad(e.resList,this,function(){if(null!=r&&null!=r.sp){if(""!=s&&O.Creat3DNodePoolByPath("BodySkin_"+s,x.GetBodySkin(s)),""!=l&&O.Creat3DNodePoolByPath("WeaponSkin_"+l,x.GetWeaponSkin(l)),""!=s){q.EcsGameMgr.nowGame.gameElementCreator.Remove3DRender(r.sp),r.spName="BodySkin_"+s,r.sp=null;var a=q.EcsGameMgr.nowGame.gameElementCreator.Creat3DRender(r.spName),a=(r.sp=a,m.GetComponent(M));r.sp.transform.localPositionX=a.pos.x,r.sp.transform.localPositionY=a.pos.y,r.sp.transform.localPositionZ=a.pos.z,r.sp.transform.localRotationEulerX=a.rotation.x,r.sp.transform.localRotationEulerY=a.rotation.y,r.sp.transform.localRotationEulerZ=a.rotation.z,r.sp.transform.localScaleX=a.scale.x,r.sp.transform.localScaleY=a.scale.y,r.sp.transform.localScaleZ=a.scale.z,r.sp.active=a.isInCameraArea;let t=m.GetComponent(B).sp,i=t.getComponent(Laya.Animator);if(!i)for(let e=0;e<t.numChildren&&!(i=t.getChildAt(e).getComponent(Laya.Animator));e++);let e=m.GetComponent(xt),o=(e.animator=i,e.oldRender=!1,m.GetComponent(D));null!=o&&null!=o.nodeName&&(o.nodeSp=n.findChild(m.GetComponent(B).sp,o.nodeName))}let e=n.world.GetEntityByID(m.GetComponent(bt).mainWeaponId),t=e.GetComponent(B),i=n.findChild(r.sp,"RightHandPoint"),o=(q.EcsGameMgr.nowGame.gameElementCreator.Remove3DRender(t.sp),""!=l&&(t.spName="WeaponSkin_"+l),t.sp=null,q.EcsGameMgr.nowGame.gameElementCreator.Creat3DRender(t.spName));i&&i.addChild(o),t.sp=o,t.sp.active=!0,"TrampleSlash"==h.weaponSkinSpEffect&&null==o.getComponent(Mp)&&o.addComponent(Mp),h.weaponNode=o;a=e.GetComponent(M);t.sp.transform.localPositionX=a.pos.x,t.sp.transform.localPositionY=a.pos.y,t.sp.transform.localPositionZ=a.pos.z,t.sp.transform.localRotationEulerX=a.rotation.x,t.sp.transform.localRotationEulerY=a.rotation.y,t.sp.transform.localRotationEulerZ=a.rotation.z,t.sp.transform.localScaleX=a.scale.x,t.sp.transform.localScaleY=a.scale.y,t.sp.transform.localScaleZ=a.scale.z,"GuGuChicken"==h.weaponSkinSpEffect&&(m.GetComponent(Qc).showSound="JiJiao",m.GetComponent(Qc).showLoopSound="JiJiaoLoop"),"WaterGun"==h.weaponSkinSpEffect&&(m.GetComponent(Qc).showSound="PenShui",m.GetComponent(Qc).showLoopSound="PenShuiLoop"),"WaterGun"==h.weaponSkinSpEffect&&(m.GetComponent(Qc).showSound="PenShui",m.GetComponent(Qc).showLoopSound="PenShuiLoop"),"Firecrackers"==h.weaponSkinSpEffect&&(m.GetComponent(Qc).showSound="Xiu"),"EpicAss"==h.weaponSkinSpEffect&&(m.GetComponent(Qc).showSound="FangPi")}})}}}OnRemoveComponent(e,t){}findChild(e,t){return e.name==t?e:this._findChild(e._children,t)}_findChild(e,t){for(var i=[],o=0;o<e.length;o++){var a=e[o];if(a.name==t)return a;a.numChildren&&(i=i.concat(a._children))}return i.length?this._findChild(i,t):null}},Np=class extends e{constructor(){super(...arguments),this.soureId=-1,this.targetId=-1,this.chainType="Normal"}},Fp=class extends e{constructor(){super(...arguments),this.nowState="Normal",this.oldState="Normal",this.xSize=4,this.ySize=3,this.itemWidth=134,this.itemHeight=134,this.xOffsetByX=-16,this.mapList=[],this.nowChooseIndex=0,this.nowPos=new Laya.Vector2(0,0),this.nowPixelPos=new Laya.Vector2(0,0),this.buyId="",this.sell=!1,this.dragEquipment=!1,this.showAddCoinTime=0,this.useMergeGuide=!0,this.mergeGuideTime=0,this.freshToNewMapList=[],this.useDropBox=!0,this.useDropLeftTime=10,this.dropBoxMaxCount=3,this.useDropTimeMin=5,this.useDropTimeMax=10,this.dropnNomalSubLevel=4,this.dropnUpGradeChance=.35,this.dropnUpAddCount=1,this.dropnUpAddLevel=2,this.dropnSuperAddLevel=3,this.nowWillUpgradeIndex=0,this.willUpgradeIndex=[],this.willUpgradeWeapon=[],this.trigerUpgrade=!1,this.addDropBoxNowCount=0}IndexToPos(e){var t=Math.floor(e/this.xSize),e=e-t*this.xSize;return new Laya.Vector2(e,t)}PosToIndex(e,t){return e<0||e>=this.xSize||t<0||t>=this.ySize?-1:e+t*this.xSize}IndexToPixelPos(e){let t=this.IndexToPos(e);return t.x=t.x*this.itemWidth+t.y*this.xOffsetByX,t.y=t.y*this.itemHeight,t}PixelPosToIndex(e,t){return t=Math.floor(t/this.itemHeight),(e=Math.floor((e-t*this.xOffsetByX)/this.itemWidth))<0||e>=this.xSize||t<0||t>=this.ySize?-1:this.PosToIndex(e,t)}FreshMap(e){this.freshToNewMapList=e.concat()}TriggerUpGrade(e){e?this.trigerUpgrade=!0:(this.trigerUpgrade=!1,this.willUpgradeWeapon=[],this.willUpgradeIndex=[])}},Op=(Fp.State_Normal="Normal",Fp.State_Touching="Touching",Fp.offsetTime=0,Fp.tenTimeTriggeBoxCount=1,Fp.saveDropLeftTime=-1,class extends ${constructor(){super(...arguments),this.itemList=[],this.vec2=new Laya.Vector2(0,0),this.vec1=new Laya.Vector2(0,0),this.nowById="",this.guideStep=0,this.startPos=new Laya.Vector2(200,200),this.endPos=new Laya.Vector2(400,400),this.guideMoceDir=new Laya.Vector2(0,0),this.enterGuide=!1,this.enterGuideBuy=!1,this.guideTime=0,this.gmCount=0,this.dropTimes=0,this.isFreeBtn=!1,this.click_interval=10,this.nowNeed="0",this.leYouUp=!1,this.freeTime=0}Load(){if(null==this.view){this.dropTimes=0,this.view=this.CreatFGUIViewByView(Uh.createInstance()),this.itemList=[];let o=this;if(T.IS_WECHAT_PLATFORM&&K.DataModule().GetLocal().platform.PlatformData.HouseAd&&this.youZiAd(),this.view.on(Laya.Event.MOUSE_DOWN,this,function(e){let t=q.NowGameWorld.GetSingleCompoent(Fp);t.nowPixelPos.x=e.stageX,t.nowPixelPos.y=e.stageY;var i=e.stageX-o.view.m_rootPos.x,e=e.stageY-o.view.m_rootPos.y,i=(t.nowChooseIndex=t.PixelPosToIndex(i,e),t.IndexToPos(t.nowChooseIndex));t.nowState=Fp.State_Touching,t.nowPos.x=i.x,t.nowPos.y=i.y}),this.view.on(Laya.Event.MOUSE_MOVE,this,function(e){let t=q.NowGameWorld.GetSingleCompoent(Fp);t.nowPixelPos.x=e.stageX,t.nowPixelPos.y=e.stageY,null!=t.dargUI&&(t.dargUI.x=t.nowPixelPos.x,t.dargUI.y=t.nowPixelPos.y);var i=e.stageX-o.view.m_rootPos.x,e=e.stageY-o.view.m_rootPos.y,i=t.PixelPosToIndex(i,e),e=t.IndexToPos(i),i=(t.nowPos.x=e.x,t.nowPos.y=e.y,o.vec2.x=t.nowPixelPos.x-o.view.m_recyclePos.x,o.vec2.y=t.nowPixelPos.y-o.view.m_recyclePos.y,Laya.Vector2.scalarLength(o.vec2)<100?(o.view.m_RecycleCtrl.setSelectedIndex(1),t.sell=!0):(o.view.m_RecycleCtrl.setSelectedIndex(0),t.sell=!1),o.vec1.x=t.nowPixelPos.x-o.view.m_heroPos.x,o.vec1.y=t.nowPixelPos.y-o.view.m_heroPos.y,Laya.Vector2.scalarLength(o.vec1));t.dragEquipment=i<200}),this.view.on(Laya.Event.MOUSE_UP,this,function(e){let t=q.NowGameWorld.GetSingleCompoent(Fp);t.nowPixelPos.x=e.stageX,t.nowPixelPos.y=e.stageY;var i=e.stageX-o.view.m_rootPos.x,e=e.stageY-o.view.m_rootPos.y,i=t.PixelPosToIndex(i,e),e=t.IndexToPos(i);if(t.nowState=Fp.State_Normal,t.nowPos.x=e.x,t.nowPos.y=e.y,o.view.m_RecycleCtrl.setSelectedIndex(0),11==i&&0<Fp.tenTimeTriggeBoxCount&&(o.dropTimes++,9<o.dropTimes)){let t=q.NowGameWorld.GetSingleCompoent(Fp);for(let e=0;e<t.mapList.length;e++)""==t.mapList[e]&&(t.useDropLeftTime=0,Fp.tenTimeTriggeBoxCount--);o.dropTimes=0}}),this.view.on(Laya.Event.MOUSE_OUT,this,function(e){let t=q.NowGameWorld.GetSingleCompoent(Fp);t.nowPixelPos.x=e.stageX,t.nowPixelPos.y=e.stageY;var i=e.stageX-o.view.m_rootPos.x,e=e.stageY-o.view.m_rootPos.y,i=t.PixelPosToIndex(i,e),e=t.IndexToPos(i);t.nowState=Fp.State_Normal,t.nowPos.x=e.x,t.nowPos.y=e.y,o.view.m_RecycleCtrl.setSelectedIndex(0)}),this.view.m_bg.url=x.GetIcon("mergeBigBg"),this.view.m_freeGoldBtn.onClick(this,this.m_freeGoldBtn),this.view.m_BuyBtn.onClick(this,function(){Zg.TimeAddToDesktopUI=0,no.Statistics_T06(Vg.m_BuyBtn),o.leYouUp||(o.leYouUp=!0,k.Platform!=T.WECHAT)||K.DataModule().GetUser().GetSaveKey("leYou_Guide6")||(K.DataModule().GetUser().AddSaveKey("leYou_Guide6","true"),z.Instance.LeYou_Guidance(6)),q.NowGameWorld.GetSingleCompoent(Fp).buyId=o.nowById,o.isShowFreeGold(),k.Platform==T.WECHAT&&K.DataModule().GetUser().GetItemByID(o.nowById)}),k.useGmCode){this.gmCount=0;let e=this,t=this.view.addChild(fh.createInstance());t.x=this.view.m_coinAddReward.x,t.y=this.view.m_coinAddReward.y,t.alpha=0,t.onClick(this,function(){e.gmCount++,15<e.gmCount&&(k.IsGM=!0,K.UIModule().ShowUI(Mo.UIName),e.gmCount=0)})}if(k.useCDKey){this.gmCount=0;let e=this.view.addChild(fh.createInstance());e.x=this.view.m_coinAddReward.x,e.y=this.view.m_coinAddReward.y,e.alpha=0}this.view.m_mergeShopBtn.onClick(this,function(){no.Statistics_T06(Vg.m_mergeShopBtn),K.UIModule().ShowUI(ta.UIName)})}this.view.m_freeGoldBtn.m_icon_load.url=x.GetIcon("item_CoinHeap"),this.LoadAddCoinText()}youZiAd(){let e=this.view.displayObject,t=this.view.m_youZiAdPos.x,i=this.view.m_youZiAdPos.y,o=yo.getInstance().createMoreGameButton(e,!0,{x:t,y:i,width:120,height:120,btnUrl:"res/Image/btn-entrance-nogift.png"}),a=yo.getInstance().createMoreGameUIH(e,o,{uiStateCall:function(e,t){}});o.on(Laya.Event.CLICK,e,function(){a.showMoreGameUI()})}isShowFreeGold(){var e;k.Platform!=T.OPPO&&k.Platform!=T.VIVO&&(e=this.nowNeed,2<=K.DataModule().GetUser().GetData().userLevel.level&&!Y.isGreaterThanOrEqualTo(K.DataModule().GetUser().GetData().coin,e)?this.SetFreeGold(!0):this.SetFreeGold(!1))}SetFreeGold(e){this.view.m_freeGoldBtn.visible=e,this.view.m_BuyBtn.visible=!e}m_freeGoldBtn(){let n=this;z.Instance.ChuanQuStatistics(60001),j.GetRewardBtnFun(0,function(){let e=K.DataModule().GetUser().GetData().mergeLevel,t=e-2,i=(t<1&&(t=1),Number(K.DataModule().GetLocal().weapon.GetPrice(t))*(1-.01*e)*2),o=[];o.push(K.DataModule().GetUser().SetItemData(Z.Coin,Z.Coin,i.toString()));var a=K.DataModule().GetUser().GetUserItemDataList(o);K.DataModule().GetUser().GetItem(a,at.window),n.SetFreeGold(!1)},g.GetFreeGold,this.view.m_freeGoldBtn)}FreshBuyBtn(){var e=K.DataModule().GetLocal().weapon.GetRecommendLevel(K.DataModule().GetUser().GetData().mergeLevel),t=K.DataModule().GetLocal().weapon.GetByLevel(e),e=K.DataModule().GetLocal().weapon.GetPrice(e);this.nowNeed=e,this.nowById=t.ID,this.view.m_BuyBtn.m_icon.url=x.GetIcon(t.uiRes),this.view.m_BuyBtn.m_coin.text=Y.converStr(e)}UnLoad(){this.enterGuide=!1,null!=this.view&&(this.view.dispose(),this.view=null)}Init(){let i=q.NowGameWorld.GetSingleCompoent(Fp);for(let t=0;t<i.mapList.length;t++){let e=Lh.createInstance();this.view.addChild(e);var o=i.IndexToPixelPos(t);e.x=o.x+this.view.m_rootPos.x,e.y=o.y+this.view.m_rootPos.y,this.itemList.push(e)}}FreshItems(){let t=q.NowGameWorld.GetSingleCompoent(Fp);if(t.nowState==Fp.State_Touching)for(let e=0;e<t.mapList.length;e++){var i=t.mapList[e];""!=i?this.FreshItemByID(this.itemList[e],i):this.itemList[e].m_c1.setSelectedPage("Empty"),e==t.nowChooseIndex?this.itemList[e].m_c1.setSelectedPage("Choosing"):i==t.mapList[t.nowChooseIndex]&&null!=t.mapList[t.nowChooseIndex]&&-1==t.mapList[t.nowChooseIndex].indexOf("Box")&&this.itemList[e].m_c1.setSelectedPage("CanChoose")}if(t.nowState==Fp.State_Normal)for(let e=0;e<t.mapList.length;e++){var o=t.mapList[e];""!=o?this.FreshItemByID(this.itemList[e],o):this.itemList[e].m_c1.setSelectedPage("Empty")}}AddCoinByItem(e,t,i){""!=q.NowGameWorld.GetSingleCompoent(Fp).mapList[e]&&(this.itemList[e].m_AddCoin.play(null,1,Math.random()*i,0),this.itemList[e].m_coinText.text="+"+Y.converStr(t))}LoadAddCoinText(){let i=K.DataModule().GetUser().GetData().mergeMap,o=0;for(let t=0;t<i.length;t++){let e=i[t];var a;!e||""==e||-1!=e.indexOf("Box")||(a=K.DataModule().GetLocal().weapon.Get(e))&&a.Produce_Gold&&(o+=a.Produce_Gold)}this.SetCoinAddRewardText(o)}SetCoinAddRewardText(e){let t=Math.ceil(e/5),i=Y.converStr(Y.jia(0,t));0<K.DataModule().GetUser().getSpeedTime()?(i=Y.converStr(Y.jia(0,t*K.DataModule().GetUser().speedTimeDouble)),this.view.m_coinAddReward.text=K.DataModule().GetLz().GetTextByPar("Cover_coinGet",i),this.view.m_coinAddReward.color="#00FF00"):(this.view.m_coinAddReward.text=K.DataModule().GetLz().GetTextByPar("Cover_coinGet",i),this.view.m_coinAddReward.color="#FFFFFF")}CreatDragUI(){let e=q.NowGameWorld.GetSingleCompoent(Fp),t=(null!=e.dargUI&&(e.dargUI.dispose(),e.dargUI=null),e.mapList[e.nowChooseIndex]),i=Lh.createInstance();this.view.addChild(i),this.FreshItemByID(i,t),i.setPivot(.5,.5,!0),i.m_c1.setSelectedPage("Drag"),i.x=e.nowPixelPos.x,i.y=e.nowPixelPos.y,e.dargUI=i}ClearDragUI(){let e=q.NowGameWorld.GetSingleCompoent(Fp);null!=e.dargUI&&(e.dargUI.dispose(),e.dargUI=null)}ShowLuackUI(){console.log("点击了")}FreshItemByID(e,t){var i;e.m_Lucky.setSelectedPage("0");try{e.m_luckyBtn.offClick(this,this.ShowLuackUI)}catch(e){}e.m_luckyBtn.onClick(this,this.ShowLuackUI),""!=t&&-1==t.indexOf("Box")?(i=K.DataModule().GetLocal().weapon.Get(t))&&(e.m_c1.setSelectedPage("Normal"),e.m_LevelText.visible=!0,e.m_Icon.url=x.GetIcon(i.uiRes),e.m_LevelText.text=""+i.Level):"Box"==t.split("_")[0]&&(e.m_c1.setSelectedPage("Normal"),e.m_LevelText.visible=!1,e.m_Icon.url=x.GetIcon("WeapenChest"))}ShowCombieAni(e){var t=q.NowGameWorld.GetSingleCompoent(Fp),t=K.DataModule().GetLocal().weapon.Get(t.mapList[e]);t&&(t=K.DataModule().GetLocal().weapon.GetByLevel(t.Level-1))&&(this.itemList[e].m_Icon1.url=x.GetIcon(t.uiRes),this.itemList[e].m_Icon2.url=x.GetIcon(t.uiRes),this.itemList[e].m_MergeLevelText.text=""+t.Level,this.itemList[e].parent.setChildIndex(this.itemList[e],this.itemList[e].parent.numChildren-1),this.itemList[e].m_mergeAni.play())}ShowNewOne(e){this.itemList[e].parent.setChildIndex(this.itemList[e],this.itemList[e].parent.numChildren-1),this.itemList[e].m_New.play()}ShowDropBox(e){this.itemList[e].parent.setChildIndex(this.itemList[e],this.itemList[e].parent.numChildren),this.itemList[e].m_DropBox.play()}ShowSpEffect(e,t=0){this.itemList[e].parent.setChildIndex(this.itemList[e],this.itemList[e].parent.numChildren-1),this.itemList[e].m_ShowEffect.play(null,1,t)}ShowClick(e){this.itemList[e].m_ClickBtn.play()}ShowShake(e){this.itemList[e].m_Shake.play()}ShowShake2(e,t=0){this.itemList[e].m_Shake2.play(null,1,t)}Show(){super.Show(),this.Load()}Hide(){super.Hide(),this.UnLoad()}onUpdate(){this.isShow&&(this.freeTime=0,this.isShowFreeGold(),this.click_interval+=A.TimeDeltaNoScale,this.UpDateMergeGuide())}ShowGuide(){let i=q.NowGameWorld.GetSingleCompoent(Fp).mapList,o=-1,a=-1;for(let t=0;t<i.length;t++)if(t<i.length-1&&""!=i[t]&&-1==i[t].indexOf("Box")){var e=K.DataModule().GetLocal().weapon.GetByKey(i[t]);if(null!=e&&e.Level<K.DataModule().GetLocal().weapon.maxLevel)for(let e=t+1;e<i.length;e++)if(i[t]==i[e]&&""!=i[t]){o=t,a=e;break}}-1!=o?(this.enterGuide=!0,this.enterGuideBuy=!1,this.guideStep=0,this.startPos.x=this.itemList[o].x+.5*this.itemList[o].width,this.startPos.y=this.itemList[o].y+.5*this.itemList[o].height,this.endPos.x=this.itemList[a].x+.5*this.itemList[a].width,this.endPos.y=this.itemList[a].y+.5*this.itemList[a].height,this.view.setChildIndex(this.view.m_finger,this.view.numChildren)):this.enterGuide=!1}HideGuide(){this.enterGuide=!1,this.view.m_finger.visible=!1}ShowGuideBuy(){this.enterGuide=!1,this.enterGuideBuy=!0,this.view.setChildIndex(this.view.m_finger,this.view.numChildren)}HideGuideBuy(){this.enterGuideBuy=!1,this.view.m_finger.visible=!1}UpDateMergeGuide(){if(this.enterGuide){let e=q.NowGameWorld.GetSingleCompoent(Fp),t=!0;(t=null!=e&&e.nowState==Fp.State_Normal?t:!1)?(this.view.m_finger.visible=!0,0==this.guideStep&&(this.view.m_finger.x=this.startPos.x,this.view.m_finger.y=this.startPos.y,this.view.m_finger.alpha=0,this.guideStep=1,this.view.m_finger.m_Finger.setSelectedIndex(0),this.guideMoceDir.x=this.endPos.x-this.startPos.x,this.guideMoceDir.y=this.endPos.y-this.startPos.y,Laya.Vector2.normalize(this.guideMoceDir,this.guideMoceDir),Laya.Vector2.scale(this.guideMoceDir,250,this.guideMoceDir),this.guideMoceDir.x=Math.abs(this.guideMoceDir.x),this.guideMoceDir.y=Math.abs(this.guideMoceDir.y),this.view.setChildIndex(this.view.m_finger,this.view.numChildren)),1==this.guideStep&&(this.view.m_finger.alpha+=4*A.TimeDelta,1<=this.view.m_finger.alpha&&(this.view.m_finger.alpha=1,this.guideStep=2,this.view.m_finger.m_Finger.setSelectedIndex(1))),2==this.guideStep&&(this.view.m_finger.x=S.MoveTowards(this.view.m_finger.x,this.endPos.x,this.guideMoceDir.x*A.TimeDelta),this.view.m_finger.y=S.MoveTowards(this.view.m_finger.y,this.endPos.y,this.guideMoceDir.y*A.TimeDelta),this.view.m_finger.x==this.endPos.x&&this.view.m_finger.y==this.endPos.y&&(this.guideStep=3,this.view.m_finger.m_Finger.setSelectedIndex(0))),3==this.guideStep&&(this.view.m_finger.alpha-=4*A.TimeDelta,this.view.m_finger.alpha<=0&&(this.view.m_finger.alpha=0,this.guideStep=0))):this.view.m_finger.visible=!1}else this.enterGuideBuy?(this.view.m_finger.x=this.view.m_BuyBtn.x,this.view.m_finger.y=this.view.m_BuyBtn.y-20,this.guideTime+=A.TimeDelta,.5<this.guideTime&&(1==this.view.m_finger.m_Finger.selectedIndex?this.view.m_finger.m_Finger.setSelectedIndex(0):this.view.m_finger.m_Finger.setSelectedIndex(1),this.guideTime=0)):this.view.m_finger.visible=!1}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(Op);return e.name=Op.UIName,t.uiName=Op.UIName,t.jointOrder=!1,t}}),Hp=Op,Vp=(Hp.UIName="MergeUI",class{constructor(){this.runlist=[],this.poollist=[],this.nowTime=0,this.creatRate=.5}Init(e,t=0){this.p1=e.getChild("Point1").asLoader,this.p2=e.getChild("Point2").asLoader,this.p3=e.getChild("Point3").asLoader,this.ui=e;let i=this;Laya.timer.once(1e3*t,this,function(){i.Start()})}Start(){let e=this;Laya.timer.frameLoop(1,this,this.Update),Laya.timer.once(0,this,function(){e.Shot(e.p1.x,e.p1.y,1)}),Laya.timer.once(300,this,function(){e.Shot(e.p2.x,e.p2.y,-1)})}Shot(t,i,o){for(let e=0;e<10;e++){let e=this.CreatSp();e.addVec.y=1500,e.addVec.x=3500*-o,e.vec.y=-600-700*Math.random(),e.vec.x=1e3*o+o*Math.random()*1400,e.sp.x=t,e.sp.y=i-50*Math.random(),e.sp.scaleX=.2+.7*Math.random(),e.sp.scaleY=.2+.7*Math.random(),e.rotateSpeed=200+500*Math.random(),e.maxFallSpeed=100+400*Math.random()}K.AudioModule().PlayOnce(x.GetSound2("Paper"))}CrearFall(t,i){for(let e=0;e<6;e++){let e=this.CreatSp();e.addVec.y=1500,e.addVec.x=0,e.vec.y=0,e.vec.x=200*Math.random()-100,e.sp.x=t+1280*Math.random(),e.sp.y=i,e.sp.scaleX=.2+.7*Math.random(),e.sp.scaleY=.2+.7*Math.random(),e.rotateSpeed=200+500*Math.random(),e.maxFallSpeed=100+400*Math.random()}}Update(){var i=.001*Laya.timer.delta;for(let t=this.runlist.length-1;0<=t;t--){let e=this.runlist[t];e.sp.x+=e.vec.x*i,e.sp.y+=e.vec.y*i,150<Math.abs(e.vec.x)&&(e.vec.x+=e.addVec.x*i),e.vec.y>e.maxFallSpeed&&(e.vec.y=e.maxFallSpeed),0<e.vec.x&&540<e.sp.x&&this.DisposeSp(e),e.vec.x<0&&e.sp.x<0&&this.DisposeSp(e),720<e.sp.y&&this.DisposeSp(e),e.vec.y+=e.addVec.y*i,e.sp.rotation+=e.rotateSpeed*i}this.nowTime+=i,this.nowTime>this.creatRate&&(this.CrearFall(this.p3.x,this.p3.y),this.nowTime=0)}CreatSp(){if(0<this.poollist.length){let e=this.poollist.shift();return e.sp.visible=!0,this.runlist.push(e),e}{let e=new zp,t=new fairygui.GLoader;return t.url="ui://InGameUI/FireworksSp_"+(1+Math.floor(7*Math.random())),t.pivotX=.5,t.pivotY=.5,t.autoSize=!0,this.ui.addChild(t),this.runlist.push(e),e.sp=t,e}}DisposeSp(t){for(let e=0;e<this.runlist.length;e++)this.runlist[e]==t&&(this.poollist.push(this.runlist[e]),this.runlist[e].sp.visible=!1,this.runlist.splice(e,1))}Dispose(){Laya.timer.clearAll(this)}}),zp=class{constructor(){this.vec=new Laya.Vector2(0,0),this.addVec=new Laya.Vector2(0,0),this.rotateSpeed=100,this.maxFallSpeed=400}},Wp=class extends ${constructor(){super(...arguments),this.nowIndex="",this.List=["1","2","3"]}Load(){null==this.view&&(this.view=this.CreatFGUIViewByView(md.createInstance()),this.AllOnClick(),this.LoadImage()),this.SetLoadInfo()}LoadImage(){}AllOnClick(){this.view.m_Btn_Close.onClick(this,this.onBtn_Close)}onBtn_Close(){K.UIModule().HideUI(Wp.UIName)}List_Refresh(){this.view.m_list.itemRenderer=Laya.Handler.create(this,this.onRenderItem,null,!1),this.view.m_list.numItems=this.List.length,this.view.m_list.on(fairygui.Events.CLICK_ITEM,this,this.On_Item)}onRenderItem(e,t){var i=this.List[e];Laya.timer.once(100*e,this,function(){try{t.m_t0.play(null,1)}catch(e){console.log("er:",e)}}),t.m_com.m_load_bg.url=x.GetIcon("GameScenesUI_Image_bg"+i),t.m_com.m_load_rank.url=x.GetFairyGUI_Icon("GameScenesUI_Image_rank"+i),t.m_com.m_load_rank_icon.url=x.GetIcon("GameScenesUI_Image_rank_icon"+i),t.m_com.m_load_info.url=x.GetFairyGUI_Icon("GameScenesUI_Image_info"+i),t.m_com.m_load_count.url=x.GetFairyGUI_Icon("GameScene_text_num"+i);let o=!1,a=K.DataModule().GetUser().GetData().userMedal.level;"1"==i?a<10&&(o=!0):"2"==i?3<=a&&(o=!0):"3"==i&&10<=a&&(o=!0),t.m_com.m_load_bg.grayed=!o}On_Item(e){var t=this.view.m_list.getChildIndex(e),t=this.List[t];if(console.log("点击",t),this.nowIndex=t,e.m_com.m_load_bg.grayed)return K.AudioModule().OptimizePlayOnce(x.GetSound2("CuoWu")),void j.TopUI_TipShow(K.DataModule().GetLz().GetText("GameSceneUI_Tip"+this.nowIndex));V.gameMode="Normal",K.UIModule().GetUI(Zg.UIName).startGame(),z.Instance.ChuanQuStatistics(50001),V.chooseBattleSceneLevel=Number(this.nowIndex)}SetScene2Effects(){this.view.m_list&&this.view.m_list.getChildAt(1).m_t1.play(null,-1)}SetLoadInfo(){this.List_Refresh()}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null)}Show(){super.Show(),this.Load()}SetHideInfo(){Laya.timer.clearAll(this)}Hide(){this.SetHideInfo(),super.Hide(),this.UnLoad()}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(Wp);return e.name=Wp.UIName,t.uiName=Wp.UIName,t}},Zp=Wp,jp=(Zp.UIName="GameScenesUI",class extends ${constructor(){super(...arguments),this.unlockLevel=15,this.List=[],this.Time_Zombie=9999999}Load(){null==this.view&&(this.view=this.CreatFGUIViewByView(Dl.createInstance()),this.AllOnClick(),this.LoadImage(),k.IsInWebTest||k.Platform!=T.WECHAT||1==CC.Instance.abTest1()&&(this.unlockLevel=6),z.Instance.LeYou_action(1001,10)),this.SetLoadInfo()}LoadImage(){}AllOnClick(){this.view.m_Btn_Close.onClick(this,this.onBtn_Close)}onBtn_Close(){K.UIModule().HideUI(jp.UIName)}SetLoadInfo(){this.List=[];var t=Object.keys($I);for(let e=0;e<t.length;e++)t[e]==$I.Normal||t[e]==$I.Nian||"0"==k.AbTest_IsMode1&&$I.Zombie==t[e]||this.List.push(t[e]);this.List_Refresh()}List_Refresh(){this.view.m_list.itemRenderer=Laya.Handler.create(this,this.onRenderItem,null,!1),this.view.m_list.numItems=this.List.length,this.view.m_list.on(fairygui.Events.CLICK_ITEM,this,this.On_Item)}onRenderItem(e,t){let i=!1,o=this.List[e];if(t.m_Com.m_load_Condition.url="",t.m_Com.m_leftText.text="",t.m_Com.m_load_unlock.url="",t.m_Com.m_text_count.text="",t.m_Com.m_luck_bg.visible=!1,t.m_Com.m_load_bg.url=x.GetIcon("ModelUI_Bg_"+o),t.m_Com.m_load_Condition.url=x.GetFairyGUI_Icon("ModelUI_Condition_"+o),t.m_Com.m_load_model.url=x.GetFairyGUI_Icon("ModelUI_mode_"+o),t.m_Com.m_load_title.url=x.GetFairyGUI_Icon("ModelUI_title_"+o),o==$I.Nian){let e=K.DataModule().GetUser().GetBaoZhuItem();t.m_Com.m_leftText.text=e.count.toString()}var e=this.isUnlock(o);t.m_Com.m_maskBg.visible=!e,t.m_Com.m_lock.visible=!e,e?o==$I.Zombie?(e=K.DataModule().GetUser().getDayTime(o),t.m_Com.m_text_count.text="",e<3?i=!1:e<this.Time_Zombie&&(i=!0)):o==$I.Deathmatch&&(i=!0):(t.m_Com.m_luck_bg.visible=!0,e=this.GetUId(o),t.m_Com.m_load_unlock.url=x.GetFairyGUI_Icon("ModelUI_unlock_"+e)),i&&k.Platform==T.TT&&t.m_Com.m_c1.setSelectedIndex(1),t.m_Com.m_videoCom.visible=i,t.m_Com.m_n27.visible=i,t.m_Com.m_tip_video.visible=i}GetUId(e){let t="";return"1"==k.AbTest_IsMode1?(e==$I.Zombie&&(t=$I.Deathmatch),e==$I.Deathmatch&&(t=$I.Zombie)):t=e,console.log("返回",e,t),t}SetEffects_luandou(){console.log("播放乱斗"),this.view.m_list&&this.view.m_list.getChildAt(0).m_t0.play(null,-1)}SetEffects_jiangshi(){console.log("播放js"),this.view.m_list&&this.view.m_list.getChildAt(1).m_t0.play(null,-1)}On_Item(e){var t=this.view.m_list.getChildIndex(e),t=this.List[t],e=e.m_Com.m_videoCom.visible;t!=$I.Nian?this.isUnlock(t)?t==$I.Zombie&&K.DataModule().GetUser().getDayTime(t)>=this.Time_Zombie?j.TopUI_TipShow("No entries today"):(z.Instance.LeYou_action(1002,10),this.statrMode(t,e)):j.TopUI_TipShow("The mode is not unlocked"):K.UIModule().GetUI(Zg.UIName).m_nianBtn()}statrMode(e,t=!1){e==$I.Deathmatch&&t?j.GetRewardBtnFun(0,function(){V.gameMode=e,K.UIModule().GetUI(Zg.UIName).startGame(),K.UIModule().HideUI(jp.UIName)},g.LuanDou):e==$I.Zombie&&t?j.GetRewardBtnFun(0,function(){V.gameMode=e,K.UIModule().GetUI(Zg.UIName).startGame(),K.UIModule().HideUI(jp.UIName)},g.JiangShi):(V.gameMode=e,K.UIModule().GetUI(Zg.UIName).startGame())}isUnlock(e){var t=K.DataModule().GetUser().GetData();if(e==$I.Deathmatch)if("2"==k.AbTest_IsMode1){if(2<t.userMedal.level||2==t.userMedal.level&&2<=t.userMedal.star)return!0}else if("1"==k.AbTest_IsMode1){if(3<t.userMedal.level||3==t.userMedal.level&&2<=t.userMedal.star)return!0}else if("0"==k.AbTest_IsMode1&&(2<t.userMedal.level||2==t.userMedal.level&&2<=t.userMedal.star))return!0;if(e==$I.Zombie)if("1"==k.AbTest_IsMode1){if(2<t.userMedal.level||2==t.userMedal.level&&2<=t.userMedal.star)return!0}else if("2"==k.AbTest_IsMode1&&(3<t.userMedal.level||3==t.userMedal.level&&2<=t.userMedal.star))return!0;return!1}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null)}Show(){super.Show(),this.Load()}SetHideInfo(){}Hide(){this.SetHideInfo(),super.Hide(),this.UnLoad()}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(jp);return e.name=jp.UIName,t.uiName=jp.UIName,t}}),Kp=jp;Kp.UIName="ModelUI";var qp,Yp=class extends ${constructor(){super(...arguments),this.nowLv=0,this.user="",this.isHide=!1,this.posX=0,this.posY=0,this.posY_directionUp=!0,this.speedX=0,this.speedY=0,this.speedTime=.5}Load(){null==this.view&&(this.view=this.CreatFGUIViewByView(Td.createInstance()),this.AllOnClick(),this.LoadImage(),this.firework=new Vp,this.firework.Init(this.view.m_firework,1)),this.SetLoadInfo()}LoadImage(){}SetIndex(t,i=""){if(console.log("进入显示",t,i),"lv"==i)this.SetUserTopExp_reward(),this.view.m_C_isShow.setSelectedPage(i),K.UIModule().GetUI(Zg.UIName).SetCoverBtnGuiDance("lv");else if("scene"==i)this.view.m_btn7.m_load_rank.url=x.GetIcon("GameScenesUI_Image_rank2"),this.view.m_btn7.m_load_rank_icon.url=x.GetIcon("GameScenesUI_Image_rank_icon2"),K.UIModule().GetUI(Zg.UIName).SetCoverBtnGuiDance(),this.view.m_C_isShow.setSelectedPage(i);else if("luandou"==i)this.view.m_btn7.m_load_text.url=x.GetFairyGUI_Icon("ModelUI_mode_Deathmatch"),this.view.m_C_isShow.setSelectedPage("scene"),K.UIModule().GetUI(Zg.UIName).SetCoverBtnGuiDance();else if("js"==i)this.view.m_btn7.m_load_text.url=x.GetFairyGUI_Icon("ModelUI_mode_Zombie"),this.view.m_C_isShow.setSelectedPage("scene"),K.UIModule().GetUI(Zg.UIName).SetCoverBtnGuiDance();else{this.view.m_C_isShow.setSelectedPage(t.toString());let e=t.toString();""!=i&&(e=i),K.UIModule().GetUI(Zg.UIName).SetCoverBtnGuiDance(e)}this.user=i,this.nowLv=t}AllOnClick(){this.view.m_Com1.m_Btn_Close.onClick(this,this.onBtn_Close)}onBtn_Close(){if("scene"==this.user){K.UIModule().HideUI(Yp.UIName);let e=K.UIModule().GetUI(Zp.UIName);return e.Show(),void e.SetScene2Effects()}if("luandou"==this.user){K.UIModule().HideUI(Yp.UIName);let e=K.UIModule().GetUI(Kp.UIName);return e.Show(),void e.SetEffects_luandou()}if("js"==this.user){K.UIModule().HideUI(Yp.UIName);let e=K.UIModule().GetUI(Kp.UIName);return e.Show(),void e.SetEffects_jiangshi()}this.GetCoverBtnPos(),this.isHide=!0,this.view.m_Com1.visible=!1,this.view.m_bg.alpha=0,this.view.m_text_level.visible=!1}SetLoadInfo(){this.isHide=!1,this.view.m_Com1.visible=!0,this.view.m_bg.alpha=.5,Zg.TimeAddToDesktopUI=0,this.view.m_btnlv.m_levelText.text=K.DataModule().GetUser().GetData().userLevel.level.toString(),K.UIModule().GetUI(Zg.UIName).SetCoverBtnGuiDance(),K.AudioModule().PlayOnce(x.GetSound2("MergeNew"))}onUpdate(){if(this.view&&this.isHide){let e;e=""!=this.user?this.view["m_btn"+this.user]:this.view["m_btn"+this.nowLv],this.posY_directionUp?e.y>this.posY?(e.y-=A.TimeDeltaNoScale*this.speedY,e.x-=A.TimeDeltaNoScale*this.speedX):this.EndPos():e.y<this.posY?(e.y+=A.TimeDeltaNoScale*this.speedY,e.x-=A.TimeDeltaNoScale*this.speedX):this.EndPos()}}EndPos(){K.AudioModule().PlayOnce(x.GetSound2("Merge")),this.isHide=!1;let t=this;Laya.timer.once(10,this,function(){3==t.nowLv&&K.DataModule().GetUser().SetNowGuidance(qp.TreasureUIGuide);let e=K.UIModule().GetUI(Zg.UIName);e.PlayCoverBtnUnlockAnimaion(t.nowLv,t.user),K.UIModule().HideUI(Yp.UIName),e.SetCoverBtnGuiDance()})}GetCoverBtnPos(){let e,t=K.UIModule().GetUI(Zg.UIName);3==this.nowLv?(this.posX=t.view.m_shopBtn.x,this.posY=t.view.m_shopBtn.y,z.Instance.LeYou_Guidance(8)):4==this.nowLv?(z.Instance.LeYou_Guidance(13),this.posX=t.view.m_wheelBtn.x,this.posY=t.view.m_wheelBtn.y):5==this.nowLv?(z.Instance.LeYou_Guidance(15),this.posX=t.view.m_HeroBtn.x,this.posY=t.view.m_HeroBtn.y):6==this.nowLv&&(z.Instance.LeYou_Guidance(16),this.posX=t.view.m_Btn_mode.x,this.posY=t.view.m_Btn_mode.y),""!=this.user?(e=this.view["m_btn"+this.user],this.posX=t.view.m_userTopExp_reward.x,this.posY=t.view.m_userTopExp_reward.y):e=this.view["m_btn"+this.nowLv],this.posY>=e.y?this.posY_directionUp=!1:this.posY_directionUp=!0;var i=Math.abs(e.x-this.posX),o=Math.abs(e.y-this.posY);this.speedX=i/this.speedTime,this.speedY=o/this.speedTime}SetUserTopExp_reward(){var e=K.DataModule().GetLocal().playerLv.Get("2"),e=K.DataModule().GetUser().GetUserItemDataList(e.VideoReward,!1);j.FreshRewardItem(this.view.m_btnlv.m_RewardItem,e[0],!1,"","",!0),this.view.m_btnlv.m_RewardItem.m_gear.m_bg.visible=!1}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null)}Show(){super.Show(),this.Load()}SetHideInfo(){this.firework&&(this.firework.Dispose(),this.firework=null)}Hide(){this.SetHideInfo(),super.Hide(),this.UnLoad()}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(Yp);return e.name=Yp.UIName,t.uiName=Yp.UIName,t}},Qp=Yp,Jp=(Qp.UIName="GuidanceWindowUI",(G=qp=qp||{}).FirstFight="FirstFight",G.BuyWeapon="BuyWeapon",G.MergeWeapon="MergeWeapon",G.LevelRewardGuide="LevelRewardGuide",G.TreasureUIGuide="TreasureUIGuide",G.EquipGuide="EquipGuide",class extends ${constructor(){super(...arguments),this.nowStep=0,this.nowGuide="",this.isLv=!1,this.lvS=!1,this.TreasureUIGuideBuy=!1}Load(){null==this.view&&(this.view=this.CreatFGUIViewByView($h.createInstance()),this.AllOnClick(),this.LoadImage()),this.SetLoadInfo()}LoadImage(){}AllOnClick(){this.view.m_Btn_Close.onClick(this,this.onBtn_Close)}onBtn_Close(){K.UIModule().HideUI(Jp.UIName)}SetLoadInfo(){}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null)}Show(){super.Show(),this.Load()}SetHideF(){this.view.m_n15.visible=!0,this.view.m_n7.visible=!1,this.view.m_n11.visible=!1,this.view.m_info3.text=this.view.m_info2.text}ShowGuideByBtn(e,t,i,o,a,n,s,l){let r=e.x+o,h=e.y+a,m=e.width+n,d=e.height+s,c=(i||(r+=.5*e.width,h+=.5*e.height),this.view.m_maskBg.x=r,this.view.m_maskBg.y=h,this.view.m_maskBg.width=m,this.view.m_maskBg.height=d,this.view.m_info.text=t,this.view.m_info.x),u=(this.view.m_info.width+15)/2,p=0,g=(1270<=c+u&&(p-=c+u-1270),c-u<=10&&(p+=10-(c-u)),this.view.m_info.x=this.view.m_info.x+p,this.view.m_info2.text=this.view.m_info.text,this.view.m_info2.x=this.view.m_info.x,!0);360<=h&&(g=!1),this.view.m_n15.visible=!1,this.view.m_n7.visible=g,this.view.m_n11.visible=!g}SetHideInfo(){}onUpdate(){var e,t;SC.UserDateEnd&&k.isGuidance&&((t=(e=K.DataModule().GetUser().GetData()).nowGuide)!=this.nowGuide&&0==this.TreasureUIGuideBuy&&(this.nowGuide=t,this.nowStep=0),(2<=K.DataModule().GetUser().GetData().mergeLevel&&e.levelRewardList.freeList.length<1&&2<=e.userLevel.level||this.isLv)&&null!=K.DataModule().GetUser().GetSaveKey("guidance_towRank")&&(this.lvS||(this.lvS=!0,this.nowStep=0),this.LevelRewardGuide()),t!=qp.BuyWeapon||this.TreasureUIGuideBuy?t!=qp.MergeWeapon||this.TreasureUIGuideBuy?t==qp.TreasureUIGuide||this.TreasureUIGuideBuy?this.TreasureUIGuide():t!=qp.EquipGuide||this.TreasureUIGuideBuy||this.EquipGuide():this.MergeWeaponGuida():this.BuyWeaponGuide())}SetGameOver(){var e=K.UIModule().GetUI(ef.UIName),t=K.DataModule().GetLz().GetText("Guidance_Tip12");j.ShowGuidance(e.view.m_continueBtn,t)}MergeWeaponGuida(){var e,t;null==K.DataModule().GetUser().GetSaveKey("guidance_towRank")&&(0==this.nowStep?K.UIModule().GetNowTopUIName()==Zg.UIName&&(e=K.UIModule().GetUI(Hp.UIName),this.nowStep=1,t=K.DataModule().GetLz().GetText("Guidance_Tip13"),e.view&&e.isShow&&j.ShowGuidance2(e.view.m_bg,t)):1==this.nowStep?2<=K.DataModule().GetUser().GetData().mergeLevel&&(this.nowStep=2,K.UIModule().HideUI(Jp.UIName)):2==this.nowStep?K.UIModule().GetNowTopUIName()==Zg.UIName&&(e=K.UIModule().GetUI(Zg.UIName),t=K.DataModule().GetLz().GetText("Guidance_Tip14"),j.ShowGuidance(e.view.m_local,t),this.nowStep=3,W.Grid_Hero_DarkWitch=!0):3==this.nowStep&&K.UIModule().GetNowTopUIName()!=Zg.UIName&&(K.DataModule().GetUser().AddSaveKey("guidance_towRank","true"),K.UIModule().HideUI(Jp.UIName)))}BuyWeaponGuide(){var e,t;0==this.nowStep?K.UIModule().GetNowTopUIName()==Zg.UIName&&(t=K.UIModule().GetUI(Hp.UIName),this.nowStep=1,e=K.DataModule().GetLz().GetText("Guidance_Tip11"),j.ShowGuidance(t.view.m_BuyBtn,e,!0)):1==this.nowStep&&(t=K.DataModule().GetUser().GetData().nowGuide,K.UIModule().GetNowTopUIName()!=Zg.UIName&&t!=qp.BuyWeapon&&(K.DataModule().GetUser().SetNowGuidance(qp.MergeWeapon),K.UIModule().HideUI(Jp.UIName)))}TreasureUIGuide(){if(0==this.nowStep&&K.UIModule().GetNowTopUIName()==Zg.UIName&&2==K.DataModule().GetUser().GetData().userMedalMax.level&&1==K.DataModule().GetUser().GetData().userMedalMax.star){var i=K.UIModule().GetUI(Zg.UIName);K.DataModule().GetUser().GetData().treasureItemList.length<1&&K.DataModule().GetUser().RefreshTreasureShop(!0);let e=K.DataModule().GetUser().GetUserItemData(Z.Head+"_1_2"),t=K.DataModule().GetUser().GetData().treasureItemList[0];t.isBuy=!1,t.data=e,this.nowStep=1;var o=K.DataModule().GetLz().GetText("Guidance_Tip4");j.ShowGuidance(i.view.m_shopBtn,o)}if(1==this.nowStep){if(K.UIModule().GetNowTopUIName()==Yo.UIName){let e=K.UIModule().GetUI(Yo.UIName),t=e.view.m_itemList.x,i=e.view.m_itemList.y+52.5,o=K.DataModule().GetLz().GetText("Guidance_Tip5");j.ShowGuidance(e.view.m_itemList.getChildAt(0),o,!1,t,i,0,105,52.5)}i=K.DataModule().GetUser().GetData().treasureItemList[0];i&&i.isBuy&&K.UIModule().GetNowTopUIName()!=Yo.UIName&&(K.UIModule().HideUI(Jp.UIName),this.nowStep=2,this.TreasureUIGuideBuy=!0,z.Instance.LeYou_Guidance(9),K.DataModule().GetUser().SetNowGuidance(qp.EquipGuide))}2==this.nowStep&&K.UIModule().GetNowTopUIName()==Yo.UIName&&(o=K.UIModule().GetUI(Yo.UIName),this.TreasureUIGuideBuy=!1,i=K.DataModule().GetLz().GetText("Guidance_Tip6"),j.ShowGuidance(o.view.m_closeBtn,i,!1,0),this.nowStep=3,z.Instance.LeYou_Guidance(10)),3==this.nowStep&&K.UIModule().GetNowTopUIName()==Zg.UIName&&(K.DataModule().GetUser().SetNowGuidance(qp.EquipGuide),K.UIModule().HideUI(Jp.UIName))}EquipGuide(){if(0==this.nowStep&&K.UIModule().GetNowTopUIName()==Zg.UIName){var o=K.UIModule().GetUI(Zg.UIName),a=K.DataModule().GetLz().GetText("Guidance_Tip7");j.ShowGuidance(o.view.m_EquitBtn,a,!1),this.nowStep=1;let t=K.DataModule().GetUser().GetData().itemList,i=!1;for(let e=0;e<t.length;e++)if(t[e].type==Z.Head){i=!0;break}0==i&&(K.UIModule().HideUI(Jp.UIName),K.DataModule().GetUser().SetNowGuidance(""),K.DataModule().GetUser().SaveData())}var n;if(1==this.nowStep&&K.UIModule().GetNowTopUIName()==Ha.UIName&&(o=K.UIModule().GetUI(Pa.UIName),a=K.DataModule().GetLz().GetText("Guidance_Tip8"),j.ShowGuidance(o.view.m_btn_Head,a,!0),o.nowChoose==o.view.m_btn_Head.data&&(this.nowStep=2)),2==this.nowStep&&K.UIModule().GetNowTopUIName()==Ha.UIName){let e=K.UIModule().GetUI(Pa.UIName),t=e.view.m_equitList.getChildAt(0),i=K.DataModule().GetLz().GetText("Guidance_Tip9");z.Instance.LeYou_Guidance(11),t.m_isEquited.visible?(a=e.view.m_equitList.getChildAt(1),o=e.view.m_equitList.x,n=e.view.m_equitList.y,j.ShowGuidance(a,i,!1,o,n)):(a=e.view.m_equitList.x,o=e.view.m_equitList.y,j.ShowGuidance(t,i,!1,a,o)),this.nowStep=3}3==this.nowStep&&K.UIModule().GetNowTopUIName()==Aa.UIName&&(n=K.UIModule().GetUI(Aa.UIName),a=K.DataModule().GetLz().GetText("Guidance_Tip10"),j.ShowGuidance(n.view.m_equitBtn,a,!1),this.nowStep=4),4==this.nowStep&&K.UIModule().GetNowTopUIName()==Ha.UIName&&(z.Instance.LeYou_Guidance(12),K.UIModule().HideUI(Jp.UIName),K.DataModule().GetUser().SetNowGuidance(""),K.DataModule().GetUser().SaveData())}LevelRewardGuide(){if(0==this.nowStep&&K.UIModule().GetNowTopUIName()==Zg.UIName&&1<K.DataModule().GetUser().GetData().userMedalMax.level){let e=K.UIModule().GetUI(Qp.UIName);e.Show(),e.SetIndex(1,"lv"),this.nowStep=1}if(1==this.nowStep&&K.UIModule().GetNowTopUIName()==Zg.UIName&&1<K.DataModule().GetUser().GetData().userLevel.level){let t=K.DataModule().GetUser().GetData().levelRewardList.freeList,i=!0;for(let e=0;e<t.length;e++)1==t[e]&&(i=!1);i?(o=K.UIModule().GetUI(Zg.UIName),a=K.DataModule().GetLz().GetText("Guidance_Tip1"),j.ShowGuidance(o.view.m_userTopExp,a),this.nowStep=2):this.nowStep=5}if(2==this.nowStep&&K.UIModule().GetNowTopUIName()==va.UIName){z.Instance.LeYou_Guidance(109);let e=K.UIModule().GetUI(va.UIName);e.SetListIsDragged(!1);var o=e.view.m_list.getChildAt(1).x+e.view.m_list.x,a=e.view.m_list.getChildAt(1).y+e.view.m_list.y,t=K.DataModule().GetLz().GetText("Guidance_Tip2");j.ShowGuidance(e.view.m_list.getChildAt(1).m_freeCom,t,!1,o,a),this.nowStep=3}if(3==this.nowStep){this.isLv=!0;let e=K.UIModule().GetUI(va.UIName),t=K.DataModule().GetUser().GetData().levelRewardList.freeList,i=!0;for(let e=0;e<t.length;e++)0<t.length&&(i=!1);i||(z.Instance.LeYou_Guidance(110),e.SetListIsDragged(!0),this.nowStep=4,W.Guidance_TryHero=!1,Zg.TimeAddToDesktopUI_f=!0,K.UIModule().HideUI(Jp.UIName))}4==this.nowStep&&(this.nowStep=5),5==this.nowStep&&K.UIModule().GetNowTopUIName()==Zg.UIName&&(this.isLv=!1,K.UIModule().HideUI(Jp.UIName))}Hide(){this.SetHideInfo(),super.Hide(),this.UnLoad()}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(Jp);return e.name=Jp.UIName,t.uiName=Jp.UIName,t.jointOrder=!1,t}}),Xp=Jp;Xp.UIName="GuidanceUI";var $p,eg=class{static IsEnable(){return window.Ohayoo_Trace=this,"lr"==window.ProjectSubCode}static gt_init_info(){if(this.IsEnable())try{var e=K.DataModule().GetLocal().gameRule.GetBattlePoint_player(),t={lev:K.DataModule().GetUser().GetData().userLevel.level,max_lev:K.DataModule().GetUser().GetData().userMedal.level,max_play_lev:e,user_id:window.OpenId,user_name:window.OpenId,user_rank:K.DataModule().GetUser().GetData().userMedal.level,user_CE:e,user_maxweaponlev:K.DataModule().GetUser().GetData().mergeLevel};window.jsCallNative_logEvent("gt_init_info",JSON.stringify(t))}catch(e){}}static gt_guide(i){if(this.IsEnable()){let e=0,t="";if(i==qp.FirstFight&&(e=1,t="新手玩家开始战斗"),i==qp.BuyWeapon&&(e=2,t="软引导购买武器"),i==qp.MergeWeapon&&(e=3,t="软引导合成武器"),i==qp.LevelRewardGuide&&(e=4,t="强引导领取等级奖励"),i==qp.TreasureUIGuide&&(e=5,t="强引导到商店领取免费奖励"),i==qp.EquipGuide&&(e=6,t="强引导使用装备"),0!=e){var o=K.DataModule().GetLocal().gameRule.GetBattlePoint_player(),o={lev:K.DataModule().GetUser().GetData().userLevel.level,max_lev:K.DataModule().GetUser().GetData().userMedal.level,max_play_lev:o,guide_id:e,guide_name:t};try{window.jsCallNative_logEvent("gt_guide",JSON.stringify(o))}catch(i){}}}}static gt_end_play(t,i,o,a){if(this.IsEnable()){let e="吃鸡";t||(e="战败");var n=K.DataModule().GetLocal().gameRule.GetBattlePoint_player(),n={lev:K.DataModule().GetUser().GetData().userLevel.level,max_lev:K.DataModule().GetUser().GetData().userMedal.level,max_play_lev:n,result:e,score:i,kill_num:o,rank:a};try{window.jsCallNative_logEvent("gt_end_play",JSON.stringify(n))}catch(t){}}}static ADD_gt_get_coins(e,t,i,o){let a="",n=1;if(e==Z.Coin&&(a="金币",n=2),e==Z.Diamond&&(a="钻石"),z.Instance.LeYou_Money(t,n,Number(i)),this.IsEnable()){var s=K.DataModule().GetLocal().gameRule.GetBattlePoint_player(),s={lev:K.DataModule().GetUser().GetData().userLevel.level,max_lev:K.DataModule().GetUser().GetData().userMedal.level,max_play_lev:s,coin_type:a,method:t,coin_num:i,coin_left:o};try{window.jsCallNative_logEvent("gt_get_coins",JSON.stringify(s))}catch(e){}}}static SUB_gt_cost_coins(e,t,i,o){let a="",n=1;if(e==Z.Coin&&(a="金币",n=2),e==Z.Diamond&&(a="钻石"),z.Instance.LeYou_Money(t,n,Number(i)),!k.IsInWebTest&&this.IsEnable()){var s=K.DataModule().GetLocal().gameRule.GetBattlePoint_player(),s={lev:K.DataModule().GetUser().GetData().userLevel.level,max_lev:K.DataModule().GetUser().GetData().userMedal.level,max_play_lev:s,coin_type:a,method:t,coin_num:i,coin_left:o};try{window.jsCallNative_logEvent("gt_cost_coins",JSON.stringify(s))}catch(e){}}}static conversion(t){if(this.IsEnable()&&"true"!=Laya.LocalStorage.getItem("Ohayoo_conversion"+t)){let e=4==t?"Cover":3==t?"GameOver":2==t?"StartFight":1==t?"Loading":"";if(""!=e){var i=K.DataModule().GetLocal().gameRule.GetBattlePoint_player(),i={lev:K.DataModule().GetUser().GetData().userLevel.level,max_lev:K.DataModule().GetUser().GetData().userMedal.level,max_play_lev:i,module_id:t,module_name:e,result:"success"};try{window.jsCallNative_logEvent("gt_module_conversion",JSON.stringify(i)),Laya.LocalStorage.setItem("Ohayoo_conversion"+t,"true")}catch(t){}}}}static gt_ad_button_Click(e,t){if(this.IsEnable())try{var i=K.DataModule().GetLocal().gameRule.GetBattlePoint_player(),o={lev:K.DataModule().GetUser().GetData().userLevel.level,max_lev:K.DataModule().GetUser().GetData().userMedal.level,max_play_lev:i,ad_type:"激励视频",ad_position:e+"_"+t,ad_position_type:e,rit_id:window.rit_id()};window.jsCallNative_logEvent("gt_ad_button_click",JSON.stringify(o))}catch(e){}}static gt_ad_Show(e,t){if(this.IsEnable())try{var i=K.DataModule().GetLocal().gameRule.GetBattlePoint_player(),o={lev:K.DataModule().GetUser().GetData().userLevel.level,max_lev:K.DataModule().GetUser().GetData().userMedal.level,max_play_lev:i,ad_type:"激励视频",ad_position:e+"_"+t,ad_position_type:e,rit_id:window.rit_id(),rit_scene:window.rit_scene()};window.jsCallNative_logEvent("gt_ad_show",JSON.stringify(o))}catch(e){}}static gt_ad_show_end(t,i,o){if(this.IsEnable()){let e=2==o?"跳过":1==o?"成功":0==o?"失败":"";if(""!=e)try{var a=K.DataModule().GetLocal().gameRule.GetBattlePoint_player(),n={lev:K.DataModule().GetUser().GetData().userLevel.level,max_lev:K.DataModule().GetUser().GetData().userMedal.level,max_play_lev:a,ad_type:"激励视频",ad_position:t+"_"+i,ad_position_type:t,rit_id:window.rit_id(),result:e};window.jsCallNative_logEvent("gt_ad_show_end",JSON.stringify(n))}catch(t){}}}},tg=((G=$p=$p||{}).Type1="物品",G.Type2="养成",G.Type3="道具",G.Type4="内容",G.Type5="功能",G.Type6="时间",class extends lt{constructor(){super(...arguments),this.systemName="GunSoundSystem",this.gunSoundGrounp=new dt([Qc.id])}Init(){}Update(){}FixedUpdate(){var n,t=this.world.GetEntitysByMatcher(this.gunSoundGrounp);for(let e=0;e<t.length;e++){let i=t[e],o=i.GetComponent(U),a=i.GetComponent(Qc);if(V.myInGamePlayerData)if(-1!=V.myInGamePlayerData.rank)a.isPlay&&K.AudioModule().Stop(x.GetSound2(a.showLoopSound)),a.t1=0,a.firstShot=!1,a.isPlay=!1,a.bulletCount=0;else if(i.GetComponent(M).isInCameraArea){let e=i.GetComponent(bt),t="";e&&(t=e.mainWeapon),V.isPressButtonLaunch(t,o.isAR)?(n=i.GetComponent(R))?!!n.attSoundIsPlay||1==n.attBtnState?0<a.bulletCount?0==a.nowState?(a.firstShot||(a.firstShot=!0,K.AudioModule().OptimizePlayOnce(x.GetSound2(a.showSound)),a.t1=.02),a.firstShot&&1<a.bulletCount&&(a.t1-=A.TimeDelta,a.t1<0&&!a.isPlay&&(K.AudioModule().PlayOnce(x.GetSound2(a.showLoopSound)),a.isPlay=!0))):(a.isPlay&&(K.AudioModule().OptimizePlayOnce(x.GetSound2(a.showSound)),K.AudioModule().Stop(x.GetSound2(a.showLoopSound))),a.isPlay=!1,a.firstShot=!1):K.AudioModule().Stop(x.GetSound2(a.showLoopSound)):(a.isPlay&&(K.AudioModule().OptimizePlayOnce(x.GetSound2(a.showSound)),K.AudioModule().Stop(x.GetSound2(a.showLoopSound))),a.t1=0,a.firstShot&&(a.bulletCount=0,a.firstShot=!1),a.isPlay=!1):0<a.bulletCount&&(--a.bulletCount,K.AudioModule().PlayOnce(x.GetSound2(a.showSound))):0<a.bulletCount&&(--a.bulletCount,n=x.GetSound2(a.showSound),V.IsGameMode_Zombie()&&!K.AudioModule().CanSoundPlay(n,1e3*a.playSameSoundInterval)||K.AudioModule().PlayOnce(n))}else a.isPlay&&K.AudioModule().Stop(x.GetSound2(a.showLoopSound)),a.t1=0,a.firstShot=!1,a.isPlay=!1,a.bulletCount=0}}LateUpdate(){}Destroy(){}OnAddComponent(e,t){}OnRemoveComponent(e,t){}}),ig=class extends e{constructor(){super(...arguments),this.LinkEffectId=-1,this.LinkEffectName="",this.startPlayerId=-1,this.overPlayerId=-1}},og=class extends nc{constructor(){super(...arguments),this.gameName="Main"}LoadProgress(e){j.ShowLoading(.5+.5*e)}GetScenePath(){return x.GetScene(V.nowScene)}NecessaryRes(){let e=[];4<=K.DataModule().GetUser().GetData().userMedal.level&&e.push("BattleScene2"),e.push("BattleScene1"),e.push("BattleScene3"),k.Hongbao&&e.push("BattleSceneNian");var t=Ut.RandomGet(e);V.nowScene=t,1==V.chooseBattleSceneLevel&&((e=[]).push("BattleScene1"),e.push("BattleScene3"),k.Hongbao&&e.push("BattleSceneNian"),t=Ut.RandomGet(e),V.nowScene=t),2==V.chooseBattleSceneLevel&&((e=[]).push("BattleScene4"),e.push("BattleScene2"),t=Ut.RandomGet(e),V.nowScene=t),3==V.chooseBattleSceneLevel&&((e=[]).push("BattleScene5"),t=Ut.RandomGet(e),V.nowScene=t),ci.DealSnowSceneName(),V.IsGameMode_Nian()&&(V.nowScene="BattleSceneNian"),V.IsGameMode_Zombie()&&(V.nowScene="BattleScene6"),""!=V.MustUseScene&&(V.nowScene=V.MustUseScene,V.MustUseScene=""),this.sceneZip="",console.log("开始加载Conventional_zip G"),k.Platform==T.TT&&"BattleScene1"!=V.nowScene&&(this.sceneZip=V.nowScene+"/Conventional.zip");let i=new Li;return O.LoadAllPrefabRes(i),i.AddJson(o.PrefabJson),i}InitNecessaryResPool(){this.isLoadFailed||(this.gameElementCreator.LoadPrefabJsonData(K.ResModule().GetJson(o.PrefabJson)),O.CreatAll3DPrefabPool(),b.Warn("必要资源"))}OtherRes(){let e=new Li;return O.LoadAllPrefabRes(e),e.AddJson(x.GetSceneMapData(V.nowScene)),e.AddJson(x.GetSceneNav(V.nowScene)),e}InitOtherResPool(){this.isLoadFailed||(O.CreatAll3DPrefabPool(),b.Warn("其他资源"))}LoadFailed(){super.LoadFailed()}InitEcsSystem(){this.systemMgr.AddSystem(new class extends lt{constructor(){super(...arguments),this.systemName="ItemCreatSystem",this.vecCache=new Laya.Vector3(0,0,0),this.grounp=new dt([bp.id])}Init(){}Update(){}FixedUpdate(){var n=this.world.GetEntitysByMatcher(this.grounp);for(let a=0;a<n.length;a++){let t=n[a],i=t.GetComponent(bp),e=this.world.GetEntityByID(i.nowItemId),o=t.GetComponent(M);if(e)o.pos.y=-1;else{t.GetComponent(M).pos.y=.1;var s=Math.floor(i.nowTime+1);if(s!=i.oldTime&&(i.oldTime=s,this.FreshNumber(t.GetComponent(B).sp,s)),i.nowTime-=A.FixedTimeDelta,i.nowTime<=0){s=this.RandomCreatItem(t);i.nowItemId=s.id;let e=5*q.Random()+10;V.IsGameMode_Zombie()&&(e=K.DataModule().GetLocal().gameRule.ZombieMode_ItemCreateCD(Math.random())),i.nowTime=e,i.oldTime=-1}}}}FreshNumber(e,t){let i=e.meshRenderer.material;t<10?(i.tilingOffset.z=.1*t,i.tilingOffset.w=.5):(i.tilingOffset.z=.1*(t-10),i.tilingOffset.w=0)}RandomCreatItem(e){let t=new Bt,i=K.DataModule().GetLocal().skill.GetALLItems();for(let e=0;e<i.length;e++)t.AddWeightItem(i[e],100);t.Calculate();let o=t.RandomItem(),a=K.DataModule().GetLocal().skill.Get(o),n=e.GetComponent(M).pos.clone(),s=(n.y=0,O.CreatPrefabEntityUsePos(a.Res3D,n)),l=s.GetComponent(y);return l.f1=a.F1,l.f2=a.F2,l.f3=a.F3,l.f4=a.F4,s}LateUpdate(){}Destroy(){}OnAddComponent(e,t){}OnRemoveComponent(e,t){}}),V.IsGameMode_Nian()?this.systemMgr.AddSystem(new class extends lt{constructor(){super(...arguments),this.systemName="FightNianGameRuleSystem",this.soundList=[],this.time=0,this.grounp=new dt([R.id]),this.frist=!1,this.State="",this.isMyOver=!1,this.myOverDealTime=3,this.creatChestTime=0,this.creatChestCalTime=0}Init(){V.CalState(),P.onRevive.Register(this,this.Revive),V.exitTime=0,console.warn("年兽init")}Revive(){b.Warn("复活"),this.ReviveMyPlayer()}Update(){}FixedUpdate(){if(!this.frist){O.CreatPrefabEntity(N.CameraRoot),V.ingamePlayerDatas=[],this.frist=!0;let e=K.DataModule().GetLocal().event.Get("2021YearMonster_Rule"),l=e.F1,m=(this.creatChestTime=Number(e.F9),K.UIModule().ShowUI(Uf.UIName),K.AudioModule().PlayMusic(x.GetBGM("BGM1")),0),d=0;if(q.Instance().netFrame){let t=K.MGOBEModule().GetRoomInfo();for(let e=0;e<t.playerList.length;e++){var i=t.playerList[e].customProfile.split("|"),o=i[0],a=i[1],n=i[2],s=i[3],i=Number(i[4]),a=V.CreatInGamePlayerData(t.playerList[e].id,a,o,n,!1,K.MGOBEModule().IsSelf(t.playerList[e].id),s,i,"","",[],1,"");V.ingamePlayerDatas.push(a),m+=i,l--}m=Math.floor(m/t.playerList.length)}else{var r=K.DataModule().GetUser().GetData().nowChooseHero;K.DataModule().GetUser().GetData().nowChooseHero=ci.SnowSceneUseSantaSkin(r),""!=V.tryHeroSkinId&&(K.DataModule().GetUser().GetData().nowChooseHero=V.tryHeroSkinId);let e=K.DataModule().GetUser().GetData().nowChooseHero,t=K.DataModule().GetUser().GetEquitWeapon(),i=K.DataModule().GetLz().GetText("You"),o=K.DataModule().GetUser().GetItemByID(t),a="",n=(o&&(a=o.data),""!=V.tryWeaponSkinId&&(a=V.tryWeaponSkinId),1),s=K.DataModule().GetUser().GetHeroItemData(e);s&&(n=s.level);var h=K.DataModule().GetLocal().skill.GetPlayerLvUnlockSkill(K.DataModule().GetUser().GetData().userLevel.level),p=V.GetChinaState(K.PlatformModule().chinaState),h=V.CreatInGamePlayerData("Local",t,e,i,!1,!0,K.DataModule().GetUser().GetAllPropsStrs(),K.DataModule().GetUser().GetData().userMedal.level,"",a,h,n,p),p=(V.ingamePlayerDatas.push(h),m=h.level,K.DataModule().GetUser().GetData().userMedal),h=K.DataModule().GetLocal().medal.GetByLevel(p.level);h&&p.star+1>=h.Star&&(b.Warn("难度增加"),m+=2),2<K.DataModule().GetUser().GetData().userBattleInfo.cv&&(d=K.DataModule().GetUser().GetData().userBattleInfo.cv-1),l--,K.DataModule().GetUser().GetData().nowChooseHero=r}let c=10,u=0;q.Instance().netFrame||(10<(c=2+2*K.DataModule().GetUser().GetData().userBattleInfo.winCount)&&(c=10),5<(u=+K.DataModule().GetUser().GetData().userBattleInfo.winCount+0)&&(u=5),m=ci.SnowSceneAddAILevel(m)),b.Warn("当前段位",m,c,"装备数",u);for(let h=0;h<l;h++){let e=K.DataModule().GetLocal().ai.GetByLevel(m,c),t=(0<d&&(e=K.DataModule().GetLocal().ai.GetByLevel(m+20,3),d--),e.UseHeroRange.split("-")),i=K.DataModule().GetLocal().hero.GetHeroIDsByRare(Number(t[0]),Number(t[1])),o=i[Math.floor(i.length*q.Random())],a=(o=ci.SnowSceneUseSantaSkin(o),V.useSameHeroSkinId&&(o=K.DataModule().GetUser().GetData().nowChooseHero),k.testVideo&&("Ultraman"==K.DataModule().GetUser().GetData().nowChooseHero&&(o="MonkeyKing"),"MonkeyKing"==K.DataModule().GetUser().GetData().nowChooseHero&&(o="Ultraman")),Math.floor(e.canUseWeaponLevelMin+(e.canUseWeaponLevelMax-e.canUseWeaponLevelMin)*q.Random())),n=K.DataModule().GetLocal().weapon.GetByLevel(a).ID,s=_u.getRandomNameList(),l=(q.Instance().netFrame&&(s="路人"),""),r=[];q.Instance().netFrame||(g=e.canUseGearLevelMin,f=e.canUseGearLevelMax,f=g+Math.floor(Math.random()*(f-g)),0<u&&this.GetEquitPros(Z.Head,f,r),1<u&&this.GetEquitPros(Z.Foot,f,r),2<u&&this.GetEquitPros(Z.Chest,f,r),3<u&&this.GetEquitPros(Z.Ring,f,r),4<u&&this.GetEquitPros(Z.Ring,f,r),Math.random()<.01*Number(e.UseWeaponSkinChance)&&(g=K.DataModule().GetLocal().weapon.Get(n).Type,0<(f=K.DataModule().GetLocal().weaponSkin.GetSkinByType(g)).length&&(l=f[Math.floor(f.length*Math.random())],b.Warn("激活皮肤",l))));var g=K.DataModule().GetUser().GetAllPropStrByData(o,n,l,r,1),f=e.PlayerLv.split("-"),_=Number(f[0]),I=Number(f[1]),I=_+Math.floor(q.Random()*(I-_)),_=K.DataModule().GetLocal().skill.GetPlayerLvUnlockSkill(I),I=V.RandomChinaState(),_=V.CreatInGamePlayerData("AI"+h,n,o,s,!0,!1,g,1,e.AiID,l,_,1,I);V.ingamePlayerDatas.push(_)}for(let e=0;e<V.ingamePlayerDatas.length;e++){var C=V.ingamePlayerDatas[e];C.isSelf&&(V.myInGamePlayerData=C),this.CreatPlayer(C)}this.CreatNian();let t=this.world.GetSingleCompoent($i);t&&(t.camera.orthographicVerticalSize+=2),V.nowSavePlayer=V.ingamePlayerDatas.length,this.State="Ready"}if("Ready"==this.State&&(this.time+=A.FixedTimeDelta,3<this.time&&(this.State="Battle",P.onStartBattle.Trigger())),"Battle"==this.State){if(this.creatChestCalTime-=A.FixedTimeDelta,this.creatChestCalTime<0&&(this.creatChestCalTime=this.creatChestTime,gu.Instance.CreatChest(!0)),this.nianEntity&&this.nianEntity.GetComponent(R).isDead){this.State="GameOver";let t=this.world.GetEntitys([R.id,E.id]);for(let e=0;e<t.length;e++)t[e].GetComponent(E).netId==V.myInGamePlayerData.netId?(t[e].GetComponent(F).t1=0,K.UIModule().HideUI(Bf.UIName)):t[e].HasComponent(D.id)&&(t[e].GetComponent(D).banHud=!0)}0!=V.exitTime&&(V.exitTime>V.exitMaxTime&&((p=K.UIModule().GetNowTopUIName())==Uf.UIName||p==Bf.UIName)?(p==Bf.UIName&&K.UIModule().HideUI(Bf.UIName),eG.ResetGame()):V.exitTime=0)}if("GameOver"==this.State&&!this.isMyOver&&this.nianEntity.IsDestory()&&(this.myOverDealTime-=A.FixedTimeDelta,this.myOverDealTime<0)){let t=this.world.GetEntitys([R.id,E.id]);for(let e=0;e<t.length;e++)t[e].GetComponent(F).ChangeState(Ac.StateName),t[e].GetComponent(F).banStateChange=!0,t[e].GetComponent(M).rotation.y=-135;b.Warn("游戏胜利"),this.isMyOver=!0,P.onBattleWin.Trigger()}k.IsGM&&V.overGame&&(V.overGame=!1,this.nianEntity.Destory(),V.myInGamePlayerData.rank=1,this.State="GameOver")}GetEquitPros(e,t,i){let o=e+"_"+t+"_"+(Math.floor(5*Math.random())+1)+"_1",a=K.DataModule().GetUser().GetUserItemData(o);if(""!=a.data){var n=a.data.split(",");for(let e=0;e<n.length;e++)i.push(n[e])}}LateUpdate(){}Destroy(){P.onRevive.Remove(this,this.Revive),K.UIModule().HideUI(Uf.UIName)}OnAddComponent(e,t){}OnRemoveComponent(e,t){}ReviveMyPlayer(){this.isMyOver=!1,V.nowSavePlayer++,V.myInGamePlayerData.rank=-1;let i=this.world.GetEntitys([R.id]);for(let t=0;t<i.length;t++)if(i[t].GetComponent(E).netId==V.myInGamePlayerData.netId){i[t].GetComponent(F).banStateChange=!1,i[t].GetComponent(F).ChangeState(Mf.StateName),i[t].GetComponent(R).hp=i[t].GetComponent(R).maxHp,i[t].GetComponent(R).fogHitedTimes=0,i[t].GetComponent(R).isDead=!1,i[t].GetComponent(D).banHud=!1,i[t].GetComponent(v).enable=!0;let e=O.CreatPrefabEntityUsePos(N.Effect_HealEffect,i[t].GetComponent(M).pos);e.GetComponent(Mt).followTargetId=i[t].id,e.AddComponent(kt),e.GetComponent(kt).keepTime=1,ri.AddBuffToTarget(i[t],_i.BuffName,!0,5),ci.ThorPower(i[t])}}CreatPlayer(e){let t=gu.Instance.GetRandomBornPoint(),i=e.isAI,o=(""!=k.testSkill&&(i=!1),Jc.CreatHero(new Laya.Vector3(t.x,0,t.z),e.heroId,e.weaponId,i,e.aiId,e.props,e.weaponSkinId,e.level));return i&&V.IsGameMode_Nian()&&(o.GetComponent(Et).thinkState=Wc.StateName,o.GetComponent(Et).triggerAttRange=4,Math.random()<.3&&(o.GetComponent(Et).likeGetItem=!0)),e.isSelf?(o.AddComponent(_t),o.AddComponent(Nt),this.world.GetSingleCompoent($i).followTargetId=o.id,o.GetComponent(D).useUICtrl=D.My):o.GetComponent(D).useUICtrl=D.Friend,o.GetComponent(D).playerName=e.name,o.GetComponent(D).chinaState=e.chinaState,o.AddComponent(E).netId=e.netId,o.RemoveComponent(Ft),o}CreatNian(){let t=0,i=this.world.GetEntitys([R.id]);for(let e=0;e<i.length;e++)t+=i[e].GetComponent(R).maxHp;t*=K.DataModule().GetLocal().event.Get("2021YearMonster_Boss").F3;var e=V.CreatInGamePlayerData("Nian","","","年兽",!0,!1,"",1,"Ai50","",[],1,"");V.ingamePlayerDatas.push(e);let o=Jc.CreatEnemy(new Laya.Vector3(-100,0,100),t);o.GetComponent(D).playerName=e.name,o.GetComponent(D).useUICtrl=D.Enemy,o.AddComponent(E).team=1,o.GetComponent(E).netId="Nian",this.nianEntity=o}}):V.IsGameMode_Deathmatch()?this.systemMgr.AddSystem(new class extends lt{constructor(){super(...arguments),this.systemName="DeathmatchGameRuleSystem",this.soundList=[],this.time=0,this.grounp=new dt([R.id]),this.frist=!1,this.State="",this.isMyOver=!1,this.myOverDealTime=3,this.creatChestTime=0,this.creatChestCalTime=0}Init(){V.CalState(),P.onRevive.Register(this,this.Revive),V.exitTime=0,V.inGameTimes=150,console.log("死斗复活Init")}Revive(){console.log("死斗复活"),this.ReviveMyPlayer()}Update(){}FixedUpdate(){if(!this.frist){O.CreatPrefabEntity(N.CameraRoot),O.CreatPrefabEntity(N.Fog).GetComponent(Ap).nowRange=30,V.fogRange=30,V.banFogMove=!0,V.ingamePlayerDatas=[],this.frist=!0;let m=10,d=(K.UIModule().ShowUI(Uf.UIName),K.AudioModule().PlayMusic(x.GetBGM("BGM1")),0),c=0;if(q.Instance().netFrame){let t=K.MGOBEModule().GetRoomInfo();for(let e=0;e<t.playerList.length;e++){var i=t.playerList[e].customProfile.split("|"),o=i[0],a=i[1],n=i[2],s=i[3],i=Number(i[4]),a=V.CreatInGamePlayerData(t.playerList[e].id,a,o,n,!1,K.MGOBEModule().IsSelf(t.playerList[e].id),s,i,"","",[],1,"");V.ingamePlayerDatas.push(a),d+=i,m--}d=Math.floor(d/t.playerList.length)}else{var g=K.DataModule().GetUser().GetData().nowChooseHero;K.DataModule().GetUser().GetData().nowChooseHero=ci.SnowSceneUseSantaSkin(g),""!=V.tryHeroSkinId&&(K.DataModule().GetUser().GetData().nowChooseHero=V.tryHeroSkinId);let e=K.DataModule().GetUser().GetData().nowChooseHero,t=K.DataModule().GetUser().GetEquitWeapon(),i=K.DataModule().GetLz().GetText("You"),o=K.DataModule().GetUser().GetItemByID(t),a="",n=(o&&(a=o.data),""!=V.tryWeaponSkinId&&(a=V.tryWeaponSkinId),1),s=K.DataModule().GetUser().GetHeroItemData(e),l=(s&&(n=s.level),K.DataModule().GetLocal().skill.GetPlayerLvUnlockSkill(K.DataModule().GetUser().GetData().userLevel.level)),r=V.GetChinaState(K.PlatformModule().chinaState),h=V.CreatInGamePlayerData("Local",t,e,i,!1,!0,K.DataModule().GetUser().GetAllPropsStrs(t),K.DataModule().GetUser().GetData().userMedal.level,"",a,l,n,r);h.startSkills=V.startGetSkill,V.ingamePlayerDatas.push(h),d=h.level;var f=K.DataModule().GetUser().GetData().userMedal,_=K.DataModule().GetLocal().medal.GetByLevel(f.level);_&&f.star+1>=_.Star&&(b.Warn("难度增加"),d+=2),2<K.DataModule().GetUser().GetData().userBattleInfo.cv&&(c=K.DataModule().GetUser().GetData().userBattleInfo.cv-1),m--,K.DataModule().GetUser().GetData().nowChooseHero=g}let u=10,p=0;q.Instance().netFrame||(10<(u=2+2*K.DataModule().GetUser().GetData().userBattleInfo.winCount)&&(u=10),5<(p=+K.DataModule().GetUser().GetData().userBattleInfo.winCount+0)&&(p=5),d=ci.SnowSceneAddAILevel(d)),b.Warn("当前段位",d,u,"装备数",p);for(let h=0;h<m;h++){let e=K.DataModule().GetLocal().ai.GetByLevel(d,u),t=(0<c&&(e=K.DataModule().GetLocal().ai.GetByLevel(d+20,3),c--),e.UseHeroRange.split("-")),i=K.DataModule().GetLocal().hero.GetHeroIDsByRare(Number(t[0]),Number(t[1])),o=i[Math.floor(i.length*q.Random())],a=(o=ci.SnowSceneUseSantaSkin(o),V.useSameHeroSkinId&&(o=K.DataModule().GetUser().GetData().nowChooseHero),k.testVideo&&("Ultraman"==K.DataModule().GetUser().GetData().nowChooseHero&&(o="MonkeyKing"),"MonkeyKing"==K.DataModule().GetUser().GetData().nowChooseHero&&(o="Ultraman")),Math.floor(e.canUseWeaponLevelMin+(e.canUseWeaponLevelMax-e.canUseWeaponLevelMin)*q.Random())),n=K.DataModule().GetLocal().weapon.GetByLevel(a).ID,s=_u.getRandomNameList(),l=(q.Instance().netFrame&&(s="路人"),""),r=[];q.Instance().netFrame||(I=e.canUseGearLevelMin,C=e.canUseGearLevelMax,C=I+Math.floor(Math.random()*(C-I)),0<p&&this.GetEquitPros(Z.Head,C,r),1<p&&this.GetEquitPros(Z.Foot,C,r),2<p&&this.GetEquitPros(Z.Chest,C,r),3<p&&this.GetEquitPros(Z.Ring,C,r),4<p&&this.GetEquitPros(Z.Ring,C,r),Math.random()<.01*Number(e.UseWeaponSkinChance)&&(I=K.DataModule().GetLocal().weapon.Get(n).Type,0<(C=K.DataModule().GetLocal().weaponSkin.GetSkinByType(I)).length&&(l=C[Math.floor(C.length*Math.random())],b.Warn("激活皮肤",l))));var I=K.DataModule().GetUser().GetAllPropStrByData(o,n,l,r,1),C=e.PlayerLv.split("-"),G=Number(C[0]),S=Number(C[1]),S=(Math.floor(q.Random()*(S-G)),K.DataModule().GetLocal().skill.GetAIUnlockSkill()),G=V.RandomChinaState(),S=V.CreatInGamePlayerData("AI"+h,n,o,s,!0,!1,I,1,e.AiID,l,S,1,G);V.ingamePlayerDatas.push(S)}for(let e=0;e<V.ingamePlayerDatas.length;e++){var t=V.ingamePlayerDatas[e];t.isSelf&&(V.myInGamePlayerData=t),this.CreatPlayer(t)}let e=this.world.GetSingleCompoent($i);e&&(e.camera.orthographicVerticalSize+=2),V.nowSavePlayer=V.ingamePlayerDatas.length,this.State="Ready"}if("Ready"==this.State&&(this.time+=A.FixedTimeDelta,3<this.time&&(this.State="Battle",P.onStartBattle.Trigger())),"Battle"==this.State){if(W.luandouReviveTimeStop||(V.inGameTimes-=A.FixedTimeDelta),V.inGameTimes<=0){this.State="GameOver";let t=this.world.GetEntitys([R.id,E.id]);for(let e=0;e<t.length;e++)t[e].GetComponent(E).netId==V.myInGamePlayerData.netId?(t[e].GetComponent(F).t1=0,K.UIModule().HideUI(Bf.UIName)):t[e].HasComponent(D.id)&&(t[e].GetComponent(D).banHud=!0)}0!=V.exitTime&&(V.exitTime>V.exitMaxTime&&((f=K.UIModule().GetNowTopUIName())==Uf.UIName||f==Bf.UIName)?(f==Bf.UIName&&K.UIModule().HideUI(Bf.UIName),eG.ResetGame()):V.exitTime=0)}if("GameOver"==this.State&&!this.isMyOver&&(this.myOverDealTime-=A.FixedTimeDelta,this.myOverDealTime<0)){let t=this.world.GetEntitys([R.id,E.id]);for(let e=0;e<t.length;e++)t[e].GetComponent(F).ChangeState(Ac.StateName),t[e].GetComponent(F).banStateChange=!0,t[e].GetComponent(M).rotation.y=-135;b.Warn("游戏胜利"),this.isMyOver=!0,P.onBattleWin.Trigger()}k.IsGM&&V.overGame&&(V.overGame=!1,V.myInGamePlayerData.rank=1,this.State="GameOver")}GetEquitPros(e,t,i){let o=e+"_"+t+"_"+(Math.floor(5*Math.random())+1)+"_1",a=K.DataModule().GetUser().GetUserItemData(o);if(""!=a.data){var n=a.data.split(",");for(let e=0;e<n.length;e++)i.push(n[e])}}LateUpdate(){}Destroy(){P.onRevive.Remove(this,this.Revive),K.UIModule().HideUI(Uf.UIName)}OnAddComponent(e,t){}OnRemoveComponent(e,t){}ReviveMyPlayer(){this.isMyOver=!1,V.nowSavePlayer++,V.myInGamePlayerData.rank=-1;let i=gu.Instance.DeathmatchGetRandomBornPoint(),o=this.world.GetEntitys([R.id]);for(let t=0;t<o.length;t++)if(o[t].GetComponent(E).netId==V.myInGamePlayerData.netId){o[t].GetComponent(F).banStateChange=!1,o[t].GetComponent(F).ChangeState(Mf.StateName),o[t].GetComponent(R).hp=o[t].GetComponent(R).maxHp,o[t].GetComponent(R).fogHitedTimes=0,o[t].GetComponent(R).isDead=!1,o[t].GetComponent(D).banHud=!1,o[t].GetComponent(v).enable=!0,o[t].GetComponent(M).pos=i;let e=O.CreatPrefabEntityUsePos(N.Effect_HealEffect,o[t].GetComponent(M).pos);e.GetComponent(Mt).followTargetId=o[t].id,e.AddComponent(kt),e.GetComponent(kt).keepTime=1,ri.AddBuffToTarget(o[t],_i.BuffName,!0,5),ci.ThorPower(o[t])}}CreatPlayer(a){let e=gu.Instance.DeathmatchGetRandomBornPoint(),t=a.isAI,i=(""!=k.testSkill&&(t=!1),V.myInGamePlayerData.level),n=Jc.CreatHero(new Laya.Vector3(e.x,0,e.z),a.heroId,a.weaponId,t,a.aiId,a.props,a.weaponSkinId,i);for(let o=0;o<a.startSkills.length;o++){let e=a.startSkills[o].split("_"),t=e[0],i=1;1<e.length&&(i=Number(e[1]));var s=K.DataModule().GetLocal().skill.Get(t);if(null!=s){if(""!=s.SkillFun)for(let e=0;e<i;e++)H.AddSkill(n,s.SkillFun,s.SkillID,1,1,s.SkillMaxLevel);if(""!=s.BuffFun)for(let e=0;e<i;e++)ri.AddBuffToTarget(n,s.BuffFun,s.IsOnlyBuff,.001*s.keepTime,s.F1,s.F2,s.F3,s.F4)}}return a.isSelf?(n.AddComponent(_t),n.AddComponent(Nt),this.world.GetSingleCompoent($i).followTargetId=n.id,n.GetComponent(D).useUICtrl=D.My):n.GetComponent(D).useUICtrl=D.Enemy,n.GetComponent(D).playerName=a.name,n.GetComponent(D).chinaState=a.chinaState,n.AddComponent(E).netId=a.netId,n.RemoveComponent(Ft),n}}):V.IsGameMode_Zombie()?(this.systemMgr.AddSystem(new class extends lt{constructor(){super(...arguments),this.systemName="ZombieModeGameRuleSystem",this.zombieFactoryGrounp=new dt([pu.id]),this.unitGrounp=new dt([R.id]),this.soundList=[],this.time=0,this.frist=!1,this.State="",this.isMyOver=!1,this.SceneZombieFactoryRefreTime=40,this.ZombieKing=null,this.targetEnvironmentLight=new Laya.Vector3(1,1,1)}Init(){V.CalState(),P.onRevive.Register(this,this.Revive),V.exitTime=0,V.CurrentDay=1,V.radiationLevel=1,V.ScenesTatus=np.Daytime,V.ScenesTatusCountdown=V.zombieMode_DayTime,V.zombieMode_ZombieBirthRemainCount=0,V.zombieMode_TodayZombieBirthCount=0,V.zombieMode_TonightZombieBirthCount=0,V.zombieMode_nowRemainBirthCD=0,V.triggerCarId=-1,V.triggerDoorId=-1,V.triggerTentId=-1,V.nowSceneZombieFactoryNum=0,V.nowSceneZombieNum=0,this.UpdateZombieSchedule(),this.isMyOver=!1,console.warn("丧尸模式init")}Revive(){b.Warn("复活"),this.ReviveMyPlayer()}Update(){this.UpdateEnvironmentLight(A.TimeDelta)}UpgradeZombieFactory(l){let r=this.world.GetEntitys([pu.id]),h=K.DataModule().GetLocal().gameRule;for(let s=0;s<r.length;s++){let e=r[s],t=e.GetComponent(pu),i=(t.level+=l,t.level>=h.ZombieMode_ZombieFactory_HighLevel()),o=e.GetComponent(B).sp.getChildByName("Node"),a=(o.getChildByName("Level_1").active=!i,o.getChildByName("Level_2").active=i,e.GetComponent(y)),n=l*h.ZombieMode_ZombieFactory_AddHpPreLevel();a.hp+=n,a.maxhp+=n}}UpdateEnvironmentLight(e){let t=K.ResModule().Get3DRes(q.EcsGameMgr.nowGame.scenePath).getChildByName("Directional Light");.01<Laya.Vector3.distance(t.color,this.targetEnvironmentLight)&&(e=+e,t.color=new Laya.Vector3(S.Lerp(t.color.x,this.targetEnvironmentLight.x,e),S.Lerp(t.color.y,this.targetEnvironmentLight.y,e),S.Lerp(t.color.z,this.targetEnvironmentLight.z,e)))}resetTentShop(){let i=this.world.GetEntitys([Ct.id]);console.warn("每天刷新帐篷商店内容");for(let t=0;t<i.length;t++){let e=i[t].GetComponent(Ct);e.weaponLevelList=[],e.questList=[],e.hasGetQuest=!1}V.ResetLoadTentShopUI()}UpdateZombieSchedule(){function e(t){let i=[];for(let e=0;e<t.length;e++){var o=t[e].split("*"),a=o[0],n=parseInt(o[1]);for(let e=0;e<n;e++)switch(a){case"Elite":case"Boss":var s=l.GetRandomZombie(V.CurrentDay,Math.random(),[a]);s&&i.push(s.ID);break;default:i.push(a)}}return i}let t=K.DataModule().GetLocal().zombieSchedule.GetByKey(V.CurrentDay),l=K.DataModule().GetLocal().zombie;t&&(V.zombieMode_TodaySpecZombieCreateList=e(t.DayZombieCreate),V.zombieMode_TonightSpecZombieCreateList=e(t.NightZombieCreate)),console.warn(V.zombieMode_TodaySpecZombieCreateList,V.zombieMode_TonightSpecZombieCreateList)}FixedUpdate(){let e=K.DataModule().GetLocal().gameRule;if(!this.isMyOver){V.ScenesTatusCountdown-=A.FixedTimeDelta,this.SceneZombieFactoryRefreTime-=A.FixedTimeDelta;if(V.ScenesTatusCountdown<10&&10<=V.ScenesTatusCountdown+A.FixedTimeDelta&&V.ScenesTatus===np.Daytime&&(0==V.CurrentDay%3?(this.targetEnvironmentLight.setValue(.6,0,0),P.onBloodyNightTips.Trigger()):this.targetEnvironmentLight.setValue(.3,.3,.3)),V.ScenesTatusCountdown<=0){V.ScenesTatus==np.Daytime?(0==V.CurrentDay%3?(console.warn("现在是血夜"),V.ScenesTatus=np.BloodyNight,V.ScenesTatusCountdown=V.zombieMode_NightTime,r=e.ZombieMode_AddRadiationLevel_BloodNight(),V.radiationLevel+=r,P.onRadiationLevelUp.Trigger(),this.UpgradeZombieFactory(r),P.onBloodyNight.Trigger()):(P.onNight.Trigger(),console.warn("现在是黑夜"),V.ScenesTatus=np.Night,V.ScenesTatusCountdown=V.zombieMode_NightTime,r=e.ZombieMode_AddRadiationLevel_Night(),this.UpgradeZombieFactory(r),V.radiationLevel+=r,P.onRadiationLevelUp.Trigger()),V.zombieMode_nowRemainBirthCD=0):(console.warn("过了一天,现在是白天"),this.targetEnvironmentLight.setValue(1,1,1),V.ScenesTatus=np.Daytime,V.ScenesTatusCountdown=V.zombieMode_DayTime,V.CurrentDay+=1,V.zombieMode_TodayZombieBirthCount=V.nowSceneZombieNum,V.zombieMode_nowRemainBirthCD=0,V.zombieMode_TonightZombieBirthCount=0,this.UpdateZombieSchedule(),0==V.CurrentDay%3&&(console.warn("现在是血夜天,预警"),P.onChangeBloodyNight.Trigger()),P.onAddDay.Trigger(),this.resetTentShop()),console.warn("开始变天了！",V.ScenesTatusCountdown);var t=q.NowGameWorld.GetEntitys([ut.id]);for(let e=0;e<t.length;e++)Tf.UpdateZombieSceneStatusEnhanceBuff(t[e])}this.SceneZombieFactoryRefreTime<=0&&(this.SceneZombieFactoryRefreTime=e.ZombieMode_ZombieFactory_CreateCD(),V.nowSceneZombieFactoryNum<e.ZombieMode_ZombieFactory_MaxCount()?(console.warn("生成丧尸工厂"),gu.Instance.CreatZombieFactory()):(r=e.ZombieMode_AddRadiationLevel_ZombieFactoryOverflow(),V.radiationLevel+=r,console.log("尸巢数量已达最大上限,辐射等级+"+r," 目前辐射等级:"+V.radiationLevel),P.onRadiationLevelUp.Trigger()))}if(V.FeiJi(),!this.frist){O.CreatPrefabEntity(N.CameraRoot),V.ingamePlayerDatas=[],this.frist=!0;let l=1,m=(K.UIModule().ShowUI(Uf.UIName),K.AudioModule().PlayMusic(x.GetBGM("BGM1")),0),d=0;if(q.Instance().netFrame){let t=K.MGOBEModule().GetRoomInfo();for(let e=0;e<t.playerList.length;e++){var i=t.playerList[e].customProfile.split("|"),o=i[0],a=i[1],n=i[2],s=i[3],i=Number(i[4]),a=V.CreatInGamePlayerData(t.playerList[e].id,a,o,n,!1,K.MGOBEModule().IsSelf(t.playerList[e].id),s,i,"","",[],1,"");V.ingamePlayerDatas.push(a),m+=i,l--}m=Math.floor(m/t.playerList.length)}else{var r=K.DataModule().GetUser().GetData().nowChooseHero;K.DataModule().GetUser().GetData().nowChooseHero=ci.SnowSceneUseSantaSkin(r),""!=V.tryHeroSkinId&&(K.DataModule().GetUser().GetData().nowChooseHero=V.tryHeroSkinId);let e=K.DataModule().GetUser().GetData().nowChooseHero,t=K.DataModule().GetUser().GetEquitWeapon(),i=K.DataModule().GetLz().GetText("You"),o=(t="Weapon1",""!=V.tryWeaponId&&(t=V.tryWeaponId),K.DataModule().GetUser().GetItemByID(t)),a="",n=(o&&(a=o.data),""!=V.tryWeaponSkinId&&(a=V.tryWeaponSkinId),1),s=K.DataModule().GetUser().GetHeroItemData(e);s&&(n=s.level);var h=K.DataModule().GetLocal().skill.GetPlayerLvUnlockSkill(K.DataModule().GetUser().GetData().userLevel.level),p=V.GetChinaState(K.PlatformModule().chinaState),h=V.CreatInGamePlayerData("Local",t,e,i,!1,!0,K.DataModule().GetUser().GetAllPropsStrs(t),K.DataModule().GetUser().GetData().userMedal.level,"",a,h,n,p),p=(V.ingamePlayerDatas.push(h),m=h.level,K.DataModule().GetUser().GetData().userMedal),h=K.DataModule().GetLocal().medal.GetByLevel(p.level);h&&p.star+1>=h.Star&&(b.Warn("难度增加"),m+=2),2<K.DataModule().GetUser().GetData().userBattleInfo.cv&&(d=K.DataModule().GetUser().GetData().userBattleInfo.cv-1),l--,K.DataModule().GetUser().GetData().nowChooseHero=r}let c=10,u=0;q.Instance().netFrame||(10<(c=2+2*K.DataModule().GetUser().GetData().userBattleInfo.winCount)&&(c=10),5<(u=+K.DataModule().GetUser().GetData().userBattleInfo.winCount+0)&&(u=5),m=ci.SnowSceneAddAILevel(m)),b.Warn("当前段位",m,c,"装备数",u,l);for(let h=0;h<l;h++){let e=K.DataModule().GetLocal().ai.GetByLevel(m,c),t=(0<d&&(e=K.DataModule().GetLocal().ai.GetByLevel(m+20,3),d--),e.UseHeroRange.split("-")),i=K.DataModule().GetLocal().hero.GetHeroIDsByRare(Number(t[0]),Number(t[1])),o=i[Math.floor(i.length*q.Random())],a=(o=ci.SnowSceneUseSantaSkin(o),V.useSameHeroSkinId&&(o=K.DataModule().GetUser().GetData().nowChooseHero),k.testVideo&&("Ultraman"==K.DataModule().GetUser().GetData().nowChooseHero&&(o="MonkeyKing"),"MonkeyKing"==K.DataModule().GetUser().GetData().nowChooseHero&&(o="Ultraman")),Math.floor(e.canUseWeaponLevelMin+(e.canUseWeaponLevelMax-e.canUseWeaponLevelMin)*q.Random())),n=K.DataModule().GetLocal().weapon.GetByLevel(a).ID,s=_u.getRandomNameList(),l=(q.Instance().netFrame&&(s="路人"),""),r=[];q.Instance().netFrame||(g=e.canUseGearLevelMin,f=e.canUseGearLevelMax,f=g+Math.floor(Math.random()*(f-g)),0<u&&this.GetEquitPros(Z.Head,f,r),1<u&&this.GetEquitPros(Z.Foot,f,r),2<u&&this.GetEquitPros(Z.Chest,f,r),3<u&&this.GetEquitPros(Z.Ring,f,r),4<u&&this.GetEquitPros(Z.Ring,f,r),Math.random()<.01*Number(e.UseWeaponSkinChance)&&(g=K.DataModule().GetLocal().weapon.Get(n).Type,0<(f=K.DataModule().GetLocal().weaponSkin.GetSkinByType(g)).length&&(l=f[Math.floor(f.length*Math.random())],b.Warn("激活皮肤",l))));var g=K.DataModule().GetUser().GetAllPropStrByData(o,n,l,r,1),f=e.PlayerLv.split("-"),_=Number(f[0]),I=Number(f[1]),I=_+Math.floor(q.Random()*(I-_)),_=K.DataModule().GetLocal().skill.GetPlayerLvUnlockSkill(I),I=V.RandomChinaState(),_=V.CreatInGamePlayerData("AI"+h,n,o,s,!0,!1,g,1,e.AiID,l,_,1,I);console.warn("测试限制ai人数"),V.ingamePlayerDatas.push(_)}for(let e=0;e<V.ingamePlayerDatas.length;e++){var C=V.ingamePlayerDatas[e];this.CreatPlayer(C).GetComponent(L).unlockPosTimes=1,C.isSelf&&(V.myInGamePlayerData=C,P.onTriggerUnlockSkill.Trigger())}V.nowSavePlayer=V.ingamePlayerDatas.length,console.warn("当前人数1:",V.nowSavePlayer),this.State="Ready"}"Ready"==this.State&&(this.time+=A.FixedTimeDelta,3<this.time&&(this.State="Battle",P.onStartBattle.Trigger())),"Battle"==this.State&&(V.nowSavePlayer<=0&&(this.State="GameOver",this.time=0),this.ZombieKing&&this.ZombieKing.GetComponent(R).isDead&&(console.warn("僵尸王死去!!!!!!!!!!!!!!!!!!!"),this.ZombieKing.IsDestory())),"GameOver"==this.State&&(this.time+=A.FixedTimeDelta,2<this.time&&(this.isMyOver||(this.isMyOver=!0,P.onBattleFail.Trigger()))),k.IsGM&&V.overGame&&(V.overGame=!1,V.myInGamePlayerData.rank=1,this.State="GameOver")}GetEquitPros(e,t,i){let o=e+"_"+t+"_"+(Math.floor(5*Math.random())+1)+"_1",a=K.DataModule().GetUser().GetUserItemData(o);if(""!=a.data){var n=a.data.split(",");for(let e=0;e<n.length;e++)i.push(n[e])}}CreatZombieKing(){let t=0,i=this.world.GetEntitys([R.id]);for(let e=0;e<i.length;e++)t+=i[e].GetComponent(R).maxHp;t*=K.DataModule().GetLocal().event.Get("2021YearMonster_Boss").F3;var e=V.CreatInGamePlayerData("Nian","","","丧尸年兽",!0,!1,"",1,"Ai50","",[],1,"");V.ingamePlayerDatas.push(e);let o=Jc.CreatZombieKing(new Laya.Vector3(-100,0,100),t);o.GetComponent(D).playerName=e.name,o.GetComponent(D).useUICtrl=D.Enemy,o.AddComponent(E).team=1,o.GetComponent(E).netId="ZombieKing",this.ZombieKing=o}LateUpdate(){}Destroy(){P.onRevive.Remove(this,this.Revive),K.UIModule().HideUI(Uf.UIName)}OnAddComponent(e,t){}OnRemoveComponent(e,t){}ReviveMyPlayer(){this.isMyOver=!1,this.State="Battle",V.nowSavePlayer++,V.myInGamePlayerData.rank=-1;let l=this.world.GetEntitys([R.id]);for(let s=0;s<l.length;s++)if(l[s].GetComponent(E).netId==V.myInGamePlayerData.netId){l[s].GetComponent(F).banStateChange=!1,l[s].GetComponent(F).ChangeState(Mf.StateName),l[s].GetComponent(R).hp=l[s].GetComponent(R).maxHp,l[s].GetComponent(R).fogHitedTimes=0,l[s].GetComponent(R).isDead=!1,l[s].GetComponent(R).triggerAtt=!1,l[s].GetComponent(v).enable=!0;let e=O.CreatPrefabEntityUsePos(N.Effect_HealEffect,l[s].GetComponent(M).pos),t=(e.GetComponent(Mt).followTargetId=l[s].id,e.AddComponent(kt),e.GetComponent(kt).keepTime=1,ri.AddBuffToTarget(l[s],_i.BuffName,!0,5),ci.ThorPower(l[s]),l[s].GetComponent(U).nowBulletCount=l[s].GetComponent(U).bulletCount,l[s].GetComponent(U).bulletLoadTime=0,l[s].GetComponent(U).singleShotLoadingTime=0,l[s].GetComponent(L).skillList);for(let e=0;e<t.length;e++)t[e].cdTime=0;var r=K.DataModule().GetLocal().item.GetZombieItemDatas(),h=3-t.length;for(let e=0;e<h;e++){var m=r[Math.floor(Math.random()*r.length)];V.AddItem(l[s],m.ItemID)}let a=new iC,i=K.DataModule().GetLocal().item.Get("Turret"),o=l[s].GetComponent(L).zombieInGameItemDatas.filter(e=>e.ItemID==i.ItemID),n=1;0<o.length&&(n=o[0].NowLevel),a.skillName=i.SkillFun,a.skillID=i.ItemID,a.level=n,a.star=1,a.maxLevel=i.MaxLv,H.GetItemData(a,.001,1,1,.001,1,1);var d=l[s].GetComponent(M);for(let o=0;o<2;o++){let e=O.CreatPrefabEntity(N.Item_Turret),t=(0==o&&e.GetComponent(M).SetPos1(d.pos.x+2,d.pos.y,d.pos.z-2),1==o&&e.GetComponent(M).SetPos1(d.pos.x-2,d.pos.y,d.pos.z+2),l[s].GetComponent(E)),i=new E;i.netId=t.netId,i.team=t.team,e.AddComponentAdv(E,i),e.GetComponent(y).createId=l[s].id,e.GetComponent(Iu).attCD=a.f4,e.GetComponent(Iu).amg=a.f5,e.GetComponent(Iu).t1=a.f4,e.GetComponent(kt).keepTime=a.f1,e.GetComponent(y).hp=a.f6,e.GetComponent(y).maxhp=a.f6,"Local"==i.netId?e.GetComponent(D).useUICtrl=D.MyTurret:e.GetComponent(D).useUICtrl=D.EnemyTurret}}}CreatPlayer(a){let e=gu.Instance.GetRandomBornPoint(),t=a.isAI,n=(""!=k.testSkill&&(t=!1),Jc.CreatHero(new Laya.Vector3(e.x,0,e.z),a.heroId,a.weaponId,t,a.aiId,a.props,a.weaponSkinId,a.level));a.isSelf?(n.AddComponent(_t),n.AddComponent(Nt),this.world.GetSingleCompoent($i).followTargetId=n.id,n.GetComponent(D).useUICtrl=D.My,V.showInGameGuide&&(n.GetComponent(R).willRandomSkill=["Spin_1","Dash_1","IceBall_1","Trample_1","AroundBalls_1"]),setTimeout(()=>{sp.AddQuest(n,sp.GetQuest("OpenChest")),sp.AddQuest(n,sp.GetQuest("GoToBunker"))},5e3)):n.GetComponent(D).useUICtrl=D.My;for(let o=0;o<a.startSkills.length;o++){let e=a.startSkills[o].split("_"),t=e[0],i=1;1<e.length&&(i=Number(e[1]));var s=K.DataModule().GetLocal().item.Get(t);if(null!=s&&""!=s.SkillFun)for(let e=0;e<i;e++)H.AddItem(n,s.SkillFun,s.ItemID,1,1,s.MaxLv,s.Times)}return n.GetComponent(D).playerName=a.name,n.GetComponent(D).chinaState=a.chinaState,n.AddComponent(E).netId=a.netId,n}}),this.systemMgr.AddSystem(new class extends lt{constructor(){super(...arguments),this.systemName="CarSystem",this.vecCache=new Laya.Vector3(0,0,0),this.grounp=new dt([pi.id])}Init(){}Update(){}FixedUpdate(){var n=this.world.GetEntitysByMatcher(this.grounp);for(let a=0;a<n.length;a++){let e=n[a],t=e.GetComponent(pi),i=!t.isDamage&&0<t.carRuntime,o=e.GetComponent(xt);"Car_Idle"!=o.nowClipName&&"Car_Run"!=o.nowClipName||(o.useClipName=i?"Car_Run":"Car_Idle"),e.GetComponent(M);var s=V.GetLocalPlayer();if(i&&s&&(t.driverId==s.id||-1!=t.passengerIdList.indexOf(s.id))?t.engineAudioChannel||(t.engineAudioChannel=K.AudioModule().PlayLoop(x.GetSound2("Zombie_CarEngine"))):t.engineAudioChannel&&(t.engineAudioChannel.stop(),t.engineAudioChannel=null),t.isDamage)-1==t.carSmokeEffect&&(s=e.GetComponent(B).sp.getChildByName("Smoke").transform.position,s=O.CreatPrefabEntityUsePos(N.Effect_CarSmoke,s),t.carSmokeEffect=s.id,console.warn("车坏了，创建烟雾"));else if(-1!=t.carSmokeEffect){let e=this.world.GetEntityByID(t.carSmokeEffect);e&&e.Destory(),console.warn("车好了，消灭烟雾"),t.carSmokeEffect=-1}0<t.carRuntime&&!t.isDamage?t.onLight||(e.GetComponent(B).sp.getChildByName("Light1").active=!0,e.GetComponent(B).sp.getChildByName("Light2").active=!0,t.onLight=!0):t.onLight&&(e.GetComponent(B).sp.getChildByName("Light1").active=!1,e.GetComponent(B).sp.getChildByName("Light2").active=!1,t.onLight=!1),t.engineAudioChannel&&(t.engineAudioChannel.volume=S.MoveTowards(t.engineAudioChannel.volume,t._isMoving?1:.5,A.FixedTimeDelta)),t._isMoving=!1}}LateUpdate(){}Destroy(){}OnAddComponent(e,t){}OnRemoveComponent(e,t){}}),this.systemMgr.AddSystem(new Tf),this.systemMgr.AddSystem(new class extends lt{constructor(){super(...arguments),this.systemName="ZombieFactorySystem",this.grounp=new dt([pu.id]),this.nextPlayZombieNoiseTime=0}Init(){}Update(){}FixedUpdate(){let s=A.FixedTimeDelta,l=K.DataModule().GetLocal().gameRule,r=V.GetLocalPlayer();if(r){var h=r.GetComponent(M);if(!r.GetComponent(R).isDead){var m,d=this.world.GetEntitys([ut.id]);V.nowSceneZombieNum=d.length;let i=20,o=0,a=new Laya.Vector3;for(let t=0;t<d.length;t++){let e=d[t];e.GetComponent(ut).allowOutOfRangDestroy&&(m=e.GetComponent(M),Laya.Vector3.subtract(h.pos,m.pos,a),(m=Laya.Vector3.scalarLength(a))>V.zombieMode_ZombieInActiveRange&&(V.nowSceneZombieNum--,V.zombieMode_ZombieBirthRemainCount+=1,e.Destory()),m<V.zombieMode_ZombieNoiseRange&&e.GetComponent(F).nowState!=bf.StateName&&(o++,i=Math.min(i,m)))}var c=Date.now();if(0<o&&c>this.nextPlayZombieNoiseTime){let e,t=0;t=5<o?(e=V.GetZombieRandomGroupNoiseSound(),1500+1e3*Math.random()):(e=V.GetZombieRandomNoiseSound(),3e3+4e3*Math.random()),this.nextPlayZombieNoiseTime=c+t,K.AudioModule().OptimizePlayOnce(x.GetSound2(e),.5+.5/Math.log(Math.E+i))}if(V.zombieMode_nowRemainBirthCD-=s,V.zombieMode_nowRemainBirthCD<=0)switch(V.zombieMode_nowRemainBirthCD=V.zombieMode_ZombieSceneBirthCD,V.zombieMode_ZombieBirthRemainCount++,V.ScenesTatus){case np.Daytime:V.zombieMode_TodayZombieBirthCount++;break;case np.Night:case np.BloodyNight:V.zombieMode_TonightZombieBirthCount++}var u=this.world.GetEntitys([pu.id]);for(let i=0;i<u.length;i++){let e=u[i],t=e.GetComponent(pu);t.isUnderAttacked&&(t.isUnderAttacked=!1,t.remainUnderAttackSpeedUpTime=l.ZombieMode_ZombieFactory_UnderAtkSpeedUp_Duration(),console.log("加速生产"),e.GetComponent(xt).useClipName="ZombieFactory_Hited"),t.remainUnderAttackSpeedUpTime-=s,0<t.remainUnderAttackSpeedUpTime?t.initCreateZombieRemainCDTime-=s/l.ZombieMode_ZombieFactory_UnderAtkSpeedUp_CreateCDRatio():(t.initCreateZombieRemainCDTime-=s,e.GetComponent(xt).useClipName="ZombieFactory_Idle"),t.initCreateZombieRemainCDTime<=0&&(t.initCreateZombieRemainCDTime=l.ZombieMode_ZombieFactory_CreateZombieCDTime(t.level),t.nowRemainZombie=Math.min(t.nowRemainZombie+1,l.ZombieMode_ZombieFactory_ZombieStorageMaxCount(t.level)))}let e=l.ZombieMode_ZombieFactory_MaxCount(),t=K.UIModule().GetUI(Uf.UIName),n=u.length>=e;if(t.view&&(!t.view.m_ZombieFactoryMaxTip.visible&&n&&(t.view.m_ZombieFactoryMaxTip.m_Text.text=K.Lz("InGameTip_MaxZombieFactory",e),t.view.m_ShowZombieFactoryMaxTip.play()),t.view.m_ZombieFactoryMaxTip.visible=n),0<V.zombieMode_ZombieBirthRemainCount&&V.nowSceneZombieNum<l.ZombieMode_ZombieCreateMaxCount_MaxZombieCountInScreen(V.CurrentDay))for(let e=0;e<12;e++){var p=(V.zombieMode_ZombieActiveRange-V.zombieMode_PlayerVisualRange)*Math.random()+V.zombieMode_PlayerVisualRange,g=r.GetComponent(w),g=S.VecRotate(new Laya.Vector2(g.dir.x+.01,g.dir.z),30*(e+1)*Math.random()),p=(Laya.Vector2.normalize(g,g),Laya.Vector2.scale(g,p,g),new Laya.Vector3(g.x,0,g.y)),g=(Laya.Vector3.add(p,h.pos,p),Su.Instance.GetRandomPoint(p,V.zombieMode_ZombieBirthRandomRadius));if(g&&0!=Laya.Vector3.scalarLength(g)&&!vu.IsPosInBunkersTrigger(g)){V.zombieMode_ZombieBirthRemainCount--;let e=null;switch(V.ScenesTatus){case np.Daytime:e=V.zombieMode_TodaySpecZombieCreateList.shift();break;case np.Night:case np.BloodyNight:e=V.zombieMode_TonightSpecZombieCreateList.shift()}e=e||K.DataModule().GetLocal().zombie.GetRandomZombie(V.CurrentDay,Math.random()).ID,Tf.CreatZombie(e,g);break}}for(let t=0;t<u.length;t++){let e=u[t],n=e.GetComponent(M);if(V.IsInCameraArea(n.pos)){let a=e.GetComponent(pu);if(0<a.nowRemainZombie&&(a.initActiveZombieRemainCDTime-=s,a.initActiveZombieRemainCDTime<=0)){a.initActiveZombieRemainCDTime=l.ZombieMode_ZombieFactory_ActiveZombieCDTime(a.level),a.nowRemainZombie--;let e=Math.random(),t=!1,i=(0<a.remainUnderAttackSpeedUpTime&&(a.remainUnderAttackLevelUpTime-=s,a.remainUnderAttackLevelUpTime<=0&&Math.random()<l.ZombieMode_ZombieFactory_UnderAtkLevelUp_Probability()&&(a.remainUnderAttackLevelUpTime=l.ZombieMode_ZombieFactory_UnderAtkLevelUp_CD(),t=!0,e=1,console.log("超级生产"))),K.DataModule().GetLocal().zombie),o=i.GetRandomZombie(V.CurrentDay,e,["Normal"]).ID;if(t){let t=!1;for(let e=0;e<i.datas.length;e++){var f=i.datas[e];if(t&&f.UnlockDay){o=f.ID;break}f.ID==o&&(t=!0)}}Tf.CreatZombie(o,n.pos)}}Di.TraverseNode(e.GetComponent(B).sp,function(t){switch(t.name){case"Model":case"_danger":{let e=t.meshRenderer.material;e.albedoIntensity=S.Lerp(e.albedoIntensity,1,20*s);break}}})}}}}LateUpdate(){}Destroy(){}OnAddComponent(e,t){}OnRemoveComponent(e,t){}}),this.systemMgr.AddSystem(new vu),this.systemMgr.AddSystem(new sp)):K.DataModule().GetUser().isFistGame&&k.isOpenNewInGameGuide?this.systemMgr.AddSystem(new class extends lt{constructor(){super(...arguments),this.systemName="GuideGameRuleSystem",this.soundList=[],this.time=0,this.grounp=new dt([R.id]),this.frist=!1,this.State="",this.isMyOver=!1,this.myOverDealTime=3,this.guideTime=10}Init(){V.CalState(),P.onRevive.Register(this,this.Revive),V.exitTime=0,console.warn("引导关系统init")}Revive(){b.Warn("复活"),this.ReviveMyPlayer()}Update(){}FixedUpdate(){if(!this.frist){O.CreatPrefabEntity(N.CameraRoot),V.ingamePlayerDatas=[],this.frist=!0;let m=V.startGamePlayerCount,d=(1==V.chooseBattleSceneLevel&&(m=10,V.startGamePlayerCount=10),2==V.chooseBattleSceneLevel&&(m=15,V.startGamePlayerCount=15),3==V.chooseBattleSceneLevel&&(m=20,V.startGamePlayerCount=20),k.isOpenNewInGameGuide&&(m=1,V.startGamePlayerCount=1),K.UIModule().ShowUI(Uf.UIName),K.AudioModule().PlayMusic(x.GetBGM("BGM1")),0),c=0,u=10,p=0;if(q.Instance().netFrame){let t=K.MGOBEModule().GetRoomInfo();for(let e=0;e<t.playerList.length;e++){var i=t.playerList[e].customProfile.split("|"),o=i[0],a=i[1],n=i[2],s=i[3],i=Number(i[4]),a=V.CreatInGamePlayerData(t.playerList[e].id,a,o,n,!1,K.MGOBEModule().IsSelf(t.playerList[e].id),s,i,"","",[],1,"");V.ingamePlayerDatas.push(a),d+=i,m--}d=Math.floor(d/t.playerList.length)}else{var g=K.DataModule().GetUser().GetData().nowChooseHero;K.DataModule().GetUser().GetData().nowChooseHero=ci.SnowSceneUseSantaSkin(g),""!=V.tryHeroSkinId&&(K.DataModule().GetUser().GetData().nowChooseHero=V.tryHeroSkinId);let e=K.DataModule().GetUser().GetData().nowChooseHero,t=K.DataModule().GetUser().GetEquitWeapon(),i=K.DataModule().GetLz().GetText("You"),o=(""!=V.tryWeaponId&&(t=V.tryWeaponId),K.DataModule().GetUser().GetItemByID(t)),a="",n=(o&&(a=o.data),""!=V.tryWeaponSkinId&&(a=V.tryWeaponSkinId),1),s=K.DataModule().GetUser().GetHeroItemData(e),l=(s&&(n=s.level),K.DataModule().GetLocal().skill.GetPlayerLvUnlockSkill(K.DataModule().GetUser().GetData().userLevel.level)),r=V.GetChinaState(K.PlatformModule().chinaState),h=V.CreatInGamePlayerData("Local",t,e,i,!1,!0,K.DataModule().GetUser().GetAllPropsStrs(),K.DataModule().GetUser().GetData().userMedal.level,"",a,l,n,r);h.startSkills=V.startGetSkill,V.ingamePlayerDatas.push(h),d=h.level;var f=K.DataModule().GetUser().GetData().userMedal,_=K.DataModule().GetLocal().medal.GetByLevel(f.level);_&&f.star+1>=_.Star&&(b.Warn("难度增加"),d+=1),2<K.DataModule().GetUser().GetData().userBattleInfo.cv&&(c=K.DataModule().GetUser().GetData().userBattleInfo.cv-1),m--,K.DataModule().GetUser().GetData().nowChooseHero=g}q.Instance().netFrame||(k.Platform==T.WECHAT&&!k.IsInWebTest&&(1==CC.Instance.abTest()||3==CC.Instance.abTest())?5<=(d=6<=d?ci.SnowSceneAddAILevel(d):d)&&(10<(u=2+2*K.DataModule().GetUser().GetData().userBattleInfo.winCount)&&(u=10),5<(p=+K.DataModule().GetUser().GetData().userBattleInfo.winCount+0)&&(p=5)):(10<(u=2+2*K.DataModule().GetUser().GetData().userBattleInfo.winCount)&&(u=10),5<(p=+K.DataModule().GetUser().GetData().userBattleInfo.winCount+0)&&(p=5),d=ci.SnowSceneAddAILevel(d))),b.Warn("当前段位",d,u,"装备数",p);for(let h=0;h<m;h++){let e=K.DataModule().GetLocal().ai.GetByLevel(d,u),t=(0<c&&(e=K.DataModule().GetLocal().ai.GetByLevel(d+20,3),c--),e.UseHeroRange.split("-")),i=K.DataModule().GetLocal().hero.GetHeroIDsByRare(Number(t[0]),Number(t[1])),o=i[Math.floor(i.length*q.Random())],a=(o=ci.SnowSceneUseSantaSkin(o),V.useSameHeroSkinId&&(o=K.DataModule().GetUser().GetData().nowChooseHero),k.testVideo&&("Ultraman"==K.DataModule().GetUser().GetData().nowChooseHero&&(o="MonkeyKing"),"MonkeyKing"==K.DataModule().GetUser().GetData().nowChooseHero&&(o="Ultraman")),Math.floor(e.canUseWeaponLevelMin+(e.canUseWeaponLevelMax-e.canUseWeaponLevelMin)*q.Random())),n=K.DataModule().GetLocal().weapon.GetByLevel(a).ID,s=_u.getRandomNameList(),l=(q.Instance().netFrame&&(s="路人"),""),r=[];q.Instance().netFrame||(I=e.canUseGearLevelMin,C=e.canUseGearLevelMax,C=I+Math.floor(Math.random()*(C-I)),0<p&&this.GetEquitPros(Z.Head,C,r),1<p&&this.GetEquitPros(Z.Foot,C,r),2<p&&this.GetEquitPros(Z.Chest,C,r),3<p&&this.GetEquitPros(Z.Ring,C,r),4<p&&this.GetEquitPros(Z.Ring,C,r),Math.random()<.01*Number(e.UseWeaponSkinChance)&&(I=K.DataModule().GetLocal().weapon.Get(n).Type,0<(C=K.DataModule().GetLocal().weaponSkin.GetSkinByType(I)).length&&(l=C[Math.floor(C.length*Math.random())],b.Warn("激活皮肤",l))));var I=K.DataModule().GetUser().GetAllPropStrByData(o,n,l,r,1),C=e.PlayerLv.split("-"),G=Number(C[0]),S=Number(C[1]),S=G+Math.floor(q.Random()*(S-G)),G=K.DataModule().GetLocal().skill.GetPlayerLvUnlockSkill(S),S=V.RandomChinaState(),G=V.CreatInGamePlayerData("AI"+h,n,o,s,!0,!1,I,1,e.AiID,l,G,1,S);console.log("测试限制ai人数"),V.ingamePlayerDatas.push(G)}for(let e=0;e<V.ingamePlayerDatas.length;e++){var t,l=V.ingamePlayerDatas[e];l.isSelf&&(V.myInGamePlayerData=l,t=V.CreatInGamePlayerData(l.aiId,l.weaponId,l.heroId,l.name,!0,!1,l.props,1,l.aiId,l.weaponSkinId,[],1,l.chinaState),V.guideAIData=t),this.CreatPlayer(l)}V.nowSavePlayer=V.ingamePlayerDatas.length,this.State="Ready"}if("Ready"==this.State&&(this.time+=A.FixedTimeDelta,3<this.time&&(this.State="Battle",P.onStartBattle.Trigger())),"Battle"==this.State){if(-1!=V.guideList.indexOf(1)&&(f=gu.Instance.GetGuidePoint("GuidePoint2"),this.guideTrigger=O.CreatPrefabEntityUsePos(N.Item_GuideTrigger,f),V.guideList=V.guideList.filter(e=>1!=e),V.nowGuide=1),1==V.nowGuide&&(this.guideTime-=A.FixedTimeDelta,this.guideTime<=0&&(V.guideList.push(2),z.Instance.LeYou_Guidance(106),this.guideTime=10,this.guideTrigger&&this.guideTrigger.Destory())),-1!=V.guideList.indexOf(2)){this.guideTime=10;let e=V.guideAIData;e.aiId="Ai12",e.netId="AI12",e.name="路人王","ZH_CN"!=k.language&&(e.name="enemy"),T.IS_4399&&(e.name="Player"),e.isSelf=!1,e.weaponId="Weapon1",V.ingamePlayerDatas.push(e),this.guideAI=this.CreatGuideAI(e),V.nowSavePlayer=V.ingamePlayerDatas.length,V.guideList=V.guideList.filter(e=>2!=e),V.guideAIID=this.guideAI.id,V.nowGuide=2}if(2==V.nowGuide&&(this.guideTime-=A.FixedTimeDelta,this.guideTime<=0)){if(V.guideList.push(3),z.Instance.LeYou_Guidance(108),this.guideAI){this.guideAI.AddComponent(gi);let e=new Et;e.aiId="Ai12",this.guideAI.AddComponentAdv(Et,e)}this.guideTime=10}if(-1!=V.guideList.indexOf(3)){O.CreatPrefabEntity(N.Fog).GetComponent(Ap).nowRange=30,V.fogRange=30,V.banFogMove=!1,this.guideAI&&this.guideAI.HasComponent(R.id)&&this.guideAI.GetComponent(R).hp<=0&&(V.ingamePlayerDatas=V.ingamePlayerDatas.filter(e=>"AI12"!=e.netId)),V.nowGuide=3,gu.Instance.GuideCreateItem();let m=0,d=10,c=0,u=0;if(q.Instance().netFrame){let t=K.MGOBEModule().GetRoomInfo();for(let e=0;e<t.playerList.length;e++){var r=t.playerList[e].customProfile.split("|"),h=r[0],p=r[1],y=r[2],w=r[3],r=Number(r[4]),p=V.CreatInGamePlayerData(t.playerList[e].id,p,h,y,!1,K.MGOBEModule().IsSelf(t.playerList[e].id),w,r,"","",[],1,"");V.ingamePlayerDatas.push(p),m+=r}m=Math.floor(m/t.playerList.length)}else{_=K.DataModule().GetUser().GetData().nowChooseHero;K.DataModule().GetUser().GetData().nowChooseHero=ci.SnowSceneUseSantaSkin(_),""!=V.tryHeroSkinId&&(K.DataModule().GetUser().GetData().nowChooseHero=V.tryHeroSkinId);let e=K.DataModule().GetUser().GetData().nowChooseHero,t=K.DataModule().GetUser().GetEquitWeapon(),i=K.DataModule().GetLz().GetText("You"),o=(""!=V.tryWeaponId&&(t=V.tryWeaponId),K.DataModule().GetUser().GetItemByID(t)),a="",n=(o&&(a=o.data),""!=V.tryWeaponSkinId&&(a=V.tryWeaponSkinId),1),s=K.DataModule().GetUser().GetHeroItemData(e),l=(s&&(n=s.level),K.DataModule().GetLocal().skill.GetPlayerLvUnlockSkill(K.DataModule().GetUser().GetData().userLevel.level)),r=V.GetChinaState(K.PlatformModule().chinaState),h=V.CreatInGamePlayerData("Local",t,e,i,!1,!0,K.DataModule().GetUser().GetAllPropsStrs(),K.DataModule().GetUser().GetData().userMedal.level,"",a,l,n,r);h.startSkills=V.startGetSkill,m=h.level;var g=K.DataModule().GetUser().GetData().userMedal,f=K.DataModule().GetLocal().medal.GetByLevel(g.level);f&&g.star+1>=f.Star&&(b.Warn("难度增加"),m+=1),2<K.DataModule().GetUser().GetData().userBattleInfo.cv&&(c=K.DataModule().GetUser().GetData().userBattleInfo.cv-1),K.DataModule().GetUser().GetData().nowChooseHero=_}q.Instance().netFrame||(k.Platform==T.WECHAT&&!k.IsInWebTest&&(1==CC.Instance.abTest()||3==CC.Instance.abTest())?5<=(m=6<=m?ci.SnowSceneAddAILevel(m):m)&&(10<(d=2+2*K.DataModule().GetUser().GetData().userBattleInfo.winCount)&&(d=10),5<(u=+K.DataModule().GetUser().GetData().userBattleInfo.winCount+0)&&(u=5)):(10<(d=2+2*K.DataModule().GetUser().GetData().userBattleInfo.winCount)&&(d=10),5<(u=+K.DataModule().GetUser().GetData().userBattleInfo.winCount+0)&&(u=5),m=ci.SnowSceneAddAILevel(m)));for(let h=0;h<4;h++){let e=K.DataModule().GetLocal().ai.GetByLevel(m,d),t=(0<c&&(e=K.DataModule().GetLocal().ai.GetByLevel(m+20,3),c--),e.UseHeroRange.split("-")),i=K.DataModule().GetLocal().hero.GetHeroIDsByRare(Number(t[0]),Number(t[1])),o=i[Math.floor(i.length*q.Random())],a=(o=ci.SnowSceneUseSantaSkin(o),V.useSameHeroSkinId&&(o=K.DataModule().GetUser().GetData().nowChooseHero),k.testVideo&&("Ultraman"==K.DataModule().GetUser().GetData().nowChooseHero&&(o="MonkeyKing"),"MonkeyKing"==K.DataModule().GetUser().GetData().nowChooseHero&&(o="Ultraman")),Math.floor(e.canUseWeaponLevelMin+(e.canUseWeaponLevelMax-e.canUseWeaponLevelMin)*q.Random())),n=K.DataModule().GetLocal().weapon.GetByLevel(a).ID,s=_u.getRandomNameList(),l=(q.Instance().netFrame&&(s="路人"),""),r=[];q.Instance().netFrame||(v=e.canUseGearLevelMin,D=e.canUseGearLevelMax,D=v+Math.floor(Math.random()*(D-v)),0<u&&this.GetEquitPros(Z.Head,D,r),1<u&&this.GetEquitPros(Z.Foot,D,r),2<u&&this.GetEquitPros(Z.Chest,D,r),3<u&&this.GetEquitPros(Z.Ring,D,r),4<u&&this.GetEquitPros(Z.Ring,D,r),Math.random()<.01*Number(e.UseWeaponSkinChance)&&(v=K.DataModule().GetLocal().weapon.Get(n).Type,0<(D=K.DataModule().GetLocal().weaponSkin.GetSkinByType(v)).length&&(l=D[Math.floor(D.length*Math.random())],b.Warn("激活皮肤",l))));var v=K.DataModule().GetUser().GetAllPropStrByData(o,n,l,r,1),D=e.PlayerLv.split("-"),U=Number(D[0]),L=Number(D[1]),L=U+Math.floor(q.Random()*(L-U)),U=K.DataModule().GetLocal().skill.GetPlayerLvUnlockSkill(L),L=V.RandomChinaState(),U=V.CreatInGamePlayerData("AI"+h,n,o,s,!0,!1,v,1,e.AiID,l,U,1,L);V.ingamePlayerDatas.push(U)}for(let e=0;e<V.ingamePlayerDatas.length;e++){var B=V.ingamePlayerDatas[e];B.isSelf||this.CreatPlayer(B)}V.nowSavePlayer=V.ingamePlayerDatas.length,V.guideList=V.guideList.filter(e=>3!=e),V.guideList.push(4)}if(-1!=V.guideList.indexOf(4)){if(V.nowGuide=4,this.isMyOver||-1!=V.myInGamePlayerData.rank&&1!=V.myInGamePlayerData.rank&&(b.Warn("普通模式游戏失败"),this.isMyOver=!0,P.onBattleFail.Trigger()),V.nowSavePlayer<=1){let o=this.world.GetEntitys([R.id]);for(let i=0;i<o.length;i++){let e=o[i].GetComponent(E).netId,t=V.GetInGamePlayerData(e);null!=t&&(-1==t.rank&&(t.rank=V.nowSavePlayer),1==t.rank&&(o[i].GetComponent(F).ChangeState(Ac.StateName),o[i].GetComponent(F).banStateChange=!0,o[i].GetComponent(M).rotation.y=-135))}let e=this.world.GetSingleCompoentEntity(Ap);e&&e.Destory(),b.Warn("游戏正式结束"),this.State="GameOver"}0!=V.exitTime&&(V.exitTime>V.exitMaxTime&&((g=K.UIModule().GetNowTopUIName())==Uf.UIName||g==Bf.UIName)?(g==Bf.UIName&&K.UIModule().HideUI(Bf.UIName),eG.ResetGame()):V.exitTime=0)}}"GameOver"==this.State&&(this.isMyOver||-1!=V.myInGamePlayerData.rank&&1!=V.myInGamePlayerData.rank&&(b.Warn("普通模式游戏失败"),this.isMyOver=!0,P.onBattleFail.Trigger()),this.isMyOver||1==V.myInGamePlayerData.rank&&(b.Warn("游戏胜利"),this.isMyOver=!0,P.onBattleWin.Trigger())),k.IsGM&&V.overGame&&(V.overGame=!1,V.myInGamePlayerData.rank=1,this.State="GameOver")}GetAIData(){}GetEquitPros(e,t,i){let o=e+"_"+t+"_"+(Math.floor(5*Math.random())+1)+"_1",a=K.DataModule().GetUser().GetUserItemData(o);if(""!=a.data){var n=a.data.split(",");for(let e=0;e<n.length;e++)i.push(n[e])}}LateUpdate(){}Destroy(){P.onRevive.Remove(this,this.Revive),K.UIModule().HideUI(Uf.UIName)}OnAddComponent(e,t){}OnRemoveComponent(e,t){}ReviveMyPlayer(){this.isMyOver=!1,V.nowSavePlayer++,V.myInGamePlayerData.rank=-1;let o=this.world.GetEntitys([R.id]);for(let i=0;i<o.length;i++)if(o[i].GetComponent(E).netId==V.myInGamePlayerData.netId){o[i].GetComponent(F).banStateChange=!1,o[i].GetComponent(F).ChangeState(Mf.StateName),o[i].GetComponent(R).hp=o[i].GetComponent(R).maxHp,o[i].GetComponent(R).fogHitedTimes=0,o[i].GetComponent(R).isDead=!1,o[i].GetComponent(R).triggerAtt=!1,o[i].GetComponent(v).enable=!0;let e=O.CreatPrefabEntityUsePos(N.Effect_HealEffect,o[i].GetComponent(M).pos),t=(e.GetComponent(Mt).followTargetId=o[i].id,e.AddComponent(kt),e.GetComponent(kt).keepTime=1,ri.AddBuffToTarget(o[i],_i.BuffName,!0,5),ci.ThorPower(o[i]),o[i].GetComponent(U).nowBulletCount=o[i].GetComponent(U).bulletCount,o[i].GetComponent(U).bulletLoadTime=0,o[i].GetComponent(U).singleShotLoadingTime=0,o[i].GetComponent(L).skillList);for(let e=0;e<t.length;e++)t[e].cdTime=0}}CreatGuideAI(e){let t=V.GetLocalPlayer().GetComponent(M).pos.clone(),i=(t.x+=4,t.z+=4,Jc.CreatHero(new Laya.Vector3(t.x,0,t.z),e.heroId,e.weaponId,!1,e.aiId,e.props,e.weaponSkinId,e.level));return i.GetComponent(F).nowState="Idle",i.GetComponent(D).useUICtrl=D.Enemy,i.GetComponent(D).playerName=e.name,i.GetComponent(D).chinaState=e.chinaState,i.AddComponent(E).netId=e.netId,i}CreatPlayer(a){let e=gu.Instance.GetRandomBornPointInFog(),t=a.isAI,n=(k.testSkill,t||(e=gu.Instance.GetGuidePoint("GuidePoint1")),Jc.CreatHero(new Laya.Vector3(e.x,0,e.z),a.heroId,a.weaponId,t,a.aiId,a.props,a.weaponSkinId,a.level));a.isSelf?(n.AddComponent(_t),n.AddComponent(Nt),this.world.GetSingleCompoent($i).followTargetId=n.id,n.GetComponent(D).useUICtrl=D.My,V.showInGameGuide&&(n.GetComponent(R).willRandomSkill=["Spin_1","Grenade_1","IceBall_1"])):n.GetComponent(D).useUICtrl=D.Enemy;for(let o=0;o<a.startSkills.length;o++){let e=a.startSkills[o].split("_"),t=e[0],i=1;1<e.length&&(i=Number(e[1]));var s=K.DataModule().GetLocal().skill.Get(t);if(null!=s){if(""!=s.SkillFun)for(let e=0;e<i;e++)H.AddSkill(n,s.SkillFun,s.SkillID,1,1,s.SkillMaxLevel);if(""!=s.BuffFun)for(let e=0;e<i;e++)ri.AddBuffToTarget(n,s.BuffFun,s.IsOnlyBuff,.001*s.keepTime,s.F1,s.F2,s.F3,s.F4)}}return n.GetComponent(D).playerName=a.name,n.GetComponent(D).chinaState=a.chinaState,n.AddComponent(E).netId=a.netId,n}}):this.systemMgr.AddSystem(new xp),this.systemMgr.AddSystem(new tC),this.systemMgr.AddSystem(new class extends lt{constructor(){super(...arguments),this.systemName="BuffSystem",this.grounp=new dt([Vt.id])}Init(){console.log("BuffSystem init"),k_.Register()}Update(){}DealBuff(e,t,i){-1!=t.buffKeepTime&&(t.buffKeepTime-=i,t.buffKeepTime<=0&&(t.useDesdtory=!0)),k_.Invoke(x_.BuffUpdate,this.world,e,t,i)}FixedUpdate(){var o=this.grounp.GetEntitys(this.world);for(let e=0;e<o.length;e++){let t=o[e],i=t.GetComponent(Vt);if(0<i.buffList.length)for(let e=i.buffList.length-1;0<=e;e--)this.DealBuff(t,i.buffList[e],A.FixedTimeDelta),i.buffList[e].useDesdtory&&(k_.Invoke(x_.BuffDispose,this.world,t,i.buffList[e],A.FixedTimeDelta),0!=i.buffList[e].maxLevel?i.buffList[e].buffKeepTime=0:i.buffList.splice(e,1))}}LateUpdate(){var o=this.grounp.GetEntitys(this.world);for(let e=0;e<o.length;e++){let t=o[e],i=t.GetComponent(Vt);if(0<i.buffList.length)for(let e=i.buffList.length-1;0<=e;e--)k_.Invoke(x_.BuffLateUpdate,this.world,t,i.buffList[e],A.TimeDelta)}}Destroy(){}OnAddComponent(e,t){var i,o;t.componentId==ai.id?(null!=(i=this.world.GetEntityByID((o=t).attacker))&&this.DealHit(i,o),null!=(i=this.world.GetEntityByID(o.hitedTarget))&&this.DealHited(i,o),o.beforeTriggerDmg&&null!=i&&this.DealBeforeTriggerDmg(i,o)):t.componentId===R_.id&&(o=this.world.GetEntityByID((i=t).MainTarget))&&this.Trig(o,i)}Trig(t,i){if(t.HasComponent(Vt.id)){var o=t.GetComponent(Vt);for(let e=0;e<o.buffList.length;e++)k_.Invoke(i.Type,this.world,t,o.buffList[e],i)}}DealHit(t,i){if(t.HasComponent(Vt.id)){var o=t.GetComponent(Vt);for(let e=0;e<o.buffList.length;e++)k_.Invoke(x_.HitBuffDeal,this.world,t,o.buffList[e],i)}}DealHited(t,i){if(t.HasComponent(Vt.id)){var o=t.GetComponent(Vt);for(let e=0;e<o.buffList.length;e++)k_.Invoke(x_.HitedBuffDeal,this.world,t,o.buffList[e],i)}}DealBeforeTriggerDmg(t,i){if(t.HasComponent(Vt.id)){var o=t.GetComponent(Vt);for(let e=0;e<o.buffList.length;e++)k_.Invoke(x_.BeforeTriggerDmg,this.world,t,o.buffList[e],i)}}OnRemoveComponent(i,e){if(e.componentId==Vt.id){let t=i.GetComponent(Vt);if(0<t.buffList.length)for(let e=t.buffList.length-1;0<=e;e--)t.buffList[e].buffKeepTime=0,k_.Invoke(x_.BuffDispose,this.world,i,t.buffList[e],A.FixedTimeDelta)}}}),this.systemMgr.AddSystem(new mc),this.systemMgr.AddSystem(new class extends lt{constructor(){super(...arguments),this.systemName="GrounpPrefabSystem"}Init(){}Update(){}FixedUpdate(){}LateUpdate(){}Destroy(){}OnAddComponent(e,t){t.componentId==Rt.id&&(t=e.GetComponent(B).sp,this.CreatPrefab(t))}CreatPrefab(t){for(let e=0;e<t.numChildren;e++){let i=t.getChildAt(e);var o,a;"_Prefab"==i.name?(o=i.getChildAt(0).name,O.CreatPrefabEntity(o,function(t){if(t.componentId==M.id){let e=t;e.pos.x=i.transform.position.x,e.pos.y=i.transform.position.y,e.pos.z=i.transform.position.z,e.rotation.x=i.transform.rotationEuler.x,e.rotation.y=i.transform.rotationEuler.y,e.rotation.z=i.transform.rotationEuler.z,e.scale.x=i.transform.getWorldLossyScale().x,e.scale.y=i.transform.getWorldLossyScale().y,e.scale.z=i.transform.getWorldLossyScale().z}t.componentId==Rt.id&&(t.parent=i.transform)})):"_AdvPrefab"==i.name?(o=i.getChildAt(0).name,a=JSON.parse(o),O.CreatPrefabEntity(a.name,function(t){if(t.componentId==M.id){let e=t;e.pos.x=i.transform.position.x,e.pos.y=i.transform.position.y,e.pos.z=i.transform.position.z,e.rotation.x=i.transform.rotationEuler.x,e.rotation.y=i.transform.rotationEuler.y,e.rotation.z=i.transform.rotationEuler.z,e.scale.x=i.transform.getWorldLossyScale().x,e.scale.y=i.transform.getWorldLossyScale().y,e.scale.z=i.transform.getWorldLossyScale().z}t.componentId==Rt.id&&(t.parent=i.transform)},a.list)):this.CreatPrefab(i)}}OnRemoveComponent(e,t){}}),this.systemMgr.AddSystem(new class extends lt{constructor(){super(...arguments),this.systemName="AutoDestorySystem",this.grounp=new dt([kt.id])}Init(){}Update(){}FixedUpdate(){var o=this.world.GetEntitysByMatcher(this.grounp);for(let i=0;i<o.length;i++){let e=o[i],t=e.GetComponent(kt);t.keepTime-=A.FixedTimeDelta,t.keepTime<=0&&e.Destory()}}LateUpdate(){}Destroy(){}OnAddComponent(e,t){}OnRemoveComponent(e,t){}}),this.systemMgr.AddSystem(new class extends lt{constructor(){super(...arguments),this.systemName="FollowSystem",this.vecCache=new Laya.Vector3(0,0,0),this.grounp=new dt([Mt.id])}Init(){}Update(){}FixedUpdate(){var t=this.world.GetEntitysByMatcher(this.grounp);for(let e=0;e<t.length;e++){let i=t[e],o=i.GetComponent(Mt),a=this.world.GetEntityByID(o.followTargetId);if(null!=a){let e=i.GetComponent(M),t=a.GetComponent(M);o.usePosLerp?(this.vecCache.x=t.pos.x+o.offset.x,this.vecCache.y=t.pos.y+o.offset.y,this.vecCache.z=t.pos.z+o.offset.z,Laya.Vector3.lerp(e.pos,this.vecCache,o.posLerpSpeed*A.FixedTimeDelta,e.pos)):(e.pos.x=t.pos.x+o.offset.x,e.pos.y=t.pos.y+o.offset.y,e.pos.z=t.pos.z+o.offset.z),o.moveTotargetOffset&&(o.offset.x=S.MoveTowards(o.offset.x,o.targetOffset.x,o.OffsetMoveSpeed*A.FixedTimeDelta),o.offset.y=S.MoveTowards(o.offset.y,o.targetOffset.y,o.OffsetMoveSpeed*A.FixedTimeDelta),o.offset.z=S.MoveTowards(o.offset.z,o.targetOffset.z,o.OffsetMoveSpeed*A.FixedTimeDelta)),o.followScale&&(e.scale.x=t.scale.x,e.scale.y=t.scale.y,e.scale.z=t.scale.z),o.followrotation&&(e.rotation.x=t.rotation.x,e.rotation.y=t.rotation.y,e.rotation.z=t.rotation.z)}else o.isDestory&&i.Destory()}}LateUpdate(){}Destroy(){}OnAddComponent(e,t){}OnRemoveComponent(e,t){}}),this.systemMgr.AddSystem(new class extends lt{constructor(){super(...arguments),this.systemName="UnitSystem",this.inputDir=new Laya.Vector2(0,0),this.inputAngle=new Laya.Vector2(0,0),this.grounp=new dt([R.id])}Init(){V.playerCounts=0}Update(){}UseCmd(o){let t=o.GetComponent(E),i=-100,a=-1,n=-100,s=-1;for(let e=0;e<V.cmds.length;e++){var l=V.cmds[e];l.id==t.netId&&(-2!=l.angle&&(i=l.angle),-2!=l.move&&(n=l.move),-1!=l.s&&(a=l.s),-1!=l.c&&(s=l.c))}if(V.ClearPlayerCmd(t.netId),-100!=(i=o.HasComponent(_t.id)&&o.GetComponent(R).turnRotation?n:i)){let e=o.GetComponent(w);if(-1==i)this.inputAngle.x=0,this.inputAngle.y=0;else{var r=S.AngleToDir(i-181);this.inputAngle.x=r.x,this.inputAngle.y=r.y;let e=this.world.GetSingleCompoentEntity($i),t=0;e&&(t=-e.GetComponent(M).rotation.y),this.inputAngle=S.VecRotate(this.inputAngle,t),Laya.Vector2.normalize(this.inputAngle,this.inputAngle)}e.dir2.x=this.inputAngle.x,e.dir2.z=this.inputAngle.y,e.dir2FollowDir=!1,e.nowIsDragShootState=!0}if(-100!=n){let e=o.GetComponent(w);if(-1==n)this.inputDir.x=0,this.inputDir.y=0;else{r=S.AngleToDir(n-181);this.inputDir.x=r.x,this.inputDir.y=r.y;let e=this.world.GetSingleCompoentEntity($i),t=0;e&&(t=-e.GetComponent(M).rotation.y),this.inputDir=S.VecRotate(this.inputDir,t),Laya.Vector2.normalize(this.inputDir,this.inputDir)}e.dir.x=this.inputDir.x,e.dir.z=this.inputDir.y,e.dir2FollowDir=!1}if(-1!=a){let i=o.GetComponent(R),e=o.GetComponent(U),t=o.GetComponent(bt);if(0==a)e.isSniperRifle&&o.GetComponent(F).nowState!=pc.StateName&&o.GetComponent(R).areYouDriving,i.attBtnState=1,o.GetComponent(F).nowState!=ui.StateName&&o.GetComponent(F).nowState!=Uc.StateName&&V.isPressButtonLaunch(t.mainWeapon,e.isAR)&&(o.GetComponent(F).nowState==pc.StateName?o.GetComponent(F).step=0:i.StartTriggerAtt()),0!=e.nowBulletCount&&e.singleShotLoading&&(e.bulletLoadTime=0),M_(o,R_.TrigFireOnClick(o.id));else if(a<10)5==a?e.bulletLoadTime<=0&&e.nowBulletCount!=e.bulletCount&&(e.bulletLoadTime=e.bulletLoadCD):(i.skillState[a-1]=0,o.HasComponent(L.id)&&0<(r=o.GetComponent(L).skillList.filter(e=>e.skillPos==a)).length&&(o.GetComponent(L).drapSkillId=r[0].skillID),i.skillBtnState=1);else if(10==a){M_(o,R_.TrigTryFire(o.id)),V.isPressButtonLaunch(t.mainWeapon,e.isAR)||(o.GetComponent(F).nowState!=pc.StateName&&i.StartTriggerAtt(),o.GetComponent(F).step=0,e.isSniperRifle),i.attBtnState=0;r=o.GetComponent(M).rotation.y;V.lastAttackAngle=r,o.GetComponent(w).nowIsDragShootState=!1}else{let e=o.GetComponent(w),t=o.GetComponent(M).rotation.y;V.lastAttackAngle=t,e.nowIsDragShootState=!1,i.skillState[a-10-1]=1,o.HasComponent(L.id)&&0<(r=o.GetComponent(L).skillList.filter(e=>e.skillPos==a-10)).length&&(o.GetComponent(L).triggerSkllId=r[0].skillID,o.GetComponent(L).drapSkillId=""),i.skillBtnState=0}}if(-1!=s){let e=o.GetComponent(R);if(4==s){let t="",i=e.upgRadeList[0].split("|");for(let e=0;e<i.length;e++){var h=i[e];-1==t.indexOf(h)&&(t=0==e?h:t+","+h)}e.chooseUpGrade=t}else 0<e.upgRadeList.length&&(e.chooseUpGrade=e.upgRadeList[0].split("|")[s])}}FixedUpdate(){var l=A.FixedTimeDelta,r=this.world.GetEntitysByMatcher(this.grounp);for(let s=0;s<r.length;s++){let t=r[s],i=t.GetComponent(R),e=t.GetComponent(w),o=t.GetComponent(U),a=t.GetComponent(F),n=t.GetComponent(M);if(i.GetIsInVisible()?0!=n.scale.x&&(n.scale.x=0,n.scale.z=0,t.HasComponent(B.id)&&(t.GetComponent(B).sp.transform.localScaleX=0,t.GetComponent(B).sp.transform.localScaleZ=0)):n.scale.x!=i.sizeScale*i.baseSize&&(d=i.sizeScale*i.baseSize,n.scale.x=d,n.scale.y=d,n.scale.z=d,t.HasComponent(B.id)&&(t.GetComponent(B).sp.transform.localScaleX=d,t.GetComponent(B).sp.transform.localScaleY=d,t.GetComponent(B).sp.transform.localScaleZ=d)),i.useInput&&this.UseCmd(t),0<o.comboTime&&(o.comboTime-=l),e.speed=i.GetSpeed(),e.speedScale=i.GetAnyScale(),n.isInCameraArea&&t.HasComponent(D.id)){let e=t.GetComponent(D);e.maxhp!=i.maxHp&&(e.maxhp=i.maxHp,e.freshUI=!0),e.hp!=i.hp&&(e.hp=i.hp,e.freshUI=!0),e.level!=i.nowLevel&&(e.level=i.nowLevel,e.freshUI=!0),e.exp!=i.exp&&(e.exp=i.exp,e.freshUI=!0),e.maxExp!=i.maxExp&&(e.maxExp=i.maxExp,e.freshUI=!0),e.bulletCount!=o.bulletCount&&(e.bulletCount=o.bulletCount,e.freshUI=!0),e.nowBulletCount!=o.nowBulletCount&&(o.singleShotLoading&&!e.singleShotReloadState&&-1!=e.nowBulletCount&&e.nowBulletCount<o.nowBulletCount&&(e.singleShotReloadState=!0,e.singleShotLoading=o.singleShotLoading),e.nowBulletCount=o.nowBulletCount,e.freshUI=!0),!e.reloadState&&!e.playReloadAni&&0<o.bulletLoadTime&&(e.reloadState=!0,e.bulletLoadCD=o.bulletLoadCD,e.freshUI=!0,e.playReloadAni=!0)}if(!i.isDead){if(i.exp>=i.maxExp&&(this.UpGrade(t,i),n.isInCameraArea)){let e=O.CreatPrefabEntityUsePos(N.Effect_LevelUp,n.pos);e.AddComponent(Mt).followTargetId=t.id,e.GetComponent(Mt).followrotation=!1}if(0<i.upRadeCount&&0==i.upgRadeList.length&&(i.upRadeCount--,this.GetChooses(t,i)),""!=i.chooseUpGrade)if(-1!=i.chooseUpGrade.indexOf(",")){var h=i.chooseUpGrade.split(",");for(let e=0;e<h.length;e++){var m=h[e];this.AddUpgrade(t,m),(!V.IsGameMode_Zombie()||0<i.upgRadeList.length&&-1!=i.upgRadeList[0].indexOf(m))&&i.upgRadeList.shift()}i.chooseUpGrade="",i.needUIFreshChoose=!0}else{this.AddUpgrade(t,i.chooseUpGrade);var d=i.chooseUpGrade;i.chooseUpGrade="",(!V.IsGameMode_Zombie()||0<i.upgRadeList.length&&-1!=i.upgRadeList[0].indexOf(d))&&i.upgRadeList.shift(),i.needUIFreshChoose=!0}""!=i.getItem&&(V.AddItem(t,i.getItem),i.getItem="",i.needUIFreshChoose=!0)}i.isDead&&a.nowState!=i.deadState&&(V.playerCounts--,a.ChangeState(i.deadState),a.banStateChange=!0)}}UpGrade(e,t){t.maxHp+=K.DataModule().GetLocal().gameRule.InGameUpgrade_MaxHp(),t.dmg+=K.DataModule().GetLocal().gameRule.InGameUpgrade_Dmg(),0<t.hp&&(t.hp+=K.DataModule().GetLocal().gameRule.InGameUpgrade_AddHp()),t.hp>t.maxHp&&(t.hp=t.maxHp),t.exp-=t.maxExp;var i=Math.floor(100*Math.random());console.warn("升级了",i,t.superLevelUp),i<t.superLevelUp?(t.nowLevel+=2,t.maxExp=K.DataModule().GetLocal().gameRule.InGameUpgradeNeedExp(t.nowLevel),t.upRadeCount+=2):(t.nowLevel++,t.maxExp=K.DataModule().GetLocal().gameRule.InGameUpgradeNeedExp(t.nowLevel),t.upRadeCount++)}GetChooses(e,t){let o=[],i=V.GetInGamePlayerData(e.GetComponent(E).netId);if(i)for(let e=0;e<i.unlockSkills.length;e++)o.push(i.unlockSkills[e]);else o=e.HasComponent(_t.id)?K.DataModule().GetLocal().skill.GetNoSkillUpGrade():K.DataModule().GetLocal().skill.GetAIUnlockPassivitySkll();if(e.HasComponent(L.id)){var a=e.GetComponent(L);if(a.skillList.length>=a.unlockPosTimes)if(e.HasComponent(_t.id)){o=K.DataModule().GetLocal().skill.GetNoSkillUpGrade();for(let e=0;e<a.skillList.length;e++)a.skillList[e].level<a.skillList[e].maxLevel&&o.push(a.skillList[e].skillID)}else o=K.DataModule().GetLocal().skill.GetAIUnlockPassivitySkll()}let n=t.willRandomSkill.concat();if(V.IsGameMode_Zombie()){n=[],o=[];var s=K.DataModule().GetLocal().zModePassiveSkill.GetUnlockDatas(),l=e.GetComponent(Vt).buffList;for(let e=0;e<s.length;e++){let t=s[e],i=!0;for(let e=0;e<l.length;e++){var r=l[e];r.buffName==t.SkillID&&r.level>=r.maxLevel&&(i=!1)}i&&o.push(t.SkillID)}}var h=[];for(let e=0;e<3;e++)this.GetOneUpGrade(h,o,n);let m=h[1],d=h[2],c=(null==m&&(m=h[0]),null==d&&(d=m),h[0]+"|"+m+"|"+d);""!=k.testSkill&&(c=k.testSkill+"|Invincible|BloodNeedle"),t.upgRadeList.push(c)}GetOneUpGrade(t,i,o){if(0<o.length)for(let e=0;e<i.length;e++){var a=o[0].split("_")[0];if(i[e]==a)return t.push(o[0]),i.splice(e,1),void o.shift()}var e=Math.floor(q.Random()*i.length);t.push(i[e]),i.splice(e,1)}AddUpgrade(t,i){let e=i.split("_"),o=e[0],a=1,n=(1<e.length&&(a=Number(e[1])),t.GetComponent(R).willRandomSkill);for(let e=0;e<n.length;e++)n[e]==i&&n.splice(e,1);let s=null;if(V.IsGameMode_Zombie()?(s=K.DataModule().GetLocal().zModePassiveSkill.Get(o))||(s=K.DataModule().GetLocal().skill.Get(o),console.warn("升级的被动数据,",s)):s=K.DataModule().GetLocal().skill.Get(o),console.warn("升级的数据,",s),null!=s){if(""!=s.SkillFun)for(let e=0;e<a;e++)H.AddSkill(t,s.SkillFun,s.SkillID,1,1,s.SkillMaxLevel);""!=s.BuffFun&&ri.AddBuffToTarget(t,s.BuffFun,s.IsOnlyBuff,.001*s.keepTime,s.F1,s.F2,s.F3,s.F4,s.L1,s.L2,s.L3,s.L4,s.SkillMaxLevel-1)}if(t.GetComponent(M).isInCameraArea){let e=O.CreatPrefabEntityUsePos(N.Effect_ChooseOneEffect,t.GetComponent(M).pos);e.AddComponent(Mt).followTargetId=t.id,e.GetComponent(Mt).followrotation=!1}}LateUpdate(){}Destroy(){}OnAddComponent(e,t){t.componentId==R.id&&(V.playerCounts++,t.skillState=[0,0,0])}OnRemoveComponent(e,t){}}),this.systemMgr.AddSystem(new class extends lt{constructor(){super(...arguments),this.systemName="BulletSystem",this.grounp=new dt([C.id]),this.hitvec2=new Laya.Vector2(0,0),this.vec2=new Laya.Vector2(0,0),this.vec3=new Laya.Vector2(0,0),this.vec4=new Laya.Vector2(0,0),this.pos1=new Laya.Vector3(0,0,0)}Init(){P.onTriggerCollider.Register(this,this.OnTriggerCollider)}OnTriggerCollider(a,s){if(a.HasComponent(C.id)&&a.HasComponent(v.id)){let o=a.GetComponent(C);if(V.IsGameMode_Zombie()){let e=this.world.GetEntityByID(o.creatorId);if(!e)return;if(e.HasComponent(E.id)&&s.HasComponent(E.id)&&s.GetComponent(E).team==e.GetComponent(E).team)return;if(!s.GetComponent(v).hitWithBullet)return}if(s.HasComponent(R.id))if(o.creatorId!=s.id){if(V.IsGameMode_Nian()){let e=this.world.GetEntityByID(o.creatorId);if(e.HasComponent(E.id)&&s.GetComponent(E).team==e.GetComponent(E).team)return}let e=this.world.GetEntityByID(o.creatorId);if(e&&e.HasComponent(y.id)&&e.GetComponent(y).createId==s.id)return;s.HasComponent(ut.id)&&(n=this.world.GetEntityByID(o.creatorId).GetComponent(M).pos.clone(),s.GetComponent(ut).dir=n,s.GetComponent(ut).enemyId=o.creatorId,s.GetComponent(ut).hasTriggerAngryChase=!1);let t=o.sapTime,i=o.useStiffnessDis;if(o.useSAP||(t=0),V.IsGameMode_Zombie()){let e=this.world.GetEntityByID(o.creatorId);i=e.HasComponent(ut.id)?(t=e.GetComponent(ut).atkSapTime,e.GetComponent(ut).atkStiffnessDis):(t=e.GetComponent(U).bulletSapTime,e.GetComponent(U).bulletStiffnessDis)}if(s.HasComponent(ut.id)&&(t*=s.GetComponent(ut).hitedSapTimeRatio,i*=s.GetComponent(ut).hitedStiffnessDisRatio),s.GetComponent(R).GetRebound()&&(n=a.GetComponent(M),r=a.GetComponent(v),l=s.GetComponent(M),m=this.world.GetEntityByID(o.creatorId).GetComponent(M),this.vec2.x=m.pos.x-l.pos.x,this.vec2.y=m.pos.z-l.pos.z,m=S.AngleToDir(l.rotation.y),m=S.SignVecAngle(m,this.vec2),Math.abs(m)<30&&V.SectorHitDetect(l.pos,1.3+r.radius,n.pos,l.rotation.y,70)&&(K.AudioModule().PlayOnce(x.GetSound2("Hit_Sword")),a.HasComponent(w.id)&&(Laya.Vector2.normalize(this.vec2,this.vec2),a.GetComponent(w).dir.x=this.vec2.x,a.GetComponent(w).dir.z=this.vec2.y,a.GetComponent(w).yRotationFollow=!1),o.useDmg=!1,o.hitAndDistory=!1)),""!=o.hitShowEffect&&(m=s.GetComponent(M),r=o.hitShowEffectOffSet,O.CreatPrefabEntityUsePos(o.hitShowEffect,new Laya.Vector3(m.pos.x,.01+r,m.pos.z))),o.useDmg){if(""!=o.onDistanceDmg){let e=this.world.GetEntityByID(o.creatorId),t=a.GetComponent(M);this.vec4.x=o.pos.x-t.pos.x,this.vec4.y=o.pos.z-t.pos.z;var n=Laya.Vector2.scalarLength(this.vec4),l=e.GetComponent(U).attackRange,r=K.DataModule().GetLocal().weapon.Get(o.onDistanceDmg);n<l&&(m=r.F3,o.dmg=o.dmg*(.01*(m-(n-1.2)/(l-1.2)*(m-100))))}r=null!=o.dmgDynamicFunc?o.dmgDynamicFunc(s.id,o.creatorId,a):o.dmg;H.HitTarget(s.id,o.creatorId,r,o.isMagic,i,a,t,N.Effect_Blood,o.isSpecialDmg)}a.HasComponent(oi.id)&&(""!=(n=a.GetComponent(oi)).BuffID&&("Recoil"==n.BuffID?this.isRecoilEffect(a,s):ri.AddBuffToTarget(s,n.BuffID,n.isOnlyBuff,n.keepTime,n.F1,n.F2,n.F3,n.F4,o.creatorId)),""!=n.B2_BuffID&&ri.AddBuffToTarget(s,n.B2_BuffID,n.B2_isOnlyBuff,n.B2_keepTime,n.B2_F1,n.B2_F2,n.B2_F3,n.B2_F4,o.creatorId)),0<o.penetrationNum?--o.penetrationNum:o.hitAndDistory&&(o.destoryNow=!0)}else!a.HasComponent(oi.id)||""!=(l=a.GetComponent(oi)).BuffID&&"Recoil"==l.BuffID&&this.isRecoilEffect(a,s);if(s.HasComponent(y.id)){let n=s.GetComponent(y);if(0<n.hp){let i=o.sapTime;switch(o.useSAP||(i=0),n.type){case y.Type_Box:case y.Type_Obstacle:if(0<n.hp){if(-1!=n.createId&&n.createId==o.creatorId)return;let e=a.GetComponent(C).boxDmg;V.IsGameMode_Nian()&&(e=100,a.HasComponent(C.id)&&-1==a.GetComponent(C).boxDmg&&(e=0)),n.hp-=e,s.GetComponent(D).hp=n.hp,s.GetComponent(D).maxhp=n.maxhp,s.GetComponent(M).isInCameraArea&&((h=this.world.GetEntityByID(o.creatorId))&&ci.GuGuChicken(h),O.CreatPrefabEntityUsePos(N.Effect_HitEffect,s.GetComponent(M).pos).GetComponent(M).pos.y+=.5),s.HasComponent(F.id)&&s.GetComponent(F).ChangeState(_c.StateName),s.GetComponent(D).freshUI=!0;let t=s.GetComponent(xt);switch(n.itemID){case"ZombieFactory":s.GetComponent(pu).isUnderAttacked=!0,Di.TraverseNode(s.GetComponent(B).sp,function(e){switch(e.name){case"Model":case"_danger":e.meshRenderer.material.albedoIntensity=2}}),s.GetComponent(D).ShowHpChanged(D.changeHpType_Sub,e);break;case"Car":t.animator.play("Car_Idle"),t.nowClipName="Car_Idle",t.useClipName="Car_Hited",t.nextUseClipName="Car_Idle"}if(0<i&&((h=this.world.GetEntityByID(o.creatorId))&&ri.AddSAP(h,i)),n.hp<=0){if(s.HasComponent(F.id))s.HasComponent(Iu.id)?s.GetComponent(F).time=.2:s.GetComponent(F).time=2,s.GetComponent(F).ChangeState(Ic.StateName);else if("RockWall"==n.itemID||"ShaDai"==n.itemID||"ZombieFactory"==n.itemID){if(s.HasComponent(kt.id))s.GetComponent(kt).keepTime=.5;else{let e=new kt;e.keepTime=.5,s.AddComponentAdv(kt,e)}"ZombieFactory"==n.itemID&&--V.nowSceneZombieFactoryNum}if("Car"==n.itemID){let o=s.GetComponent(pi),a=[];a=o.passengerIdList,-1!=o.driverId&&a.push(o.driverId);for(let i=0;i<a.length;i++){let e=a[i],t=this.world.GetEntityByID(e);t&&(ri.ClearBuffByName(t,wp.BuffName),t.GetComponent(B).render=!0,t.GetComponent(F).ChangeState(Mf.StateName),t.GetComponent(D).banHud=!1,t.GetComponent(R).areYouDriving=-1,t.GetComponent(R).banAtt=0,--t.GetComponent(L).banTrigger),e==o.driverId&&(ri.ClearBuffByName(t,vp.BuffName),t.GetComponent(w).banDirRotationCtrl=0,t.GetComponent(v).colliderNoMove=!1),t.HasComponent(_t.id)&&(t.GetComponent(Ft).ban=!1,P.onBoarding.Trigger(),V.isOnCar=!1)}o.driverId=-1,o.isDamage=!0,o.passengerIdList=[],this.world.GetEntityByID(o.carDoorId).GetComponent(B).render=!0,s.RemoveComponent(Mt)}""!=n.effect&&"AirdropBunker"==n.effect&&(this.world.GetEntityByID(n.createId).GetComponent(L).skillList.filter(e=>"AirdropBunker"==e.skillName)[0].skillKeepTime=0);let a=this.world.GetEntityByID(o.creatorId);if(a){(a=a.HasComponent(y.id)?this.world.GetEntityByID(a.GetComponent(y).createId):a).GetComponent(R).canLevelUp&&(ri.DelayGetExp(a,.8,n.addExp),Jc.CreatExpEffect(s.GetComponent(M).pos,a)),V.gameMode==$I.Normal&&a.HasComponent(_t.id)&&K.DataModule().GetUser().AddHuoYueDu(2),""!=n.effect&&"AirdropBunker"==n.effect&&(this.world.GetEntityByID(n.createId).GetComponent(L).skillList.filter(e=>"AirdropBunker"==e.skillName)[0].skillKeepTime=0);let o=s.GetComponent(y).userItemDatas;if(!V.IsGameMode_Nian()&&!V.IsGameMode_Zombie()&&k.isUseGridBoxKey&&3==s.GetComponent(y).chestLevel&&q.Random()<Gp.InGame_BoxProbability_ChestKey){let e=K.DataModule().GetUser().NewUserItemData();e.id=Z.ChestKey,e.type=Z.ChestKey,e.tableID=Z.ChestKey,o.push(e)}V.IsGameMode_Zombie()&&"ZombieFactory"==n.itemID&&(o=V.GetBonuseLotteryItemListByID("Chest_ZombieInGameFactory"));for(let i=0;i<o.length;i++)if(V.IsGameMode_Zombie())V.BonuseItem(s,a,o,i);else{Jc.CreatBonuseItem(s.GetComponent(M).pos,o[i]).GetComponent(Ht).targetId=a.id;let e=a.GetComponent(E).netId,t=V.GetInGamePlayerData(e);t&&t.userItemDatas.push(o[i])}}}!o.hitAndDistory||o.whetherPenetrate||(o.destoryNow=!0)}break;case y.Type_WallBox:if(-1==n.wallLeftTime){if(""!=n.wallWillCreatItem&&q.Random()<n.wallWillCreatChance){var h=s.GetComponent(M);if(V.GetFogDis(h.pos)>V.fogRange){let i=K.DataModule().GetUser().GetUserItemDataList(["HeroPiece_Plumber_1"]);if(0<i.length){h=K.DataModule().GetLocal().hero.Get("Plumber");h&&(i[0].rare=h.Rare);let t=this.world.GetEntityByID(o.creatorId);if(t){let e=!0;if("ILoveMushroom"==t.GetComponent(ti).skinSpEffect&&(e=!1),K.DataModule().GetUser().IsHeroUnlock("Plumber")&&(e=!1),e=K.DataModule().GetUser().IsHeroBuy("Plumber")?!1:e){let e=Jc.CreatBonuseItem(s.GetComponent(M).pos,i[0]);V.GetInGamePlayerDataById(o.creatorId).userItemDatas.push(i[0]),e.GetComponent(Ht).targetId=o.creatorId}}}n.wallWillCreatItem=""}}return O.CreatPrefabEntityUsePos(N.Effect_WallBoxBreak,s.GetComponent(M).pos).GetComponent(M).pos.y=1.25,void s.Destory()}if(0<n.wallLeftTime){n.wallLeftTime--,0==n.wallLeftTime&&(s.GetComponent(B).sp.getChildByName("box").getChildByName("box2").active=!1,s.GetComponent(B).sp.getChildByName("box").getChildByName("box3").active=!0),s.GetComponent(F).ChangeState(au.StateName),s.GetComponent(M).isInCameraArea&&(K.AudioModule().PlayOnce(x.GetSound2("WallCoin")),K.AudioModule().PlayOnce(x.GetSound2("WallBoxHited")));let i=this.world.GetEntityByID(o.creatorId);if(i){let t=i.GetComponent(ti),e=!1;if(e=n.willGetMashRoom&&t&&"ILoveMushroom"==t.skinSpEffect&&q.Random()<.01*t.skinSpEffect_F5?!0:e){let e=O.CreatPrefabEntityUsePos(N.Item_MashRoom,s.GetComponent(M).pos);e.GetComponent(y).speed=(i.GetComponent(R).speed+3)*t.skinSpEffect_F2*.01,e.GetComponent(y).buffKeepTime=.001*t.skinSpEffect_F6,e.GetComponent(y).f1=.01*t.skinSpEffect_F3,n.willGetMashRoom=!1}else{h=K.DataModule().GetLocal().hero.Get("Plumber");if(h){h=K.DataModule().GetLocal().lottery.CreationEquip(h.F9),h=K.DataModule().GetUser().GetUserItemDataList([h]);if(0<h.length){let e=Jc.CreatBonuseItem(s.GetComponent(M).pos,h[0]);V.GetInGamePlayerDataById(o.creatorId).userItemDatas.push(h[0]),e.GetComponent(Ht).targetId=o.creatorId}}}}}else s.GetComponent(F).ChangeState(tu.StateName),O.CreatPrefabEntityUsePos(N.Effect_WallBoxHited,s.GetComponent(M).pos).GetComponent(M).pos.y=1.25;break;case y.Type_Bunker:{h=a.GetComponent(C).boxDmg;n.hp-=h;let t=s.GetComponent(pt);if(n.hp<=0?s.GetComponent(D).hp=0:s.GetComponent(D).hp=n.hp,s.GetComponent(D).maxhp=n.maxhp,s.GetComponent(D).freshUI=!0,s.GetComponent(D).hp<=0){t.isDamage=!0,vu.UpdateBunkerWallCollider(s);let e=K.UIModule().GetUI(Uf.UIName);e.view&&e.isShow&&(e.view.m_DoorCom.m_doorBtn.m_c1.setSelectedPage("Open"),e.offOrOn=!1)}let e=s.GetComponent(B).sp.getChildByName("Fence");e.transform.localScaleX=.995,e.transform.localScaleY=1.005,e.transform.localScaleZ=.995;break}}if(n.hp<=0){let e=q.NowGameWorld.GetEntityByID(o.creatorId);e;var m;if(e)if(!e.HasComponent(y.id)||q.NowGameWorld.GetEntityByID(e.GetComponent(y).createId)&&0,n.hp<=0){let e=q.NowGameWorld.GetEntityByID(o.creatorId),t=e;e&&e.HasComponent(y.id)&&((m=q.NowGameWorld.GetEntityByID(e.GetComponent(y).createId))&&(t=m)),P.onDestroyItem.Trigger(e,s,t)}}}}}if(a.HasComponent(R.id)&&s.HasComponent(y.id)&&a.GetComponent(R).canGetItem){var e=s.GetComponent(y);switch(e.type){case y.Type_Eat:"GuideTrigger"==e.itemID&&(V.guideList.push(2),z.Instance.LeYou_Guidance(106)),s.Destory(),""!=e.addBuff&&ri.AddBuffToTarget(a,e.addBuff,e.isOnlyBuff,e.buffKeepTime,e.f1,e.f2,e.f3,e.f4),a.GetComponent(M).isInCameraArea&&K.AudioModule().PlayOnce(x.GetSound2("Eat2"));break;case y.Type_Obstacle:a.HasComponent(ut.id)&&(a.GetComponent(ut).collideWithObstacle=!0)}if(!a.GetComponent(R).isDead&&e.type==y.Type_BounesItem){let e=a.GetComponent(M),t=V.GetInGamePlayerDataById(a.id);t&&t.userItemDatas.push(s.GetComponent(Ht).itemData),O.CreatPrefabEntityUsePos(N.Effect_PickUp,new Laya.Vector3(e.pos.x,1,e.pos.z)),s.Destory()}}}isRecoilEffect(e,t){var e=this.world.GetEntityByID(e.GetComponent(C).creatorId).GetComponent(M),i=t.GetComponent(M);this.vec3.x=e.pos.x-i.pos.x,this.vec3.y=e.pos.z-i.pos.z,Laya.Vector2.normalize(this.vec3,this.vec3),console.warn("触发炸弹后坐力"),ri.AddBuffToTarget(t,yp.BuffName,!0,.4,-this.vec3.x,this.vec3.y,2)}Update(){}BulletDrop(o){var a=o.GetComponent(C);if(o.HasComponent(Sp.id)){let e=o.GetComponent(M),t=o.GetComponent(Sp);t.nowValue+=10*A.FixedTimeDelta;var n=o.GetComponent(oi),i=n.F2/o.GetComponent(w).speed;if(t.height=i*i*4.9,e.pos.y=Math.sin(t.nowValue)*t.height,t.nowValue>Math.PI){let e=o.GetComponent(M),t=O.CreatPrefabEntityUsePos(N.Effect_ExplosionExpo,new Laya.Vector3(e.pos.x,.5,e.pos.z),new Laya.Vector3(0,.1,0)),i=n.F1;t.GetComponent(M).SetScale(i,i,i),t.GetComponent(C).dmg=a.dmg,t.GetComponent(v).width=t.GetComponent(v).width*i,t.GetComponent(v).height=t.GetComponent(v).height*i,t.GetComponent(C).creatorId=o.GetComponent(C).creatorId,o.Destory()}}}FixedUpdate(){var o,a,n=this.grounp.GetEntitys(this.world);for(let i=0;i<n.length;i++){let t=n[i],e=t.GetComponent(C);if(this.BulletDrop(t),e.hitWallDestoy&&t.HasComponent(v.id)&&t.GetComponent(v).isHitWall&&(""!=e.hitShowEffect&&(o=t.GetComponent(M),a=e.hitShowEffectOffSet,O.CreatPrefabEntityUsePos(e.hitShowEffect,new Laya.Vector3(o.pos.x,.01+a,o.pos.z))),e.destoryNow=!0),e.destoryNow){let e=t.GetComponent(C);e&&e.onDestroyFunc&&e.onDestroyFunc(),t.Destory()}}}LateUpdate(){}Destroy(){P.onTriggerCollider.Remove(this,this.OnTriggerCollider)}OnAddComponent(e,t){}OnRemoveComponent(e,t){}}),this.systemMgr.AddSystem(new _p),this.systemMgr.AddSystem(new Ip),this.systemMgr.AddSystem(new class extends lt{constructor(){super(...arguments),this.systemName="ArrowSystem",this.vec=new Laya.Vector2(0,0),this.grounp=new dt([Nt.id])}Init(){P.onEnterFog.Register(this,this.onEnterFog),P.onQuitFog.Register(this,this.onQuitFog),P.onFogHit.Register(this,this.onFogAmg)}Update(){var o=this.world.GetEntitysByMatcher(this.grounp);for(let e=0;e<o.length;e++){let a=o[e],t=a.GetComponent(Nt),i=this.world.GetEntityByID(t.arrowId);if(i){let e=i.GetComponent(M),t=a.GetComponent(M);e.pos.x=t.pos.x,e.pos.z=t.pos.z,e.pos.y=0,e.rotation.y=t.rotation.y}var n=a.GetComponent(M);if(this.vec.x=n.pos.x-V.fogPos.x,this.vec.y=n.pos.z-V.fogPos.z,Laya.Vector2.scalarLength(this.vec)>V.fogRange){let o=this.world.GetEntityByID(t.zhiShiBiaoId);if(o){let e=o.GetComponent(M),t=a.GetComponent(M),i=S.VecToAngle(this.vec);e.pos.x=t.pos.x,e.pos.z=t.pos.z,e.pos.y=0,e.rotation.y=i,o.GetComponent(B).render||(o.GetComponent(B).sp.transform.localPositionX=o.GetComponent(M).pos.x,o.GetComponent(B).sp.transform.localPositionY=o.GetComponent(M).pos.y,o.GetComponent(B).sp.transform.localPositionZ=o.GetComponent(M).pos.z,o.GetComponent(B).render=!0)}t.time-=A.FixedTimeDelta,t.time<0&&(t.time=2,P.onFogHit.Trigger()),V.isInFogRange||(V.isInFogRange=!0,P.onEnterFog.Trigger())}else{if(-1!=t.zhiShiBiaoId){let e=this.world.GetEntityByID(t.zhiShiBiaoId);e&&(e.GetComponent(B).render=!1)}V.isInFogRange&&(V.isInFogRange=!1,P.onQuitFog.Trigger())}}}FixedUpdate(){}LateUpdate(){}onEnterFog(){}onQuitFog(){}Destroy(){P.onEnterFog.Remove(this,this.onEnterFog),P.onQuitFog.Remove(this,this.onQuitFog),P.onFogHit.Remove(this,this.onFogAmg)}OnAddComponent(i,o){if(o.componentId==Nt.id){let e=o,t=O.CreatPrefabEntityUsePos(N.Arrow,i.GetComponent(M).pos);e.arrowId=t.id;o=O.CreatPrefabEntityUsePos(N.Effect_ZhiShiBiao,i.GetComponent(M).pos);e.zhiShiBiaoId=o.id}}onFogAmg(){}OnRemoveComponent(e,i){if(i.componentId==Nt.id){let e=i,t=this.world.GetEntityByID(e.arrowId);null!=t&&t.Destory()}}}),this.systemMgr.AddSystem(new class extends lt{constructor(){super(...arguments),this.systemName="ExpPointSystem",this.vecCache=new Laya.Vector3(0,0,0),this.grounp=new dt([Zc.id])}Init(){}Update(){var s,l,r=this.world.GetEntitysByMatcher(this.grounp),h=A.TimeDelta;for(let n=0;n<r.length;n++){let e=r[n],t=e.GetComponent(Zc),i=e.GetComponent(M),o=this.world.GetEntityByID(t.targetId),a=(Laya.Vector3.scale(t.dir,t.speed,t.vec),e.GetComponent(B));a.sp.transform.localPositionX=i.pos.x,a.sp.transform.localPositionY=i.pos.y,a.sp.transform.localPositionZ=i.pos.z,t.keepTime-=h,o?(s=o.GetComponent(M),l=e.GetComponent(M),t.keepTime<.5?Laya.Vector3.lerp(l.pos,s.pos,5*h,l.pos):(i.pos.x+=t.vec.x*h,i.pos.y+=t.vec.y*h,i.pos.z+=t.vec.z*h,this.vecCache.x=s.pos.x-l.pos.x,this.vecCache.y=s.pos.y+.8-l.pos.y,this.vecCache.z=s.pos.z-l.pos.z,Laya.Vector3.scalarLength(this.vecCache)<.3?e.Destory():(Laya.Vector3.normalize(this.vecCache,this.vecCache),Laya.Vector3.lerp(t.dir,this.vecCache,2*h,t.dir)))):e.Destory(),t.keepTime<0&&e.Destory()}}FixedUpdate(){}LateUpdate(){}Destroy(){}OnAddComponent(e,t){t.componentId==Zc.id&&e.GetComponent(B).sp.getChildAt(0).trailFilter.clear()}OnRemoveComponent(e,t){}}),this.systemMgr.AddSystem(new class extends lt{constructor(){super(...arguments),this.systemName="BonusItemSystem",this.grounp=new dt([Ht.id])}Init(){this.rare4Color=rc.hexTocolor("#F600FF"),this.rare5Color=rc.hexTocolor("#FD9A00")}Update(){}FixedUpdate(){var i=this.world.GetEntitysByMatcher(this.grounp);for(let t=0;t<i.length;t++){let a=i[t],n=a.GetComponent(Ht),s=this.world.GetEntityByID(n.targetId),e=(n.selfGetMode&&0<=n.keepColliderF&&(n.keepColliderF--,n.keepColliderF<0&&a.HasComponent(v.id)&&(a.GetComponent(v).hitWithWall=!1)),!1);if(s?V.IsGameMode_Nian()||s.HasComponent(R.id)&&s.GetComponent(R).isDead&&(n.showTime=-1):e=!0,e)0<n.showTime?n.showTime-=A.FixedTimeDelta:a.Destory();else if(0<n.showTime)n.showTime-=A.FixedTimeDelta;else{if(n.keepTime-=A.TimeDelta,n.state==Ht.State_Normal){let e=a.GetComponent(M),t=s.GetComponent(M),i=(e.pos.x=t.pos.x,e.pos.z=t.pos.z,e.scale.x-=+A.FixedTimeDelta,e.scale.y-=+A.FixedTimeDelta,e.scale.z-=+A.FixedTimeDelta,a.GetComponent(B)),o=!1;i.render&&Laya.Vector3.distance(i.sp.transform.position,e.pos)<.1&&(o=!0),(o=n.keepTime<0?!0:o)&&(O.CreatPrefabEntityUsePos(N.Effect_PickUp,new Laya.Vector3(e.pos.x,1,e.pos.z)),n.itemData.type==Z.NewYearFont||n.itemData.type==Z.InGameHongBao?(n.state=Ht.State_HeadShow,n.keepTime=1,a.GetComponent(B).sp.getChildByName("Shadow").active=!1,a.GetComponent(B).sp.getChildByName("Light").active=!1,a.GetComponent(M).scale.x=1.2,a.GetComponent(M).scale.y=1.2,a.GetComponent(M).scale.z=1.2,"Normal"!=V.useSpCamera&&(a.GetComponent(M).scale.x=.3,a.GetComponent(M).scale.y=.3,a.GetComponent(M).scale.z=.3)):a.Destory())}if(n.state==Ht.State_HeadShow){let e=a.GetComponent(M),t=s.GetComponent(M);e.pos.x=t.pos.x,e.pos.y=t.pos.y+1.5,e.pos.z=t.pos.z,-1==n.showTime&&a.Destory()}}}}LateUpdate(){}Destroy(){}OnAddComponent(i,t){if(t.componentId==Ht.id){i.GetComponent(Ht).showTime=1+.3*Math.random(),i.GetComponent(Ht).keepTime=.1;t=i.GetComponent(Ht).itemData;if(t.type==Z.Chest){let e=i.GetComponent(B).sp.getChildByName("Item").getChildByName("Item");e.meshRenderer.materials[0].albedoColor=this.GetOutLineColor(t.rare),e.meshRenderer.materials[1].albedoColor=this.GetMainColor(t.rare),this.AddLine(i.GetComponent(B).sp,t.rare)}if(t.type==Z.Head){let e=i.GetComponent(B).sp.getChildByName("Item").getChildByName("Item");e.meshRenderer.materials[1].albedoColor=this.GetOutLineColor(t.rare),e.meshRenderer.materials[0].albedoColor=this.GetMainColor(t.rare),this.AddLine(i.GetComponent(B).sp,t.rare)}if(t.type==Z.Foot){let e=i.GetComponent(B).sp.getChildByName("Item").getChildByName("Item");e.meshRenderer.materials[1].albedoColor=this.GetOutLineColor(t.rare),e.meshRenderer.materials[0].albedoColor=this.GetMainColor(t.rare),this.AddLine(i.GetComponent(B).sp,t.rare)}if(t.type==Z.Ring){let e=i.GetComponent(B).sp.getChildByName("Item").getChildByName("Item");e.meshRenderer.materials[0].albedoColor=this.GetOutLineColor(t.rare),e.meshRenderer.materials[1].albedoColor=this.GetMainColor(t.rare),this.AddLine(i.GetComponent(B).sp,t.rare)}if(t.type==Z.NewYearFont&&(i.GetComponent(B).sp.getChildByName("Item").getChildByName("char01").active=!1,i.GetComponent(B).sp.getChildByName("Item").getChildByName("char02").active=!1,i.GetComponent(B).sp.getChildByName("Item").getChildByName("char03").active=!1,i.GetComponent(B).sp.getChildByName("Item").getChildByName("char04").active=!1,i.GetComponent(B).sp.getChildByName("Item").getChildByName("char05").active=!1,i.GetComponent(B).sp.getChildByName("Item").getChildByName("char06").active=!1,i.GetComponent(B).sp.getChildByName("Item").getChildByName("char07").active=!1,i.GetComponent(B).sp.getChildByName("Shadow").active=!0,i.GetComponent(B).sp.getChildByName("Light").active=!0,t.data==it.NewYearFonta&&(i.GetComponent(B).sp.getChildByName("Item").getChildByName("char01").active=!0),t.data==it.NewYearFontb&&(i.GetComponent(B).sp.getChildByName("Item").getChildByName("char03").active=!0),t.data==it.NewYearFontc&&(i.GetComponent(B).sp.getChildByName("Item").getChildByName("char02").active=!0),t.data==it.NewYearFontd&&(i.GetComponent(B).sp.getChildByName("Item").getChildByName("char04").active=!0),t.data==it.NewYearFonte&&(i.GetComponent(B).sp.getChildByName("Item").getChildByName("char07").active=!0),t.data==it.NewYearFontf&&(i.GetComponent(B).sp.getChildByName("Item").getChildByName("char05").active=!0),t.data==it.NewYearFontg&&(i.GetComponent(B).sp.getChildByName("Item").getChildByName("char06").active=!0)),t.type==Z.InGameHongBao&&(i.GetComponent(B).sp.getChildByName("Shadow").active=!0,i.GetComponent(B).sp.getChildByName("Light").active=!0),i.GetComponent(Ht).selfGetMode){let e=new y,t=(e.type=y.Type_BounesItem,new v);t.radius=.6,t.hitWithWall=!0,i.AddComponentAdv(y,e),i.AddComponentAdv(v,t),i.GetComponent(Ht).showTime=10}}}AddLine(i,o){if(o<4)i.getChildByName("Light").active=!1;else{i.getChildByName("Light").active=!0;let e=i.getChildByName("Light"),t=e.getChildByName("Line");4==o?(e.particleSystem.startColorConstant=this.rare4Color.clone(),t.particleSystem.startColorConstant=this.rare4Color.clone()):(e.particleSystem.startColorConstant=this.rare5Color.clone(),t.particleSystem.startColorConstant=this.rare5Color.clone())}}OnRemoveComponent(e,t){}GetOutLineColor(e){switch(e){case 1:case 2:return rc.hexTocolor("#676767");case 3:return rc.hexTocolor("#B76F03");case 4:return rc.hexTocolor("#B93066");case 5:return rc.hexTocolor("#FF5200")}return rc.hexTocolor("#676767")}GetMainColor(e){switch(e){case 1:return rc.hexTocolor("#B6B6FF");case 2:return rc.hexTocolor("#32A8E0");case 3:return rc.hexTocolor("#E1BD13");case 4:return rc.hexTocolor("#7722C7");case 5:return rc.hexTocolor("#FF5200")}return rc.hexTocolor("#B6B6FF")}}),this.systemMgr.AddSystem(new gp),this.systemMgr.AddSystem(new class extends lt{constructor(){super(...arguments),this.systemName="AutoAimSystem",this.vecCache=new Laya.Vector3(0,0,0),this.attVecCache=new Laya.Vector2(0,0),this.grounp=new dt([U.id,R.id]),this.grounp1=new dt([U.id,y.id,Iu.id]),this.vec2=new Laya.Vector2(0,0),this.vec3=new Laya.Vector2(0,0),this.turretVecCache=new Laya.Vector3(0,0,0),this.color=new Laya.Vector4(1,1,1,1),this.bulletScale=new Laya.Vector3(1,1,1),this.bulletEffetNeedPos=new Laya.Vector3(0,0,0),this.bulletNeedPos=new Laya.Vector3(0,0,0),this.pos1=new Laya.Vector3(0,0,0),this.startPoint=new Laya.Vector2(0,1),this.needRot=new Laya.Vector3(0,0,0)}Init(){}Update(){}FixedUpdate(){var t=this.world.GetEntitysByMatcher(this.grounp),i=this.world.GetEntitysByMatcher(this.grounp1);for(let e=0;e<i.length;e++){let n=i[e],s=n.GetComponent(U);if(s.gunMode){0<s.shotCDTime&&(s.shotCDTime-=A.FixedTimeDelta);let i=n.GetComponent(M),e=n.GetComponent(v),o=n.GetComponent(Iu),t=n.GetComponent(y),a;if(-1!=(a=V.IsGameMode_Zombie()?V.GetNestUnit(i.pos,e.nowMapPos.x,e.nowMapPos.y,s.attackRange,t.createId,1):V.GetNestUnit(i.pos,e.nowMapPos.x,e.nowMapPos.y,s.attackRange,t.createId))){n.GetComponent(w).dir2FollowDir=!1;let t=this.world.GetEntityByID(a);if(t){var l=t.GetComponent(M);this.turretVecCache.x=l.pos.x-i.pos.x,this.turretVecCache.z=l.pos.z-i.pos.z,Laya.Vector3.normalize(this.turretVecCache,this.turretVecCache);let e=n.GetComponent(w);if(e.dir2.x=this.turretVecCache.x,e.dir2.y=this.turretVecCache.y,e.dir2.z=this.turretVecCache.z,o.t1-=A.FixedTimeDelta,o.t1<0){o.t1=o.attCD,this.bulletEffetNeedPos.x=0,this.bulletEffetNeedPos.y=0,this.bulletEffetNeedPos.z=0,this.bulletNeedPos.x=0,this.bulletNeedPos.y=0,this.bulletNeedPos.z=0,n.GetComponent(Qc).bulletCount+=1;l=n.GetComponent(M).rotation.y,l=(this.needRot.y=l,this.bulletScale.x=1,this.bulletScale.y=1,this.bulletScale.z=1,this.bulletEffetNeedPos.x=n.GetComponent(M).pos.x,this.bulletEffetNeedPos.y=n.GetComponent(M).pos.y+s.bullet0height,this.bulletEffetNeedPos.z=n.GetComponent(M).pos.z,this.bulletNeedPos.x=n.GetComponent(M).pos.x,this.bulletNeedPos.y=n.GetComponent(M).pos.y+s.bullet0height,this.bulletNeedPos.z=n.GetComponent(M).pos.z,S.VecRotate(this.startPoint,l));Laya.Vector2.scale(l,s.bullet0Dis,l),this.bulletEffetNeedPos.x-=l.x,this.bulletEffetNeedPos.z+=l.y;let t=O.CreatPrefabEntityUsePos(s.bullet0,this.bulletNeedPos,this.needRot,this.bulletScale);if(t.HasComponent(w.id)){let e=s.attackRange/t.GetComponent(w).speed;n.GetComponent(U).isSniperRifle&&(e=s.sniperRifleattRange/t.GetComponent(w).speed),t.GetComponent(kt).keepTime=e}if(null!=t.GetComponent(B).sp){let e=t.GetComponent(B).sp.particleSystem;e&&(e.startColorConstant.x=this.color.x,e.startColorConstant.y=this.color.y,e.startColorConstant.z=this.color.z,e.startColorConstant.w=this.color.w)}t.GetComponent(v).radius=+t.GetComponent(v).radius,t.GetComponent(C).dmg=o.amg,t.HasComponent(w.id)&&(Laya.Vector2.normalize(l,l),t.GetComponent(w).dir.x=-l.x,t.GetComponent(w).dir.z=l.y),t.GetComponent(C).creatorId=n.id}}}else n.GetComponent(w).dir2FollowDir=!0}}for(let e=0;e<t.length;e++){let s=t[e];if(!s.HasComponent(y.id)){let o=s.GetComponent(U);if(o.gunMode){0<o.shotCDTime&&(o.shotCDTime-=A.FixedTimeDelta),0<o.bulletLoadTime&&(o.bulletLoadTime-=A.FixedTimeDelta,s.GetComponent(Qc).nowState=1,o.bulletLoadTime<=0)&&(o.bulletLoadTime=0,Math.floor(100*Math.random())<o.superReload?(o.bulletCount-=o.superReloadCount,o.superReloadCount=o.bulletCount,o.bulletCount*=2,o.nowBulletCount=o.bulletCount,console.warn("超级装弹",o.bulletCount)):(o.bulletCount-=o.superReloadCount,o.nowBulletCount=o.bulletCount,o.superReloadCount=0),s.GetComponent(Qc).nowState=0),0<o.singleShotLoadingTime&&(o.singleShotLoadingTime-=A.FixedTimeDelta,o.singleShotLoadingTime<=0)&&(o.singleShotLoadingTime=0,Math.floor(100*Math.random())<o.superReload?(o.nowBulletCount+=2,o.superReloadCount+=1,o.bulletCount+=1,console.warn("超级装弹",o.bulletCount)):o.nowBulletCount+=1,o.nowBulletCount>=o.bulletCount?o.nowBulletCount=o.bulletCount:o.singleShotLoadingTime=o.bulletLoadCD/o.bulletCount),0<o.singleShotLoadingCDTime&&(o.singleShotLoadingCDTime-=A.FixedTimeDelta,o.singleShotLoadingCDTime<=0)&&(o.singleShotLoadingCDTime=0,h=o.bulletLoadCD/o.bulletCount,o.singleShotLoadingTime=h);let a=s.GetComponent(M),t=s.GetComponent(v),e=0,n=-1;n=V.IsGameMode_Zombie()?(0==s.GetComponent(E).team&&(e=1),V.GetNestUnit(a.pos,t.nowMapPos.x,t.nowMapPos.y,o.attackRange,s.id,e)):V.GetNestUnit(a.pos,t.nowMapPos.x,t.nowMapPos.y,o.attackRange,s.id);var r,h=s.GetComponent(E);if(-1==n&&(n=V.GetNestBoxItem(a.pos,t.nowMapPos.x,t.nowMapPos.y,o.attackRange,h)),k.shootMouseAim&&(n=-1),"Local"==h.netId){if(-1!=n){let e=this.world.GetEntityByID(n);this.vec3.x=e.GetComponent(M).pos.x-a.pos.x,this.vec3.y=e.GetComponent(M).pos.z-a.pos.z;var m=Laya.Vector2.scalarLength(this.vec3);if(-1!=o.aimingTargetId){let e=this.world.GetEntityByID(o.aimingTargetId);(!e||e.HasComponent(R.id)&&e.GetComponent(R).hp<=0)&&(o.aimingTargetId=-1)}m<o.attackRange&&!s.GetComponent(w).nowIsDragShootState&&1==s.GetComponent(R).attBtnState?-1==o.aimingTargetId&&(o.aimingTargetId=n):o.aimingTargetId=-1}else o.aimingTargetId=-1;if(V.IsGameMode_Zombie()||-1!=o.aimingTargetId&&(n=o.aimingTargetId),s.GetComponent(w).nowIsDragShootState){let e=1;"Effect_AimingTrajectory1"==s.GetComponent(U).bulletPathAimingEffect&&(e=2);m=V.GetCurrentDirection(e,a.rotation.y,a.pos,t,o.attackRange,s.id);if(-1!=m){let i=this.world.GetEntityByID(m);if(i)if(-1==o.aimingSpecialEffectId){var d=O.CreatPrefabEntityUsePos(N.Effect_BeingTargeted,new Laya.Vector3(0,.5,0));o.aimingSpecialEffectId=d.id}else{let e=i.GetComponent(M),t=this.world.GetEntityByID(o.aimingSpecialEffectId);t?(t.GetComponent(M).SetPos(e.pos),t.GetComponent(Mt).followTargetId!=i.id&&(t.GetComponent(B).sp.transform.localPositionX=t.GetComponent(M).pos.x,t.GetComponent(B).sp.transform.localPositionY=t.GetComponent(M).pos.y,t.GetComponent(B).sp.transform.localPositionZ=t.GetComponent(M).pos.z,t.GetComponent(Mt).followTargetId=i.id,t.GetComponent(Mt).isDestory=!1),t.GetComponent(B).render=!0):o.aimingSpecialEffectId=-1}else{let e=this.world.GetEntityByID(o.aimingSpecialEffectId);e?e.GetComponent(B).render=!1:o.aimingSpecialEffectId=-1}}else{let e=this.world.GetEntityByID(o.aimingSpecialEffectId);e?e.GetComponent(B).render=!1:o.aimingSpecialEffectId=-1}}else if(-1!=n){let t=this.world.GetEntityByID(n),i=t.GetComponent(M);if(t)if(-1==o.aimingSpecialEffectId){d=O.CreatPrefabEntityUsePos(N.Effect_BeingTargeted,new Laya.Vector3(0,.5,0));o.aimingSpecialEffectId=d.id}else if(s.GetComponent(w).nowIsDragShootState){let e=this.world.GetEntityByID(o.aimingSpecialEffectId);e?e.GetComponent(B).render=!1:o.aimingSpecialEffectId=-1}else{let e=this.world.GetEntityByID(o.aimingSpecialEffectId);e?(e.GetComponent(M).SetPos(i.pos),e.GetComponent(Mt).followTargetId!=t.id&&(e.GetComponent(B).sp.transform.localPositionX=e.GetComponent(M).pos.x,e.GetComponent(B).sp.transform.localPositionY=e.GetComponent(M).pos.y,e.GetComponent(B).sp.transform.localPositionZ=e.GetComponent(M).pos.z,e.GetComponent(Mt).followTargetId=t.id,e.GetComponent(Mt).isDestory=!1),e.GetComponent(B).render=!0):o.aimingSpecialEffectId=-1}else if(-1!=o.aimingSpecialEffectId){let e=this.world.GetEntityByID(o.aimingSpecialEffectId);e?e.GetComponent(B).render=!1:o.aimingSpecialEffectId=-1}}else if(-1!=o.aimingSpecialEffectId){let e=this.world.GetEntityByID(o.aimingSpecialEffectId);e?e.GetComponent(B).render=!1:o.aimingSpecialEffectId=-1}}if(s.HasComponent(Et.id)){if(k.shootMouseAim&&(n=-1,n=V.IsGameMode_Zombie()?(0==s.GetComponent(E).team&&(e=1),V.GetNestUnit(a.pos,t.nowMapPos.x,t.nowMapPos.y,o.attackRange,s.id,e)):V.GetNestUnit(a.pos,t.nowMapPos.x,t.nowMapPos.y,o.attackRange,s.id),u=s.GetComponent(E),-1==n&&(n=V.GetNestBoxItem(a.pos,t.nowMapPos.x,t.nowMapPos.y,o.attackRange,u))),-1!=n){var c,u=s.GetComponent(Et);if(u.triggerAtt&&0<u.triggerAttTime){s.GetComponent(w).dir2FollowDir=!1;let o=this.world.GetEntityByID(n);if(o){let e=o.GetComponent(M),t=s.GetComponent(w),i=o.GetComponent(w);!i||0==i.vec.x&&0==i.vec.y?(this.vec2.x=e.pos.x-a.pos.x,this.vec2.y=e.pos.z-a.pos.z,c=S.VecToAngle(this.vec2),c+=u.randomShootingAngle,c=S.AngleToDir(c),t.dir2.x=c.x,t.dir2.z=c.y):(this.pos1.x=e.pos.x,this.pos1.y=e.pos.y,this.pos1.z=e.pos.z,c=S.VecRotate(this.startPoint,e.rotation.y),p=u.predictiveShooting,Laya.Vector2.scale(c,p,c),this.pos1.x-=c.x,this.pos1.z+=c.y,this.vec2.x=this.pos1.x-a.pos.x,this.vec2.y=this.pos1.z-a.pos.z,p=S.VecToAngle(this.vec2),p=S.AngleToDir(p),t.dir2.x=p.x,t.dir2.z=p.y)}}else{s.GetComponent(w).dir2FollowDir=!1;let t=this.world.GetEntityByID(n);if(t){var p=t.GetComponent(M);this.vecCache.x=p.pos.x-a.pos.x,this.vecCache.z=p.pos.z-a.pos.z,Laya.Vector3.normalize(this.vecCache,this.vecCache);let e=s.GetComponent(w);e.dir2.x=this.vecCache.x,e.dir2.y=this.vecCache.y,e.dir2.z=this.vecCache.z}}}}else if(-1!=s.GetComponent(R).areYouDriving)s.GetComponent(w).dir2FollowDir=!0;else if(!s.GetComponent(w).nowIsDragShootState){let e=!1;if(-1!=n){if(V.IsGameMode_Zombie()?(e=!0,o.isSniperRifle&&(g=s.GetComponent(E),(n=-1)==(n=V.GetNestUnit(a.pos,t.nowMapPos.x,t.nowMapPos.y,o.attackRange,s.id))&&(n=V.GetNestBoxItem(a.pos,t.nowMapPos.x,t.nowMapPos.y,o.attackRange,g)),k.shootMouseAim&&(n=-1))):o.isSniperRifle?(s.GetComponent(w).dirFollowDirTime-=A.FixedTimeDelta,s.GetComponent(w).dirFollowDirTime<=0&&(s.GetComponent(w).dir2FollowDir=!0)):e=!0,e){s.GetComponent(w).dir2FollowDir=!1;let t=this.world.GetEntityByID(n);if(t){var g=t.GetComponent(M);this.vecCache.x=g.pos.x-a.pos.x,this.vecCache.z=g.pos.z-a.pos.z,Laya.Vector3.normalize(this.vecCache,this.vecCache);let e=s.GetComponent(w);e.dir2.x=this.vecCache.x,e.dir2.y=this.vecCache.y,e.dir2.z=this.vecCache.z,s.GetComponent(w).dirFollowDirTime=2}}}else k.shootMouseAim||(s.GetComponent(w).dirFollowDirTime-=A.FixedTimeDelta,s.GetComponent(w).dirFollowDirTime<=0&&(s.GetComponent(w).dir2FollowDir=!0))}if(s.HasComponent(ut.id)&&(s.GetComponent(w).dir2FollowDir=!0),"Local"==h.netId&&s.HasComponent(R.id)){let e=s.GetComponent(R),i=s.GetComponent(L);if(1==e.skillBtnState&&""!=i.drapSkillId){if(s.GetComponent(w).nowIsDragShootState){let t=!1,e=i.skillList.filter(e=>e.skillID==i.drapSkillId);if(0<e.length&&(e[0].isItem?(r=K.DataModule().GetLocal().item.Get(i.drapSkillId))&&(t=r.DragRelease):(r=K.DataModule().GetLocal().skill.Get(i.drapSkillId))&&(t=r.DragRelease)),-1!=i.skillDrapEffectId){let e=this.world.GetEntityByID(i.skillDrapEffectId);e&&t?e.GetComponent(B).render=!0:i.skillDrapEffectId=-1}else if(t){let e=O.CreatPrefabEntityUsePos(N.Effect_AimingTrajectory,new Laya.Vector3(a.pos.x,2,a.pos.z));e.GetComponent(Mt).followTargetId=s.id,e.GetComponent(Mt).isDestory=!1,e.GetComponent(M).scale.x=.5,e.GetComponent(M).scale.z=10,i.skillDrapEffectId=e.id}}else if(-1!=i.skillDrapEffectId){let e=this.world.GetEntityByID(i.skillDrapEffectId);e?e.GetComponent(B).render=!1:i.skillDrapEffectId=-1}}else if(-1!=i.skillDrapEffectId){let e=this.world.GetEntityByID(i.skillDrapEffectId);e?e.GetComponent(B).render=!1:i.skillDrapEffectId=-1}if(1==e.attBtnState){var f=s.GetComponent(M);if(s.GetComponent(w).nowIsDragShootState||o.isSniperRifle){if(V.IsGameMode_Zombie()&&o.isSniperRifle&&!s.GetComponent(w).nowIsDragShootState){var _=N.Effect_AttackRange;if(-1!=o.attackRangeId){let e=this.world.GetEntityByID(o.attackRangeId);e?(e.GetComponent(B).render=!0,e.GetComponent(M).scale.x=2*o.attackRange,e.GetComponent(M).scale.z=2*o.attackRange):o.attackRangeId=-1}else{let e=O.CreatPrefabEntityUsePos(_,new Laya.Vector3(f.pos.x,2,f.pos.z));e.GetComponent(Mt).followTargetId=s.id,e.GetComponent(Mt).isDestory=!1,e.GetComponent(M).scale.x=2*o.attackRange,e.GetComponent(M).scale.z=2*o.attackRange,o.attackRangeId=e.id}}else if(-1!=o.attackRangeId){let e=this.world.GetEntityByID(o.attackRangeId);e?e.GetComponent(B).render=!1:o.attackRangeId=-1}_=o.bulletPathAimingEffect;if(-1!=o.attSpecialRangeId){let e=this.world.GetEntityByID(o.attSpecialRangeId);e?(e.GetComponent(B).render=!0,_==N.Effect_AimingTrajectory&&(e.GetComponent(M).scale.z=o.attackRange)):o.attSpecialRangeId=-1}else{let e=O.CreatPrefabEntityUsePos(_,new Laya.Vector3(f.pos.x,2,f.pos.z));e.GetComponent(Mt).followTargetId=s.id,_==N.Effect_AimingTrajectory?e.GetComponent(M).scale.z=o.attackRange:(e.GetComponent(M).scale.x=2*o.attackRange,e.GetComponent(M).scale.z=2*o.attackRange),e.GetComponent(Mt).isDestory=!1,o.attSpecialRangeId=e.id}}else{var I=N.Effect_AttackRange;if(-1!=o.attackRangeId){let e=this.world.GetEntityByID(o.attackRangeId);e?(e.GetComponent(B).render=!0,e.GetComponent(M).scale.x=2*o.attackRange,e.GetComponent(M).scale.z=2*o.attackRange):o.attackRangeId=-1}else{let e=O.CreatPrefabEntityUsePos(I,new Laya.Vector3(f.pos.x,2,f.pos.z));e.GetComponent(Mt).followTargetId=s.id,e.GetComponent(Mt).isDestory=!1,e.GetComponent(M).scale.x=2*o.attackRange,e.GetComponent(M).scale.z=2*o.attackRange,o.attackRangeId=e.id}I=o.bulletPathAimingEffect;if(-1!=o.attSpecialRangeId){let e=this.world.GetEntityByID(o.attSpecialRangeId);e?(e.GetComponent(B).render=!0,I==N.Effect_AimingTrajectory&&(e.GetComponent(M).scale.z=o.attackRange)):o.attSpecialRangeId=-1}else{let e=O.CreatPrefabEntityUsePos(I,new Laya.Vector3(f.pos.x,2,f.pos.z));e.GetComponent(Mt).followTargetId=s.id,I==N.Effect_AimingTrajectory?e.GetComponent(M).scale.z=o.attackRange:(e.GetComponent(M).scale.x=2*o.attackRange,e.GetComponent(M).scale.z=2*o.attackRange),e.GetComponent(Mt).isDestory=!1,o.attSpecialRangeId=e.id}}if(o.isSniperRifle?!o.IsCanShot():!(0<o.nowBulletCount&&o.bulletLoadTime<=0))-1!=o.attackRangeId&&(this.world.GetEntityByID(o.attackRangeId).GetComponent(B).sp.getChildByName("root").meshRenderer.materials[0].albedoColor=rc.hexTocolor("#BF3958",118)),-1!=o.attSpecialRangeId&&(this.world.GetEntityByID(o.attSpecialRangeId).GetComponent(B).sp.getChildByName("root").meshRenderer.materials[0].albedoColor=rc.hexTocolor("#BF3958",118));else{if(-1!=o.attackRangeId){let e=this.world.GetEntityByID(o.attackRangeId).GetComponent(B).sp.getChildByName("root");e.meshRenderer.materials[0].albedoColor=rc.hexTocolor("#FFFFFF",136),e.meshRenderer.materials[0].albedoIntensity=1,e.meshRenderer.materials[0].renderMode=2}if(-1!=o.attSpecialRangeId){let e=this.world.GetEntityByID(o.attSpecialRangeId).GetComponent(B).sp.getChildByName("root");e.meshRenderer.materials[0].albedoColor=rc.hexTocolor("#FFFFFF",136),e.meshRenderer.materials[0].albedoIntensity=1,e.meshRenderer.materials[0].renderMode=2}}}else{if(-1!=o.attackRangeId){let e=this.world.GetEntityByID(o.attackRangeId);e?e.GetComponent(B).render=!1:o.attackRangeId=-1}if(-1!=o.attSpecialRangeId){let e=this.world.GetEntityByID(o.attSpecialRangeId);e?e.GetComponent(B).render=!1:o.attSpecialRangeId=-1}}}}}}}LateUpdate(){}Destroy(){}OnAddComponent(e,t){}OnRemoveComponent(e,t){}}),this.systemMgr.AddSystem(new fp),this.systemMgr.AddSystem(new vt);let e=new sc;e.elementCreator=this.gameElementCreator,this.systemMgr.AddSystem(e),this.systemMgr.AddSystem(new tg),this.systemMgr.AddSystem(new cc),this.systemMgr.AddSystem(new Su),this.systemMgr.AddSystem(new class extends lt{constructor(){super(...arguments),this.systemName="AISystem",this.grounp=new dt([Et.id,gi.id]),this.timeOffset=0,this.vecCache=new Laya.Vector3(0,0,0)}Init(){}Update(){}RandomGetTarget(t,o){let i=this.world.GetEntitys([R.id]),a=(i=i.sort(function(e,t){let i=Laya.Vector3.distance(t.GetComponent(M).pos,o)-Laya.Vector3.distance(e.GetComponent(M).pos,o);return i=0==i?t.id-e.id:i}),[]);for(let e=0;e<i.length;e++)i[e].id!=t&&a.push(i[e].id);return 0==a.length?-1:a[0]}FixedUpdate(){var a=A.FixedTimeDelta,t=this.world.GetEntitysByMatcher(this.grounp);for(let e=0;e<t.length;e++){let i=t[e],o=i.GetComponent(Et);if(i.GetComponent(R).hp<=0&&(i.GetComponent(R).attBtnState=0),o.destory)i.RemoveComponent(Et);else{if(o.time-=a,o.time<0){o.time=1;let e=this.world.GetEntityByID(o.brain);""!=o.thinkState&&o.enable&&e.GetComponent(F).ChangeState(o.thinkState)}let t=i.GetComponent(R);if(o.triggerAtt){let e=i.GetComponent(U);if(0<o.triggerAttTime)o.triggerAttTime-=a,t.attBtnState=1,e.isSniperRifle?(i.GetComponent(U).attackRange<2*i.GetComponent(U).readOnlyAttackRange&&(i.GetComponent(U).attackRange+=.25,i.GetComponent(U).sniperRifleattRange+=.25),i.GetComponent(xt).SetAnimation("InfantryGun_Idle",0)):(e.IsCanShot()&&1==i.GetComponent(F).step&&e.isAR&&(i.GetComponent(F).step=0),t.StartTriggerAtt(),e.isAR||(t.attBtnState=0));else{if(t.attBtnState=0,e.isSniperRifle){let e=i.GetComponent(w);i.GetComponent(U).attackRange=i.GetComponent(U).readOnlyAttackRange,e.ChangeBanDir(-1),t.StartTriggerAtt()}o.triggerAtt=!1}}else t.attBtnState=0}}}LateUpdate(){}Destroy(){}OnAddComponent(i,o){if(o.componentId==Et.id){let e=o,t=this.world.CreatEntity();t.AddComponent(F).entity1Id=i.id,e.brain=t.id,e.time=this.timeOffset;o=K.DataModule().GetLocal().ai.Get(e.aiId),i=(e.attTimeRangeMin=o.attTimeRangeMin,e.attTimeRangeMax=o.attTimeRangeMax,e.attPathTime=o.attPathTime,e.attRotateSpeed=o.attRotateSpeed,i.GetComponent(U));e.triggerAttRange=i?i.readOnlyAttackRange:o.triggerAttRange,e.skillTimeRangeMin=o.skillTimeRangeMin,e.skillTimeRangeMax=o.skillTimeRangeMax,e.skillOffset=o.skillOffset,e.eatBuffItemFirst=o.eatBuffItemFirst,e.escapHp=150,e.mustFightCount=0,e.attTimeCd=o.attTimeCd,e.AiCharacter=o.AiCharacter,e.mustFightCount=o.mustFightCount,e.escapNappChance=o.escapNappChance,e.randomShootingAngleRange=o.randomShootingAngle,e.predictiveShooting=o.predictiveShooting,e.triggerAttTime=e.attTimeRangeMin+(e.attTimeRangeMax-e.attTimeRangeMin)*q.Random(),e.useSkillTime=e.skillTimeRangeMin+(e.skillTimeRangeMax-e.skillTimeRangeMin)*q.Random(),this.timeOffset+=.04,1<this.timeOffset&&(this.timeOffset=0),t.GetComponent(F).ChangeState(e.StartState)}}OnRemoveComponent(e,i){if(i.componentId==Et.id){let e=i,t=this.world.GetEntityByID(e.brain);t&&t.Destory()}}}),this.systemMgr.AddSystem(new gu),this.systemMgr.AddSystem(new Dp),this.systemMgr.AddSystem(new class extends lt{constructor(){super(...arguments),this.systemName="HudSystem",this.hpgrounp=new dt([D.id]),this.arrowgrounp=new dt([Ft.id]),this.triggerHudGrounp=new dt([Bp.id]),this.vec4=new Laya.Vector4,this.vec5=new Laya.Vector4,this.vec5_1=new Laya.Vector3,this.vec5_2=new Laya.Vector3,this.vec6=new Laya.Vector4,this.vec6_1=new Laya.Vector3,this.vec6_2=new Laya.Vector3,this.vec7=new Laya.Vector4,this.vec7_1=new Laya.Vector3,this.vec7_2=new Laya.Vector3,this.vec3_1=new Laya.Vector3,this.vec3_2=new Laya.Vector3,this.bulletCount=0,this.vec2_1=new Laya.Vector2(1,1),this.freshIndex=0}Init(){K.UIModule().ShowUI(Lp.UIName),this.ui=K.UIModule().GetUI(Lp.UIName),this.inGameUI=K.UIModule().GetUI(Uf.UIName)}Update(){Di.PreformanceRecord("HudSystem_Update",!0),this.ui&&(this.FreshHpBar(),this.FreshArrowHud()),Di.PreformanceRecord("HudSystem_Update",!1)}FixedUpdate(){}LateUpdate(){}Destroy(){K.UIModule().HideUI(Lp.UIName)}FreshHpBar(){let o=this.hpgrounp.GetEntitys(this.world),a=this.world.GetSingleCompoent($i);if(a)for(let t=0;t<o.length;t++){let i=o[t],e=i.GetComponent(M),n=o[t].GetComponent(D);if(!n.banHud&&e.isInCameraArea?n.isShow=!0:n.isShow=!1,n.isShow){if(n.isGetUi||(n.ui=this.ui.GetHpBar(),n.isGetUi=!0,n.ui.m_c1.setSelectedPage(n.useUICtrl),n.ui.m_playerNametxt.text=n.playerName,""==n.chinaState?n.ui.m_state.visible=!1:(n.ui.m_state.visible=!0,s=x.GetFairyGUI_Icon("State_"+n.chinaState),n.ui.m_state.url!=s&&(n.ui.m_state.url=s)),n.ui.m_playerNametxt.color=n.color,n.freshUI=!0,a.camera.worldToViewportPoint(n.nodeSp.transform.position,this.vec4),n.ui.setXY(Math.floor(this.vec4.x),Math.floor(this.vec4.y)),n.red=!0),n.switchHpState&&(n.ui.m_c1.setSelectedPage(n.useUICtrl),n.switchHpState=!1),n.nodeSp&&(a.camera.worldToViewportPoint(n.nodeSp.transform.position,this.vec4),this.vec3_1.x=n.ui.x,this.vec3_1.y=n.ui.y,this.vec3_1.z=0,this.vec3_2.x=this.vec4.x,this.vec3_2.y=this.vec4.y,this.vec3_2.z=0,n.useLerp?(Laya.Vector3.lerp(this.vec3_1,this.vec3_2,20*A.TimeDeltaNoScale,this.vec3_1),n.ui.setXY(Math.floor(this.vec3_1.x),Math.floor(this.vec3_1.y))):n.ui.setXY(Math.floor(this.vec4.x),Math.floor(this.vec4.y)),n.useUICtrl==D.My)){let e=n.exp/n.maxExp;e<.01&&(e=.01),this.ui.SetImageFillAmount(n.ui.m_exbar,S.Lerp(n.ui.m_exbar.fillAmount,e,3*A.TimeDelta))}if(n.freshUI){n.freshUI=!1,n.red&&(n.red=!1,n.isRedName?(n.ui.m_playerNametxt.color="#F23333",n.ui.m_revengeIcon.visible=!0):(n.ui.m_playerNametxt.color=n.color,n.ui.m_revengeIcon.visible=!1)),n.reloadState&&n.playReloadAni&&n.useUICtrl==D.My&&(n.playReloadAni=!1,n.ui.m_nowBullets.m_addBullet.visible=!0,n.ui.m_danJiaHint.visible=!0),n.isChangeGun&&(K.AudioModule().Stop(x.GetSound2("ReloadLoop")),n.isChangeGun=!1);var s=n.level.toString(),l=(s!=n.ui.m_LevelTxt.text&&(n.ui.m_LevelTxt.text=s,n.ui.m_levelUpAni.play(),this.ui.SetImageFillAmount(n.ui.m_exbar,1)),Math.ceil(n.hp));n.ui.m_hptxt.text=""+l;let t=n.hp/n.maxhp;switch(t<.01&&(t=.01),n.useUICtrl){case D.My:if(this.ui.SetImageFillAmount(n.ui.m_blueHp,t),n.ui.m_nowBullets.m_nowBullets.text=n.nowBulletCount+"/"+n.bulletCount,0!=n.nowBulletCount)if(n.singleShotLoading){if(n.nowBulletCount==n.bulletCount){n.ui.m_danJiaHint.visible=!1;for(let i=0;i<10;i++){let e=i+1,t=n.ui.m_danjia.getChild("m"+e);t&&(t.visible=!1)}}}else if(n.nowBulletCount==n.bulletCount){n.ui.m_nowBullets.m_addBullet.visible=!1,n.ui.m_danJiaHint.visible=!1;for(let i=0;i<10;i++){let e=i+1,t=n.ui.m_danjia.getChild("m"+e);t&&(t.visible=!1)}n.reloadState&&(K.AudioModule().Stop(x.GetSound2("ReloadLoop")),K.AudioModule().PlayOnce(x.GetSound2("ReloadOk")),n.reloadState=!1)}var r=n.bulletCount<=10?n.bulletCount:10;n.ui.m_danjia.m_list.itemRenderer=Laya.Handler.create(this,function(e,t){var i,o,a;n.bulletCount<=10?e>=Math.abs(n.nowBulletCount-n.bulletCount)?(t.m_bar.visible=!0,this.ui.SetImageFillAmount(t.m_bar,1),n.singleShotReloadState&&e==Math.abs(n.nowBulletCount-n.bulletCount)&&n.singleShotLoading&&(t.m_t0.play(),K.AudioModule().PlayOnce(x.GetSound2("Reload")),n.singleShotReloadState=!1)):t.m_bar.visible=!1:(i=n.bulletCount/10,o=n.nowBulletCount%i,a=Math.floor(n.nowBulletCount/i),0==o?e<n.bulletCount/i-a?t.m_bar.visible=!1:(t.m_bar.visible=!0,this.ui.SetImageFillAmount(t.m_bar,1)):e<n.bulletCount/i-a-1?t.m_bar.visible=!1:e==n.bulletCount/i-a-1?(t.m_bar.visible=!0,this.ui.SetImageFillAmount(t.m_bar,o/i)):(t.m_bar.visible=!0,this.ui.SetImageFillAmount(t.m_bar,1)))},null,!1),n.ui.m_danjia.m_list.numItems=r;break;case D.Enemy:n.ui.m_nowBullets.m_nowBullets.text=n.nowBulletCount+"/"+n.bulletCount,this.ui.SetImageFillAmount(n.ui.m_redHp,t),0==n.nowBulletCount?(n.ui.m_nowBullets.m_addBullet.visible=!0,n.ui.m_danJiaHint.visible=!0):(n.ui.m_nowBullets.m_addBullet.visible=!1,n.ui.m_danJiaHint.visible=!1);break;case D.Box:this.ui.SetImageFillAmount(n.ui.m_YellowHp,t);break;case D.Friend:this.ui.SetImageFillAmount(n.ui.m_greenHp,t);break;case D.EnemyTurret:this.ui.SetImageFillAmount(n.ui.m_redHp,t);break;case D.MyTurret:this.ui.SetImageFillAmount(n.ui.m_blueHp,t);break;case D.Zombie_Normal:this.ui.SetImageFillAmount(n.ui.m_Zombie_Normal,t);break;case D.Zombie_Elite:this.ui.SetImageFillAmount(n.ui.m_Zombie_Elite,t);break;case D.Zombie_Boss:this.ui.SetImageFillAmount(n.ui.m_Zombie_Boss,t);break;case D.AddSkill:case D.AddItem:n.ui.m_Icon.url=x.GetIcon("Icon_"+i.GetComponent(y).addBuff.split("_")[1]);break;case D.Bunker:{let e=i.GetComponent(pt);n.ui.m_LevelTxt.text=e.level.toString(),this.ui.SetImageFillAmount(n.ui.m_bunkerBar,t),n.ui.m_bunkerNum.text=e.residentIDList.length+"/"+e.peopleMaxNum}break;case D.Car:this.ui.SetImageFillAmount(n.ui.m_carBar,t);r=i.GetComponent(pi).carRuntime/120;n.ui.m_dianLiangBuZu.visible=!(.01<r),this.ui.SetImageFillAmount(n.ui.m_dianLiangBar,r);break;case D.ZombieFactory:this.ui.SetImageFillAmount(n.ui.m_ZombieFactoryBar,t);break;case D.AddWeapon:var h=i.GetComponent(y).addBuff.replace("Weapon","");n.ui.m_Icon.url=x.GetIcon("Weapon_"+h);break;case D.Summon:this.ui.SetImageFillAmount(n.ui.m_Summon,t),n.ui.m_FuSheLevel.text="Lv"+i.GetComponent(ut).level.toString()}}}else n.isGetUi&&(this.ui.PutHpBar(n.ui),n.ui=null,n.isGetUi=!1);if(0<n.showChangedHp.length){for(let e=0;e<n.showChangedHp.length;e++){n.showChangedHp[e].split("_")[0],parseInt(n.showChangedHp[e].split("_")[1]);var m=this.ui.ShowHpChanged(n.showChangedHp[e]);n.hpChangedList.push(m)}n.showChangedHp=[]}if(0<n.hpChangedList.length){l=i.GetComponent(D);this.vec3_1.setValue(l.hpChangeUIOffsetPos.x,l.hpChangeUIOffsetPos.y,l.hpChangeUIOffsetPos.z),Laya.Vector3.add(this.vec3_1,i.GetComponent(B).sp.transform.localPosition,this.vec3_1),a.camera.worldToViewportPoint(this.vec3_1,this.vec4);for(let t=0;t<n.hpChangedList.length;t++){let e=n.hpChangedList[t];e.visible?(e.x=this.vec4.x,e.y=this.vec4.y):n.hpChangedList.splice(t,1)}}}}GetValue(e){return"NaN"==e||"-NaN"==e?0:-1!=e.indexOf("-")?parseInt(e.split("-")[1]):Math.abs(parseInt(e))}equitBullctAni(o,e,t,i){var a,n,s=e/(a=10<=t?10:t)*1e3;K.AudioModule().PlayOnce(x.GetSound2("ReloadLoop"));for(let i=0;i<10;i++){let e=i+1,t=o.getChild("m"+e);t.visible=!1,t.visible=!1,i<a&&(t.m_bar.visible=!1,this.ui.SetImageFillAmount(t.m_bar,.01),t.visible=!0,0==(n=s*e)?(t.m_bar.visible=!0,this.ui.SetImageFillAmount(t.m_bar,1),t.m_t0.play()):Laya.timer.once(n,this,function(){t&&(t.m_bar.visible=!0,this.ui.SetImageFillAmount(t.m_bar,1),t.m_t0.play())}))}}renderListItem(e,t){this.bulletCount}FreshArrowHud(){let l=this.arrowgrounp.GetEntitys(this.world),t=this.world.GetSingleCompoentEntity($i);if(t){let a=t.GetComponent($i),n=t.GetComponent(M),e=this.freshIndex+2;e>l.length&&(e=l.length);for(let i=this.freshIndex;i<e;i++){let e=l[i].GetComponent(M),t=l[i].GetComponent(Ft);this.vec2_1.x=e.pos.x-n.pos.x,this.vec2_1.y=e.pos.z-n.pos.z,Laya.Vector2.scalarLength(this.vec2_1)<t.showRange?t.isShow=!0:t.isShow=!1,t.ban&&(t.isShow=!1)}this.freshIndex=e,this.freshIndex>=l.length&&(this.freshIndex=0);let s=[];for(let o=0;o<l.length;o++){let t=l[o].GetComponent(M),i=l[o].GetComponent(Ft);if(i.ui&&!i.ui.displayObject&&(i.isGetUi=!1,i.ui=null),i.isShow){this.vec2_1.setValue(0,0),i.isGetUi?(this.vec2_1.x=i.ui.x,this.vec2_1.y=i.ui.y):(i.ui=this.ui.GetArrowHud(),i.isGetUi=!0,i.ui.m_c1.setSelectedPage(i.type),i.ui.setScale(i.scale,i.scale),a.camera.worldToViewportPoint(t.pos,this.vec4),this.vec2_1.x=this.vec4.x,this.vec2_1.y=this.vec4.y,"Quest"==i.type&&(i.ui.m_QuestShow.play(),i.isFirstRun&&i.ui.setScale(2*i.scale,2*i.scale))),i.iconUrl&&i.ui.m_icon.url!=i.iconUrl&&(i.ui.m_icon.url=i.iconUrl),a.camera.worldToViewportPoint(t.pos,this.vec4),this.vec3_1.x=this.vec2_1.x,this.vec3_1.y=this.vec2_1.y,this.vec3_1.z=0,this.vec3_2.x=this.vec4.x,this.vec3_2.y=this.vec4.y,this.vec3_2.z=0,Laya.Vector3.lerp(this.vec3_1,this.vec3_2,.5,this.vec3_1),this.vec2_1.x=this.vec3_1.x,this.vec2_1.y=this.vec3_1.y;let e=this.LimitPos(this.vec2_1);var r;i.hudShowEffect_Progress=Math.min(1,i.hudShowEffect_Progress+2*A.TimeDelta),i.hudShowEffect_Progress<1&&(e=!0,0<i.hudShowEffect_Progress&&i.ui.setScale(S.Lerp(i.scale,i.scale,10*A.TimeDelta),S.Lerp(i.scale,i.scale,10*A.TimeDelta))),this.vec2_1.x=S.Lerp(i.hudShowEffect_FromPos.x,this.vec2_1.x,Math.max(0,i.hudShowEffect_Progress)),this.vec2_1.y=S.Lerp(i.hudShowEffect_FromPos.y,this.vec2_1.y,Math.max(0,i.hudShowEffect_Progress)),i.ui.setXY(S.Lerp(i.ui.x,this.vec2_1.x+.1*o,1),S.Lerp(i.ui.y,this.vec2_1.y,1)),e&&(this.vec2_1.x=t.pos.x-n.pos.x,this.vec2_1.y=t.pos.z-n.pos.z,r=45-(r=S.VecToAngle(this.vec2_1)),1<Math.abs(i.ui.m_arrow.rotation-r)&&(i.ui.m_arrow.rotation=r),i.ui.m_c1.selectedPage!=i.type&&i.ui.m_c1.setSelectedPage(i.type)),i.ui.visible=e,s.push(i.ui)}else i.isGetUi&&(this.ui.PutArrowHud(i.ui),i.ui=null,i.isGetUi=!1)}for(let e=0;e<10;e++)this.LerpArrowHUD(s)}}LerpArrowHUD(a){let n=new Laya.Vector2;for(let o=0;o<a.length;o++)for(let i=o+1;i<a.length;i++){let e=a[o],t=a[i];n.x=t.x-e.x,n.y=t.y-e.y;var s=1.1*(e.scaleX*e.width/2+t.scaleX*t.width/2),l=n.x*n.x+n.y*n.y;l<s*s&&(s=(s-Math.sqrt(l))/2,Laya.Vector2.normalize(n,n),this.vec2_1.setValue(t.x+s*n.x,t.y+s*n.y),t.setXY(this.vec2_1.x+.1*i,this.vec2_1.y),this.vec2_1.setValue(e.x-s*n.x,e.y-s*n.y),e.setXY(this.vec2_1.x+.1*o,this.vec2_1.y))}for(let t=0;t<a.length;t++){let e=a[t];this.vec2_1.setValue(e.x,e.y),this.LimitPos(this.vec2_1,.5),e.setXY(this.vec2_1.x,this.vec2_1.y)}}LimitPos(e,t=1){let i=!1;return e.y<40&&(e.y=S.Lerp(e.y,40,t),i=!0),680<e.y&&(e.y=S.Lerp(e.y,680,t),i=!0),T.IsIPhoneXScreen?(e.x<40&&(e.x=S.Lerp(e.x,40,t),i=!0),1440<e.x&&(e.x=S.Lerp(e.x,1440,t),i=!0)):(e.x<40&&(e.x=S.Lerp(e.x,40,t),i=!0),1240<e.x&&(e.x=S.Lerp(e.x,1240,t),i=!0)),i}FreshTriggerHud(){let o=this.triggerHudGrounp.GetEntitys(this.world),a=this.world.GetSingleCompoent($i);if(a)for(let i=0;i<o.length;i++){let e=o[i],t=o[i].GetComponent(Bp);t.banHud&&(t.isShow=!1),t.isShow&&this.inGameUI.view&&(t.carUI=this.inGameUI.view.m_CarCom,t.tentUI=this.inGameUI.view.m_TentCom,t.doorUI=this.inGameUI.view.m_DoorCom,e.id==V.triggerCarId&&(e.GetComponent(M),a.camera.worldToViewportPoint(t.nodeSp.transform.position,this.vec5),this.vec5_1.x=t.carUI.x,this.vec5_1.y=t.carUI.y,this.vec5_1.z=0,this.vec5_2.x=this.vec5.x,this.vec5_2.y=this.vec5.y,this.vec5_2.z=0,Laya.Vector3.lerp(this.vec5_1,this.vec5_2,30*A.TimeDeltaNoScale,this.vec5_1),t.carUI.x=this.vec5_1.x,t.carUI.y=this.vec5_1.y),e.id==V.triggerTentId&&(a.camera.worldToViewportPoint(t.nodeSp.transform.position,this.vec6),this.vec6_1.x=t.tentUI.x,this.vec6_1.y=t.tentUI.y,this.vec6_1.z=0,this.vec6_2.x=this.vec6.x,this.vec6_2.y=this.vec6.y,this.vec6_2.z=0,Laya.Vector3.lerp(this.vec6_1,this.vec6_2,30*A.TimeDeltaNoScale,this.vec6_1),t.tentUI.x=this.vec6_1.x,t.tentUI.y=this.vec6_1.y),e.id==V.triggerDoorId&&(a.camera.worldToViewportPoint(t.nodeSp.transform.position,this.vec7),this.vec7_1.x=t.doorUI.x,this.vec7_1.y=t.doorUI.y,this.vec7_1.z=0,this.vec7_2.x=this.vec7.x,this.vec7_2.y=this.vec7.y,this.vec7_2.z=0,Laya.Vector3.lerp(this.vec7_1,this.vec7_2,30*A.TimeDeltaNoScale,this.vec7_1),t.doorUI.x=this.vec7_1.x,t.doorUI.y=this.vec7_1.y))}}OnAddComponent(t,i){if(i.componentId==D.id){let e=i;e.nodeSp=this.findChild(t.GetComponent(B).sp,e.nodeName)}if(i.componentId==Bp.id){let e=i;e.nodeSp=this.findChild(t.GetComponent(B).sp,e.nodeName)}}OnRemoveComponent(e,t){if(t.componentId==D.id){let e=t;e.isGetUi&&(this.ui.PutHpBar(e.ui),e.ui=null,e.isGetUi=!1)}if(t.componentId==Ft.id){let e=t;e.isGetUi&&e.ui.displayObject&&(this.ui.PutArrowHud(e.ui),e.ui=null,e.isGetUi=!1)}}findChild(e,t){return e.name==t?e:this._findChild(e._children,t)}_findChild(e,t){for(var i=[],o=0;o<e.length;o++){var a=e[o];if(a.name==t)return a;a.numChildren&&(i=i.concat(a._children))}return i.length?this._findChild(i,t):null}}),this.systemMgr.AddSystem(new Ep),this.systemMgr.AddSystem(new class extends lt{constructor(){super(...arguments),this.systemName="FogSystem",this.grounp=new dt([Ap.id]),this.unitGrounp=new dt([R.id]),this.vec=new Laya.Vector2(0,0),this.fogfirstDmg=5,this.fogotherDmgPer=.05}Init(){V.fogPos.x=0,V.fogPos.y=0,V.fogPos.z=0,V.fogRange=1e4;var e=K.DataModule().GetLocal().gameRule.Get("InGameFogDmg");this.fogfirstDmg=e.F1,this.fogotherDmgPer=.01*e.F2}Update(){}FixedUpdate(){var o=this.grounp.GetEntitys(this.world);for(let i=0;i<o.length;i++){let e=o[i],a=e.GetComponent(Ap),n=(V.banAllAttAndFog||V.banFogMove||(a.nowRange-=a.speed*A.FixedTimeDelta),a.nowRange<a.minRange&&(a.nowRange=a.minRange),V.fogRange=a.nowRange,e.GetComponent(M)),t=a.nowRange/a.baseRange;if(n.scale.x=t,n.scale.y=t,n.scale.z=t,a.time-=A.FixedTimeDelta,a.time<0){a.time=1;var s=this.unitGrounp.GetEntitys(this.world);for(let o=0;o<s.length;o++){let e=s[o],t=e.GetComponent(M),i=e.GetComponent(R);this.vec.x=t.pos.x-n.pos.x,this.vec.y=t.pos.z-n.pos.z,Laya.Vector2.scalarLength(this.vec)>a.nowRange?(H.HitTarget(e.id,-1,this.fogfirstDmg+i.fogHitedTimes*this.fogotherDmgPer*i.maxHp,!0),i.fogHitedTimes++):i.fogHitedTimes=0}}}}LateUpdate(){}Destroy(){}OnAddComponent(i,o){if(o.componentId==Ap.id){let e=i.GetComponent(Ap),t=(e.nowRange=55,i.GetComponent(M));"BattleScene1"==V.nowScene&&(e.nowRange=55,t.pos.x=-100.58,t.pos.z=100.64),"BattleScene2"==V.nowScene&&(e.nowRange=55,t.pos.x=-100.58,t.pos.z=100.64),"BattleScene3"==V.nowScene&&(e.nowRange=55,t.pos.x=-100.58,t.pos.z=100.64),"BattleScene4"==V.nowScene&&(e.nowRange=65,t.pos.x=-100.55,t.pos.z=98.98,e.minRange=10),"BattleScene5"==V.nowScene&&(e.nowRange=65,t.pos.x=-101.63,t.pos.z=101.45,e.minRange=6),"BattleSceneNian"==V.nowScene&&(e.nowRange=35,t.pos.x=-100.58,t.pos.z=100.64);o=e.nowRange/e.baseRange;t.scale.x=o,t.scale.y=o,t.scale.z=o,V.fogPos.x=t.pos.x,V.fogPos.y=0,V.fogPos.z=t.pos.z,V.fogRange=e.nowRange}}OnRemoveComponent(e,t){}}),this.systemMgr.AddSystem(new class extends lt{constructor(){super(...arguments),this.systemName="ChainSystem",this.grounp=new dt([Np.id]),this.vec2=new Laya.Vector2(0,0)}Init(){}Update(){var r,h,t=this.world.GetEntitysByMatcher(this.grounp);for(let e=0;e<t.length;e++){let a=t[e],n=a.GetComponent(Np),s=this.world.GetEntityByID(n.soureId),l=this.world.GetEntityByID(n.targetId);if(s&&l){let e=s.GetComponent(B),t=l.GetComponent(B),i=a.GetComponent(B),o=!1;(o=!!(e.render&&t.render||t.render&&s.HasComponent(R.id)&&-1!=s.GetComponent(R).areYouDriving)||o)?(i.render=!0,this.vec2.x=t.sp.transform.localPositionX-e.sp.transform.localPositionX,this.vec2.y=t.sp.transform.localPositionZ-e.sp.transform.localPositionZ,r=Laya.Vector2.scalarLength(this.vec2),h=S.VecToAngle(this.vec2),i.sp.transform.localRotationEulerY=h,i.sp.transform.localScaleZ=r,i.sp.transform.localPositionX=e.sp.transform.localPositionX,i.sp.transform.localPositionZ=e.sp.transform.localPositionZ,i.sp.transform.localPositionY=.5,n.lineSp.meshRenderer.material.tilingOffsetX=r):i.render=!1}else a.Destory()}}FixedUpdate(){}LateUpdate(){}Destroy(){}OnAddComponent(e,t){t.componentId==Np.id&&(t.lineSp=e.GetComponent(B).sp.getChildByName("Line"))}OnRemoveComponent(e,t){}}),this.systemMgr.AddSystem(new class extends lt{constructor(){super(...arguments),this.systemName="LinkSystem",this.grounp=new dt([ig.id])}Init(){}Update(){}FixedUpdate(){var t=this.world.GetEntitysByMatcher(this.grounp);for(let e=0;e<t.length;e++)t[e]}LateUpdate(){}Destroy(){}OnAddComponent(e,t){}OnRemoveComponent(e,t){}})}Awake(){}OnAllLoadOver(){this.gameElementCreator.CompileShader([N.Weapon_THAssault,N.Weapon_THGun,N.Weapon_THSubmachine,N.Weapon_THHeavyGun,N.Weapon_THMachineGun,N.Weapon_THInfantryGun,"Arrow","Bullet_AirBlade","Bullet_Bullet2","Bullet_Bullet4","Bullet_Dagger_Bullet1","Bullet_Dagger_Bullet2","Bullet_Dagger_Bullet3","Bullet_DashBullet","Bullet_EnergyBall","Bullet_IceBall","Bullet_SnowBall","Bullet_SpinBullet","Bullet_SuckBlood","Bullet_Sword_Bullet1","Bullet_Sword_Bullet2","Bullet_Sword_Bullet3","Bullet_Trample","CameraRoot","CameraRootGameOver","CoverCameraRoot","DefaultSp","DropBox","Effect_Blood","Effect_Chain","Effect_DizzEffect","Effect_DmgBuffEffect","Effect_DustZone","Effect_ExpPoint","Effect_FrightenZone","Effect_FrostZone","Effect_GetItemEffect","Effect_HealEffect","Effect_HitEffect","Effect_IceBuff","Effect_BlueInvincibleEffect","Effect_GoldInvincibleEffect","Effect_InvincibleEffect2","Effect_LevelUp","Effect_LongLightning","Effect_Parry","Effect_PickUp","Effect_ReadyEffect","Effect_SnowManBuff","Effect_SpeedUpEffect","Effect_SuckLine","Fog","Item_AddHpItem","Item_Chest","Item_Chest0","Item_Chest1","Item_Coins","Item_Diamond","Item_DmgBuffItem","Item_Gear_Chest","Item_Gear_Foot","Item_Gear_Head","Item_Gear_Ring","Item_SpeedUpBuffItem","Player","Point","Shadow","Weapon_THAxe","Weapon_THDagger","Weapon_THSword"],.5,this,this.TriggerStartGame)}Start(){eg.conversion(2),T.screenRatio=Laya.Browser.clientWidth/Laya.Browser.clientHeight,j.HideLoading(),q.SetRandomSeed(15615461),V.cmds=[],V.isNet?(q.Instance().netFrame=!0,K.UIModule().ShowUI(kp.UIName)):q.Instance().netFrame=!1}ShowGameOver(e=!1){var t=V.myInGamePlayerData.heroId,i=V.myInGamePlayerData.weaponId;this.world.DestoryAllEntitys();let o=K.DataModule().GetUser().GetNowWeaponSkinId(),a=(""!=V.tryWeaponSkinId&&(o=V.tryWeaponSkinId),Jc.CreatHero(new Laya.Vector3(0,1e3,0),t,i,!1,"","",o));return a.GetComponent(v).hitWithWall=!1,a.GetComponent(v).hitTheWall=!1,a.GetComponent(fi).height=1e3,e?(a.GetComponent(F).ChangeState(Ac.StateName),a.GetComponent(M).rotation.y=195):(a.GetComponent(F).ChangeState(xc.StateName),a.GetComponent(M).rotation.y=315),a.AddComponent(E),a.RemoveComponent(D),O.CreatPrefabEntity(N.CameraRootGameOver),a}Dispose(){Fp.tenTimeTriggeBoxCount=1,Fp.offsetTime=0,Fp.saveDropLeftTime=-1,ci.ClearSnowScene(),V.tryWeaponSkinId="",V.tryHeroSkinId="",V.useSameHeroSkinId=!1,V.hasSameSkillAtStart="",V.aiUseSkillWithMe=!1,V.showInGameGuide=!1,Laya.Resource.destroyUnusedResources()}ClearRes(){}},ag=class extends ${constructor(){super(...arguments),this.isLoadDataTime=!1,this.time=0,this.isShare=!1}Load(){null==this.view&&(this.view=this.CreatFGUIViewByView(jl.createInstance()),this.AllOnClick(),this.LoadImage(),k.Platform!=T.OPPO&&k.Platform!=T.VIVO||(j.ShowNativeAd(this.view.m_OppoLookBtn,this.view.m_OppoBannerAdBtn,null,null),this.view.m_ad.setSelectedPage("Oppo"),K.DataModule().GetPlatform().PlatformData,j.skipBtnDelayTime(this.view.m_Btn_Close)),k.Platform==T.WECHAT&&this.view.m_ad.setSelectedPage("TT")),this.SetLoadInfo()}LoadImage(){}AllOnClick(){this.view.m_Btn_Close.onClick(this,this.onBtn_Close),this.view.m_getBtn.onClick(this,this.m_getBtn),this.view.m_getBtn2.onClick(this,this.m_getBtn),this.view.m_Btn_Video.onClick(this,this.On_VideoBtn),this.view.m_OppoVideo.onClick(this,this.On_VideoBtn)}m_getBtn(){z.Instance.LW_StatisticsEvent(8020,K.DataModule().GetUser().GetData().userLevel.level,0);let e=K.UIModule().GetUI(ag.UIName),t=[];t.push(this.nowGetCoin),K.DataModule().GetUser().GetItem(t,at.offline),K.UIModule().GetUI(Ua.UIName).ShowAddCoin(new Laya.Vector2(e.view.m_getBtn.x+e.view.m_getBtn.width/2,e.view.m_getBtn.y),10),K.DataModule().GetUser().SetOffLineTime(A.SystemTime),this.SubscribeMessage(),this.onBtn_Close()}onBtn_Close(){K.UIModule().HideUI(ag.UIName)}IsShareOrVideo(){this.isShare=z.Instance.GetShareStrategy(sC.offline_double),this.isShare?j.IsShare(this.view.m_Btn_Video):this.isShare=j.IsVideoAndShare(this.view.m_Btn_Video)}Video_Call(){let e=K.UIModule().GetUI(ag.UIName),t=(z.Instance.LW_StatisticsEvent(8020,K.DataModule().GetUser().GetData().userLevel.level,1),e.nowGetCoin.count*=2,[]);t.push(e.nowGetCoin),K.DataModule().GetUser().GetItem(t,at.offline),K.UIModule().GetUI(Ua.UIName).ShowAddCoin(new Laya.Vector2(e.view.m_Btn_Video.x+e.view.m_Btn_Video.width/2,e.view.m_Btn_Video.y),20),e.onBtn_Close(),K.DataModule().GetUser().SetOffLineTime(A.SystemTime),this.SubscribeMessage()}SubscribeMessage(){T.IS_WECHAT_PLATFORM&&CC.Instance.SubscribeMessage(ag.UIName)}On_VideoBtn(){let e=K.UIModule().GetUI(ag.UIName),t=sC.offline_double,i=g.offline;e.isShare?j.GetRewardBtnFun(1,function(){z.Instance.DayShareStrategy_Add(t,!0),e.Video_Call()},i):j.GetRewardBtnFun(0,function(){z.Instance.DayShareStrategy_Add(t,!1),e.Video_Call()},i,e.view.m_Btn_Video)}onUpdate(){!this.view||this.isLoadDataTime||W.loginDataEnd&&(this.SetLoadInfo(),this.isLoadDataTime=!0)}SetLoadInfo(){this.isLoadDataTime,no.Statistics_T0R(g.offline);var e=K.DataModule().GetUser().GetOffLineTime();this.time=A.SystemTime-Number(e);let t=K.DataModule().GetUser().GetSaveKey("m_btn_speed"),i=0,o=(t&&0<K.DataModule().GetUser().speedTime-(e-t.count)&&(i=K.DataModule().GetUser().speedTime-(e-t.count)),Math.round(this.time/15e3)),a=(K.DataModule().GetLocal().gameRule.GetofflineGetCoin(),K.DataModule().GetUser().GetData()),n=K.DataModule().GetLocal().weapon,s=0,l=a.mergeLevel-1;l<1&&(l=1);var r,e=15*Number(n.GetPrice(l));k.isTestLog&&console.log("设置上限",e);let h=a.mergeMap;for(let e=0;e<h.length;e++)h[e]&&""!=h[e]&&-1==h[e].indexOf("Box")&&(r=n.Get(h[e]).Level,s+=1.2*Math.pow(2.11,r),k.isTestLog&&console.log("计算等级lv",r,"金币:"+1.2*Math.pow(2.11,r)));(s=Math.round(s)*o)>e&&(s=e);e=K.DataModule().GetUser().speedTimeDouble,console.log("离线收益加速前",s.toString()),0<i&&(0<i-this.time?s*=e:s+=s*(i/this.time*e)),e=Z.Coin+"_"+s;this.nowGetCoin=K.DataModule().GetUser().GetUserItemData(e),j.FreshRewardItem(this.view.m_Com_RewardItm,this.nowGetCoin,!1,"",x.GetIcon("item_CoinHeap")),this.view.m_Com_RewardItm.m_bg.visible=!0,this.IsShareOrVideo()}isBannerUp_Call(){K.UIModule().GetUI(ag.UIName).view.m_getBtn.visible=!0}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null)}Show(){super.Show(),this.Load(),j.RandomAdBtnPosTow(this.view.m_OppoLookBtn,this.view.m_OppoVideo,this.view.width)}SetHideInfo(){ag.OffLineEnd=!0,f.PrioritySetShow()}Hide(){this.SetHideInfo(),super.Hide(),this.UnLoad()}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(ag);return e.name=ag.UIName,t.uiName=ag.UIName,t}},ng=ag,sg=(ng.OffLineEnd=!0,ng.UIName="OffLineUI",class extends ${constructor(){super(...arguments),this.hideCall=!1,this.isGetTry=!1,this.fun=null}Load(){null==this.view&&(this.view=this.CreatFGUIViewByView(Nr.createInstance()),this.AllOnClick(),this.LoadImage(),this.hideCall=!1,this.view.m_text_info2.text=K.DataModule().GetLocal().localization.GetText("TryWeaponSkinUI_Info1"),k.Platform!=T.OPPO&&k.Platform!=T.VIVO||(j.ShowNativeAd(this.view.m_OppoLookBtn,this.view.m_OppoBannerAdBtn,null,null),this.view.m_ad.setSelectedPage("Oppo"),K.DataModule().GetPlatform().PlatformData,j.skipBtnDelayTime(this.view.m_btn_close2),j.skipBtnDelayTime(this.view.m_closeBtn2)),k.Platform==T.WECHAT&&this.view.m_ad.setSelectedPage("TT"))}LoadImage(){}AllOnClick(){this.view.m_btn_close2.onClick(this,this.onBtn_Close),this.view.m_OppoVideoBtn.onClick(this,this.onVideoBtn),this.view.m_videoBtn.onClick(this,this.onVideoBtn),this.view.m_closeBtn2.onClick(this,this.onBtn_Close)}onBtn_Close(){z.Instance.LW_StatisticsEvent(8011,"",0),K.UIModule().HideUI(sg.UIName)}SetLoadInfo(e,t){var i=K.DataModule().GetLocal().weaponSkin.Get(t);this.weaponData=e,this.view.m_text_name.text=K.DataModule().GetLz().GetText("WeaponSkinName_"+t),this.view.m_text_info.text=K.DataModule().GetLz().GetText("WeaponSkinInfo_"+t),this.view.m_text_info3.text=K.DataModule().GetLz().GetText("WeaponSkinInfo2_"+t),this.view.m_text_rare.text=K.DataModule().GetLz().GetText("Rare"+i.Rare),this.view.m_text_rare.color=K.DataModule().GetLocal().gameRule.Get("GearGrade"+i.Rare).F6;let o=i.Piece2Make,a=K.DataModule().GetUser().GetWeaponSkinCount(e,t),n=0,s=(a&&(n=a.count),K.DataModule().GetLocal().gameRule.GetWeaponSkin_Tryout().F3);n+s>o&&(s=o-n),this.nowSkinId=t,this.nowCount=s,this.view.m_text_addCount.text="+"+s,this.view.m_text_nowCount.text=n+"/"+o+"(  )",this.SetBar(n,o),K.DataModule().GetUser().GetWeaponSkinUserItemData(t,Number(s)),K.UIModule().HideUI(Zg.UIName),K.UIModule().HideUI(Zp.UIName),K.UIModule().ShowUI(Fa.UIName),q.EcsGameMgr.nowGame.UseMergeNewBg(),K.DataModule().GetUser().GetData().nowChooseHero;i=K.DataModule().GetUser().GetEquitWeapon();K.DataModule().GetUser().GetItemByID(i).data=t,q.EcsGameMgr.nowGame.UseTryHeroBG(),q.EcsGameMgr.nowGame.CreatWeapon(t,!0),K.DataModule().GetUser().GetItemByID(i).data="",no.Statistics_T0R(g.weaponSkin)}SetBar(e,t){this.view.m_bar.max=t,this.view.m_bar.value=e}onVideoBtn(){let e=K.UIModule().GetUI(sg.UIName);j.GetRewardBtnFun(0,function(){e.Video_Call()},g.weaponSkin)}Video_Call(){z.Instance.LW_StatisticsEvent(8011,"",1),z.Instance.ChuanQuStatistics(70060);let e=K.UIModule().GetUI(sg.UIName);var t,i;K.DataModule().GetUser().AddWeaponSkin(e.nowSkinId,e.nowCount.toString(),at.tryWenponSkin),e.isGetTry?(t=Z.WeaponTryCard+"_"+e.nowSkinId+"_1",t=K.DataModule().GetUser().GetUserItemData(t),K.DataModule().GetUser().GetItem([t],""),t=K.DataModule().GetUser().GetData().equipList[0],K.DataModule().GetUser().GetItemByID(t).data=e.nowSkinId,t=K.DataModule().GetUser().GetData().nowChooseHero,i=K.DataModule().GetUser().GetEquitWeapon(),q.EcsGameMgr.nowGame.ChangeHero(t,i)):V.tryWeaponSkinId=e.nowSkinId,j.DetectAndShowUnlockUI(),e.hideCall=!0}SetShowInfo(e,t,i,o=!1){K.DataModule().GetUser().GetSaveKey("try_isFreeId"+t),K.AudioModule().PlayOnce(x.GetSound2("tryWeapon")),this.Show(),this.isGetTry=o,this.SetLoadInfo(e,t),this.fun=i}onUpdate(){this.isShow&&this.hideCall&&K.UIModule().GetNowTopUIName()==sg.UIName&&(K.UIModule().HideUI(sg.UIName),this.hideCall=!1)}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null,q.EcsGameMgr.nowGame.ClearWeapon())}Show(){super.Show(),this.Load(),j.RandomAdBtnPosTow(this.view.m_OppoLookBtn,this.view.m_OppoVideoBtn,this.view.width)}SetHideInfo(){null!=this.fun&&(this.fun.call(this),this.fun=null)}Hide(){this.SetHideInfo(),super.Hide(),this.UnLoad(),K.UIModule().HideUI(Fa.UIName)}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(sg);return e.name=sg.UIName,t.uiName=sg.UIName,t}}),lg=sg,rg=(lg.UIName="TryTheSkinUI",class extends te{constructor(){super(...arguments),this.jscode="",this.anonymousCode="",this.sessionKey="",this.scene="",this.IsShieldCity=!1,this.playerName="",this.playerIcon="",this.hideTimestamp=0,this.useShareCallBack=!1,this.shareOKFun=null,this.shareNOFun=null,this.useFakeShare=!0,this.isShareCancel=!1,this.isVideoCreationError=!1,this.fromShareImage="",this.isBannerShowing=!1,this.platformData=new ee,this.changeAdTimer=30,this.shareNeedTime=3,this.adHeight=100,this.channelId="",this.goto_id="",this.goto_Type="",this.shareTm=0,this.videoPath="",this.screenRecord=!1,this.InsertAD="3enk11fbmhbn2gh74f",this.BlockCityList=["广州","深圳"],this.net_openIDTime=0,this.ShareTextList=["操作失败，请分享到30人群","分享失败，请不要打扰同一个群","分享失败，请分享到新的群"],this.isBannerOut=!1,this.oldBannerUI="",this.isVideoWin=!1,this.ismusicOn=!0,this.isVideoIndex=!1,this.isVideoErrorUseShare=!1,this.ShareNowTag="",this.isRecording=!1}Init(){null==(rg.Instance=this).lanuchData&&(this.lanuchData=T.Tt.getLaunchOptionsSync()),b.Warn("登录数据1",this.lanuchData),T.Tt.onShow(this.OnShow),T.Tt.onHide(this.OnHide),T.Tt.updateShareMenu({withShareTicket:!0}),T.Tt.setKeepScreenOn({keepScreenOn:!0}),T.Tt.showShareMenu({withShareTicket:!0}),T.Tt.onShareAppMessage(function(e){return console.log("onShareAppMessage:",e),A.SystemTime,{title:rg.tips,desc:rg.tips,imageUrl:"myurl://igame.chinanola.com/shareimage.png",templateId:"1faehea2286cd5nhv3",success(){console.log("分享成功"),setTimeout(function(){},1e3)},fail(e){setTimeout(function(){},1e3),console.log("分享失败",e)}}}),this.GetSystemInfo(),this.LoadVideo(),Laya.timer.loop(3e4,this,this.User_ReqStatistics),this.record(),this.getSetting()}LoadConfig(){K.PlatformModule().projectID=k.DataProjectName,qt.User_GetConfig(K.PlatformModule().projectID,this,function(e){try{console.warn("GetConfig success:",e),K.PlatformModule().chinaState=e.data.Base.Area[1]}catch(e){}},function(e){}),qt.User_GetConfig("tt_ndskqa",this,function(e){var t=e.data.Config,i=t.KeyStr,o=e.data.Base,a=o.Area;console.warn("GetIosConfig success:",t,i,e,o,a),i==k.oppoAuditKey&&(k.isLineKey=!1,(e=t.GameAuditSwitch)&&K.DataModule().GetLocal().platform.Parse(e),console.warn("Use GameAuditSwitch:",K.DataModule().GetPlatform().PlatformData)),i==k.oppoLineKey&&(o=t.GameLineSwitch,console.warn("Use config2:",o),o&&K.DataModule().GetLocal().platform.Parse(o),console.warn("Use GameLineSwitch:",K.DataModule().GetPlatform().PlatformData)),K.DataModule().GetPlatform().PlatformData.UseBanner&&K.PlatformModule().UseBanner(),0==K.DataModule().GetPlatform().PlatformData.ShowHeroRes&&(K.DataModule().GetLocal().hero.ResHero_Astrict(),K.DataModule().GetLocal().weaponSkin.ResSkin_Astrict(),k.isUseGridBoxKey=!1),0==k.isLineKey&&(k.isUseGridBoxKey=!1,k.AbTest_IsMode1="0")},function(e){console.warn("GetIosConfig Error:"+e)})}getSetting(){let t=this;T.Tt.getSetting({success:e=>{t.screenRecord=e.authSetting["scope.screenRecord"],console.log("getSetting",e," self.screenRecord:",t.screenRecord)}})}openSetting(t=null,i=null){let o=this;T.Tt.getSetting({success:e=>{e.authSetting["scope.screenRecord"]?(t(),console.log("录屏权限开启，直接发布")):T.Tt.openSetting({complete:e=>{console.log("openSetting 调用完成",e),o.screenRecord=e.authSetting["scope.screenRecord"],console.log("openSetting",e," self.screenRecord:",o.screenRecord),o.screenRecord?t&&t():i&&i()}})}})}GetScreenRecord(){return this.screenRecord}User_ReqStatistics(){}record(){let e=T.Tt.getGameRecorderManager();e.onError(function(e){console.warn("recorder.onError:",e)}),e.onInterruptionBegin(function(e){console.warn("recorder.onInterruptionBegin:",e)}),e.onInterruptionEnd(function(e){console.warn("recorder.onInterruptionEnd",e)})}SaveShareOnClick(){""!=this.shareOpenId&&(this.shareOpenId,this.shareId)}Login(i=!1){var e=Laya.LocalStorage.getItem("saveOpenId");console.log("开始登录",e),null!=e&&""!=e&&"NaN"!=e&&(W.openId=e,SC.GetOpenIdEnd());let o=this;T.Tt.login({force:i,success(e){console.log(`login 调用成功${e.code} `+e.anonymousCode);var t=k.appid,e=e.code;null!=e&&""!=e&&o.net_openID(t,e,i)},fail(e){console.log("login 调用失败")}}),Laya.timer.loop(2e4,this,this.loopOpenID)}loopOpenID(){}net_openID(e,t,i=!1){let o=this;K.NetModule().Request({appid:e,code:t},"myurl://sh.fcapi.data-eye.cn/IOG_OpenID/TT_GetOpenID",this,function(e){console.log("获取openID",e,e.status,e.data),e&&1==e.status&&(W.openId=e.data,i&&(j.HideShortWait(),eG.ResetGame()),SC.GetOpenIdEnd(),console.log("TT GetLoadConfig"),z.Instance.GetLoadConfig())},function(){try{if(o.net_openIDTime++,5<o.net_openIDTime)return;o.net_openID(e,t,i)}catch(e){console.log("重试openID错误",e)}},!1)}OnShow(e){b.Warn("开始显示",e),rg.fromTTUser}static GetfromTTUser(){var e;console.warn("GetfromTTUser"),"true"!=Laya.LocalStorage.getItem("fromTTUser")&&(Laya.LocalStorage.setItem("fromTTUser","true"),e=K.DataModule().GetLocal().quest.GetFollowBonus_TikTok().split(","),j.GetItemDataAndIsShowBox(at.TT_form,e,0,"",!0)),rg.fromTTUser=!1}GetShareKey(){let e=K.DataModule().GetLocal().gameRule.GetShareVideo_Bonus(),t=[],i=(t.push(e),1),o=K.DataModule().GetUser().GetSaveKey("ShareKey");null!=o&&(i=Number(o.data)+1),K.DataModule().GetUser().AddSaveKey("ShareKey",i.toString()),j.GetItemDataAndIsShowBox(at.TT_ShareVideo,t,0)}OnHide(){b.Warn("隐藏时间",A.SystemTime),rg.Instance.hideTimestamp=A.SystemTime}GetSystem(){return this.platformData.system}GetSystemInfo(){let t=this;T.Tt.getSystemInfo({success:function(e){b.Log("设备信息",e),null!=e.model&&-1!=e.model.indexOf("iPhone 6")&&b.Warn("iphone6为低端配置"),t.platformData.windowWidth=e.windowWidth,t.platformData.windowHeight=e.windowHeight,t.platformData.screenWidth=e.screenWidth,t.platformData.screenHeight=e.screenHeight,t.platformData.system=e.system,t.platformData.screenRatio=t.platformData.windowHeight/t.platformData.windowWidth,t.platformData.appName=e.appName,t.adHeight=.15*t.platformData.windowHeight*(t.platformData.windowHeight/t.platformData.windowWidth/(960/540)),b.Warn("屏幕比例",t.platformData.screenRatio,K.PlatformModule().GetPlatformData().system),t.ReCreatBanner(),null!=t.moregameBtn&&t.moregameBtn}})}GetIsIphoneX(){return 800<this.platformData.windowHeight}GetUserData(t,i){let o=T.Tt.createUserInfoButton({type:"image",image:"Images/touch.png",style:{left:0,top:0,width:this.platformData.windowWidth,height:this.platformData.windowHeight,lineHeight:40,backgroundColor:"#ffffff",color:"#ffffff",textAlign:"center",fontSize:16,borderRadius:4}});o.onTap(e=>{o.destroy(),b.Warn(e),null!=e.userInfo?(i.call(t,e.userInfo.nickName,e.userInfo.avatarUrl),this.playerName=e.userInfo.nickName,this.playerIcon=e.userInfo.avatarUrl):i.call(t,"","")})}isLongCellphone(){return 2<K.PlatformModule().GetPlatformData().screenHeight/K.PlatformModule().GetPlatformData().screenWidth}ReCreatBanner(e=0){let t=this,i=t.platformData,o=t.platformData.windowHeight-t.platformData.windowWidth/16*9,a=(t.platformData.windowWidth-300)/2;console.warn("banner top:",o,"window width1",t.platformData.windowWidth,a),T.IS_TT_PLATFORM&&(this.bannerAd=T.Tt.createBannerAd({adUnitId:"5ia2hnnf73k2g0a7h9",style:{left:a,top:o,width:300}}),console.warn("create banner"),this.bannerAd.onError(function(e){rg.Instance.isBannerOut=!0,console.warn("create banner",e)}),this.bannerAd.onResize(e=>{console.log(e.width,e.height),t.bannerAd.style.top=i.windowHeight-e.height,t.bannerAd.style.left=(i.windowWidth-e.width)/2}),this.bannerAd.onLoad(function(e){t.isLongCellphone(),b.Warn("bannerAd.onLoad:",e)}))}BannerAdShow(){b.Warn("BannerAdShow"),null!=this.bannerAd&&this.bannerAd.show().then(()=>{}).catch(e=>{console.warn("banner show fail:"+e.errCode)}),this.isBannerShowing=!0}BannerAdHide(){null!=this.bannerAd&&this.isBannerShowing&&this.bannerAd.hide(),this.isBannerShowing=!1}LoadInterstitialAd(){T.Tt.createInterstitialAd&&(this.interstitialAd=T.Tt.createInterstitialAd({adUnitId:this.InsertAD}),this.interstitialAd.onClose(this.OnCloseInterstitialAd),this.interstitialAd.load().then(()=>{this.interstitialAd.show()}).catch(e=>{console.log(e)}))}OnCloseInterstitialAd(e){Laya.SoundManager.setMusicVolume(1),Laya.SoundManager.setSoundVolume(1),console.log("关闭插屏")}ShowInterstitialAd(){console.log("显示插屏"),this.LoadInterstitialAd()}LoadVideo(){let t=this;try{this.rewardedVideoAd1=T.Tt.createRewardedVideoAd({adUnitId:"12430eh2566gb1dcof"}),this.rewardedVideoAd1.onClose(this.OnCloseWatchVideo),this.rewardedVideoAd1.onError(function(e){try{t.isVideoCreationError=!0,console.warn("video onError:"+JSON.stringify(e)),j.TopUI_TipShow(K.DataModule().GetLz().GetText("VideoErrorTip1")),Laya.SoundManager.setMusicVolume(1),Laya.SoundManager.setSoundVolume(1)}catch(e){}}),this.rewardedVideoAd1.onLoad(function(e){console.log("video onload:"+JSON.stringify(e)),t.isVideoCreationError=!1})}catch(t){console.warn("loadvideo err:"+t)}}LoadVideoAd1(){let t=this;this.isVideoIndex=!0,console.log("LoadVideoAd1:"+this.rewardedVideoAd1),null!=this.rewardedVideoAd1&&this.rewardedVideoAd1.load().then(()=>{console.warn("load video success"),t.rewardedVideoAd1.show(),t.isVideoCreationError=!1}).catch(e=>{try{t.isVideoCreationError=!0,console.warn("loadVIDEOAd1 err:"+e),Laya.timer.once(2e3,t,function(){j.HideShortWait()}),j.TopUI_TipShow(K.DataModule().GetLz().GetText("VideoErrorTip1")),Laya.SoundManager.setMusicVolume(1),Laya.SoundManager.setSoundVolume(1)}catch(e){}})}WatchVideo(e,t){this.isVideoErrorUseShare=!1,j.ShowShortWait(),this.watchFun=e,console.log("isVideoCreationError:"+this.isVideoCreationError),k.IsInWebTest?e.call(null):this.LoadVideoAd1()}OnCloseWatchVideo(e){if(rg.Instance.ismusicOn&&(Laya.SoundManager.setMusicVolume(1),Laya.SoundManager.setSoundVolume(1)),e&&e.isEnded||void 0===e)null!=rg.Instance.watchFun&&rg.Instance.watchFun.call(this),j.HideShortWait();else{if(j.HideShortWait(),K.UIModule().GetNowTopUIName()==Bf.UIName)try{console.log("中途退出一次,准备统计");let e=K.UIModule().GetUI(Bf.UIName);e.keepTime=60,e.isClickVideo=!1}catch(e){}null!=rg.Instance.watchFunNO&&rg.Instance.watchFunNO.call(this),rg.LoadVideoIng=!0,Laya.timer.once(2e3,this,function(){rg.LoadVideoIng=!1})}}GetChanleId(){return this.channelId}ShareBase(t,e){this.isVideoErrorUseShare=!1,rg.Instance.shareFunSave=t,rg.Instance.sharetitleSave="",rg.Instance.sharekeysSave="",rg.Instance.shareimageSave="";let i=this;var o;this.isShareCancel=!1,T.IS_TT_PLATFORM?(o=A.SystemTime,T.Tt.shareAppMessage({title:"",imageUrl:"",query:"ShareUserID="+K.DataModule().GetUser().GetData().id+"&ShareID=&"+K.PlatformModule().key2+"&ShareTm="+o,success:e=>{b.Warn("TT是有分享回调的,分享成功",e),t&&t.call(this)},fail:e=>{b.Warn("分享失败",e)},cancel:e=>{b.Warn("取消分享",e),i.isShareCancel=!0}})):null!=t&&t.call(this,null)}CustomerService(){T.Tt.openCustomerServiceConversation({})}VibrateShort(){T.Tt.vibrateShort()}showTTMoreGameBtn(){this.moregameBtn&&this.moregameBtn.show()}hideTTMoreGameBtn(){this.moregameBtn&&this.moregameBtn.hide()}crateMoreGaemBtn(){const e=T.Tt.createMoreGamesButton({type:"image",image:"Image/drawerBtn_Image.png",style:{left:1,top:this.platformData.windowHeight/2,width:40,height:50,lineHeight:40,textColor:"#ffffff",textAlign:"center",fontSize:16,borderRadius:4,borderWidth:0},appLaunchOptions:window.ttappidList,onNavigateToMiniGame(e){console.log("跳转其他小游戏",e,e.errCode,e.errMsg)}});e.onTap(()=>{console.log("点击更多游戏")}),console.warn("creat moregame btn"),this.moregameBtn=e}NavigateToMiniProgram(e,t,i,o){if(T.IS_TT_PLATFORM){b.Warn("跳转到"+t+i);let e=this;T.Tt.navigateToMiniProgram({appId:t,path:i,envVersion:"latest",success(){b.Warn("跳转成功"),null!=o&&o.call(e)},fail(e){b.Erro("跳转失败",e)}})}else b.Warn("跳转成功"),null!=o&&o.call(self)}WeChat_ShareAgain(){rg.Instance.shareNeedTime=3}recordScreen(){this.isRecording?(this.recordScreenEnd(),this.isRecording=!1):(this.isRecording=!0,this.recordScreenStart())}recordScreenStart(){try{let e=T.Tt.getGameRecorderManager();e.onStart(e=>{console.log("录屏开始",e)}),e.start({duration:300})}catch(e){console.warn("recordScreenStart err "+e)}}recordScreenEnd(){try{let t=this,e=T.Tt.getGameRecorderManager();e.onStop(e=>{console.log("录屏结束:",e,e.videoPath),t.videoPath=e.videoPath}),e.stop()}catch(e){console.warn("recordScreenEnd err "+e)}}checkHaveRecord(){return""!=this.videoPath}shareRecordVideo(e,i){let o=this;if(""==o.videoPath)return console.log("没有视频 分享失败"),o.showToast("没有录屏,不能分享"),void(i&&i.call(this));T.Tt.shareAppMessage({channel:"video",extra:{videoPath:o.videoPath,videoTopics:[rg.tips]},success(){console.log("分享视频成功"),e&&e.call(this)},fail(e){var t=e.errMsg;console.warn("errMsg:",t),"shareAppMessage:cancel"==t?setTimeout(function(){i&&i.call(this),console.log("分享失败")},1e3):(i&&i.call(this),console.log("录屏失败：",t)),console.log("分享录屏失败",e),o.showToast("分享录屏失败")}})}showToast(e){T.Tt.showToast({title:e,icon:"none",duration:2e3,success(e){console.log(""+e)},fail(e){console.log("showToast调用失败")}})}checkIsDouyin(e=!1){let t=T.Tt.getSystemInfoSync();return!!(e&&-1<t.appName.indexOf("douyin_lite"))||-1<t.appName.indexOf("Douyin")}static follow(){var e=T.Tt.getSystemInfoSync();console.log("sysInfo",e.SDKVersion),T.Tt.openAwemeUserProfile?T.Tt.openAwemeUserProfile({success:function(e){e=e.hasFollowed;console.log("hasFollowed:",e),!0===e&&(console.log("关注成功"),rg.GetfromTTUser())},fail:function(e){try{"openAwemeUserProfile:fail not login."==e.errMsg&&j.TopUI_TipShow("请登录抖音账号")}catch(e){console.log("---follow-try: ",e)}console.log("---- open fail, err: ",e)}}):T.Tt.showModal({title:"提示",content:"当前客户端版本过低，无法使用该功能，请升级客户端或关闭后重启更新。"})}static addShortcut(t,i=null){try{T.Tt.addShortcut({success:function(e){console.log("addShortcut ok"),t()},fail:function(e){console.log("addShortcut fail",e),i()}})}catch(t){}}static checkShortcut(t,i=null){try{T.Tt.checkShortcut({success:function(e){console.log("checkShortcut ok",e,e.status.exist),e.status.exist?i&&i():t&&t()},fail:function(e){console.log("checkShortcut fail",e)}})}catch(t){}}JumpToGoodLuckCoinPage(e,t){mg.ints.jump(e,t)}}),hg=rg,G=(hg.shareData=null,hg.tips="迷你特种兵",hg.ShareTime=0,hg.LoadVideoIng=!1,hg.fromTTUser=!1,class{constructor(){this.testOpenSchema="sslocal://microapp?version=v2&app_id=tt157f63c28a555a38&scene=061009&version_type=latest&start_page=pages%2Fcollect%2Findex%3Fstart_page%3D%252Fpages%252Fcollect%252Findex%253Fsource%253Dgame&bdp_log=%7B%22launch_from%22%3A%22in_mp%22%2C%22location%22%3A%22spring_luckycoin%22%2C%22position%22%3A%22spring_luckycoin%22%7D&bdpsum=1b56188",this.releaseOpenSchema="sslocal://microapp?version=v2&app_id=tt157f63c28a555a38&scene=061009&version_type=current&start_page=pages%2Fcollect%2Findex%3Fstart_page%3D%252Fpages%252Fcollect%252Findex%253Fsource%253Dgame&bdp_log=%7B%22launch_from%22%3A%22in_mp%22%2C%22location%22%3A%22spring_luckycoin%22%2C%22position%22%3A%22spring_luckycoin%22%7D&bdpsum=2e1a05d"}jump(t,i){T.Tt.openSchema({schema:this.releaseOpenSchema,success:function(e){e&&t&&t(e)},fail:function(e){i&&i(e)}})}getTaskProgress(e,l,r){let t={status_code:-1,message:"抱歉，当前人数过多，请稍等几分钟再试"};T.Tt.request({url:"myurl://sh.fcapi.data-eye.cn/IOG_HongBao/getTaskProgress",data:{app_name:hg.Instance.platformData.appName,open_id:e,game_id:window.appid},header:{"content-type":"application/json"},method:"POST",dataType:"JSON",success(o){console.error("getTaskProgress调用成功",o.data,e);var o=JSON.parse(o.data),a=o.data.status_code,n=o.data.message,s=o.data.data.enable;if(console.error("data: ",o.status,"status_code:",a,"enable:",s),1==o.status){let e=0,t=0,i=0;0==a?(null!=o.data.data.lucky_task_list&&null!=o.data.data.lucky_task_list&&0!=o.data.data.lucky_task_list.length&&(o=o.data.data.lucky_task_list[0],e=o.step_lucky_coin,t=o.cur_progress,i=o.finish_progress),l&&l({enable:s,step_lucky_coin:e,cur_progress:t,finish_progress:i})):r&&r({status_code:a,message:n})}else r&&r(t)},fail(e){console.error("调用失败",e.errMsg),r&&r(t)}})}doTask(a,e,n,s){let l={status_code:-1,message:"抱歉，当前人数过多，请稍等几分钟再试"};T.Tt.request({url:"myurl://sh.fcapi.data-eye.cn/IOG_HongBao/doTask",data:{app_name:hg.Instance.platformData.appName,open_id:a,game_id:window.appid,cur_progress:e},header:{"content-type":"application/json"},method:"POST",dataType:"JSON",success(e){console.error("dotask,调用成功",e.data,a);var t,e=JSON.parse(e.data),i=e.data.status_code,o=e.data.message;1==e.status?0==i?(t={step_lucky_coin:(t=e.data.data.lucky_task_list[0]).step_lucky_coin,cur_progress:t.cur_progress,finish_progress:t.finish_progress,incr_lucky_coin:e.data.data.incr_lucky_coin,lucky_coin:e.data.data.lucky_coin},n&&n(t)):s&&s({status_code:i,message:o}):s&&s(l)},fail(e){console.error("调用失败",e.errMsg),s&&s(l)}})}}),mg=G,dg=(mg._ins=null,mg.ints=G._ins=null==G._ins?new G:G._ins,class extends ${constructor(){super(...arguments),this.isHasAdd=!1,this.nowTime=0}Load(){null==this.view&&(this.view=this.CreatFGUIViewByView(nh.createInstance()),this.AllOnClick(),this.LoadImage(),this.isHasAdd=!1,k.Platform==T.QQ&&(this.isHasAdd=!1)),this.SetLoadInfo()}SetLoadInfo(){let e=f.Time_OneDay/2,t=K.DataModule().GetUser().GetSaveKey("AddToDesktopUI_Time");t||(K.DataModule().GetUser().AddSaveKey("AddToDesktopUI_Time",(A.SystemTime+e).toString()),t=K.DataModule().GetUser().GetSaveKey("AddToDesktopUI_Time")),this.nowTime=Number(t.data)-A.SystemTime,this.SetTime()}onUpdate(){this.view&&0<this.nowTime&&(this.nowTime-=1e3*A.TimeDeltaNoScale,this.SetTime())}SetTime(){this.nowTime<=0&&(this.nowTime=0),this.view.m_n28.text="Gift Left Time:"+f.Time_TransitionHour(this.nowTime)}LoadImage(){this.view.m_loadBg.url=x.GetIcon("Image_AddToDesktopUI_4_"+k.language),this.view.m_load_icon1.url=x.GetIcon("Image_AddToDesktopUI_1"),this.view.m_load_a1.m_load_a1.url=x.GetIcon("Image_AddToDesktopUI_3"),this.view.m_load_b1.m_load_b1.url=x.GetIcon("Image_AddToDesktopUI_2")}AllOnClick(){let t=this;this.view.m_Btn_Close.onClick(this,this.onBtn_Close),this.view.m_addBtn.onClick(this,this.m_getBtn),this.view.m_videoBtn.onClick(this,function(){z.Instance.ChuanQuStatistics(60002),null==K.DataModule().GetUser().GetItemByID("SaveKey_AddToDesktop")?j.GetRewardBtnFun(0,function(){t.AddReward(),t.Hide();let e=K.UIModule().GetUI(Zg.UIName);e.view&&e.isShow&&e.refreshAddToDesktop()},g.addToDesktop):j.TopUI_TipShow("Reward Claimed!")})}m_getBtn(){let t=this;k.IsInWebTest?this.AddReward():this.isHasAdd?t.AddReward():T.IS_QQ_PLATFORM?T.qq.saveAppToDesktop({success:function(e){console.log("添加到桌面成功 ok",e),null==K.DataModule().GetUser().GetItemByID("SaveKey_AddToDesktop")?t.AddReward():(console.log("奖励已领过 ok"),j.TopUI_TipShow("Reward Claimed!"))},fail:function(e){console.log("添加到桌面失败 fail",e)},complete:function(e){console.log("添加到桌面完成 complete",e)}}):(T.IS_VIVO_PLATFORM&&(console.warn("判断是否添加桌面图标"),T.Vivo.hasShortcutInstalled({success:function(e){console.warn("判断图标未存在时，创建图标"),0==e?T.Vivo.installShortcut({success:function(e){console.warn("执行用户创建图标奖励"),null==K.DataModule().GetUser().GetItemByID("SaveKey_AddToDesktop")?t.AddReward():(console.log("奖励已领过 ok"),j.TopUI_TipShow("Reward Claimed!"))},fail:function(e){console.warn("取消用户创建图标"),j.TopUI_TipShow("您已取消创建图标，请俩分钟后重试！")},complete:function(){console.warn("完成用户创建图标")}}):null==K.DataModule().GetUser().GetItemByID("SaveKey_AddToDesktop")?t.AddReward():(console.log("奖励已领过 ok"),j.TopUI_TipShow("Reward Claimed!"))},fail:function(e){},complete:function(){}})),T.IS_OPPO_PLATFORM&&(console.warn("判断是否添加桌面图标"),T.Oppo.hasShortcutInstalled({success:function(e){console.warn("判断图标未存在时，创建图标"),0==e?T.Oppo.installShortcut({success:function(e){console.warn("执行用户创建图标奖励"),null==K.DataModule().GetUser().GetItemByID("SaveKey_AddToDesktop")?t.AddReward():(console.log("奖励已领过 ok"),j.TopUI_TipShow("Reward Claimed!"))},fail:function(e){console.warn("取消用户创建图标")},complete:function(){console.warn("完成用户创建图标")}}):null==K.DataModule().GetUser().GetItemByID("SaveKey_AddToDesktop")?t.AddReward():(console.log("奖励已领过 ok"),j.TopUI_TipShow("Reward Claimed!"))},fail:function(e){},complete:function(){}})),k.Platform==T.TT&&hg.addShortcut(function(){t.AddReward()},function(){j.TopUI_TipShow("添加到桌面失败!")}))}AddReward(){var e=K.DataModule().GetLocal().quest.Get("Add2DesktopBonus_TikTok").Bonus,e=K.DataModule().GetLocal().lottery.GetChest(e),e=K.DataModule().GetUser().GetUserItemDataList(e);0<e.length&&e[0].type==Z.Hero&&(K.DataModule().GetUser().ChangeHero(e[0].id),q.EcsGameMgr.nowGame.ChangeHero(e[0].id,K.DataModule().GetUser().GetEquitWeapon())),z.Instance.LW_StatisticsEvent(8021,K.DataModule().GetUser().GetData().userLevel.level,1),K.DataModule().GetUser().AddSaveKey("SaveKey_AddToDesktop","true"),j.ShowGetReward(e,"box_add"),K.DataModule().GetUser().GetItem(e,at.addToDesktopUI),K.UIModule().HideUI(dg.UIName),K.UIModule().GetUI(Zg.UIName).isHasAddToDesktop=!0}onBtn_Close(){z.Instance.LW_StatisticsEvent(8021,K.DataModule().GetUser().GetData().userLevel.level,0),K.UIModule().HideUI(dg.UIName)}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null)}Show(){0!=K.DataModule().GetPlatform().PlatformData.ShowHeroRes&&(super.Show(),this.Load())}Hide(){f.PrioritySetShow(),super.Hide(),this.UnLoad()}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(dg);return e.name=dg.UIName,t.uiName=dg.UIName,t}}),cg=dg,ug=(cg.UIName="AddToDesktopUI",class extends ${constructor(){super(...arguments),this.hideCall=!1,this.isFree=!1,this.fun=null,this.isEsc=!1}Load(){null==this.view&&(this.view=this.CreatFGUIViewByView(sh.createInstance()),this.AllOnClick(),this.LoadImage(),this.hideCall=!1,this.view.m_text_info2.text=K.DataModule().GetLocal().localization.GetText("TryWeaponSkinUI_Info1"),k.Platform!=T.OPPO&&k.Platform!=T.VIVO||(j.ShowNativeAd(this.view.m_OppoLookBtn,this.view.m_OppoBannerAdBtn,null,null),this.view.m_ad.setSelectedPage("Oppo"),K.DataModule().GetPlatform().PlatformData,j.skipBtnDelayTime(this.view.m_closeBtn2)),k.Platform==T.WECHAT&&this.view.m_ad.setSelectedPage("TT"))}LoadImage(){}AllOnClick(){this.view.m_closeBtn2.onClick(this,this.onBtn_Close),this.view.m_videoBtn.onClick(this,this.onVideoBtn),this.view.m_OppoVideoBtn.onClick(this,this.onVideoBtn),this.view.m_closeBtn3.onClick(this,this.onBtn_Close)}onBtn_Close(){this.isEsc&&(this.fun=null),z.Instance.LW_StatisticsEvent(8012,"",0),K.UIModule().HideUI(ug.UIName);try{q.EcsGameMgr.nowGame.ClearHero()}catch(e){console.log(e)}}SetLoadInfo(e,t){"TikTokDude"==t&&(this.view.m_videoBtn.m_c1.setSelectedIndex(1),this.isFree=!0),"Seaman"==t||"Landman"==t?K.AudioModule().PlayOnce(x.GetSound2("Ultraman")):this.view.m_sp.setSelectedIndex(0),K.DataModule().GetUser().HeroIsDebris(t)?this.view.m_debris.setSelectedIndex(1):this.view.m_debris.setSelectedIndex(0);let i=K.DataModule().GetLocal().hero.Get(t);this.heroData=e,this.view.m_text_name.text=K.DataModule().GetLz().GetText("Hero_"+t),this.view.m_text_info.text=K.DataModule().GetLz().GetText("Hero_SpecialEffect_"+t);var o=j.GetENStrSize(K.DataModule().GetLz().GetText("Hero_SpecialEffect_"+t));this.view.m_text_info.fontSize=o,this.view.m_text_rare.text=K.DataModule().GetLz().GetText("Rare"+i.Rare),this.view.m_text_rare.color=K.DataModule().GetLocal().gameRule.Get("GearGrade"+i.Rare).F6;let a=i.UnlockCondition.split("_"),n=0,s=(2<a.length&&(n=Number(a[2])),K.DataModule().GetUser().GetHeroSkinCount(e,t)),l=0,r=(s&&(l=s.count),K.DataModule().GetLocal().gameRule.Get("Hero_Tryout").F3),h=(l+r>n&&(r=n-l),this.nowSkinId=t,this.nowCount=r,this.view.m_text_addCount.text="+"+r,this.view.m_text_nowCount.text=l+"/"+n+"(  )",this.SetBar(l,n),K.DataModule().GetUser().GetHeroSkinUserItemData(t,Number(r)));h.type=Z.Hero,h.id=t,K.UIModule().HideUI(Zg.UIName),K.UIModule().HideUI(Zp.UIName);o=K.DataModule().GetUser().GetEquitWeapon();q.EcsGameMgr.nowGame.UseTryHeroBG(),q.EcsGameMgr.nowGame.ChangeHero(t,o),K.UIModule().ShowUI(Fa.UIName)}SetBar(e,t){this.view.m_bar.max=t,this.view.m_bar.value=e}onVideoBtn(){if(this.isFree)return this.isFree=!1,void this.Video_Call();let e=K.UIModule().GetUI(ug.UIName);j.GetRewardBtnFun(0,function(){e.Video_Call()},g.tryHeroSkin)}Video_Call(){z.Instance.LW_StatisticsEvent(8012,"",1);let e=K.UIModule().GetUI(ug.UIName);K.DataModule().GetUser().AddHeroSkin(e.nowSkinId,e.nowCount.toString(),at.tryHeroSkin),V.tryHeroSkinId=e.nowSkinId,j.DetectAndShowUnlockUI(),e.hideCall=!0}onUpdate(){this.isShow&&this.hideCall&&K.UIModule().GetNowTopUIName()==ug.UIName&&(K.UIModule().HideUI(ug.UIName),this.hideCall=!1)}SetShowInfo(e,t,i,o=!1){K.AudioModule().PlayOnce(x.GetSound2("tryHero")),this.Show(),this.isEsc=o,this.SetLoadInfo(e,t),this.fun=i}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null)}Show(){super.Show(),this.Load(),j.RandomAdBtnPosTow(this.view.m_OppoLookBtn,this.view.m_OppoVideoBtn,this.view.width)}SetHideInfo(){null!=this.fun&&(this.fun.call(this),this.fun=null)}Hide(){this.SetHideInfo(),super.Hide(),this.UnLoad(),K.UIModule().HideUI(Fa.UIName)}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(ug);return e.name=ug.UIName,t.uiName=ug.UIName,t}}),pg=ug,gg=(pg.UIName="TryHeroSkinUI",class extends ${Load(){null==this.view&&(this.view=this.CreatFGUIViewByView(bh.createInstance()),this.AllOnClick(),this.LoadImage()),this.SetLoadInfo()}LoadImage(){}AllOnClick(){this.view.m_Btn_Close.onClick(this,this.onBtn_Close),this.view.m_YesBtn.onClick(this,this.m_YesBtn)}onBtn_Close(){K.UIModule().HideUI(gg.UIName)}m_YesBtn(){let e=this.view.m_inputText.text,t=(e=e.replace(/[^0-9A-Za-z\-]/gi,""),this.view.m_YesBtn.touchable=!1,this.view.m_YesBtn.grayed=!0,this);try{Laya.timer.once(5e3,this,function(){t.view&&(t.view.m_YesBtn.touchable=!0,t.view.m_YesBtn.grayed=!1)})}catch(e){}j.UseCdk_key(e)}GetNewYearFont(e){return"true"==Laya.LocalStorage.getItem(e)&&(j.TopUI_TipShow("The code has already been used!"),!0)}SetLoadInfo(){}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null)}Show(){super.Show(),this.Load()}SetHideInfo(){}Hide(){this.SetHideInfo(),super.Hide(),this.UnLoad()}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(gg);return e.name=gg.UIName,t.uiName=gg.UIName,t}}),fg=gg;fg.UIName="CDKeyUI";var _g=class extends ${Load(){if(null==this.view){this.view=this.CreatFGUIViewByView(Ih.createInstance());let t=this;this.view.m_Btn_Close.onClick(this,function(){t.Hide()}),this.view.m_Btn1_SellEquipment.onClick(this,function(){K.UIModule().HideUI(Zg.UIName),K.UIModule().GetUI(Ha.UIName).SetDefaultEquit(),K.UIModule().ShowUI(Ha.UIName);let e=K.UIModule().GetUI(ka.UIName);e.Show(),e.SetSortAndLv(3),t.Hide()}),k.Platform!=T.OPPO&&k.Platform!=T.VIVO||(j.ShowNativeAd(null,null,this.view.m_OppoAdBtn,null),this.view.m_YLPlatform.setSelectedPage("Oppo"))}}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null)}Show(){super.Show(),this.Load()}Hide(){super.Hide(),this.UnLoad(),f.PrioritySetShow()}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(_g);return e.name=_g.UIName,t.uiName=_g.UIName,t}},Ig=_g,Cg=(Ig.UIName="PromptSaleUI",0,class extends ${constructor(){super(...arguments),this.List=[],this.clickTime=0}Load(){null==this.view&&(this.view=this.CreatFGUIViewByView(ud.createInstance()),this.AllOnClick(),this.LoadImage(),this.clickTime=0),this.SetLoadInfo()}LoadImage(){}AllOnClick(){this.view.m_Btn_Close.onClick(this,this.onBtn_Close)}onBtn_Close(){K.UIModule().HideUI(Cg.UIName)}SetLoadInfo(){this.List=K.DataModule().GetUser().GetSaveTaskList(),this.List_Refresh()}List_Refresh(){this.view.m_list.itemRenderer=Laya.Handler.create(this,this.onRenderItem,null,!1),this.view.m_list.numItems=this.List.length}onRenderItem(e,t){let i=this.List[e],o=i.id.split("saveTask_")[1],a=K.DataModule().GetLocal().quest.GetAllIndex_Requirement(i.tableID,o),n=(t.m_text_now.text=i.count+"/"+i.data,t.m_text_title.text=f.StringReplace(a.QuestChineseName,"[F1]",i.data),a.Bonus.split(",")),s=j.GetItemDataAndIsShowBox("",n,3);if(j.FreshRewardItem(t.m_reward,s[0],!1),t.m_text_count.text=t.m_reward.m_Count.text,t.m_reward.m_Count.visible=!1,t.m_getBtn.grayed=!1,t.m_getBtn.visible=!0,t.m_videoBtn.visible=!1,t.m_endBg.visible=!1,t.m_threeBtn.visible=!1,i.count>=Number(i.data)?i.buyCount<1?t.m_threeBtn.visible=!0:(t.m_getBtn.visible=!1,t.m_endBg.visible=!0):t.m_getBtn.grayed=!0,!(this.clickTime>e)){let e=this;this.clickTime++,t.m_videoBtn.onClick(this,function(){e.SetLoadInfo()}),t.m_getBtn.onClick(this,function(){j.GetItemDataAndIsShowBox(g.task,n,0),K.DataModule().GetUser().AddSaveKey(i.id,i.data,i.count,i.buyCount+1,i.tableID),e.SetLoadInfo()}),t.m_threeBtn.onClick(this,function(){t.m_threeBtn.m_endBg.visible=!t.m_threeBtn.m_endBg.visible,t.m_videoBtn.visible=t.m_threeBtn.m_endBg.visible,t.m_getBtn.visible=!t.m_threeBtn.m_endBg.visible})}}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null)}Show(){super.Show(),this.Load()}SetHideInfo(){}Hide(){this.SetHideInfo(),super.Hide(),this.UnLoad()}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(Cg);return e.name=Cg.UIName,t.uiName=Cg.UIName,t}}),Gg=Cg,Sg=(Gg.UIName="TaskUI",class extends ${constructor(){super(...arguments),this.nowBar=0,this.showTime=5,this.nowTime=0,this.CalledGetUI=!1,this.Callbanner=!1,this.Timer=.06,this.SkiphideFun=!1}Load(){if(null==this.view){this.view=this.CreatFGUIViewByView(Mh.createInstance()),this.AllOnClick(),this.view.m_Closeable.setSelectedIndex(0),console.log("m_Closeable",this.view.m_Closeable.selectedIndex);const e=this;Ko.Instance&&Ko.Instance.EggUICloseable&&setTimeout(()=>{e.view&&(e.view.m_Closeable.setSelectedIndex(1),console.log("m_Closeable",e.view.m_Closeable.selectedIndex))},3e3),this.view.m_n1.url=x.GetIcon("Box_1")}this.SetLoadInfo()}AllOnClick(){this.view.m_onBtn.onClick(this,this.onClick),this.view.m_GetBtn.onClick(this,this.onGet),this.view.m_CloseBtn.onClick(this,()=>{console.log("close"),K.UIModule().GetUI(Sg.UIName).Hide()})}SetLoadInfo(){this.showTime=f.GetF1_F2RandomValue(2,6),this.nowTime=0,this.nowBar=0,this.view.m_bar.text="0/100",this.Callbanner=!1,this.CalledGetUI=!1}onClick(){let e=0;this.nowBar<80?e=f.GetF1_F2RandomValue(8,14):80<this.nowBar&&(this.nowTime++,e=f.GetF1_F2RandomValue(1,4)),console.log("当前次数",this.nowTime),this.nowBar+=+e,100<=this.nowBar&&(this.nowBar=100),this.nowBar<1&&(this.nowBar=.1),this.view.getTransition("t0").play(),this.SetBar(this.nowBar)}onGet(){j.GetRewardBtnFun(0,()=>{this.getReward()},g.EggUIVideo)}SetBar(e){let t=this.view.m_bar;if(t.max=100,t.tweenValue(e,.1),(this.nowTime>=this.showTime||70<=e)&&!this.Callbanner){this.Callbanner=!0;let e=50;K.PlatformModule().platform&&null!=K.PlatformModule().platform.EggUIClickChance&&(e=K.PlatformModule().platform.EggUIClickChance),100*Math.random()<e?K.PlatformModule().PlatformSettingData().EggUIIsShowBnner&&Ko.Instance.BannerAdShow():j.GetRewardBtnFun(0,()=>{}),Laya.timer.once(1e3,this,()=>{try{this.getReward()}catch(e){}})}}getReward(){var e=K.DataModule().GetLocal().lottery.GetChest("Egg_Piece");console.log(e),j.GetItemDataAndIsShowBox(at.EggUIClick,e,0,"",!0,this.hideFun),this.SkiphideFun=!0,K.UIModule().HideUI(Sg.UIName)}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null)}Show(){b.Log("开始显示EggUI"),super.Show(),this.Load()}Hide(){try{this.hideFun||this.SkiphideFun||(this.hideFun(),this.hideFun=null),this.SkiphideFun=!1}catch(e){}super.Hide(),this.UnLoad()}static Active(e=()=>{}){if(Sg.Activable){const t=K.UIModule().GetUI(Sg.UIName);t.hideFun=e,t.Show();K.PlatformModule().platform&&K.PlatformModule().platform.EggUIClickChance&&K.PlatformModule().platform.EggUIClickChance}else e()}static get Activable(){var t=Ko.Instance;if(t&&t.EggUIActive){var i=t.EggUIIgnoreTimes;if(i){var o=(new Date).getHours();console.log("nowtimeh",o);let e=!1;if(i[1]>i[0]?o>=i[0]&&o<i[1]&&(e=!0):(!(i[1]<i[0])||o<i[0]||o>=i[1])&&(e=!0),e&&t.IsEggUIEggUIBlockRegion)return!1}return!0}return!1}onUpdate(){this.view&&(this.Timer-=A.TimeDeltaNoScale,this.Timer<=0&&(this.Timer=.06,this.nowBar-=.3,this.nowBar<=.1&&(this.nowBar=.1),this.SetBar(this.nowBar)))}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(Sg);return e.name=Sg.UIName,t.uiName=Sg.UIName,t}}),yg=Sg,wg=(yg.UIName="EggUI",class extends ${constructor(){super(...arguments),this.isShare=!1,this.isShare2=!1,this.isShare3=!1,this.isSetNew=!1,this.timeStopScale=1e-4,this.lvList=[],this.skillList=[],this.isChange=!1,this.pDic={},this.iDic={},this.isZhiYU=!1,this.isNew=!1}Load(){null==this.view&&(this.view=this.CreatFGUIViewByView(Ws.createInstance()),this.AllOnClick(),this.LoadImage(),k.Platform!=T.OPPO&&k.Platform!=T.VIVO||(j.ShowNativeAd(this.view.m_OppoLookBtn,null,null,this.view.m_OppoIconAdBtn),this.view.m_YLPlatform.setSelectedPage("Oppo"))),this.SetLoadInfo()}LoadImage(){}AllOnClick(){this.view.m_btn_all.onClick(this,this.m_btn_all),this.view.m_btn_change.onClick(this,this.m_btn_change),this.view.m_OppoBtn_all.onClick(this,this.m_btn_all),this.view.m_oppoBtn_change.onClick(this,this.m_btn_change)}IsShareOrVideo(){this.isShare=z.Instance.GetShareStrategy(sC.chose_skill_all),this.isShare?j.IsShare(this.view.m_btn_all):this.isShare=j.IsVideoAndShare(this.view.m_btn_all),this.isShare2=z.Instance.GetShareStrategy(sC.chose_skill_refresh),this.isShare2?j.IsShare(this.view.m_btn_change):this.isShare2=j.IsVideoAndShare(this.view.m_btn_change)}Video_Call(){z.Instance.LW_StatisticsEvent(8022,K.DataModule().GetUser().GetData().userMedal.level,1),z.Instance.ChuanQuStatistics(80005);let t=K.UIModule().GetUI(wg.UIName),i=[];for(let e=0;e<t.skillList.length;e++)i.push(t.skillList[e].SkillID+"_"+t.lvList[e]);t.onList(i)}Video_Call2(){z.Instance.ChuanQuStatistics(80006),z.Instance.LW_StatisticsEvent(8022,K.DataModule().GetUser().GetData().userMedal.level,2);let e=K.UIModule().GetUI(wg.UIName);e.LoadList(1),e.isChange=!0}m_btn_all(){let e=g.randomSkill_ALL,t=K.UIModule().GetUI(wg.UIName),i=sC.chose_skill_all;t.isShare?j.GetRewardBtnFun(1,()=>{z.Instance.DayShareStrategy_Add(i,!0),t.Video_Call()},e):j.GetRewardBtnFun(0,()=>{z.Instance.DayShareStrategy_Add(i,!1),t.Video_Call()},e,t.view.m_btn_all)}m_btn_change(){let e=g.randomSkill_Change,t=K.UIModule().GetUI(wg.UIName),i=sC.chose_skill_refresh;t.isShare2?j.GetRewardBtnFun(1,()=>{z.Instance.DayShareStrategy_Add(i,!0),t.Video_Call2()},e):j.GetRewardBtnFun(0,()=>{z.Instance.DayShareStrategy_Add(i,!1),t.Video_Call2()},e,t.view.m_btn_change)}SetLoadInfo(){W.newPlayer&&0==this.isSetNew&&(this.isSetNew=!0,this.isNew=!0),T.ProjectSubCode&&A.TimeScaleZoom("SkillRandomUI",!0,1e-4),this.isChange=!1,this.LoadList(),no.Statistics_T0R(g.randomSkill_Lv),no.Statistics_T0R(g.randomSkill_ALL),no.Statistics_T0R(g.randomSkill_Change)}LoadList(e=0){this.IsShareOrVideo();let t=K.DataModule().GetLocal().skill.GetInitiativeSkllList(),i=K.DataModule().GetLocal().skill.GetPassivitySkllList(),o=(this.lvList=[],this.skillList=[],f.RandomF1F2Num(t.length-1,1)),a=f.RandomF1F2Num(i.length-1,2);if(this.isNew&&0==this.isZhiYU){this.isZhiYU=!0;for(let e=0;e<t.length;e++)"Grenade"==t[e].SkillID&&(o[0]=e)}let n=[],s=[];for(let e=0;e<o.length;e++)n.push(t[o[e]]);for(let e=0;e<a.length;e++)s.push(i[a[e]]);this.skillList.push(s[0]),this.skillList.push(n[0]),this.skillList.push(s[1]);for(let e=0;e<1;e++){const t=n[e];this.iDic[t.SkillID]||(this.iDic[t.SkillID]=0),this.iDic[t.SkillID]++}for(let e=0;e<2;e++){const t=s[e];this.pDic[t.SkillID]||(this.pDic[t.SkillID]=0),this.pDic[t.SkillID]++}for(let e=0;e<this.skillList.length;e++)this.lvList.push(1);let l=K.DataModule().GetLocal().gameRule.GetSkillRandom_Lv2_Probability();k.isUseVer132&&(l=100),1!=e&&!f.GetRandomValue(l)||(this.isNew?this.lvList[1]=2:(e=f.GetF1_F2RandomValue(0,this.skillList.length-1),this.lvList[e]=2)),this.List_Refresh()}List_Refresh(){this.view.m_list.itemRenderer=Laya.Handler.create(this,this.onRenderItem,null,!1),this.view.m_list.numItems=this.skillList.length,this.view.m_list.on(fairygui.Events.CLICK_ITEM,this,this.On_Item)}onRenderItem(e,t){let i=this.skillList[e],o=this.lvList[e],a=(t.m_Com.m_bg_text_one.visible=!1,t.m_Com.m_text_one.visible=!1,t.m_Com.m_new.visible=!1);if(2<=o)a=!0;else{let t=!1;for(let e=0;e<this.lvList.length;e++)if(2<=this.lvList[e]){t=!0;break}t||""!=i.SkillFun&&(a=!0)}a&&(this.isShare3=z.Instance.GetShareStrategy(sC.chose_skill_advance),this.isShare3?j.IsShare(t.m_Com):this.isShare3=j.IsVideoAndShare(t.m_Com)),this.isNew&&(a=!1,2<=o&&(t.m_Com.m_bg_text_one.visible=!0,t.m_Com.m_text_one.visible=!0,t.m_Com.m_new.visible=!0)),t.m_Com.m_type.visible=a,t.m_Com.m_LvType.setSelectedIndex(o-1),""==i.SkillFun?(t.m_Com.m_SkillType.setSelectedIndex(0),t.m_Com.m_SkillIconCom.m_bar.setSelectedPage("buff"),t.m_Com.m_SkillIconCom.m_buleBar.fillAmount=o/i.SkillMaxLevel):(t.m_Com.m_SkillType.setSelectedIndex(1),t.m_Com.m_SkillIconCom.m_bar.setSelectedPage("skill"),t.m_Com.m_SkillIconCom.m_greenBar.fillAmount=o/i.SkillMaxLevel),t.m_Com.m_SkillIconCom.m_MaxLevel.setSelectedPage("Lv"+i.SkillMaxLevel),t.m_Com.m_load_icon.url=x.GetIcon("Icon_"+i.UIRes),t.m_Com.m_SkillIconCom.m_icon.url=x.GetIcon("Icon_"+i.UIRes);let n=this,s=(t.m_Com.m_text_info.text=K.DataModule().GetLz().GetText("SkillName_"+i.SkillID)+" "+K.DataModule().GetLz().GetTextByPar("InGame_SkillLV",o.toString()),K.DataModule().GetLocal().skill.Get(i.SkillID).F1),l=(s*=o,"");l="AddSpeed"==i.SkillID||"HitnRun"==i.SkillID?s.toString():s+"%",""!=i.SkillFun&&(l=""),t.m_Com.m_text_info2.scaleX=1,f.Text_AutoSize(t.m_Com.m_text_info2,207,K.DataModule().GetLz().GetText("SkillNameInfo2_"+i.SkillID)+l),t.scaleX=0,Laya.timer.once(300*(e+1),this,()=>{try{if(!n.view)return;t.scaleX=1,t.m_t0.play()}catch(e){console.log("err:",e)}})}On_Item(o){let a=this.view.m_list.getChildIndex(o),n=this.skillList[a],e=!1;if(2<=this.lvList[a])e=!0;else{let t=!1;for(let e=0;e<this.lvList.length;e++)if(2<=this.lvList[e]){t=!0;break}t||""!=n.SkillFun&&(e=!0)}if(e=this.isNew?!1:e){z.Instance.LW_StatisticsEvent(8022,K.DataModule().GetUser().GetData().userMedal.level,0),this.isChange?z.Instance.ChuanQuStatistics(80004):z.Instance.ChuanQuStatistics(80003);let e=g.randomSkill_Lv,t=K.UIModule().GetUI(wg.UIName),i=sC.chose_skill_advance;t.isShare3?j.GetRewardBtnFun(1,()=>{z.Instance.DayShareStrategy_Add(i,!0),t.onList([n.SkillID+"_"+t.lvList[a]])},e):j.GetRewardBtnFun(0,()=>{z.Instance.DayShareStrategy_Add(i,!1),t.onList([n.SkillID+"_"+t.lvList[a]])},e,o)}else{this.isChange?z.Instance.ChuanQuStatistics(80002):z.Instance.ChuanQuStatistics(80001),this.onList([n.SkillID+"_"+this.lvList[a]]);let e=K.DataModule().GetUser().GetData();z.Instance.LW_StatisticsEvent(1010,e.userMedal.level.toString(),e.userLevel.level.toString(),1..toString())}}SetShowInfo(e){this.Show(),this.hideFun=e}onList(e){T.ProjectSubCode?V.SetStartGetSkill(e):V.startGetSkill=e,k.Platform!=T.QQ||(e=K.DataModule().GetPlatform().PlatformData.EggUIProbability)&&!f.GetRandomValue(e)||(yg.Active(this.hideFun),this.hideFun=null),K.UIModule().HideUI(wg.UIName)}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null)}Show(){super.Show(),this.Load(),j.RandomAdBtnPosThree(this.view.m_OppoLookBtn,this.view.m_OppoBtn_all,this.view.m_oppoBtn_change,this.view.width)}SetHideInfo(){this.isNew&&(this.isNew=!1),T.ProjectSubCode&&A.TimeScaleZoom("SkillRandomUI",!1),null!=this.hideFun&&(this.hideFun.call(this),this.hideFun=null)}Hide(){this.SetHideInfo(),super.Hide(),this.UnLoad()}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(wg);return e.name=wg.UIName,t.uiName=wg.UIName,t}}),vg=wg,Dg=(vg.UIName="SkillRandomUI",class extends ${constructor(){super(...arguments),this.hideCall=!1,this.fun=null,this.isEsc=!1}Load(){null==this.view&&(this.view=this.CreatFGUIViewByView(Mr.createInstance()),this.AllOnClick(),this.LoadImage(),this.hideCall=!1,K.UIModule().ShowUI(Ua.UIName))}LoadImage(){}AllOnClick(){let i=this;this.view.m_closeBtn2.onClick(this,this.onBtn_Close),this.view.m_videoBtn.onClick(this,this.onVideoBtn),this.view.m_buyBtn.onClick(this,function(){if(0==K.DataModule().GetUser().isBuyHero(i.nowSkinId)){let e=[],t=Z.Hero+"_"+i.nowSkinId;e.push(t),j.GetItemDataAndIsShowBox(at.coverHero,e,0)}var e=K.DataModule().GetUser().BuyHero(i.nowSkinId);0==e&&(K.AudioModule().OptimizePlayOnce(x.GetSound2("Purchase")),K.DataModule().GetUser().ChangeHero(i.nowSkinId),K.UIModule().HideUI(Dg.UIName),q.EcsGameMgr.nowGame.ClearHero(),K.UIModule().ShowUI(Zg.UIName)),1==e&&(K.AudioModule().OptimizePlayOnce(x.GetSound2("CuoWu")),j.WindowUI_Show(Fo.Coin_Insufficient)),2==e&&(K.AudioModule().OptimizePlayOnce(x.GetSound2("CuoWu")),j.WindowUI_Show(Fo.Diamond_Insufficient))})}onBtn_Close(){this.isEsc&&(this.fun=null),z.Instance.LW_StatisticsEvent(8012,"",0),K.UIModule().HideUI(Dg.UIName),q.EcsGameMgr.nowGame.ClearHero(),K.UIModule().ShowUI(Zg.UIName)}SetLoadInfo(e,t){"Seaman"!=t&&"Landman"!=t||K.AudioModule().PlayOnce(x.GetSound2("Ultraman"));let i=K.DataModule().GetLocal().hero.Get(t);this.heroData=e,this.view.m_text_name.text=K.DataModule().GetLz().GetText("Hero_"+t),this.view.m_text_info.text=K.DataModule().GetLz().GetText("Hero_SpecialEffect_"+t);var o=j.GetENStrSize(K.DataModule().GetLz().GetText("Hero_SpecialEffect_"+t));this.view.m_text_info.fontSize=o,this.view.m_text_rare.text=K.DataModule().GetLz().GetText("Rare"+i.Rare),this.view.m_text_rare.color=K.DataModule().GetLocal().gameRule.Get("GearGrade"+i.Rare).F6;let a=i.UnlockCondition.split("_"),n=0,s=(2<a.length&&(n=Number(a[2])),K.DataModule().GetUser().GetHeroSkinCount(e,t)),l=0,r=(s&&(l=s.count),K.DataModule().GetLocal().gameRule.Get("Hero_Tryout").F3);if(l+r>n&&(r=n-l),this.nowSkinId=t,K.DataModule().GetUser().IsHeroUnlock(this.nowSkinId)){let e=K.DataModule().GetLocal().hero.Get(this.nowSkinId);this.view.m_buyBtn.m_c1.setSelectedPage("Diamond"),this.view.m_buyBtn.m_count.text=e.Diamond.toString(),1==e.WatchVideo2Get&&(e.Diamond<=0?this.view.m_ShowTimes.setSelectedPage("1"):this.view.m_ShowTimes.setSelectedPage("2"))}this.nowCount=r;let h=K.DataModule().GetUser().GetHeroSkinUserItemData(t,Number(r));h.type=Z.Hero,h.id=t,K.UIModule().HideUI(Zg.UIName),K.UIModule().HideUI(Zp.UIName);o=K.DataModule().GetUser().GetEquitWeapon();q.EcsGameMgr.nowGame.UseTryHeroBG(),q.EcsGameMgr.nowGame.ChangeHero(t,o),K.UIModule().ShowUI(Fa.UIName)}onVideoBtn(){let i=K.UIModule().GetUI(Dg.UIName);no.Statistics_T06(Vg.m_getHeroBtn),j.GetRewardBtnFun(0,()=>{let e=[],t=Z.Hero+"_"+i.nowSkinId;e.push(t),j.GetItemDataAndIsShowBox(at.coverHero,e,0),K.DataModule().GetUser().ChangeHero(i.nowSkinId),K.UIModule().HideUI(Dg.UIName),q.EcsGameMgr.nowGame.ClearHero(),K.UIModule().ShowUI(Zg.UIName)},g.buyHeroVideo)}onUpdate(){this.isShow&&this.hideCall&&K.UIModule().GetNowTopUIName()==Dg.UIName&&(K.UIModule().HideUI(Dg.UIName),this.hideCall=!1)}SetShowInfo(e,t,i,o=!1){this.Show(),this.isEsc=o,this.SetLoadInfo(e,t),this.fun=i}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null)}Show(){super.Show(),this.Load()}SetHideInfo(){null!=this.fun&&(this.fun.call(this),this.fun=null)}Hide(){this.SetHideInfo(),super.Hide(),this.UnLoad(),K.UIModule().HideUI(Fa.UIName)}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(Dg);return e.name=Dg.UIName,t.uiName=Dg.UIName,t}}),Ug=Dg;Ug.UIName="GetHeroUI";var Lg,Bg=class extends ${constructor(){super(...arguments),this.boxID=""}Load(){if(null==this.view){this.view=this.CreatFGUIViewByView(kn.createInstance());let e=this;this.view.m_VideoGetBtn.onClick(this,function(){e.Box3_GetBtn()}),this.view.m_ClseBtn.onClick(this,function(){e.Hide()}),this.view.m_skipBtn2.onClick(this,function(){e.Hide()})}}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null)}Box3_GetBtn(){let t=this,e=g.FeiTianBox;this.boxID==Lg.box_Chest_FeiTiamBox2?e=g.FeiTianBox2:this.boxID==Lg.box_Chest_FeiTiamBox3&&(e=g.FeiTianBox3),j.GetRewardBtnFun(0,function(){t.GetBoxReward(),t.Hide();let e=K.UIModule().GetUI(Zg.UIName);e.view&&e.isShow&&(e.view.m_tianJiangBoxBtn.visible=!1)},e)}Show(){super.Show(),this.Load()}Hide(){super.Hide(),this.UnLoad()}onUpdate(){this.view}SetInfo(e){if(this.boxID=e,this.view.m_text_1.text="",this.view.m_text_2.text="",this.view.m_text_3.text="",this.view.m_load_icon.url=x.GetIcon(e),this.view.m_load_info.url=x.GetFairyGUI_Icon("text_"+e),e==Lg.box_Chest_FeiTiamBox2){let e=K.DataModule().GetUser().GetData().mergeLevel,t=K.DataModule().GetLocal().gameRule.Get("IdleRandomWeaponGift"),i=Math.max(1,e-t.F4);this.view.m_text_1.text="3",this.view.m_text_2.text=i.toString()}else e==Lg.box_Chest_FeiTiamBox3&&(this.view.m_text_3.text=f.GoldTransition(this.GetFreeCoin(),!0,1))}GetBoxReward(){let e=this.boxID,t=[],i="";var o;K.DataModule().GetUser().SetShowFeiTianBoxTimes(),e==Lg.box_Chest_FeiTiamBox?(i="box_Chest_FeiTiamBox",o=K.DataModule().GetLocal().lottery.GetChest("Chest_Endless",!1),o=j.GetItemDataAndIsShowBox(at.TreasureBox4,o),j.ShowGetReward(o,i),K.DataModule().GetUser().GetItem(o,at.TreasureBox4)):e==Lg.box_Chest_FeiTiamBox2?(i=e,o=Z.BoxMerge+"_3",t.push(o)):e==Lg.box_Chest_FeiTiamBox3&&(i=e,o=this.GetFreeCoin(),o=Z.Coin+"_"+o,t.push(o)),0<t.length&&j.GetItemDataAndIsShowBox("",t,0,i)}GetFreeCoin(){let e=K.DataModule().GetUser().GetData().mergeLevel,t=e-2;return t<1&&(t=1),3*(Number(K.DataModule().GetLocal().weapon.GetPrice(t))*(1-.01*e)*2)}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(Bg);return e.name=Bg.UIName,t.uiName=Bg.UIName,t}},bg=Bg,Ag=(bg.UIName="FeiTianBoxUI",(G=Lg=Lg||{}).box_Chest_FeiTiamBox="box_Chest_FeiTiamBox",G.box_Chest_FeiTiamBox2="box_Chest_FeiTiamBox2",G.box_Chest_FeiTiamBox3="box_Chest_FeiTiamBox3",class extends ${constructor(){super(...arguments),this.index=1,this.nowTime=0}Load(){null==this.view&&(this.view=this.CreatFGUIViewByView(sr.createInstance()),this.AllOnClick(),this.LoadImage()),this.SetLoadInfo()}LoadImage(){this.view.m_load_appoint.url=x.GetIcon("load_appoint")}AllOnClick(){this.view.m_Btn_Close.onClick(this,this.onBtn_Close),this.view.m_btn_get.onClick(this,this.m_btn_get),this.view.m_Btn_Yes.onClick(this,this.m_Btn_Yes)}onBtn_Close(){K.UIModule().HideUI(Ag.UIName)}m_btn_get(){let e=K.DataModule().GetUser().GetNowFreeCoinCount(),t=[Z.Coin+"_"+e,Z.Diamond+"_200",Z.BoxMerge+"_10"];2==this.index?(t=[Z.Coin+"_"+e,Z.Diamond+"_200",Z.BoxMerge+"_10",Z.Hero+"_Assassin7"],K.DataModule().GetUser().AddSaveKey("AppointTime2","true"),K.UIModule().HideUI(Ag.UIName)):(K.DataModule().GetUser().AddSaveKey("AppointTime","true"),this.SetLoadInfo()),j.GetItemDataAndIsShowBox("",t,0)}m_Btn_Yes(){1==this.index?K.DataModule().GetUser().AddSaveKey("AppointTime","false",A.SystemTime):K.DataModule().GetUser().AddSaveKey("AppointTime2","false",A.SystemTime),this.SetLoadInfo(),k.IsInWebTest||T.WECHAT!=k.Platform||CC.Instance.SubscribeMessage(Ag.UIName)}SetLoadInfo(){var e=K.DataModule().GetUser().GetSaveKey("AppointTime");e&&"true"==e.data&&(this.index=2,this.view.m_load_icon.url=x.GetFairyGUI_Icon("apponintReward2"),this.view.m_load_time.url=x.GetFairyGUI_Icon("appint_7"),this.view.m_texiao.visible=!0),this.setTime()}onUpdate(){this.view&&this.setTime()}setTime(){this.nowTime=K.DataModule().GetUser().GetNowAppointTime(this.index),-1==this.nowTime?this.view.m_c1.setSelectedIndex(0):0==this.nowTime?this.view.m_c1.setSelectedIndex(1):(this.view.m_c1.setSelectedIndex(2),this.view.m_time.text=f.Time_TransitionHour(this.nowTime,!0,!1,!0))}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null)}Show(){super.Show(),this.Load()}SetHideInfo(){}Hide(){this.SetHideInfo(),super.Hide(),this.UnLoad()}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(Ag);return e.name=Ag.UIName,t.uiName=Ag.UIName,t}}),xg=Ag,Tg=(xg.UIName="AppointUI",class extends ${constructor(){super(...arguments),this.isShare=!1,this.isShare2=!1,this.isShare3=!1,this.isSetNew=!1,this.lvList=[],this.weaponList=[],this.isChange=!1,this.pDic={},this.iDic={},this.isZhiYU=!1,this.isNew=!1}Load(){null==this.view&&(this.view=this.CreatFGUIViewByView(ps.createInstance()),this.AllOnClick(),this.LoadImage(),k.Platform!=T.OPPO&&k.Platform!=T.VIVO||(j.ShowNativeAd(this.view.m_OppoLookBtn,null,null,this.view.m_OppoIconAdBtn),this.view.m_YLPlatform.setSelectedPage("Oppo"))),this.SetLoadInfo()}LoadImage(){this.view.m_btn_change.m_n22.visible=!1,this.view.m_btn_change.m_n21.visible=!1}AllOnClick(){this.view.m_btn_all.onClick(this,this.m_btn_all),this.view.m_btn_change.onClick(this,this.m_btn_change),this.view.m_CloseBtn.onClick(this,this.close),this.view.m_OppoBtn_all.onClick(this,this.m_btn_all),this.view.m_oppoBtn_change.onClick(this,this.m_btn_change)}close(){K.UIModule().HideUI(Tg.UIName)}IsShareOrVideo(){this.isShare=z.Instance.GetShareStrategy(sC.chose_skill_all),this.isShare?j.IsShare(this.view.m_btn_all):this.isShare=j.IsVideoAndShare(this.view.m_btn_all),this.isShare2=z.Instance.GetShareStrategy(sC.chose_skill_refresh),this.isShare2?j.IsShare(this.view.m_btn_change):this.isShare2=j.IsVideoAndShare(this.view.m_btn_change)}Video_Call(){z.Instance.LW_StatisticsEvent(8022,K.DataModule().GetUser().GetData().userMedal.level,1),z.Instance.ChuanQuStatistics(80005),K.UIModule().GetUI(Tg.UIName).onList("Weapon1")}Video_Call2(){z.Instance.ChuanQuStatistics(80006),z.Instance.LW_StatisticsEvent(8022,K.DataModule().GetUser().GetData().userMedal.level,2);let e=K.UIModule().GetUI(Tg.UIName);e.LoadList(1),e.isChange=!0}m_btn_all(){let e=g.randomSkill_ALL,t=K.UIModule().GetUI(Tg.UIName),i=sC.chose_skill_all;t.isShare?j.GetRewardBtnFun(1,()=>{z.Instance.DayShareStrategy_Add(i,!0),t.Video_Call()},e):j.GetRewardBtnFun(0,()=>{z.Instance.DayShareStrategy_Add(i,!1),t.Video_Call()},e,t.view.m_btn_all)}m_btn_change(){let e=g.JiangShiTryQiangHuan,t=K.UIModule().GetUI(Tg.UIName),i=sC.chose_skill_refresh;t.isShare2?j.GetRewardBtnFun(1,()=>{z.Instance.DayShareStrategy_Add(i,!0),t.Video_Call2()},e):j.GetRewardBtnFun(0,()=>{z.Instance.DayShareStrategy_Add(i,!1),t.Video_Call2()},e,t.view.m_btn_change)}SetLoadInfo(){W.newPlayer&&0==this.isSetNew&&(this.isSetNew=!0,this.isNew=!0),T.ProjectSubCode&&A.TimeScaleZoom("WeaponRandomUI",!0,1e-4),this.isChange=!1,this.LoadList(),no.Statistics_T0R(g.randomSkill_Lv),no.Statistics_T0R(g.randomSkill_ALL),no.Statistics_T0R(g.randomSkill_Change)}LoadList(e=0){this.IsShareOrVideo();let o=K.DataModule().GetLocal().weapon.GetDatas().filter(e=>e.Level<=11&&1<e.Level);if(Zg.Try_weaponTry){let t=K.DataModule().GetUser().GetData().mergeLevel+10,i=K.DataModule().GetUser().GetData().mergeLevel+1,e=K.DataModule().GetLocal().weapon.GetDatas();t>e.length&&(t=e.length),o=K.DataModule().GetLocal().weapon.GetDatas().filter(e=>e.Level<=t&&e.Level>i)}this.weaponList=[];var t=f.RandomF1F2Num(o.length-1,3);this.weaponList.push(o[t[0]]),this.weaponList.push(o[t[1]]),this.weaponList.push(o[t[2]]),this.List_Refresh()}List_Refresh(){this.view.m_list.itemRenderer=Laya.Handler.create(this,this.onRenderItem,null,!1),this.view.m_list.numItems=this.weaponList.length,this.view.m_list.on(fairygui.Events.CLICK_ITEM,this,this.On_Item)}onRenderItem(e,t){let i=this.weaponList[e];this.lvList[e],this.isShare3=z.Instance.GetShareStrategy(sC.chose_skill_advance),this.isShare3?j.IsShare(t.m_Com):this.isShare3=j.IsVideoAndShare(t.m_Com),t.m_Com.m_text_lv.text="Lv "+i.Level,t.m_Com.m_type.visible=!0,t.m_Com.m_text_speed.text=K.DataModule().GetLz().GetText("MergeNewUI_text1"),t.m_Com.m_text_atk.text=K.DataModule().GetLz().GetText("MergeNewUI_text2"),t.m_Com.m_text_skill.text=K.DataModule().GetLz().GetText("MergeNewUI_text3");var o=K.DataModule().GetLocal().gameRule.GetBattlePoint_weapon("Weapon1");t.m_Com.m_text_info2.text=K.DataModule().GetLz().GetText("Equip_battleValue")+"+"+Math.floor((K.DataModule().GetLocal().gameRule.GetBattlePoint_weapon(i.ID)-o)/o*100)+"%",t.m_Com.m_n32.url=x.GetIcon(i.uiRes);let a=this;t.m_Com.m_text_info.text="【"+K.DataModule().GetLz().GetText("WN_"+i.ID)+"】",t.scaleX=0,t.m_Com.m_LvType.setSelectedIndex(0),t.m_Com.m_weaponTypeText.url="ui://InGameUI/"+i.Class,t.m_Com.m_Value1.text=i.AttSpeed.toString(),t.m_Com.m_Value2.text=i.Dmg.toString(),t.m_Com.m_Value3.text=Math.ceil(i.Dmg*i.AttSpeed).toString(),Laya.timer.once(300*(e+1),this,()=>{try{if(!a.view)return;t.scaleX=1,t.m_t0.play()}catch(e){console.log("err:",e)}})}On_Item(o){let e=this.view.m_list.getChildIndex(o),a=this.weaponList[e];{z.Instance.LW_StatisticsEvent(8022,K.DataModule().GetUser().GetData().userMedal.level,0),this.isChange?z.Instance.ChuanQuStatistics(80004):z.Instance.ChuanQuStatistics(80003);let e=g.JiangShiTryQiang,t=K.UIModule().GetUI(Tg.UIName),i=sC.chose_skill_advance;t.isShare3?j.GetRewardBtnFun(1,()=>{z.Instance.DayShareStrategy_Add(i,!0),t.onList(a.ID),t.refreshInGameUI(a.ID)},e):j.GetRewardBtnFun(0,()=>{z.Instance.DayShareStrategy_Add(i,!1),t.onList(a.ID),t.refreshInGameUI(a.ID)},e,o)}}refreshInGameUI(e){let t=K.UIModule().GetUI(Uf.UIName);t.view&&t.isShow&&t.changGun(e)}SetShowInfo(e){this.Show(),this.hideFun=e}onList(e){V.tryWeaponId=e,K.UIModule().HideUI(Tg.UIName)}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null)}Show(){super.Show(),this.Load(),j.RandomAdBtnPosThree(this.view.m_OppoLookBtn,this.view.m_CloseBtn,this.view.m_oppoBtn_change,this.view.width)}SetHideInfo(){Zg.Try_weaponTry&&(Zg.Try_weaponTry=!1),this.isNew&&(this.isNew=!1),T.ProjectSubCode&&A.TimeScaleZoom("WeaponRandomUI",!1),null!=this.hideFun&&(this.hideFun.call(this),this.hideFun=null)}Hide(){this.SetHideInfo(),super.Hide(),this.UnLoad()}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(Tg);return e.name=Tg.UIName,t.uiName=Tg.UIName,t}}),kg=Tg,Mg=(kg.UIName="WeaponRandomUI",class extends u{constructor(){super(...arguments),this.ModuleName="声音模块",this.isMusicOn=!0,this.isSoundOn=!0,this.isVibratesOn=!0,this.nowMusic="",this.sounds=[],this.music=null,this.isMusicPlaying=!1,this.onceTime=0,this.time=0,this.playtime=0}Init(){Mg.Instance=this,super.Init(),"HasSave"!=Laya.LocalStorage.getItem("AudioSet")&&(Laya.LocalStorage.setItem("AudioSet","HasSave"),Laya.LocalStorage.setItem("Music","true"),Laya.LocalStorage.setItem("Sound","true"),Laya.LocalStorage.setItem("VibratesOn","true")),null==Laya.LocalStorage.getItem("Music")&&Laya.LocalStorage.setItem("Music","true"),null==Laya.LocalStorage.getItem("Sound")&&Laya.LocalStorage.setItem("Sound","true"),null==Laya.LocalStorage.getItem("VibratesOn")&&Laya.LocalStorage.setItem("VibratesOn","true"),this.isMusicOn="true"==Laya.LocalStorage.getItem("Music"),this.isSoundOn="true"==Laya.LocalStorage.getItem("Sound"),this.isVibratesOn="true"==Laya.LocalStorage.getItem("VibratesOn"),this.FreshAudioSet(),this.InitOver(),T.IS_WECHAT_PLATFORM&&T.WX.onShow(function(){}),Laya.timer.frameLoop(1,this,this.update)}update(){this.time+=A.TimeDeltaNoScale,1e4<this.time&&(this.time=0)}FreshAudioSet(){this.isSoundOn?Laya.SoundManager.soundMuted=!1:(this.StopMusic(),Laya.SoundManager.soundMuted=!0),this.isMusicOn?(Laya.SoundManager.musicMuted=!1,this.PlayMusicAgain()):Laya.SoundManager.musicMuted=!0}SetVibrates(e){e?Laya.LocalStorage.setItem("VibratesOn","true"):Laya.LocalStorage.setItem("VibratesOn","false"),this.isVibratesOn=e}SetSound(e){e?Laya.LocalStorage.setItem("Sound","true"):Laya.LocalStorage.setItem("Sound","false"),this.isSoundOn=e}SetMusic(e){e?Laya.LocalStorage.setItem("Music","true"):Laya.LocalStorage.setItem("Music","false"),this.isMusicOn=e,this.FreshAudioSet()}SetALL(e){this.SetSound(e),this.SetMusic(e)}PlayOnce(e,t=0,i=0){let o=null;if(this.isSoundOn)return Mg.lastPlayTime[e]=Date.now(),0==i?o=Laya.SoundManager.playSound(e,1):Laya.timer.once(1e3*i,this,function(){Laya.SoundManager.playSound(e,1)}),o}PlayLoop(e,t=0){let i=null;return this.isSoundOn?i=Laya.SoundManager.playSound(e,0):i}OptimizePlayOnce(t,i=1){if(this.isSoundOn&&.1<this.time-this.onceTime){this.onceTime=this.time,Mg.lastPlayTime[t]=Date.now();let e=Laya.SoundManager.playSound(t,1);e&&(e.volume=i)}}CanSoundPlay(e,t){return Date.now()>this.getSoundLastPlayTime(e)+t}getSoundLastPlayTime(e){return Mg.lastPlayTime[e]||-1}OptimizePlayOnceDelay(e,t){let i=this;Laya.timer.once(1e3*t,this,function(){i.OptimizePlayOnce(e)})}ClearItemByAudioClip(t){if(0<this.sounds.length)for(let e=this.sounds.length-1;0<=e;e--)this.sounds[e].audioClip==t&&this.sounds.splice(e,1)}Stop(e){Laya.SoundManager.stopSound(e)}PlayMusic(e){this.isMusicOn&&(b.Warn("播放音乐",e),Laya.SoundManager.destroySound(this.nowMusic),k.Platform==T.ANDROID||k.Platform==T.IOS?Laya.SoundManager.playMusic(e):(this.StopMusic(),Laya.SoundManager.playSound(e,0))),this.nowMusic=e,this.isMusicPlaying=!0}PlayMusicByLoad(e){let t=this;this.isMusicOn&&Laya.loader.create(e,Laya.Handler.create(this,function(){b.Warn("加载成功",e),Laya.SoundManager.playMusic(e),Laya.SoundManager.musicMuted=!0,Laya.timer.once(1e3,this,function(){t.FreshAudioSet()})})),this.nowMusic=e,this.isMusicPlaying=!0}PlayMusicAgain(){""!=this.nowMusic&&(this.isMusicOn&&(b.Warn("重新播放音乐"),this.PlayMusic(this.nowMusic)),this.isMusicPlaying=!0)}StopMusic(){try{k.Platform!=T.ANDROID&&k.Platform!=T.IOS&&Laya.SoundManager.stopAllSound(),Laya.SoundManager.stopMusic(),this.isMusicPlaying=!1}catch(e){console.error("StopMusic error:"+e)}}StopAll(){try{T.IS_WECHAT_PLATFORM&&this.WXStopMusic(),Laya.SoundManager.stopAllSound(),this.isMusicPlaying=!1}catch(e){console.error("StopAll error:"+e)}}CreatSound(t){var i=Laya.Pool.getItem(t);if(null==i){i=T.WX.createInnerAudioContext(),this.sounds.push(i),i.src=t;let e=this;i.onEnded(()=>{e.ClearItemByAudioClip(i)})}return i}WXPlayMusic(e){null!=this.innerAuioContext&&(this.innerAuioContext.stop(),this.innerAuioContext.destroy()),this.innerAuioContext=T.WX.createInnerAudioContext(),this.innerAuioContext.autoplay=!0,this.innerAuioContext.src=k.httpResServerPath+e,this.innerAuioContext.loop=!0,this.innerAuioContext.play()}WXStopMusic(){null!=this.innerAuioContext&&(this.innerAuioContext.stop(),this.innerAuioContext.destroy())}}),Rg=Mg,Pg=(Rg.lastPlayTime={},class extends ${constructor(){super(...arguments),this.isAudio=!0,this.isSnake=!0,this.IsAudio=!0,this.IsVibrates=!0,this.List=[]}Load(){null==this.view&&(this.view=this.CreatFGUIViewByView(Yr.createInstance()),this.AllOnClick(),this.LoadImage()),this.SetLoadInfo()}LoadImage(){}AllOnClick(){this.view.m_closeBtn.onClick(this,this.onBtn_Close),this.view.m_audioBtn.onClick(this,this.onAudio),this.view.m_shakeBtn.onClick(this,this.onVibrates),this.view.m_copyBtn.onClick(this,this.copyBtn),this.view.m_YesBtn.onClick(this,this.m_YesBtn),this.view.m_textBtn.onClick(this,this.m_textBtn),this.view.m_btn_rms.onClick(this,this.m_btn_rms)}copyBtn(){k.Platform==T.TT&&T.Tt.setClipboardData({data:this.view.m_text_id.text,success(e){j.TopUI_TipShow("Copy successfully"),console.log("setClipboardData调用成功")},fail(e){j.TopUI_TipShow("Copy failed"),console.log("setClipboardData调用失败")}}),k.Platform,T.KUAISHOU}onBtn_Close(){K.UIModule().HideUI(Pg.UIName)}m_textBtn(){k.Platform==T.QQ?(K.UIModule().GetUI(an.UIName).isOne=!1,K.UIModule().ShowUI(an.UIName)):(K.UIModule().GetUI(qa.UIName).isOne=!1,K.UIModule().GetUI(qa.UIName).isEMS=!1,K.UIModule().ShowUI(qa.UIName))}m_btn_rms(){K.UIModule().GetUI(qa.UIName).isOne=!1,K.UIModule().GetUI(qa.UIName).isEMS=!0,K.UIModule().ShowUI(qa.UIName)}onAudio(){this.IsAudio=!this.IsAudio,Rg.Instance.SetSound(this.IsAudio),Rg.Instance.SetMusic(this.IsAudio),this.SetBtnInfo()}onVibrates(){this.IsVibrates=!this.IsVibrates,Rg.Instance.SetVibrates(this.IsVibrates),this.SetBtnInfo()}SetLoadInfo(){this.view.m_copyBtn.visible=!1,this.view.m_text_id.text=W.openId,k.Platform==T.TT&&(this.view.m_text_id.visible=!0,this.view.m_copyBtn.visible=!0),"false"==Laya.LocalStorage.getItem("Sound")&&(this.IsAudio=!1),"false"==Laya.LocalStorage.getItem("VibratesOn")&&(this.IsVibrates=!1),k.Platform!=T.OPPO&&k.Platform!=T.VIVO&&k.Platform!=T.QQ||(this.view.m_textBtn.visible=!0),T.IS_4399&&(this.view.m_n18.visible=!1,this.view.m_shakeBtn.visible=!1),"EN"==k.language&&(this.view.m_textBtn.visible=!0,this.view.m_btn_rms.visible=!0),this.SetUserInfo(),this.SetBtnInfo(),this.List_Refresh()}List_Refresh(){this.List=["user_infoTip1","user_infoTip2","user_infoTip3","user_infoTip4"],this.view.m_list.itemRenderer=Laya.Handler.create(this,this.onRenderItem,null,!1),this.view.m_list.numItems=this.List.length}onRenderItem(e,t){var i=this.List[e];t.m_icon.url=x.GetFairyGUI_Icon(i),t.m_text_info1.text=K.DataModule().GetLz().GetText(i),t.m_text_info2.text=t.m_text_info1.text;let o=K.DataModule().GetUser().GetData();if(0==e)t.m_text_count.text=o.userBattleInfo.totalCount.toString();else if(1==e)t.m_text_count.text=o.userBattleInfo.cv.toString();else if(2==e)t.m_text_count.text=o.userBattleInfo.killCount.toString();else if(3==e){let e=Math.floor(o.userBattleInfo.winCount/o.userBattleInfo.totalCount*100);e&&NaN!=e||(e=0),t.m_text_count.text=e+"%"}}SetBtnInfo(){this.view.m_audioBtn.m_offBg.visible=!this.IsAudio,this.view.m_shakeBtn.m_offBg.visible=!this.IsVibrates,this.IsAudio?this.view.m_audioBtn.m_text_info.text=K.DataModule().GetLz().GetText("text_on"):this.view.m_audioBtn.m_text_info.text=K.DataModule().GetLz().GetText("text_off"),this.IsVibrates?this.view.m_shakeBtn.m_text_info.text=K.DataModule().GetLz().GetText("text_on"):this.view.m_shakeBtn.m_text_info.text=K.DataModule().GetLz().GetText("text_off"),"EN"==k.language&&(this.view.m_shakeBtn.m_text_info.fontSize=24,this.view.m_audioBtn.m_text_info.fontSize=24)}SetUserInfo(){x.GetFairyGUI_Icon("testIcon3"),this.view.m_text_name.text="你",j.FreshUserTopExp(this.view.m_bar,this.view.m_expText,this.view.m_levelText)}m_YesBtn(){let e=this.view.m_inputText.text,t=(e=e.replace(/[^0-9A-Za-z\-]/gi,""),this.view.m_YesBtn.touchable=!1,this.view.m_YesBtn.grayed=!0,this);try{Laya.timer.once(5e3,this,function(){t.view&&(t.view.m_YesBtn.touchable=!0,t.view.m_YesBtn.grayed=!1)})}catch(e){}j.UseCdk_key(e)}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null)}Show(){super.Show(),this.Load()}SetHideInfo(){K.UIModule().ShowUI(Zg.UIName)}Hide(){this.SetHideInfo(),super.Hide(),this.UnLoad()}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(Pg);return e.name=Pg.UIName,t.uiName=Pg.UIName,t}}),Eg=Pg,Ng=(Eg.UIName="UserInfoUI",class extends ${constructor(){super(...arguments),this.nowHuoYue=0,this.List=[50,80,120,160,200],this.rewardList=[Z.Gear+"_5_3_1","Chest2_Coin",Z.UnlockHero+"_Seaman","Chest_Endless_3",Z.UnlockHero+"_Assassin7"],this.rewardTextList=["Super Armor","Coins","Ocean Warrior","Super Treasure","Assassin Seven"],this.rewardTextList4399=["Super Armor","Coins","Ocean Warrior","Super Treasure","Assassin Seven"],this.nowTime=0}Load(){null==this.view&&(this.view=this.CreatFGUIViewByView(Im.createInstance()),this.AllOnClick(),this.LoadImage()),this.SetLoadInfo()}LoadImage(){}AllOnClick(){let e=this;this.view.m_Btn_Close.onClick(this,this.onBtn_Close),this.view.m_btn_exit.onClick(this,this.onBtn_Close),this.view.m_btn_big.onClick(this,function(){j.GetRewardBtnFun(0,function(){e.onIndex(e.List.length-1)},g.HuoYueBig,e.view.m_btn_big)})}onBtn_Close(){K.UIModule().HideUI(Ng.UIName)}SetBig(){this.view.m_btn_big.touchable=!1;let e=this.view.m_btn_big.m_Com,t=this.List[this.List.length-1],i=this.List.length-1;e.m_text_name.text=K.DataModule().GetLz().GetText("Hero_Assassin7"),e.m_t0.stop(),this.nowHuoYue>=t&&(K.DataModule().GetUser().GetSaveKey("huoYueEnd"+i)?(e.m_C_get.setSelectedIndex(2),e.m_load_icon0.grayed=!0,e.m_n59.grayed=!0):(e.m_t0.play(null,-1),this.view.m_btn_big.touchable=!0,e.m_C_get.setSelectedIndex(1)))}onIndex(e){console.log("领取",e);let t=[];switch(e){case 0:var i=Z.Gear+"_5_4_1",i=K.DataModule().GetUser().GetUserItemData(i);j.ShowGetReward([i],"",!1,"",null),K.DataModule().GetUser().GetItem([i],"");break;case 1:t.push(Z.Coin+"_"+K.DataModule().GetUser().GetNowFreeCoinCount());break;case 2:t.push(Z.Hero+"_Seaman");break;case 3:t=K.DataModule().GetLocal().lottery.GetChest("Chest_Endless_3");break;case 4:t.push(Z.Hero+"_Assassin7")}K.DataModule().GetUser().AddSaveKey("huoYueEnd"+e,"true"),0<t.length&&j.GetItemDataAndIsShowBox("",t,0),this.SetLoadInfo()}SetLoadInfo(){T.IS_4399&&(this.rewardTextList=this.rewardTextList4399);let e=2*f.Time_OneDay,t=K.DataModule().GetUser().GetSaveKey("HuoYue_Time");t||(K.DataModule().GetUser().AddSaveKey("HuoYue_Time",(A.SystemTime+e).toString()),t=K.DataModule().GetUser().GetSaveKey("HuoYue_Time")),this.nowTime=Number(t.data)-A.SystemTime,this.SetTime(),this.nowHuoYue=K.DataModule().GetUser().GetData().huoyue,this.SetBar(),this.List_Refresh(),this.SetBig()}onUpdate(){this.view&&0<this.nowTime&&(this.nowTime-=1e3*A.TimeDeltaNoScale,this.SetTime())}SetTime(){this.nowTime<=0&&(this.nowTime=0),this.view.m_text_time.text="Refresh Time:"+f.Time_TransitionHour(this.nowTime,!0,!1,!0)}List_Refresh(){this.view.m_list.itemRenderer=Laya.Handler.create(this,this.onRenderItem,null,!1),this.view.m_list.numItems=this.List.length-1,this.view.m_list.on(fairygui.Events.CLICK_ITEM,this,this.On_Item)}onRenderItem(e,t){let i=this.List[e],o=t.m_Com;t.touchable=!1,2<=e&&o.m_C_rare.setSelectedIndex(1),o.m_C_lv.setSelectedIndex(e),o.m_text_name.text=this.rewardTextList[e],o.m_t0.stop(),this.nowHuoYue>=i&&(K.DataModule().GetUser().GetSaveKey("huoYueEnd"+e)?(o.m_C_get.setSelectedIndex(2),o["m_load_icon"+e].grayed=!0,o.m_n44.grayed=!0,o.m_n46.grayed=!0):(o.m_t0.play(null,-1),t.touchable=!0,o.m_C_get.setSelectedIndex(1)))}On_Item(e){e=this.view.m_list.getChildIndex(e);this.List[e],this.onIndex(e)}SetBar(){f.SetBarValue(this.view.m_bar1,200,this.nowHuoYue),this.view.m_bar1.m_text_now.text=this.nowHuoYue.toString()}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null)}Show(){super.Show(),this.Load()}SetHideInfo(){}Hide(){this.SetHideInfo(),super.Hide(),this.UnLoad()}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(Ng);return e.name=Ng.UIName,t.uiName=Ng.UIName,t}}),Fg=Ng,Og=(Fg.UIName="HuoYueUI",class extends ${constructor(){super(...arguments),this.List=[1,2,3,4,5,6,7],this.debris=[5,5,10,5,5,10,10],this.rewardName=[],this.nowDay=0,this.isSign=!1,this.isLoop=!1,this.isLoadDataTime=!1,this.isDouble=!0,this.jumpFun=!1,this.isShare=!1}Load(){null==this.view&&(this.view=this.CreatFGUIViewByView(Hr.createInstance()),this.AllOnClick(),this.AllEvent(),this.LoadImage(),z.Instance.ChuanQuStatistics(80013)),this.SetLoadInfo()}LoadImage(){this.view.m_load_bg1.url=x.GetIcon("SignNewYearBg1"),this.view.m_load_bg2.url=x.GetIcon("SignNewYearBg2"),this.view.m_load_bg3.url=x.GetIcon("SignNewYearBg4"),this.view.m_load_bg4.url=x.GetIcon("SignNewYearBg4"),"ZH_CN"!=k.language&&(this.view.m_n13.m_n9.fontSize=20),f.Text_AutoSize(this.view.m_text_info,710,j.GetTextID("SignNewYearRewardtip2")),f.Text_AutoSize(this.view.m_n13.m_n9,200,j.GetTextID("SignNewYearRewardtip3"))}AllEvent(){}Event_Destroy(){}GetNowSignData(e){var t=K.DataModule().GetUser().GetData().signNewYearData.data;for(let e=0;e<t.length;e++);}AllOnClick(){this.view.m_Btn_Close.onClick(this,this.onBtn_Close),this.view.m_getBtn.onClick(this,this.on_getBtn)}on_getBtn(){this.GetDayItemReward(this.nowDay-1,!1),K.DataModule().GetUser().InterstitialAdNumberSign++,K.UIModule().HideUI(Og.UIName)}on_day7(){}onBtn_Close(){K.UIModule().HideUI(Og.UIName)}SetLoadInfo(){this.isLoadDataTime=W.loginDataEnd;var e=K.DataModule().GetUser().GetData().signNewYearData,e=(this.nowDay=e.nowDay,e.data[this.nowDay-1]);this.isSign=e.isSign,this.isSign?this.view.m_Btn.setSelectedPage("end"):this.view.m_Btn.setSelectedPage("show"),k.isTestLog&&console.warn("今日数据",e,"是否签到",this.isShow),this.List_Refresh(),this.IsShareOrVideo()}List_Refresh(){this.view.m_list.itemRenderer=Laya.Handler.create(this,this.onRenderItem,null,!1),this.view.m_list.numItems=8,this.view.m_list.on(fairygui.Events.CLICK_ITEM,this,this.On_Item),this.SetDay7()}SetDay7(){this.List[6];let e=K.DataModule().GetUser().GetData().signNewYearData.data[6],t=this.view.m_btn_day7;7==this.nowDay?t.m_C_type.setSelectedIndex(1):t.m_C_type.setSelectedIndex(0),t.m_t0.stop(),e.isSign?t.m_C_end.setSelectedIndex(1):(7==this.nowDay&&t.m_t0.play(null,-1),t.m_C_end.setSelectedIndex(0)),f.Text_AutoSize(t.m_text_text,300,j.GetTextID("SignNewYearReward6")),t.m_n12.text=K.DataModule().GetLz().GetTextByPar("SignNewYearRewardtip1",7..toString())}onRenderItem(i,o){if(3==i||4==i)o.visible=!1;else{4<i&&(i-=2),this.List[i];let e=i+1;o.touchable=!1;var a=K.DataModule().GetUser().GetData().signNewYearData.data[i];"ZH_CN"!=k.language&&(o.m_text_name.fontSize=18),f.Text_AutoSize(o.m_text_name,180,j.GetTextID("SignNewYearReward"+i)),o.m_text_day.text=K.DataModule().GetLz().GetTextByPar("SignNewYearRewardtip1",e.toString()),o.m_text_count.text="x"+this.debris[i],this.nowDay==e?o.m_C_type.setSelectedIndex(1):o.m_C_type.setSelectedIndex(0),o.m_t0.stop(),a.isSign?o.m_C_end.setSelectedIndex(1):(this.nowDay==e&&o.m_t0.play(null,-1),o.m_C_end.setSelectedIndex(0));let t="";switch(i){case 0:t=x.GetIcon("item_CoinHeap");break;case 1:t=x.GetFairyGUI_Icon("signnewYearImage_2");break;case 2:t=x.GetIcon("box_Chest_Endless");break;case 3:t=x.GetIcon("Item_BoxGold");break;case 4:t=x.GetIcon("WeapenChest");break;case 5:t=x.GetFairyGUI_Icon("signnewYearImage_6")}o.m_load_icon.url=t}}On_Item(e){}GetDayItemReward(i,e=0){let o=[],a="";switch(i){case 0:o.push(j.GetItemDataAndIsShowBox("",[Z.Coin+"_10000"],3)[0]),o.push(j.GetItemDataAndIsShowBox("",[Z.HeroPiece+"_PrincePorgy_5"],3)[0]);break;case 1:o.push(j.GetItemDataAndIsShowBox("",[Z.BaoZhu+"_"+Z.BaoZhu+"_2"],3)[0]),o.push(j.GetItemDataAndIsShowBox("",[Z.HeroPiece+"_PrincePorgy_5"],3)[0]);break;case 2:a="box_Chest_Endless";var n=j.GearSetLv(Z.Gear,2,4,!0);o.push(n),o.push(j.GetItemDataAndIsShowBox("",[Z.HeroPiece+"_PrincePorgy_10"],3)[0]);break;case 3:a="Item_BoxGold";n=j.GearSetLv(Z.Gear,2,5,!0);o.push(n),o.push(j.GetItemDataAndIsShowBox("",[Z.HeroPiece+"_PrincePorgy_5"],3)[0]);break;case 4:a="WeapenChest";let e=Z.Diamond+"_200",t=K.DataModule().GetUser().WeaponSkin_GetRare(3);1<=t.length&&(n=t[f.GetF1_F2RandomValue(0,t.length-1)],e=Z.WeaponSkin+"_"+n.ID),o.push(j.GetItemDataAndIsShowBox("",[e],3)[0]),o.push(j.GetItemDataAndIsShowBox("",[Z.HeroPiece+"_PrincePorgy_5"],3)[0]);break;case 5:var n=j.GearSetLv(Z.Gear,2,3,!0),s=j.GearSetLv(Z.Gear,2,4,!0),l=j.GearSetLv(Z.Gear,2,5,!0);o.push(n),o.push(s),o.push(l),o.push(j.GetItemDataAndIsShowBox("",[Z.Diamond+"_666"],3)[0]),o.push(j.GetItemDataAndIsShowBox("",[Z.HeroPiece+"_PrincePorgy_10"],3)[0]);break;case 6:o.push(j.GetItemDataAndIsShowBox("",[Z.Hero+"_PrincePorgy"],3)[0])}j.ShowGetReward(o,a,!1),K.DataModule().GetUser().GetItem(o,at.sign),K.DataModule().GetUser().GetData().signNewYearData.data[i].isSign=!0,this.SetLoadInfo(),K.DataModule().GetUser().SaveData()}SetJumpType(e,t){this.jumpFun=t,K.UIModule().ShowUI(Og.UIName)}IsShareOrVideo(){}onUpdate(){!this.view||this.isLoadDataTime||W.loginDataEnd&&(this.SetLoadInfo(),this.isLoadDataTime=!0)}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null)}Show(){super.Show(),this.Load()}SetHideInfo(){this.jumpFun&&(this.jumpFun=!1,K.UIModule().GetUI(ya.UIName).RefreshList()),f.PrioritySetShow(),this.Event_Destroy()}Hide(){this.SetHideInfo(),super.Hide(),this.UnLoad()}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(Og);return e.name=Og.UIName,t.uiName=Og.UIName,t}}),Hg=Og;Hg.UIName="SignNewYearUI";var Vg,zg,Wg=class extends ${constructor(){super(...arguments),this.interstitialAdSwitch=0,this.onScreenAdSwitch=0,this.isHasAddToDesktop=!1,this.installShortcutTimes=0,this.lastShowFeiTianBoxTime=0,this.TryDXZ=!1,this.isOneGame=!0,this.now_OneGameOver=0,this.SpeedBtn_nowTime=0,this.appointTime=0,this.isCaiQian=!1,this.bool_IsShowXinShouLiBao=!1,this.getHeroBtnKey=[],this.GetVideoHeroListMax=0,this.isShowUnlock=!1,this.redDot_time=2,this.FeiTianBoxCDTime=3e4,this.nowFeiTianBoxID="",this.FeiTianBox_Weight=[]}Load(){if(null==this.view){let e=K.UIModule().GetUI(wC.UIName);e&&(e.isShowLaiwan=!1);var t=Math.floor(100*Math.random());50<t&&console.warn("原生点击关闭中奖了",50<t);let i=this;"Marion"==K.DataModule().GetUser().GetData().nowChooseHero&&(K.DataModule().GetUser().GetData().nowChooseHero="Farmer"),this.view=this.CreatFGUIViewByView(Gi.createInstance()),k.Platform!=T.OPPO&&k.Platform!=T.VIVO||(this.view.m_YLPlatform.setSelectedPage("Oppo"),j.ShowNativeAd(null,null,null,this.view.m_OppoIconAdBtn)),this.view.m_tianJiangBoxBtn.onClick(this,function(){i.Box3_GetBtn()}),0==K.DataModule().GetPlatform().PlatformData.LuanDouMode?this.view.m_Mode.setSelectedPage("Normal"):this.view.m_Mode.setSelectedPage("LuanDou"),T.IsIPhoneXScreen?k.Platform==T.KUAISHOU?this.view.m_IsIphoneX.setSelectedIndex(3):this.view.m_IsIphoneX.setSelectedIndex(1):k.Platform==T.KUAISHOU?this.view.m_IsIphoneX.setSelectedIndex(2):this.view.m_IsIphoneX.setSelectedIndex(0),this.view.m_btn_huoyue.onClick(this,()=>{K.UIModule().ShowUI(Fg.UIName)}),this.view.m_taskBtn.visible=k.Chuanqu_OnTask,this.view.m_taskBtn.onClick(this,()=>{K.UIModule().ShowUI(Gg.UIName)}),this.appointTime=K.DataModule().GetUser().GetNowAppointTime(),-2!=this.appointTime&&(this.view.m_appointBtn.visible=!0),this.view.m_appointBtn.onClick(this,()=>{K.UIModule().ShowUI(xg.UIName)}),this.view.m_btn_heroBox.onClick(this,()=>{K.UIModule().ShowUI(Yo.UIName)}),this.view.m_Btn_mode.onClick(this,this.onBtnMode),this.view.m_local.onClick(this,()=>{k.IsOpenNewGameScene?K.UIModule().ShowUI(Zp.UIName):(V.gameMode="Normal",i.startGame(),z.Instance.ChuanQuStatistics(50001))}),this.view.m_nianBtn.onClick(this,()=>{k.FightNian?(z.Instance.ChuanQuStatistics(50002),0<K.DataModule().GetUser().GetBaoZhuItem().count?(K.DataModule().GetUser().UseBaoZhu(1),V.gameMode="Nian",i.startGame(),z.Instance.ChuanQuStatistics(50003)):(K.AudioModule().PlayOnce(x.GetSound2("CuoWu")),j.TopUI_TipShow("Spin to get more firecrackers!"))):(K.AudioModule().PlayOnce(x.GetSound2("CuoWu")),j.TopUI_TipShow("Coming soon..."))}),this.view.m_line.onClick(this,()=>{K.DataModule().GetUser().GetData().name=K.DataModule().GetUser().GetData().name,K.DataModule().GetUser().SaveData(),V.isNet=!0,K.MGOBEModule().name=K.DataModule().GetUser().GetData().name,K.UIModule().HideUI(Wg.UIName),q.EcsGameMgr.StartGame(og)}),this.view.m_userTopExp.onClick(this,()=>{K.UIModule().ShowUI(va.UIName),no.Statistics_T06(Vg.m_userTopExp)}),this.view.m_userTopExp_reward.onClick(this,()=>{no.Statistics_T06(Vg.m_userTopExp_reward),K.UIModule().ShowUI(va.UIName)}),k.Platform,T.WECHAT,k.Platform,T.QQ,this.view.m_btn_rank.onClick(this,()=>{k.Platform==T.WECHAT?T.WX.getSetting({success(e){console.log("调用授权yes",e),e.authSetting["scope.userInfo"]?CC.Instance.CDB_loginData():T.WX.authorize({scope:"scope.userInfo",success(){CC.Instance.CDB_loginData()},fail(){CC.Instance.CDB_loginData()}})}}):k.Platform==T.QQ&&Ko.Instance.QQ_Rank()}),k.Platform==T.QQ&&(null==K.DataModule().GetUser().GetItemByID("QQ_AddToDesktop")&&(this.view.m_qqAddBtn.visible=!0),this.view.m_qqAddBtn.onClick(this,()=>{Ko.Instance.saveAppToDesktop()}),f.QQminiGame_IsShield(Ko.Instance.systemData)?this.view.m_MoreGamesBtn.visible=!0:this.view.m_MoreGamesBtn.visible=!1),this.view.m_MoreGamesBtn.onClick(this,()=>{k.Platform==T.QQ?Ko.Instance.AppBoxShow():window.MoreGames&&window.MoreGames()}),this.view.m_signBtn.onClick(this,()=>{no.Statistics_T06(Vg.m_signBtn),z.Instance.LeYou_action(101),K.UIModule().ShowUI(pa.UIName)}),this.view.m_wheelBtn.onClick(this,()=>{no.Statistics_T06(Vg.m_wheelBtn),K.UIModule().ShowUI(Xo.UIName)}),this.view.m_shopBtn.onClick(this,()=>{no.Statistics_T06(Vg.m_shopBtn),K.UIModule().ShowUI(Yo.UIName)}),this.view.m_cdkBtn.onClick(this,()=>{no.Statistics_T06(Vg.m_cdkBtn),K.UIModule().ShowUI(fg.UIName)}),this.view.m_cdkBtn.visible=!1,k.Platform==T.TT&&(this.view.m_cdkBtn.visible=!0),this.view.m_btn_speed.onClick(this,()=>{var e=g.cover_speed;j.GetRewardBtnFun(0,function(){var e=K.DataModule().GetUser().GetData().mergeLevel,t=4*K.DataModule().GetLocal().weapon.Get("Weapon"+e).Produce_Gold,e=Number(K.DataModule().GetLocal().weapon.GetPrice(e))*(1-.01*e)*2*2/(60*t);console.log("需要倍数",e),K.DataModule().GetUser().speedTimeDouble=Math.ceil(e),K.DataModule().GetUser().AddSaveKey("m_btn_speed","true",A.SystemTime),i.SetSpeedBtnIsShow()},e)}),this.view.m_playerBtn.onClick(this,()=>{K.UIModule().ShowUI(Eg.UIName)});var t=window.ProjectSubCode,o=("laiwan"===t&&(this.view.m_playerBtn.visible=!0),this.view.m_getHeroBtn.onClick(this,()=>{no.Statistics_T06(Vg.m_getHeroBtn),j.GetRewardBtnFun(0,()=>{j.GetItemDataAndIsShowBox(at.coverHero,i.getHeroBtnKey,0),i.view.m_getHeroBtn.visible=!1},g.CoverHeroVideo)}),this.view.m_newYear2021Btn.visible=k.use2021NewYear,this.view.m_newYear2021Btn.onClick(this,()=>{no.Statistics_T06(Vg.m_newYear2021Btn),K.UIModule().ShowUI(_a.UIName)}),this.setDesktopBtn(!1,"6"),null==K.DataModule().GetUser().GetItemByID("SaveKey_AddToDesktop")&&this.setDesktopBtn(!0,"3"),k.Platform!=T.VIVO&&k.Platform!=T.OPPO||!K.DataModule().GetPlatform().PlatformData.SaveAppToDesktop||K.DataModule().GetUser().isShowSaveAppToDesktop||(k.Platform==T.VIVO&&12e4<(o=(new Date).getTime())-this.installShortcutTimes&&(this.installShortcutTimes=o,vo.Instance.isHasShortcutInstalled()),k.Platform==T.OPPO&&Do.Instance.isHasShortcutInstalled(),K.DataModule().GetUser().isShowSaveAppToDesktop=!0),"laiwan"!==t&&!T.ProjectSubCode&&k.Platform!=T.WECHAT&&k.Platform!=T.TT||(null==K.DataModule().GetUser().GetItemByID("SaveKey_AddToDesktop")?(this.setDesktopBtn(!0,"1"),this.view.m_desktopBtn.m_c1.setSelectedPage("newPlayerReward")):this.setDesktopBtn(!1,"2")),0==f.GetP().isSignNewYear&&(this.view.m_Btn_signNewYear.visible=!1),this.view.m_Btn_signNewYear.onClick(this,function(){K.UIModule().ShowUI(Hg.UIName)}),this.view.m_desktopBtn.onClick(this,()=>{K.UIModule().ShowUI(cg.UIName)}),k.NewVer&&(this.view.m_weaponSkinCom.visible=!0,this.view.m_weaponSkinCom.m_weaponSkinBtn.onClick(this,()=>{no.Statistics_T06(Vg.m_weaponSkinBtn),j.WeaponSkinComShow_Refresh(i.view.m_weaponSkinCom.x,i.view.m_weaponSkinCom.y,()=>{let e=K.UIModule().GetUI(Wg.UIName);e.isShow&&e.SetWeaponSkin()},Wg.UIName)})),this.view.m_medalBtn.onClick(this,()=>{K.UIModule().ShowUI(ra.UIName),no.Statistics_T06(Vg.m_medalBtn)}),this.view.m_HeroBtn.onClick(this,()=>{no.Statistics_T06(Vg.m_HeroBtn),K.UIModule().HideUI(Wg.UIName),K.UIModule().GetUI(Ha.UIName).SetDefaultHero(),K.UIModule().ShowUI(Ha.UIName)}),this.view.m_EquitBtn.onClick(this,()=>{no.Statistics_T06(Vg.m_EquitBtn),K.UIModule().HideUI(Wg.UIName),K.UIModule().GetUI(Ha.UIName).SetDefaultEquit(),K.UIModule().ShowUI(Ha.UIName)}),j.FreshUserTopExp(i.view.m_userTopExp.m_bar,i.view.m_userTopExp.m_expText,i.view.m_userTopExp.m_levelText),j.FreshMedal(this.view.m_medalBtn.m_medal,K.DataModule().GetUser().GetData().userMedal.level,K.DataModule().GetUser().GetData().userMedal.star),q.EcsGameMgr.nowGame.UseCoverBG(),q.EcsGameMgr.nowGame.CreatMerge(),K.DataModule().GetUser().GetData().nowChooseHero),t=K.DataModule().GetUser().GetEquitWeapon();q.EcsGameMgr.nowGame.ChangeHero(o,t),K.UIModule().ShowUI(Ua.UIName),K.UIModule().ShowUI(Mo.UIName),K.UIModule().ShowUI(Fa.UIName),T.IS_OPPO_PLATFORM&&(this.view.m_YLPlatform.setSelectedPage("Oppo"),this.view.m_DrawerBtn.onClick(this,()=>{Do.Instance.showGamePortalAd(function(){})}),K.DataModule().GetPlatform().PlatformData.ShowGamePortalAd?this.view.m_DrawerBtn.visible=!0:this.view.m_DrawerBtn.visible=!1),this.showWeaponTips()}this.SetCoverBtnGuiDance(),this.SetLoadInfo()}onBtnMode(){K.UIModule().ShowUI(Kp.UIName)}m_nianBtn(){this.view.m_nianBtn.grayed?j.TopUI_TipShow("Bronze rank open"):(z.Instance.ChuanQuStatistics(50002),0<K.DataModule().GetUser().GetBaoZhuItem().count?(K.DataModule().GetUser().UseBaoZhu(1),V.gameMode=$I.Nian,this.startGame(),z.Instance.ChuanQuStatistics(50003)):(K.AudioModule().PlayOnce(x.GetSound2("CuoWu")),"EN"==k.language?j.TopUI_TipShow("Need Ticket?  Get it from Big Wheel!"):j.TopUI_TipShow("Spin to get more firecrackers!")))}setDesktopBtn(e,t){var i=K.DataModule().GetUser().GetSaveKey("AddToDesktopUI_Time");!(i&&A.SystemTime>Number(i.data))&&0!=K.DataModule().GetPlatform().PlatformData.ShowHeroRes?this.view.m_desktopBtn.visible=e:this.view.m_desktopBtn.visible=!1}SetTryHeroInfo(){K.DataModule().GetUser().SetTryHeroTimeCard()&&(e=K.DataModule().GetUser().GetData().nowChooseHero,K.DataModule().GetUser().IsHeroBuy(e)||(K.DataModule().GetUser().ChangeHero("Farmer"),q.EcsGameMgr.nowGame.ChangeHero("Farmer",K.DataModule().GetUser().GetEquitWeapon())));var e=K.DataModule().GetUser().GetItemByTypeAndId(Z.HeroTryCard,"All");e&&e.count<=0&&(e=K.DataModule().GetUser().GetData().nowChooseHero,K.DataModule().GetUser().IsHeroBuy(e)||(K.DataModule().GetUser().ChangeHero("Farmer"),q.EcsGameMgr.nowGame.ChangeHero("Farmer",K.DataModule().GetUser().GetEquitWeapon())))}startGame(){K.UIModule().GetNowTopUIName()==Kp.UIName&&K.UIModule().HideUI(Kp.UIName),W.luandouReviveTime=0;let e=K.UIModule().GetUI(Wg.UIName),t=K.DataModule().GetLocal().gameRule.GetWeaponSkin_Tryout(),i=K.DataModule().GetLocal().gameRule.Get("Hero_Tryout"),o=(k.IsGM&&(t.F1=100),!1),a=!1,n=(Math.random()<.01*t.F1&&(o=!0),!1),s=(Math.random()<.01*i.F1&&(n=!0),K.DataModule().GetUser()),l=s.GetData().userMedal;var r;V.IsGameMode_Zombie()?(n=!1,o=!1,a=!0):V.gameMode==$I.Normal&&(r=K.DataModule().GetLocal().medal.GetByLevel(l.level),l.star+1>=r.Star&&s.GetData().mergeLevel<K.DataModule().GetLocal().weapon.GetDatas().length-3&&(console.log("下级升星"),n=!1,o=!1,a=!0,Wg.Try_weaponTry=!0)),K.DataModule().GetUser().GuidanceWindowIsOpen_Try()||(n=!1,o=!1,a=!1),b.Warn("试用英雄"+n+"使用武器皮肤"+o);let h=K.DataModule().GetUser().GetHeroPieceList_Now(!0),m=s.GetData(),d=s.GetItemByID(m.equipList[0]),c=K.DataModule().GetLocal().weapon.Get(d.id).Type,u=K.DataModule().GetUser().GetWeaponSkinList_Now(c),p=[];for(let t=0;t<u.length;t++){let e=!1;(e=u[t].ID==d.data?!0:e)||p.push(u[t])}if(0==h.length&&(n=!1,b.Warn("没有英雄皮肤")),0==p.length&&(o=!1,b.Warn("没有武器皮肤")),W.Guidance_TryHero&&0==this.TryDXZ)this.TryDXZ=!0,K.UIModule().GetUI(pg.UIName).SetShowInfo(null,"Seaman",()=>{K.UIModule().GetUI(Wg.UIName).startGameCall()});else if(n){ge.Instance.Report_UI_Show(g.tryHeroSkin);let e=K.UIModule().GetUI(pg.UIName),t=Ut.RandomGet(h);e.SetShowInfo(null,t.ID,()=>{K.UIModule().GetUI(Wg.UIName).startGameCall()})}else o?e.isTrySkin():a?K.UIModule().GetUI(kg.UIName).SetShowInfo(()=>{K.UIModule().GetUI(Wg.UIName).startGameCall()}):e.startGameCall()}startGameCall(){function e(){var e;k.isWxNew&&j.ShowMatchNewUI(),V.IsGameMode_Zombie()&&(z.Instance.LeYou_action(1001,11),e=K.DataModule().GetUser().getDayTime($I.Zombie),K.DataModule().GetUser().AddSaveKey("ModeUI_DayTime"+$I.Zombie,"",e+1)),V.InGameIng=!0,z.Instance.StatisticsEvent(aC.PlayGame),K.DataModule().GetUser().SaveData(),V.isNet=!1,K.UIModule().HideUI(Wg.UIName),K.UIModule().HideUI(Zp.UIName),SC.GameBattleStart(),q.EcsGameMgr.StartGame(og),no.Statistics_T08(),z.Instance.LW_StatisticsEvent(1005,K.DataModule().GetUser().GetData().userLevel.level.toString(),1,"1"),W.OneGameTime=0,W.OneGameRevive=0,W.OneGameLv=0,""==V.tryWeaponSkinId&&K.DataModule().GetUser().IsUseTryWeaponIng()}!T.ProjectSubCode&&!V.IsGameMode_Zombie()&&(K.DataModule().GetUser().GuidanceWindowIsOpen_Try()||0!=Wg.NextSkillRankdom)?K.UIModule().GetUI(vg.UIName).SetShowInfo(e):e()}showWeaponTips(){var e=K.DataModule().GetUser().GetEquitWeapon(),e=K.DataModule().GetLocal().weapon.Get(e);this.view.m_WeaponTipsCom.m_weaponTips.text=K.DataModule().GetLz().GetText(e.Type)}refreshAddToDesktop(){null==K.DataModule().GetUser().GetItemByID("SaveKey_AddToDesktop")?(this.setDesktopBtn(!0,"1"),this.view.m_desktopBtn.m_c1.setSelectedPage("newPlayerReward")):(this.setDesktopBtn(!1,"2"),this.SetSpeedBtnIsShow())}SetTryWeaponInfo(){let e=K.DataModule().GetUser().GetData().equipList[0],t=K.DataModule().GetUser().GetItemByID(e);var i,o;""==t.data||(i=K.DataModule().GetUser().GetItemByTypeAndtableId(Z.WeaponSkin,t.data))&&"true"==i.data||(i=K.DataModule().GetUser().GetItemByTypeAndId(Z.WeaponTryCard,t.data))&&i.count<1&&(t.data="",i=K.DataModule().GetUser().GetData().nowChooseHero,o=K.DataModule().GetUser().GetEquitWeapon(),q.EcsGameMgr.nowGame.ChangeHero(i,o))}isTrySkin(){let e=K.DataModule().GetUser(),t=e.GetData(),i=e.GetItemByID(t.equipList[0]),o=K.DataModule().GetLocal().weapon.Get(i.id).Type,a=[],n=e.GetWeaponSkinList_Now(o);for(let t=0;t<n.length;t++){let e=!1;(e=n[t].ID==i.data?!0:e)||a.push(n[t])}let s=[];for(let e=0;e<a.length;e++)s.push(a[e].Weight);var l;k.isTestLog&&console.log("当前可以解锁的皮肤列表",a,"类型",o),1<=a.length?(l=a[f.GetWeightRandom(s)].ID,K.UIModule().GetUI(lg.UIName).SetShowInfo(i,l,()=>{K.UIModule().GetUI(Wg.UIName).startGameCall()})):K.UIModule().GetUI(Wg.UIName).startGameCall()}SetWeaponSkin(){var e=K.DataModule().GetUser().GetData().equipList[0],e=K.DataModule().GetUser().GetItemByID(e),t=K.DataModule().GetLocal().weapon.Get(e.id).Type;this.view.m_weaponSkinCom.m_weaponSkinBtn.m_text_2.text=K.DataModule().GetLz().GetText("weaponSkin_Tip_"+t),""==e.data?(j.FreshRewardItem(this.view.m_weaponSkinCom.m_weaponSkinBtn.m_rewardItem,e,!1,"","",!1,"","","WeaponSkinComUI"),this.view.m_weaponSkinCom.m_weaponSkinBtn.m_rewardItem.m_gear.m_bg.visible=!1,this.view.m_weaponSkinCom.m_weaponSkinBtn.m_rewardItem.m_Count.visible=!1):(t=K.DataModule().GetUser().GetItemByTypeAndtableId(Z.WeaponSkin,e.data),j.FreshRewardItem(this.view.m_weaponSkinCom.m_weaponSkinBtn.m_rewardItem,t,!1),this.view.m_weaponSkinCom.m_weaponSkinBtn.m_rewardItem.m_Count.visible=!1,this.view.m_weaponSkinCom.m_weaponSkinBtn.m_rewardItem.m_gear.m_bg.visible=!1),this.view.m_weaponSkinCom.m_weaponSkinBtn.m_rewardItem.m_Image_Piece.visible=!1,this.view.m_weaponSkinCom.m_weaponSkinBtn.m_rewardItem.m_gear.m_rare_bg.alpha=0}IntoSnowScene(){}isShowInterstitialAd(){k.Platform!=T.WECHAT&&k.Platform!=T.ANDROID&&k.Platform!=T.QQ||1<=W.OneGameOver&&this.now_OneGameOver!=W.OneGameOver&&(K.PlatformModule().ShowInterstitialAd(),this.now_OneGameOver=W.OneGameOver)}Guidance_shop_key(){var e;this.view.m_shopBtn.grayed||(e=Laya.LocalStorage.getItem("AddUserKey"),this.view.m_shopBtn.m_gui1.visible=null!=e&&""!=e&&"end"!=e,this.view.m_shopBtn.m_gui2.visible=this.view.m_shopBtn.m_gui1.visible)}SetSpeedBtnIsShow(){if(this.view.m_btn_speed.visible=!1,!this.IsShowAddToDesktopUI()){let e=this.view.m_btn_speed.visible=!0,t=K.DataModule().GetUser().getSpeedTime();0<(this.SpeedBtn_nowTime=t)&&(e=!1,this.view.m_btn_speed.m_time.text=f.Time_TransitionHour(t)),e?(this.view.m_btn_speed.m_t0.stop(),this.view.m_btn_speed.m_c1.setSelectedIndex(0),this.view.m_btn_speed.touchable=!0):(this.view.m_btn_speed.m_c1.setSelectedIndex(1),this.view.m_btn_speed.touchable&&(this.view.m_btn_speed.touchable=!1,this.view.m_btn_speed.m_t0.play(null,-1)))}}Setm_btn_heroBox(){var e;this.view.m_btn_heroBox.visible=!1,this.view.m_shopBtn.touchable&&(this.view.m_btn_heroBox.visible=!0,e=K.DataModule().GetUser().getBoxUpTime(),f.SetBarValue(this.view.m_btn_heroBox.m_barCom,5,e),this.view.m_btn_heroBox.m_text_cont.text=e+"/5")}SetShowStr(){var e=K.DataModule().GetUser().GetSaveKey("ShowStr_luandou");if(null!=e&&"true"==e.data&&(Wg.ShowStr="luandou"),"luandou"==Wg.ShowStr&&this.view.m_Btn_mode.touchable){Wg.ShowStr="",K.DataModule().GetUser().AddSaveKey("ShowStr_luandou","false");let e=K.UIModule().GetUI(Qp.UIName);return e.Show(),void e.SetIndex(1,"luandou")}e=K.DataModule().GetUser().GetSaveKey("ShowStr_6");if(null!=e&&"true"==e.data&&(Wg.ShowStr="6"),"6"==Wg.ShowStr){Wg.ShowStr="",K.DataModule().GetUser().AddSaveKey("ShowStr_6","false");let e=K.UIModule().GetUI(Qp.UIName);return e.Show(),void e.SetIndex(6)}e=K.DataModule().GetUser().GetSaveKey("ShowStr_js");if(null!=e&&"true"==e.data&&(Wg.ShowStr="js"),"js"==Wg.ShowStr&&this.view.m_Btn_mode.touchable){Wg.ShowStr="",K.DataModule().GetUser().AddSaveKey("ShowStr_js","false");let e=K.UIModule().GetUI(Qp.UIName);return e.Show(),void e.SetIndex(1,"js")}e=K.DataModule().GetUser().GetSaveKey("ShowStr_scene");if(null!=e&&"true"==e.data&&(Wg.ShowStr="scene"),"scene"==Wg.ShowStr){Wg.ShowStr="",K.DataModule().GetUser().AddSaveKey("ShowStr_scene","false");let e=K.UIModule().GetUI(Qp.UIName);return e.Show(),void e.SetIndex(1,"scene")}j.Guidance_IsUnlock_Max()}SetAppointBtn(){let e=1,t=K.DataModule().GetUser().GetSaveKey("AppointTime");t&&"true"==t.data&&(e=2),this.appointTime=K.DataModule().GetUser().GetNowAppointTime(e),-2!=this.appointTime?(this.view.m_appointBtn.visible=!0,-1==this.appointTime?this.view.m_appointBtn.m_c1.setSelectedIndex(0):0==this.appointTime?this.view.m_appointBtn.m_c1.setSelectedIndex(2):(this.view.m_appointBtn.m_c1.setSelectedIndex(1),this.view.m_appointBtn.m_time.text=f.Time_TransitionHour(this.appointTime,!0,!1,!0))):this.view.m_appointBtn.visible=!1}SetHuoYueBtn(){var e=K.DataModule().GetUser().GetSaveKey("HuoYue_Time");e&&A.SystemTime>Number(e.data)&&(this.view.m_btn_huoyue.visible=!1)}SetLoadInfo(){W.statrGame=!0,W.Guidance_huoyue&&(W.Guidance_huoyue=!1,K.UIModule().ShowUI(Fg.UIName)),this.SetHuoYueBtn(),SC.CoverUI_Show(),this.SetTryWeaponInfo(),Wg.Cover_IsShowGridChestUI&&1<K.DataModule().GetUser().GetData().userBattleInfo.totalCount?(Wg.Cover_IsShowGridChestUI=!1,K.UIModule().ShowUI(Lo.UIName)):this.isShowInterstitialAd(),this.SetShowStr(),this.Setm_btn_heroBox(),this.SetSpeedBtnIsShow(),this.view&&(V.isFirstFight&&(z.Instance.ChuanQuStatistics(40006),V.isFirstFight=!1),this.isShowUnlock=!1,this.isOneGame?(this.isOneGame=!1,this.LoadEnforcementShowUI(),z.Instance.LW_StatisticsEvent(9003,1),z.Instance.StatisticsEvent(aC.HomeStartGame)):this.isShowPromptSaleUI()&&K.UIModule().ShowUI(Ig.UIName),this.RefreshLevelReward(),this.RefreshRedDot(),this.FingerIsShow_Battle(),this.view.m_signBtn.visible=!k.onlymerge,this.view.m_wheelBtn.visible=!k.onlymerge,this.view.m_shopBtn.visible=!k.onlymerge,this.view.m_userTopExp.touchable=!k.onlymerge,this.Guidance_shop_key(),this.SetWeaponSkin(),this.IsShowXinShouLiBao(),this.isShowInterstitialAd(),k.Platform==T.QQ&&(2==W.OneGameOver?0==this.isCaiQian&&(this.isCaiQian=!0,Ko.Instance.QQ_Authorize()):1==W.OneGameOver&&Ko.Instance.QQ_Authorize_subscribeAppMsg()))}SkillUnlock_Refresh(){Ca.IsRedDot_userExp()?this.view.m_userTopExp_reward.m_c_skillnew.setSelectedIndex(1):this.view.m_userTopExp_reward.m_c_skillnew.setSelectedIndex(0)}FingerIsShow_Battle(){}IsShowXinShouLiBao(){console.log("是否显示",this.bool_IsShowXinShouLiBao),this.bool_IsShowXinShouLiBao&&(this.bool_IsShowXinShouLiBao=!1,this.IsShowAddToDesktopUI()&&K.UIModule().ShowUI(cg.UIName))}RefreshLevelReward(){if(console.log("测试",K.DataModule().GetUser().GetData().userMedalMax),k.isGuidance&&K.DataModule().GetUser().GetData().userMedalMax.level<2)return this.view.m_userTopExp_reward.visible=!1,void(this.view.m_userTopExp.visible=!1);this.view.m_userTopExp_reward.visible=this.IsLevelReward(),this.view.m_userTopExp.visible=!this.view.m_userTopExp_reward.visible}LoadEnforcementShowUI(){let e=[];e.push(f.PrioritySetData(5,this.IsShowSignNewYearUI(),function(){K.UIModule().ShowUI(Hg.UIName)})),e.push(f.PrioritySetData(4,this.IsShowOffLineUI(),()=>{K.UIModule().ShowUI(ng.UIName)})),e.push(f.PrioritySetData(3,this.IsSignUI(),()=>{K.UIModule().ShowUI(pa.UIName)})),e.push(f.PrioritySetData(2,this.isShowPromptSaleUI(),()=>{K.UIModule().ShowUI(Ig.UIName)})),e.push(f.PrioritySetData(1,this.IsShowAddToDesktopUI(),()=>{2<K.DataModule().GetUser().GetData().userBattleInfo.totalCount&&K.UIModule().ShowUI(cg.UIName)})),f.PrioritySetAdd(e),f.PrioritySetShow()}IsShowCompensateUI(){return!!W.isCompensate}IsShowAddToDesktopUI(){var e=K.DataModule().GetUser().GetSaveKey("AddToDesktopUI_Time");return!(e&&A.SystemTime>Number(e.data)||!this.view.m_desktopBtn.visible||null!=K.DataModule().GetUser().GetItemByID("SaveKey_AddToDesktop"))}IsShowSignNewYearUI(){if(0==f.GetP().isSignNewYear)return!1;let e=!0;return K.DataModule().GetUser().GetData().nowGuide!=qp.BuyWeapon&&K.DataModule().GetUser().GetData().nowGuide!=qp.EquipGuide||(e=!1),e=K.DataModule().GetUser().IsDaySign_newYear()?!1:e}IsShowOffLineUI(){let e=!(ng.OffLineEnd=!0),t=K.DataModule().GetUser().GetOffLineTime();if(K.DataModule().GetUser().GetData().nowGuide==qp.BuyWeapon||K.DataModule().GetUser().GetData().nowGuide==qp.EquipGuide)return!1;var i=K.DataModule().GetUser().GetData().mergeMap;if(null==t||0==t)return!1;let o=!1;for(let e=0;e<i.length;e++)if(""!=i[e]){o=!0;break}if(0==o)return K.DataModule().GetUser().SetOffLineTime(A.SystemTime),!1;var a=A.SystemTime-Number(t);return 15e3<a&&(e=!0,ng.OffLineEnd=!1),k.isTestLog&&console.log("离线时间",t,"过去时间",a),e}IsSignUI(){let e=!0;return K.DataModule().GetUser().GetData().nowGuide!=qp.BuyWeapon&&K.DataModule().GetUser().GetData().nowGuide!=qp.EquipGuide||(e=!1),e=K.DataModule().GetUser().IsDaySign()?!1:e}IsLevelReward(){let e=!1,t=!1,o=K.DataModule().GetUser().GetData(),i=o.userLevel.level;if(K.DataModule().GetUser().LevelReward_IsVideoReward(i)&&(t=!0),K.DataModule().GetUser().LevelReward_IsVideoReward(i)&&(e=!0),this.view.m_userTopExp_reward.m_levelText.text=this.view.m_userTopExp.m_levelText.text,t)for(let i=o.userLevel.level;0<i;i--){let t=!0;for(let e=0;e<o.levelRewardList.videoList.length;e++)if(i==o.levelRewardList.videoList[e]){t=!1;break}var a;if(t)return a=K.DataModule().GetLocal().playerLv.Get(i.toString()),a=K.DataModule().GetUser().GetUserItemDataList(a.VideoReward,!1),j.FreshRewardItem(this.view.m_userTopExp_reward.m_RewardItem,a[0],!1,"","",!0),!(this.view.m_userTopExp_reward.m_RewardItem.m_gear.m_bg.visible=!1)}else if(e)for(let i=o.userLevel.level;0<i;i--){let t=!0;for(let e=0;e<o.levelRewardList.freeList.length;e++)if(i==o.levelRewardList.freeList[e]){t=!1;break}var n;if(t)return n=K.DataModule().GetLocal().playerLv.Get(i.toString()),n=K.DataModule().GetUser().GetUserItemDataList(n.LevelReward,!1),j.FreshRewardItem(this.view.m_userTopExp_reward.m_RewardItem,n[0],!1,"","",!0),!(this.view.m_userTopExp_reward.m_RewardItem.m_gear.m_bg.visible=!1)}return!1}GetVideoHeroList(){let t=K.DataModule().GetUser().GetData().unLockHeroList,i=K.DataModule().GetLocal().hero,o=[];for(let e=this.GetVideoHeroListMax=0;e<t.length;e++){var a=i.Get(t[e]);!K.DataModule().GetUser().IsHeroBuy(a.ID)&&a.WatchVideo2Get&&(a.Rare>=this.GetVideoHeroListMax&&(this.GetVideoHeroListMax=a.Rare),o.push(a))}return o}IsGetVideoHeroList(){var i=this.GetVideoHeroList();if(this.view.m_getHeroBtn.visible=!1,i.length<1)this.isShowUnlock=!1;else{let t=[];for(let e=0;e<i.length;e++)i[e].Rare==this.GetVideoHeroListMax&&t.push(i[e]);var e=t[f.GetF1_F2RandomValue(0,t.length-1)],o=(this.isShowUnlock||(this.isShowUnlock=!0,no.Statistics_T0R(g.CoverHeroVideo)),this.view.m_getHeroBtn.visible=!0,this.getHeroBtnKey=[],Z.Hero+"_"+e.ID),o=(this.getHeroBtnKey.push(o),K.DataModule().GetUser().GetUserItemData(o));k.isTestLog&&console.log("主页随即视频英雄",o),j.FreshRewardItem(this.view.m_getHeroBtn.m_mask.m_rewardCom,o,!1),k.Platform!=T.TT&&(this.view.m_getHeroBtn.m_text_name.text=K.DataModule().GetLz().GetTextByPar("Cover_getHero",K.DataModule().GetLz().GetText("Hero_"+e.ID)))}}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null,q.EcsGameMgr.nowGame.ClearMerge(),q.EcsGameMgr.nowGame.ClearHero(),K.UIModule().HideUI(Ua.UIName),K.UIModule().HideUI(Fa.UIName))}Show(){if(V.isGameOverBack){let t=this.GetVideoHeroList(),i=K.DataModule().GetUser().GetShowGetHerKey(),o=[];for(let e=0;e<t.length;e++){var a=t[e];-1==i.indexOf(a.ID)&&o.push(a)}if(0<o.length){var n=o[Math.floor(Math.random()*o.length)];if(-1==i.indexOf(n.ID)){let e=K.UIModule().GetUI(Ug.UIName);K.DataModule().GetUser().SetShowGetHerKey(n.ID),e.SetShowInfo(null,n.ID,()=>{})}else K.DataModule().GetUser().isFistGame=!1,V.tryWeaponId="",super.Show(),this.Load()}else K.DataModule().GetUser().isFistGame=!1,V.tryWeaponId="",super.Show(),this.Load();V.isGameOverBack=!1}else K.DataModule().GetUser().isFistGame=!1,V.tryWeaponId="",super.Show(),this.Load()}Hide(){SC.CoverUI_Hide(),super.Hide(),this.UnLoad()}isShowPromptSaleUI(){if(k.sellGarbageSwitch){let o=K.DataModule().GetUser().GetData().itemList.filter(e=>e.type!=Z.Weapon&&e.rare<=3&&(e.type==Z.Head||e.type==Z.Chest||e.type==Z.Foot||e.type==Z.Ring)),e=[],a=K.DataModule().GetUser().GetData().equipList;for(let i=0;i<o.length;i++){let t=!1;for(let e=0;e<a.length;e++)if(o[i].id==a[e]){t=!0;break}0==t&&e.push(o[i])}return 100<=e.length}return!1}RefreshRedDot(){this.view.m_signBtn.m_redDot.visible=Ca.IsRedDot_sign(),this.view.m_HeroBtn.m_redDot.visible=Ca.IsRedDot_hero(),this.view.m_wheelBtn.m_redDot.visible=Ca.IsRedDot_dial(),this.view.m_shopBtn.m_redDot.visible=Ca.IsRedDot_shop(),this.view.m_newYear2021Btn.m_redDot.visible=Ca.IsRedDot_newYear2021Btn(),this.view.m_EquitBtn.m_redDot.visible=Ca.IsNewGear(),this.view.m_userTopExp_reward.m_redDot.visible=Ca.IsRedDot_userExp(),this.view.m_newYear2021Btn.m_redDot.visible?this.view.m_newYear2021Btn.getTransition("t0").play(null,-1):this.view.m_newYear2021Btn.getTransition("t0").stop(),this.IsGetVideoHeroList(),this.SkillUnlock_Refresh()}onUpdate(){if(this.view){if(0<this.SpeedBtn_nowTime&&this.SetSpeedBtnIsShow(),this.SetAppointBtn(),SC.CoverUI_update(),this.redDot_time-=A.TimeDeltaNoScale,this.redDot_time<0&&(this.redDot_time=2,this.RefreshRedDot(),k.FightNian)){let e=K.DataModule().GetUser().GetBaoZhuItem();this.view.m_nianBtn.m_leftText.text=e.count.toString()}K.DataModule().GetUser().GetData().nowGuide;var e=K.UIModule().GetUI(Xp.UIName);e&&null!=e.view?this.view.m_FeiTianBoxAni.stop():(this.SetAddToDesktopUI_IsShow(),(e=(new Date).getTime())-this.lastShowFeiTianBoxTime>this.FeiTianBoxCDTime&&(!k.isGuidance||K.UIModule().GetNowTopUIName()!=Xp.UIName)&&(this.lastShowFeiTianBoxTime=e,K.DataModule().GetUser().GetShowFeiTianBoxTimes()<3&&(this.SetFeiTianBox(),this.view.m_FeiTianBoxAni.play())))}}SetFeiTianBox(){var t=Object.keys(Lg);if(this.FeiTianBox_Weight.length!=t.length)for(let e=0;e<t.length;e++)this.FeiTianBox_Weight.push(10);var e=f.GetWeightRandom(this.FeiTianBox_Weight);this.nowFeiTianBoxID=t[e];for(let e=0;e<this.FeiTianBox_Weight.length;e++)0==this.FeiTianBox_Weight[e]&&(this.FeiTianBox_Weight[e]=10);this.FeiTianBox_Weight[e]=0,"ZH_CN"==k.language?this.view.m_tianJiangBoxBtn.m_load_box.url=x.GetIcon("cover_"+this.nowFeiTianBoxID):this.view.m_tianJiangBoxBtn.m_load_box.url=x.GetIcon("cover_"+this.nowFeiTianBoxID+"_"+k.language)}Box3_GetBtn(){let t=this,e=this.nowFeiTianBoxID,i=g.FeiTianBox;e==Lg.box_Chest_FeiTiamBox2?i=g.FeiTianBox2:e==Lg.box_Chest_FeiTiamBox3&&(i=g.FeiTianBox3),j.GetRewardBtnFun(0,function(){t.GetBoxReward();let e=K.UIModule().GetUI(Wg.UIName);e.view&&e.isShow&&(e.view.m_tianJiangBoxBtn.visible=!1)},i)}GetBoxReward(){let e=this.nowFeiTianBoxID,t=[],i="";var o;K.DataModule().GetUser().SetShowFeiTianBoxTimes(),e==Lg.box_Chest_FeiTiamBox?(i="box_Chest_FeiTiamBox",o=K.DataModule().GetLocal().lottery.GetChest("Chest_Endless",!1),o=j.GetItemDataAndIsShowBox(at.TreasureBox4,o),j.ShowGetReward(o,i),K.DataModule().GetUser().GetItem(o,at.TreasureBox4)):e==Lg.box_Chest_FeiTiamBox2?(i=e,o=Z.BoxMerge+"_3",t.push(o)):e==Lg.box_Chest_FeiTiamBox3&&(i=e,o=this.GetFreeCoin(),o=Z.Coin+"_"+o,t.push(o)),0<t.length&&j.GetItemDataAndIsShowBox("",t,0,i)}GetFreeCoin(){let e=K.DataModule().GetUser().GetData().mergeLevel,t=e-2;return t<1&&(t=1),3*(Number(K.DataModule().GetLocal().weapon.GetPrice(t))*(1-.01*e)*2)}SetAddToDesktopUI_IsShow(){var e=K.UIModule().GetNowTopUIName();if(Wg.TimeAddToDesktopUI_f&&e==Wg.UIName)return Wg.TimeAddToDesktopUI_f=!1,Wg.NextSkillRankdom=!0,void K.UIModule().ShowUI(cg.UIName);var t=K.DataModule().GetUser().GetData().nowGuide;e==Wg.UIName&&t!=qp.BuyWeapon&&t!=qp.MergeWeapon?(Wg.TimeAddToDesktopUI+=A.TimeDeltaNoScale,8<=Wg.TimeAddToDesktopUI&&this.IsShowAddToDesktopUI()&&(Wg.TimeAddToDesktopUI=0,K.UIModule().ShowUI(cg.UIName))):Wg.TimeAddToDesktopUI=0}PlayCoverBtnUnlockAnimaion(e=0,t=""){if(console.log("测试",e,t),"lv"==t)this.view.m_u1.play();else{t=e;if(4==t&&K.UIModule().ShowUI(Xo.UIName),6==t){let e=K.UIModule().GetUI(Kp.UIName);e.Show(),e.SetEffects_luandou()}this.view["m_u"+t].play()}}SetCoverBtnGuiDance(e=""){var t,i;k.isGuidance&&(t=+K.DataModule().GetUser().GetData().mergeLevel,i=K.DataModule().GetUser().GetData().userMedalMax,console.log("当前显示lv",t,e,i),i.level<=1&&i.star<2||"5"==e?(this.view.m_HeroBtn.grayed=!0,this.view.m_textCover5.visible=!0):(this.view.m_HeroBtn.grayed=!1,this.view.m_textCover5.visible=!1),this.view.m_HeroBtn.touchable=!this.view.m_HeroBtn.grayed,t<5||"4"==e?(this.view.m_baozhuTip.alpha=0,this.view.m_wheelBtn.grayed=!0,this.view.m_textCover4.visible=!0):(this.view.m_baozhuTip.alpha=1,this.view.m_wheelBtn.grayed=!1,this.view.m_textCover4.visible=!1),this.view.m_wheelBtn.touchable=!this.view.m_wheelBtn.grayed,i.level<2||"3"==e||i.level<=2&&i.star<1?(this.view.m_shopBtn.grayed=!0,this.view.m_textCover3.visible=!0):(this.view.m_shopBtn.grayed=!1,this.view.m_textCover3.visible=!1),this.view.m_shopBtn.touchable=!this.view.m_shopBtn.grayed,k.guidance_tow&&(i.level<2||"6"==e||2==i.level&&i.star<2?(this.view.m_textCover6.m_c1.setSelectedIndex(1),this.view.m_Btn_mode.grayed=!0,this.view.m_textCover6.visible=!0):(this.view.m_Btn_mode.grayed=!1,this.view.m_textCover6.visible=!1),this.view.m_Btn_mode.touchable=!this.view.m_Btn_mode.grayed),i.level<2||"lv"==e?this.view.m_userTopExp_reward.visible=!1:this.view.m_userTopExp_reward.visible=!0)}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(Wg);return e.name=Wg.UIName,t.uiName=Wg.UIName,t}},Zg=Wg,jg=(Zg.Cover_IsShowGridChestUI=!1,Zg.Try_weaponTry=!1,Zg.isOneShowInterstitialAd=!1,Zg.ShowStr="",Zg.TimeAddToDesktopUI=0,Zg.TimeAddToDesktopUI_f=!1,Zg.NextSkillRankdom=!1,Zg.UIName="CoverUI",(G=Vg=Vg||{})[G.m_userTopExp=0]="m_userTopExp",G[G.m_userTopExp_reward=1]="m_userTopExp_reward",G[G.m_medalBtn=2]="m_medalBtn",G[G.m_signBtn=3]="m_signBtn",G[G.m_wheelBtn=4]="m_wheelBtn",G[G.m_shopBtn=5]="m_shopBtn",G[G.m_cdkBtn=6]="m_cdkBtn",G[G.m_playerBtn=7]="m_playerBtn",G[G.m_getHeroBtn=8]="m_getHeroBtn",G[G.m_newYear2021Btn=9]="m_newYear2021Btn",G[G.m_HeroBtn=10]="m_HeroBtn",G[G.m_EquitBtn=11]="m_EquitBtn",G[G.m_weaponSkinBtn=12]="m_weaponSkinBtn",G[G.m_BuyBtn=13]="m_BuyBtn",G[G.m_mergeShopBtn=14]="m_mergeShopBtn",class extends ${constructor(){super(...arguments),this.nowSkillId=""}Load(){null==this.view&&(this.view=this.CreatFGUIViewByView(Sd.createInstance()),this.AllOnClick(),this.LoadImage()),this.SetLoadInfo()}LoadImage(){}AllOnClick(){this.view.m_btn_continue.onClick(this,this.onBtn_Close)}onBtn_Close(){"Grenade"==this.nowSkillId&&z.Instance.LeYou_Guidance(111),K.UIModule().HideUI(jg.UIName)}SetInfo(e){K.AudioModule().PlayOnce(x.GetSound2("MergeNew"));var e=e.id,t=(this.nowSkillId=e,K.DataModule().GetLocal().skill.Get(e));this.view.m_text_skillName.text=K.DataModule().GetLz().GetText("SkillName_"+e),this.view.m_text_skillInfo.text=K.DataModule().GetLz().GetText("SkillNameInfo2_"+e),this.view.m_load_skill.url=x.GetIcon("Icon_"+t.UIRes)}SetLoadInfo(){}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null)}Show(){super.Show(),this.Load()}SetHideInfo(){}Hide(){this.SetHideInfo(),super.Hide(),this.UnLoad()}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(jg);return e.name=jg.UIName,t.uiName=jg.UIName,t}}),Kg=jg,Yg=(Kg.UIName="SkillUnlockUI",class extends ${constructor(){super(...arguments),this.videoCallBack=new t,this.nowIndex=0,this.nowUI="",this.theShare=!1,this.HideCall=null,this.nowData=[],this.isWin=!1,this.isShare=!1}Load(){if(null==this.view){this.view=this.CreatFGUIViewByView(Zm.createInstance());let o=this;this.nowIndex=0,this.nowUI="",this.isWin=!1,this.theShare=!1,k.Platform!=T.OPPO&&k.Platform!=T.VIVO||(this.view.m_YLPlatform.setSelectedPage("Oppo"),j.ShowNativeAd(this.view.m_OppoLookBtn,this.view.m_OppoBannerAdBtn,null,null),this.view.m_OppoVideoGetBtn.onClick(this,this.On_VideoBtn2),this.view.m_OppoKillcontinueBtn.onClick(this,function(){o.KillcontinueFun()}),this.view.m_OppoVideoBtn.onClick(this,this.On_VideoBtn),this.view.m_OppoContinueBtn.onClick(this,function(){o.continueFun()}),this.view.m_OppoGiveUpBtn.onClick(this,function(){K.UIModule().HideUI(Yg.UIName)}),j.Btn3Controller(this.view,this.view.m_OppoContinueBtn),j.Btn3Controller(this.view,this.view.m_OppoGiveUpBtn),j.GetRewardUI_BtnController(this.view.m_OppoKillcontinueBtn),j.skipBtnDelayTime(this.view.m_OppoContinueBtn),j.skipBtnDelayTime(this.view.m_OppoKillcontinueBtn),j.skipBtnDelayTime(this.view.m_OppoGiveUpBtn)),(T.IS_WECHAT_PLATFORM||k.IsInWebTest||k.Platform==T.QQ)&&this.view.m_YLPlatform.setSelectedPage("Wx"),this.view.m_continueBtn.onClick(this,function(){o.continueFun()}),this.view.m_giveUpBtn.onClick(this,function(){K.UIModule().HideUI(Yg.UIName)}),this.view.m_KillcontinueBtn.onClick(this,function(){o.KillcontinueFun()}),this.view.m_videoBtn.onClick(this,this.On_VideoBtn),this.view.m_videoGetBtn.onClick(this,this.On_VideoBtn2),this.view.m_Btn_Shard.onClick(this,function(){CC.Instance.Shard(function(){if(K.DataModule().GetUser().GetShareHeroTimes()<3&&!o.theShare){o.theShare=!0,K.UIModule().GetUI(Ua.UIName).ShowAddDiamond(new Laya.Vector2(o.view.m_Btn_Shard.x+o.view.m_Btn_Shard.width/2,o.view.m_Btn_Shard.y),10);let e=Z.Diamond+"_10",t=K.DataModule().GetUser().GetUserItemData(e),i=[];i.push(t),K.DataModule().GetUser().GetItem(i,at.ShareNewHero),K.DataModule().GetUser().addShareHeroTimes(),o.view.m_Btn_Shard.m_HeroHit.visible=!1}},function(){})})}this.videoCallBack.CleanAllCallBack(),this.IsShareOrVideo()}KillcontinueFun(){K.UIModule().HideUI(Yg.UIName),z.Instance.LW_StatisticsEvent(8016,K.DataModule().GetUser().GetData().userLevel.level,0),!T.ProjectSubCode&&k.Platform!=T.TT||(console.warn("显示传趣的插屏广告"+T.ProjectSubCode+"|"+K.DataModule().GetUser().InterstitialAdNumberGames),2<=K.DataModule().GetUser().GetData().userLevel.level&&1<=K.DataModule().GetUser().InterstitialAdNumberGames&&(K.DataModule().GetUser().InterstitialAdNumberGames=0,K.PlatformModule().ShowInterstitialAd()))}continueFun(){K.UIModule().HideUI(Yg.UIName),!T.ProjectSubCode&&k.Platform!=T.TT||(this.nowUI==Yo.name&&K.DataModule().GetUser().GetData().nowGuide!=qp.EquipGuide&&(console.warn("显示传趣的插屏广告"),K.PlatformModule().ShowInterstitialAd()),this.nowUI=K.UIModule().GetNowTopUIName(),this.nowUI==Yo.name&&K.DataModule().GetUser().GetData().nowGuide!=qp.EquipGuide&&(1<=K.DataModule().GetUser().InterstitialAdNumberBuyGem?(K.DataModule().GetUser().InterstitialAdNumberBuyGem=0,K.PlatformModule().ShowInterstitialAd()):2<=K.DataModule().GetUser().InterstitialAdNumberBuyBox&&(K.DataModule().GetUser().InterstitialAdNumberBuyBox=0,K.PlatformModule().ShowInterstitialAd())),1<=K.DataModule().GetUser().InterstitialAdNumberSign&&1<K.DataModule().GetUser().GetData().signData.nowDay&&(K.DataModule().GetUser().InterstitialAdNumberSign=0,K.PlatformModule().ShowInterstitialAd()),(k.Platform==T.TT||4<=K.DataModule().GetUser().GetData().mergeLevel)&&2<=K.DataModule().GetUser().GetData().userLevel.level&&1<=K.DataModule().GetUser().InterstitialAdNumberFreeLv&&(K.DataModule().GetUser().InterstitialAdNumberFreeLv=0,K.PlatformModule().ShowInterstitialAd()))}BtnTypeController(e){this.view.getController("BtnType").setSelectedPage(e)}ShowReward(i,e="",t=!1,o,a=null){if(1<=i.length&&i[0].type==Z.Skill){let e=K.UIModule().GetUI(Kg.UIName);return e.Show(),e.SetInfo(i[0]),void K.UIModule().HideUI(Yg.UIName)}this.nowUI=o,this.HideCall=a,k.Platform!=T.WECHAT&&this.BtnTypeController("8");let n=!1;for(let t=0;t<i.length;t++)if(""==i[t].id&&""==i[t].type&&""==i[t].type)console.log("跳过空的数据",i[t]);else{var s=zm.createInstance();this.view.m_rewardList.addChild(s);let e=i[t];i[t].type==Z.Hero&&K.DataModule().GetUser().IsHeroBuy(i[t].id)&&((e=K.DataModule().GetUser().NewUserItemData()).type=Z.Diamond,e.id=Z.Diamond,e.count=200),e.type==Z.Hero&&(n=!0),j.FreshRewardItem(s,e,!0)}(n=k.Platform==T.WECHAT&&!k.useHeroNoUnlock&&n)?(this.view.m_Btn_Shard.visible=!0,o=K.DataModule().GetUser().GetShareHeroTimes(),this.view.m_Btn_Shard.m_HeroHit.visible=o<3,this.view.m_newHero.visible=!0):(this.view.m_Btn_Shard.m_HeroHit.visible=!1,this.view.m_Btn_Shard.visible=!1,this.view.m_newHero.visible=!1,T.IS_OPPO_PLATFORM||T.IS_VIVO_PLATFORM?this.view.m_continueBtn.x=this.view.width/2-94:this.view.m_continueBtn.x=this.view.width/2-125),""!=e?(this.view.m_Box.url=x.GetIcon(e),W.Chuanqu_isBoxTime3?(W.Chuanqu_isBoxTime3=!1,this.view.m_ShowBox.play(),this.view.m_YLPlatform.setSelectedPage("Chuanqu"),T.ProjectSubCode&&window.jsCallNative_showNativeAd(),Laya.timer.once(3e3,this,function(){T.ProjectSubCode&&window.jsCallNatice_hideNativeAd()})):this.view.m_ShowBox.play()):this.view.m_ShowReward.play(),t?this.view.m_c1.setSelectedIndex(1):this.view.m_c1.setSelectedIndex(0)}SetRewardType(e,t){console.log("设置奖励,",t),this.nowData=t,this.view.m_title.setSelectedIndex(e),1==e&&(this.BtnTypeController("1"),no.Statistics_T0R(g.getReward))}IsShareOrVideo(){this.isShare=z.Instance.GetShareStrategy(sC.lot_equip),this.isShare?j.IsShare(this.view.m_videoBtn):this.isShare=j.IsVideoAndShare(this.view.m_videoBtn)}Video_Call(){this.isWin&&z.Instance.LW_StatisticsEvent(8016,K.DataModule().GetUser().GetData().userLevel.level,1);let e=K.UIModule().GetUI(Yg.UIName);K.UIModule().HideUI(Yg.UIName),e.AgainReward(),e.IsShareOrVideo()}On_VideoBtn(){let e=K.UIModule().GetUI(Yg.UIName),t=sC.lot_equip,i=g.getReward;e.isShare?j.GetRewardBtnFun(1,function(){z.Instance.DayShareStrategy_Add(t,!0),e.Video_Call()},i):j.GetRewardBtnFun(0,function(){z.Instance.DayShareStrategy_Add(t,!1),e.Video_Call()},i,e.view.m_videoBtn)}On_VideoBtn2(){this.videoCallBack.Call()}AgainReward(){let o=this.nowData,a=[],n=[];for(let i=0;i<o.length;i++){let e=o[i],t=K.DataModule().GetUser().NewUserItemData();var s;t.id=e.id,t.data=e.data,t.count=e.count,t.tableID=e.tableID,t.type=e.type,t.rare=e.rare,t.res=e.res,t.level=e.level,t.buyCount=e.buyCount,-1!=o[i].type.indexOf(Z.Coin)||-1!=o[i].type.indexOf(Z.Diamond)?a.push(t):-1!=o[i].type.indexOf(Z.NewYearFont)?(s=K.DataModule().GetLocal().lottery.CreationEquip("Item_Event_2021NewYear"),s=K.DataModule().GetUser().GetUserItemData(s),t.id=s.id,t.count=s.count,t.data=s.data,a.push(t)):-1!=o[i].type.indexOf(Z.HeroPiece)?a.push(t):(s=K.DataModule().GetUser().GetProp_UserItemData(t),a.push(s))}for(let e=0;e<o.length;e++)n.push(o[e]);for(let i=0;i<a.length;i++){let e=a[i],t=K.DataModule().GetUser().NewUserItemData();t.id=e.id,t.data=e.data,t.count=e.count,t.tableID=e.tableID,t.type=e.type,t.rare=e.rare,t.res=e.res,t.level=e.level,t.buyCount=e.buyCount,n.push(t)}n=j.GetUserItemDataGather(n),j.ShowGetReward(n,"",!0),K.DataModule().GetUser().GetItem(a,at.over_double)}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null)}Show(){super.Show(),this.Load(),T.ProjectSubCode&&window.jsCallNative_showNativeAd()}Hide(){this.HideCall&&(this.HideCall.call(this),this.HideCall=null),super.Hide(),this.UnLoad(),j.DetectAndShowUnlockUI(),T.ProjectSubCode&&window.jsCallNatice_hideNativeAd()}onUpdate(){}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(Yg);return e.name=Yg.UIName,t.uiName=Yg.UIName,t}}),Qg=Yg,Jg=(Qg.UIName="GetRewardUI",class extends ${constructor(){super(...arguments),this.level=0}Load(){if(null==this.view){this.level=0,this.view=this.CreatFGUIViewByView(kl.createInstance());let e=this;this.view.m_rateBtn.touchable=!1,this.view.m_rateBtn.grayed=!0,this.view.m_Btn_Close.onClick(this,function(){K.UIModule().HideUI(Jg.UIName)}),this.view.m_rateBtn.onClick(this,function(){if(5==e.level){b.Warn("引用评分");try{window.jsCallIos_requestReview()}catch(e){}}if(null==K.DataModule().GetUser().GetItemByID("SaveKey_Rate")){let e=K.DataModule().GetUser().NewUserItemData();e.id="SaveKey_Rate",e.type=Z.SaveDataItem,K.DataModule().GetUser().AddItemData(e)}K.UIModule().HideUI(Jg.UIName)}),this.view.m_s1.onClick(this,function(){e.level=1,e.view.m_s1.m_icon.url=x.GetFairyGUI_Icon("RateStar2"),e.view.m_s2.m_icon.url=x.GetFairyGUI_Icon("RateStar1"),e.view.m_s3.m_icon.url=x.GetFairyGUI_Icon("RateStar1"),e.view.m_s4.m_icon.url=x.GetFairyGUI_Icon("RateStar1"),e.view.m_s5.m_icon.url=x.GetFairyGUI_Icon("RateStar1"),e.view.m_rateBtn.touchable=!0,e.view.m_rateBtn.grayed=!1}),this.view.m_s2.onClick(this,function(){e.level=2,e.view.m_s1.m_icon.url=x.GetFairyGUI_Icon("RateStar2"),e.view.m_s2.m_icon.url=x.GetFairyGUI_Icon("RateStar2"),e.view.m_s3.m_icon.url=x.GetFairyGUI_Icon("RateStar1"),e.view.m_s4.m_icon.url=x.GetFairyGUI_Icon("RateStar1"),e.view.m_s5.m_icon.url=x.GetFairyGUI_Icon("RateStar1"),e.view.m_rateBtn.touchable=!0,e.view.m_rateBtn.grayed=!1}),this.view.m_s3.onClick(this,function(){e.level=3,e.view.m_s1.m_icon.url=x.GetFairyGUI_Icon("RateStar2"),e.view.m_s2.m_icon.url=x.GetFairyGUI_Icon("RateStar2"),e.view.m_s3.m_icon.url=x.GetFairyGUI_Icon("RateStar2"),e.view.m_s4.m_icon.url=x.GetFairyGUI_Icon("RateStar1"),e.view.m_s5.m_icon.url=x.GetFairyGUI_Icon("RateStar1"),e.view.m_rateBtn.touchable=!0,e.view.m_rateBtn.grayed=!1}),this.view.m_s4.onClick(this,function(){e.level=4,e.view.m_s1.m_icon.url=x.GetFairyGUI_Icon("RateStar2"),e.view.m_s2.m_icon.url=x.GetFairyGUI_Icon("RateStar2"),e.view.m_s3.m_icon.url=x.GetFairyGUI_Icon("RateStar2"),e.view.m_s4.m_icon.url=x.GetFairyGUI_Icon("RateStar2"),e.view.m_s5.m_icon.url=x.GetFairyGUI_Icon("RateStar1"),e.view.m_rateBtn.touchable=!0,e.view.m_rateBtn.grayed=!1}),this.view.m_s5.onClick(this,function(){e.level=5,e.view.m_s1.m_icon.url=x.GetFairyGUI_Icon("RateStar2"),e.view.m_s2.m_icon.url=x.GetFairyGUI_Icon("RateStar2"),e.view.m_s3.m_icon.url=x.GetFairyGUI_Icon("RateStar2"),e.view.m_s4.m_icon.url=x.GetFairyGUI_Icon("RateStar2"),e.view.m_s5.m_icon.url=x.GetFairyGUI_Icon("RateStar2"),e.view.m_rateBtn.touchable=!0,e.view.m_rateBtn.grayed=!1})}}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null)}Show(){super.Show(),this.Load()}Hide(){super.Hide(),this.UnLoad()}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(Jg);return e.name=Jg.UIName,t.uiName=Jg.UIName,t}}),Xg=Jg,$g=(Xg.UIName="RatingUI",(G=zg=zg||{}).login="login",G.win="win",G.kill="kill",G.kills="kills",G.useSkill="useSkill",G.newWeapon="newWeapon",G.compound="compound",G.getRareEquip_3="getRareEquip_3",G.getRareEquip_4="getRareEquip_4",G.getRareEquip_5="getRareEquip_5",class extends ${constructor(){super(...arguments),this.nowexp=0,this.targetexp=0,this.maxExp=0,this.expAddSpeed=100,this.showRate=!1,this.isInGameRewardUIShowOver=!1,this.needShowGetHeroPiceseUI=!1,this.heroPiceseHeroId="",this.hongBaoCount=0,this.chestKey=0,this.needShowGetBaoZhu=!1,this.isover1=!0,this.nowStarType=0,this.isWin=-1}Load(){if(null==this.view){V.isShowBanner=!1,this.view=this.CreatFGUIViewByView(wl.createInstance()),this.showRate=!1;let e=this;T.IS_WECHAT_PLATFORM&&(K.DataModule().GetPlatform().PlatformData.HouseAd&&(yo.getInstance().createGuessLike(this.view.m_youZiAdPos1.displayObject),this.view.m_youZiAdPos1.setScale(.6,.6),yo.getInstance().createMainPush(this.view.m_youZiAdPos2.displayObject),yo.getInstance().createMainPush(this.view.m_youZiAdPos3.displayObject)),this.view.m_Btn_Shard.onClick(this,function(){CC.Instance.Shard(function(){},function(){})})),this.view.m_exitBtn.onClick(this,function(){e.ShowResult(),T.ProjectSubCode&&1<=K.DataModule().GetUser().GetData().userBattleInfo.totalCount&&K.PlatformModule().ShowInterstitialAd()}),this.view.m_DWContinuBtn.onClick(this,function(){e.view.m_rank.setSelectedPage("0"),e.view.m_WinTittle.visible=!1,e.view.m_FailedTittle.visible=!1,k.Platform==T.WECHAT&&1==K.DataModule().GetUser().GetData().userBattleInfo.totalCount&&K.UIModule().GetUI(Xp.UIName).SetGameOver()}),k.Platform!=T.OPPO&&k.Platform!=T.VIVO||(this.view.m_OppoExitBtn.onClick(this,function(){e.ShowResult()}),this.view.m_oppoContinueBtn.onClick(this,function(){e.continueFun()}),j.skipBtnDelayTime(this.view.m_OppoExitBtn)),this.firework=new Vp;var t="Tip_"+f.GetF1_F2RandomValue(1,10).toString(),t=K.DataModule().GetLz().GetText(t);this.view.m_tips.text=t,this.isover1?(this.view.m_ShowTImes.setSelectedPage("2"),this.view.m_GetNewHeroBtn.onClick(this,function(){K.UIModule().ShowUI(cg.UIName)}),this.view.m_GetEquitBtn.onClick(this,function(){K.UIModule().ShowUI(Yo.UIName)}),this.view.m_GetLotteryBtn.onClick(this,function(){K.UIModule().ShowUI(Xo.UIName)})):this.view.m_bianQiangBtn.onClick(this,function(){null==K.DataModule().GetUser().GetItemByID("SaveKey_AddToDesktop")?K.UIModule().ShowUI(cg.UIName):K.UIModule().ShowUI(Yo.UIName)}),this.view.m_continueBtn.onClick(this,function(){e.continueFun()}),this.view.m_starBtn.onClick(this,function(){e.starFun()}),k.Platform==T.TT&&(this.view.m_YLPlatform.setSelectedPage("TT"),1==K.DataModule().GetUser().GetData().userBattleInfo.totalCount&&z.Instance.LeYou_Guidance(5)),k.Platform==T.WECHAT&&this.view.m_YLPlatform.setSelectedPage("Wx"),this.isInGameRewardUIShowOver=!1,this.needShowGetHeroPiceseUI=!1,this.needShowGetBaoZhu=!1,this.hongBaoCount=0,this.chestKey=0,this.SetInfoLoad(),this.RankDisplay(),k.Platform!=T.WECHAT&&(this.view.m_shareVideoBtn.visible=!1)}V.isGameOverBack=!0}starFun(){let t=this;j.GetRewardBtnFun(0,function(){var e=K.DataModule().GetUser().GetData().userMedal;1==t.nowStarType?(z.Instance.LW_StatisticsEvent(8017,e.level,e.star,"1"),t.nowStarType=0):2==t.nowStarType&&(z.Instance.LW_StatisticsEvent(8015,e.level,e.star,"1"),t.nowStarType=0),t.RefreshIsCanGetMedalReward(1),t.isStar(0)},g.GameOverUI_star)}continueFun(){var e;1==K.DataModule().GetUser().GetData().userBattleInfo.totalCount&&z.Instance.LeYou_Guidance(5),me.User_reqSaveUser(this,null),K.UIModule().HideUI($g.UIName),K.UIModule().HideUI(Xp.UIName),eG.StartCover(),eg.conversion(4),k.isUseGridBoxKey&&(e=K.DataModule().GetUser().GetItemByTypeAndId(Z.GridKey,Z.GridKey))&&3<=e.count&&(Zg.Cover_IsShowGridChestUI=!0)}RankDisplay(){let e=K.DataModule().GetUser().GetNextGetBigRewardMedalLevel(),t=[],i;if(-1!=e){var o=K.DataModule().GetLocal().medal.GetByLevel(e);o.Bonus,i=o.Bonus;for(let e=this.view.m_MedalRewardList1.numItems=0;e<i.length;e++){var a=zm.createInstance(),n=(this.view.m_MedalRewardList1.addChild(a),K.DataModule().GetUser().GetUserItemData(i[e]));t.push(n),j.FreshRewardItem(a,n)}this.view.m_medalInfoText1.text=K.DataModule().GetLz().GetTextByPar("GameOver_getTip1",K.DataModule().GetLz().GetText("MLN_"+o.ID))}else this.view.m_medalInfoText1.text=K.DataModule().GetLz().GetText("GameOver_getTip2")}SetGridKey(t=!1){let i=this,o=K.DataModule().GetUser().GetItemByTypeAndId(Z.GridKey,Z.GridKey);if(t&&K.AudioModule().PlayOnce(x.GetSound2("LevelUp")),o)try{for(let e=1;e<=o.count;e++){if(3<e||!i.view["m_key"+e])return;i.view["m_key"+e].m_image_key2.visible=!1,e>o.count-this.chestKey&&(i.view["m_key"+e].m_image_key2.visible=!0,t&&Laya.timer.once(300*(e-(o.count-this.chestKey)),this,function(){try{i.view["m_key"+e].m_image_key2.visible=!1,i.view["m_key"+e].m_t0.play()}catch(e){console.log("错误m_key",e)}}))}}catch(t){console.log("错误nowKey",t)}}SetInfoLoad(){if(console.log("进入失败页"),V.InGameIng=!1,K.DataModule().GetUser().GetOverHuoYueDu(),!k.isUseGridBoxKey)for(let e=1;e<4;e++)this.view["m_key"+e].visible=!1}isStar(e){this.view.m_isStar.setSelectedIndex(e)}ResultStarBonus(e){var t=K.DataModule().GetLocal().gameRule.GetResultStarBonus();this.isStar(0),this.nowStarType=0,this.view.m_starBtn.visible=!1,2<K.DataModule().GetUser().GetData().userMedalMax.level&&(e?f.GetRandomValue(t.F2)&&(this.view.m_starBtn.m_isWin.setSelectedIndex(1),this.isStar(1),this.nowStarType=1,this.view.m_starBtn.visible=!0):(e=K.DataModule().GetUser().GetData().userMedal.level,f.GetRandomValue(t.F1)&&1<e&&(this.view.m_starBtn.m_isWin.setSelectedIndex(0),this.isStar(1),this.nowStarType=2,this.view.m_starBtn.visible=!0))),this.view.m_starBtn.visible&&no.Statistics_T0R(g.GameOverUI_star)}RefreshIsCanGetMedalReward(e){this.view.getController("rank").setSelectedIndex(1);let t=this,i=(Laya.timer.once(3e3,this,function(){try{t.view&&(t.view.m_WinTittle.visible=!1,t.view.m_FailedTittle.visible=!1,t.view.getController("rank").setSelectedIndex(0))}catch(e){}}),t.view.m_WinTittle.visible=!0,t.view.m_FailedTittle.visible=!1,t.view.m_DWContinuBtn.visible=!1,Laya.timer.once(1500,t,function(){try{t.view.m_medal.m_Effect1.play(),K.AudioModule().PlayOnce(x.GetSound2("LevelUp")),t.view.m_WinTittle.visible=!0,t.view.m_FailedTittle.visible=!1,j.FreshMedal(this.view.m_medal,K.DataModule().GetUser().GetData().userMedal.level,K.DataModule().GetUser().GetData().userMedal.star)}catch(e){}}),K.DataModule().GetUser().GetNextGetRewardMedalLevel()),o=[],a;if(-1!=i){var n=K.DataModule().GetLocal().medal.GetByLevel(i);n.Bonus,a=n.Bonus;for(let e=this.view.m_MedalRewardList.numItems=0;e<a.length;e++){var s=zm.createInstance(),l=(this.view.m_MedalRewardList.addChild(s),zm.createInstance(),K.DataModule().GetUser().GetUserItemData(a[e]));o.push(l),j.FreshRewardItem(s,l)}this.view.m_medalInfoText.text=K.DataModule().GetLz().GetTextByPar("GameOver_getTip1",K.DataModule().GetLz().GetText("MLN_"+n.ID))}else this.view.m_medalInfoText.text=K.DataModule().GetLz().GetText("GameOver_getTip2");1==e?K.DataModule().GetUser().AddStarToMedal():K.DataModule().GetUser().SubStarFromMedal();n=K.DataModule().GetUser().IsCanGetMedalReward();n&&(K.DataModule().GetUser().GetData().userMedal.hasGetRewardLevel.push(i),K.DataModule().GetUser().GetItem(o,at.over)),null!=this.view&&n&&(this.view.m_GetMedalAni.play(),this.view.m_medalInfoText.text=K.DataModule().GetLz().GetText("GameOver_collected"))}ShowInGameFailed(){K.UIModule().ShowUI($g.UIName),this.view.m_title.text=K.DataModule().GetLz().GetTextByPar("GameOver_Ranking",V.myInGamePlayerData.rank.toString()),this.view.m_show.play(),k.Platform!=T.OPPO&&k.Platform!=T.VIVO||(this.view.m_YLPlatform.setSelectedPage("Oppo"),j.ShowNativeAd(this.view.m_OppoLookBtn1,this.view.m_OppoBannerAdBtn1,null,null),j.Btn3Controller(this.view,this.view.m_OppoExitBtn))}ShowResult(){let e=3,i=(1==V.myInGamePlayerData.rank&&(e=2),z.Instance.LeYou_battle(e,1,W.OneGameTime),z.Instance.StatisticsEvent(aC.GameEnd),this);if(q.Instance().netFrame=!1,K.MGOBEModule().Leave(),K.AudioModule().StopMusic(),K.UIModule().ShowUI($g.UIName),k.Platform!=T.OPPO&&k.Platform!=T.VIVO||(i.view.m_YLPlatform.setSelectedPage("Oppo"),j.ShowNativeAd(i.view.m_OppoLookBtn,i.view.m_OppoBannerAdBtn,null,null)),k.Platform==T.TT||k.Platform==T.KUAISHOU){K.PlatformModule().recordScreenEnd();let e=0,t=K.DataModule().GetUser().GetSaveKey("ShareKey");i.view.m_shareVideoBtn.visible=!0,(e=null!=t?Number(t.data):e)<5?(i.view.m_n150.visible=!0,i.view.m_n152.visible=!0,k.Platform==T.KUAISHOU?i.view.m_shareVideoBtn.icon=x.GetFairyGUI_Icon("shareVideoBtn_KS"):i.view.m_shareVideoBtn.icon=x.GetFairyGUI_Icon("shareVideoBtn")):(i.view.m_n150.visible=!1,i.view.m_n152.visible=!1,k.Platform==T.KUAISHOU?i.view.m_shareVideoBtn.icon=x.GetFairyGUI_Icon("shareVideoBtn_KS_null"):i.view.m_shareVideoBtn.icon=x.GetFairyGUI_Icon("shareVideoBtn_null")),this.view.m_shareVideoBtn.onClick(this,function(){K.PlatformModule().shareRecordVideo(()=>{e<5&&(k.Platform==T.KUAISHOU?Yt:hg).Instance.GetShareKey(),i.view&&(i.view.m_shareVideoBtn.visible=!1,i.view.m_n150.visible=!1,i.view.m_n152.visible=!1)})})}V.myInGamePlayerData.rank<=1&&(V.myInGamePlayerData.rank=1),this.view.m_rankText.text=K.DataModule().GetLz().GetTextByPar("GameOver_Rank",V.myInGamePlayerData.rank.toString()),K.DataModule().GetUser().AddTask("saveTask_"+zg.kill,V.myInGamePlayerData.kill),K.DataModule().GetUser().AddTask("saveTask_"+zg.useSkill,V.myInGamePlayerData.useSkillCount),5<=V.myInGamePlayerData.kill&&K.DataModule().GetUser().AddTask("saveTask_"+zg.kills),1==V.myInGamePlayerData.rank?(q.EcsGameMgr.nowGame.ShowGameOver(!0),this.firework.Init(this.view.m_firework,1),SC.GameBattleEnd(1),this.view.m_c1.setSelectedPage("Win"),this.view.m_Btn_Shard.m_c1.setSelectedPage("Show"),K.AudioModule().PlayOnce(x.GetSound2("Win")),this.isWin=1,this.ResultStarBonus(!0),z.Instance.ChuanQuStatistics(50004),K.DataModule().GetUser().AddTask("saveTask_"+zg.win),z.Instance.LW_StatisticsEvent(1004,"1",K.DataModule().GetUser().GetData().userLevel.level.toString(),K.DataModule().GetUser().GetData().userLevel.level.toString(),"1")):(z.Instance.ChuanQuStatistics(50005),this.isWin=0,this.ResultStarBonus(!1),SC.GameBattleEnd(0),q.EcsGameMgr.nowGame.ShowGameOver(!1),this.view.m_Btn_Shard.m_c1.setSelectedPage("Friend"),this.view.m_c1.setSelectedPage("Failed"),K.AudioModule().PlayOnce(x.GetSound2("Failed")),z.Instance.LW_StatisticsEvent(1004,"1",K.DataModule().GetUser().GetData().userLevel.level.toString(),K.DataModule().GetUser().GetData().userLevel.level.toString(),"0"));let t=K.DataModule().GetUser().GetNextGetRewardMedalLevel(),o,a=[];if(-1!=t){var n=K.DataModule().GetLocal().medal.GetByLevel(t);o=n.Bonus;for(let e=0;e<o.length;e++){var s=zm.createInstance(),l=(this.view.m_MedalRewardList.addChild(s),K.DataModule().GetUser().GetUserItemData(o[e]));a.push(l),j.FreshRewardItem(s,l)}this.view.m_medalInfoText.text=K.DataModule().GetLz().GetTextByPar("GameOver_getTip1",K.DataModule().GetLz().GetText("MLN_"+n.ID))}else this.view.m_medalInfoText.text=K.DataModule().GetLz().GetText("GameOver_getTip2");this.view.m_GameOverAni.play(),j.FreshMedal(this.view.m_medal,K.DataModule().GetUser().GetData().userMedal.level,K.DataModule().GetUser().GetData().userMedal.star),1==V.myInGamePlayerData.rank?K.DataModule().GetUser().AddStarToMedal():K.DataModule().GetUser().SubStarFromMedal();let r=K.DataModule().GetUser().IsCanGetMedalReward();r&&(z.Instance.LeYou_action(403),K.DataModule().GetUser().GetData().userMedal.hasGetRewardLevel.push(t),K.DataModule().GetUser().GetItem(a,at.over)),Laya.timer.once(500,this,function(){null!=i.view&&(i.view.m_GetBaseAni.play(),K.AudioModule().PlayOnce(x.GetSound2("LevelUp")))}),Laya.timer.once(1e3,this,function(){null!=i.view&&Laya.timer.once(300,this,function(){try{i.SetGridKey(!0)}catch(e){}})}),Laya.timer.once(1500,this,function(){null!=i.view&&r&&(i.view.m_GetMedalAni.play(),i.view.m_medalInfoText.text=K.DataModule().GetLz().GetText("GameOver_collected"),K.AudioModule().PlayOnce(x.GetSound2("LevelUp")))}),j.FreshUserTopExp(this.view.m_expBar,this.view.m_expText,this.view.m_userLevelText);var n=K.DataModule().GetUser().GetUserLevel();this.nowexp=n.exp,this.targetexp=n.exp,this.maxExp=n.maxExp;let h=K.DataModule().GetLocal().gameRule.Get("BattleGetExp"),m=Math.round(2*(10-V.myInGamePlayerData.rank));if(m<0&&(m=0),1==V.myInGamePlayerData.rank&&(m=h.F1),2==V.myInGamePlayerData.rank&&(m=h.F2),3==V.myInGamePlayerData.rank&&(m=h.F3),K.DataModule().GetUser().AddExp(m),this.hongBaoCount=0,(this.chestKey=0)<V.myInGamePlayerData.userItemDatas.length)for(let e=V.myInGamePlayerData.userItemDatas.length-1;0<=e;e--){var d=V.myInGamePlayerData.userItemDatas[e];d.type==Z.InGameHongBao&&(V.myInGamePlayerData.userItemDatas.splice(e,1),this.hongBaoCount++),d.type==Z.ChestKey&&(V.myInGamePlayerData.userItemDatas.splice(e,1),this.chestKey++)}if(0<this.chestKey&&((n=K.DataModule().GetUser().GetItemByTypeAndId(Z.GridKey,Z.GridKey))?3<n.count+this.chestKey&&(this.chestKey=3-n.count):3<this.chestKey&&(this.chestKey=3),n=K.DataModule().GetUser().GetUserItemData(Z.GridKey+"_"+Z.GridKey+"_"+this.chestKey),K.DataModule().GetUser().GetItem([n],at.GridKey)),this.SetGridKey(),K.DataModule().GetUser().GetItem(V.myInGamePlayerData.userItemDatas,at.over),Laya.timer.once(2e3,this,function(){null!=i.view&&(i.view.m_addExpText.text="+"+m,i.targetexp+=m,i.expAddSpeed=(i.targetexp-i.nowexp)/.5,i.view.m_AddExp.play())}),this.isInGameRewardUIShowOver=!1,i.view.m_WinTittle.visible=!1,i.view.m_FailedTittle.visible=!1,0<V.myInGamePlayerData.userItemDatas.length?Laya.timer.once(2500,this,function(){var e;null!=i.view&&(j.FreshMedal(i.view.m_medal,K.DataModule().GetUser().GetData().userMedal.level,K.DataModule().GetUser().GetData().userMedal.star),i.view.m_rank.setSelectedPage("1"),1==V.myInGamePlayerData.rank?(i.view.m_medal.m_Effect1.play(),i.view.m_DWContinuBtn.visible=!0,K.AudioModule().PlayOnce(x.GetSound2("LevelUp")),i.view.m_WinTittle.visible=!0,i.view.m_FailedTittle.visible=!1):(i.view.m_medal.m_Effect2.play(),i.view.m_DWContinuBtn.visible=!0,K.AudioModule().PlayOnce(x.GetSound2("SubStar")),i.view.m_WinTittle.visible=!1,i.view.m_FailedTittle.visible=!0),e=i.MinUserItemDatas(V.myInGamePlayerData.userItemDatas),j.ShowGetReward(e,"",!0),0==K.PlatformModule().PlatformSettingData().OverRewardBanner&&(W.IsNextShowBanner=!1),K.UIModule().GetUI(Qg.UIName).SetRewardType(1,e),K.UIModule().GetUI(Qg.UIName).isWin=!0,i.isInGameRewardUIShowOver=!0)}):Laya.timer.once(2500,this,function(){null!=i.view&&(j.FreshMedal(i.view.m_medal,K.DataModule().GetUser().GetData().userMedal.level,K.DataModule().GetUser().GetData().userMedal.star),i.view.m_rank.setSelectedPage("1"),1==V.myInGamePlayerData.rank?(i.view.m_medal.m_Effect1.play(),i.view.m_DWContinuBtn.visible=!0,K.AudioModule().PlayOnce(x.GetSound2("LevelUp")),i.view.m_WinTittle.visible=!0,i.view.m_FailedTittle.visible=!1):(i.view.m_medal.m_Effect2.play(),i.view.m_DWContinuBtn.visible=!0,K.AudioModule().PlayOnce(x.GetSound2("SubStar")),i.view.m_WinTittle.visible=!1,i.view.m_FailedTittle.visible=!0),i.isInGameRewardUIShowOver=!0)}),ci.QianRenGetHeroPiece(V.myInGamePlayerData.rank)&&(this.needShowGetHeroPiceseUI=!0,this.heroPiceseHeroId="Assassin7"),k.FightNian&&1==V.myInGamePlayerData.rank){let e=K.DataModule().GetLocal().event.Get("2021YearMonster_Enter"),t=.01*e.F1;1==K.DataModule().GetUser().GetBaoZhuItem().buyCount&&(t=.01*e.F2),b.Warn("爆竹机会",t),Math.random()<t&&(this.needShowGetBaoZhu=!0,b.Warn("获得爆竹"))}let c=K.DataModule().GetUser().GetData().mergeLevel-2,u=(c<1&&(c=1),.1);1==V.chooseBattleSceneLevel?u=.2:2==V.chooseBattleSceneLevel?u=.4:3==V.chooseBattleSceneLevel&&(u=.7);n=1==V.myInGamePlayerData.rank?Y.cheng(K.DataModule().GetLocal().weapon.GetPrice(c),.1*(1-.01*K.DataModule().GetUser().GetData().mergeLevel)):Y.cheng(K.DataModule().GetLocal().weapon.GetPrice(c),.05*(1-.01*K.DataModule().GetUser().GetData().mergeLevel));K.DataModule().GetUser().AddCoin(n,at.over);let p=K.DataModule().GetLocal().gameRule.Get("BattleGetDiamond"),g=(1==V.chooseBattleSceneLevel?p=K.DataModule().GetLocal().gameRule.Get("BattleGetDiamond_MapLv1"):2==V.chooseBattleSceneLevel?p=K.DataModule().GetLocal().gameRule.Get("BattleGetDiamond_MapLv2"):3==V.chooseBattleSceneLevel&&(p=K.DataModule().GetLocal().gameRule.Get("BattleGetDiamond_MapLv3")),p.F4);1==V.myInGamePlayerData.rank&&(g=p.F1),2==V.myInGamePlayerData.rank&&(g=p.F2),3==V.myInGamePlayerData.rank&&(g=p.F3),K.DataModule().GetUser().ChangeDiamond(g,at.over);var f=zm.createInstance(),_=(this.view.m_rewardList.addChild(f),K.DataModule().GetUser().GetUserItemData(Z.Coin+"_"+n)),f=(j.FreshRewardItem(f,_),zm.createInstance()),_=(this.view.m_rewardList.addChild(f),K.DataModule().GetUser().GetUserItemData(Z.Diamond+"_"+g));j.FreshRewardItem(f,_),K.DataModule().GetUser().GetData().userBattleInfo.totalCount++,2==K.DataModule().GetUser().GetData().userBattleInfo.totalCount&&(W.Guidance_huoyue=!0),1==K.DataModule().GetUser().GetData().userBattleInfo.totalCount&&z.Instance.LeYou_Guidance(4),K.DataModule().GetUser().GetData().userBattleInfo.killCount+=V.myInGamePlayerData.kill,1==K.DataModule().GetUser().GetData().userBattleInfo.totalCount&&k.Platform==T.QQ&&ge.Instance.Report_CustomEvent("新手卡结束"),1==V.myInGamePlayerData.rank?(1==K.DataModule().GetUser().GetData().userBattleInfo.totalCount&&k.Platform==T.QQ&&ge.Instance.Report_CustomEvent("新手关胜利"),K.DataModule().GetUser().GetData().userBattleInfo.winCount++,k.Platform!=T.WECHAT||k.IsInWebTest||CC.Instance.WorldRankData_isOn&&CC.Instance.CDB_setWorldRankData(K.DataModule().GetUser().GetData().userBattleInfo.winCount),K.DataModule().GetUser().GetData().userBattleInfo.cv++,K.DataModule().GetUser().GetData().userBattleInfo.cv>K.DataModule().GetUser().GetData().userBattleInfo.bestCv&&(K.DataModule().GetUser().GetData().userBattleInfo.bestCv=K.DataModule().GetUser().GetData().userBattleInfo.cv)):K.DataModule().GetUser().GetData().userBattleInfo.cv=0,no.Statistics_T09(W.OneGameTime,W.OneGameLv,n,g,this.isWin,W.OneGameRevive,m),K.DataModule().GetUser().SaveData(),k.useRate&&Laya.timer.once(2800,this,function(){null==i.view||1!=V.myInGamePlayerData.rank||K.DataModule().GetUser().GetItemByID("SaveKey_Rate")||(b.Warn("展示评分",K.DataModule().GetUser().GetData().gameTime,K.DataModule().GetUser().GetData().userBattleInfo.winCount),300<=K.DataModule().GetUser().GetData().gameTime&&3<=K.DataModule().GetUser().GetData().userBattleInfo.winCount&&(b.Warn("展示评分"),i.showRate=!0))}),eg.conversion(3);let I=!1;1==V.myInGamePlayerData.rank&&(I=!0),eg.gt_end_play(I,V.myInGamePlayerData.rank,V.myInGamePlayerData.kill,K.DataModule().GetUser().GetData().userMedal.level),Laya.timer.once(3100,this,function(){null!=i.view&&j.RandomAdBtnPosTow(i.view.m_OppoLookBtn,i.view.m_oppoContinueBtn,i.view.width,!1)})}MinUserItemDatas(t){let i,o,a=[];for(let e=0;e<t.length;e++)t[e].type!=Z.Diamond?t[e].type!=Z.Coin?a.push(t[e]):i?i.count=Y.jia(i.count,t[e].count):(i=t[e],a.push(t[e])):o?o.count+=t[e].count:(o=t[e],a.push(t[e]));return a}UnLoad(){null!=this.view&&(this.firework.Dispose(),this.firework=null,this.view.dispose(),this.view=null)}Show(){super.Show(),this.Load(),j.RandomAdBtnPosTow(this.view.m_OppoLookBtn,this.view.m_oppoContinueBtn,this.view.width,!1)}Hide(){var e=K.DataModule().GetUser().GetData().userMedal;1==this.nowStarType?z.Instance.LW_StatisticsEvent(8017,e.level,e.star,"0"):2==this.nowStarType&&z.Instance.LW_StatisticsEvent(8015,e.level,e.star,"0"),T.IS_VIVO_PLATFORM&&(K.DataModule().GetUser().isShowSaveAppToDesktop=!1),super.Hide(),this.UnLoad()}DealOtherUIShowAfterInGameReward(){if(this.isInGameRewardUIShowOver)if(this.needShowGetHeroPiceseUI&&K.UIModule().GetNowTopUIName()==$g.UIName){let t=this;if(this.needShowGetHeroPiceseUI=!1,!K.DataModule().GetUser().IsHeroBuy(this.heroPiceseHeroId)&&!K.DataModule().GetUser().IsHeroUnlock(this.heroPiceseHeroId)){var i=K.DataModule().GetUser().GetUserItemDataList(["HeroPiece_"+this.heroPiceseHeroId+"_1"]);j.ShowGetReward(i);let e=K.UIModule().GetUI(Qg.UIName);e.view.m_BtnType.setSelectedIndex(3),e.view.m_title.setSelectedIndex(2),ge.Instance.Report_UI_Show(g.ThousandBladesGetHeroPiece),e.videoCallBack.AddCallBack(this,function(){j.GetRewardBtnFun(0,function(){K.UIModule().HideUI(Qg.UIName),j.GetItemDataAndIsShowBox(at.ThousandBladesGetHeroPiece,["HeroPiece_"+t.heroPiceseHeroId+"_1"],0)},at.ThousandBladesGetHeroPiece,e.view.m_videoGetBtn)})}}else{if(this.needShowGetBaoZhu&&K.UIModule().GetNowTopUIName()==$g.UIName){this.needShowGetBaoZhu=!1;let e=K.DataModule().GetUser().NewUserItemData();return e.type=Z.BaoZhu,e.id=Z.BaoZhu,K.DataModule().GetUser().GetBaoZhuItem().buyCount=1,K.DataModule().GetUser().GetItem([e],at.over),void j.ShowGetReward([e],"",!0)}if(0<this.hongBaoCount&&K.UIModule().GetNowTopUIName()==$g.UIName)return this.hongBaoCount--,void K.UIModule().ShowUI(Ao.UIName)}}onUpdate(){if(this.isShow){if(this.view.m_GameOverDetail.visible){if(this.nowexp!=this.targetexp){if(this.nowexp=S.MoveTowards(this.nowexp,this.targetexp,this.expAddSpeed*A.TimeDelta),this.nowexp>=this.maxExp){let e=K.DataModule().GetUser().GetUserLevel();this.maxExp=e.maxExp,this.nowexp=0,this.targetexp=e.exp,this.view.m_userLevelText.text=e.level.toString(),this.view.m_levelUp.play(),K.AudioModule().PlayOnce(x.GetSound2("LevelUp")),this.expAddSpeed=(this.targetexp-this.nowexp)/.5}this.view.m_expBar.fillAmount=this.nowexp/this.maxExp,this.view.m_expBar.fillAmount<.01&&(this.view.m_expBar.fillAmount=.01),this.view.m_expText.text=Math.floor(this.nowexp)+"/"+Math.floor(this.maxExp),-1==this.maxExp&&(this.view.m_expText.text="Max",this.view.m_expBar.fillAmount=1)}this.DealOtherUIShowAfterInGameReward(),k.Platform==T.WECHAT&&(0==this.view.m_rank.selectedIndex?V.isShowBanner=!1:V.isShowBanner=!0)}this.showRate&&K.UIModule().GetNowTopUIName()==$g.UIName&&(this.showRate=!1,K.UIModule().ShowUI(Xg.UIName))}}static CreatUINode(){let e=new Laya.Box,t=e.addComponent($g);return e.name=$g.UIName,t.uiName=$g.UIName,t}}),ef=$g,tf=(ef.UIName="GameOverUI",class extends ${constructor(){super(...arguments),this.hongBaoCount=0,this.exitBtnShowTime=2,this.needShowInGameGet=!1,this.needShowRankGet=!1,this.rank=0}Load(){null==this.view&&(this.view=this.CreatFGUIViewByView(Fn.createInstance()),this.AllOnClick(),this.LoadImage()),this.SetLoadInfo()}LoadImage(){"EN"==k.language?this.view.m_bg.url=x.GetIcon2("FightNianOver_EN"):this.view.m_bg.url=x.GetIcon2("FightNianOver")}AllOnClick(){let e=this;this.view.m_continueBtn.onClick(this,function(){me.User_reqSaveUser(e,null),K.UIModule().HideUI(tf.UIName),eG.StartCover()})}ShowResult(){q.EcsGameMgr.nowGame.ShowGameOver(!0),z.Instance.StatisticsEvent(aC.GameEnd),q.Instance().netFrame=!1,K.MGOBEModule().Leave(),K.AudioModule().StopMusic(),K.UIModule().ShowUI(tf.UIName),K.AudioModule().PlayOnce(x.GetSound2("Win"));let a=V.GetNianDmgRank();V.IsGameMode_Deathmatch()&&(a=V.GetSmashScoreRank());for(let o=0;o<a.length;o++){let e="#ffffff",t=(a[o].isSelf&&(e="#edc409",this.rank=o+1),On.createInstance()),i=K.DataModule().GetLocal().lottery.Get("2021YearMonsterExtraBonus"+(o+1));i&&(t.m_chest.url=x.GetFairyGUI_Icon(i.Bonus),t.m_count.text="x"+i.Amount1),this.view.m_list.addChild(t),V.IsGameMode_Deathmatch()?t.m_score.text=Math.floor(a[o].smashScore).toString():t.m_score.text=Math.floor(a[o].dmg).toString(),t.m_score.text=Math.floor(a[o].dmg).toString(),t.m_playerName.text=o+1+"."+j.NameDisplayProcessing(a[o].name,8),t.m_playerName.color=e,t.m_score.color=e}if((this.hongBaoCount=0)<V.myInGamePlayerData.userItemDatas.length)for(let e=V.myInGamePlayerData.userItemDatas.length-1;0<=e;e--)V.myInGamePlayerData.userItemDatas[e].type==Z.InGameHongBao&&(V.myInGamePlayerData.userItemDatas.splice(e,1),this.hongBaoCount++);K.DataModule().GetUser().GetItem(V.myInGamePlayerData.userItemDatas,at.over),this.view.m_continueBtn.visible=!1,this.exitBtnShowTime=1,this.needShowInGameGet=!1,this.needShowRankGet=!1,0<V.myInGamePlayerData.userItemDatas.length&&(this.needShowInGameGet=!0),this.needShowRankGet=!0}onUpdate(){this.isShow&&this.DealOtherUIShowAfterInGameReward()}MinUserItemDatas(t){let i,o,a=[];for(let e=0;e<t.length;e++)t[e].type!=Z.Diamond?t[e].type!=Z.Coin?a.push(t[e]):i?i.count=Y.jia(i.count,t[e].count):(i=t[e],a.push(t[e])):o?o.count+=t[e].count:(o=t[e],a.push(t[e]));return a}ShowShare(){let i=this;if(k.Platform==T.TT||k.Platform==T.KUAISHOU){K.PlatformModule().recordScreenEnd(),i.view.m_shareVideoBtn.visible=!0;let e=0,t=K.DataModule().GetUser().GetSaveKey("ShareKey");(e=null!=t?Number(t.data):e)<5?(i.view.m_n150.visible=!0,i.view.m_n152.visible=!0,k.Platform==T.KUAISHOU?i.view.m_shareVideoBtn.icon=x.GetFairyGUI_Icon("shareVideoBtn_KS"):i.view.m_shareVideoBtn.icon=x.GetFairyGUI_Icon("shareVideoBtn")):(i.view.m_n150.visible=!1,i.view.m_n152.visible=!1,k.Platform==T.KUAISHOU?i.view.m_shareVideoBtn.icon=x.GetFairyGUI_Icon("shareVideoBtn_KS_null"):i.view.m_shareVideoBtn.icon=x.GetFairyGUI_Icon("shareVideoBtn_null")),k.Platform==T.KUAISHOU&&(i.view.m_shareVideoBtn.icon=x.GetFairyGUI_Icon("shareVideoBtn_KS")),this.view.m_shareVideoBtn.onClick(this,function(){K.PlatformModule().shareRecordVideo(()=>{e<5&&(k.Platform==T.KUAISHOU?Yt:hg).Instance.GetShareKey(),i.view&&(i.view.m_n27.visible=!1)})})}}DealOtherUIShowAfterInGameReward(){var e;if(this.needShowInGameGet&&K.UIModule().GetNowTopUIName()==tf.UIName)return this.exitBtnShowTime-=A.TimeDelta,void(this.exitBtnShowTime<0&&(this.needShowInGameGet=!1,e=this.MinUserItemDatas(V.myInGamePlayerData.userItemDatas),j.ShowGetReward(e,"",!0),K.UIModule().GetUI(Qg.UIName).SetRewardType(1,e),K.UIModule().GetUI(Qg.UIName).view.m_isNianMode.setSelectedIndex(1)));if(0<this.hongBaoCount)K.UIModule().GetNowTopUIName()==tf.UIName&&(this.hongBaoCount--,K.UIModule().ShowUI(Ao.UIName));else if(this.needShowRankGet&&K.UIModule().GetNowTopUIName()==tf.UIName){this.needShowRankGet=!1;let t=0;for(let e=0;e<this.view.m_list.numChildren;e++)this.view.m_list.getChildAt(e).m_t0.play(null,0,.05*e),t+=.05*e;Laya.timer.once(1500,this,this.ShowMyReward)}}ShowMyReward(){let n=this.view.m_list.getChildAt(this.rank-1);if(n){let t=n.height,a=(n.m_isSelf.setSelectedIndex(1),n.height=65,this);n.m_t1.play(),K.AudioModule().PlayOnce(x.GetSound2("LevelUp")),n.m_getBtn.onClick(this,function(){var i=K.DataModule().GetLocal().lottery.Get("2021YearMonsterExtraBonus"+a.rank);if(i){b.Warn("2021YearMonsterExtraBonus"+a.rank);let t=[];for(let e=0;e<i.Amount1;e++){var o=K.DataModule().GetLocal().lottery.GetChest(i.Bonus),o=K.DataModule().GetUser().GetUserItemDataList(o);t=t.concat(o)}var e=a.MinUserItemDatas(t);K.DataModule().GetUser().GetItem(e,at.over),j.ShowGetReward(e,i.Bonus,!0),K.UIModule().GetUI(Qg.UIName).SetRewardType(1,e),K.UIModule().GetUI(Qg.UIName).view.m_isNianMode.setSelectedIndex(1),K.UIModule().GetUI(Qg.UIName).view.m_title.setSelectedIndex(3)}a.view.m_continueBtn.visible=!0,a.ShowShare(),n.m_isSelf.setSelectedIndex(0),n.height=t})}}SetLoadInfo(){}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null)}Show(){super.Show(),this.Load()}SetHideInfo(){}Hide(){this.SetHideInfo(),super.Hide(),this.UnLoad()}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(tf);return e.name=tf.UIName,t.uiName=tf.UIName,t}}),of=tf,af=(of.UIName="FightNianOverUI",class{constructor(){this.oldpos=new Laya.Vector2(0,0),this.originPoint=new Laya.Vector2(0,0),this.nowPoint=new Laya.Vector2(0,0),this.dir=new Laya.Vector2(0,0),this.vec2=new Laya.Vector2(0,0),this.isTouching=!1,this.maxRange=100,this.useAlpha=1,this.noAlpha=.5,this.useFixJoy=!1,this.nowTouchId=-1,this.pos="left"}Init(t){this.ui=t;let i=this;this.ui.on(Laya.Event.MOUSE_DOWN,this,function(e){-1==i.nowTouchId&&(i.nowTouchId=e.touchId,i.OnStart(e.stageX-t.x,e.stageY-t.y),i.FreshDir(e.stageX-t.x,e.stageY-t.y))}),this.ui.on(Laya.Event.MOUSE_UP,this,function(e){}),this.ui.on(Laya.Event.MOUSE_OUT,this,function(e){}),this.ui.on(Laya.Event.MOUSE_OVER,this,function(e){}),this.oldpos.x=this.ui.m_JoyBg.x,this.oldpos.y=this.ui.m_JoyBg.y,this.ui.m_Joy.alpha=this.noAlpha,this.ui.m_JoyBg.alpha=this.noAlpha}OnStart(e,t){this.isTouching=!0,this.useFixJoy||(this.originPoint.x=e,this.originPoint.y=t),this.nowPoint.x=e,this.nowPoint.y=t,this.useFixJoy||(this.ui.m_JoyBg.x=this.oldpos.x+e,this.ui.m_JoyBg.y=this.oldpos.y+t),this.ui.m_Joy.x=this.oldpos.x+e,this.ui.m_Joy.y=this.oldpos.y+t,this.ui.m_Joy.alpha=this.useAlpha,this.ui.m_JoyBg.alpha=this.useAlpha}inGameMove(e,t,i){this.nowTouchId==i&&this.OnMove(e-this.ui.x,t-this.ui.y)}inGameEnd(e,t,i){this.nowTouchId==i&&(this.OnEnd(e-this.ui.x,t-this.ui.y),this.nowTouchId=-1)}OnMove(e,t){this.FreshDir(e,t)}OnEnd(e,t){this.originPoint.x=0,this.originPoint.y=0,this.nowPoint.x=0,this.nowPoint.y=0,this.isTouching=!1,this.ui.m_JoyBg.x=this.oldpos.x,this.ui.m_JoyBg.y=this.oldpos.y,this.ui.m_Joy.x=this.oldpos.x,this.ui.m_Joy.y=this.oldpos.y,this.FreshDir(0,0),this.ui.m_Joy.alpha=this.noAlpha,this.ui.m_JoyBg.alpha=this.noAlpha}FreshDir(e,t){this.nowPoint.x=e,this.nowPoint.y=t,0!=e||0!=t?(this.dir.x=this.nowPoint.x-this.originPoint.x,this.dir.y=this.nowPoint.y-this.originPoint.y,e=Laya.Vector2.scalarLength(this.dir),Laya.Vector2.normalize(this.dir,this.dir),e>this.maxRange&&(Laya.Vector2.scale(this.dir,this.maxRange,this.vec2),this.nowPoint.x=this.originPoint.x+this.vec2.x,this.nowPoint.y=this.originPoint.y+this.vec2.y)):(this.dir.x=0,this.dir.y=0),K.InputModule().SetAxisValue1(Ci.SkillHorizontalAxis,-this.dir.x),K.InputModule().SetAxisValue1(Ci.SkillVerticalAxis,-this.dir.y),this.ui.m_Joy.x=this.oldpos.x+this.nowPoint.x,this.ui.m_Joy.y=this.oldpos.y+this.nowPoint.y}Update(){Laya.timer.delta}Dispose(){Laya.timer.clearAll(this)}}),nf=class extends ${constructor(){super(...arguments),this.rank=0}Load(){null==this.view&&(this.view=this.CreatFGUIViewByView(xn.createInstance()),this.AllOnClick(),this.LoadImage()),this.SetLoadInfo()}LoadImage(){}AllOnClick(){let e=this;this.view.m_continueBtn.onClick(this,function(){me.User_reqSaveUser(e,null),K.UIModule().HideUI(nf.UIName),eG.StartCover()})}SetLoadInfo(){}ShowResult(){let e=3;1==V.myInGamePlayerData.rank&&(e=2),z.Instance.LeYou_battle(e,4,W.OneGameTime),q.EcsGameMgr.nowGame.ShowGameOver(!0),z.Instance.StatisticsEvent(aC.GameEnd),q.Instance().netFrame=!1,K.MGOBEModule().Leave(),K.AudioModule().StopMusic(),K.UIModule().ShowUI(nf.UIName),K.UIModule().HideUI(Bf.UIName),K.AudioModule().PlayOnce(x.GetSound2("Win"));var t=K.DataModule().GetUser().GetSaveKey("luanDouTime"),s=(t&&2==t.count?z.Instance.ChuanQuStatistics(80023):t&&1==t.count?z.Instance.ChuanQuStatistics(80022):t&&0==t.count&&z.Instance.ChuanQuStatistics(80021),V.GetSmashScoreRank());for(let n=0;n<s.length;n++){let e="#ffffff",t=(s[n].isSelf&&(e="#edc409",this.rank=n+1,this.rank<=10&&z.Instance.ChuanQuStatistics(80024+this.rank)),On.createInstance()),i=(console.log("年兽rank",this.rank),K.DataModule().GetUser().GetData().mergeLevel),o=i-2,a=(o<1&&(o=1),Number(K.DataModule().GetLocal().weapon.GetPrice(o))*(1-.01*i)*2);a*=.83;var l=n+1,l=(1==l?a=1:a*=2==l?3:3==l?2:l<=5?1.5:l<=8?1.2:1,t.m_count.text=Y.converStr(Y.jia(0,a)),1==l&&(t.m_count.text="x1"),K.DataModule().GetLocal().lottery.Get("2021YearMonsterExtraBonus"+(n+1)));l&&(t.m_chest.url=x.GetFairyGUI_Icon(l.Bonus),1<=n&&(t.m_chest.url=x.GetFairyGUI_Icon("Coin"))),this.view.m_list.addChild(t),V.IsGameMode_Deathmatch?t.m_score.text=Math.floor(s[n].smashScore).toString():t.m_score.text=Math.floor(s[n].dmg).toString(),t.m_playerName.text=n+1+"."+j.NameDisplayProcessing(s[n].name,8),t.m_playerName.color=e,t.m_score.color=e}this.view.m_continueBtn.visible=!1;let i=0;for(let e=0;e<this.view.m_list.numChildren;e++)this.view.m_list.getChildAt(e).m_t0.play(null,0,.05*e),i+=.05*e;Laya.timer.once(1500,this,this.ShowMyReward)}ShowMyReward(){if(this.view){let m=this.view.m_list.getChildAt(this.rank-1);if(m){let r=m.height,h=(m.m_isSelf.setSelectedIndex(1),m.height=65,this);m.m_t1.play(),K.AudioModule().PlayOnce(x.GetSound2("LevelUp")),m.m_getBtn.onClick(this,function(){let e=K.DataModule().GetUser().GetData().mergeLevel,t=e-2,i=(t<1&&(t=1),Number(K.DataModule().GetLocal().weapon.GetPrice(t))*(1-.01*e)*2),o=(i*=.83,""),a=[];1==h.rank?(a.push(Z.Diamond+"_100"),i*=5,o="YearMonsterDrop2"):2==h.rank?i*=3:3==h.rank?i*=2:h.rank<=5?i*=1.5:h.rank<=8?i*=1.2:i*=1;var n=Z.Coin+"_"+i;a.push(n);let s=j.GetItemDataAndIsShowBox("",a,0,o),l=K.UIModule().GetUI(Qg.UIName);l.view.m_BtnType.setSelectedIndex(1),l.SetRewardType(3,s),l.view.m_videoBtn.icon=x.GetFairyGUI_Icon("text_doubleGet"),h.view.m_continueBtn.visible=!0,m.m_isSelf.setSelectedIndex(0),m.height=r})}}}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null)}Show(){super.Show(),this.Load()}SetHideInfo(){}Hide(){this.SetHideInfo(),super.Hide(),this.UnLoad()}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(nf);return e.name=nf.UIName,t.uiName=nf.UIName,t}},sf=nf;sf.UIName="LuanDouOverUI";var lf,rf,hf=class extends ${constructor(){super(...arguments),this.isShare=!1,this.showType="",this.nowType=""}Load(){null==this.view&&(this.view=this.CreatFGUIViewByView(is.createInstance()),this.AllOnClick(),this.LoadImage(),this.SetLoadInfo())}LoadImage(){}Event_Destroy(){}AllOnClick(){this.view.m_Btn_Close1.onClick(this,this.onBtn_Close),this.view.m_btn_Close2.onClick(this,this.onBtn_Close),this.view.m_Btn_Video.onClick(this,this.On_VideoBtn)}IsShareOrVideo(){this.isShare?j.IsShare(this.view.m_Btn_Video):this.isShare=j.IsVideoAndShare(this.view.m_Btn_Video)}Video_Call(){let e=V.GetLocalPlayer();this.nowType==lf.Bolt?(e.GetComponent(Ot).boltNum+=30,V.showAddBoltUITimes+=1):(e.GetComponent(Ot).batteryNum+=15,V.showAddBatteryUITimes+=1),K.UIModule().GetUI(Ua.UIName).ShowAddDiamond(new Laya.Vector2(this.view.m_Btn_Video.x+this.view.m_Btn_Video.width/2,this.view.m_Btn_Video.y),10),K.UIModule().HideUI(hf.UIName)}On_VideoBtn(){let e=K.UIModule().GetUI(hf.UIName),t;t=this.nowType==lf.Bolt?g.JiangShiLuoSi:g.JiangShiDianChi,e.isShare?j.GetRewardBtnFun(1,function(){e.Video_Call()},t):j.GetRewardBtnFun(0,function(){e.Video_Call()},t,e.view.m_Btn_Video)}onBtn_Close(){K.UIModule().HideUI(hf.UIName)}SetLoadInfo(){this.IsShareOrVideo(),this.nowType==lf.Battery?(this.view.m_Icon.url=x.GetFairyGUI_Icon("BigBattery"),this.view.m_numText.text="+15",this.showType==rf.Add?this.view.m_textTip1.url=x.GetFairyGUI_Icon("MianFeiDianChi"):this.view.m_textTip1.url=x.GetFairyGUI_Icon("DIanChiBuZhu")):(this.view.m_Icon.url=x.GetFairyGUI_Icon("BignBolt"),this.view.m_numText.text="+30",this.showType==rf.Add?this.view.m_textTip1.url=x.GetFairyGUI_Icon("MianFeiCaiLiao"):this.view.m_textTip1.url=x.GetFairyGUI_Icon("CaiLiaoBuZhu"))}SetShowInfo(e,t){this.nowType=e,this.showType=t,K.UIModule().ShowUI(hf.UIName)}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null)}Show(){A.TimeScaleZoom("InGameWindowUI",!0,1e-4),super.Show(),this.Load()}Hide(){A.TimeScaleZoom("InGameWindowUI",!1),super.Hide(),this.UnLoad()}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(hf);return e.name=hf.UIName,t.uiName=hf.UIName,t}},mf=hf,df=(mf.UIName="InGameWindowUI",(G=lf=lf||{}).Battery="Battery",G.Bolt="Bolt",(G=rf=rf||{}).Add="Add",G.Insufficient="Insufficient",class extends ${constructor(){super(...arguments),this.weaponList=[],this.trigger=null,this.bunkerTent=null,this.selfPlayer=null}Load(){if(null==this.view){this.view=this.CreatFGUIViewByView(br.createInstance());let e=this;this.view.m_closeBtn.onClick(this,function(){e.Hide()}),this.resetLoad()}}resetLoad(){let e=this.bunkerTent.GetComponent(Ct),o=[];if(0<e.weaponLevelList.length)o=e.weaponLevelList;else{for(let i=0;i<3;i++){let e=K.DataModule().GetLocal().gameRule,t=e.ZombieMode_Shop_WeaponLevel2(V.CurrentDay,Math.random());0==i&&(t=e.ZombieMode_Shop_WeaponLevel(V.CurrentDay,Math.random(),Math.random())),o.push(t)}this.bunkerTent.GetComponent(Ct).weaponLevelList=o}this.weaponList=[];for(let e=0;e<o.length;e++){var t=o[e],t=K.DataModule().GetLocal().weapon.GetByLevel(t);this.weaponList.push(t)}this.ShopListRefresh()}ShopListRefresh(){this.selfPlayer=V.GetLocalPlayer(),this.view.m_ShopList.itemRenderer=Laya.Handler.create(this,this.onRenderItem,null,!1),this.view.m_ShopList.numItems=this.weaponList.length,this.view.m_ShopList.on(fairygui.Events.CLICK_ITEM,this,this.onItem)}setUIShow(e,t){this.trigger=e,this.bunkerTent=t}onRenderItem(t,i){0==t?(i.m_buyBtn.m_c1.setSelectedPage("Video"),i.m_c1.setSelectedPage("Video")):(i.m_buyBtn.m_c1.setSelectedPage("Bolt"),i.m_c1.setSelectedPage("Bolt"));let o=this.weaponList[t],a=K.DataModule().GetLocal().gameRule.ZombieMode_Shop_WeaponPrice(V.CurrentDay,o.Level),n=this,e=(i.m_Icon.url=x.GetIcon(o.uiRes),i.m_buyBtn.m_n4.text=""+a,i.m_WeaponType.text=V.GetWeaponType(o.ID),i.m_WeaponName.text=""+o.ChineseName,i.m_WeaponLevelText.text="Lv."+o.Level,this.selfPlayer.GetComponent(ti).weaponId),s=K.DataModule().GetLocal().weapon.Get(e),l=Math.floor((o.Level-s.Level)/s.Level*100),r=0==l?"战力+":"战力";i.m_zhanLiText.text=r+l+"%",0<l?(i.m_arrowsCom.visible=!0,i.m_arrowsCom.m_arrowsCom.url=x.GetFairyGUI_Icon("arrows_up")):0==l?i.m_arrowsCom.visible=!1:(i.m_arrowsCom.visible=!0,i.m_arrowsCom.m_arrowsCom.url=x.GetFairyGUI_Icon("arrows_down")),i.m_buyBtn.onClick(this,function(){var e;0==t?j.GetRewardBtnFun(0,function(){K.AudioModule().OptimizePlayOnce(x.GetSound2("Purchase")),V.ChangeGun(n.trigger,o.ID),n.bunkerTent.GetComponent(Ct).weaponLevelList=[],n.Hide()},g.JiangShiShopWeapon,i.m_buyBtn,function(){}):0<=(e=n.trigger.GetComponent(Ot).boltNum-a)?(K.AudioModule().OptimizePlayOnce(x.GetSound2("Purchase")),n.trigger.GetComponent(Ot).boltNum=e,V.ChangeGun(n.trigger,o.ID),z.Instance.LeYou_action(1004,11),n.Hide()):K.UIModule().GetUI(mf.UIName).SetShowInfo(lf.Bolt,rf.Insufficient)})}onItem(e){}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null)}Show(){A.TimeScaleZoom("TentShopUI",!0,1e-4),super.Show(),this.Load()}Hide(){A.TimeScaleZoom("TentShopUI",!1),super.Hide(),this.UnLoad()}onUpdate(){this.isShow}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(df);return e.name=df.UIName,t.uiName=df.UIName,t.jointOrder=!1,t}}),cf=df,uf=(cf.UIName="TentShopUI",class extends ${constructor(){super(...arguments),this.nowexp=0,this.targetexp=0,this.maxExp=0,this.expAddSpeed=100,this.showRate=!1,this.isInGameRewardUIShowOver=!1,this.needShowGetHeroPiceseUI=!1,this.heroPiceseHeroId="",this.hongBaoCount=0,this.chestKey=0,this.needShowGetBaoZhu=!1,this.isover1=!0,this.selfPlayer=null,this.unlockList=[],this.nowStarType=0,this.isWin=-1}Load(){if(null==this.view){V.isShowBanner=!1,this.view=this.CreatFGUIViewByView(Om.createInstance()),this.showRate=!1;let e=this;this.view.m_Dead.visible=!0,this.view.m_exitBtn.onClick(this,function(){e.ShowResult(),T.ProjectSubCode&&1<=K.DataModule().GetUser().GetData().userBattleInfo.totalCount&&K.PlatformModule().ShowInterstitialAd()}),T.IS_WECHAT_PLATFORM&&this.view.m_Btn_Shard.onClick(this,function(){CC.Instance.Shard(function(){},function(){})}),this.firework=new Vp;var n="Tip_"+f.GetF1_F2RandomValue(1,10).toString(),n=K.DataModule().GetLz().GetText(n);this.view.m_tips.text=n,this.isover1?(null==K.DataModule().GetUser().GetItemByID("SaveKey_AddToDesktop")&&0!=K.DataModule().GetPlatform().PlatformData.ShowHeroRes?this.view.m_ShowTImes.setSelectedPage("3"):this.view.m_ShowTImes.setSelectedPage("2"),this.view.m_GetNewHeroBtn.onClick(this,function(){K.UIModule().ShowUI(cg.UIName)}),this.view.m_GetEquitBtn.onClick(this,function(){K.UIModule().ShowUI(Yo.UIName)}),this.view.m_GetLotteryBtn.onClick(this,function(){K.UIModule().ShowUI(Xo.UIName)})):this.view.m_bianQiangBtn.onClick(this,function(){null==K.DataModule().GetUser().GetItemByID("SaveKey_AddToDesktop")?K.UIModule().ShowUI(cg.UIName):K.UIModule().ShowUI(Yo.UIName)});let t=K.ResModule().Get3DRes(q.EcsGameMgr.nowGame.scenePath).getChildByName("Directional Light"),i=new Laya.Vector3(1,1,1),o=(t.color.x=i.x,t.color.y=i.y,t.color.z=i.z,this.view.m_continueBtn.onClick(this,function(){e.continueFun()}),k.Platform==T.TT&&this.view.m_YLPlatform.setSelectedPage("TT"),k.Platform==T.WECHAT&&this.view.m_YLPlatform.setSelectedPage("Wx"),this.isInGameRewardUIShowOver=!1,this.needShowGetHeroPiceseUI=!1,this.needShowGetBaoZhu=!1,this.hongBaoCount=0,this.chestKey=0,this.SetInfoLoad(),this.RankDisplay(),[]),a=zm.createInstance();this.view.m_rewardList.addChild(a);var n=V.CurrentDay-1+V.ZCoin,n=K.DataModule().GetUser().GetUserItemData(Z.ZombieCoin+"_"+n),s=(j.FreshRewardItem(a,n),zm.createInstance()),l=(this.view.m_rewardList.addChild(s),K.DataModule().GetUser().GetUserItemData(Z.Coin+"_"+V.addCoinNum));j.FreshRewardItem(s,l),this.view.m_dayText.text=(V.CurrentDay-1).toString(),o.push(n),K.DataModule().GetUser().AddCoin(V.addCoinNum,""),K.DataModule().GetUser().GetItem(o,""),this.ShopListRefresh()}V.isGameOverBack=!0}ShopListRefresh(){this.selfPlayer=V.GetLocalPlayer(),this.unlockList=this.unlockList.concat(this.selfPlayer.GetComponent(L).unlockItemList),this.unlockList=this.unlockList.concat(this.selfPlayer.GetComponent(L).unlockPassiveList),this.unlockList.length<=0?this.view.m_IsUnlock.setSelectedPage("false"):(this.view.m_IsUnlock.setSelectedPage("true"),this.view.m_MedalRewardList.itemRenderer=Laya.Handler.create(this,this.onRenderItem,null,!1),this.view.m_MedalRewardList.numItems=this.unlockList.length)}onRenderItem(e,t){var e=this.unlockList[e],i=K.DataModule().GetLocal().item.Get(e);i?(t.m_name.text=i.ChineseName,t.m_Icon.url=x.GetIcon("Icon_"+i.UIRes)):(i=K.DataModule().GetLocal().zModePassiveSkill.Get(e))&&(t.m_Icon.url=x.GetIcon("Icon_"+i.UIRes),t.m_name.text=i.ChineseName)}continueFun(){var e;me.User_reqSaveUser(this,null),K.UIModule().HideUI(uf.UIName),eG.StartCover(),eg.conversion(4),k.isUseGridBoxKey&&(e=K.DataModule().GetUser().GetItemByTypeAndId(Z.GridKey,Z.GridKey))&&3<=e.count&&(Zg.Cover_IsShowGridChestUI=!0)}RankDisplay(){let e=K.DataModule().GetUser().GetNextGetBigRewardMedalLevel(),t=[],i;if(-1!=e){var o=K.DataModule().GetLocal().medal.GetByLevel(e);o.Bonus,i=o.Bonus;for(let e=0;e<i.length;e++){var a=zm.createInstance(),n=K.DataModule().GetUser().GetUserItemData(i[e]);t.push(n),j.FreshRewardItem(a,n)}}}SetGridKey(t=!1){let i=this,o=K.DataModule().GetUser().GetItemByTypeAndId(Z.GridKey,Z.GridKey);if(t&&K.AudioModule().PlayOnce(x.GetSound2("LevelUp")),o)try{for(let e=1;e<=o.count;e++){if(3<e||!i.view["m_key"+e])return;i.view["m_key"+e].m_image_key2.visible=!1,e>o.count-this.chestKey&&(i.view["m_key"+e].m_image_key2.visible=!0,t&&Laya.timer.once(300*(e-(o.count-this.chestKey)),this,function(){try{i.view["m_key"+e].m_image_key2.visible=!1,i.view["m_key"+e].m_t0.play()}catch(e){console.log("错误m_key",e)}}))}}catch(t){console.log("错误nowKey",t)}}SetInfoLoad(){if(console.log("进入失败页"),V.InGameIng=!1,!k.isUseGridBoxKey)for(let e=1;e<4;e++)this.view["m_key"+e].visible=!1}isStar(e){}ResultStarBonus(e){var t=K.DataModule().GetLocal().gameRule.GetResultStarBonus();this.isStar(0),this.nowStarType=0,e?f.GetRandomValue(t.F2)&&(this.isStar(1),this.nowStarType=1):(e=K.DataModule().GetUser().GetData().userMedal.level,f.GetRandomValue(t.F1)&&1<e&&(this.isStar(1),this.nowStarType=2))}RefreshIsCanGetMedalReward(e){this.view.getController("rank").setSelectedIndex(1);let t=this,i=(Laya.timer.once(3e3,this,function(){try{t.view&&t.view.getController("rank").setSelectedIndex(0)}catch(e){}}),Laya.timer.once(1500,t,function(){try{K.AudioModule().PlayOnce(x.GetSound2("LevelUp")),j.FreshMedal(this.view.m_medal,K.DataModule().GetUser().GetData().userMedal.level,K.DataModule().GetUser().GetData().userMedal.star)}catch(e){}}),K.DataModule().GetUser().GetNextGetRewardMedalLevel()),o=[],a;if(-1!=i){var n=K.DataModule().GetLocal().medal.GetByLevel(i);n.Bonus,a=n.Bonus;for(let e=0;e<a.length;e++){var s=zm.createInstance(),l=(zm.createInstance(),K.DataModule().GetUser().GetUserItemData(a[e]));o.push(l),j.FreshRewardItem(s,l)}}n=K.DataModule().GetUser().IsCanGetMedalReward();n&&(K.DataModule().GetUser().GetData().userMedal.hasGetRewardLevel.push(i),K.DataModule().GetUser().GetItem(o,at.over)),null!=this.view&&n&&this.view.m_GetMedalAni.play()}ShowInGameFailed(){K.UIModule().ShowUI(uf.UIName),this.view.m_title.text="存活"+(V.CurrentDay-1)+"天",this.view.m_show.play()}ShowResult(){V.myInGamePlayerData.rank;let e=V.CurrentDay,t="300"+e.toString();10<=e?t="30"+e.toString():15<e&&(t="3016"),console.log("僵尸上报结算",t);var i=K.DataModule().GetUser().GetData().ZomBattleInfo;K.DataModule().GetUser().GetData().ZomBattleInfo.totalCount++,1!=i.totalCount||K.DataModule().GetUser().IsHeroUnlock("Squire")||(i=Z.UnlockHero+"_Squire",j.GetItemDataAndIsShowBox("",[i],2)),z.Instance.LeYou_battle(2,3,W.OneGameTime,Number(t)),z.Instance.StatisticsEvent(aC.GameEnd),q.Instance().netFrame=!1,K.MGOBEModule().Leave(),K.AudioModule().StopMusic(),K.UIModule().ShowUI(uf.UIName),V.myInGamePlayerData.rank<=1&&(V.myInGamePlayerData.rank=1),1==V.myInGamePlayerData.rank?(this.player=q.EcsGameMgr.nowGame.ShowGameOver(!0),this.firework.Init(this.view.m_firework,1),SC.GameBattleEnd(1),K.AudioModule().PlayOnce(x.GetSound2("Win")),this.isWin=1):(this.isWin=0,SC.GameBattleEnd(0),this.player=q.EcsGameMgr.nowGame.ShowGameOver(!1),K.AudioModule().PlayOnce(x.GetSound2("Failed"))),this.view.m_GameOverAni.play(),K.DataModule().GetUser().SaveData();V.myInGamePlayerData.rank}MinUserItemDatas(t){let i,o,a=[];for(let e=0;e<t.length;e++)t[e].type!=Z.Diamond?t[e].type!=Z.Coin?a.push(t[e]):i?i.count=Y.jia(i.count,t[e].count):(i=t[e],a.push(t[e])):o?o.count+=t[e].count:(o=t[e],a.push(t[e]));return a}UnLoad(){null!=this.view&&(this.firework.Dispose(),this.firework=null,this.view.dispose(),this.view=null)}Show(){super.Show(),this.Load()}Hide(){var e=K.DataModule().GetUser().GetData().userMedal;1==this.nowStarType?z.Instance.LW_StatisticsEvent(8017,e.level,e.star,"0"):2==this.nowStarType&&z.Instance.LW_StatisticsEvent(8015,e.level,e.star,"0"),T.IS_VIVO_PLATFORM&&(K.DataModule().GetUser().isShowSaveAppToDesktop=!1),super.Hide(),this.UnLoad()}DealOtherUIShowAfterInGameReward(){if(this.isInGameRewardUIShowOver)if(this.needShowGetHeroPiceseUI&&K.UIModule().GetNowTopUIName()==uf.UIName){let t=this;if(this.needShowGetHeroPiceseUI=!1,!K.DataModule().GetUser().IsHeroBuy(this.heroPiceseHeroId)&&!K.DataModule().GetUser().IsHeroUnlock(this.heroPiceseHeroId)){var i=K.DataModule().GetUser().GetUserItemDataList(["HeroPiece_"+this.heroPiceseHeroId+"_1"]);j.ShowGetReward(i);let e=K.UIModule().GetUI(Qg.UIName);e.view.m_BtnType.setSelectedIndex(3),e.view.m_title.setSelectedIndex(2),ge.Instance.Report_UI_Show(g.ThousandBladesGetHeroPiece),e.videoCallBack.AddCallBack(this,function(){j.GetRewardBtnFun(0,function(){K.UIModule().HideUI(Qg.UIName),j.GetItemDataAndIsShowBox(at.ThousandBladesGetHeroPiece,["HeroPiece_"+t.heroPiceseHeroId+"_1"],0)},at.ThousandBladesGetHeroPiece,e.view.m_videoGetBtn)})}}else{if(this.needShowGetBaoZhu&&K.UIModule().GetNowTopUIName()==uf.UIName){this.needShowGetBaoZhu=!1;let e=K.DataModule().GetUser().NewUserItemData();return e.type=Z.BaoZhu,e.id=Z.BaoZhu,K.DataModule().GetUser().GetBaoZhuItem().buyCount=1,K.DataModule().GetUser().GetItem([e],at.over),void j.ShowGetReward([e],"",!0)}if(0<this.hongBaoCount&&K.UIModule().GetNowTopUIName()==uf.UIName)return this.hongBaoCount--,void K.UIModule().ShowUI(Ao.UIName)}}onUpdate(){this.isShow&&(this.player,this.view.m_GameOverDetail.visible&&this.DealOtherUIShowAfterInGameReward(),this.showRate)&&K.UIModule().GetNowTopUIName()==uf.UIName&&(this.showRate=!1,K.UIModule().ShowUI(Xg.UIName))}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(uf);return e.name=uf.UIName,t.uiName=uf.UIName,t}}),pf=uf,gf=(pf.UIName="ZombieGameOverUI",class extends ${Load(){null==this.view&&(this.view=this.CreatFGUIViewByView(Vm.createInstance()),this.AllOnClick(),this.LoadImage())}LoadImage(){this.view.m_Icon.url=x.GetIcon("ZombieGuideTip")}AllOnClick(){let e=this;this.view.m_jixuBtn.onClick(this,function(){e.Hide()})}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null)}Show(){A.TimeScaleZoom("SurvivalGuideUI",!0,1e-4),super.Show(),this.Load()}Hide(){A.TimeScaleZoom("SurvivalGuideUI",!1),super.Hide(),this.UnLoad()}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(gf);return e.name=gf.UIName,t.uiName=gf.UIName,t}}),ff=gf,_f=(ff.UIName="SurvivalGuideUI",class extends ${Load(){null==this.view&&(this.view=this.CreatFGUIViewByView(Ys.createInstance()),this.AllOnClick(),this.LoadImage(),P.onAddDay.Register(this,this.onAddDay))}onAddDay(){this.view.m_dayText.text="已经存活"+V.CurrentDay+"/20天",this.refreshList()}LoadImage(){this.view.m_Icon.url=x.GetIcon("SurvivalRewardIcon"),this.onAddDay()}refreshList(){this.view.m_List.itemRenderer=Laya.Handler.create(this,this.onRenderItem,null,!1),this.view.m_List.numItems=20}onRenderItem(e,t){e<=V.CurrentDay-1?t.visible=!0:t.visible=!1}AllOnClick(){let e=this;this.view.m_jixuBtn.onClick(this,function(){e.Hide()})}UnLoad(){null!=this.view&&(P.onAddDay.Remove(this,this.onAddDay),this.view.dispose(),this.view=null)}Show(){A.TimeScaleZoom("SurvivalRewardUI",!0,1e-4),super.Show(),this.Load()}Hide(){A.TimeScaleZoom("SurvivalRewardUI",!1),super.Hide(),this.UnLoad()}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(_f);return e.name=_f.UIName,t.uiName=_f.UIName,t}}),If=_f,Cf=(If.UIName="SurvivalRewardUI",class extends ${constructor(){super(...arguments),this.questList=[],this.trigger=null,this.bunkerTent=null,this.selfPlayer=null}Load(){if(null==this.view){this.view=this.CreatFGUIViewByView(Ln.createInstance());let e=this;this.view.m_closeBtn.onClick(this,function(){e.Hide()}),this.resetLoad()}}resetLoad(){K.DataModule().GetLocal().gameRule;let t=K.DataModule().GetLocal().zQuest;if(this.bunkerTent.GetComponent(Ct).hasGetQuest)return P.onNotQuest.Trigger(),void this.Hide();var e=this.bunkerTent.GetComponent(Ct);if(this.questList=[],0<e.questList.length)this.questList=e.questList;else{for(let e=0;e<3;e++){var i=t.GetRandomQuest(V.CurrentDay,Math.random()),i=sp.GetQuest(i.QuestID);i&&this.questList.push(i)}this.bunkerTent.GetComponent(Ct).questList=this.questList}this.ShopListRefresh()}ShopListRefresh(){this.selfPlayer=V.GetLocalPlayer(),this.view.m_QuestList.itemRenderer=Laya.Handler.create(this,this.onRenderItem,null,!1),this.view.m_QuestList.numItems=this.questList.length,this.view.m_QuestList.on(fairygui.Events.CLICK_ITEM,this,this.onItem)}setUIShow(e,t){this.trigger=e,this.bunkerTent=t}onRenderItem(e,t){let i=this.questList[e],o=(t.m_QuestTitle.text=i.titleText,t.m_QuestContext.text=i.contextText,t.m_RewardContext.text=i.rewardText,t.m_Star.setSelectedIndex(i.level-1),t.m_Icon.url=x.GetImage("Quest_"+i.uiRes),this);t.m_GetQuestBtn.onClick(this,function(){var e;o.bunkerTent.GetComponent(Ct).hasGetQuest||(3<=o.selfPlayer.GetComponent(Cu).questList.length?j.TopUI_TipShow(K.Lz("TentQuestUI_GetQuest_OutOfLimit")):(e=Di.GetUINode2DWorldPos(t.m_Icon),i.initIconPos.setValue(e.x,e.y),sp.AddQuest(o.selfPlayer,i),o.bunkerTent.GetComponent(Ct).hasGetQuest=!0,setTimeout(()=>{o.Hide()},150)))})}onItem(e){}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null)}Show(){A.TimeScaleZoom("TentQuestUI",!0,1e-4),super.Show(),this.Load()}Hide(){A.TimeScaleZoom("TentQuestUI",!1),super.Hide(),this.UnLoad()}onUpdate(){this.isShow}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(Cf);return e.name=Cf.UIName,t.uiName=Cf.UIName,t.jointOrder=!1,t}}),Gf=Cf,Sf=(Gf.UIName="TentQuestUI",class extends ${constructor(){super(...arguments),this.idList=[]}Load(){if(null==this.view){this.view=this.CreatFGUIViewByView(Un.createInstance());let e=this,t=q.NowGameWorld.GetSingleCompoentEntity(_t);if(t){let e=t.GetComponent(R);this.idList=e.upgRadeList[0].split("|"),this.List_Refresh()}this.view.m_closeBtn.onClick(this,function(){e.Hide()})}}List_Refresh(){this.view.m_skillInfoList.itemRenderer=Laya.Handler.create(this,this.onRenderItem,null,!1),this.view.m_skillInfoList.numItems=this.idList.length}onRenderItem(e,t){let i=this.idList[e].split("_"),o=i[0],a=1,n=(2==e&&(t.m_n0.visible=!1),1<i.length&&(a=Number(i[1])),null),s=(V.IsGameMode_Zombie()?(n=K.DataModule().GetLocal().zModePassiveSkill.Get(o),t.m_c1.setSelectedPage("Buff")):""!=(n=K.DataModule().GetLocal().skill.Get(o)).BuffFun?t.m_c1.setSelectedPage("Buff"):t.m_c1.setSelectedPage("Skill"),t.m_SkillIcon.url=x.GetIcon("Icon_"+n.UIRes),t.m_SkillIconCom.m_icon.url=x.GetIcon("Icon_"+n.UIRes),t.m_SkillName1.text="【"+K.DataModule().GetLz().GetText("SkillName_"+n.SkillID)+"】",t.m_SkillName2.text="【"+K.DataModule().GetLz().GetText("SkillName_"+n.SkillID)+"】",1),l=V.GetLocalPlayer(),r=1,h=!1,m=!1;if(l.HasComponent(L.id)){var d=l.GetComponent(L);for(let e=0;e<d.skillList.length;e++)d.skillList[e].skillID==o&&(s=d.skillList[e].level+1,r=d.skillList[e].maxLevel,h=!1,m=!0)}let c=1,u=1;if(l.HasComponent(Vt.id)){var p=l.GetComponent(Vt);for(let e=0;e<p.buffList.length;e++)p.buffList[e].buffName==o&&(c=p.buffList[e].level+1,u=p.buffList[e].maxLevel,h=!0,m=!0)}1<a&&(s=a),V.IsGameMode_Zombie()?(e=K.DataModule().GetLocal().zModePassiveSkill.Get(o),h=!0,m||(u=e.SkillMaxLevel)):""!=(e=K.DataModule().GetLocal().skill.Get(o)).BuffFun?(h=!0,m||(u=e.SkillMaxLevel)):(h=!1,m||(r=e.SkillMaxLevel)),h?(t.m_SkillIconCom.m_bar.setSelectedPage("buff"),t.m_SkillIconCom.m_buleBar.fillAmount=c/u,t.m_SkillIconCom.m_MaxLevel.setSelectedPage("Lv"+u)):(t.m_SkillIconCom.m_bar.setSelectedPage("skill"),t.m_SkillIconCom.m_greenBar.fillAmount=s/r,t.m_SkillIconCom.m_MaxLevel.setSelectedPage("Lv"+r)),V.IsGameMode_Zombie()?(t.m_SkillInfo.text=K.DataModule().GetLocal().localization.GetLocalTextByZMSkillValue(o,c,"#FFCF3B"),t.m_Level.text="Lv"+c):(t.m_SkillInfo.text=K.DataModule().GetLocal().localization.GetLocalTextBySkillValue(o,s,"#FFCF3B"),t.m_Level.text=h?"Lv"+c:"Lv"+s)}onUpdate(){this.view}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null)}Show(){super.Show(),this.Load()}Hide(){super.Hide(),this.UnLoad()}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(Sf);return e.name=Sf.UIName,t.uiName=Sf.UIName,t}}),yf=Sf;yf.UIName="SkillInfoUI";var wf=class extends ${Load(){null==this.view&&(this.view=this.CreatFGUIViewByView(Is.createInstance()),this.AllOnClick(),this.LoadImage()),this.SetLoadInfo()}LoadImage(){}AllOnClick(){this.view.m_Btn_continue.onClick(this,this.onBtn_Close)}onBtn_Close(){K.UIModule().HideUI(wf.UIName)}SetLoadInfo(){A.TimeScaleZoom("VideoGetAllBtn",!0,1e-4)}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null)}Show(){super.Show(),this.Load()}SetHideInfo(){A.TimeScaleZoom("VideoGetAllBtn",!1)}Hide(){this.SetHideInfo(),super.Hide(),this.UnLoad()}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(wf);return e.name=wf.UIName,t.uiName=wf.UIName,t}},vf=wf,Df=(vf.UIName="StopUI",0,class extends ${constructor(){super(...arguments),this.expTarget=0,this.infoList=[],this.zombieInfoList=[],this.zombieTipsList=[],this.zombieInfoTime=1,this.subkinfoTime=5,this.skillTouchIDList=[-1,-1,-1,-1],this.startTime=0,this.vec4=new Laya.Vector4,this.vec2=new Laya.Vector2,this.vec3=new Laya.Vector3,this.vec5=new Laya.Vector3,this.ray=new Laya.Ray(new Laya.Vector3(0,0,0),new Laya.Vector3(0,0,0)),this.touchGuideTime=0,this.showGuideWaitTime=0,this.ingameGuideStep=0,this.isInTouch=!1,this.bunkerId=-1,this.doorId=-1,this.offOrOn=!1,this.bunkerTent=null,this.bunkerTentUnit=null,this.itemTriggerUnit=null,this.itemTrigger=null,this.weaponId="",this.isRefreshInfo=!1,this.isPlayerBoolTip=!1,this.batter=0,this.newbBatter=0,this.lastBatterTime=0,this.zombieReviveTimes=0,this.isUpNewPlayer=!0,this.isGameStart=!1,this.buttonTriggerVec2=new Laya.Vector2(0,0),this.isFirstRequestFocus=!1,this.nowItemId=-1,this.itemTriggerId=-1,this.nowIndex=-1,this.player=null,this.skill="",this.nowSkillList=[],this.inputDir=new Laya.Vector2(0,0),this.inputFireDir=new Laya.Vector2(0,0),this.inputSkillDir=new Laya.Vector2(0,0),this.oldAngle=-1,this.fireOldAngle=-1,this.skill1OldAngle=-1,this.skill2OldAngle=-1,this.skill3OldAngle=-1,this.oldSavePlayerCount=-1,this.guideOver=!1,this.leYouUp=[!1,!1,!1],this.isOneMove=!0,this.isOneShoot=!0,this.inGameBanner_qqCD=15,this.inGameBanner_qqCD_timer=0,this.inGameBanner_qqCD_timerShow=0,this.zombieTipTime=0,this.isPlayerReload=!1,this.oldExp=-1,this.oldLevel=-1,this.freshRankTime=0}Load(){if(null==this.view){let e=K.UIModule().GetUI(wC.UIName),m=(e&&(e.isShowLaiwan=!1),("Save"!=Laya.LocalStorage.getItem("HasSaveUserData12")||W.newPlayer)&&this.isUpNewPlayer&&(z.Instance.LeYou_Guidance(104),this.isUpNewPlayer=!1),z.Instance.LW_StatisticsEvent(5008),W.statrGame=!0,W.OneGameOver++,this.infoList=[],this.isPlayerBoolTip=!1,this.oldSavePlayerCount=-1,V.addCoinNum="0",this.zombieReviveTimes=0,T.QQ==k.Platform&&1==K.DataModule().GetPlatform().PlatformData.inGameBanner_qqOn&&(this.inGameBanner_qqCD=K.DataModule().GetPlatform().PlatformData.inGameBanner_qqCD),this);if(this.view=this.CreatFGUIViewByView(Ii.createInstance()),this.isGameStart=!1,this.zombieInfoList=[],this.zombieTipsList=[],k.IsGM){this.view.m_text1.visible=!0,this.view.m_text1.m_n3.text="掉道具";let i=[];for(let e=0;e<10;e++){let e=K.DataModule().GetUser().NewUserItemData();e.id=Z.AddItem,e.type=Z.AddItem,e.tableID=Z.AddItem,i.push(e)}this.view.m_text1.onClick(this,function(){var t=V.GetLocalPlayer();for(let e=0;e<i.length;e++)V.BonuseItem(t,null,i,e)}),this.view.m_text2.visible=!0,this.view.m_text2.m_n3.text="升级",this.view.m_text2.onClick(this,function(){let e=V.GetLocalPlayer().GetComponent(R);e.exp=0,e.nowLevel++,e.maxExp=K.DataModule().GetLocal().gameRule.InGameUpgradeNeedExp(e.nowLevel),e.upRadeCount++}),this.view.m_text3.visible=!0,this.view.m_text3.m_n3.text="跨天",this.view.m_text3.onClick(this,function(){V.radiationLevel+=1+(V.CurrentDay%3==0?1:0),V.CurrentDay+=1,P.onRadiationLevelUp.Trigger()})}this.view.m_batteryBar.m_Icon.url=x.GetFairyGUI_Icon("Battery"),this.view.m_boltBar.m_Icon.url=x.GetFairyGUI_Icon("Bolt"),this.view.m_CoinBar.m_Icon.url=x.GetFairyGUI_Icon("Coin"),this.view.m_ZCoinBar.m_Icon.url=x.GetFairyGUI_Icon("ZombieCoin"),V.ZCoin=0,this.view.m_batteryBar.m_AddTip.visible=!0,this.view.m_boltBar.m_AddTip.visible=!0,this.view.m_SurvivalRewardBtn.onClick(this,function(){K.UIModule().ShowUI(If.UIName)}),this.view.m_batteryBar.onClick(this,function(){K.UIModule().GetUI(mf.UIName).SetShowInfo(lf.Battery,rf.Add)}),this.view.m_boltBar.onClick(this,function(){K.UIModule().GetUI(mf.UIName).SetShowInfo(lf.Bolt,rf.Add)}),this.view.m_SurvivalGuideBtn.onClick(this,function(){K.UIModule().ShowUI(ff.UIName)}),this.view.m_TentCom.m_ShangdianBtn.onClick(this,function(){z.Instance.LeYou_action(1002,11);let e=K.UIModule().GetUI(cf.UIName);e.setUIShow(m.bunkerTentUnit,m.bunkerTent),e.Show()}),this.view.m_TentCom.m_QuestBtn.onClick(this,function(){let e=K.UIModule().GetUI(Gf.UIName);e.setUIShow(m.bunkerTentUnit,m.bunkerTent),e.Show()}),this.view.m_ChangeCom.m_ChangeBtn.onClick(this,function(){V.ChangeGun(m.itemTriggerUnit,m.weaponId),m.view.m_ChangeCom.visible=!1;let e=m.itemTrigger.GetComponent(Gt).itemId,i=q.NowGameWorld.GetEntityByID(e);if(i){let e=i.GetComponent(y),t=q.NowGameWorld.GetEntityByID(e.ItemTriggerId);t&&t.Destory(),i&&i.Destory()}}),this.view.m_TentCom.m_ShengJiBtn.onClick(this,function(){if(m.bunkerTent&&m.bunkerTentUnit){let e=m.bunkerTent.GetComponent(Ct),a=q.NowGameWorld.GetEntityByID(e.bunkerId),t=this.bunkerTent.GetComponent(Ct),n=q.NowGameWorld.GetEntityByID(t.bunkerId),s=n.GetComponent(pt),l=V.zombieMode_bunkerUpgradePrice(s.level),i=V.zombieMode_bunkerLevelHP(s.level),r=V.zombieMode_bunkerLevelHP(s.level+1),h=r-i;if(999999==l)j.TopUI_TipShow("Level Max!");else{let i=m.bunkerTentUnit.GetComponent(Ot),e=i.boltNum,o=e-l;if(0<=o){i.boltNum=o,s.isDamage=!1,vu.UpdateBunkerWallCollider(n),s.level+=1;let e=a.GetComponent(y),t=(e.maxhp=r,e.hp+=h,a.GetComponent(D));t.maxhp=r,t.hp=e.hp,t.freshUI=!0,j.TopUI_TipShow("Bunker upgrade successfully"),z.Instance.LeYou_action(1003,11)}else console.warn("材料不足升级掩体",e),K.UIModule().GetUI(mf.UIName).SetShowInfo(lf.Bolt,rf.Insufficient);m.refreshTentUI(n)}}}),this.view.m_DoorCom.m_doorBtn.onClick(this,function(){-1!=m.bunkerId&&-1!=m.doorId&&(m.offOrOn?V.offDoor(m.bunkerId,m.doorId):V.openDoor(m.bunkerId,m.doorId),m.doorId=-1,m.bunkerId=-1)}),V.isOnCar=!1,this.view.m_CarCom.m_cheMenBtn.onClick(this,function(){q.NowGameWorld.GetEntityByID(m.carTrigger.GetComponent(ft).carId).GetComponent(pi).isDamage||(V.isOnCar?(V.isOnCar=!1,V.onGetOff(m.carTrigger,m.unit),m.onBoarding(),m.view.m_CarCom.m_cheMenBtn.visible=!0):-1==m.unit.GetComponent(R).areYouDriving&&(V.onBoarding(m.carTrigger,m.unit),V.isOnCar=!0,m.onGetOff()))}),this.refreshCoin(),this.view.m_CarCom.m_jiaYouBtn.onClick(this,function(){let i=K.DataModule().GetLocal().gameRule,e=m.unit.GetComponent(Ot).batteryNum,o=e-i.ZombieMode_Car_ChargeEnergyPrice();if(0<=o){m.unit.GetComponent(Ot).batteryNum=o;let e=m.carTrigger.GetComponent(ft).carId,t=q.NowGameWorld.GetEntityByID(e);var a;t.GetComponent(pi).carRuntime+=i.ZombieMode_Car_MaxEnergy()/4,t.GetComponent(D).freshUI=!0,-1!=t.GetComponent(pi).driverId&&(a=q.NowGameWorld.GetEntityByID(t.GetComponent(pi).driverId),ri.AddBuffToTarget(a,Qt.BuffName,!0,20))}else console.warn("加油！",e),K.UIModule().GetUI(mf.UIName).SetShowInfo(lf.Battery,rf.Insufficient);m.refreshJiaYouBtn()}),this.view.m_CarCom.m_xiuliCheBtn.onClick(this,function(){let e=m.carTrigger.GetComponent(ft).carId,t=q.NowGameWorld.GetEntityByID(e),i=m.unit.GetComponent(Ot).boltNum,o=t.GetComponent(y);if(o.hp>=o.maxhp)j.TopUI_TipShow("No repair required");else{var a=i-K.DataModule().GetLocal().gameRule.ZombieMode_Car_RepairPrice();if(0<=a){m.unit.GetComponent(Ot).boltNum=a,t.GetComponent(D).freshUI=!0;let e=t.GetComponent(y);e.hp=e.maxhp,t.GetComponent(D).hp=e.hp,t.GetComponent(pi).isDamage=!1,t.GetComponent(D).freshUI=!0}else console.warn("材料不足修车",i),K.UIModule().GetUI(mf.UIName).SetShowInfo(lf.Bolt,rf.Insufficient);m.refreshXiuliCheBtn()}}),this.view.m_QuestCom.m_DigBtn.onClick(this,function(){P.onClickQuestDigBtn.Trigger()}),this.view.m_QuestCom.m_DigSpeedUpBtn.onClick(this,function(){P.onClickQuestDigSpeedUpBtn.Trigger()}),this.view.m_DoorCom.m_xiuliBtn.onClick(this,function(){let o=q.NowGameWorld.GetEntityByID(m.bunkerId);if(m.bunkerUnit&&o){let t=o.GetComponent(pt),e=V.zombieMode_bunkerRepairPrice(t.level),i=o.GetComponent(y);if(i.hp>=i.maxhp)j.TopUI_TipShow("No repair required");else{var a=m.bunkerUnit.GetComponent(Ot).boltNum,n=a-e;if(0<=n){m.bunkerUnit.GetComponent(Ot).boltNum=n,t.isDamage=!1,vu.UpdateBunkerWallCollider(o),o.GetComponent(D).freshUI=!0;let e=o.GetComponent(y);e.hp=Math.min(e.maxhp,e.hp+e.maxhp/4),o.GetComponent(D).hp=e.hp}else console.warn("材料不足修掩体",a),K.UIModule().GetUI(mf.UIName).SetShowInfo(lf.Bolt,rf.Insufficient);m.refreshXiuliBtn()}}}),this.view.m_SkillInfoUIBtn.onClick(this,function(){K.UIModule().ShowUI(yf.UIName)}),V.IsGameMode_Zombie()?(this.view.m_VideoGetAllBtn.visible=!0,this.view.m_SkillInfo.visible=!0):(this.view.m_VideoGetAllBtn.visible=!1,this.view.m_SkillInfo.visible=!1),this.view.m_VideoGetAllBtn.onClick(this,function(){K.UIModule().ShowUI(vf.UIName),j.GetRewardBtnFun(0,function(){K.UIModule().HideUI(vf.UIName),m.SendChoose(4)},g.GetAllSkill,null,function(){})}),this.view.m_DoorCom.visible=!1,k.shootMouseAim||(this.joy=new class{constructor(){this.oldpos=new Laya.Vector2(0,0),this.originPoint=new Laya.Vector2(0,0),this.nowPoint=new Laya.Vector2(0,0),this.dir=new Laya.Vector2(0,0),this.vec2=new Laya.Vector2(0,0),this.isTouching=!1,this.maxRange=100,this.useAlpha=1,this.noAlpha=.5,this.useFixJoy=!1,this.nowTouchId=-1,this.pos="left"}Init(t,e,i,o){this.ui=t,this.ui.m_Joy.url=x.GetFairyGUI_Icon("NewJoyTop");let a=this;this.ui.on(Laya.Event.MOUSE_DOWN,this,function(e){640<e.stageX||-1==a.nowTouchId&&(a.nowTouchId=e.touchId,a.OnStart(e.stageX-t.x,e.stageY-t.y),a.FreshDir(e.stageX-t.x,e.stageY-t.y))}),this.ui.on(Laya.Event.MOUSE_UP,this,function(e){}),this.ui.on(Laya.Event.MOUSE_OUT,this,function(e){}),this.ui.on(Laya.Event.MOUSE_OVER,this,function(e){}),this.oldpos.x=this.ui.m_JoyBg.x,this.oldpos.y=this.ui.m_JoyBg.y,this.ui.m_Joy.alpha=this.noAlpha,this.ui.m_JoyBg.alpha=this.noAlpha}OnStart(e,t){this.isTouching=!0,this.useFixJoy||(this.originPoint.x=e,this.originPoint.y=t),this.nowPoint.x=e,this.nowPoint.y=t,this.useFixJoy||(this.ui.m_JoyBg.x=this.oldpos.x+e,this.ui.m_JoyBg.y=this.oldpos.y+t),this.ui.m_Joy.x=this.oldpos.x+e,this.ui.m_Joy.y=this.oldpos.y+t,this.ui.m_Joy.alpha=this.useAlpha,this.ui.m_JoyBg.alpha=this.useAlpha}inGameMove(e,t,i){this.nowTouchId==i&&this.OnMove(e-this.ui.x,t-this.ui.y)}inGameEnd(e,t,i){this.nowTouchId==i&&(this.OnEnd(e-this.ui.x,t-this.ui.y),this.nowTouchId=-1)}OnMove(e,t){this.FreshDir(e,t)}OnEnd(e,t){this.originPoint.x=0,this.originPoint.y=0,this.nowPoint.x=0,this.nowPoint.y=0,this.isTouching=!1,this.ui.m_JoyBg.x=this.oldpos.x,this.ui.m_JoyBg.y=this.oldpos.y,this.ui.m_Joy.x=this.oldpos.x,this.ui.m_Joy.y=this.oldpos.y,this.FreshDir(0,0),this.ui.m_Joy.alpha=this.noAlpha,this.ui.m_JoyBg.alpha=this.noAlpha}FreshDir(e,t){var i;this.nowPoint.x=e,this.nowPoint.y=t,0!=e||0!=t?(this.dir.x=this.nowPoint.x-this.originPoint.x,this.dir.y=this.nowPoint.y-this.originPoint.y,i=Laya.Vector2.scalarLength(this.dir),Laya.Vector2.normalize(this.dir,this.dir),i>this.maxRange&&(Laya.Vector2.scale(this.dir,this.maxRange,this.vec2),this.nowPoint.x=this.nowPoint.x-this.vec2.x,this.nowPoint.y=this.nowPoint.y-this.vec2.y,this.originPoint.x=this.nowPoint.x,this.originPoint.y=this.nowPoint.y,this.ui.m_JoyBg.x=this.oldpos.x+this.nowPoint.x,this.ui.m_JoyBg.y=this.oldpos.y+this.nowPoint.y)):(this.dir.x=0,this.dir.y=0),K.InputModule().SetAxisValue(Ci.HorizontalAxis,-this.dir.x),K.InputModule().SetAxisValue(Ci.VerticalAxis,-this.dir.y),this.ui.m_Joy.x=this.oldpos.x+e,this.ui.m_Joy.y=this.oldpos.y+t}Update(){Laya.timer.delta}Dispose(){Laya.timer.clearAll(this)}},this.joy.Init(this.view.m_Joy,"left",this.view.width,this.view.height),this.joy1=new class{constructor(){this.oldpos=new Laya.Vector2(0,0),this.originPoint=new Laya.Vector2(0,0),this.nowPoint=new Laya.Vector2(0,0),this.dir=new Laya.Vector2(0,0),this.vec2=new Laya.Vector2(0,0),this.isTouching=!1,this.maxRange=100,this.useAlpha=1,this.noAlpha=.5,this.useFixJoy=!1,this.nowTouchId=-1,this.isOnMove=!1}Init(t,e,i,o){this.ui=t,this.ui.m_FistJoyBg.visible=!0,this.ui.m_JoyBg.visible=!1,this.ui.m_Joy.url=x.GetFairyGUI_Icon("NewAtt"),this.ui.m_Joy.setScale(1,1);let a=this;this.ui.on(Laya.Event.MOUSE_DOWN,this,function(e){e.stageX<640||-1==a.nowTouchId&&(a.nowTouchId=e.touchId,a.OnStart(e.stageX-t.x,e.stageY-t.y),a.FreshDir(e.stageX-t.x,e.stageY-t.y))}),this.ui.on(Laya.Event.MOUSE_MOVE,this,function(e){}),this.ui.on(Laya.Event.MOUSE_UP,this,function(e){}),this.ui.on(Laya.Event.MOUSE_OUT,this,function(e){}),this.ui.on(Laya.Event.MOUSE_OVER,this,function(e){}),this.oldpos.x=this.ui.m_JoyBg.x,this.oldpos.y=this.ui.m_JoyBg.y,this.ui.m_Joy.alpha=this.noAlpha,this.ui.m_JoyBg.alpha=this.noAlpha,this.ui.m_FistJoyBg.alpha=this.noAlpha}OnStart(e,t){this.isTouching=!0,this.useFixJoy||(this.originPoint.x=e,this.originPoint.y=t),this.nowPoint.x=e,this.nowPoint.y=t,this.useFixJoy||(this.ui.m_JoyBg.x=this.oldpos.x+e,this.ui.m_JoyBg.y=this.oldpos.y+t,this.ui.m_FistJoyBg.x=this.oldpos.x+e,this.ui.m_FistJoyBg.y=this.oldpos.y+t),this.ui.m_Joy.x=this.oldpos.x+e,this.ui.m_Joy.y=this.oldpos.y+t,this.ui.m_Joy.alpha=this.useAlpha,this.ui.m_JoyBg.alpha=this.useAlpha,this.ui.m_FistJoyBg.alpha=this.useAlpha}inGameMove(e,t,i){this.nowTouchId==i&&this.OnMove(e-this.ui.x,t-this.ui.y)}inGameEnd(e,t,i){this.nowTouchId==i&&(this.OnEnd(e-this.ui.x,t-this.ui.y),this.nowTouchId=-1,this.isOnMove=!1)}OnMove(e,t){this.FreshDir(e,t)}OnEnd(e,t){this.originPoint.x=0,this.originPoint.y=0,this.nowPoint.x=0,this.nowPoint.y=0,this.isTouching=!1,this.ui.m_JoyBg.x=this.oldpos.x,this.ui.m_JoyBg.y=this.oldpos.y,this.ui.m_FistJoyBg.x=this.oldpos.x,this.ui.m_FistJoyBg.y=this.oldpos.y,this.ui.m_Joy.x=this.oldpos.x,this.ui.m_Joy.y=this.oldpos.y,this.FreshDir(0,0),this.ui.m_Joy.alpha=this.noAlpha,this.ui.m_JoyBg.alpha=this.noAlpha,this.ui.m_FistJoyBg.alpha=this.noAlpha}FreshDir(e,t){var i;this.nowPoint.x=e,this.nowPoint.y=t,(50<Math.abs(this.nowPoint.x-this.originPoint.x)||50<Math.abs(this.nowPoint.y-this.originPoint.y))&&(this.isOnMove=!0),this.isOnMove?(this.dir.x=this.nowPoint.x-this.originPoint.x,this.dir.y=this.nowPoint.y-this.originPoint.y,i=Laya.Vector2.scalarLength(this.dir),Laya.Vector2.normalize(this.dir,this.dir),i>this.maxRange&&(Laya.Vector2.scale(this.dir,this.maxRange,this.vec2),this.nowPoint.x=this.nowPoint.x-this.vec2.x,this.nowPoint.y=this.nowPoint.y-this.vec2.y,this.originPoint.x=this.nowPoint.x,this.originPoint.y=this.nowPoint.y,this.ui.m_FistJoyBg.x=this.oldpos.x+this.nowPoint.x,this.ui.m_FistJoyBg.y=this.oldpos.y+this.nowPoint.y)):(this.dir.x=0,this.dir.y=0),K.InputModule().SetAxisValue1(Ci.SkillHorizontalAxis,-this.dir.x),K.InputModule().SetAxisValue1(Ci.SkillVerticalAxis,-this.dir.y),this.ui.m_Joy.x=this.oldpos.x+e,this.ui.m_Joy.y=this.oldpos.y+t}Update(){Laya.timer.delta}Dispose(){Laya.timer.clearAll(this)}},this.joy1.Init(this.view.m_Joy1,"right",this.view.width,this.view.height)),this.view.m_QuestPanelBtn.onClick(this,function(){m.view.m_QuestPanel.visible=!m.view.m_QuestPanel.visible}),this.skillJoy1=new af,this.skillJoy1.Init(this.view.m_SkillJoy1),this.skillJoy2=new af,this.skillJoy2.Init(this.view.m_SkillJoy2),this.skillJoy3=new af,this.skillJoy3.Init(this.view.m_SkillJoy3),this.skillJoy4=new af,this.skillJoy4.Init(this.view.m_SkillJoy4),this.skillTouchIDList=[-1,-1,-1,-1];let i=-1e3;if(K.DataModule().GetUser().GetData().equipList.filter(e=>-1!=e.indexOf("Weapon"))[0],m.view.m_Joy1.m_c1.setSelectedPage("Fire"),m.view.m_SkillJoy1.m_c1.setSelectedPage("UpSkill"),m.view.m_SkillJoy2.m_c1.setSelectedPage("UpSkill"),m.view.m_SkillJoy3.m_c1.setSelectedPage("UpSkill"),m.view.m_SkillJoy4.m_c1.setSelectedPage("UpSkill"),this.view.on(Laya.Event.MOUSE_DOWN,this,function(t){if(m.showInput(!0),m.isGameStart){m.isInTouch=!0,i=t.stageX,k.ingameBtnHide||(m.view.m_touchPoint.x=t.stageX,m.view.m_touchPoint.y=t.stageY,m.view.m_touchEffect.play()),k.shootMouseAim?(m.view.m_FistBtn.fireClick(!0),m.SendSkill(0),m.view.m_Joy1.m_c1.setSelectedPage("Displacement"),m.skillTouchIDList[0]=t.touchId,T.IS_Android||K.PlatformModule().VibrateShort()):m.view.m_Joy1.visible&&m.GetIsTrigger(t.stageX,t.stageY,m.view.m_Joy1.x,m.view.m_Joy1.y,100)&&(m.leYouUp[0]||(m.leYouUp[0]=!0,k.Platform!=T.WECHAT)||K.DataModule().GetUser().GetSaveKey("leYou_Guide1")||(K.DataModule().GetUser().AddSaveKey("leYou_Guide1","true"),z.Instance.LeYou_Guidance(1)),m.view.m_FistBtn.fireClick(!0),m.SendSkill(0),m.view.m_Joy1.m_c1.setSelectedPage("Displacement"),m.skillTouchIDList[0]=t.touchId,T.IS_Android||K.PlatformModule().VibrateShort());let e=!1;m.GetIsTrigger(t.stageX,t.stageY,m.view.m_choose1.x,m.view.m_choose1.y,70)&&(m.view.m_choose1.fireClick(!0),m.view.m_chooseList.visible&&(e=!0),m.SendChoose(0)),m.GetIsTrigger(t.stageX,t.stageY,m.view.m_choose2.x,m.view.m_choose2.y,70)&&(m.view.m_choose2.fireClick(!0),m.view.m_chooseList.visible&&(e=!0),m.SendChoose(1)),m.GetIsTrigger(t.stageX,t.stageY,m.view.m_choose3.x,m.view.m_choose3.y,70)&&(m.view.m_choose3.fireClick(!0),m.view.m_chooseList.visible&&(e=!0),m.SendChoose(2)),e||(m.GetIsTrigger(t.stageX,t.stageY,m.view.m_SkillJoy1.x,m.view.m_SkillJoy1.y,100)&&(m.view.m_SkillJoy1.scaleX=1,m.view.m_SkillJoy1.scaleY=1,m.view.m_SkillJoy1.m_c1.setSelectedPage("DownSkill"),m.SendSkill(1),m.skillTouchIDList[1]=t.touchId),m.GetIsTrigger(t.stageX,t.stageY,m.view.m_SkillJoy2.x,m.view.m_SkillJoy2.y,100)&&(m.view.m_SkillJoy2.scaleX=1,m.view.m_SkillJoy2.scaleY=1,m.view.m_SkillJoy2.m_c1.setSelectedPage("DownSkill"),m.SendSkill(2),m.skillTouchIDList[2]=t.touchId),m.GetIsTrigger(t.stageX,t.stageY,m.view.m_SkillJoy3.x,m.view.m_SkillJoy3.y,100)&&(m.view.m_SkillJoy3.scaleX=1,m.view.m_SkillJoy3.scaleY=1,m.view.m_SkillJoy3.m_c1.setSelectedPage("DownSkill"),m.SendSkill(3),m.skillTouchIDList[3]=t.touchId),m.GetIsTrigger(t.stageX,t.stageY,m.view.m_SkillJoy4.x,m.view.m_SkillJoy4.y,100)&&(m.view.m_SkillJoy4.scaleX=1,m.view.m_SkillJoy4.scaleY=1,m.view.m_SkillJoy4.m_c1.setSelectedPage("DownSkill"),m.SendSkill(4),m.skillTouchIDList[4]=t.touchId),m.GetIsTrigger(t.stageX,t.stageY,m.view.m_ChangeBulletBtn.x,m.view.m_ChangeBulletBtn.y,70)&&(m.view.m_ChangeBulletBtn.scaleX=.9,m.view.m_ChangeBulletBtn.scaleY=.9,m.SendSkill(5),m.skillTouchIDList[5]=t.touchId))}}),this.view.on(Laya.Event.MOUSE_UP,this,function(e){m.isInTouch=!1,m.DealSkillUp(e.touchId),m.joy&&m.joy.inGameEnd(e.stageX,e.stageY,e.touchId),m.joy1&&m.joy1.inGameEnd(e.stageX,e.stageY,e.touchId),m.skillJoy1&&m.skillJoy1.inGameEnd(e.stageX,e.stageY,e.touchId),m.skillJoy2&&m.skillJoy2.inGameEnd(e.stageX,e.stageY,e.touchId),m.skillJoy3&&m.skillJoy3.inGameEnd(e.stageX,e.stageY,e.touchId),m.skillJoy4&&m.skillJoy4.inGameEnd(e.stageX,e.stageY,e.touchId)}),this.view.on(Laya.Event.MOUSE_OUT,this,function(e){m.isInTouch=!1,m.DealSkillUp(e.touchId),m.joy&&m.joy.inGameEnd(e.stageX,e.stageY,e.touchId),m.joy1&&m.joy1.inGameEnd(e.stageX,e.stageY,e.touchId),m.skillJoy1&&m.skillJoy1.inGameEnd(e.stageX,e.stageY,e.touchId),m.skillJoy2&&m.skillJoy2.inGameEnd(e.stageX,e.stageY,e.touchId),m.skillJoy3&&m.skillJoy3.inGameEnd(e.stageX,e.stageY,e.touchId),m.skillJoy4&&m.skillJoy4.inGameEnd(e.stageX,e.stageY,e.touchId)}),this.view.on(Laya.Event.MOUSE_OVER,this,function(e){m.joy&&m.joy.inGameEnd(e.stageX,e.stageY,e.touchId),m.joy1&&m.joy1.inGameEnd(e.stageX,e.stageY,e.touchId),m.skillJoy1&&m.skillJoy1.inGameEnd(e.stageX,e.stageY,e.touchId),m.skillJoy2&&m.skillJoy2.inGameEnd(e.stageX,e.stageY,e.touchId),m.skillJoy3&&m.skillJoy3.inGameEnd(e.stageX,e.stageY,e.touchId),m.skillJoy4&&m.skillJoy4.inGameEnd(e.stageX,e.stageY,e.touchId)}),this.view.on(Laya.Event.MOUSE_MOVE,this,function(e){var t;k.shootMouseAim?(m.vec2.x=e.stageX,m.vec2.y=e.stageY,q.NowGameWorld.GetSingleCompoent($i).camera.viewportPointToRay(m.vec2,m.ray),t=-m.ray.origin.y/m.ray.direction.y,m.vec5.x=m.ray.origin.x+t*m.ray.direction.x,m.vec5.y=m.ray.origin.y+t*m.ray.direction.y,m.vec5.z=m.ray.origin.z+t*m.ray.direction.z,t=V.GetLocalPlayer().GetComponent(M).pos,m.inputFireDir.x=m.vec5.x-t.x,m.inputFireDir.y=m.vec5.z-t.z,t=S.VecToAngle(m.inputFireDir)+135,m.view.m_aimCom.x=e.stageX,m.view.m_aimCom.y=e.stageY,t!=m.fireOldAngle&&(m.fireOldAngle=t,m.SendAngle(t))):("SpNoF"==V.useSpCamera&&!q.NowGameWorld.GetSingleCompoent($i).followAngle&&e.stageY<640&&(i=(-1e3==i||(t=e.stageX-i,q.NowGameWorld.GetSingleCompoent($i).angle-=.3*t),e.stageX)),m.joy&&m.joy.inGameMove(e.stageX,e.stageY,e.touchId),m.joy1&&m.joy1.inGameMove(e.stageX,e.stageY,e.touchId),m.skillJoy1&&m.skillJoy1.inGameMove(e.stageX,e.stageY,e.touchId),m.skillJoy2&&m.skillJoy2.inGameMove(e.stageX,e.stageY,e.touchId),m.skillJoy3&&m.skillJoy3.inGameMove(e.stageX,e.stageY,e.touchId),m.skillJoy4&&m.skillJoy4.inGameMove(e.stageX,e.stageY,e.touchId))}),this.view.m_choose1.onClick(this,function(){m.SendChoose(0);let e=V.GetLocalPlayer().GetComponent(R);m.setInfoShow(e.chooseUpGrade.split("|")[0],"5")}),this.view.m_choose2.onClick(this,function(){m.SendChoose(1);let e=V.GetLocalPlayer().GetComponent(R);m.setInfoShow(e.chooseUpGrade.split("|")[1],"5")}),this.view.m_choose3.onClick(this,function(){m.SendChoose(2);let e=V.GetLocalPlayer().GetComponent(R);m.setInfoShow(e.chooseUpGrade.split("|")[2],"5")}),P.onKill.Register(this,this.OnKill),P.onStartBattle.Register(this,this.OnStartBattle),P.onBattleFail.Register(this,this.OnFail),P.onBattleWin.Register(this,this.OnWin),P.onEnterFog.Register(this,this.onEnterFog),P.onQuitFog.Register(this,this.onQuitFog),P.onFogHit.Register(this,this.onFogAmg),P.onBunker.Register(this,this.onBunker),P.onQuitBunker.Register(this,this.onQuitBunker),P.onOpenDoor.Register(this,this.onOpenDoor),P.onBunkerDoorHide.Register(this,this.onBunkerDoorHide),P.onOffDoor.Register(this,this.onOffDoor),P.onBunkerDoorShow.Register(this,this.onBunkerDoorShow),P.onBoarding.Register(this,this.onBoarding),P.onGetOff.Register(this,this.onGetOff),P.onCarDoorShow.Register(this,this.onCarDoorShow),P.onCarDoorHide.Register(this,this.onCarDoorHide),P.onBloodyNight.Register(this,this.onBloodyNight),P.onChangeBloodyNight.Register(this,this.onChangeBloodyNight),P.onAddDay.Register(this,this.onAddDay),P.onBloodyNightTips.Register(this,this.onBloodyNightTips),P.onNight.Register(this,this.onNight),P.onNotQuest.Register(this,this.onNotQuest),P.onQuestStarLevelUp.Register(this,this.onQuestStarLevelUp),P.onQuestTip.Register(this,this.onQuestTip),P.onChangeGun.Register(this,this.onChangeGun),P.onEnterTent.Register(this,this.onEnterTent),P.onOutTent.Register(this,this.onOutTent),P.onChangeSkill.Register(this,this.onChangeSkill),P.onItemTriggerShow.Register(this,this.onItemTriggerShow),P.onItemTriggerHide.Register(this,this.onItemTriggerHide),P.onSetInfoShow.Register(this,this.setInfoShow),P.onBatterShow.Register(this,this.onBatterShow),P.onTriggerUnlockSkill.Register(this,this.onTriggerUnlockSkill),P.onRadiationLevelUp.Register(this,this.onRadiationLeveUp),T.IsIPhoneXScreen&&this.view.m_IphoneX.setSelectedIndex(1),k.Platform==T.TT)try{K.PlatformModule().recordScreenEnd(),K.PlatformModule().recordScreenStart()}catch(e){console.log("录屏分享报错",e)}if(k.Platform==T.KUAISHOU)try{K.PlatformModule().recordScreenStart()}catch(e){console.log("录屏分享报错",e)}k.ingameBtnHide&&(this.view.m_Joy.alpha=.01,this.joy.useAlpha=.01,this.joy.noAlpha=.01,this.joy1.useAlpha=.01,this.joy1.noAlpha=.01,this.view.m_FistBtn.alpha=.01,this.view.m_SkillJoy1.m_skill1.alpha=.01,this.view.m_SkillJoy2.m_skill1.alpha=.01,this.view.m_SkillJoy3.m_skill1.alpha=.01,this.view.m_SkillJoy4.m_skill1.alpha=.01),k.ingameInfoHide&&(this.view.m_killinfoTxt.visible=!1),V.IsGameMode_Nian()?this.view.m_GameMode.setSelectedPage("Nian"):V.IsGameMode_Deathmatch()?this.view.m_GameMode.setSelectedPage("LuanDou"):V.IsGameMode_Zombie()?this.view.m_GameMode.setSelectedPage("Zombie"):this.view.m_GameMode.setSelectedPage("Normal"),"BattleSceneNian"==V.nowScene&&(this.view.m_HongbaoCount.visible=!0),P.onSetInfoShow.Trigger("商店已刷新！","4")}this.SetLoadInfo(),(this.isFBWeb()||this.is4399Web())&&(k.shootMouseAim=!0)}changGun(e){K.DataModule().GetLocal().weapon.Get(e).Type==ot.ShotGun?this.view.m_ChangeBulletBtn.visible=!1:this.view.m_ChangeBulletBtn.visible=!0}SetLoadInfo(){K.DataModule().GetUser().GetData().userBattleInfo.totalCount<1&&(this.view.m_huoyueCount.alpha=0),V.showAddBoltUITimes=0,V.showAddBatteryUITimes=0,W.OneGameTime=0,z.Instance.LeYou_battle(1,1),V.isFirstFight&&K.UIModule().ShowUI(Mo.UIName);let e=this;Laya.timer.once(4100,this,function(){try{if(!e.view||!e.isShow)return;T.ProjectSubCode&&k.isUseStartRandomSkill&&!V.isFirstFight&&K.UIModule().GetUI(vg.UIName).SetShowInfo(null)}catch(e){}})}DealSkillUp(t){if(null!=this.view)for(let e=0;e<this.skillTouchIDList.length;e++)this.skillTouchIDList[e]==t&&(0==e&&(this.SendSkill(10),this.view.m_Joy1.m_c1.setSelectedPage("Fire")),1==e&&(this.view.m_SkillJoy1.m_c1.setSelectedPage("UpSkill"),this.SendSkill(11)),2==e&&(this.view.m_SkillJoy2.m_c1.setSelectedPage("UpSkill"),this.SendSkill(12)),3==e&&(this.view.m_SkillJoy3.m_c1.setSelectedPage("UpSkill"),this.SendSkill(13)),4==e&&(this.view.m_SkillJoy4.m_c1.setSelectedPage("UpSkill"),this.SendSkill(14)),5==e&&(this.view.m_ChangeBulletBtn.scaleX=1.1,this.view.m_ChangeBulletBtn.scaleY=1.1,this.SendSkill(15)),this.skillTouchIDList[e]=-1)}GetIsTrigger(e,t,i,o,a){if(!k.isOpenNewInGameGuide||!V.showInGameGuide||this.guideOver||"Battle"!=this.view.m_c1.selectedPage||1!=V.nowGuide)return this.buttonTriggerVec2.x=i-e,this.buttonTriggerVec2.y=o-t,Laya.Vector2.scalarLength(this.buttonTriggerVec2)<=a}OnWin(){K.DataModule().GetUser().InterstitialAdNumberGames+=1,K.UIModule().HideUI(Df.UIName),Laya.timer.once(3e3,this,function(){V.IsGameMode_Nian()||V.IsGameMode_Deathmatch()?V.exitTime<V.exitMaxTime&&(V.IsGameMode_Deathmatch()?K.UIModule().GetUI(sf.UIName):K.UIModule().GetUI(of.UIName)).ShowResult():V.exitTime<V.exitMaxTime&&(V.IsGameMode_Zombie()?K.UIModule().GetUI(pf.UIName):K.UIModule().GetUI(ef.UIName)).ShowResult()}),gameapi.playInterstitial()}OnFail(){K.DataModule().GetUser().InterstitialAdNumberGames+=1;let e=!1;V.IsGameMode_Zombie()?e=!!k.IsGM||!(1<=this.zombieReviveTimes)&&(this.zombieReviveTimes+=1,!0):V.nowSavePlayer<=1||(e=!0),(e=q.Instance().netFrame?!1:e)?(this.showInput(!1),K.UIModule().HideUI(cf.UIName),K.UIModule().HideUI(Gf.UIName),K.UIModule().ShowUI(Bf.UIName)):(K.UIModule().HideUI(Df.UIName),V.IsGameMode_Zombie()?(K.UIModule().HideUI(cf.UIName),K.UIModule().HideUI(Gf.UIName),K.UIModule().HideUI(yf.UIName),K.UIModule().GetUI(pf.UIName).ShowInGameFailed()):K.UIModule().GetUI(ef.UIName).ShowInGameFailed())}OnStartBattle(){let e=this;this.view.m_ShowStart.play(Laya.Handler.create(this,function(){e.view.m_c1.setSelectedPage("Battle"),e.isGameStart=!0})),this.startTime=ge.GetNowTS()}isFBWeb(){return k.Platform==T.FBINSTANT&&"WEB"==T.FaceBookRunPLATFORM}is4399Web(){return k.Platform==T.H5_4399&&T.IS_PC}disableInput(){this.view.m_textInput.editable=!1;let e=this.view.m_textInput;e.visible=!1,e.enabled=!1,e.setSize(0,0)}showInput(t){if(this.isFBWeb()||this.is4399Web()){if(!this.view)return!1;this.view.m_textInput.editable=!1;let e=this.view.m_textInput;t?(e.visible=!0,e.enabled=!0,e.setSize(1280,720),this.isFirstRequestFocus||(e.requestFocus(),this.isFirstRequestFocus=!0)):e.setSize(0,0)}}OnKill(a,n,s){if(!V.IsGameMode_Zombie())if(V.IsGameMode_Nian()||V.IsGameMode_Deathmatch())a&&n&&n.HasComponent(Lt.id)&&(l="玩家1",a.GetComponent(D)&&a.GetComponent(D).playerName&&(l=a.GetComponent(D).playerName,this.view.m_fightNianPlayerName.text=j.NameDisplayProcessing(l,10),this.view.m_ShowFightNian.play()));else{if(a){let i="玩家1",e="玩家2";if(a.HasComponent(y.id)){let e=a.GetComponent(y).createId,t=q.NowGameWorld.GetEntityByID(e);t&&t.GetComponent(D)&&t.GetComponent(D).playerName&&(i=t.GetComponent(D).playerName)}else a.GetComponent(D)&&a.GetComponent(D).playerName&&(i=a.GetComponent(D).playerName);n&&n.GetComponent(D)&&n.GetComponent(D).playerName&&(e=n.GetComponent(D).playerName);var l=K.DataModule().GetLz().GetTextByPar("InGame_killed",j.NameDisplayProcessing(i,8),j.NameDisplayProcessing(e,8));this.infoList.push(l),0<s&&(l=K.DataModule().GetLz().GetTextByPar("InGame_ExpoItem",j.NameDisplayProcessing(i,8),j.NameDisplayProcessing(e,8)),this.infoList.push(l));let o=V.GetInGamePlayerDataById(a.id),t=V.GetInGamePlayerDataById(n.id);if(o&&o.isSelf)if(t.netId==o.revengeTargetNetId)K.AudioModule().PlayOnce(x.GetSound2("Revenge")),this.view.m_KillAniCtrl.setSelectedIndex(0),this.view.m_RevengeAni.play();else{o.kill<5?(this.view.m_KillAniCtrl.setSelectedIndex(o.kill),this.view.m_killAni.play(),K.AudioModule().PlayOnce(x.GetSound2("Kill"+o.kill))):(this.view.m_KillAniCtrl.setSelectedIndex(6),this.view.m_killAni.play(),K.AudioModule().PlayOnce(x.GetSound2("Kill5"))),this.view.m_KillTips.m_t0.play();for(let t=0;t<6;t++){let e=this.view.m_KillTips.getChild("N"+(t+1));t<o.kill?e.visible=!0:e.visible=!1}}if(t&&(t.revengeTargetNetId=o.netId,t.isSelf)){let t=q.NowGameWorld.GetEntitys([R.id,D.id]);for(let e=0;e<t.length;e++)t[e].GetComponent(D).isRedName=!1,t[e].GetComponent(D).red=!0,t[e].GetComponent(D).freshUI=!0,t[e].HasComponent(Ft.id)&&(t[e].GetComponent(Ft).type=Ft.type_Enemy);a.HasComponent(D.id)&&(a.GetComponent(D).isRedName=!0,a.HasComponent(Ft.id)&&(a.GetComponent(Ft).type=Ft.type_Target))}}else{let e="玩家1";n.HasComponent(D.id)&&n&&n.GetComponent(D)&&n.GetComponent(D).playerName&&(e=n.GetComponent(D).playerName);s=K.DataModule().GetLz().GetTextByPar("InGame_dead",j.NameDisplayProcessing(e,8));this.infoList.push(s)}this.FreshKillInfo()}}FreshKillInfo(){let t="";for(let e=0;e<this.infoList.length;e++)t+=this.infoList[e]+"\n";this.view.m_killinfoTxt.text=t}SendSkill(e){q.Instance().netFrame?K.MGOBEModule().SendFrameCMD({angle:-2,move:-2,s:e,c:-1}):V.cmds.push({id:"Local",angle:-2,move:-2,s:e,c:-1})}SendChoose(e){A.TimeScaleZoom("VideoGetAllBtn",!1),q.Instance().netFrame?K.MGOBEModule().SendFrameCMD({angle:-2,move:-2,s:-1,c:e}):V.cmds.push({id:"Local",angle:-2,move:-2,s:-1,c:e}),this.view.m_chooseList.visible=!1}SendMove(e){q.Instance().netFrame?K.MGOBEModule().SendFrameCMD({angle:-2,move:e,s:-1,c:-1}):V.cmds.push({id:"Local",angle:-2,move:e,s:-1,c:-1})}SendAngle(e){q.Instance().netFrame?K.MGOBEModule().SendFrameCMD({angle:e,move:-2,s:-1,c:-1}):V.cmds.push({id:"Local",angle:e,move:-2,s:-1,c:-1})}onCarDoorShow(e,t){this.view&&(this.view.m_CarCom.visible=!0,this.carTrigger=e,this.unit=t,this.refreshXiuliCheBtn(),this.refreshJiaYouBtn())}onCarDoorHide(){this.view&&(this.view.m_CarCom.visible=!1)}onBattery(e){this.view.m_batteryBar.m_numText.text=e.toString()}onBolt(e){this.view.m_boltBar.m_numText.text=e.toString()}onQuitBunker(){console.warn("退出掩体咯！！！！！")}onBunker(){console.warn("进入掩体咯！！！！！")}onBoarding(){this.view.m_CarCom.m_cheMenBtn.m_c1.setSelectedPage("Open")}onNight(){this.setInfoShow("黑夜","1"),this.setInfoShow("","2","1")}onNotQuest(){this.setInfoShow("无任务","6")}onQuestStarLevelUp(){this.setInfoShow("新任务星级","7")}onQuestTip(e){this.setInfoShow(e,"9")}onRadiationLeveUp(){this.view&&(this.view.m_ZombieRadiation.m_Level.text="LV"+V.radiationLevel),this.setInfoShow(""+V.radiationLevel,"8")}onGetOff(){this.view.m_CarCom.m_cheMenBtn.m_c1.setSelectedPage("Off")}setInfoShow(e,t,i="2"){this.zombieTipsList.push({showTime:3,showType:i,isShow:!1,infoType:t,info:e})}onItemTriggerShow(t,h){if(t&&h){this.itemTrigger=t;let a=h.GetComponent(ti);this.player=h;var s=t.GetComponent(Gt).itemId;this.nowItemId=s;let n=q.NowGameWorld.GetEntityByID(this.nowItemId);if(n){let o=n.GetComponent(y);if(this.itemTriggerId=o.ItemTriggerId,"AddItem"==o.itemID){let e=h.GetComponent(R),t=(this.skill=o.addBuff.split("_")[1],this.nowSkillList=h.GetComponent(L).skillList,h.GetComponent(L).unlockPosTimes),i=this.nowSkillList.filter(e=>e.skillID==this.skill&&e.skillPos<=t),r=K.DataModule().GetLocal().item.Get(this.skill);if(r)if(this.nowSkillList.filter(e=>1==e.isItem&&e.skillPos<=t).length>=t&&i.length<=0){this.view.m_ChangeSkillCom.visible=!0;for(let l=0;l<3;l++){var m=l+1;this.nowIndex=m;let n=this.view.m_ChangeSkillCom.getChild("SkillCom"+this.nowIndex),s=this.nowSkillList.filter(e=>e.skillPos==this.nowIndex)[0];if(s){n.visible=!0,n.m_Icon1.url=x.GetIcon("Icon_"+s.skillID),n.m_Icon2.url=x.GetIcon("Icon_"+this.skill),n.m_SkillIconCom1.m_icon.url=x.GetIcon("Icon_"+s.skillID),n.m_SkillIconCom2.m_icon.url=x.GetIcon("Icon_"+this.skill);var m=K.DataModule().GetLocal().item.Get(s.skillID);1==this.nowIndex&&n.m_c1.setSelectedPage("中"),2==this.nowIndex&&n.m_c1.setSelectedPage("上"),3==this.nowIndex&&n.m_c1.setSelectedPage("下"),n.m_skillName1.text=m.ChineseName,n.m_skillName2.text=r.ChineseName,n.m_Timestext1.text=s.itemLeftTimes+"次",n.m_Timestext2.text=r.Times+"次",n.m_SkillIconCom1.m_bar.setSelectedPage("skill"),n.m_SkillIconCom1.m_greenBar.fillAmount=s.level/s.maxLevel,n.m_SkillIconCom1.m_MaxLevel.setSelectedPage("Lv"+s.maxLevel),n.m_Lvtext1.text="Lv"+s.level;let e=h.GetComponent(L).zombieInGameItemDatas.filter(e=>e.ItemID==r.ItemID),t=1,i=1,a=(0<e.length&&(m=e[0],t=m.NowLevel,i=m.MaxLv),n.m_Lvtext2.text="Lv"+t,n.m_SkillIconCom2.m_bar.setSelectedPage("skill"),n.m_SkillIconCom2.m_greenBar.fillAmount=t/i,n.m_SkillIconCom2.m_MaxLevel.setSelectedPage("Lv"+i),this),o=function(){let i=[],o=a.nowSkillList.filter(e=>e.skillPos==l+1)[0];for(let t=0;t<a.nowSkillList.length;t++){let e=a.nowSkillList[t];e.skillID==o.skillID&&(e.useDesdtory=!0),i.push(e)}a.player.GetComponent(L).skillList=i,a.player.GetComponent(R).getItem=a.skill;let e=q.NowGameWorld.GetEntityByID(a.nowItemId),t=(e&&e.Destory(),q.NowGameWorld.GetEntityByID(a.itemTriggerId));t&&t.Destory()};n.m_ChangeBtn.offClick(this,o),n.m_ChangeBtn.onClick(this,o)}else n.visible=!1}}else"AddItem"==o.itemID?e.getItem=this.skill:e.chooseUpGrade=this.skill,n.Destory(),q.NowGameWorld.GetEntityByID(o.ItemTriggerId).Destory()}else if("AddSkill"==o.itemID){s=o.addBuff.split("_")[1];h.GetComponent(R).chooseUpGrade=s,n&&n.Destory();let e=q.NowGameWorld.GetEntityByID(o.ItemTriggerId);e&&e.Destory()}else if("Battery"==o.itemID){h.GetComponent(Ot).batteryNum+=1,n&&n.Destory();let e=q.NowGameWorld.GetEntityByID(o.ItemTriggerId);t.GetComponent(M).isInCameraArea&&K.AudioModule().PlayOnce(x.GetSound2("Eat2")),e&&e.Destory()}else if("Bolt"==o.itemID){h.GetComponent(Ot).boltNum+=1,n&&n.Destory();let e=q.NowGameWorld.GetEntityByID(o.ItemTriggerId);t.GetComponent(M).isInCameraArea&&K.AudioModule().PlayOnce(x.GetSound2("Eat2")),e&&e.Destory()}else if(-1!=o.addBuff.indexOf("Weapon")){this.view.m_ChangeCom.visible=!0;var s=a.weaponId.replace("Weapon",""),s=(this.view.m_ChangeCom.m_Icon1.url=x.GetIcon("Weapon_"+s),this.view.m_ChangeCom.m_level1.text="Lv"+s,K.DataModule().GetLocal().weapon.Get(a.weaponId)),l=(this.view.m_ChangeCom.m_weaponName1.text=s.ChineseName,o.addBuff.replace("Weapon",""));this.view.m_ChangeCom.m_Icon2.url=x.GetIcon("Weapon_"+l),this.view.m_ChangeCom.m_level2.text="Lv"+l;let e=K.DataModule().GetLocal().weapon.Get(o.addBuff),t=Math.floor((e.Level-s.Level)/s.Level*100),i=K.DataModule().GetLz().GetText("Equip_battleValue");0==t&&(i+="+"),this.view.m_ChangeCom.m_zhanDouLiText2.text=i+t+"%",this.view.m_ChangeCom.m_weaponType1.text=V.GetWeaponType(a.weaponId),this.view.m_ChangeCom.m_weaponType2.text=V.GetWeaponType(o.addBuff),0<t?(this.view.m_ChangeCom.m_arrowsCom.m_arrowsCom.visible=!0,this.view.m_ChangeCom.m_arrowsCom.m_arrowsCom.url=x.GetFairyGUI_Icon("arrows_up")):0==t?this.view.m_ChangeCom.m_arrowsCom.m_arrowsCom.visible=!1:(this.view.m_ChangeCom.m_arrowsCom.m_arrowsCom.visible=!0,this.view.m_ChangeCom.m_arrowsCom.m_arrowsCom.url=x.GetFairyGUI_Icon("arrows_down")),this.view.m_ChangeCom.m_weaponName2.text=e.ChineseName,this.itemTriggerUnit=h,this.weaponId=o.addBuff}else if(-1!=o.addBuff.indexOf(Z.ZombieCoin)){l=o.addBuff.split("_")[1];V.ZCoin+=parseInt(l),this.view.m_ZCoinBar.m_numText.text=V.ZCoin.toString(),n&&n.Destory();let e=q.NowGameWorld.GetEntityByID(o.ItemTriggerId);t.GetComponent(M).isInCameraArea&&K.AudioModule().PlayOnce(x.GetSound2("Eat2")),e&&e.Destory()}}}}refreshZombieInfoList(){0<this.zombieInfoList.length&&(this.view.m_ZombieInfoList.visible=!0,this.view.m_ZombieInfoList.itemRenderer=Laya.Handler.create(this,this.onRenderItem,null,!1),this.view.m_ZombieInfoList.numItems=this.zombieInfoList.length)}onRenderItem(i,o){let a=this.zombieInfoList[i];if(o.m_c1.setSelectedPage(a.type),o.visible=!1,!a.isplayAni){let e=this;Laya.timer.once(250*i,this,function(){e.view&&e.isShow&&(o.visible=!0,o.m_t3.play(),a.isplayAni=!0)})}var e,t;if("2"==a.type&&(i=a.info.split("_")[0],i=K.DataModule().GetLocal().item.Get(i),t=a.info.split("_")[1],e=a.info.split("_")[2],o.m_SkillIcon_2.m_bar.setSelectedPage("skill"),o.m_SkillIcon_2.m_greenBar.fillAmount=parseInt(e)/i.MaxLv,o.m_SkillIcon_2.m_MaxLevel.setSelectedPage("Lv"+i.MaxLv),o.m_SkillIcon_2.m_icon.url=x.GetIcon("Icon_"+i.UIRes),o.m_SkillName_2.text=t,o.m_SkillLevel_2.text=e),"3"==a.type){let e=a.info.split("_")[0],t=a.info.split("_")[1],i="";i=("true"==a.info.split("_")[2]?K.DataModule().GetLocal().item:K.DataModule().GetLocal().zModePassiveSkill).Get(e).UIRes,o.m_SkillIcon_3.url=x.GetIcon("Icon_"+i),o.m_SkillName_3.text=t}if("5"==a.type){let t=a.info,e=V.GetLocalPlayer().GetComponent(Vt).buffList.filter(e=>e.buffName==t);0<e.length&&(i=K.DataModule().GetLocal().zModePassiveSkill.Get(t),o.m_SkillIcon_4.m_bar.setSelectedPage("skill"),o.m_SkillIcon_4.m_greenBar.fillAmount=e[0].level/i.SkillMaxLevel,o.m_SkillIcon_4.m_MaxLevel.setSelectedPage("Lv"+i.SkillMaxLevel),o.m_SkillIcon_4.m_icon.url=x.GetIcon("Icon_"+i.UIRes),o.m_SkillName_4.text="【"+i.ChineseName+"】",o.m_SkillLeve_4.text=e[0].level.toString())}"8"==a.type&&(t=a.info,o.m_RadiationLevel.text=t),"9"==a.type&&(o.m_QuestTip.text=a.info)}onItemTriggerHide(){if(this.view){this.view.m_ChangeCom.visible=!1,this.view.m_ChangeSkillCom.visible=!1;for(let t=1;t<=3;t++){let e=this.view.getChild("ChangeBtn"+t);e&&(e.visible=!1)}}}refreshXiuliBtn(){if(this.bunkerUnit){let e=q.NowGameWorld.GetEntityByID(this.bunkerId),t=e.GetComponent(pt),i=(e.GetComponent(y),V.zombieMode_bunkerRepairPrice(t.level));this.view.m_DoorCom.m_xiuliBtn.m_needNumText.text="-"+i,this.bunkerUnit.GetComponent(Ot).boltNum>=i?(this.view.m_DoorCom.m_xiuliBtn.m_c1.setSelectedPage("zugou"),this.view.m_DoorCom.m_xiuliBtn.grayed=!1):(this.view.m_DoorCom.m_xiuliBtn.m_c1.setSelectedPage("buzu"),this.view.m_DoorCom.m_xiuliBtn.grayed=!0)}}refreshJiaYouBtn(){var e;this.unit&&(e=K.DataModule().GetLocal().gameRule.ZombieMode_Car_ChargeEnergyPrice(),this.view.m_CarCom.m_jiaYouBtn.m_needNumText2.text=""+e,this.unit.GetComponent(Ot).batteryNum>=e?(this.view.m_CarCom.m_jiaYouBtn.m_c1.setSelectedPage("zugou"),this.view.m_CarCom.m_jiaYouBtn.grayed=!1):(this.view.m_CarCom.m_jiaYouBtn.m_c1.setSelectedPage("buzu"),this.view.m_CarCom.m_jiaYouBtn.grayed=!0))}refreshXiuliCheBtn(){var e;this.unit&&(e=this.carTrigger.GetComponent(ft).carId,q.NowGameWorld.GetEntityByID(e).GetComponent(y),e=K.DataModule().GetLocal().gameRule.ZombieMode_Car_RepairPrice(),this.view.m_CarCom.m_xiuliCheBtn.m_needNumText.text="-"+e,this.unit.GetComponent(Ot).boltNum>=e?(this.view.m_CarCom.m_xiuliCheBtn.m_c1.setSelectedPage("zugou"),this.view.m_CarCom.m_xiuliCheBtn.grayed=!1):(this.view.m_CarCom.m_xiuliCheBtn.m_c1.setSelectedPage("buzu"),this.view.m_CarCom.m_xiuliCheBtn.grayed=!0))}onChangeSkill(e,t,i){}onBunkerDoorShow(e,t){this.view.m_DoorCom.visible=!0,this.bunkerId=e.GetComponent(gt).bunkerId,this.doorId=e.id,this.bunkerUnit=t,this.refreshXiuliBtn(),q.NowGameWorld.GetEntityByID(this.bunkerId).GetComponent(pt).doorIsOpen?(this.offOrOn=!0,this.view.m_DoorCom.m_doorBtn.m_c1.setSelectedPage("Off")):(this.offOrOn=!1,this.view.m_DoorCom.m_doorBtn.m_c1.setSelectedPage("Open"))}onBunkerDoorHide(e,t){this.view.m_DoorCom.visible=!1}onOpenDoor(e,t,i){this.view.m_DoorCom.m_doorBtn.m_c1.setSelectedPage("Open"),this.bunkerId=e,-1!=t&&(this.doorId=t),i&&(this.bunkerUnit=i),this.offOrOn=!1}onOffDoor(e,t){this.view.m_DoorCom.m_doorBtn.m_c1.setSelectedPage("Off"),this.bunkerId=e,this.doorId=t,this.offOrOn=!0}onBloodyNight(){this.setInfoShow("血夜","1"),this.setInfoShow("","3","1"),this.view.m_BloodyNightTips.stop()}onBloodyNightTips(){this.view.m_BloodyNightTips.play(null,-1)}onChangeBloodyNight(){this.isPlayerBoolTip=!0}onAddDay(){this.isPlayerBoolTip?(this.view.m_DayHitCom.m_c1.setSelectedPage("xieye"),this.isPlayerBoolTip=!1):this.view.m_DayHitCom.m_c1.setSelectedPage("heiye"),this.view.m_dayText.text="已存活第"+V.CurrentDay.toString()+"天";var e=this.getRefreshCoin(V.CurrentDay),t=Y.converStr(e,1),t=(this.view.m_AddCoinTip.text="增加赏金"+t+"金币",this.setInfoShow("","1","1"),V.addCoinNum=Y.jia(V.addCoinNum,e),Y.converStr(V.addCoinNum,1));this.view.m_CoinBar.m_numText.text=t,this.refreshCoin(),this.view.m_DayHitCom.m_t0.play(),this.onTriggerUnlockSkill()}onTriggerUnlockSkill(){if(0!=V.CurrentDay){let i=K.DataModule().GetLocal().item.GetDatas().filter(e=>e.ActiveDay==V.CurrentDay),o=K.DataModule().GetLocal().zModePassiveSkill.GetDatas().filter(e=>e.ActiveDay==V.CurrentDay),a=K.DataModule().GetUser().GetData().ZombieUnlockItemList,n=K.DataModule().GetUser().GetData().ZombieUnlockZMpassiveSkills,s=[];for(let e=0;e<i.length;e++){let t=i[e];if(0==a.filter(e=>e==t.ItemID).length){let e=V.GetLocalPlayer();e.GetComponent(L).unlockItemList.length<1&&(s.push(t.ItemID),this.setInfoShow(t.ItemID+"_"+t.ChineseName+"_true","3"),e.GetComponent(L).unlockItemList.push(t.ItemID))}}0<s.length&&(a=a.concat(s),K.DataModule().GetUser().SetZombieUnlockItemList(a));let l=[];for(let e=0;e<o.length;e++){let t=o[e];if(0==n.filter(e=>e==t.SkillID).length){let e=V.GetLocalPlayer();e.GetComponent(L).unlockPassiveList.length<1&&(l.push(t.SkillID),this.setInfoShow(t.SkillID+"_"+t.ChineseName+"_false","3"),e.GetComponent(L).unlockPassiveList.push(t.SkillID))}}0<l.length&&(n=n.concat(l),K.DataModule().GetUser().SetZombieUnlockZMpassiveSkills(n))}}refreshCoin(){var e=this.getRefreshCoin(V.CurrentDay+1),e=Y.converStr(e,1);this.view.m_DayHitCom.m_addCoinTip.text="赏金:"+e}getRefreshCoin(e){let t=K.DataModule().GetUser().GetData().mergeLevel,i=t-2,o=(i<1&&(i=1),Number(K.DataModule().GetLocal().weapon.GetPrice(i))*(1-.01*t)*2),a=K.DataModule().GetLocal().gameRule.Get("ZombieMode_Result"),n=20<e-1?20:e-1;return Y.cheng(o,Math.pow(n,a.F1)*a.F2)}onEnterTent(e,t){this.view.m_TentCom.visible=!0,this.bunkerTent=e,this.bunkerTentUnit=t;e=this.bunkerTent.GetComponent(Ct),t=q.NowGameWorld.GetEntityByID(e.bunkerId);this.refreshTentUI(t)}refreshTentUI(i){i=i.GetComponent(pt),i=V.zombieMode_bunkerUpgradePrice(i.level);if(999999==i)this.view.m_TentCom.m_ShengJiBtn.m_needNumText.text="MAX",this.view.m_TentCom.m_ShengJiBtn.m_n90.visible=!1,this.view.m_TentCom.m_ShengJiBtn.grayed=!0;else{let e=!1,t=V.GetLocalPlayer();t&&t.GetComponent(Ot).boltNum>=i&&(e=!0),this.view.m_TentCom.m_ShengJiBtn.m_n90.visible=!0,this.view.m_TentCom.m_ShengJiBtn.m_needNumText.text="-"+i,this.view.m_TentCom.m_ShengJiBtn.grayed=!e}}onOutTent(){this.view.m_TentCom.visible=!1}onChangeGun(e,t,i){}onEnterFog(){this.view.m_HitText.visible=!0}onQuitFog(){this.view.m_HitText.visible=!1}onFogAmg(){T.IS_233&&this.view.m_FogHitCom.m_c1.setSelectedIndex(1),this.view.m_FogHitCom.m_t0.play()}onBatterShow(e=1){var t=(new Date).getTime();this.lastBatterTime=t,this.newbBatter+=e}UnLoad(){if(null!=this.view){this.view.visible=!1,P.onKill.Remove(this,this.OnKill),P.onStartBattle.Remove(this,this.OnStartBattle),P.onBattleFail.Remove(this,this.OnFail),P.onBattleWin.Remove(this,this.OnWin),P.onEnterFog.Remove(this,this.onEnterFog),P.onQuitFog.Remove(this,this.onQuitFog),P.onFogHit.Remove(this,this.onFogAmg),P.onBunker.Remove(this,this.onBunker),P.onQuitBunker.Remove(this,this.onQuitBunker),P.onOpenDoor.Remove(this,this.onOpenDoor),P.onBunkerDoorHide.Remove(this,this.onBunkerDoorHide),P.onOffDoor.Remove(this,this.onOffDoor),P.onBunkerDoorShow.Remove(this,this.onBunkerDoorShow),P.onBoarding.Remove(this,this.onBoarding),P.onGetOff.Remove(this,this.onGetOff),P.onCarDoorShow.Remove(this,this.onCarDoorShow),P.onCarDoorHide.Remove(this,this.onCarDoorHide),P.onBloodyNight.Remove(this,this.onBloodyNight),P.onChangeBloodyNight.Remove(this,this.onChangeBloodyNight),P.onAddDay.Remove(this,this.onAddDay),P.onBloodyNightTips.Remove(this,this.onBloodyNightTips),P.onNight.Remove(this,this.onNight),P.onNotQuest.Remove(this,this.onNotQuest),P.onQuestStarLevelUp.Remove(this,this.onQuestStarLevelUp),P.onQuestTip.Remove(this,this.onQuestTip),P.onChangeGun.Remove(this,this.onChangeGun),P.onEnterTent.Remove(this,this.onEnterTent),P.onOutTent.Remove(this,this.onOutTent),P.onChangeSkill.Remove(this,this.onChangeSkill),P.onItemTriggerShow.Remove(this,this.onItemTriggerShow),P.onItemTriggerHide.Remove(this,this.onItemTriggerHide),P.onSetInfoShow.Remove(this,this.setInfoShow),P.onBatterShow.Remove(this,this.onBatterShow),P.onTriggerUnlockSkill.Remove(this,this.onTriggerUnlockSkill),P.onRadiationLevelUp.Remove(this,this.onRadiationLeveUp),this.joy&&(this.joy.Dispose(),this.joy=null),this.joy1&&(this.joy1.Dispose(),this.joy1=null),this.skillJoy1.Dispose(),this.skillJoy1=null,this.skillJoy2.Dispose(),this.skillJoy2=null,this.skillJoy3.Dispose(),this.skillJoy3=null,this.skillJoy4.Dispose(),this.skillJoy4=null;let e=this.view;Laya.timer.once(1e3,this,function(){e.dispose()}),this.view=null}}Show(){if(super.Show(),this.Load(),this.isFBWeb()||this.is4399Web()?this.showInput(!0):this.disableInput(),this.view){let e=V.IsGameMode_Zombie();k.isRW||(e=!1,this.view.m_TentCom.m_QuestBtn.visible=!1),this.view.m_QuestPanelBtn.visible=e,this.view.m_QuestPanel.visible=e}}Hide(){super.Hide(),(this.isFBWeb()||this.is4399Web())&&this.showInput(!1),this.UnLoad()}onUpdate(){if(this.isShow){Laya.stage.isFocused?this.showInput(!1):this.showInput(!0);var i=(new Date).getTime();if(i>this.zombieTipTime&&0!=this.zombieTipsList.length)if(0<this.zombieTipsList.filter(e=>"1"==e.showType).length){var o=this.zombieTipsList.filter(e=>"1"==e.showType)[0];"1"==o.infoType&&this.view.m_AddDay.play(),"2"==o.infoType&&this.view.m_Night.play(),"3"==o.infoType&&this.view.m_BloodyNight.play(),this.zombieTipsList=this.zombieTipsList.filter(e=>"1"!=e.showType),this.zombieTipTime=i+3e3}else for(let e=0;e<this.zombieTipsList.length;e++){var t=this.zombieTipsList[e];"2"==t.showType&&this.zombieInfoList.length<1&&(this.zombieInfoList.push({info:t.info,times:3,type:t.infoType,isplayAni:!1}),this.zombieTipsList.splice(e,1),this.zombieTipTime=i+3e3)}if(0<this.zombieInfoList.length&&(this.refreshZombieInfoList(),this.zombieInfoList=[]),k.Platform==T.QQ&&1==K.DataModule().GetPlatform().PlatformData.inGameBanner_qqOn&&(this.inGameBanner_qqCD_timer+=A.TimeDeltaNoScale,0<this.inGameBanner_qqCD_timerShow&&(this.inGameBanner_qqCD_timerShow-=A.TimeDeltaNoScale,this.inGameBanner_qqCD_timerShow<=0&&Ko.Instance.BannerAdHide()),this.inGameBanner_qqCD_timer>=this.inGameBanner_qqCD&&(this.inGameBanner_qqCD_timer=0,this.inGameBanner_qqCD_timerShow=1,Ko.Instance.BannerAdShow_GameUI(2))),k.shootMouseAim?(this.view.m_guideMode.setSelectedPage("shootMouseAim"),this.view.m_pcMode.setSelectedIndex(1)):k.isOpenNewInGameGuide?!V.showInGameGuide||this.guideOver||"Battle"==this.view.m_c1.selectedPage&&(this.view.m_n156.x=this.view.m_Joy.m_JoyBg.x-.5*this.view.m_Joy.width+this.view.m_Joy.x,this.view.m_n156.y=this.view.m_Joy.m_JoyBg.y-.5*this.view.m_Joy.height+this.view.m_Joy.y,1==V.nowGuide&&(this.view.m_GuideTipsCom.m_Tips.url=x.GetFairyGUI_Icon("Guide_tips1"),this.view.m_GuideTipsCom.m_RenWu.url=x.GetFairyGUI_Icon("Guide_renWu1"),this.isInTouch||this.joy.isTouching?(this.view.m_guideMode.setSelectedIndex(7),this.isOneMove&&(this.isOneMove=!1,z.Instance.LeYou_Guidance(105))):this.view.m_guideMode.setSelectedIndex(1)),2==V.nowGuide&&(this.view.m_GuideTipsCom.m_Tips.url=x.GetFairyGUI_Icon("Guide_tips2"),this.view.m_GuideTipsCom.m_RenWu.url=x.GetFairyGUI_Icon("Guide_renWu2"),this.joy1.isTouching?(this.view.m_guideMode.setSelectedIndex(8),this.isOneShoot&&(this.isOneShoot=!1,z.Instance.LeYou_Guidance(107))):this.view.m_guideMode.setSelectedIndex(2)),3!=V.nowGuide&&4!=V.nowGuide||(this.view.m_GuideStartGame.m_Tips.url=x.GetFairyGUI_Icon("Guide_tips3"),this.view.m_GuideStartGame.m_RenWu.url=x.GetFairyGUI_Icon("Guide_renWu3"),this.guideOver||(this.view.m_GuideOver.play(),this.guideOver=!0),this.view.m_guideMode.setSelectedIndex(6))):V.showInGameGuide&&(0==this.ingameGuideStep&&"Battle"==this.view.m_c1.selectedPage&&this.joy&&(this.view.m_n156.x=this.view.m_Joy.m_JoyBg.x-.5*this.view.m_Joy.width+this.view.m_Joy.x,this.view.m_n156.y=this.view.m_Joy.m_JoyBg.y-.5*this.view.m_Joy.height+this.view.m_Joy.y,this.touchGuideTime+=A.TimeDelta,this.isInTouch||this.joy.isTouching?(this.view.m_guideMode.setSelectedIndex(0),this.showGuideWaitTime=1):(this.showGuideWaitTime-=A.TimeDelta,this.showGuideWaitTime<0&&this.view.m_guideMode.setSelectedIndex(5)),10<this.touchGuideTime&&(this.view.m_guideMode.setSelectedIndex(0),this.ingameGuideStep=1),this.view.m_chooseList.visible&&(this.view.m_guideMode.setSelectedIndex(0),this.ingameGuideStep=1)),1==this.ingameGuideStep&&(this.view.m_chooseList.visible&&3!=this.view.m_guideMode.selectedIndex&&(this.view.m_guide.play(),this.view.m_guideMode.setSelectedIndex(3)),3==this.view.m_guideMode.selectedIndex&&0==this.view.m_chooseList.visible&&(this.view.m_guideMode.setSelectedIndex(0),this.ingameGuideStep=2)),2==this.ingameGuideStep&&(this.view.m_SkillJoy1.m_skill1.visible&&4!=this.view.m_guideMode.selectedIndex&&(this.view.m_guide.play(),this.view.m_guideMode.setSelectedIndex(4),this.leYouUp[1]||(this.leYouUp[1]=!0,z.Instance.LeYou_Guidance(2))),1==this.view.m_SkillJoy1.m_skill1.grayed&&(this.leYouUp[2]||(this.leYouUp[2]=!0,z.Instance.LeYou_Guidance(3)),this.view.m_guideMode.setSelectedIndex(0),this.ingameGuideStep=3,this.view.m_guide.stop(),V.showInGameGuide=!1))),V.IsGameMode_Zombie()){1e3<i-this.lastBatterTime&&(this.batter=0,this.newbBatter=0,this.lastBatterTime=i),this.batter!=this.newbBatter?(this.batter=this.newbBatter,this.view.m_batterTips.visible=!0,this.view.m_batterTips.m_text_combo.text=this.batter.toString(),this.view.m_batterTips.m_t0.play()):0==this.batter&&0==this.newbBatter&&(this.view.m_batterTips.visible=!1);let e=q.NowGameWorld.GetSingleCompoentEntity(_t);if(e&&e.HasComponent(Ot.id)){let i=e.GetComponent(Ot);if(i.isRefreshBoltNum){this.onBolt(i.boltNum);let e=K.DataModule().GetLocal().gameRule,t=i.boltNum-e.ZombieMode_Car_RepairPrice();this.view.m_CarCom.m_xiuliCheBtn.grayed=!(0<=t),this.bunkerTent&&this.bunkerTentUnit&&(o=this.bunkerTent.GetComponent(Ct),o=q.NowGameWorld.GetEntityByID(o.bunkerId).GetComponent(pt),o=V.zombieMode_bunkerUpgradePrice(o.level),o=i.boltNum-o,this.view.m_TentCom.m_ShengJiBtn.grayed=!(0<=o)),-1!=this.bunkerId&&(o=q.NowGameWorld.GetEntityByID(this.bunkerId).GetComponent(pt),o=V.zombieMode_bunkerRepairPrice(o.level),o=i.boltNum-o,this.view.m_DoorCom.m_xiuliBtn.grayed=!(0<=o)),i.isRefreshBoltNum=!1}if(i.isRefreshbatteryNum){this.onBattery(i.batteryNum);let e=K.DataModule().GetLocal().gameRule,t=i.batteryNum-e.ZombieMode_Car_ChargeEnergyPrice();this.view.m_CarCom.m_jiaYouBtn.grayed=!(0<=t),i.isRefreshbatteryNum=!1}}this.view.m_DayHitCom.m_dayText.text="第"+V.CurrentDay+"天";let t=V.ScenesTatusCountdown;V.ScenesTatus!=np.Daytime&&V.ScenesTatus!=np.Night&&V.ScenesTatus!=np.BloodyNight||(t=V.ScenesTatusCountdown),this.view.m_DayHitCom.m_zhiZhen.rotation=55-(t+(V.ScenesTatus==np.Daytime?0:V.zombieMode_DayTime))/(V.zombieMode_DayTime+V.zombieMode_NightTime)*360}this.joy&&this.joy.Update(),this.joy1&&this.joy1.Update(),this.skillJoy1.Update(),1<K.MGOBEModule().startFrame&&(this.view.m_frameTxt.text="s:"+K.MGOBEModule().startFrame),this.inputDir.y=K.InputModule().GetAxisValue(Ci.VerticalAxis),this.inputDir.x=K.InputModule().GetAxisValue(Ci.HorizontalAxis),this.inputFireDir.y=K.InputModule().GetAxisValue0(Ci.VerticalAxis0),this.inputFireDir.x=K.InputModule().GetAxisValue0(Ci.HorizontalAxis0),this.inputSkillDir.y=K.InputModule().GetAxisValue1(Ci.SkillVerticalAxis),this.inputSkillDir.x=K.InputModule().GetAxisValue1(Ci.SkillHorizontalAxis);let e=-1;if((e=0==this.inputDir.x&&0==this.inputDir.y?e:Math.floor(S.VecToAngle(this.inputDir)+181))!=this.oldAngle&&(this.oldAngle=e,this.SendMove(e)),!k.shootMouseAim){let e=-1,t=((e=0==this.inputFireDir.x&&0==this.inputFireDir.y?e:Math.floor(S.VecToAngle(this.inputFireDir)+181))!=this.fireOldAngle&&(this.fireOldAngle=e,this.SendAngle(e)),-1);(t=0==this.inputSkillDir.x&&0==this.inputSkillDir.y?t:Math.floor(S.VecToAngle(this.inputSkillDir)+181))!=this.skill1OldAngle&&(this.skill1OldAngle=t,this.SendAngle(t))}if(K.InputModule().IsKeyDown(Laya.Keyboard.SPACE)&&this.SendSkill(5),K.InputModule().IsKeyDown(Laya.Keyboard.E)&&this.SendSkill(11),K.InputModule().IsKeyDown(Laya.Keyboard.R)&&this.SendSkill(12),K.InputModule().IsKeyDown(Laya.Keyboard.F)&&this.SendSkill(13),K.InputModule().IsKeyDown(Laya.Keyboard.NUMBER_1)&&this.SendChoose(0),K.InputModule().IsKeyDown(Laya.Keyboard.NUMBER_2)&&this.SendChoose(1),K.InputModule().IsKeyDown(Laya.Keyboard.NUMBER_3)&&this.SendChoose(2),0<this.infoList.length&&(this.subkinfoTime-=A.TimeDelta,this.subkinfoTime<0&&(this.infoList.shift(),this.FreshKillInfo(),this.subkinfoTime=5),5<=this.infoList.length&&this.infoList.splice(0,1)),this.oldSavePlayerCount!=V.nowSavePlayer&&(this.oldSavePlayerCount=V.nowSavePlayer,this.view.m_leftplayerTxt.text=""+V.nowSavePlayer,this.view.m_killplayerTxt.text=""+V.myInGamePlayerData.kill),this.view.m_expBar.fillAmount=S.Lerp(this.view.m_expBar.fillAmount,this.expTarget,3*A.TimeDeltaNoScale),this.view.m_expBar.fillAmount<.01?this.view.m_expBar.visible=!1:this.view.m_expBar.visible=!0,this.FreshChangeBulletBtn(),this.FreshSkillUI(),this.FreshUpgrade(),this.FreshExp(),this.DealNianDmgRank(),"BattleSceneNian"==V.nowScene){var a=V.myInGamePlayerData;if(a){let t=0;for(let e=0;e<a.userItemDatas.length;e++)a.userItemDatas[e].type==Z.InGameHongBao&&t++;o=t.toString();this.view.m_hongbaoTxt.text!=o&&(this.view.m_hongbaoTxt.text=o)}}}}isShowChoose(e){return!(e.split("|").filter(e=>"undefined"!=e).length<=0)}FreshUpgrade(){let t=q.NowGameWorld.GetSingleCompoentEntity(_t);if(t){let e=t.GetComponent(R);var i;0<e.upgRadeList.length&&this.isShowChoose(e.upgRadeList[0])?e.needUIFreshChoose&&!this.view.m_chooseList.visible&&(e.needUIFreshChoose=!1,this.view.m_chooseList.visible=!0,this.view.m_ShowChoose.play(),(i=e.upgRadeList[0].split("|"))[0]&&"undefined"!=i[0]&&(this.FreshChoose(t,i[0],this.view.m_choose1),this.view.m_Choose.setSelectedIndex(0),k.shootMouseAim&&this.view.m_choose1.m_PcKey.setSelectedPage("1")),i[1]&&"undefined"!=i[1]&&(this.FreshChoose(t,i[1],this.view.m_choose2),this.view.m_Choose.setSelectedIndex(1),k.shootMouseAim&&this.view.m_choose2.m_PcKey.setSelectedPage("2")),i[2]&&"undefined"!=i[2]&&(this.FreshChoose(t,i[2],this.view.m_choose3),this.view.m_Choose.setSelectedIndex(2),k.shootMouseAim&&this.view.m_choose3.m_PcKey.setSelectedPage("3"))):this.view.m_chooseList.visible=!1}else this.view.m_chooseList.visible=!1}FreshChoose(e,t,i){let o=t.split("_"),a=o[0],n=1;1<o.length&&(n=Number(o[1]));var t=(V.IsGameMode_Zombie()?K.DataModule().GetLocal().zModePassiveSkill:K.DataModule().GetLocal().skill).Get(a);i.m_icon.url=x.GetIcon("Icon_"+t.UIRes),i.m_SkillIconCom.m_icon.url=x.GetIcon("Icon_"+t.UIRes),i.m_info1.text=K.DataModule().GetLz().GetText("SkillName_"+t.SkillID),i.m_info2.text=K.DataModule().GetLz().GetText("SkillName_"+t.SkillID),""!=t.SkillFun?i.m_c1.setSelectedIndex(0):i.m_c1.setSelectedIndex(1);let s=1,l=1,r=!1,h=!1;if(e.HasComponent(L.id)){var m=e.GetComponent(L);for(let e=0;e<m.skillList.length;e++)m.skillList[e].skillID==a&&(s=m.skillList[e].level+1,l=m.skillList[e].maxLevel,r=!1,h=!0)}let d=1,c=1;if(e.HasComponent(Vt.id)){var u=e.GetComponent(Vt);for(let e=0;e<u.buffList.length;e++)u.buffList[e].buffName==a&&(d=u.buffList[e].level+1,c=u.buffList[e].maxLevel,r=!0,h=!0)}1<n&&(s=n),V.IsGameMode_Zombie()?(t=K.DataModule().GetLocal().zModePassiveSkill.Get(a),r=!0,h||(c=t.SkillMaxLevel)):""!=(e=K.DataModule().GetLocal().skill.Get(a)).BuffFun?(r=!0,h||(c=e.SkillMaxLevel)):(r=!1,h||(l=e.SkillMaxLevel)),r?(i.m_SkillIconCom.m_bar.setSelectedPage("buff"),i.m_SkillIconCom.m_buleBar.fillAmount=d/c,i.m_SkillIconCom.m_MaxLevel.setSelectedPage("Lv"+c)):(i.m_SkillIconCom.m_bar.setSelectedPage("skill"),i.m_SkillIconCom.m_greenBar.fillAmount=s/l,i.m_SkillIconCom.m_MaxLevel.setSelectedPage("Lv"+l)),V.IsGameMode_Zombie()?(i.m_SkillInfo.text=K.DataModule().GetLocal().localization.GetLocalTextByZMSkillValue(a,d,"#FFCF3B"),i.m_Level.text="Lv"+d):(i.m_SkillInfo.text=K.DataModule().GetLocal().localization.GetLocalTextBySkillValue(a,s,"#FFCF3B"),i.m_Level.text=r?"Lv"+d:"Lv"+s)}Set_T_huoyuePlay(e){try{this.view.m_text_huoyue.text=e.toString(),this.view.m_T_huoyue.play(null,1)}catch(e){}}FreshSkillUI(){let i=q.NowGameWorld.GetSingleCompoentEntity(_t);if(i&&i.HasComponent(L.id)){let e=i.GetComponent(L),t=e.skillList.filter(e=>1==e.skillPos);0<t.length?(this.view.m_SkillJoy1.m_skill1.visible=!1,this.view.m_SkillJoy1.visible=!0,this.FreshSkill(t[0],this.view.m_SkillJoy1.m_skill1),k.shootMouseAim&&this.view.m_SkillJoy1.m_skill1.m_PcKey.setSelectedPage("E")):V.IsGameMode_Zombie()?e.unlockPosTimes<1?(this.view.m_SkillJoy1.visible=!1,this.view.m_SkillJoy1.m_skill1.visible=!1,this.view.m_SkillJoy1.m_skill1.m_c1.setSelectedPage("Lock")):(this.view.m_SkillJoy1.m_skill1.visible=!0,this.view.m_SkillJoy1.visible=!0,this.view.m_SkillJoy1.m_skill1.m_c1.setSelectedPage("Unlock")):(this.view.m_SkillJoy1.m_skill1.visible=!1,this.view.m_SkillJoy1.visible=!1);var o=e.skillList.filter(e=>2==e.skillPos),o=(0<o.length?(this.view.m_SkillJoy2.m_skill1.visible=!1,this.view.m_SkillJoy2.visible=!0,this.FreshSkill(o[0],this.view.m_SkillJoy2.m_skill1),k.shootMouseAim&&this.view.m_SkillJoy2.m_skill1.m_PcKey.setSelectedPage("R")):V.IsGameMode_Zombie()?e.unlockPosTimes<2?(this.view.m_SkillJoy2.visible=!1,this.view.m_SkillJoy2.m_skill1.visible=!1,this.view.m_SkillJoy2.m_skill1.m_c1.setSelectedPage("Lock")):(this.view.m_SkillJoy2.m_skill1.visible=!0,this.view.m_SkillJoy2.visible=!0,this.view.m_SkillJoy2.m_skill1.m_c1.setSelectedPage("Unlock")):(this.view.m_SkillJoy2.m_skill1.visible=!1,this.view.m_SkillJoy2.visible=!1),e.skillList.filter(e=>3==e.skillPos)),o=(0<o.length?(this.view.m_SkillJoy3.m_skill1.visible=!1,this.view.m_SkillJoy3.visible=!0,this.FreshSkill(o[0],this.view.m_SkillJoy3.m_skill1),k.shootMouseAim&&this.view.m_SkillJoy3.m_skill1.m_PcKey.setSelectedPage("F")):V.IsGameMode_Zombie()?e.unlockPosTimes<3?(this.view.m_SkillJoy3.visible=!1,this.view.m_SkillJoy3.m_skill1.visible=!1,this.view.m_SkillJoy3.m_skill1.m_c1.setSelectedPage("Lock")):(this.view.m_SkillJoy3.m_skill1.visible=!0,this.view.m_SkillJoy3.visible=!0,this.view.m_SkillJoy3.m_skill1.m_c1.setSelectedPage("Unlock")):(this.view.m_SkillJoy3.m_skill1.visible=!1,this.view.m_SkillJoy3.visible=!1),e.skillList.filter(e=>4==e.skillPos));0<o.length?(this.view.m_SkillJoy4.m_skill1.visible=!1,this.view.m_SkillJoy4.visible=!0,this.FreshSkill(o[0],this.view.m_SkillJoy4.m_skill1),k.shootMouseAim&&this.view.m_SkillJoy4.m_skill1.m_PcKey.setSelectedPage("F")):(this.view.m_SkillJoy4.m_skill1.visible=!1,this.view.m_SkillJoy4.visible=!1)}else this.view.m_SkillJoy1.visible=!1,this.view.m_SkillJoy2.visible=!1,this.view.m_SkillJoy3.visible=!1,this.view.m_SkillJoy4.visible=!1,this.view.m_SkillJoy1.m_skill1.visible=!1,this.view.m_SkillJoy2.m_skill1.visible=!1,this.view.m_SkillJoy3.m_skill1.visible=!1,this.view.m_SkillJoy4.m_skill1.visible=!1}FreshChangeBulletBtn(){let i=q.NowGameWorld.GetSingleCompoentEntity(_t);if(i&&i.HasComponent(U.id)){let e=i.GetComponent(U),t=e.bulletLoadTime/e.bulletLoadCD;t<.01?(this.view.m_ChangeBulletBtn.m_mask.fillAmount=1,this.view.m_ChangeBulletBtn.m_text.visible=!1,this.view.m_ChangeBulletBtn.m_mask.visible=!1,this.isPlayerReload&&(this.isPlayerReload=!1)):(this.view.m_ChangeBulletBtn.m_mask.fillAmount=t,this.view.m_ChangeBulletBtn.m_mask.visible=!0,this.view.m_ChangeBulletBtn.m_text.visible=!0,this.view.m_ChangeBulletBtn.m_text.text=e.bulletLoadTime.toFixed(2),this.isPlayerReload||(this.isPlayerReload=!0))}}FreshSkill(t,i){if(t.isItem?i.m_c1.setSelectedPage("Item"):(i.m_c1.setSelectedPage("Skill"),V.IsGameMode_Zombie()&&(i.m_Lvtext.visible=!1)),!i.visible){i.visible=!0;let e="";t.isItem?(o=K.DataModule().GetLocal().item.Get(t.skillID))&&(e=o.UIRes):(o=K.DataModule().GetLocal().skill.Get(t.skillID))&&(e=o.UIRes),i.m_Icon.url=x.GetIcon("Icon_"+e),i.m_SkillIconCom.m_icon.url=x.GetIcon("Icon_"+e)}if(t.refershIcon){t.refershIcon=!1;let e="";var o;t.isItem?(o=K.DataModule().GetLocal().item.Get(t.skillID))&&(e=o.UIRes):(o=K.DataModule().GetLocal().skill.Get(t.skillID))&&(e=o.UIRes),i.m_Icon.url=x.GetIcon("Icon_"+e),i.m_SkillIconCom.m_icon.url=x.GetIcon("Icon_"+e)}t.isItem&&(i.m_Timestext.text=t.itemLeftTimes+"次"),i.m_Lvtext.text="Lv"+t.level;let e=t.cdTime/t.cdMaxTime;(e=1<e?1:e)<.01?(i.m_bar.visible&&(i.m_Ready.play(),i.m_bar.visible=!1),i.grayed&&(i.grayed=!1)):(i.grayed||(i.grayed=!0),i.m_bar.visible=!0,i.m_bar.fillAmount=e),i.m_SkillIconCom.m_bar.setSelectedPage("skill"),i.m_SkillIconCom.m_greenBar.fillAmount=t.level/t.maxLevel,i.m_SkillIconCom.m_MaxLevel.setSelectedPage("Lv"+t.maxLevel)}FreshExp(){let e=q.NowGameWorld.GetSingleCompoentEntity(_t);var t,i;!e||(t=e.GetComponent(R)).exp==this.oldExp&&t.nowLevel==this.oldLevel||(this.oldExp=t.exp,t.nowLevel!=this.oldLevel&&(this.oldLevel=t.nowLevel,W.OneGameLv=this.oldLevel,this.view.m_expBar.fillAmount=1),i=t.exp/t.maxExp,this.expTarget=i,this.view.m_nowLevelTxt.text=""+t.nowLevel)}DealNianDmgRank(){if(V.IsGameMode_Nian()||V.IsGameMode_Deathmatch()){let e=V.inGameTimes;e<0&&(e=0),this.view.m_text_luanDouTime.text=Math.floor(e).toString(),this.freshRankTime-=A.TimeDelta,this.freshRankTime<0&&(this.freshRankTime=1,this.FreshNianDmgRank())}}FreshNianDmgRank(){let o=V.GetNianDmgRank();if(!((o=V.IsGameMode_Deathmatch()?V.GetSmashScoreRank():o).length<5)){let e=0;for(let i=0;i<o.length;i++){let t="#ffffff";if(o[i].isSelf&&(t="#edc409",e=i),i<5){let e=this.view.m_dmgRankList.getChildAt(i);V.IsGameMode_Deathmatch()?e.m_score.text=Math.floor(o[i].smashScore).toString():e.m_score.text=Math.floor(o[i].dmg).toString(),e.m_playerName.text=i+1+"."+j.NameDisplayProcessing(o[i].name),e.m_playerName.color=t,e.m_score.color=t}}V.IsGameMode_Deathmatch()?this.view.m_myRank.m_score.text=Math.floor(V.myInGamePlayerData.smashScore).toString():this.view.m_myRank.m_score.text=Math.floor(V.myInGamePlayerData.dmg).toString(),this.view.m_myRank.m_playerName.text=e+1+"."+j.NameDisplayProcessing(V.myInGamePlayerData.name),this.view.m_myRank.m_score.color="#edc409",this.view.m_myRank.m_playerName.color="#edc409"}}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(Df);return e.name=Df.UIName,t.uiName=Df.UIName,t}}),Uf=Df,Lf=(Uf.UIName="InGameUI",class extends ${constructor(){super(...arguments),this.keepTime=0,this.skillList=[],this.isClickVideo=!1,this.isAutoReveive=!1,this.lvList=[],this.buffList=[],this.isChange=!1,this.pDic={},this.iDic={},this.isShare=!1}Load(){try{if(null==this.view){K.AudioModule().StopMusic(),this.keepTime=10,(k.Platform!=T.WECHAT||k.IsInWebTest||1==CC.Instance.abTest2())&&(this.view=this.CreatFGUIViewByView(vl.createInstance()),this.LoadList()),this.isClickVideo=!1;let e=this;var t;this.view.m_reviveBtn.onClick(this,function(){e.On_VideoBtn()}),this.view.m_OppoReviveBtn.onClick(this,function(){e.On_VideoBtn()}),this.view.m_skipBtn.onClick(this,function(){e.Skip()}),this.view.m_skipBtn3.onClick(this,function(){j.ShowUI_WindowInfoUI("中途退出将无法获得奖励",function(){K.UIModule().HideUI(Lf.UIName),eG.StartCover()})}),this.view.m_skipBtn2.onClick(this,function(){e.Skip()}),this.view.m_skipBtn.visible=!1,V.banAllAttAndFog=!0,this.view.m_beKillInfo.visible=!1,""!=V.myInGamePlayerData.revengeTargetNetId&&null!=(t=V.GetInGamePlayerData(V.myInGamePlayerData.revengeTargetNetId))&&(this.view.m_beKillInfo.visible=!0,this.view.m_beKillInfo.text=K.DataModule().GetLz().GetTextByPar("InGame_fail",t.name)),k.Platform!=T.TT&&k.Platform!=T.QQ&&k.Platform!=T.OPPO&&k.Platform!=T.VIVO||(this.view.m_skipBtn.visible=!0),this.isAutoReveive=!1,k.Platform!=T.OPPO&&k.Platform!=T.VIVO||(j.ShowNativeAd(this.view.m_OppoLookBtn,this.view.m_OppoBannerAdBtn,null,null),this.view.m_YLPlatform.setSelectedPage("Oppo"),K.DataModule().GetPlatform().PlatformData,j.skipBtnDelayTime(this.view.m_skipBtn)),V.IsGameMode_Zombie()&&this.view.m_IsAutoRevive.setSelectedIndex(3),this.view.m_Btn_Close.onClick(this,function(){e.Skip()}),this.zombieModeShow()}this.IsShareOrVideo()}catch(e){console.error("复活界面报错了！",e)}}zombieModeShow(){let e=V.GetLocalPlayer(),t=e.GetComponent(ti),i=e.GetComponent(R),o=t.skinId,a=K.DataModule().GetLocal().hero.Get(o);this.view.m_HeroIcon.url=x.GetIcon("Hero_"+a.uiRes),this.view.m_heroNameText.text=K.DataModule().GetLz().GetText("Hero_"+o),this.view.m_HeroLevelText.text="Lv"+i.nowLevel;var n=t.weaponId,n=K.DataModule().GetLocal().weapon.Get(n),s=(this.view.m_WeaponIcon.url=x.GetIcon(n.uiRes),this.view.m_WeaponNameText.text=K.DataModule().GetLz().GetText("WN_"+n.ID),this.view.m_WeaponLevelText.text="Lv"+n.Level,this.view.m_weaponTypeText.url="ui://InGameUI/"+n.Class,e.GetComponent(Vt).buffList);this.buffList=[];for(let e=0;e<s.length;e++){var l=s[e];K.DataModule().GetLocal().zModePassiveSkill.Get(l.buffName)&&0<l.level&&this.buffList.push(l)}this.buffListRefersh()}buffListRefersh(){this.view.m_buffList.itemRenderer=Laya.Handler.create(this,this.onBuffRenderItem,null,!1),this.view.m_buffList.numItems=this.buffList.length}onBuffRenderItem(e,t){var e=this.buffList[e],i=K.DataModule().GetLocal().zModePassiveSkill.Get(e.buffName);t.m_SkillIconCom.m_icon.url=x.GetIcon("Icon_"+i.UIRes),t.m_SkillIconCom.m_bar.setSelectedPage("buff"),t.m_SkillIconCom.m_buleBar.fillAmount=e.level/e.maxLevel,t.m_SkillIconCom.m_MaxLevel.setSelectedPage("Lv"+e.maxLevel),t.m_buffLevel.text="LV"+e.level}LoadList(e=0){if(!V.IsGameMode_Zombie()){this.IsShareOrVideo();var n,s,l=K.DataModule().GetLocal().skill.GetInitiativeSkllList(),r=K.DataModule().GetLocal().skill.GetPassivitySkllList();this.lvList=[],this.skillList=[];let t=f.RandomF1F2Num(l.length-1,3),i=f.RandomF1F2Num(r.length-1,0),o=[],a=[];for(let e=0;e<t.length;e++)o.push(l[t[e]]);for(let e=0;e<i.length;e++)a.push(r[i[e]]);this.skillList.push(o[0]),this.skillList.push(o[1]),this.skillList.push(o[2]);for(let e=0;e<1;e++)0<o.length&&(n=o[e],this.iDic[n.SkillID]||(this.iDic[n.SkillID]=0),this.iDic[n.SkillID]++);for(let e=0;e<2;e++)0<a.length&&(s=a[e],this.pDic[s.SkillID]||(this.pDic[s.SkillID]=0),this.pDic[s.SkillID]++);for(let e=0;e<this.skillList.length;e++)this.lvList.push(1);this.List_Refresh()}}List_Refresh(){this.skillList=V.GetChooses(),this.view.m_list.itemRenderer=Laya.Handler.create(this,this.onRenderItem,null,!1),this.view.m_list.numItems=this.skillList.length,this.view.m_list.on(fairygui.Events.CLICK_ITEM,this,this.On_Item)}onRenderItem(e,t){let i=this.skillList[e],o=this.lvList[e];if(!(2<=o))for(let e=0;e<this.lvList.length&&!(2<=this.lvList[e]);e++);K.DataModule().GetUser().isFistGame?t.m_Com.m_type.visible=!1:t.m_Com.m_type.visible=!0,t.m_Com.m_LvType.setSelectedIndex(o-1),-1!=i.indexOf("_")&&(i=i.split("_")[0]);var a=K.DataModule().GetLocal().skill.Get(i);""==a.SkillFun?(t.m_Com.m_SkillType.setSelectedIndex(0),t.m_Com.m_SkillIconCom.m_bar.setSelectedPage("buff"),t.m_Com.m_SkillIconCom.m_buleBar.fillAmount=o/a.SkillMaxLevel):(t.m_Com.m_SkillType.setSelectedIndex(1),t.m_Com.m_SkillIconCom.m_bar.setSelectedPage("skill"),t.m_Com.m_SkillIconCom.m_greenBar.fillAmount=o/a.SkillMaxLevel),t.m_Com.m_SkillIconCom.m_MaxLevel.setSelectedPage("Lv"+a.SkillMaxLevel);let n=K.DataModule().GetLocal().skill.Get(i),s=K.DataModule().GetLocal().skill.Get(n.SkillID).F1,l=(s*=o,""),r=(l="AddSpeed"==n.SkillID||"HitnRun"==n.SkillID?s.toString():s+"%",""!=n.SkillFun&&(l=""),t.m_Com.m_load_icon.url=x.GetIcon("Icon_"+i),t.m_Com.m_text_info.text=K.DataModule().GetLz().GetText("SkillName_"+i)+K.DataModule().GetLz().GetTextByPar("InGame_SkillLV",o.toString()),t.m_Com.m_SkillIconCom.m_icon.url=x.GetIcon("Icon_"+i),f.Text_AutoSize(t.m_Com.m_text_info2,207,K.DataModule().GetLz().GetText("SkillNameInfo2_"+i)+l),this);t.scaleX=0,Laya.timer.once(200*(e+1),this,()=>{try{if(!r.view)return;t.scaleX=1,t.m_t0.play()}catch(e){console.log("err:",e)}})}On_Item(e){let t=this.view.m_list.getChildIndex(e),i=this.skillList[t],o=(this.lvList[t],g.revive),a=sC.chose_skill_advance,n=this,s=q.NowGameWorld.GetSingleCompoentEntity(_t).GetComponent(R);K.DataModule().GetUser().isFistGame?(n.Video_Call(),s.chooseUpGrade=i):j.GetRewardBtnFun(0,()=>{z.Instance.DayShareStrategy_Add(a,!1),n.Video_Call(),s.chooseUpGrade=i},o,e)}IsShareOrVideo(){no.Statistics_T0R(g.revive),this.isShare=z.Instance.GetShareStrategy(sC.revive),this.isShare?j.IsShare(this.view.m_reviveBtn):this.isShare=j.IsVideoAndShare(this.view.m_reviveBtn)}Video_Call(){z.Instance.LW_StatisticsEvent(8013,"",1),K.UIModule().HideUI(Lf.UIName),P.onRevive.Trigger(),W.OneGameRevive=1}SetAutoRevive(){W.luandouReviveTimeStop=!1,2<=W.luandouReviveTime?(this.isAutoReveive=!1,this.view.m_IsAutoRevive.setSelectedIndex(2),W.luandouReviveTimeStop=!0):(k.luandouNew&&(W.luandouReviveTime+=1),this.isAutoReveive=!0,this.view.m_IsAutoRevive.setSelectedIndex(1)),V.banAllAttAndFog=!1}On_VideoBtn(){this.view.m_skipBtn.visible=!0,this.isClickVideo=!0;let e=K.UIModule().GetUI(Lf.UIName),t=sC.revive,i=g.revive;V.IsGameMode_Zombie()&&(i=g.JiangShiFuHuo),K.DataModule().GetUser().isFistGame?e.Video_Call():e.isShare?j.GetRewardBtnFun(1,function(){z.Instance.DayShareStrategy_Add(t,!0),e.Video_Call()},i):j.GetRewardBtnFun(0,function(){z.Instance.DayShareStrategy_Add(t,!1),e.Video_Call()},i,e.view.m_reviveBtn)}Skip(){z.Instance.LW_StatisticsEvent(8013,"",0),K.UIModule().HideUI(Lf.UIName),K.UIModule().HideUI(Uf.UIName),(V.IsGameMode_Zombie()?K.UIModule().GetUI(pf.UIName):K.UIModule().GetUI(ef.UIName)).ShowInGameFailed()}UnLoad(){null!=this.view&&(K.AudioModule().PlayMusicAgain(),V.banAllAttAndFog=!1,this.view.dispose(),this.view=null)}Show(){super.Show(),this.Load()}Hide(){W.luandouReviveTimeStop=!1,super.Hide(),this.UnLoad()}onUpdate(){if(this.isShow)if(this.isAutoReveive){let t=q.NowGameWorld.GetEntitys([R.id,E.id]);for(let e=0;e<t.length;e++){var i;t[e].GetComponent(E).netId==V.myInGamePlayerData.netId&&(i=t[e].GetComponent(F).t1,this.view.m_countDownText.text=Math.floor(i+1).toString(),t[e].GetComponent(R).isDead||K.UIModule().HideUI(Lf.UIName))}}else if(this.keepTime<=0)this.view.m_countDownText.text="0",k.Platform!=T.WECHAT||k.IsInWebTest||1!=CC.Instance.abTest2()&&this.Skip();else{if(!this.isClickVideo)if(V.gameMode==$I.Deathmatch&&2<=W.luandouReviveTime){let t=q.NowGameWorld.GetEntitys([R.id,E.id]);for(let e=0;e<t.length;e++)t[e].GetComponent(E).netId==V.myInGamePlayerData.netId&&(t[e].GetComponent(F).t1=999)}else this.keepTime-=A.TimeDelta;this.view.m_countDownText.text=Math.floor(this.keepTime+1).toString(),5<=this.keepTime||(this.view.m_skipBtn.visible=!0)}}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(Lf);return e.name=Lf.UIName,t.uiName=Lf.UIName,t}}),Bf=Lf,bf=(Bf.UIName="ReviveUI",class{static EnterState(e,t){t.GetComponent(R).isDead=!0,t.GetComponent(v).enable=!1,t.GetComponent(w).banDirCtrl+=1,t.GetComponent(w).banDirRotationCtrl+=1,t.HasComponent(Et.id)&&(t.GetComponent(Et).destory=!0,t.GetComponent(gi).enable=!1);let i=!0,o=(q.Instance().netFrame||V.myInGamePlayerData.netId==t.GetComponent(E).netId&&(i=!1),V.IsGameMode_Nian()&&(i=!1,t.HasComponent(Et.id)&&(t.GetComponent(Et).destory=!1,t.GetComponent(Et).enable=!1),t.GetComponent(D).banHud=!0,V.myInGamePlayerData.netId==t.GetComponent(E).netId)&&(K.UIModule().ShowUI(Bf.UIName),K.UIModule().GetUI(Bf.UIName).SetAutoRevive()),V.IsGameMode_Deathmatch()&&(i=!1,t.HasComponent(Et.id)&&(t.GetComponent(Et).destory=!1,t.GetComponent(Et).enable=!1),t.GetComponent(D).banHud=!0,V.myInGamePlayerData.netId==t.GetComponent(E).netId)&&(K.UIModule().ShowUI(Bf.UIName),K.UIModule().GetUI(Bf.UIName).SetAutoRevive()),V.IsGameMode_Zombie()&&(i=!1,t.HasComponent(ut.id)&&(i=!0,t.GetComponent(D).banHud=!0)),i&&(t.RemoveComponent(D),t.RemoveComponent(Ft),t.RemoveComponent(fi)),t.GetComponent(M).isInCameraArea&&(t.HasComponent(ut.id)?K.AudioModule().PlayOnce(x.GetSound2(t.GetComponent(ut).GetRandomDeadSound(Math.random()))):K.AudioModule().PlayOnce(x.GetSound2("Death"+Math.floor(3*Math.random()+1)))),t.GetComponent(F).time=3,t.GetComponent(xt).animatorSpeedScale=1,t.GetComponent(xt)),a="Die";var n;t.GetComponent(ut)&&(a=t.GetComponent(ut).GetRandomDieAnim(Math.random())),o.SetAnimation(a),o.animatorSpeedScale=1,o.useSpeed=1,V.IsGameMode_Nian()&&(n=K.DataModule().GetLocal().event.Get("2021YearMonster_Rule"),n=Number(n.F7),t.GetComponent(F).t1=n+n*t.GetComponent(R).reviveTime),V.IsGameMode_Deathmatch()&&(t.GetComponent(F).t1=5),V.IsGameMode_Zombie()||(H.StopAllSkill(t),ri.ClearAllBuff(t))}static StateUpdate(e,t,i){let o=t.GetComponent(w);if(o.vec.x=S.Lerp(o.vec.x,0,5*i),o.vec.y=S.Lerp(o.vec.y,0,5*i),o.vec.z=S.Lerp(o.vec.z,0,5*i),V.IsGameMode_Nian()||V.IsGameMode_Deathmatch()){let e=t.GetComponent(F);if((e.t1-=i)&&e.t1<0){var a;t.GetComponent(R).reviveTime++,t.GetComponent(F).banStateChange=!1,t.GetComponent(F).ChangeState(Mf.StateName),t.GetComponent(R).hp=t.GetComponent(R).maxHp,t.GetComponent(R).fogHitedTimes=0,t.GetComponent(R).isDead=!1,t.GetComponent(D).banHud=!1,t.GetComponent(v).enable=!0,V.IsGameMode_Deathmatch()&&(a=gu.Instance.DeathmatchGetRandomBornPoint(),t.GetComponent(B).render=!0,t.GetComponent(M).pos=a,t.GetComponent(B).sp.transform.localPositionX=a.x,t.GetComponent(B).sp.transform.localPositionY=a.y,t.GetComponent(B).sp.transform.localPositionZ=a.z);let e=O.CreatPrefabEntityUsePos(N.Effect_HealEffect,t.GetComponent(M).pos);e.GetComponent(Mt).followTargetId=t.id,e.AddComponent(kt),e.GetComponent(kt).keepTime=1,t.HasComponent(Et.id)&&(t.GetComponent(Et).enable=!0,t.GetComponent(gi).enable=!0),ri.AddBuffToTarget(t,_i.BuffName,!0,2)}}else V.banAllAttAndFog||(t.GetComponent(F).time-=i,t.GetComponent(F).time<0&&(t.GetComponent(M).pos.y-=.2*i,t.GetComponent(M).pos.y<-.5&&t.Destory()))}static StateExit(e,t){--t.GetComponent(w).banDirCtrl,--t.GetComponent(w).banDirRotationCtrl}}),Af=(bf.StateName="Dead",class{static BuffInit(e,t,i,o){let a=t.GetComponent(R);o?(a.speedScale/=1+i.f1/100,a.speedScale*=1+o.f1/100,a.attSpeedScale-=i.f2/100,a.attSpeedScale+=o.f2/100):(a.speedScale*=1+i.f1/100,a.attSpeedScale+=i.f2/100,t.GetComponent(F).nowState==kf.StateName&&Tf.UpdateZombieMoveAnimation(t))}static BuffUpdate(e,t,i,o){}static BuffDispose(e,t,i,o){let a=t.GetComponent(R);a.speedScale/=1+i.f1/100,a.attSpeedScale-=i.f2/100,t.GetComponent(F).nowState==kf.StateName&&Tf.UpdateZombieMoveAnimation(t)}static HitedBuffDeal(e,t,i,o){}static HitBuffDeal(e,t,i,o){}}),xf=(Af.BuffName="ZombieMode_Night",class extends lt{constructor(){super(...arguments),this.systemName="ZombieSystem",this.grounp=new dt([ut.id,gi.id]),this.timeOffset=0}Init(){}Update(){}FixedUpdate(){let i=A.FixedTimeDelta,o=this.world.GetEntitysByMatcher(this.grounp);for(let e=0;e<o.length;e++){let t=o[e].GetComponent(ut);if(!t.destory){if(t.time-=i,t.time<0){t.time=1;let e=this.world.GetEntityByID(t.brain);""!=t.thinkState&&t.enable&&e.GetComponent(F).ChangeState(t.thinkState)}t.viewRangeRatio=Math.min(1,t.viewRangeRatio+t.recoveryViewRangeRatioAddPreSec*i)}}}LateUpdate(){}Destroy(){}OnAddComponent(i,o){if(o.componentId==ut.id){let e=o,t=this.world.CreatEntity();t.AddComponent(F).entity1Id=i.id,e.brain=t.id,e.time=this.timeOffset,this.timeOffset+=.04,1<this.timeOffset&&(this.timeOffset=0),t.GetComponent(F).ChangeState(e.StartState)}}OnRemoveComponent(e,i){if(i.componentId==ut.id){let e=i,t=this.world.GetEntityByID(e.brain);t&&t.Destory()}}static CreatZombie(e,t){xf.n+=1;let i="AI"+xf.n,o=V.RandomChinaState(),a=K.DataModule().GetLocal().zombie.Get(e),n="Ai"+Math.min(30,10+V.CurrentDay),s=V.CreatInGamePlayerData("AI"+xf.n,"Weapon1",e,i,!0,!1,"",1,n,"",[],1,o),l=(V.ingamePlayerDatas.push(s),V.nowSceneZombieNum+=1,s.isAI),r=Jc.CreatZombie(new Laya.Vector3(t.x,0,t.z),e,a.Weapon,l,s.aiId,s.props,s.weaponSkinId,s.level);r.AddComponent(L),r.GetComponent(ut).allowOutOfRangDestroy="Normal"==a.Type;for(let o=0;o<s.startSkills.length;o++){let e=s.startSkills[o].split("_"),t=e[0],i=1;1<e.length&&(i=Number(e[1]));var h=K.DataModule().GetLocal().skill.Get(t);if(null!=h){if(""!=h.SkillFun)for(let e=0;e<i;e++)H.AddSkill(r,h.SkillFun,h.SkillID,1,1,h.SkillMaxLevel);if(""!=h.BuffFun)for(let e=0;e<i;e++)ri.AddBuffToTarget(r,h.BuffFun,h.IsOnlyBuff,.001*h.keepTime,h.F1,h.F2,h.F3,h.F4)}}r.GetComponent(D).playerName=s.name,r.GetComponent(D).chinaState=s.chinaState,r.AddComponent(E).netId=s.netId,r.GetComponent(E).team=1,r.GetComponent(F).nowState="Idle",console.log("当前丧尸的数量:",V.nowSceneZombieNum,"待产生僵尸数量:",V.zombieMode_ZombieBirthRemainCount);let m=V.radiationLevel,d=K.DataModule().GetLocal().gameRule;switch(V.ScenesTatus){case np.Daytime:console.log("生产丧尸进度:",V.zombieMode_TodayZombieBirthCount+"/"+d.ZombieMode_ZombieCreateMaxCount_Day(m));break;case np.Night:console.log("生产丧尸进度:",V.zombieMode_TonightZombieBirthCount+"/"+d.ZombieMode_ZombieCreateMaxCount_Night(m));break;case np.BloodyNight:console.log("生产丧尸进度:",V.zombieMode_TonightZombieBirthCount+"/"+d.ZombieMode_ZombieCreateMaxCount_BloodNight(m))}return r}static UpdateZombieMoveAnimation(n){let s=n.GetComponent(R);if(s&&n.GetComponent(F).nowState!=bf.StateName){let e=n.GetComponent(xt),t=n.GetComponent(ut),i=n.GetComponent(w),o=2.5<s.GetSpeed(),a=o?t.GetRandomRunAnim(Math.random()):t.GetRandomWalkAnim(Math.random());Laya.Vector3.scalarLength(i.vec)<.5&&(a=n.GetComponent(U).idleClip),e.useClipName=a,e.useSpeed=o?s.GetSpeed()/3:s.GetSpeed()/1.5,e.useCross=.2}}static UpdateZombieAttack(o,a,n){if(o.GetComponent(U).IsCanShot()&&o.GetComponent(F).nowState!=bf.StateName){let t=o.GetComponent(ut),i=o.GetComponent(R),e=!1;if(t.attTime-=n,-1!=a&&a<=t.triggerAttRange&&(e=!0),t.collideWithObstacle&&(t.collideWithObstacle=!1,e=!0),e&&-1==t.att2Time&&t.attTime<=0){t.att2Time=t.attAnimTime/i.GetAttSpeedScale();let e=o.GetComponent(xt);e.nowUpBodyClipName="",e.useUpBodyClipName=t.GetRandomAttAnim(Math.random()),e.useCross=.1,e.useSpeed=1}-1!=t.att2Time&&(t.att2Time-=n,t.att2Time<=0&&(t.attTime=t.attTimeCd/i.GetAttSpeedScale(),t.att2Time=-1,i.StartTriggerAtt(),i.attBtnState=1))}}static UpdateZombieSceneStatusEnhanceBuff(t){if(t.GetComponent(F).nowState!=bf.StateName)switch(V.ScenesTatus){case np.Daytime:ri.ClearBuffByName(t,Af.BuffName);break;case np.Night:{let e=K.DataModule().GetLocal().gameRule;ri.AddBuffToTarget(t,Af.BuffName,!0,1e3,e.ZombieMode_ZombieNightBuff_AddSpeedRatio(),e.ZombieMode_ZombieNightBuff_AddAttSpeedRatio());break}case np.BloodyNight:{let e=K.DataModule().GetLocal().gameRule;ri.AddBuffToTarget(t,Af.BuffName,!0,1e3,e.ZombieMode_ZombieBloodNightBuff_AddSpeedRatio(),e.ZombieMode_ZombieBloodNightBuff_AddAttSpeedRatio());break}}}}),Tf=xf,kf=(Tf.n=20,class{static EnterState(e,t){var i;t&&(t.GetComponent(ut)?Tf.UpdateZombieMoveAnimation(t):(i=t.GetComponent(U),t.GetComponent(xt).SetAnimation(i.runClip)))}static StateUpdate(t,i,o){let e=i.GetComponent(w),a=i.GetComponent(R);i.GetComponent(xt).animatorSpeedScale=a.GetAnyScale();var n,s=Laya.Vector3.scalarLength(e.dir);if(i.HasComponent(_t.id)&&-1!=i.GetComponent(R).areYouDriving){let e=t.GetEntityByID(i.GetComponent(R).areYouDriving);-.01<e.GetComponent(pi).carRuntime?(e.GetComponent(pi).carRuntime-=o,e.GetComponent(pi)._isMoving=!0,i.GetComponent(w).speedScale=1,e.GetComponent(Mt).followrotation=!0,i.GetComponent(w).banDirRotationCtrl=0,t=e.GetComponent(pi).refreshTime,1e3<(n=(new Date).getTime())-t&&(e.GetComponent(pi).refreshTime=n,e.GetComponent(D).freshUI=!0)):(e.GetComponent(Mt).followrotation=!1,i.GetComponent(w).speedScale=0,i.GetComponent(w).banDirRotationCtrl=1)}s<=0&&i.GetComponent(F).ChangeState(Mf.StateName),i.GetComponent(U).gunMode?a.triggerAtt?(a.triggerAtt=!1,i.GetComponent(U).IsCanShot()&&!a.IsBanAtt()&&i.GetComponent(F).ChangeState(ui.StateName)):V.skillOffAtt(i):a.triggerAtt&&(a.IsBanAtt()?a.triggerAtt=!1:i.GetComponent(F).ChangeState(ui.StateName));let l=i.GetComponent(ut);l&&(l.freshMoveAnimCD-=o,l.freshMoveAnimCD<0&&(l.freshMoveAnimCD=.5,Tf.UpdateZombieMoveAnimation(i)))}static StateExit(e,t){}}),Mf=(kf.StateName="Move",class{static EnterState(e,t){var i=t.GetComponent(U);t.GetComponent(xt).SetAnimation(i.idleClip),t.GetComponent(F).t1=.05}static StateUpdate(e,t,i){let o=t.GetComponent(w),a=t.GetComponent(R),n=t.GetComponent(F);t.GetComponent(xt).animatorSpeedScale=a.GetAnyScale(),0<Laya.Vector3.scalarLength(o.dir)&&(t.GetComponent(F).ChangeState(kf.StateName),t.GetComponent(ut)&&Tf.UpdateZombieMoveAnimation(t)),t.GetComponent(U).gunMode?a.triggerAtt?(a.triggerAtt=!1,t.GetComponent(U).IsCanShot()&&!a.IsBanAtt()&&t.GetComponent(F).ChangeState(ui.StateName)):V.skillOffAtt(t):(0<=n.t1&&(n.t1-=i),n.t1<0&&a.triggerAtt&&(a.IsBanAtt()||t.GetComponent(F).ChangeState(ui.StateName)))}static StateExit(e,t){}}),Rf=(Mf.StateName="Idle",class{static BuffInit(e,i,o,t){if(t)t.buffKeepTime>o.buffKeepTime&&(o.buffKeepTime=t.buffKeepTime);else{i.GetComponent(R).anyScale-=100;let e=N.Effect_IceBuff,t=(1==o.f4&&(e=N.Effect_SnowManBuff),O.CreatPrefabEntityUsePos(e,i.GetComponent(M).pos));t.AddComponent(Mt).followTargetId=i.id,o.effectId=t.id,1==o.f4&&(i.GetComponent(R).invisible+=1),i.GetComponent(R).banAtt+=1,i.GetComponent(F).ChangeState(Mf.StateName)}}static BuffUpdate(e,t,i,o){}static BuffDispose(e,t,i,o){t.GetComponent(R).anyScale+=100,--t.GetComponent(R).banAtt,1==i.f4&&--t.GetComponent(R).invisible;let a=e.GetEntityByID(i.effectId);a&&a.Destory()}static HitedBuffDeal(e,t,i,o){}static HitBuffDeal(e,t,i,o){}}),Pf=(Rf.BuffName="Ice",class{static BuffInit(o,a,e,t){let n=O.CreatPrefabEntityUsePos(N.Effect_SuckLine,a.GetComponent(M).pos),s=(e.effectId=n.id,o.GetEntityByID(e.creatorId));if(s){let e=n.GetComponent(M),t=a.GetComponent(M),i=s.GetComponent(M);this.vec2.x=i.pos.x-t.pos.x,Pf.vec2.y=i.pos.z-t.pos.z;o=Laya.Vector2.scalarLength(Pf.vec2),a=S.VecToAngle(Pf.vec2);e.rotation.y=a,n.GetComponent(B).sp.transform.localRotationEulerY=a,n.GetComponent(B).sp.transform.localScaleZ=o,e.pos.x=t.pos.x,e.pos.y=1,e.pos.z=t.pos.z,t.isInCameraArea||i.isInCameraArea?n.GetComponent(B).render=!0:n.GetComponent(B).render=!1}e.t1=0}static BuffUpdate(e,t,i,o){i.t1-=o;let a=e.GetEntityByID(i.creatorId);if(a){if(i.t1<=0){i.t1=1;let e=i.f1*t.GetComponent(R).maxHp;t.HasComponent(Lt.id)&&(e=i.f1*a.GetComponent(R).maxHp),H.HitTarget(t.id,a.id,e,!0)&&0<t.GetComponent(R).hp&&H.AddHp(a,e)}t.GetComponent(R).isDead&&(i.buffKeepTime=0),a.GetComponent(R).isDead&&(i.buffKeepTime=0)}else i.buffKeepTime=0}static BuffLateUpdate(s,l,r,e){let h=s.GetEntityByID(r.effectId),m=s.GetEntityByID(r.creatorId);if(m){let e=h.GetComponent(M),t=l.GetComponent(M),i=m.GetComponent(M),o=l.GetComponent(B),a=m.GetComponent(B),n=!1;t.isInCameraArea?(Pf.targetPos.x=o.sp.transform.localPositionX,Pf.targetPos.z=o.sp.transform.localPositionZ):(Pf.targetPos.x=t.pos.x,Pf.targetPos.z=t.pos.z,n=!0),i.isInCameraArea?(Pf.creatPos.x=a.sp.transform.localPositionX,Pf.creatPos.z=a.sp.transform.localPositionZ):(Pf.creatPos.x=i.pos.x,Pf.creatPos.z=i.pos.z,n=!0),Pf.vec2.x=Pf.creatPos.x-Pf.targetPos.x,Pf.vec2.y=Pf.creatPos.z-Pf.targetPos.z;s=Laya.Vector2.scalarLength(Pf.vec2),r=S.VecToAngle(Pf.vec2);n?(e.rotation.y=S.LerpAngle(e.rotation.y,r,10*A.TimeDeltaNoScale),h.GetComponent(B).sp.transform.localScaleZ=S.Lerp(h.GetComponent(B).sp.transform.localScaleZ,s,10*A.TimeDeltaNoScale),e.pos.x=S.Lerp(e.pos.x,Pf.targetPos.x,10*A.TimeDeltaNoScale),e.pos.y=.5,e.pos.z=S.Lerp(e.pos.z,Pf.targetPos.z,10*A.TimeDeltaNoScale)):(e.rotation.y=r,h.GetComponent(B).sp.transform.localScaleZ=s,e.pos.x=Pf.targetPos.x,e.pos.y=.5,e.pos.z=Pf.targetPos.z),h.GetComponent(B).sp.transform.localPositionX=e.pos.x,h.GetComponent(B).sp.transform.localPositionZ=e.pos.z,h.GetComponent(B).sp.transform.localPositionY=e.pos.y,h.GetComponent(B).sp.transform.localRotationEulerY=e.rotation.y}}static BuffDispose(e,t,i,o){let a=e.GetEntityByID(i.effectId);a&&a.Destory()}static HitedBuffDeal(e,t,i,o){}static HitBuffDeal(e,t,i,o){}}),Ef=Pf,Nf=(Ef.BuffName="SuckBlood",Ef.vec2=new Laya.Vector2(0,0),Ef.creatPos=new Laya.Vector3(0,0,0),Ef.targetPos=new Laya.Vector3(0,0,0),class{static BuffInit(e,t,i,o){o?(H.GetBuffData(o,.01),t.GetComponent(R).attSpeedScale-=i.f1,t.GetComponent(R).attSpeedScale+=o.f1):(H.GetBuffData(i,.01),t.GetComponent(R).attSpeedScale+=i.f1),i.buffKeepTime=-1}static ChangeGun(e,t,i,o){H.GetBuffData(i,.01),t.GetComponent(R).attSpeedScale+=i.f1}static BuffUpdate(e,t,i,o){}static BuffDispose(e,t,i,o){}static HitedBuffDeal(e,t,i,o){}static HitBuffDeal(e,t,i,o){}}),Ff=(Nf.BuffName="AddAttSpeed",class{static BuffInit(e,t,i,o){o?(H.GetBuffData(o,.01),t.GetComponent(R).suckBlood-=i.f1,t.GetComponent(R).suckBlood+=o.f1):(H.GetBuffData(i,.01),t.GetComponent(R).suckBlood+=i.f1),i.buffKeepTime=-1}static BuffUpdate(e,t,i,o){}static BuffDispose(e,t,i,o){}static HitedBuffDeal(e,t,i,o){}static HitBuffDeal(e,t,i,o){}}),Of=(Ff.BuffName="AddSuckBlood",class{static BuffInit(e,t,i,o){if(!t.GetComponent(R).isDead&&null==o){Of.pos.x=t.GetComponent(M).pos.x,Of.pos.z=t.GetComponent(M).pos.z,Of.pos.y=t.GetComponent(M).pos.y+1;let e=O.CreatPrefabEntityUsePos(N.Bullet_LandPowerExpo,Of.pos);e.GetComponent(C).creatorId=i.creatorId,e.GetComponent(C).dmg=i.f1,e.GetComponent(v).radius=i.f2,e.GetComponent(M).scale.x=i.f2,e.GetComponent(M).scale.y=i.f2,e.GetComponent(M).scale.z=i.f2}}static BuffUpdate(e,t,i,o){}static BuffDispose(e,t,i,o){}static HitedBuffDeal(e,t,i,o){}static HitBuffDeal(e,t,i,o){}}),Hf=Of,Vf=(Hf.BuffName="LandPowerExpo",Hf.pos=new Laya.Vector3(0,0,0),class{static BuffInit(e,t,i,o){i.t1=0,i.t2=.2,null==o&&(t.GetComponent(R).invincible+=1),i.buffKeepTime=100,t.GetComponent(B).sp.transform.localScaleX=0,t.GetComponent(B).sp.transform.localScaleY=0,t.GetComponent(B).sp.transform.localScaleZ=0}static BuffUpdate(e,a,t,i){if(t.t2-=i,t.t2<=0){let i=a.GetComponent(M),o=(O.CreatPrefabEntityUsePos(N.Effect_SeaPowerMoveEffect,new Laya.Vector3(i.pos.x,i.pos.y,i.pos.z)).GetComponent(Mt).followTargetId=a.id,e.GetEntityByID(t.creatorId));if(a.GetComponent(B).sp.transform.localScaleX=1,a.GetComponent(B).sp.transform.localScaleY=1,a.GetComponent(B).sp.transform.localScaleZ=1,o){let e=o.GetComponent(M),t=S.AngleToDir(e.rotation.y);t.x=-t.x,t.y=-t.y,Laya.Vector2.scale(t,1.5,t),Vf.vec2.x=e.pos.x+t.x,Vf.vec2.y=e.pos.z+t.y,i.pos.x=Vf.vec2.x,i.pos.z=Vf.vec2.y,a.GetComponent(B).sp.transform.localPositionX=i.pos.x,a.GetComponent(B).sp.transform.localPositionZ=i.pos.z}t.buffKeepTime=0}}static BuffLateUpdate(e,t,i,o){}static BuffDispose(e,t,i,o){--t.GetComponent(R).invincible}static HitedBuffDeal(e,t,i,o){}static HitBuffDeal(e,t,i,o){}}),zf=Vf,Wf=(zf.BuffName="SeaPowerMove",zf.vec2=new Laya.Vector2(0,0),class{static BuffInit(e,t,i,o){var a=N.Effect_JianDao1,n=t.GetComponent(M),e=e.GetEntityByID(i.creatorId).GetComponent(M);Wf.dir.x=n.pos.x-e.pos.x,Wf.dir.y=n.pos.z-e.pos.z,Laya.Vector2.normalize(Wf.dir,Wf.dir);let s=S.VecToAngle(Wf.dir),l=O.CreatPrefabEntityUsePos(a,n.pos,new Laya.Vector3(0,s+180,0));l.GetComponent(Mt).followTargetId=t.id,l.GetComponent(B).lerpStart=!0,i.t1=.45}static BuffUpdate(e,t,i,o){-1!=i.t1&&(i.t1-=o,i.t1<=0)&&(o=t.GetComponent(M),O.CreatPrefabEntityUsePos(N.Effect_JianDaoEffect,new Laya.Vector3(o.pos.x,1,o.pos.z)),H.HitTarget(t.id,i.creatorId,i.f1,!0),i.buffKeepTime=0,i.t1=-1)}static BuffDispose(e,t,i,o){let a=e.GetEntityByID(i.effectId);a&&a.Destory()}static HitedBuffDeal(e,t,i,o){}static HitBuffDeal(e,t,i,o){}}),Zf=Wf,jf=(Zf.BuffName="JianDao",Zf.dir=new Laya.Vector2(0,0),Zf.vec2=new Laya.Vector2(0,0),class{static BuffInit(e,t,i,o){var a=N.Effect_JianDao2,n=t.GetComponent(M),e=e.GetEntityByID(i.creatorId).GetComponent(M);jf.dir.x=n.pos.x-e.pos.x,jf.dir.y=n.pos.z-e.pos.z,Laya.Vector2.normalize(jf.dir,jf.dir);let s=S.VecToAngle(jf.dir),l=O.CreatPrefabEntityUsePos(a,n.pos,new Laya.Vector3(0,s+180,0));l.GetComponent(Mt).followTargetId=t.id,l.GetComponent(B).lerpStart=!0,i.t1=0,i.t2=0}static BuffUpdate(e,t,i,o){i.t1+=o,.17<i.t1&&0==i.t2&&(jf.AddDmg(e,t,i),i.t2++),.32<i.t1&&1==i.t2&&(jf.AddDmg(e,t,i),i.t2++),1<i.t1&&2==i.t2&&(jf.AddDmg(e,t,i),i.t2++),1.2<i.t1&&3==i.t2&&(jf.AddDmg(e,t,i),i.t2++),1.65<i.t1&&4==i.t2&&(jf.AddDmg(e,t,i),i.t2++),1.85<i.t1&&5==i.t2&&(jf.AddDmg(e,t,i),i.t2++,i.buffKeepTime=0)}static AddDmg(e,t,i){var o=t.GetComponent(M);O.CreatPrefabEntityUsePos(N.Effect_JianDaoEffect,new Laya.Vector3(o.pos.x,1,o.pos.z)),H.HitTarget(t.id,i.creatorId,i.f1,!0)}static BuffDispose(e,t,i,o){let a=e.GetEntityByID(i.effectId);a&&a.Destory()}static HitedBuffDeal(e,t,i,o){}static HitBuffDeal(e,t,i,o){}}),Kf=jf,qf=(Kf.BuffName="Buff_JianDao2",Kf.dir=new Laya.Vector2(0,0),Kf.vec2=new Laya.Vector2(0,0),class{static BuffInit(e,t,i,o){if(!o&&!t.GetComponent(R).GetIsNoCtrlEffect()){t.GetComponent(F).ChangeState(uc.StateName),t.GetComponent(F).time=i.buffKeepTime;let e=t.GetComponent(w);e.dir.x=i.f1,e.dir.z=i.f2,e.speed=i.f3,e.vec.x=e.dir.x*e.speed,e.vec.z=e.dir.z*e.speed}}static BuffUpdate(e,t,i,o){}static BuffDispose(e,t,i,o){let a=e.GetEntityByID(i.effectId);a&&a.Destory()}static HitedBuffDeal(e,t,i,o){}static HitBuffDeal(e,t,i,o){}}),Yf=(qf.BuffName="ZombieMode_AirBlade",class{static BuffInit(e,i,o,t){if(t)t.buffKeepTime>o.buffKeepTime&&(o.buffKeepTime=t.buffKeepTime);else{let e=i.GetComponent(M),t=O.CreatPrefabEntityUsePos(N.Effect_Shield,new Laya.Vector3(e.pos.x,0,e.pos.y));t.GetComponent(Mt).followTargetId=i.id,o.effectId=t.id,i.GetComponent(R).rebound+=1,t.GetComponent(kt).keepTime=o.buffKeepTime,i.GetComponent(R).speed-=o.f2}}static BuffUpdate(i,o,a,e){let t=i.GetEntityByID(a.effectId),n=o.GetComponent(M).rotation.y,s=S.VecRotate(new Laya.Vector2(0,1),n);if(Laya.Vector2.normalize(s,s),t&&t.HasComponent(w.id)&&(Laya.Vector2.normalize(s,s),t.GetComponent(w).dir.x=-s.x,t.GetComponent(w).dir.z=s.y),0<a.f1&&0<a.f2){var l,r=o.GetComponent(v),h=o.GetComponent(M),m=V.GetUnitByRange(h.pos,r.nowMapPos.x,r.nowMapPos.y,a.f1,o.id),d=a.f1/a.f2;for(let t=0;t<m.length;t++){let e=i.GetEntityByID(m[t]);e.GetComponent(E).team==o.GetComponent(E).team||e.GetComponent(R).GetIsNoCtrlEffect()||(l=e.GetComponent(M),Yf.vec2.x=l.pos.x-h.pos.x,Yf.vec2.y=l.pos.z-h.pos.z,Laya.Vector2.normalize(Yf.vec2,Yf.vec2),Math.abs(S.DeltaAngle(S.VecToAngle(Yf.vec2),o.GetComponent(M).rotation.y))<30&&ri.AddBuffToTarget(e,qf.BuffName,!0,a.f2,Yf.vec2.x,Yf.vec2.y,d))}}}static BuffDispose(e,t,i,o){let a=e.GetEntityByID(i.effectId);--t.GetComponent(R).rebound,a&&a.Destory(),t.GetComponent(R).speed+=i.f2}static HitedBuffDeal(e,t,i,o){}static HitBuffDeal(e,t,i,o){}}),Qf=Yf,Jf=(Qf.BuffName="Shield",Qf.vec2=new Laya.Vector2,class{static BuffInit(e,t,i,o){if(o)o.buffKeepTime>i.buffKeepTime&&(i.buffKeepTime=o.buffKeepTime);else{t.GetComponent(R).invincible+=100;let e=O.CreatPrefabEntityUsePos(N.Effect_GoldInvincibleEffect,t.GetComponent(M).pos);e.GetComponent(Mt).followTargetId=t.id,i.effectId=e.id}}static BuffUpdate(e,t,i,o){let a=e.GetEntityByID(i.effectId);a&&(e=t.GetComponent(R),a.GetComponent(M).SetScale(e.sizeScale,e.sizeScale,e.sizeScale),a.GetComponent(Mt).offset.y=.82*e.sizeScale)}static BuffDispose(e,t,i,o){t.GetComponent(R).invincible-=100;let a=e.GetEntityByID(i.effectId);a&&a.Destory()}static HitedBuffDeal(e,t,i,o){}static HitBuffDeal(e,t,i,o){}}),Xf=(Jf.BuffName="GoldenBody",class{static BuffInit(e,t,i,o){var a=t.GetComponent(U).nowBulletCount,a=t.GetComponent(U).bulletCount-a;if(o)if(H.GetBuffData(o,.01),i.t1<10){const e=Math.floor(Math.max(1,o.f1*i.t1));t.GetComponent(U).bulletCount+=e}else{t.GetComponent(U).bulletCount=i.t1;const e=Math.floor(Math.max(1,o.f1*i.t1));t.GetComponent(U).bulletCount+=e}else{H.GetBuffData(i,.01),i.t1=t.GetComponent(U).bulletCount;const e=Math.floor(Math.max(1,i.f1*i.t1));t.GetComponent(U).bulletCount+=e}t.GetComponent(U).nowBulletCount=t.GetComponent(U).bulletCount-a,i.buffKeepTime=-1}static ChangeGun(e,t,i,o){let a=0;for(let e=0;e<i.level;e++){var n=t.GetComponent(U).bulletCount;(i.t1=n)<10?a+=1:a=Math.floor(Math.max(1,i.f1*n))}console.warn("弹夹buff换枪",t.GetComponent(U).bulletCount,a),t.GetComponent(U).bulletCount+=a,t.GetComponent(U).nowBulletCount=t.GetComponent(U).bulletCount}static BuffUpdate(e,t,i,o){}static BuffDispose(e,t,i,o){}static HitedBuffDeal(e,t,i,o){}static HitBuffDeal(e,t,i,o){}}),$f=(Xf.BuffName="Magazine",class{static BuffInit(e,t,i,o){o?(H.GetBuffData(o,.01),t.GetComponent(U).ReloadTimeScale/=1-i.f1,t.GetComponent(U).ReloadTimeScale*=1-o.f1):(H.GetBuffData(i,.01),t.GetComponent(U).ReloadTimeScale*=1-i.f1),i.buffKeepTime=-1}static BuffUpdate(e,t,i,o){}static BuffDispose(e,t,i,o){}static HitedBuffDeal(e,t,i,o){}static HitBuffDeal(e,t,i,o){}}),e_=($f.BuffName="FastReload",class{static BuffInit(e,t,i,o){if(o)o.buffKeepTime>i.buffKeepTime&&(i.buffKeepTime=o.buffKeepTime);else if(t.GetComponent(R).speed+=i.f1,!(k.Platform===T.KUAISHOU&&"iOS"===Yt.Instance.platformData.platform||T.IS_VIVO_PLATFORM)){let e=O.CreatPrefabEntityUsePos(N.Effect_SpeedUpEffect,t.GetComponent(M).pos);e.GetComponent(Mt).followTargetId=t.id,i.effectId=e.id}}static BuffUpdate(e,t,i,o){}static BuffDispose(e,t,i,o){t.GetComponent(R).speed-=i.f1;let a=e.GetEntityByID(i.effectId);a&&a.Destory()}static HitedBuffDeal(e,t,i,o){}static HitBuffDeal(e,t,i,o){}static PreFire(e,t,i,o){}static AftFire(e,t,i,o){}}),t_=(e_.BuffName="HitRinning",class{static BuffInit(e,t,i,o){i.buffKeepTime=-1,i.eternal=!0}static BuffUpdate(e,t,i,o){}static BuffDispose(e,t,i,o){}static HitedBuffDeal(e,t,i,o){}static HitBuffDeal(e,t,i,o){}static PreFire(e,t,i,o){}static AftFire(e,t,i,o){var a;0===t.GetComponent(U).nowBulletCount&&(t.GetComponent(U).singleShotLoading?(a=t.GetComponent(U).singleShotLoadingCD,ri.AddBuffToTarget(t,e_.BuffName,!0,a+1,i.f1)):(H.GetBuffData(i,1,.001),ri.AddBuffToTarget(t,e_.BuffName,!0,i.f2,i.f1)))}}),i_=(t_.BuffName="HitnRun",class{static BuffInit(e,t,i,o){i.eternal=!0}static BuffUpdate(e,t,i,o){}static BuffDispose(e,t,i,o){}static HitedBuffDeal(e,t,i,o){}static HitBuffDeal(e,t,i,o){}static PreFire(e,t,i,o){}static AftFire(o,e,a,n){if(H.GetBuffData(a,1),n.SubTargets)for(let i=0;i<n.SubTargets.length;i++){let e=n.SubTargets[i],t=o.GetEntityByID(e).GetComponent(C);t&&(t.guided=!0,t.maxAV=a.f1)}}}),o_=(i_.BuffName="SexPistols",class{static BuffInit(e,t,i,o){H.GetBuffData(i,1,1,1,1),i.t1=0,i.t2=i.f1/i.f2,i.t3=1,i.buffKeepTime=2e3*i.t2}static BuffUpdate(e,t,i,o){const a=Math.floor(1e3*i.t1/i.f3);i.t1+=A.FixedTimeDelta;var n=Math.floor(1e3*i.t1/i.f3),s=i.t1<=i.t2?i.t1:2*i.t2-i.t1,l=t.GetComponent(M),r=t.GetComponent(v);if(a!==n){const e=Math.max(0,s-.5),o=V.GetByRangetoRange(l.pos,r.nowMapPos.x,r.nowMapPos.y,e,s+.5,[t.id],!1),a=i.f4;for(let e=0;e<o.length;e++){const i=o[e];H.HitTarget(i,t.id,a,!0)}}}static BuffDispose(e,t,i,o){}static HitedBuffDeal(e,t,i,o){}static HitBuffDeal(e,t,i,o){}static PreFire(e,t,i,o){}static AftFire(e,t,i,o){}}),a_=(o_.BuffName="ElectricNova",class{static BuffInit(e,t,i,o){i.buffKeepTime=-1,i.eternal=!0,H.GetBuffData(i,.01,.01,.001)}static BuffUpdate(e,t,i,o){i.t1-=o}static BuffDispose(e,t,i,o){}static HitedBuffDeal(e,t,i,o){}static HitBuffDeal(e,t,i,o){}static TryFire(e,o,a,n){const s=o.GetComponent(U);if(a.t1<=0){let i=o.GetComponent(M);if(-1!==V.GetCurrentDirection(3,i.rotation.y,i.pos,o.GetComponent(v),5,o.id)){n.Values={},n.Values.FirePass=0;var n=o.GetComponent(R),l=new Laya.Vector3(1,1,1),r=(Laya.Vector3.scale(l,n.sizeScale,l),s.shotCD*a.f2/(n.attSpeedScale+1)),r=Math.max(a.f3,r),r=(s.shotCDTime=r,a.t1=r,new Laya.Vector3(0,i.rotation.y,0));let e=i.pos.clone(),t=(e.y=.02,O.CreatPrefabEntityUsePos(N.Bullet_Bullet2,e,r,l));t.GetComponent(C).keepFrame=1;const h=t.GetComponent(C);o.GetComponent(F).ChangeState(Lc.StateName),h.dmg=n.dmg*a.f1,h.creatorId=o.id}}}static PreFire(e,t,i,o){}static AftFire(e,t,i,o){}}),n_=(a_.BuffName="Melee",class extends Laya.Script{constructor(){super(),this.speed=1.5,this.mat=null}onAwake(){}onEnable(){this.mat=this.owner.particleRenderer.material}onUpdate(){this.mat&&(this.mat.tilingOffsetZ-=this.speed*A.TimeDelta,this.mat.tilingOffsetZ<-1&&(this.mat.tilingOffsetZ=0))}onDisable(){}}),s_=class{static BuffInit(e,t,i,o){o?H.GetBuffData(o,1,.01):H.GetBuffData(i,1,.01),i.buffKeepTime=-1,console.warn("消灭·激光BuffInit")}static BuffUpdate(e,t,i,o){}static BuffDispose(e,t,i,o){}static HitedBuffDeal(e,t,i,o){}static HitBuffDeal(e,n,s,t){let l=e.GetEntityByID(t.hitedTarget);if(l&&l.GetComponent(R).hp<=0&&!l.GetComponent(R).isTriggerDeathLaser){let i=N.Bullet_DeathLaserBullet,o=l.GetComponent(M).rotation.clone(),a=l.GetComponent(M).pos.clone(),t=n.GetComponent(R).doubleEffectTimes;a.y=.7;for(let e=0;e<t;e++){var r=Math.floor(180*Math.random());o.y=r;let t=O.CreatPrefabEntityUsePos(i,a,o);if(t){t.GetComponent(C).creatorId=n.id,t.GetComponent(C).dmg=H.GetZModePassiveSkillDmg(n,s.buffName)*s.f2;let e=t.GetComponent(B).sp.getChildByName("Root").getChildByName("Line");t.GetComponent(kt).keepTime=.5,t.GetComponent(C).isSpecialDmg=!0,l.GetComponent(R).isTriggerDeathLaser=!0,null!=e&&null==e.getComponent(n_)&&e.addComponent(n_)}}}}},l_=(s_.BuffName="DeathLaser",class{static BuffInit(e,t,i,o){o?H.GetBuffData(o,1,1,.01,1):H.GetBuffData(i,1,1,.01,1),i.buffKeepTime=-1,console.warn("闪电子弹BuffInit",i,o)}static BuffUpdate(e,t,i,o){i.t5-=o,i.t5<0&&1==i.t6&&(i.t6=0,l_.LightningFun(i.t7,t,e,i))}static BuffDispose(e,t,i,o){}static HitedBuffDeal(e,t,i,o){}static HitBuffDeal(t,i,o,e){let a=t.GetEntityByID(e.bullectId);if(a&&a.GetComponent(C).hitShowEffectByBuff==N.Effect_LongLightning){var n=i.GetComponent(R).doubleEffectTimes,e=e.hitedTarget;o.t7=e;for(let e=0;e<n;e++)0==e?l_.LightningFun(o.t7,i,t,o):(o.t5=.6,o.t6=1)}}static LightningFun(o,r,a,h){let n=a.GetEntityByID(o);if(n){let e=n.GetComponent(v),l=n.GetComponent(M).pos.clone(),t=V.GetUnitByRange(l,e.nowMapPos.x,e.nowMapPos.y,h.f2,r.id),i=[];for(let e=0;e<h.f4;e++){var s=Math.floor(Math.random()*t.length);i.push(t[s]),t.splice(s,1)}if(0<i.length){let e=O.CreatPrefabEntityUsePos(N.Effect_LightningBall,new Laya.Vector3(l.x,1,l.z));e.GetComponent(Mt).followTargetId=n.id,e.GetComponent(Mt).offset.y=1.2}for(let e=0;e<i.length;e++){let s=a.GetEntityByID(i[e]);if(s&&s.id!=o){H.HitTarget(s.id,r.id,H.GetZModePassiveSkillDmg(r,h.buffName)*h.f3,!1,0,null,0,N.Effect_Bleed,!0);let e=s.GetComponent(M).pos.clone(),t=l,i=S.VecToAngle(new Laya.Vector2(e.x-t.x,e.z-t.z)),o=O.CreatPrefabEntityUsePos(N.Effect_LongLightning,new Laya.Vector3(e.x,1,e.z),new Laya.Vector3(0,i,0)),a=Laya.Vector3.distance(e,t),n=(o.GetComponent(M).rotation.y=i,o.GetComponent(B).sp.particleRenderer.stretchedBillboardLengthScale=.3*a,O.CreatPrefabEntityUsePos(N.Effect_LightningBall,new Laya.Vector3(e.x,1,e.z)));n.GetComponent(Mt).followTargetId=s.id,n.GetComponent(Mt).offset.y=1}}}}static AftFire(o,a,n,e){let s=e.SubTargets,l=!1;for(let i=0;i<s.length;i++){let e=s[i],t=o.GetEntityByID(e);t&&(a.GetComponent(U).bulletShotCounter+=1,a.GetComponent(U).bulletShotCounter>=Math.floor(n.f1*(1-a.GetComponent(R).halfRequirement))&&(a.GetComponent(U).bulletShotCounter=0,1<s.length?l=!0:(t.GetComponent(C).hitShowEffectByBuff=N.Effect_LongLightning,V.changeBullectSkin(t,N.Bullet_LightningBullet),t.GetComponent(B).render=!1)))}if(l)for(let i=0;i<s.length;i++){let e=s[i],t=o.GetEntityByID(e);t&&3==i&&(t.GetComponent(C).hitShowEffectByBuff=N.Effect_LongLightning,V.changeBullectSkin(t,N.Bullet_LightningBullet),t.GetComponent(B).render=!1)}}}),r_=l_,h_=(r_.BuffName="LightningBullet",class{static BuffInit(e,t,i,o){o?(H.GetBuffData(o,.01),t.GetComponent(U).attackRange-=i.f2,o=t.GetComponent(U).attackRange*o.f1,t.GetComponent(U).attackRange+=o,i.f2=o):(H.GetBuffData(i,.01),o=t.GetComponent(U).attackRange*i.f1,t.GetComponent(U).attackRange+=o,i.f2=o),console.warn("加射程BuffInit")}static BuffUpdate(e,t,i,o){}static BuffDispose(e,t,i,o){}static HitedBuffDeal(e,t,i,o){}static HitBuffDeal(e,t,i,o){}}),m_=(h_.BuffName="IncreaseFiringRange",class{static BuffInit(e,t,i,o){o?(H.GetBuffData(o,1),0==o.level&&(o.f1=0)):(H.GetBuffData(i,1),0==i.level&&(i.f1=0)),i.buffKeepTime=-1,console.warn("穿透射击BuffInit",i)}static BuffUpdate(e,t,i,o){}static ChangeGun(e,t,i,o){var a=t.GetComponent(ti).weaponId,a=K.DataModule().GetLocal().weapon.Get(a);a.Type==ot.TommyGun||"Sniper"==a.Type?t.GetComponent(U).penetratingShot=a.F1:t.GetComponent(U).penetratingShot=0}static BuffDispose(e,t,i,o){}static HitedBuffDeal(e,t,i,o){}static HitBuffDeal(e,t,i,o){}static AftFire(o,e,t,i){var a=t.f1+e.GetComponent(U).penetratingShot,n=i.SubTargets;for(let i=0;i<n.length;i++){let e=n[i],t=o.GetEntityByID(e);if(t)for(let e=0;e<10&&Math.floor(100*Math.random())<a;e++)t.GetComponent(C).penetrationNum+=1}}}),d_=(m_.BuffName="PenetratingShot",class{static BuffInit(e,t,i,o){o?(H.GetBuffData(o,1,.01,.01),0==o.level&&(o.f1=0)):(H.GetBuffData(i,1,.01,.01),0==i.level&&(i.f1=0)),i.buffKeepTime=-1,console.warn("分裂射击BuffInit",i,o)}static ChangeGun(e,t,i,o){console.warn("换枪");var a=t.GetComponent(ti).weaponId,a=K.DataModule().GetLocal().weapon.Get(a);a.Type==ot.TommyGun||a.Type==ot.Rifle?t.GetComponent(U).splittingShot=a.F1:t.GetComponent(U).splittingShot=0}static BuffUpdate(e,t,i,o){}static BuffDispose(e,t,i,o){}static HitedBuffDeal(e,t,i,o){}static HitBuffDeal(e,o,a,n){let t=a.f1+o.GetComponent(U).splittingShot,i=n.bullectId,s=e.GetEntityByID(i),l=o.GetComponent(F);if(s&&s.HasComponent(w.id)&&""!=l.str1){var r=s.GetComponent(M),e=s.GetComponent(kt).keepTime,h=s.GetComponent(C).attackRange*a.f3/s.GetComponent(w).speed-e;if(Math.floor(100*Math.random())<t)for(let i=0;i<2;i++){let e=S.VecRotate(this.startPoint,r.rotation.y),t=(e=0==i?(this.needRot.y=r.rotation.y+45,S.VecRotate(this.startPoint,r.rotation.y+45)):(this.needRot.y=r.rotation.y-45,S.VecRotate(this.startPoint,r.rotation.y-45)),Laya.Vector2.scale(e,l.t5,e),this.bulletNeedPos.x=s.GetComponent(M).pos.x,this.bulletNeedPos.y=s.GetComponent(M).pos.y,this.bulletNeedPos.z=s.GetComponent(M).pos.z,O.CreatPrefabEntityUsePos(l.str1,this.bulletNeedPos,this.needRot,this.bulletScale));t.HasComponent(w.id)&&(Laya.Vector2.normalize(e,e),t.GetComponent(w).dir.x=-e.x,t.GetComponent(w).dir.z=e.y),t.GetComponent(C).creatorId=o.id;var m=s.GetComponent(C);t.GetComponent(v).hasColliderList.push(n.hitedTarget),t.GetComponent(kt).keepTime=h,t.GetComponent(C).dmg=Math.ceil(m.dmg*a.f2),s.GetComponent(C).hitShowEffectByBuff==N.Effect_LongLightning&&(t.GetComponent(C).hitShowEffectByBuff=N.Effect_LongLightning,V.changeBullectSkin(t,N.Bullet_LightningBullet),t.GetComponent(B).render=!1),s.GetComponent(C).hitShowEffectByBuff==N.Effect_ExplodingEffect&&(t.GetComponent(C).hitShowEffectByBuff=N.Effect_ExplodingEffect,V.changeBullectSkin(t,N.Bullet_ExplodingBullet),t.GetComponent(B).render=!1)}}}}),c_=(d_.BuffName="SplittingShot",d_.bulletScale=new Laya.Vector3(1,1,1),d_.bulletNeedPos=new Laya.Vector3(0,0,0),d_.needRot=new Laya.Vector3(0,0,0),d_.startPoint=new Laya.Vector2(0,1),class{static BuffInit(e,t,i,o){o?H.GetBuffData(o,1,1,.01,1,.001):H.GetBuffData(i,1,1,.01,1,.001),i.buffKeepTime=-1,console.warn("连击·冰雹BuffInit")}static BuffUpdate(t,i,o,e){if(o.t1-=e,o.t1<=0&&(o.t2=0),o.t3-=e,o.t3<0&&-1!=o.t4){H.HitTarget(o.t4,i.id,H.GetZModePassiveSkillDmg(i,o.buffName)*o.f3,!1,0,null,0,N.Effect_Bleed,!0);let e=t.GetEntityByID(o.t4);e&&(Math.floor(100*Math.random())<o.f4&&(e.GetComponent(ut).type,a=o.f5,ri.AddBuffToTarget(e,Rf.BuffName,!0,a)),o.t4=-1)}if(o.t6-=e,o.t6<0&&-1!=o.t7){H.HitTarget(o.t7,i.id,H.GetZModePassiveSkillDmg(i,o.buffName)*o.f3,!1,0,null,0,N.Effect_Bleed,!0);let e=t.GetEntityByID(o.t7);var a;e&&(Math.floor(100*Math.random())<o.f4&&(e.GetComponent(ut).type,a=o.f5,ri.AddBuffToTarget(e,Rf.BuffName,!0,a)),o.t7=-1)}}static BuffDispose(e,t,i,o){}static HitedBuffDeal(e,t,i,o){}static HitBuffDeal(n,s,l,t){if(l.t2+=t.specialCombo,l.t1=1,l.t2>=Math.floor(l.f1*(1-s.GetComponent(R).halfRequirement))&&(l.t2=0,n.GetEntityByID(t.bullectId))){let e=t.hitedTarget,a=n.GetEntityByID(e);if(a){var r=a.GetComponent(v),i=s.GetComponent(R).doubleEffectTimes;for(let o=0;o<i;o++){let e=V.GetUnitByRange(a.GetComponent(M).pos,r.nowMapPos.x,r.nowMapPos.y,l.f2,s.id),t=e[Math.floor(Math.random()*e.length)],i=n.GetEntityByID(t);if(0==o&&i){let e=i.GetComponent(M).pos.clone(),t=O.CreatPrefabEntityUsePos(N.Bullet_Hailstone,e);t.GetComponent(xt).SetAnimation("DropBall"),t.GetComponent(Mt).followTargetId=i.id,t.GetComponent(kt).keepTime=1.1,l.t3=.6,l.t4=i.id}if(1==o&&i){let e=i.GetComponent(M).pos.clone(),t=O.CreatPrefabEntityUsePos(N.Bullet_Hailstone,e);t.GetComponent(xt).SetAnimation("DropBall"),t.GetComponent(Mt).followTargetId=i.id,t.GetComponent(kt).keepTime=1.1,l.t6=.6,l.t7=i.id}}}}}}),u_=(c_.BuffName="SummonIceBlock",class{static BuffInit(e,t,i,o){o?H.GetBuffData(o,.001,1,.01):H.GetBuffData(i,.001,1,.01),i.t1=0,i.buffKeepTime=-1,console.warn("爆炸子弹BuffInit",i)}static BuffUpdate(e,t,i,o){if(i.t1-=o,i.t1<=0&&0==i.t2&&(i.t2=1),i.t5-=o,i.t5<0&&1==i.t6){i.t6=0;o=i.f2;O.CreatPrefabEntityUsePos(N.Effect_ExplodingEffect,new Laya.Vector3(i.v3.x,1,i.v3.z),new Laya.Vector3(0,.1,0),new Laya.Vector3(o,o,o));let e=O.CreatPrefabEntityUsePos(N.Effect_ExplodingEffectBullect,new Laya.Vector3(i.v3.x,1,i.v3.z),new Laya.Vector3(0,.1,0),new Laya.Vector3(o,o,o));e&&e.HasComponent(C.id)&&(e.GetComponent(kt).keepTime=.5,e.GetComponent(C).dmg=H.GetZModePassiveSkillDmg(t,i.buffName)*i.f3,e.GetComponent(v).width=e.GetComponent(v).width*o,e.GetComponent(v).height=e.GetComponent(v).height*o,e.GetComponent(C).creatorId=t.id,e.GetComponent(C).isSpecialDmg=!0)}}static BuffDispose(e,t,i,o){}static HitedBuffDeal(e,t,i,o){}static HitBuffDeal(e,n,s,t){let l=e.GetEntityByID(t.hitedTarget);if(l){let a=e.GetEntityByID(t.bullectId);if(a&&a.GetComponent(C).hitShowEffectByBuff==N.Effect_ExplodingEffect){let i=l.GetComponent(M),o=s.f2,t=n.GetComponent(R).doubleEffectTimes;for(let e=0;e<t;e++)if(0==e){O.CreatPrefabEntityUsePos(a.GetComponent(C).hitShowEffectByBuff,new Laya.Vector3(i.pos.x,1,i.pos.z),new Laya.Vector3(0,.1,0),new Laya.Vector3(o,o,o));let e=O.CreatPrefabEntityUsePos(N.Effect_ExplodingEffectBullect,new Laya.Vector3(i.pos.x,1,i.pos.z),new Laya.Vector3(0,.1,0),new Laya.Vector3(o,o,o)),t=i.pos.clone();s.v3=new Laya.Vector3(t.x,1,t.z),e&&e.HasComponent(C.id)&&(e.GetComponent(kt).keepTime=.5,e.GetComponent(C).dmg=H.GetZModePassiveSkillDmg(n,s.buffName)*s.f3,e.GetComponent(v).width=e.GetComponent(v).width*o,e.GetComponent(v).height=e.GetComponent(v).height*o,e.GetComponent(C).creatorId=n.id,e.GetComponent(C).isSpecialDmg=!0)}else s.t5=.4,s.t6=1}}}static AftFire(o,e,t,i){var a=i.SubTargets;if(1==t.t2){t.t1=t.f1*(1-e.GetComponent(R).halfRequirement);for(let i=t.t2=0;i<a.length;i++){let e=a[i],t=o.GetEntityByID(e);t.GetComponent(C).hitShowEffectByBuff=N.Effect_ExplodingEffect,t.GetComponent(C).dmg=0,V.changeBullectSkin(t,N.Bullet_ExplodingBullet),t.GetComponent(B).render=!1}}}}),p_=(u_.BuffName="ExplodingBullet",class{static BuffInit(o,a,e,t){let n=O.CreatPrefabEntityUsePos(N.Effect_SuckLine,a.GetComponent(M).pos),s=(e.effectId=n.id,o.GetEntityByID(e.creatorId));if(s){let e=n.GetComponent(M),t=a.GetComponent(M),i=s.GetComponent(M);this.vec2.x=i.pos.x-t.pos.x,p_.vec2.y=i.pos.z-t.pos.z;o=Laya.Vector2.scalarLength(p_.vec2),a=S.VecToAngle(p_.vec2);e.rotation.y=a,n.GetComponent(B).sp.transform.localRotationEulerY=a,n.GetComponent(B).sp.transform.localScaleZ=o,e.pos.x=t.pos.x,e.pos.y=1,e.pos.z=t.pos.z,t.isInCameraArea||i.isInCameraArea?n.GetComponent(B).render=!0:n.GetComponent(B).render=!1}e.t1=0,console.log("吸血buff开始生效",e.buffKeepTime,e.f1)}static BuffUpdate(e,t,i,o){i.t1-=o;let a=e.GetEntityByID(i.creatorId);a?(i.t1<=0&&(i.t1=1,o=i.f1,H.HitTarget(t.id,a.id,o,!0)&&0<t.GetComponent(R).hp&&H.AddHp(a,o)),t.GetComponent(R).isDead&&(i.buffKeepTime=0),a.GetComponent(R).isDead&&(i.buffKeepTime=0)):i.buffKeepTime=0}static BuffLateUpdate(s,l,r,e){let h=s.GetEntityByID(r.effectId),m=s.GetEntityByID(r.creatorId);if(m){let e=h.GetComponent(M),t=l.GetComponent(M),i=m.GetComponent(M),o=l.GetComponent(B),a=m.GetComponent(B),n=!1;t.isInCameraArea?(p_.targetPos.x=o.sp.transform.localPositionX,p_.targetPos.z=o.sp.transform.localPositionZ):(p_.targetPos.x=t.pos.x,p_.targetPos.z=t.pos.z,n=!0),i.isInCameraArea?(p_.creatPos.x=a.sp.transform.localPositionX,p_.creatPos.z=a.sp.transform.localPositionZ):(p_.creatPos.x=i.pos.x,p_.creatPos.z=i.pos.z,n=!0),p_.vec2.x=p_.creatPos.x-p_.targetPos.x,p_.vec2.y=p_.creatPos.z-p_.targetPos.z;s=Laya.Vector2.scalarLength(p_.vec2),r=S.VecToAngle(p_.vec2);n?(e.rotation.y=S.LerpAngle(e.rotation.y,r,10*A.TimeDeltaNoScale),h.GetComponent(B).sp.transform.localScaleZ=S.Lerp(h.GetComponent(B).sp.transform.localScaleZ,s,10*A.TimeDeltaNoScale),e.pos.x=S.Lerp(e.pos.x,p_.targetPos.x,10*A.TimeDeltaNoScale),e.pos.y=.5,e.pos.z=S.Lerp(e.pos.z,p_.targetPos.z,10*A.TimeDeltaNoScale)):(e.rotation.y=r,h.GetComponent(B).sp.transform.localScaleZ=s,e.pos.x=p_.targetPos.x,e.pos.y=.5,e.pos.z=p_.targetPos.z),h.GetComponent(B).sp.transform.localPositionX=e.pos.x,h.GetComponent(B).sp.transform.localPositionZ=e.pos.z,h.GetComponent(B).sp.transform.localPositionY=e.pos.y,h.GetComponent(B).sp.transform.localRotationEulerY=e.rotation.y}}static BuffDispose(e,t,i,o){let a=e.GetEntityByID(i.effectId);a&&a.Destory()}static HitedBuffDeal(e,t,i,o){}static HitBuffDeal(e,t,i,o){}}),g_=p_,f_=(g_.BuffName="ZombieMode_SuckBlood",g_.vec2=new Laya.Vector2(0,0),g_.creatPos=new Laya.Vector3(0,0,0),g_.targetPos=new Laya.Vector3(0,0,0),class{static BuffInit(e,t,i,o){i.buffKeepTime=-1,i.eternal=!0,t.GetComponent(U).splittingShot=0,t.GetComponent(U).penetratingShot=0}static FireOnClick(e,t,i,o){console.warn("开火按钮按下,"),t.GetComponent(F).ChangeState(Mf.StateName),t.GetComponent(U).sniperRifleattRange=t.GetComponent(U).readOnlyAttackRange,i.t3=.3,V.CameraRange=26,0==i.t2&&(i.t2=1),i.t1=1,t.GetComponent(U).penetratingShot=0,i.f2=0,i.f3=0}static TryFire(e,t,i,o){t.GetComponent(U).attackRange=t.GetComponent(U).readOnlyAttackRange,e.GetSingleCompoent($i).state=$i.state_InGame,i.t1=0,2==i.t2&&(t.GetComponent(w).ChangeBanDir(-1),--t.GetComponent(R).superArmor),i.t2=0}static PreFire(e,t,i,o){}static AftFire(o,e,a,t){var n,s=t.SubTargets,l=K.DataModule().GetLocal().weapon.Get(e.GetComponent(ti).weaponId);for(let i=0;i<s.length;i++){let e=s[i],t=o.GetEntityByID(e);t&&(n=t.GetComponent(C).dmg*(.01*a.f2),t.GetComponent(C).dmg+=n,l&&(n=l.BulletSize+l.BulletSize*(.01*a.f3),t.GetComponent(M).SetScale(n,n,n),t.GetComponent(B).updateScale=!0,t.GetComponent(v).width=t.GetComponent(v).width*n))}}static ChangeGun(e,t,i,o){console.warn("换枪");var a=t.GetComponent(ti).weaponId;K.DataModule().GetLocal().weapon.Get(a).Type!=ot.Sniper?i.buffKeepTime=0:(t.GetComponent(U).splittingShot=0,t.GetComponent(U).penetratingShot=0)}static BuffUpdate(e,t,i,o){var a;if(1==i.t1&&(i.t3-=o,i.t3<=0)&&(t.HasComponent(_t.id)&&(e.GetSingleCompoent($i).state=$i.state_Sniper),t.GetComponent(U).attackRange<2*t.GetComponent(U).readOnlyAttackRange&&(t.GetComponent(U).attackRange+=.5,t.GetComponent(U).sniperRifleattRange+=.5,o=t.GetComponent(U).readOnlyAttackRange/.5,e=t.GetComponent(ti).weaponId,a=(e=K.DataModule().GetLocal().weapon.Get(e)).F1/o,t.GetComponent(U).penetratingShot+=a,a=e.F2/o,i.f2+=a,a=e.F3/o,i.f3+=a)),t.HasComponent(_t.id))if(t.GetComponent(U).IsCanShot()){if(1==i.t2){let e=t.GetComponent(w);e.ChangeBanDir(1),e.vec=new Laya.Vector3(0,0,0),t.GetComponent(R).superArmor+=1,console.warn("进入狙击枪状态",e.banDirCtrl,t.GetComponent(R).superArmor),i.t2=2}}else if(2==i.t2){let e=t.GetComponent(w);e.ChangeBanDir(-1),--t.GetComponent(R).superArmor,console.warn("退出狙击枪状态2222,",e.banDirCtrl,t.GetComponent(R).superArmor),i.t2=0}}static BuffDispose(e,t,i,o){}static HitedBuffDeal(e,t,i,o){}static HitBuffDeal(e,t,i,o){}}),__=(f_.BuffName="Sniper",class{static BuffInit(e,t,i,o){i.buffKeepTime=-1,i.eternal=!0,b.Warn("霰弹枪buff",i,o),t.GetComponent(U).splittingShot=0,t.GetComponent(U).penetratingShot=0}static FireOnClick(e,t,i,o){}static TryFire(e,t,i,o){}static PreFire(e,t,i,o){}static BeforeBulletDmg(e,t,i,o){}static ChangeGun(e,t,i,o){console.warn("换枪");var a=t.GetComponent(ti).weaponId;K.DataModule().GetLocal().weapon.Get(a).Type!=ot.ShotGun?i.buffKeepTime=0:(t.GetComponent(U).splittingShot=0,t.GetComponent(U).penetratingShot=0)}static BuffUpdate(e,t,i,o){}static BuffDispose(e,t,i,o){}static HitedBuffDeal(e,t,i,o){}static HitBuffDeal(e,t,i,o){var t=t.GetComponent(ti).weaponId,t=K.DataModule().GetLocal().weapon.Get(t),a=t.F1,t=.001*t.F2,e=e.GetEntityByID(o.hitedTarget);Math.floor(100*Math.random())<a&&ri.AddBuffToTarget(e,li.BuffName,!0,t)}static AftFire(o,a,e,t){var n=t.SubTargets;for(let i=0;i<n.length;i++){let e=n[i],t=o.GetEntityByID(e);t&&(t.GetComponent(C).onDistanceDmg=a.GetComponent(ti).weaponId)}}}),I_=(__.BuffName="ShotGun",__.vec=new Laya.Vector2(0,0),class{static BuffInit(e,t,i,o){var a;o?(a=K.DataModule().GetLocal().weapon.GetDatas().filter(e=>e.Type==ot.Pistol)[0],o.f2=i.f2,o.f1=a.F1*t.GetComponent(w).speed):(a=K.DataModule().GetLocal().weapon.GetDatas().filter(e=>e.Type==ot.Pistol)[0],i.f1=a.F1*t.GetComponent(w).speed,t.GetComponent(w).speed+=i.f1,i.buffKeepTime=-1,i.eternal=!0,t.GetComponent(U).splittingShot=0,t.GetComponent(U).penetratingShot=0),b.Warn("手枪buff",i,o,t.GetComponent(w).speed)}static FireOnClick(e,t,i,o){}static TryFire(e,t,i,o){}static PreFire(e,t,i,o){}static AftFire(t,e,o,a){e=e.GetComponent(ti).weaponId,e=K.DataModule().GetLocal().weapon.Get(e).F2+o.f2;if(Math.floor(100*Math.random())<e){o.t1=.2,o.t2=-1;let e=a.SubTargets[0],i=t.GetEntityByID(e);if(i&&i.HasComponent(w.id)){let e=i.GetComponent(M),t=i.GetComponent(C).attackRange/i.GetComponent(w).speed;o.f3=i.GetComponent(C).dmg,o.f4=e.rotation.clone().y,o.l4=t}}}static ChangeGun(e,t,i,o){var a=t.GetComponent(ti).weaponId;K.DataModule().GetLocal().weapon.Get(a).Type!=ot.Pistol?(i.buffKeepTime=0,t.GetComponent(w).speed-=i.f1):(t.GetComponent(U).splittingShot=0,t.GetComponent(U).penetratingShot=0),console.warn("手抢换枪",i.f1,t.GetComponent(w).speed)}static BuffUpdate(e,t,i,o){if(i.t1-=o,i.t1<=0&&-1==i.t2){i.t2=1;var a=t.GetComponent(F);for(let e=0;e<1;e++){0<t.GetComponent(U).nowBulletCount&&t.GetComponent(U).nowBulletCount--,t.GetComponent(U).nowBulletCount<=0&&(t.GetComponent(U).bulletLoadTime=t.GetComponent(U).bulletLoadCD);var n=S.VecRotate(this.startPoint,i.f4),s=(Laya.Vector2.scale(n,a.t5,n),t.GetComponent(M).pos.clone());this.bulletNeedPos.x=s.x,this.bulletNeedPos.y=s.y+a.t6,this.bulletNeedPos.z=s.z,this.needRot.x=0,this.needRot.y=0,this.needRot.z=0,this.needRot.y=i.f4;let e=O.CreatPrefabEntityUsePos(a.str1,this.bulletNeedPos,this.needRot,this.bulletScale);""==t.GetComponent(ti).weaponId||(s=K.DataModule().GetLocal().weapon.Get(t.GetComponent(ti).weaponId))&&(e.GetComponent(M).SetScale(s.BulletSize,s.BulletSize,s.BulletSize),e.GetComponent(B).updateScale=!0),e.HasComponent(w.id)&&(e.GetComponent(w).speed=1.3*e.GetComponent(w).speed,Laya.Vector2.normalize(n,n),e.GetComponent(w).dir.x=-n.x,e.GetComponent(w).dir.z=n.y),e.GetComponent(C).creatorId=t.id,e.GetComponent(kt).keepTime=i.l4,e.GetComponent(C).dmg=i.f3}}}static BuffDispose(e,t,i,o){}static HitedBuffDeal(e,t,i,o){}static HitBuffDeal(e,t,i,o){}}),C_=(I_.BuffName="Pistol",I_.bulletScale=new Laya.Vector3(1,1,1),I_.bulletNeedPos=new Laya.Vector3(0,0,0),I_.needRot=new Laya.Vector3(0,0,0),I_.startPoint=new Laya.Vector2(0,1),class{static BuffInit(e,t,i,o){var a=K.DataModule().GetLocal().weapon.GetDatas().filter(e=>e.Type==ot.TommyGun)[0];t.GetComponent(U).splittingShot=a.F1,t.GetComponent(U).penetratingShot=0,i.buffKeepTime=-1,i.eternal=!0}static FireOnClick(e,t,i,o){}static TryFire(e,t,i,o){}static PreFire(e,t,i,o){}static AftFire(e,t,i,o){}static ChangeGun(e,t,i,o){console.warn("换枪");var a=t.GetComponent(ti).weaponId,a=K.DataModule().GetLocal().weapon.Get(a);a.Type!=ot.TommyGun?i.buffKeepTime=0:(t.GetComponent(U).splittingShot=a.F1,t.GetComponent(U).penetratingShot=0)}static BuffUpdate(e,t,i,o){}static BuffDispose(e,t,i,o){}static HitedBuffDeal(e,t,i,o){}static HitBuffDeal(e,t,i,o){}}),G_=(C_.BuffName="TommyGun",class{static BuffInit(e,t,i,o){var a=K.DataModule().GetLocal().weapon.GetDatas().filter(e=>e.Type==ot.Rifle)[0];t.GetComponent(U).splittingShot=a.F1,t.GetComponent(U).penetratingShot=a.F2,i.buffKeepTime=-1,i.eternal=!0}static FireOnClick(e,t,i,o){}static TryFire(e,t,i,o){}static PreFire(e,t,i,o){let a=t.GetComponent(ti).weaponId,n=K.DataModule().GetLocal().weapon.Get(a);var s,l;""!=n.ClassFactor&&(s=n.ClassFactor.split(","),l=t.GetComponent(U).consecutiveShotsTimes,t.GetComponent(U).shotCDScale=.01*parseInt(s[l]))}static AftFire(e,t,i,o){}static ChangeGun(e,t,i,o){console.warn("换枪");var a=t.GetComponent(ti).weaponId,a=K.DataModule().GetLocal().weapon.Get(a);a.Type!=ot.Rifle?i.buffKeepTime=0:(t.GetComponent(U).splittingShot=a.F1,t.GetComponent(U).penetratingShot=a.F2)}static BuffUpdate(e,t,i,o){}static BuffDispose(e,t,i,o){}static HitedBuffDeal(e,t,i,o){}static HitBuffDeal(e,t,i,o){}}),S_=(G_.BuffName="Rifle",class{static BuffInit(e,t,i,o){o||(o=K.DataModule().GetLocal().hero.Get("Leo"),i.f1=o.F1,i.buffKeepTime=-1,t.GetComponent(R).dmg*=.01*i.f1+1,b.Warn("Buff_Zmode_PistolMastery_1",t.GetComponent(R).dmg))}static ChangeGun(e,t,i,o){var t=t.GetComponent(ti).weaponId,t=K.DataModule().GetLocal().weapon.Get(t),a=K.DataModule().GetLocal().hero.Get("Leo");i.f1=a.F1,t.Type!=ot.Pistol?i.buffKeepTime=0:i.buffKeepTime=-1,b.Warn("Buff_Zmode_PistolMastery_1换枪")}static BuffUpdate(e,t,i,o){}static BuffDispose(e,t,i,o){}static HitedBuffDeal(e,t,i,o){}static HitBuffDeal(e,t,i,o){}}),y_=(S_.BuffName="Zmode_PistolMastery_1",class{static BuffInit(e,t,i,o){o||(o=K.DataModule().GetLocal().hero.Get("Leo"),i.f2=o.F2,i.f3=o.F3,i.buffKeepTime=-1,t.GetComponent(R).dmg*=.01*i.f2+1,t.GetComponent(U).ReloadTimeScale-=.01*i.f3,i.t5=1),console.warn("Buff_Zmode_PistolMastery_2 BuffInit换枪",t.GetComponent(U).ReloadTimeScale)}static ChangeGun(e,t,i,o){var a=t.GetComponent(ti).weaponId,a=K.DataModule().GetLocal().weapon.Get(a),n=K.DataModule().GetLocal().hero.Get("Leo");i.f2=n.F2,i.f3=n.F3,a.Type!=ot.Pistol&&1==i.t5?(t.GetComponent(U).ReloadTimeScale+=.01*i.f3,i.buffKeepTime=0):i.buffKeepTime=-1,console.warn("Buff_Zmode_PistolMastery_2换枪",t.GetComponent(U).ReloadTimeScale)}static BuffUpdate(e,t,i,o){}static BuffDispose(e,t,i,o){}static HitedBuffDeal(e,t,i,o){}static HitBuffDeal(e,t,i,o){}}),w_=(y_.BuffName="Zmode_PistolMastery_2",class{static BuffInit(e,t,i,o){var a;o||(a=K.DataModule().GetLocal().hero.Get("Leo"),i.f4=a.F4,i.f5=a.F5,i.buffKeepTime=-1,t.GetComponent(R).dmg*=.01*i.f4+1,t.GetComponent(Vt).buffList.filter(e=>e.buffName==I_.BuffName)[0].f2+=i.f5,b.Warn("Buff_Zmode_PistolMastery_3",t.GetComponent(R).dmg,i,o),i.t5=1)}static ChangeGun(e,t,i,o){var a=t.GetComponent(ti).weaponId,a=K.DataModule().GetLocal().weapon.Get(a),n=K.DataModule().GetLocal().hero.Get("Leo");i.f4=n.F4,i.f5=n.F5,a.Type!=ot.Pistol&&1==i.t5?(t.GetComponent(Vt).buffList.filter(e=>e.buffName==I_.BuffName)[0].f2-=i.f5,i.buffKeepTime=0):i.buffKeepTime=-1,b.Warn("Buff_Zmode_PistolMastery_3换枪",.01*i.f4+1,t.GetComponent(R).dmg)}static BuffUpdate(e,t,i,o){}static BuffDispose(e,t,i,o){}static HitedBuffDeal(e,t,i,o){}static HitBuffDeal(e,t,i,o){}static AftFire(e,t,i,o){}}),v_=(w_.BuffName="Zmode_PistolMastery_3",w_.bulletScale=new Laya.Vector3(1,1,1),w_.bulletNeedPos=new Laya.Vector3(0,0,0),w_.needRot=new Laya.Vector3(0,0,0),w_.startPoint=new Laya.Vector2(0,1),class{static BuffInit(e,t,i,o){o||(i.t3=1,o=t.GetComponent(hp),i.f2=o.f2,i.buffKeepTime=-1)}static BuffUpdate(o,a,n,e){if(1==n.t2&&(n.t1-=e,n.t1<=0)&&(s=a.GetComponent(hp),n.t1=s.f15,ri.AddBuffToTarget(a,Jf.BuffName,!0,s.f16)),1==n.t3&&(n.f2-=e,n.f2<=0&&(n.t3=0,!a.GetComponent(R).isDead))){let e=a.GetComponent(hp),t=e.ownerId,i=o.GetEntityByID(t).GetComponent(E);a.GetComponent(E).team=i.team,a.GetComponent(R).maxHp*=e.addMaxHp+1,a.GetComponent(R).hp=a.GetComponent(R).maxHp,a.GetComponent(R).dmg*=e.addDmg+1,a.GetComponent(ut).patrolRange=e.f5;var s=e.addSize;a.GetComponent(R).sizeScale*=s,a.GetComponent(ut).allowOutOfRangDestroy=!1,e.isControlled=!0,a.GetComponent(D).oldUICtrl=a.GetComponent(D).useUICtrl,a.GetComponent(D).useUICtrl=D.Summon,a.GetComponent(D).switchHpState=!0,e.invincible&&(n.t1=e.f15,n.t2=1)}}static BuffDispose(t,i,o,e){if(i.GetComponent(E).team=1,i.HasComponent(hp.id)&&0==o.t3){let e=i.GetComponent(hp);e.isControlled=!1,i.GetComponent(R).maxHp/=e.addMaxHp+1,i.GetComponent(R).hp=i.GetComponent(R).maxHp,i.GetComponent(R).dmg/=e.addDmg+1;var o=i.GetComponent(hp).effectId,a=e.addSize;if(i.GetComponent(R).sizeScale/=a,-1!=o){let e=t.GetEntityByID(o);e&&e.Destory()}i.RemoveComponent(hp)}}static HitedBuffDeal(e,t,i,o){}static HitBuffDeal(e,t,i,o){}}),D_=(v_.BuffName="ZombieMastery",class{static BuffInit(e,t,i,o){let a=t.GetComponent(R);o?o.buffKeepTime>i.buffKeepTime&&(i.buffKeepTime=o.buffKeepTime):(a.speedScale*=1+i.f1,t.GetComponent(F).nowState==kf.StateName&&Tf.UpdateZombieMoveAnimation(t)),console.warn("被主人遗弃的时候BuffInit",a.speedScale,i.f1)}static BuffUpdate(e,t,i,o){}static BuffDispose(e,t,i,o){let a=t.GetComponent(R);a.speedScale/=1+i.f1,t.GetComponent(F).nowState==kf.StateName&&Tf.UpdateZombieMoveAnimation(t),console.warn("被主人遗弃的时候BuffDispose",a.speedScale,i.f1)}static HitedBuffDeal(e,t,i,o){}static HitBuffDeal(e,t,i,o){}}),U_=(D_.BuffName="ZombieMad",class{static BuffInit(e,t,i,o){t.GetComponent(L).unlockPosTimes+=1,i.buffKeepTime=-1,console.warn("道具背包扩容")}static BuffUpdate(e,t,i,o){}static BuffDispose(e,t,i,o){}static HitedBuffDeal(e,t,i,o){}static HitBuffDeal(e,t,i,o){}}),L_=(U_.BuffName="ExtraBag",class{static BuffInit(e,t,i,o){o?(H.GetBuffData(o,.01),t.GetComponent(R).halfRequirement=o.f1):(H.GetBuffData(i,.01),t.GetComponent(R).halfRequirement=i.f1),i.buffKeepTime=-1,console.warn("事半BUFF：",t.GetComponent(R).halfRequirement)}static BuffUpdate(e,t,i,o){}static BuffDispose(e,t,i,o){}static HitedBuffDeal(e,t,i,o){}static HitBuffDeal(e,t,i,o){}}),B_=(L_.BuffName="HalfRequirement",class{static BuffInit(e,t,i,o){o?(H.GetBuffData(o,1),t.GetComponent(U).superReload=o.f1):(H.GetBuffData(i,1),t.GetComponent(U).superReload=i.f1),i.buffKeepTime=-1,console.warn("神奇弹夹",t.GetComponent(U).superReload)}static BuffUpdate(e,t,i,o){}static BuffDispose(e,t,i,o){}static HitedBuffDeal(e,t,i,o){}static HitBuffDeal(e,t,i,o){}}),b_=(B_.BuffName="SuperReload",class{static BuffInit(e,t,i,o){t.GetComponent(R).doubleEffectTimes=2,i.buffKeepTime=-1,console.warn("特效buff",i)}static BuffUpdate(e,t,i,o){}static BuffDispose(e,t,i,o){}static HitedBuffDeal(e,t,i,o){}static HitBuffDeal(e,t,i,o){}static AftFire(e,t,i,o){}}),A_=(b_.BuffName="DoubleEffect",class{static BuffInit(e,t,i,o){o?(H.GetBuffData(o,1),t.GetComponent(R).specialCombo=o.f1):(H.GetBuffData(i,1),t.GetComponent(R).specialCombo=i.f1),i.buffKeepTime=-1,console.warn("特殊攻击",t.GetComponent(U).superReload)}static BuffUpdate(e,t,i,o){}static BuffDispose(e,t,i,o){}static HitedBuffDeal(e,t,i,o){}static HitBuffDeal(e,t,i,o){}});A_.BuffName="SpecialCombo";var x_,T_=class{static Invoke(e,t,i,o,a){const n=this.ClassDic[o.buffName];n?n[e]&&n[e](t,i,o,a):console.warn("未找到Buff:",o.buffName)}static Register(){var t,i=[Xf,$f,t_,e_,i_,o_,di,mi,a_,zt,Wt,Zt,jt,Qt,Jt,Xt,$t,ei,Nf,Ff,Rf,Ef,ni,jc,_i,li,Hf,zf,Zf,Kf,Yc,vc,hi,yp,Qf,Jf,vp,wp,wp,s_,u_,h_,r_,m_,d_,c_,f_,qf,g_,Af,lp,__,I_,C_,G_,S_,y_,w_,v_,D_,mp,U_,L_,B_,b_,A_];for(let e=0;e<i.length;e++)t=i[e],k_.ClassDic[t.BuffName]=t,T_.ClassDic[i[e].BuffName]=i[e]}},k_=T_;function M_(t,i){if(t.HasComponent(Vt.id)){var o=t.GetComponent(Vt);for(let e=0;e<o.buffList.length;e++)k_.Invoke(i.Type,q.NowGameWorld,t,o.buffList[e],i)}}k_.ClassDic={},(G=x_=x_||{}).BuffInit="BuffInit",G.BuffUpdate="BuffUpdate",G.BuffLateUpdate="BuffLateUpdate",G.BuffDispose="BuffDispose",G.HitedBuffDeal="HitedBuffDeal",G.HitBuffDeal="HitBuffDeal",G.TryFire="TryFire",G.PreFire="PreFire",G.AftFire="AftFire",G.FireOnClick="FireOnClick",G.ChangeGun="ChangeGun",G.BeforeTriggerDmg="BeforeTriggerDmg",G.DoubleEffect="DoubleEffect";var R_=class extends e{constructor(){super(...arguments),this.MainTarget=-1,this.f1=-1,this.f2=-1}static TrigFireOnClick(e){const t=new R_;return t.Type=x_.FireOnClick,t.MainTarget=e,t}static TrigTryFire(e){const t=new R_;return t.Type=x_.TryFire,t.MainTarget=e,t}static TrigPreFire(e){const t=new R_;return t.Type=x_.PreFire,t.MainTarget=e,t}static TrigAftFire(e){const t=new R_;return t.Type=x_.AftFire,t.MainTarget=e,t}static ChangeGun(e){const t=new R_;return t.Type=x_.ChangeGun,t.MainTarget=e,t}},P_=class extends e{constructor(){super(...arguments),this.bunkerId=-1,this.isTriggerCollider=!0}},E_=class extends e{},N_=(E_.Shape_Sphere="Sphere",E_.Shape_Box="Sphere",class{static ComponentIdInit(){kt.id=0,Mt.id=1,Rt.id=2,B.id=3,Pt.id=4,M.id=5,Et.id=6,xt.id=7,Nt.id=8,Ft.id=9,Ot.id=10,Ht.id=11,Lt.id=12,Vt.id=13,R_.id=14,oi.id=15,C.id=16,Sp.id=17,pt.id=18,P_.id=19,gt.id=20,St.id=21,$i.id=22,E_.id=23,pi.id=24,ft.id=25,Np.id=26,v.id=27,bt.id=28,Zc.id=29,Ap.id=30,F.id=31,Qc.id=32,ai.id=33,D.id=34,y.id=35,bp.id=36,Gt.id=37,ig.id=38,Fp.id=39,w.id=40,_t.id=41,gi.id=42,hp.id=43,Cu.id=44,hc.id=45,fi.id=46,L.id=47,ti.id=48,dc.id=49,Pp.id=50,Kc.id=51,E.id=52,Ct.id=53,ct.id=54,Bp.id=55,Iu.id=56,R.id=57,U.id=58,ut.id=59,pu.id=60}static GetComponentJson(e,t){switch(e){case this.AutoDestoryComponent:{let e={};return e.keepTime=t.keepTime,e.igronTimeScale=t.igronTimeScale,e}case this.FollowComponent:{let e={};return e.followTargetId=t.followTargetId,e.offset=t.offset,e.followPos=t.followPos,e.followScale=t.followScale,e.followrotation=t.followrotation,e.moveTotargetOffset=t.moveTotargetOffset,e.targetOffset=t.targetOffset,e.OffsetMoveSpeed=t.OffsetMoveSpeed,e.usePosLerp=t.usePosLerp,e.posLerpSpeed=t.posLerpSpeed,e.isDestory=t.isDestory,e}case this.GroupComponent:return{};case this.Render3DComponent:{let e={};return e.spName=t.spName,e.spPath=t.spPath,e.isSpLoad=t.isSpLoad,e.isCamera=t.isCamera,e.render=t.render,e.visble=t.visble,e.banCull=t.banCull,e.updateTransfrom=t.updateTransfrom,e.updateRotation=t.updateRotation,e.updateScale=t.updateScale,e.useLerp=t.useLerp,e.useMoveCom=t.useMoveCom,e.lerpStart=t.lerpStart,e.posOffset=t.posOffset,e.saveoldMat=t.saveoldMat,e.isChildMat=t.isChildMat,e.isSkinMat=t.isSkinMat,e.matId=t.matId,e}case this.RigidBodyComponent:{let e={};return e.vec=t.vec,e.angleVec=t.angleVec,e.useGravity=t.useGravity,e.igroneTimeScale=t.igroneTimeScale,e.useBounce=t.useBounce,e.bounce=t.bounce,e.bounceY=t.bounceY,e}case this.TransformComponent:{let e={};return e.isInCameraArea=t.isInCameraArea,e.pos=t.pos,e.scale=t.scale,e.rotation=t.rotation,e}case this.AIComponent:{let e={};return e.enable=t.enable,e.aiId=t.aiId,e.StartState=t.StartState,e.thinkState=t.thinkState,e.time=t.time,e.nowFogDir=t.nowFogDir,e.likeGetItem=t.likeGetItem,e.randomShootingAngleRange=t.randomShootingAngleRange,e.randomShootingAngle=t.randomShootingAngle,e.predictiveShooting=t.predictiveShooting,e.targetEnemy=t.targetEnemy,e.searchEnemyTime=t.searchEnemyTime,e.targetItem=t.targetItem,e.hasGetItemPath=t.hasGetItemPath,e.eatBuffItemFirst=t.eatBuffItemFirst,e.escapHp=t.escapHp,e.mustFightCount=t.mustFightCount,e.escapNappChance=t.escapNappChance,e.attTimeRangeMin=t.attTimeRangeMin,e.attTimeRangeMax=t.attTimeRangeMax,e.attPathTime=t.attPathTime,e.attRotateSpeed=t.attRotateSpeed,e.attTimeCd=t.attTimeCd,e.attTime=t.attTime,e.triggerAttTime=t.triggerAttTime,e.triggerAttRange=t.triggerAttRange,e.AiCharacter=t.AiCharacter,e.triggerAtt=t.triggerAtt,e.skillTimeRangeMin=t.skillTimeRangeMin,e.skillTimeRangeMax=t.skillTimeRangeMax,e.useSkillTime=t.useSkillTime,e.skillOffset=t.skillOffset,e.stepTime=t.stepTime,e.brain=t.brain,e.randomAttTime=t.randomAttTime,e}case this.AnimatorComponent:{let e={};return e.useUpBody=t.useUpBody,e.useUpBodyClipName=t.useUpBodyClipName,e.nowUpBodyClipName=t.nowUpBodyClipName,e.layerCount=t.layerCount,e.oldRender=t.oldRender,e.nowClipName=t.nowClipName,e.isCanUseNext=t.isCanUseNext,e.useClipName=t.useClipName,e.useSpeed=t.useSpeed,e.useCross=t.useCross,e.nextUseClipName=t.nextUseClipName,e.nextSpeed=t.nextSpeed,e.nextCross=t.nextCross,e.nextPlayTime=t.nextPlayTime,e.nowSpeed=t.nowSpeed,e.animatorSpeedScale=t.animatorSpeedScale,e.banKeepTime=t.banKeepTime,e}case this.ArrowComponent:{let e={};return e.arrowId=t.arrowId,e.zhiShiBiaoId=t.zhiShiBiaoId,e.time=t.time,e}case this.ArrowHudComponent:{let e={};return e.isShow=t.isShow,e.isGetUi=t.isGetUi,e.hudShowEffect_Progress=t.hudShowEffect_Progress,e.hudShowEffect_FromPos=t.hudShowEffect_FromPos,e.showRange=t.showRange,e.scale=t.scale,e.isFirstRun=t.isFirstRun,e.type=t.type,e.iconUrl=t.iconUrl,e}case this.BackpackComponent:{let e={};return e._boltNum=t._boltNum,e._batteryNum=t._batteryNum,e}case this.BonusItemComponent:{let e={};return e.selfGetMode=t.selfGetMode,e.targetPos=t.targetPos,e.keepColliderF=t.keepColliderF,e.showTime=t.showTime,e.targetId=t.targetId,e.keepTime=t.keepTime,e.state=t.state,e}case this.BossComponent:{let e={};return e.nextCreatHp=t.nextCreatHp,e}case this.BuffComponent:return{};case this.BuffTriggerComponent:{let e={};return e.MainTarget=t.MainTarget,e.f1=t.f1,e.f2=t.f2,e}case this.BulletBuffComponent:{let e={};return e.BuffID=t.BuffID,e.keepTime=t.keepTime,e.isOnlyBuff=t.isOnlyBuff,e.F1=t.F1,e.F2=t.F2,e.F3=t.F3,e.F4=t.F4,e.B2_BuffID=t.B2_BuffID,e.B2_keepTime=t.B2_keepTime,e.B2_isOnlyBuff=t.B2_isOnlyBuff,e.B2_F1=t.B2_F1,e.B2_F2=t.B2_F2,e.B2_F3=t.B2_F3,e.B2_F4=t.B2_F4,e}case this.BulletComponent:{let e={};return e.useDmg=t.useDmg,e.isMagic=t.isMagic,e.dmg=t.dmg,e.creatorId=t.creatorId,e.keepFrame=t.keepFrame,e.useStiffness=t.useStiffness,e.useStiffnessDis=t.useStiffnessDis,e.shakeCamera=t.shakeCamera,e.useSAP=t.useSAP,e.sapTime=t.sapTime,e.boxDmg=t.boxDmg,e.whetherPenetrate=t.whetherPenetrate,e.t1=t.t1,e.hitAndDistory=t.hitAndDistory,e.hitWallDestoy=t.hitWallDestoy,e.destoryNow=t.destoryNow,e.penetrationNum=t.penetrationNum,e.hitShowEffect=t.hitShowEffect,e.hitShowEffectByBuff=t.hitShowEffectByBuff,e.hitShowEffectOffSet=t.hitShowEffectOffSet,e.guided=t.guided,e.maxAV=t.maxAV,e.attackRange=t.attackRange,e.pos=t.pos,e.guidedFilter=t.guidedFilter,e.onDistanceDmg=t.onDistanceDmg,e}case this.BulletDropComponent:{let e={};return e.targetId=t.targetId,e.moveSpeed=t.moveSpeed,e.nowValue=t.nowValue,e.height=t.height,e.isGetTarget=t.isGetTarget,e.targetPos=t.targetPos,e.isAoe=t.isAoe,e}case this.BunkerComponent:{let e={};return e.bunkerID=t.bunkerID,e.peopleNum=t.peopleNum,e.peopleMaxNum=t.peopleMaxNum,e.doorIsOpen=t.doorIsOpen,e.residentIDList=t.residentIDList,e.zombieIdList=t.zombieIdList,e.isDamage=t.isDamage,e.level=t.level,e.fencePerformanceStage=t.fencePerformanceStage,e.bunkerTriggerEcsID=t.bunkerTriggerEcsID,e}case this.BunkerDoorComponent:{let e={};return e.bunkerId=t.bunkerId,e.isTriggerCollider=t.isTriggerCollider,e}case this.BunkerDoorTriggerComponent:{let e={};return e.bunkerId=t.bunkerId,e.doorId=t.doorId,e.switchIsShow=t.switchIsShow,e}case this.BunkerTriggerComponent:{let e={};return e.bunkerId=t.bunkerId,e}case this.CameraComponent:{let e={};return e.state=t.state,e.followTargetId=t.followTargetId,e.zMoveDis=t.zMoveDis,e.zDis=t.zDis,e.feildOfView=t.feildOfView,e.useShake=t.useShake,e.shakeTime=t.shakeTime,e.shakeValue=t.shakeValue,e.slowMotionTime=t.slowMotionTime,e.bgPath=t.bgPath,e.freshPos=t.freshPos,e}case this.CannonBodyComponent:return{};case this.CarComponnent:{let e={};return e.driverId=t.driverId,e.passengerIdList=t.passengerIdList,e.offset=t.offset,e.speed=t.speed,e.seatingLimit=t.seatingLimit,e.carDoorId=t.carDoorId,e.carRuntime=t.carRuntime,e._isMoving=t._isMoving,e.isDamage=t.isDamage,e.refreshTime=t.refreshTime,e.carSmokeEffect=t.carSmokeEffect,e.onLight=t.onLight,e}case this.CarDoorComponnent:{let e={};return e.carId=t.carId,e}case this.ChainComponent:{let e={};return e.soureId=t.soureId,e.targetId=t.targetId,e.chainType=t.chainType,e}case this.ColliderComponent:{let e={};return e.enable=t.enable,e.nowMapPos=t.nowMapPos,e.oldPos=t.oldPos,e.colliderAllUnit=t.colliderAllUnit,e.colliderAllHeroUnit=t.colliderAllHeroUnit,e.haveColliderSize=t.haveColliderSize,e.colliderNoMove=t.colliderNoMove,e.useSpColliderRadius=t.useSpColliderRadius,e.isInAir=t.isInAir,e.isInFixed=t.isInFixed,e.hasColliderList=t.hasColliderList,e.hitTheWall=t.hitTheWall,e.hitWithWall=t.hitWithWall,e.isHitWall=t.isHitWall,e.hitWithBullet=t.hitWithBullet,e.colliderType=t.colliderType,e.width=t.width,e.height=t.height,e.radius=t.radius,e.angle=t.angle,e.weight=t.weight,e.isTrigger=t.isTrigger,e}case this.EquipComponent:{let e={};return e.mainWeapon=t.mainWeapon,e.mainWeaponId=t.mainWeaponId,e}case this.ExpPointComponent:{let e={};return e.targetId=t.targetId,e.dir=t.dir,e.vec=t.vec,e.speed=t.speed,e.keepTime=t.keepTime,e}case this.FogComponent:{let e={};return e.baseRange=t.baseRange,e.minRange=t.minRange,e.maxRange=t.maxRange,e.nowRange=t.nowRange,e.speed=t.speed,e.time=t.time,e}case this.FsmComponent:{let e={};return e.nowState=t.nowState,e.preState=t.preState,e.oldState=t.oldState,e.banStateChange=t.banStateChange,e.time=t.time,e.entity1Id=t.entity1Id,e.t1=t.t1,e.t2=t.t2,e.t3=t.t3,e.t4=t.t4,e.t5=t.t5,e.t6=t.t6,e.t7=t.t7,e.t8=t.t8,e.r1=t.r1,e.r2=t.r2,e.r3=t.r3,e.r4=t.r4,e.r5=t.r5,e.str1=t.str1,e.step=t.step,e.step1=t.step1,e}case this.GunSoundComponent:{let e={};return e.showLoopSound=t.showLoopSound,e.showSound=t.showSound,e.isPlay=t.isPlay,e.firstShot=t.firstShot,e.t1=t.t1,e.bulletCount=t.bulletCount,e}case this.HitInfoComponent:{let e={};return e.hitedTarget=t.hitedTarget,e.attacker=t.attacker,e.bullectId=t.bullectId,e.stiffness=t.stiffness,e.beforeTriggerDmg=t.beforeTriggerDmg,e.dmg=t.dmg,e.olddmg=t.olddmg,e.dmgType=t.dmgType,e.toDeath=t.toDeath,e}case this.HpHudComponent:{let e={};return e.banHud=t.banHud,e.nodeName=t.nodeName,e.isShow=t.isShow,e.isGetUi=t.isGetUi,e.switchHpState=t.switchHpState,e.useUICtrl=t.useUICtrl,e.oldUICtrl=t.oldUICtrl,e.playerName=t.playerName,e.chinaState=t.chinaState,e.color=t.color,e.hp=t.hp,e.maxhp=t.maxhp,e.level=t.level,e.exp=t.exp,e.maxExp=t.maxExp,e.freshUI=t.freshUI,e.red=t.red,e.isRedName=t.isRedName,e.bulletLoadCD=t.bulletLoadCD,e.reloadState=t.reloadState,e.playReloadAni=t.playReloadAni,e.singleShotLoading=t.singleShotLoading,e.singleShotReloadState=t.singleShotReloadState,e.useLerp=t.useLerp,e.bulletCount=t.bulletCount,e.nowBulletCount=t.nowBulletCount,e.showChangedHp=t.showChangedHp,e.isChangeGun=t.isChangeGun,e.hpChangeUIOffsetPos=t.hpChangeUIOffsetPos,e}case this.ItemComponent:{let e={};return e.itemID=t.itemID,e.hp=t.hp,e.maxhp=t.maxhp,e.wallWillCreatChance=t.wallWillCreatChance,e.wallWillCreatItem=t.wallWillCreatItem,e.willGetMashRoom=t.willGetMashRoom,e.willGetExItem=t.willGetExItem,e.wallLeftTime=t.wallLeftTime,e.speed=t.speed,e.addExp=t.addExp,e.type=t.type,e.chestLevel=t.chestLevel,e.addBuff=t.addBuff,e.effect=t.effect,e.effectId=t.effectId,e.buffKeepTime=t.buffKeepTime,e.isOnlyBuff=t.isOnlyBuff,e.f1=t.f1,e.f2=t.f2,e.f3=t.f3,e.f4=t.f4,e.createId=t.createId,e.ItemTriggerId=t.ItemTriggerId,e.aimedPriority=t.aimedPriority,e}case this.ItemCreatComponent:{let e={};return e.nowTime=t.nowTime,e.oldTime=t.oldTime,e.nowItemId=t.nowItemId,e}case this.ItemTriggerComponent:return{};case this.LinkComponent:{let e={};return e.LinkEffectId=t.LinkEffectId,e.LinkEffectName=t.LinkEffectName,e.startPlayerId=t.startPlayerId,e.overPlayerId=t.overPlayerId,e}case this.MergeComponent:{let e={};return e.nowState=t.nowState,e.oldState=t.oldState,e.xSize=t.xSize,e.ySize=t.ySize,e.itemWidth=t.itemWidth,e.itemHeight=t.itemHeight,e.xOffsetByX=t.xOffsetByX,e.mapList=t.mapList,e.nowChooseIndex=t.nowChooseIndex,e.nowPos=t.nowPos,e.nowPixelPos=t.nowPixelPos,e.buyId=t.buyId,e.sell=t.sell,e.dragEquipment=t.dragEquipment,e.showAddCoinTime=t.showAddCoinTime,e.useMergeGuide=t.useMergeGuide,e.mergeGuideTime=t.mergeGuideTime,e.freshToNewMapList=t.freshToNewMapList,e.useDropBox=t.useDropBox,e.useDropLeftTime=t.useDropLeftTime,e.dropBoxMaxCount=t.dropBoxMaxCount,e.useDropTimeMin=t.useDropTimeMin,e.useDropTimeMax=t.useDropTimeMax,e.dropnNomalSubLevel=t.dropnNomalSubLevel,e.dropnUpGradeChance=t.dropnUpGradeChance,e.dropnUpAddCount=t.dropnUpAddCount,e.dropnUpAddLevel=t.dropnUpAddLevel,e.dropnSuperAddLevel=t.dropnSuperAddLevel,e.nowWillUpgradeIndex=t.nowWillUpgradeIndex,e.willUpgradeIndex=t.willUpgradeIndex,e.willUpgradeWeapon=t.willUpgradeWeapon,e.trigerUpgrade=t.trigerUpgrade,e.addDropBoxNowCount=t.addDropBoxNowCount,e}case this.MoveComponent:{let e={};return e.banDirCtrl=t.banDirCtrl,e.banDirRotationCtrl=t.banDirRotationCtrl,e.dir=t.dir,e.dir2FollowDir=t.dir2FollowDir,e.nowIsDragShootState=t.nowIsDragShootState,e.dir2=t.dir2,e.speed=t.speed,e.vec=t.vec,e.yRotationFollow=t.yRotationFollow,e.speedScale=t.speedScale,e.rotationLerp=t.rotationLerp,e}case this.MySelfComponent:return{};case this.NavigatorComponent:{let e={};return e.enable=t.enable,e.path=t.path,e.targetPos=t.targetPos,e.needFindPath=t.needFindPath,e.isArrive=t.isArrive,e.findPathFailed=t.findPathFailed,e.isPathing=t.isPathing,e}case this.PuppetComponent:{let e={};return e.ownerId=t.ownerId,e.distanceFromOwner=t.distanceFromOwner,e.f2=t.f2,e.f5=t.f5,e.f7=t.f7,e.f15=t.f15,e.f16=t.f16,e.invincible=t.invincible,e.effectId=t.effectId,e.isControlled=t.isControlled,e}case this.QuestComponent:return{};case this.SakeCameraComponent:{let e={};return e.shakeValue=t.shakeValue,e.shakeTime=t.shakeTime,e}case this.ShadowComponent:{let e={};return e.shadowTargetId=t.shadowTargetId,e.size=t.size,e.render=t.render,e.height=t.height,e}case this.SkillComponent:{let e={};return e.skillCdScale=t.skillCdScale,e.skillDmgScale=t.skillDmgScale,e.triggerSkllId=t.triggerSkllId,e.banTrigger=t.banTrigger,e.skillDrapEffectId=t.skillDrapEffectId,e.drapSkillId=t.drapSkillId,e.unlockPassiveList=t.unlockPassiveList,e.unlockItemList=t.unlockItemList,e}case this.SkinComponent:{let e={};return e.BodySkin=t.BodySkin,e.WeaponSkin=t.WeaponSkin,e.weaponId=t.weaponId,e.weaponType=t.weaponType,e.skinId=t.skinId,e.skinSpEffect=t.skinSpEffect,e.skinSpEffectList=t.skinSpEffectList,e.skinSpEffect_F1=t.skinSpEffect_F1,e.skinSpEffect_F2=t.skinSpEffect_F2,e.skinSpEffect_F3=t.skinSpEffect_F3,e.skinSpEffect_F4=t.skinSpEffect_F4,e.skinSpEffect_F5=t.skinSpEffect_F5,e.skinSpEffect_F6=t.skinSpEffect_F6,e.skinSpEffect_F7=t.skinSpEffect_F7,e.weaponSkinID=t.weaponSkinID,e.weaponSkinSpEffect=t.weaponSkinSpEffect,e.weaponSkinSpEffect_F1=t.weaponSkinSpEffect_F1,e.weaponSkinSpEffect_F2=t.weaponSkinSpEffect_F2,e.weaponSkinSpEffect_F3=t.weaponSkinSpEffect_F3,e.weaponSkinSpEffect_F4=t.weaponSkinSpEffect_F4,e}case this.SoundComponent:{let e={};return e.showSound=t.showSound,e.destorySound=t.destorySound,e.usePos=t.usePos,e.delay=t.delay,e.optimize=t.optimize,e}case this.SummonComponent:{let e={};return e.puppetZombies=t.puppetZombies,e.maximum=t.maximum,e}case this.TagComponent:{let e={};return e.tag=t.tag,e}case this.TeamComponent:{let e={};return e.netId=t.netId,e.team=t.team,e}case this.TentComponent:return{};case this.TriggerComponent:{let e={};return e.enableCollider=t.enableCollider,e}case this.TriggerHudComponent:{let e={};return e.banHud=t.banHud,e.nodeName=t.nodeName,e.isShow=t.isShow,e.isGetUi=t.isGetUi,e.useUICtrl=t.useUICtrl,e.useLerp=t.useLerp,e}case this.TurretComponent:{let e={};return e.t1=t.t1,e.attCD=t.attCD,e.amg=t.amg,e}case this.UnitComponent:{let e={};return e.canGetItem=t.canGetItem,e.canLevelUp=t.canLevelUp,e.baseSize=t.baseSize,e.sizeScale=t.sizeScale,e.invisible=t.invisible,e.isTriggerDeathLaser=t.isTriggerDeathLaser,e.hp=t.hp,e.maxHp=t.maxHp,e.exp=t.exp,e.oldexp=t.oldexp,e.maxExp=t.maxExp,e.nowLevel=t.nowLevel,e.dmg=t.dmg,e.addDmgLevel=t.addDmgLevel,e.boxDmg=t.boxDmg,e.basedmg=t.basedmg,e.attSpeedScale=t.attSpeedScale,e.suckBlood=t.suckBlood,e.critPer=t.critPer,e.dodgePer=t.dodgePer,e.parryChance=t.parryChance,e.heal=t.heal,e.healTime=t.healTime,e.speed=t.speed,e.speedScale=t.speedScale,e._speedScale=t._speedScale,e.attackInterval=t.attackInterval,e.attackTime=t.attackTime,e.useInput=t.useInput,e.triggerAtt=t.triggerAtt,e.attBtnState=t.attBtnState,e.skillBtnState=t.skillBtnState,e.attSoundIsPlay=t.attSoundIsPlay,e.isDead=t.isDead,e.anyScale=t.anyScale,e.isPlaySetPosOffSkill=t.isPlaySetPosOffSkill,e.hitRecovery=t.hitRecovery,e.willRandomSkill=t.willRandomSkill,e.upgRadeList=t.upgRadeList,e.upRadeCount=t.upRadeCount,e.chooseUpGrade=t.chooseUpGrade,e.getItem=t.getItem,e.superLevelUp=t.superLevelUp,e.intelligency=t.intelligency,e.needUIFreshChoose=t.needUIFreshChoose,e.skillState=t.skillState,e.invincible=t.invincible,e.superArmor=t.superArmor,e.noSap=t.noSap,e.noCtrlEffect=t.noCtrlEffect,e.fogHitedTimes=t.fogHitedTimes,e.dizz=t.dizz,e.banAtt=t.banAtt,e.rebound=t.rebound,e.deadState=t.deadState,e.reviveTime=t.reviveTime,e.turnRotation=t.turnRotation,e.areYouDriving=t.areYouDriving,e}case this.WeaponComponent:{let e={};return e.nowAct=t.nowAct,e.maxAct=t.maxAct,e.comboTime=t.comboTime,e.gunMode=t.gunMode,e.isAR=t.isAR,e.shotCD=t.shotCD,e.shotCDTime=t.shotCDTime,e.shotCDScale=t.shotCDScale,e.bulletCount=t.bulletCount,e.nowBulletCount=t.nowBulletCount,e.consecutiveShots=t.consecutiveShots,e.consecutiveShotsTimes=t.consecutiveShotsTimes,e._bulletLoadCD=t._bulletLoadCD,e.bulletLoadTime=t.bulletLoadTime,e.ReloadTimeScale=t.ReloadTimeScale,e.Magazine=t.Magazine,e.recoilTime=t.recoilTime,e.bullet0=t.bullet0,e.bullet0Dis=t.bullet0Dis,e.bullet0height=t.bullet0height,e.act0Clip=t.act0Clip,e.act0Time=t.act0Time,e.act0Step1Time=t.act0Step1Time,e.act0Step2Time=t.act0Step2Time,e.act0Step3Time=t.act0Step3Time,e.att0Time=t.att0Time,e.superArmor0=t.superArmor0,e.singleShotLoading=t.singleShotLoading,e._singleShotLoadingCD=t._singleShotLoadingCD,e.singleShotLoadingTime=t.singleShotLoadingTime,e.singleShotLoadingCDTime=t.singleShotLoadingCDTime,e.bulletsFiredNumbers=t.bulletsFiredNumbers,e.attackRangeId=t.attackRangeId,e.attSpecialRangeId=t.attSpecialRangeId,e.readOnlyAttackRange=t.readOnlyAttackRange,e.attackRange=t.attackRange,e.isSniperRifle=t.isSniperRifle,e.sniperRifleattRange=t.sniperRifleattRange,e.randomShootingAngle=t.randomShootingAngle,e.bulletPathAimingEffect=t.bulletPathAimingEffect,e.aimingSpecialEffectId=t.aimingSpecialEffectId,e.bullet1=t.bullet1,e.bullet1Dis=t.bullet1Dis,e.bullet1height=t.bullet1height,e.act1Clip=t.act1Clip,e.act1Time=t.act1Time,e.act1Step1Time=t.act1Step1Time,e.act1Step2Time=t.act1Step2Time,e.act1Step3Time=t.act1Step3Time,e.att1Time=t.att1Time,e.superArmor1=t.superArmor1,e.bullet2=t.bullet2,e.bullet2Dis=t.bullet2Dis,e.bullet2height=t.bullet2height,e.act2Clip=t.act2Clip,e.act2Time=t.act2Time,e.act2Step1Time=t.act2Step1Time,e.act2Step2Time=t.act2Step2Time,e.act2Step3Time=t.act2Step3Time,e.att2Time=t.att2Time,e.superArmor2=t.superArmor2,e.idleClip=t.idleClip,e.runClip=t.runClip,e.aimingTargetId=t.aimingTargetId,e.penetratingShot=t.penetratingShot,e.splittingShot=t.splittingShot,e.bulletScatter=t.bulletScatter,e.bulletSpeed=t.bulletSpeed,e.bulletShotCounter=t.bulletShotCounter,e}case this.ZombieComponent:{let e={};return e.enable=t.enable,e.StartState=t.StartState,e.thinkState=t.thinkState,e.time=t.time,e.brain=t.brain,e.dir=t.dir,e.enemyId=t.enemyId,e.patrolRange=t.patrolRange,e.attPathTime=t.attPathTime,e.searchEnemyTime=t.searchEnemyTime,e.attTimeCd=t.attTimeCd,e.attAnimTime=t.attAnimTime,e.triggerAttTime=t.triggerAttTime,e.triggerAttRange=t.triggerAttRange,e.allowOutOfRangDestroy=t.allowOutOfRangDestroy,e.isRangedUnit=t.isRangedUnit,e.killExp=t.killExp,e.zombieID=t.zombieID,e.freshMoveAnimCD=t.freshMoveAnimCD,e.useSkillTime=t.useSkillTime,e.skillTimeRangeMin=t.skillTimeRangeMin,e.skillTimeRangeMax=t.skillTimeRangeMax,e.skillOffset=t.skillOffset,e.viewRange_Day=t.viewRange_Day,e.viewRange_Night=t.viewRange_Night,e.viewRange_BloodNight=t.viewRange_BloodNight,e.angryChaseRangeRatio=t.angryChaseRangeRatio,e.angryChaseSpeedRatio=t.angryChaseSpeedRatio,e.angryChaseCallRange=t.angryChaseCallRange,e.hasTriggerAngryChase=t.hasTriggerAngryChase,e.bulletScale=t.bulletScale,e.bulletOffsetZ=t.bulletOffsetZ,e}case this.ZombieFactoryComponent:{let e={};return e.nowRemainZombie=t.nowRemainZombie,e.initCreateZombieRemainCDTime=t.initCreateZombieRemainCDTime,e.initActiveZombieRemainCDTime=t.initActiveZombieRemainCDTime,e.level=t.level,e.type=t.type,e.isUnderAttacked=t.isUnderAttacked,e.orginMat_model1=t.orginMat_model1,e.orginMat_model2=t.orginMat_model2,e.orginMat_danger=t.orginMat_danger,e}}return null}static LoadComponentJson(e,i,o){switch(e){case this.AutoDestoryComponent:{let e=i.GetComponent(kt);e.keepTime=o.keepTime,e.igronTimeScale=o.igronTimeScale}break;case this.FollowComponent:{let e=i.GetComponent(Mt);e.followTargetId=o.followTargetId,e.offset=new Laya.Vector3(o.offset.x,o.offset.y,o.offset.z),e.followPos=o.followPos,e.followScale=o.followScale,e.followrotation=o.followrotation,e.moveTotargetOffset=o.moveTotargetOffset,e.targetOffset=new Laya.Vector3(o.targetOffset.x,o.targetOffset.y,o.targetOffset.z),e.OffsetMoveSpeed=o.OffsetMoveSpeed,e.usePosLerp=o.usePosLerp,e.posLerpSpeed=o.posLerpSpeed,e.isDestory=o.isDestory}break;case this.GroupComponent:i.GetComponent(Rt);break;case this.Render3DComponent:{let e=i.GetComponent(B);e.spName=o.spName,e.spPath=o.spPath,e.isSpLoad=o.isSpLoad,e.isCamera=o.isCamera,e.render=o.render,e.visble=o.visble,e.banCull=o.banCull,e.updateTransfrom=o.updateTransfrom,e.updateRotation=o.updateRotation,e.updateScale=o.updateScale,e.useLerp=o.useLerp,e.useMoveCom=o.useMoveCom,e.lerpStart=o.lerpStart,e.posOffset=new Laya.Vector3(o.posOffset.x,o.posOffset.y,o.posOffset.z),e.saveoldMat=o.saveoldMat,e.isChildMat=o.isChildMat,e.isSkinMat=o.isSkinMat,e.matId=o.matId}break;case this.RigidBodyComponent:{let e=i.GetComponent(Pt);e.vec=new Laya.Vector3(o.vec.x,o.vec.y,o.vec.z),e.angleVec=new Laya.Vector3(o.angleVec.x,o.angleVec.y,o.angleVec.z),e.useGravity=o.useGravity,e.igroneTimeScale=o.igroneTimeScale,e.useBounce=o.useBounce,e.bounce=o.bounce,e.bounceY=o.bounceY}break;case this.TransformComponent:{let e=i.GetComponent(M);e.isInCameraArea=o.isInCameraArea,e.pos=new Laya.Vector3(o.pos.x,o.pos.y,o.pos.z),e.scale=new Laya.Vector3(o.scale.x,o.scale.y,o.scale.z),e.rotation=new Laya.Vector3(o.rotation.x,o.rotation.y,o.rotation.z)}break;case this.AIComponent:{let e=i.GetComponent(Et);e.enable=o.enable,e.aiId=o.aiId,e.StartState=o.StartState,e.thinkState=o.thinkState,e.time=o.time,e.nowFogDir=o.nowFogDir,e.likeGetItem=o.likeGetItem,e.randomShootingAngleRange=o.randomShootingAngleRange,e.randomShootingAngle=o.randomShootingAngle,e.predictiveShooting=o.predictiveShooting,e.targetEnemy=o.targetEnemy,e.searchEnemyTime=o.searchEnemyTime,e.targetItem=o.targetItem,e.hasGetItemPath=o.hasGetItemPath,e.eatBuffItemFirst=o.eatBuffItemFirst,e.escapHp=o.escapHp,e.mustFightCount=o.mustFightCount,e.escapNappChance=o.escapNappChance,e.attTimeRangeMin=o.attTimeRangeMin,e.attTimeRangeMax=o.attTimeRangeMax,e.attPathTime=o.attPathTime,e.attRotateSpeed=o.attRotateSpeed,e.attTimeCd=o.attTimeCd,e.attTime=o.attTime,e.triggerAttTime=o.triggerAttTime,e.triggerAttRange=o.triggerAttRange,e.AiCharacter=o.AiCharacter,e.triggerAtt=o.triggerAtt,e.skillTimeRangeMin=o.skillTimeRangeMin,e.skillTimeRangeMax=o.skillTimeRangeMax,e.useSkillTime=o.useSkillTime,e.skillOffset=o.skillOffset,e.stepTime=o.stepTime,e.brain=o.brain,e.randomAttTime=o.randomAttTime}break;case this.AnimatorComponent:{let e=i.GetComponent(xt);e.useUpBody=o.useUpBody,e.useUpBodyClipName=o.useUpBodyClipName,e.nowUpBodyClipName=o.nowUpBodyClipName,e.layerCount=o.layerCount,e.oldRender=o.oldRender,e.nowClipName=o.nowClipName,e.isCanUseNext=o.isCanUseNext,e.useClipName=o.useClipName,e.useSpeed=o.useSpeed,e.useCross=o.useCross,e.nextUseClipName=o.nextUseClipName,e.nextSpeed=o.nextSpeed,e.nextCross=o.nextCross,e.nextPlayTime=o.nextPlayTime,e.nowSpeed=o.nowSpeed,e.animatorSpeedScale=o.animatorSpeedScale,e.banKeepTime=o.banKeepTime}break;case this.ArrowComponent:{let e=i.GetComponent(Nt);e.arrowId=o.arrowId,e.zhiShiBiaoId=o.zhiShiBiaoId,e.time=o.time}break;case this.ArrowHudComponent:{let e=i.GetComponent(Ft);e.isShow=o.isShow,e.isGetUi=o.isGetUi,e.hudShowEffect_Progress=o.hudShowEffect_Progress,e.hudShowEffect_FromPos=new Laya.Vector2(o.hudShowEffect_FromPos.x,o.hudShowEffect_FromPos.y),e.showRange=o.showRange,e.scale=o.scale,e.isFirstRun=o.isFirstRun,e.type=o.type,e.iconUrl=o.iconUrl}break;case this.BackpackComponent:{let e=i.GetComponent(Ot);e._boltNum=o._boltNum,e._batteryNum=o._batteryNum}break;case this.BonusItemComponent:{let e=i.GetComponent(Ht);e.selfGetMode=o.selfGetMode,e.targetPos=new Laya.Vector3(o.targetPos.x,o.targetPos.y,o.targetPos.z),e.keepColliderF=o.keepColliderF,e.showTime=o.showTime,e.targetId=o.targetId,e.keepTime=o.keepTime,e.state=o.state}break;case this.BossComponent:i.GetComponent(Lt).nextCreatHp=o.nextCreatHp;break;case this.BuffComponent:i.GetComponent(Vt);break;case this.BuffTriggerComponent:{let e=i.GetComponent(R_);e.MainTarget=o.MainTarget,e.f1=o.f1,e.f2=o.f2}break;case this.BulletBuffComponent:{let e=i.GetComponent(oi);e.BuffID=o.BuffID,e.keepTime=o.keepTime,e.isOnlyBuff=o.isOnlyBuff,e.F1=o.F1,e.F2=o.F2,e.F3=o.F3,e.F4=o.F4,e.B2_BuffID=o.B2_BuffID,e.B2_keepTime=o.B2_keepTime,e.B2_isOnlyBuff=o.B2_isOnlyBuff,e.B2_F1=o.B2_F1,e.B2_F2=o.B2_F2,e.B2_F3=o.B2_F3,e.B2_F4=o.B2_F4}break;case this.BulletComponent:{let e=i.GetComponent(C);e.useDmg=o.useDmg,e.isMagic=o.isMagic,e.dmg=o.dmg,e.creatorId=o.creatorId,e.keepFrame=o.keepFrame,e.useStiffness=o.useStiffness,e.useStiffnessDis=o.useStiffnessDis,e.shakeCamera=o.shakeCamera,e.useSAP=o.useSAP,e.sapTime=o.sapTime,e.boxDmg=o.boxDmg,e.whetherPenetrate=o.whetherPenetrate,e.t1=o.t1,e.hitAndDistory=o.hitAndDistory,e.hitWallDestoy=o.hitWallDestoy,e.destoryNow=o.destoryNow,e.penetrationNum=o.penetrationNum,e.hitShowEffect=o.hitShowEffect,e.hitShowEffectByBuff=o.hitShowEffectByBuff,e.hitShowEffectOffSet=o.hitShowEffectOffSet,e.guided=o.guided,e.maxAV=o.maxAV,e.attackRange=o.attackRange,e.pos=new Laya.Vector3(o.pos.x,o.pos.y,o.pos.z),e.guidedFilter=o.guidedFilter,e.onDistanceDmg=o.onDistanceDmg}break;case this.BulletDropComponent:{let e=i.GetComponent(Sp);e.targetId=o.targetId,e.moveSpeed=o.moveSpeed,e.nowValue=o.nowValue,e.height=o.height,e.isGetTarget=o.isGetTarget,e.targetPos=new Laya.Vector3(o.targetPos.x,o.targetPos.y,o.targetPos.z),e.isAoe=o.isAoe}break;case this.BunkerComponent:{let e=i.GetComponent(pt);e.bunkerID=o.bunkerID,e.peopleNum=o.peopleNum,e.peopleMaxNum=o.peopleMaxNum,e.doorIsOpen=o.doorIsOpen,e.residentIDList=o.residentIDList,e.zombieIdList=o.zombieIdList,e.isDamage=o.isDamage,e.level=o.level,e.fencePerformanceStage=o.fencePerformanceStage,e.bunkerTriggerEcsID=o.bunkerTriggerEcsID}break;case this.BunkerDoorComponent:{let e=i.GetComponent(P_);e.bunkerId=o.bunkerId,e.isTriggerCollider=o.isTriggerCollider}break;case this.BunkerDoorTriggerComponent:{let e=i.GetComponent(gt);e.bunkerId=o.bunkerId,e.doorId=o.doorId,e.switchIsShow=o.switchIsShow}break;case this.BunkerTriggerComponent:i.GetComponent(St).bunkerId=o.bunkerId;break;case this.CameraComponent:{let e=i.GetComponent($i);e.state=o.state,e.followTargetId=o.followTargetId,e.zMoveDis=o.zMoveDis,e.zDis=o.zDis,e.feildOfView=o.feildOfView,e.useShake=o.useShake,e.shakeTime=o.shakeTime,e.shakeValue=o.shakeValue,e.slowMotionTime=o.slowMotionTime,e.bgPath=o.bgPath,e.freshPos=o.freshPos}break;case this.CannonBodyComponent:i.GetComponent(E_);break;case this.CarComponnent:{let e=i.GetComponent(pi);e.driverId=o.driverId,e.passengerIdList=o.passengerIdList,e.offset=new Laya.Vector3(o.offset.x,o.offset.y,o.offset.z),e.speed=o.speed,e.seatingLimit=o.seatingLimit,e.carDoorId=o.carDoorId,e.carRuntime=o.carRuntime,e._isMoving=o._isMoving,e.isDamage=o.isDamage,e.refreshTime=o.refreshTime,e.carSmokeEffect=o.carSmokeEffect,e.onLight=o.onLight}break;case this.CarDoorComponnent:i.GetComponent(ft).carId=o.carId;break;case this.ChainComponent:{let e=i.GetComponent(Np);e.soureId=o.soureId,e.targetId=o.targetId,e.chainType=o.chainType}break;case this.ColliderComponent:{let e=i.GetComponent(v);e.enable=o.enable,e.nowMapPos=new Laya.Vector2(o.nowMapPos.x,o.nowMapPos.y),e.oldPos=new Laya.Vector3(o.oldPos.x,o.oldPos.y,o.oldPos.z),e.colliderAllUnit=o.colliderAllUnit,e.colliderAllHeroUnit=o.colliderAllHeroUnit,e.haveColliderSize=o.haveColliderSize,e.colliderNoMove=o.colliderNoMove,e.useSpColliderRadius=o.useSpColliderRadius,e.isInAir=o.isInAir,e.isInFixed=o.isInFixed,e.hasColliderList=o.hasColliderList,e.hitTheWall=o.hitTheWall,e.hitWithWall=o.hitWithWall,e.isHitWall=o.isHitWall,e.hitWithBullet=o.hitWithBullet,e.colliderType=o.colliderType,e.width=o.width,e.height=o.height,e.radius=o.radius,e.angle=o.angle,e.weight=o.weight,e.isTrigger=o.isTrigger}break;case this.EquipComponent:{let e=i.GetComponent(bt);e.mainWeapon=o.mainWeapon,e.mainWeaponId=o.mainWeaponId}break;case this.ExpPointComponent:{let e=i.GetComponent(Zc);e.targetId=o.targetId,e.dir=new Laya.Vector3(o.dir.x,o.dir.y,o.dir.z),e.vec=new Laya.Vector3(o.vec.x,o.vec.y,o.vec.z),e.speed=o.speed,e.keepTime=o.keepTime}break;case this.FogComponent:{let e=i.GetComponent(Ap);e.baseRange=o.baseRange,e.minRange=o.minRange,e.maxRange=o.maxRange,e.nowRange=o.nowRange,e.speed=o.speed,e.time=o.time}break;case this.FsmComponent:{let e=i.GetComponent(F);e.nowState=o.nowState,e.preState=o.preState,e.oldState=o.oldState,e.banStateChange=o.banStateChange,e.time=o.time,e.entity1Id=o.entity1Id,e.t1=o.t1,e.t2=o.t2,e.t3=o.t3,e.t4=o.t4,e.t5=o.t5,e.t6=o.t6,e.t7=o.t7,e.t8=o.t8,e.r1=o.r1,e.r2=o.r2,e.r3=o.r3,e.r4=o.r4,e.r5=o.r5,e.str1=o.str1,e.step=o.step,e.step1=o.step1}break;case this.GunSoundComponent:{let e=i.GetComponent(Qc);e.showLoopSound=o.showLoopSound,e.showSound=o.showSound,e.isPlay=o.isPlay,e.firstShot=o.firstShot,e.t1=o.t1,e.bulletCount=o.bulletCount}break;case this.HitInfoComponent:{let e=i.GetComponent(ai);e.hitedTarget=o.hitedTarget,e.attacker=o.attacker,e.bullectId=o.bullectId,e.stiffness=o.stiffness,e.beforeTriggerDmg=o.beforeTriggerDmg,e.dmg=o.dmg,e.olddmg=o.olddmg,e.dmgType=o.dmgType,e.toDeath=o.toDeath}break;case this.HpHudComponent:{let e=i.GetComponent(D);e.banHud=o.banHud,e.nodeName=o.nodeName,e.isShow=o.isShow,e.isGetUi=o.isGetUi,e.switchHpState=o.switchHpState,e.useUICtrl=o.useUICtrl,e.oldUICtrl=o.oldUICtrl,e.playerName=o.playerName,e.chinaState=o.chinaState,e.color=o.color,e.hp=o.hp,e.maxhp=o.maxhp,e.level=o.level,e.exp=o.exp,e.maxExp=o.maxExp,e.freshUI=o.freshUI,e.red=o.red,e.isRedName=o.isRedName,e.bulletLoadCD=o.bulletLoadCD,e.reloadState=o.reloadState,e.playReloadAni=o.playReloadAni,e.singleShotLoading=o.singleShotLoading,e.singleShotReloadState=o.singleShotReloadState,e.useLerp=o.useLerp,e.bulletCount=o.bulletCount,e.nowBulletCount=o.nowBulletCount,e.showChangedHp=o.showChangedHp,e.isChangeGun=o.isChangeGun,e.hpChangeUIOffsetPos=new Laya.Vector3(o.hpChangeUIOffsetPos.x,o.hpChangeUIOffsetPos.y,o.hpChangeUIOffsetPos.z)}break;case this.ItemComponent:{let e=i.GetComponent(y);e.itemID=o.itemID,e.hp=o.hp,e.maxhp=o.maxhp,e.wallWillCreatChance=o.wallWillCreatChance,e.wallWillCreatItem=o.wallWillCreatItem,e.willGetMashRoom=o.willGetMashRoom,e.willGetExItem=o.willGetExItem,e.wallLeftTime=o.wallLeftTime,e.speed=o.speed,e.addExp=o.addExp,e.type=o.type,e.chestLevel=o.chestLevel,e.addBuff=o.addBuff,e.effect=o.effect,e.effectId=o.effectId,e.buffKeepTime=o.buffKeepTime,e.isOnlyBuff=o.isOnlyBuff,e.f1=o.f1,e.f2=o.f2,e.f3=o.f3,e.f4=o.f4,e.createId=o.createId,e.ItemTriggerId=o.ItemTriggerId,e.aimedPriority=o.aimedPriority}break;case this.ItemCreatComponent:{let e=i.GetComponent(bp);e.nowTime=o.nowTime,e.oldTime=o.oldTime,e.nowItemId=o.nowItemId}break;case this.ItemTriggerComponent:i.GetComponent(Gt);break;case this.LinkComponent:{let e=i.GetComponent(ig);e.LinkEffectId=o.LinkEffectId,e.LinkEffectName=o.LinkEffectName,e.startPlayerId=o.startPlayerId,e.overPlayerId=o.overPlayerId}break;case this.MergeComponent:{let e=i.GetComponent(Fp);e.nowState=o.nowState,e.oldState=o.oldState,e.xSize=o.xSize,e.ySize=o.ySize,e.itemWidth=o.itemWidth,e.itemHeight=o.itemHeight,e.xOffsetByX=o.xOffsetByX,e.mapList=o.mapList,e.nowChooseIndex=o.nowChooseIndex,e.nowPos=new Laya.Vector2(o.nowPos.x,o.nowPos.y),e.nowPixelPos=new Laya.Vector2(o.nowPixelPos.x,o.nowPixelPos.y),e.buyId=o.buyId,e.sell=o.sell,e.dragEquipment=o.dragEquipment,e.showAddCoinTime=o.showAddCoinTime,e.useMergeGuide=o.useMergeGuide,e.mergeGuideTime=o.mergeGuideTime,e.freshToNewMapList=o.freshToNewMapList,e.useDropBox=o.useDropBox,e.useDropLeftTime=o.useDropLeftTime,e.dropBoxMaxCount=o.dropBoxMaxCount,e.useDropTimeMin=o.useDropTimeMin,e.useDropTimeMax=o.useDropTimeMax,e.dropnNomalSubLevel=o.dropnNomalSubLevel,e.dropnUpGradeChance=o.dropnUpGradeChance,e.dropnUpAddCount=o.dropnUpAddCount,e.dropnUpAddLevel=o.dropnUpAddLevel,e.dropnSuperAddLevel=o.dropnSuperAddLevel,e.nowWillUpgradeIndex=o.nowWillUpgradeIndex,e.willUpgradeIndex=o.willUpgradeIndex,e.willUpgradeWeapon=o.willUpgradeWeapon,e.trigerUpgrade=o.trigerUpgrade,e.addDropBoxNowCount=o.addDropBoxNowCount}break;case this.MoveComponent:{let e=i.GetComponent(w);e.banDirCtrl=o.banDirCtrl,e.banDirRotationCtrl=o.banDirRotationCtrl,e.dir=new Laya.Vector3(o.dir.x,o.dir.y,o.dir.z),e.dir2FollowDir=o.dir2FollowDir,e.nowIsDragShootState=o.nowIsDragShootState,e.dir2=new Laya.Vector3(o.dir2.x,o.dir2.y,o.dir2.z),e.speed=o.speed,e.vec=new Laya.Vector3(o.vec.x,o.vec.y,o.vec.z),e.yRotationFollow=o.yRotationFollow,e.speedScale=o.speedScale,e.rotationLerp=o.rotationLerp}break;case this.MySelfComponent:i.GetComponent(_t);break;case this.NavigatorComponent:{let t=i.GetComponent(gi);t.enable=o.enable;for(let e=0;e<o.path.lenght;e++)t.path.push(new Laya.Vector3(o.path[e].x,o.path[e].y,o.path[e].z));t.targetPos=new Laya.Vector3(o.targetPos.x,o.targetPos.y,o.targetPos.z),t.needFindPath=o.needFindPath,t.isArrive=o.isArrive,t.findPathFailed=o.findPathFailed,t.isPathing=o.isPathing}break;case this.PuppetComponent:{let e=i.GetComponent(hp);e.ownerId=o.ownerId,e.distanceFromOwner=o.distanceFromOwner,e.f2=o.f2,e.f5=o.f5,e.f7=o.f7,e.f15=o.f15,e.f16=o.f16,e.invincible=o.invincible,e.effectId=o.effectId,e.isControlled=o.isControlled}break;case this.QuestComponent:i.GetComponent(Cu);break;case this.SakeCameraComponent:{let e=i.GetComponent(hc);e.shakeValue=o.shakeValue,e.shakeTime=o.shakeTime}break;case this.ShadowComponent:{let e=i.GetComponent(fi);e.shadowTargetId=o.shadowTargetId,e.size=o.size,e.render=o.render,e.height=o.height}break;case this.SkillComponent:{let e=i.GetComponent(L);e.skillCdScale=o.skillCdScale,e.skillDmgScale=o.skillDmgScale,e.triggerSkllId=o.triggerSkllId,e.banTrigger=o.banTrigger,e.skillDrapEffectId=o.skillDrapEffectId,e.drapSkillId=o.drapSkillId,e.unlockPassiveList=o.unlockPassiveList,e.unlockItemList=o.unlockItemList}break;case this.SkinComponent:{let e=i.GetComponent(ti);e.BodySkin=o.BodySkin,e.WeaponSkin=o.WeaponSkin,e.weaponId=o.weaponId,e.weaponType=o.weaponType,e.skinId=o.skinId,e.skinSpEffect=o.skinSpEffect,e.skinSpEffectList=o.skinSpEffectList,e.skinSpEffect_F1=o.skinSpEffect_F1,e.skinSpEffect_F2=o.skinSpEffect_F2,e.skinSpEffect_F3=o.skinSpEffect_F3,e.skinSpEffect_F4=o.skinSpEffect_F4,e.skinSpEffect_F5=o.skinSpEffect_F5,e.skinSpEffect_F6=o.skinSpEffect_F6,e.skinSpEffect_F7=o.skinSpEffect_F7,e.weaponSkinID=o.weaponSkinID,e.weaponSkinSpEffect=o.weaponSkinSpEffect,e.weaponSkinSpEffect_F1=o.weaponSkinSpEffect_F1,e.weaponSkinSpEffect_F2=o.weaponSkinSpEffect_F2,e.weaponSkinSpEffect_F3=o.weaponSkinSpEffect_F3,e.weaponSkinSpEffect_F4=o.weaponSkinSpEffect_F4}break;case this.SoundComponent:{let e=i.GetComponent(dc);e.showSound=o.showSound,e.destorySound=o.destorySound,e.usePos=o.usePos,e.delay=o.delay,e.optimize=o.optimize}break;case this.SummonComponent:{let e=i.GetComponent(Pp);e.puppetZombies=o.puppetZombies,e.maximum=o.maximum}break;case this.TagComponent:i.GetComponent(Kc).tag=o.tag;break;case this.TeamComponent:{let e=i.GetComponent(E);e.netId=o.netId,e.team=o.team}break;case this.TentComponent:i.GetComponent(Ct);break;case this.TriggerComponent:i.GetComponent(ct).enableCollider=o.enableCollider;break;case this.TriggerHudComponent:{let e=i.GetComponent(Bp);e.banHud=o.banHud,e.nodeName=o.nodeName,e.isShow=o.isShow,e.isGetUi=o.isGetUi,e.useUICtrl=o.useUICtrl,e.useLerp=o.useLerp}break;case this.TurretComponent:{let e=i.GetComponent(Iu);e.t1=o.t1,e.attCD=o.attCD,e.amg=o.amg}break;case this.UnitComponent:{let e=i.GetComponent(R);e.canGetItem=o.canGetItem,e.canLevelUp=o.canLevelUp,e.baseSize=o.baseSize,e.sizeScale=o.sizeScale,e.invisible=o.invisible,e.isTriggerDeathLaser=o.isTriggerDeathLaser,e.hp=o.hp,e.maxHp=o.maxHp,e.exp=o.exp,e.oldexp=o.oldexp,e.maxExp=o.maxExp,e.nowLevel=o.nowLevel,e.dmg=o.dmg,e.addDmgLevel=o.addDmgLevel,e.boxDmg=o.boxDmg,e.basedmg=o.basedmg,e.attSpeedScale=o.attSpeedScale,e.suckBlood=o.suckBlood,e.critPer=o.critPer,e.dodgePer=o.dodgePer,e.parryChance=o.parryChance,e.heal=o.heal,e.healTime=o.healTime,e.speed=o.speed,e.speedScale=o.speedScale,e._speedScale=o._speedScale,e.attackInterval=o.attackInterval,e.attackTime=o.attackTime,e.useInput=o.useInput,e.triggerAtt=o.triggerAtt,e.attBtnState=o.attBtnState,e.skillBtnState=o.skillBtnState,e.attSoundIsPlay=o.attSoundIsPlay,e.isDead=o.isDead,e.anyScale=o.anyScale,e.isPlaySetPosOffSkill=o.isPlaySetPosOffSkill,e.hitRecovery=o.hitRecovery,e.willRandomSkill=o.willRandomSkill,e.upgRadeList=o.upgRadeList,e.upRadeCount=o.upRadeCount,e.chooseUpGrade=o.chooseUpGrade,e.getItem=o.getItem,e.superLevelUp=o.superLevelUp,e.intelligency=o.intelligency,e.needUIFreshChoose=o.needUIFreshChoose,e.skillState=o.skillState,e.invincible=o.invincible,e.superArmor=o.superArmor,e.noSap=o.noSap,e.noCtrlEffect=o.noCtrlEffect,e.fogHitedTimes=o.fogHitedTimes,e.dizz=o.dizz,e.banAtt=o.banAtt,e.rebound=o.rebound,e.deadState=o.deadState,e.reviveTime=o.reviveTime,e.turnRotation=o.turnRotation,e.areYouDriving=o.areYouDriving}break;case this.WeaponComponent:{let e=i.GetComponent(U);e.nowAct=o.nowAct,e.maxAct=o.maxAct,e.comboTime=o.comboTime,e.gunMode=o.gunMode,e.isAR=o.isAR,e.shotCD=o.shotCD,e.shotCDTime=o.shotCDTime,e.shotCDScale=o.shotCDScale,e.bulletCount=o.bulletCount,e.nowBulletCount=o.nowBulletCount,e.consecutiveShots=o.consecutiveShots,e.consecutiveShotsTimes=o.consecutiveShotsTimes,e._bulletLoadCD=o._bulletLoadCD,e.bulletLoadTime=o.bulletLoadTime,e.ReloadTimeScale=o.ReloadTimeScale,e.Magazine=o.Magazine,e.recoilTime=o.recoilTime,e.bullet0=o.bullet0,e.bullet0Dis=o.bullet0Dis,e.bullet0height=o.bullet0height,e.act0Clip=o.act0Clip,e.act0Time=o.act0Time,e.act0Step1Time=o.act0Step1Time,e.act0Step2Time=o.act0Step2Time,e.act0Step3Time=o.act0Step3Time,e.att0Time=o.att0Time,e.superArmor0=o.superArmor0,e.singleShotLoading=o.singleShotLoading,e._singleShotLoadingCD=o._singleShotLoadingCD,e.singleShotLoadingTime=o.singleShotLoadingTime,e.singleShotLoadingCDTime=o.singleShotLoadingCDTime,e.bulletsFiredNumbers=o.bulletsFiredNumbers,e.attackRangeId=o.attackRangeId,e.attSpecialRangeId=o.attSpecialRangeId,e.readOnlyAttackRange=o.readOnlyAttackRange,e.attackRange=o.attackRange,e.isSniperRifle=o.isSniperRifle,e.sniperRifleattRange=o.sniperRifleattRange,e.randomShootingAngle=o.randomShootingAngle,e.bulletPathAimingEffect=o.bulletPathAimingEffect,e.aimingSpecialEffectId=o.aimingSpecialEffectId,e.bullet1=o.bullet1,e.bullet1Dis=o.bullet1Dis,e.bullet1height=o.bullet1height,e.act1Clip=o.act1Clip,e.act1Time=o.act1Time,e.act1Step1Time=o.act1Step1Time,e.act1Step2Time=o.act1Step2Time,e.act1Step3Time=o.act1Step3Time,e.att1Time=o.att1Time,e.superArmor1=o.superArmor1,e.bullet2=o.bullet2,e.bullet2Dis=o.bullet2Dis,e.bullet2height=o.bullet2height,e.act2Clip=o.act2Clip,e.act2Time=o.act2Time,e.act2Step1Time=o.act2Step1Time,e.act2Step2Time=o.act2Step2Time,e.act2Step3Time=o.act2Step3Time,e.att2Time=o.att2Time,e.superArmor2=o.superArmor2,e.idleClip=o.idleClip,e.runClip=o.runClip,e.aimingTargetId=o.aimingTargetId,e.penetratingShot=o.penetratingShot,e.splittingShot=o.splittingShot,e.bulletScatter=o.bulletScatter,e.bulletSpeed=o.bulletSpeed,e.bulletShotCounter=o.bulletShotCounter}break;case this.ZombieComponent:{let e=i.GetComponent(ut);e.enable=o.enable,e.StartState=o.StartState,e.thinkState=o.thinkState,e.time=o.time,e.brain=o.brain,e.dir=new Laya.Vector3(o.dir.x,o.dir.y,o.dir.z),e.enemyId=o.enemyId,e.patrolRange=o.patrolRange,e.attPathTime=o.attPathTime,e.searchEnemyTime=o.searchEnemyTime,e.attTimeCd=o.attTimeCd,e.attAnimTime=o.attAnimTime,e.triggerAttTime=o.triggerAttTime,e.triggerAttRange=o.triggerAttRange,e.allowOutOfRangDestroy=o.allowOutOfRangDestroy,e.isRangedUnit=o.isRangedUnit,e.killExp=o.killExp,e.zombieID=o.zombieID,e.freshMoveAnimCD=o.freshMoveAnimCD,e.useSkillTime=o.useSkillTime,e.skillTimeRangeMin=o.skillTimeRangeMin,e.skillTimeRangeMax=o.skillTimeRangeMax,e.skillOffset=o.skillOffset,e.viewRange_Day=o.viewRange_Day,e.viewRange_Night=o.viewRange_Night,e.viewRange_BloodNight=o.viewRange_BloodNight,e.angryChaseRangeRatio=o.angryChaseRangeRatio,e.angryChaseSpeedRatio=o.angryChaseSpeedRatio,e.angryChaseCallRange=o.angryChaseCallRange,e.hasTriggerAngryChase=o.hasTriggerAngryChase,e.bulletScale=o.bulletScale,e.bulletOffsetZ=o.bulletOffsetZ}break;case this.ZombieFactoryComponent:{let e=i.GetComponent(pu);e.nowRemainZombie=o.nowRemainZombie,e.initCreateZombieRemainCDTime=o.initCreateZombieRemainCDTime,e.initActiveZombieRemainCDTime=o.initActiveZombieRemainCDTime,e.level=o.level,e.type=o.type,e.isUnderAttacked=o.isUnderAttacked,e.orginMat_model1=new Laya.Vector3(o.orginMat_model1.x,o.orginMat_model1.y,o.orginMat_model1.z),e.orginMat_model2=new Laya.Vector3(o.orginMat_model2.x,o.orginMat_model2.y,o.orginMat_model2.z),e.orginMat_danger=new Laya.Vector3(o.orginMat_danger.x,o.orginMat_danger.y,o.orginMat_danger.z)}}}static GetComponentName(e){switch(e){case 0:return this.AutoDestoryComponent;case 1:return this.FollowComponent;case 2:return this.GroupComponent;case 3:return this.Render3DComponent;case 4:return this.RigidBodyComponent;case 5:return this.TransformComponent;case 6:return this.AIComponent;case 7:return this.AnimatorComponent;case 8:return this.ArrowComponent;case 9:return this.ArrowHudComponent;case 10:return this.BackpackComponent;case 11:return this.BonusItemComponent;case 12:return this.BossComponent;case 13:return this.BuffComponent;case 14:return this.BuffTriggerComponent;case 15:return this.BulletBuffComponent;case 16:return this.BulletComponent;case 17:return this.BulletDropComponent;case 18:return this.BunkerComponent;case 19:return this.BunkerDoorComponent;case 20:return this.BunkerDoorTriggerComponent;case 21:return this.BunkerTriggerComponent;case 22:return this.CameraComponent;case 23:return this.CannonBodyComponent;case 24:return this.CarComponnent;case 25:return this.CarDoorComponnent;case 26:return this.ChainComponent;case 27:return this.ColliderComponent;case 28:return this.EquipComponent;case 29:return this.ExpPointComponent;case 30:return this.FogComponent;case 31:return this.FsmComponent;case 32:return this.GunSoundComponent;case 33:return this.HitInfoComponent;case 34:return this.HpHudComponent;case 35:return this.ItemComponent;case 36:return this.ItemCreatComponent;case 37:return this.ItemTriggerComponent;case 38:return this.LinkComponent;case 39:return this.MergeComponent;case 40:return this.MoveComponent;case 41:return this.MySelfComponent;case 42:return this.NavigatorComponent;case 43:return this.PuppetComponent;case 44:return this.QuestComponent;case 45:return this.SakeCameraComponent;case 46:return this.ShadowComponent;case 47:return this.SkillComponent;case 48:return this.SkinComponent;case 49:return this.SoundComponent;case 50:return this.SummonComponent;case 51:return this.TagComponent;case 52:return this.TeamComponent;case 53:return this.TentComponent;case 54:return this.TriggerComponent;case 55:return this.TriggerHudComponent;case 56:return this.TurretComponent;case 57:return this.UnitComponent;case 58:return this.WeaponComponent;case 59:return this.ZombieComponent;case 60:return this.ZombieFactoryComponent}return""}static AddComponentToEnity(i,o,a=null){switch(o.name){case this.AutoDestoryComponent:{let e=new kt;e.InitComponentId(kt.id),e.keepTime=o.component.keepTime,e.igronTimeScale=o.component.igronTimeScale,a&&a.call(this,e),i.AddComponentAdv(kt,e)}break;case this.FollowComponent:{let e=new Mt;e.InitComponentId(Mt.id),e.followTargetId=o.component.followTargetId,e.offset=new Laya.Vector3(o.component.offset.x,o.component.offset.y,o.component.offset.z),e.followPos=o.component.followPos,e.followScale=o.component.followScale,e.followrotation=o.component.followrotation,e.moveTotargetOffset=o.component.moveTotargetOffset,e.targetOffset=new Laya.Vector3(o.component.targetOffset.x,o.component.targetOffset.y,o.component.targetOffset.z),e.OffsetMoveSpeed=o.component.OffsetMoveSpeed,e.usePosLerp=o.component.usePosLerp,e.posLerpSpeed=o.component.posLerpSpeed,e.isDestory=o.component.isDestory,a&&a.call(this,e),i.AddComponentAdv(Mt,e)}break;case this.GroupComponent:{let e=new Rt;e.InitComponentId(Rt.id),a&&a.call(this,e),i.AddComponentAdv(Rt,e)}break;case this.Render3DComponent:{let e=new B;e.InitComponentId(B.id),e.spName=o.component.spName,e.spPath=o.component.spPath,e.isSpLoad=o.component.isSpLoad,e.isCamera=o.component.isCamera,e.render=o.component.render,e.visble=o.component.visble,e.banCull=o.component.banCull,e.updateTransfrom=o.component.updateTransfrom,e.updateRotation=o.component.updateRotation,e.updateScale=o.component.updateScale,e.useLerp=o.component.useLerp,e.useMoveCom=o.component.useMoveCom,e.lerpStart=o.component.lerpStart,e.posOffset=new Laya.Vector3(o.component.posOffset.x,o.component.posOffset.y,o.component.posOffset.z),e.saveoldMat=o.component.saveoldMat,e.isChildMat=o.component.isChildMat,e.isSkinMat=o.component.isSkinMat,e.matId=o.component.matId,a&&a.call(this,e),i.AddComponentAdv(B,e)}break;case this.RigidBodyComponent:{let e=new Pt;e.InitComponentId(Pt.id),e.vec=new Laya.Vector3(o.component.vec.x,o.component.vec.y,o.component.vec.z),e.angleVec=new Laya.Vector3(o.component.angleVec.x,o.component.angleVec.y,o.component.angleVec.z),e.useGravity=o.component.useGravity,e.igroneTimeScale=o.component.igroneTimeScale,e.useBounce=o.component.useBounce,e.bounce=o.component.bounce,e.bounceY=o.component.bounceY,a&&a.call(this,e),i.AddComponentAdv(Pt,e)}break;case this.TransformComponent:{let e=new M;e.InitComponentId(M.id),e.isInCameraArea=o.component.isInCameraArea,e.pos=new Laya.Vector3(o.component.pos.x,o.component.pos.y,o.component.pos.z),e.scale=new Laya.Vector3(o.component.scale.x,o.component.scale.y,o.component.scale.z),e.rotation=new Laya.Vector3(o.component.rotation.x,o.component.rotation.y,o.component.rotation.z),a&&a.call(this,e),i.AddComponentAdv(M,e)}break;case this.AIComponent:{let e=new Et;e.InitComponentId(Et.id),e.enable=o.component.enable,e.aiId=o.component.aiId,e.StartState=o.component.StartState,e.thinkState=o.component.thinkState,e.time=o.component.time,e.nowFogDir=o.component.nowFogDir,e.likeGetItem=o.component.likeGetItem,e.randomShootingAngleRange=o.component.randomShootingAngleRange,e.randomShootingAngle=o.component.randomShootingAngle,e.predictiveShooting=o.component.predictiveShooting,e.targetEnemy=o.component.targetEnemy,e.searchEnemyTime=o.component.searchEnemyTime,e.targetItem=o.component.targetItem,e.hasGetItemPath=o.component.hasGetItemPath,e.eatBuffItemFirst=o.component.eatBuffItemFirst,e.escapHp=o.component.escapHp,e.mustFightCount=o.component.mustFightCount,e.escapNappChance=o.component.escapNappChance,e.attTimeRangeMin=o.component.attTimeRangeMin,e.attTimeRangeMax=o.component.attTimeRangeMax,e.attPathTime=o.component.attPathTime,e.attRotateSpeed=o.component.attRotateSpeed,e.attTimeCd=o.component.attTimeCd,e.attTime=o.component.attTime,e.triggerAttTime=o.component.triggerAttTime,e.triggerAttRange=o.component.triggerAttRange,e.AiCharacter=o.component.AiCharacter,e.triggerAtt=o.component.triggerAtt,e.skillTimeRangeMin=o.component.skillTimeRangeMin,e.skillTimeRangeMax=o.component.skillTimeRangeMax,e.useSkillTime=o.component.useSkillTime,e.skillOffset=o.component.skillOffset,e.stepTime=o.component.stepTime,e.brain=o.component.brain,e.randomAttTime=o.component.randomAttTime,a&&a.call(this,e),i.AddComponentAdv(Et,e)}break;case this.AnimatorComponent:{let e=new xt;e.InitComponentId(xt.id),e.useUpBody=o.component.useUpBody,e.useUpBodyClipName=o.component.useUpBodyClipName,e.nowUpBodyClipName=o.component.nowUpBodyClipName,e.layerCount=o.component.layerCount,e.oldRender=o.component.oldRender,e.nowClipName=o.component.nowClipName,e.isCanUseNext=o.component.isCanUseNext,e.useClipName=o.component.useClipName,e.useSpeed=o.component.useSpeed,e.useCross=o.component.useCross,e.nextUseClipName=o.component.nextUseClipName,e.nextSpeed=o.component.nextSpeed,e.nextCross=o.component.nextCross,e.nextPlayTime=o.component.nextPlayTime,e.nowSpeed=o.component.nowSpeed,e.animatorSpeedScale=o.component.animatorSpeedScale,e.banKeepTime=o.component.banKeepTime,a&&a.call(this,e),i.AddComponentAdv(xt,e)}break;case this.ArrowComponent:{let e=new Nt;e.InitComponentId(Nt.id),e.arrowId=o.component.arrowId,e.zhiShiBiaoId=o.component.zhiShiBiaoId,e.time=o.component.time,a&&a.call(this,e),i.AddComponentAdv(Nt,e)}break;case this.ArrowHudComponent:{let e=new Ft;e.InitComponentId(Ft.id),e.isShow=o.component.isShow,e.isGetUi=o.component.isGetUi,e.hudShowEffect_Progress=o.component.hudShowEffect_Progress,e.hudShowEffect_FromPos=new Laya.Vector2(o.component.hudShowEffect_FromPos.x,o.component.hudShowEffect_FromPos.y),e.showRange=o.component.showRange,e.scale=o.component.scale,e.isFirstRun=o.component.isFirstRun,e.type=o.component.type,e.iconUrl=o.component.iconUrl,a&&a.call(this,e),i.AddComponentAdv(Ft,e)}break;case this.BackpackComponent:{let e=new Ot;e.InitComponentId(Ot.id),e._boltNum=o.component._boltNum,e._batteryNum=o.component._batteryNum,a&&a.call(this,e),i.AddComponentAdv(Ot,e)}break;case this.BonusItemComponent:{let e=new Ht;e.InitComponentId(Ht.id),e.selfGetMode=o.component.selfGetMode,e.targetPos=new Laya.Vector3(o.component.targetPos.x,o.component.targetPos.y,o.component.targetPos.z),e.keepColliderF=o.component.keepColliderF,e.showTime=o.component.showTime,e.targetId=o.component.targetId,e.keepTime=o.component.keepTime,e.state=o.component.state,a&&a.call(this,e),i.AddComponentAdv(Ht,e)}break;case this.BossComponent:{let e=new Lt;e.InitComponentId(Lt.id),e.nextCreatHp=o.component.nextCreatHp,a&&a.call(this,e),i.AddComponentAdv(Lt,e)}break;case this.BuffComponent:{let e=new Vt;e.InitComponentId(Vt.id),a&&a.call(this,e),i.AddComponentAdv(Vt,e)}break;case this.BuffTriggerComponent:{let e=new R_;e.InitComponentId(R_.id),e.MainTarget=o.component.MainTarget,e.f1=o.component.f1,e.f2=o.component.f2,a&&a.call(this,e),i.AddComponentAdv(R_,e)}break;case this.BulletBuffComponent:{let e=new oi;e.InitComponentId(oi.id),e.BuffID=o.component.BuffID,e.keepTime=o.component.keepTime,e.isOnlyBuff=o.component.isOnlyBuff,e.F1=o.component.F1,e.F2=o.component.F2,e.F3=o.component.F3,e.F4=o.component.F4,e.B2_BuffID=o.component.B2_BuffID,e.B2_keepTime=o.component.B2_keepTime,e.B2_isOnlyBuff=o.component.B2_isOnlyBuff,e.B2_F1=o.component.B2_F1,e.B2_F2=o.component.B2_F2,e.B2_F3=o.component.B2_F3,e.B2_F4=o.component.B2_F4,a&&a.call(this,e),i.AddComponentAdv(oi,e)}break;case this.BulletComponent:{let e=new C;e.InitComponentId(C.id),e.useDmg=o.component.useDmg,e.isMagic=o.component.isMagic,e.dmg=o.component.dmg,e.creatorId=o.component.creatorId,e.keepFrame=o.component.keepFrame,e.useStiffness=o.component.useStiffness,e.useStiffnessDis=o.component.useStiffnessDis,e.shakeCamera=o.component.shakeCamera,e.useSAP=o.component.useSAP,e.sapTime=o.component.sapTime,e.boxDmg=o.component.boxDmg,e.whetherPenetrate=o.component.whetherPenetrate,e.t1=o.component.t1,e.hitAndDistory=o.component.hitAndDistory,e.hitWallDestoy=o.component.hitWallDestoy,e.destoryNow=o.component.destoryNow,e.penetrationNum=o.component.penetrationNum,e.hitShowEffect=o.component.hitShowEffect,e.hitShowEffectByBuff=o.component.hitShowEffectByBuff,e.hitShowEffectOffSet=o.component.hitShowEffectOffSet,e.guided=o.component.guided,e.maxAV=o.component.maxAV,e.attackRange=o.component.attackRange,e.pos=new Laya.Vector3(o.component.pos.x,o.component.pos.y,o.component.pos.z),e.guidedFilter=o.component.guidedFilter.concat(),e.onDistanceDmg=o.component.onDistanceDmg,a&&a.call(this,e),i.AddComponentAdv(C,e)}break;case this.BulletDropComponent:{let e=new Sp;e.InitComponentId(Sp.id),e.targetId=o.component.targetId,e.moveSpeed=o.component.moveSpeed,e.nowValue=o.component.nowValue,e.height=o.component.height,e.isGetTarget=o.component.isGetTarget,e.targetPos=new Laya.Vector3(o.component.targetPos.x,o.component.targetPos.y,o.component.targetPos.z),e.isAoe=o.component.isAoe,a&&a.call(this,e),i.AddComponentAdv(Sp,e)}break;case this.BunkerComponent:{let e=new pt;e.InitComponentId(pt.id),e.bunkerID=o.component.bunkerID,e.peopleNum=o.component.peopleNum,e.peopleMaxNum=o.component.peopleMaxNum,e.doorIsOpen=o.component.doorIsOpen,e.residentIDList=o.component.residentIDList.concat(),e.zombieIdList=o.component.zombieIdList.concat(),e.isDamage=o.component.isDamage,e.level=o.component.level,e.fencePerformanceStage=o.component.fencePerformanceStage,e.bunkerTriggerEcsID=o.component.bunkerTriggerEcsID,a&&a.call(this,e),i.AddComponentAdv(pt,e)}break;case this.BunkerDoorComponent:{let e=new P_;e.InitComponentId(P_.id),e.bunkerId=o.component.bunkerId,e.isTriggerCollider=o.component.isTriggerCollider,a&&a.call(this,e),i.AddComponentAdv(P_,e)}break;case this.BunkerDoorTriggerComponent:{let e=new gt;e.InitComponentId(gt.id),e.bunkerId=o.component.bunkerId,e.doorId=o.component.doorId,e.switchIsShow=o.component.switchIsShow,a&&a.call(this,e),i.AddComponentAdv(gt,e)}break;case this.BunkerTriggerComponent:{let e=new St;e.InitComponentId(St.id),e.bunkerId=o.component.bunkerId,a&&a.call(this,e),i.AddComponentAdv(St,e)}break;case this.CameraComponent:{let e=new $i;e.InitComponentId($i.id),e.state=o.component.state,e.followTargetId=o.component.followTargetId,e.zMoveDis=o.component.zMoveDis,e.zDis=o.component.zDis,e.feildOfView=o.component.feildOfView,e.useShake=o.component.useShake,e.shakeTime=o.component.shakeTime,e.shakeValue=o.component.shakeValue,e.slowMotionTime=o.component.slowMotionTime,e.bgPath=o.component.bgPath,e.freshPos=o.component.freshPos,a&&a.call(this,e),i.AddComponentAdv($i,e)}break;case this.CannonBodyComponent:{let e=new E_;e.InitComponentId(E_.id),a&&a.call(this,e),i.AddComponentAdv(E_,e)}break;case this.CarComponnent:{let e=new pi;e.InitComponentId(pi.id),e.driverId=o.component.driverId,e.passengerIdList=o.component.passengerIdList.concat(),e.offset=new Laya.Vector3(o.component.offset.x,o.component.offset.y,o.component.offset.z),e.speed=o.component.speed,e.seatingLimit=o.component.seatingLimit,e.carDoorId=o.component.carDoorId,e.carRuntime=o.component.carRuntime,e._isMoving=o.component._isMoving,e.isDamage=o.component.isDamage,e.refreshTime=o.component.refreshTime,e.carSmokeEffect=o.component.carSmokeEffect,e.onLight=o.component.onLight,a&&a.call(this,e),i.AddComponentAdv(pi,e)}break;case this.CarDoorComponnent:{let e=new ft;e.InitComponentId(ft.id),e.carId=o.component.carId,a&&a.call(this,e),i.AddComponentAdv(ft,e)}break;case this.ChainComponent:{let e=new Np;e.InitComponentId(Np.id),e.soureId=o.component.soureId,e.targetId=o.component.targetId,e.chainType=o.component.chainType,a&&a.call(this,e),i.AddComponentAdv(Np,e)}break;case this.ColliderComponent:{let e=new v;e.InitComponentId(v.id),e.enable=o.component.enable,e.nowMapPos=new Laya.Vector2(o.component.nowMapPos.x,o.component.nowMapPos.y),e.oldPos=new Laya.Vector3(o.component.oldPos.x,o.component.oldPos.y,o.component.oldPos.z),e.colliderAllUnit=o.component.colliderAllUnit,e.colliderAllHeroUnit=o.component.colliderAllHeroUnit,e.haveColliderSize=o.component.haveColliderSize,e.colliderNoMove=o.component.colliderNoMove,e.useSpColliderRadius=o.component.useSpColliderRadius,e.isInAir=o.component.isInAir,e.isInFixed=o.component.isInFixed,e.hasColliderList=o.component.hasColliderList.concat(),e.hitTheWall=o.component.hitTheWall,e.hitWithWall=o.component.hitWithWall,e.isHitWall=o.component.isHitWall,e.hitWithBullet=o.component.hitWithBullet,e.colliderType=o.component.colliderType,e.width=o.component.width,e.height=o.component.height,e.radius=o.component.radius,e.angle=o.component.angle,e.weight=o.component.weight,e.isTrigger=o.component.isTrigger,a&&a.call(this,e),i.AddComponentAdv(v,e)}break;case this.EquipComponent:{let e=new bt;e.InitComponentId(bt.id),e.mainWeapon=o.component.mainWeapon,e.mainWeaponId=o.component.mainWeaponId,a&&a.call(this,e),i.AddComponentAdv(bt,e)}break;case this.ExpPointComponent:{let e=new Zc;e.InitComponentId(Zc.id),e.targetId=o.component.targetId,e.dir=new Laya.Vector3(o.component.dir.x,o.component.dir.y,o.component.dir.z),e.vec=new Laya.Vector3(o.component.vec.x,o.component.vec.y,o.component.vec.z),e.speed=o.component.speed,e.keepTime=o.component.keepTime,a&&a.call(this,e),i.AddComponentAdv(Zc,e)}break;case this.FogComponent:{let e=new Ap;e.InitComponentId(Ap.id),e.baseRange=o.component.baseRange,e.minRange=o.component.minRange,e.maxRange=o.component.maxRange,e.nowRange=o.component.nowRange,e.speed=o.component.speed,e.time=o.component.time,a&&a.call(this,e),i.AddComponentAdv(Ap,e)}break;case this.FsmComponent:{let e=new F;e.InitComponentId(F.id),e.nowState=o.component.nowState,e.preState=o.component.preState,e.oldState=o.component.oldState,e.banStateChange=o.component.banStateChange,e.time=o.component.time,e.entity1Id=o.component.entity1Id,e.t1=o.component.t1,e.t2=o.component.t2,e.t3=o.component.t3,e.t4=o.component.t4,e.t5=o.component.t5,e.t6=o.component.t6,e.t7=o.component.t7,e.t8=o.component.t8,e.r1=o.component.r1,e.r2=o.component.r2,e.r3=o.component.r3,e.r4=o.component.r4,e.r5=o.component.r5,e.str1=o.component.str1,e.step=o.component.step,e.step1=o.component.step1,a&&a.call(this,e),i.AddComponentAdv(F,e)}break;case this.GunSoundComponent:{let e=new Qc;e.InitComponentId(Qc.id),e.showLoopSound=o.component.showLoopSound,e.showSound=o.component.showSound,e.isPlay=o.component.isPlay,e.firstShot=o.component.firstShot,e.t1=o.component.t1,e.bulletCount=o.component.bulletCount,a&&a.call(this,e),i.AddComponentAdv(Qc,e)}break;case this.HitInfoComponent:{let e=new ai;e.InitComponentId(ai.id),e.hitedTarget=o.component.hitedTarget,e.attacker=o.component.attacker,e.bullectId=o.component.bullectId,e.stiffness=o.component.stiffness,e.beforeTriggerDmg=o.component.beforeTriggerDmg,e.dmg=o.component.dmg,e.olddmg=o.component.olddmg,e.dmgType=o.component.dmgType,e.toDeath=o.component.toDeath,a&&a.call(this,e),i.AddComponentAdv(ai,e)}break;case this.HpHudComponent:{let e=new D;e.InitComponentId(D.id),e.banHud=o.component.banHud,e.nodeName=o.component.nodeName,e.isShow=o.component.isShow,e.isGetUi=o.component.isGetUi,e.switchHpState=o.component.switchHpState,e.useUICtrl=o.component.useUICtrl,e.oldUICtrl=o.component.oldUICtrl,e.playerName=o.component.playerName,e.chinaState=o.component.chinaState,e.color=o.component.color,e.hp=o.component.hp,e.maxhp=o.component.maxhp,e.level=o.component.level,e.exp=o.component.exp,e.maxExp=o.component.maxExp,e.freshUI=o.component.freshUI,e.red=o.component.red,e.isRedName=o.component.isRedName,e.bulletLoadCD=o.component.bulletLoadCD,e.reloadState=o.component.reloadState,e.playReloadAni=o.component.playReloadAni,e.singleShotLoading=o.component.singleShotLoading,e.singleShotReloadState=o.component.singleShotReloadState,e.useLerp=o.component.useLerp,e.bulletCount=o.component.bulletCount,e.nowBulletCount=o.component.nowBulletCount,e.showChangedHp=o.component.showChangedHp.concat(),e.isChangeGun=o.component.isChangeGun,e.hpChangeUIOffsetPos=new Laya.Vector3(o.component.hpChangeUIOffsetPos.x,o.component.hpChangeUIOffsetPos.y,o.component.hpChangeUIOffsetPos.z),a&&a.call(this,e),i.AddComponentAdv(D,e)}break;case this.ItemComponent:{let e=new y;e.InitComponentId(y.id),e.itemID=o.component.itemID,e.hp=o.component.hp,e.maxhp=o.component.maxhp,e.wallWillCreatChance=o.component.wallWillCreatChance,e.wallWillCreatItem=o.component.wallWillCreatItem,e.willGetMashRoom=o.component.willGetMashRoom,e.willGetExItem=o.component.willGetExItem,e.wallLeftTime=o.component.wallLeftTime,e.speed=o.component.speed,e.addExp=o.component.addExp,e.type=o.component.type,e.chestLevel=o.component.chestLevel,e.addBuff=o.component.addBuff,e.effect=o.component.effect,e.effectId=o.component.effectId,e.buffKeepTime=o.component.buffKeepTime,e.isOnlyBuff=o.component.isOnlyBuff,e.f1=o.component.f1,e.f2=o.component.f2,e.f3=o.component.f3,e.f4=o.component.f4,e.createId=o.component.createId,e.ItemTriggerId=o.component.ItemTriggerId,e.aimedPriority=o.component.aimedPriority,a&&a.call(this,e),i.AddComponentAdv(y,e)}break;case this.ItemCreatComponent:{let e=new bp;e.InitComponentId(bp.id),e.nowTime=o.component.nowTime,e.oldTime=o.component.oldTime,e.nowItemId=o.component.nowItemId,a&&a.call(this,e),i.AddComponentAdv(bp,e)}break;case this.ItemTriggerComponent:{let e=new Gt;e.InitComponentId(Gt.id),a&&a.call(this,e),i.AddComponentAdv(Gt,e)}break;case this.LinkComponent:{let e=new ig;e.InitComponentId(ig.id),e.LinkEffectId=o.component.LinkEffectId,e.LinkEffectName=o.component.LinkEffectName,e.startPlayerId=o.component.startPlayerId,e.overPlayerId=o.component.overPlayerId,a&&a.call(this,e),i.AddComponentAdv(ig,e)}break;case this.MergeComponent:{let e=new Fp;e.InitComponentId(Fp.id),e.nowState=o.component.nowState,e.oldState=o.component.oldState,e.xSize=o.component.xSize,e.ySize=o.component.ySize,e.itemWidth=o.component.itemWidth,e.itemHeight=o.component.itemHeight,e.xOffsetByX=o.component.xOffsetByX,e.mapList=o.component.mapList.concat(),e.nowChooseIndex=o.component.nowChooseIndex,e.nowPos=new Laya.Vector2(o.component.nowPos.x,o.component.nowPos.y),e.nowPixelPos=new Laya.Vector2(o.component.nowPixelPos.x,o.component.nowPixelPos.y),e.buyId=o.component.buyId,e.sell=o.component.sell,e.dragEquipment=o.component.dragEquipment,e.showAddCoinTime=o.component.showAddCoinTime,e.useMergeGuide=o.component.useMergeGuide,e.mergeGuideTime=o.component.mergeGuideTime,e.freshToNewMapList=o.component.freshToNewMapList.concat(),e.useDropBox=o.component.useDropBox,e.useDropLeftTime=o.component.useDropLeftTime,e.dropBoxMaxCount=o.component.dropBoxMaxCount,e.useDropTimeMin=o.component.useDropTimeMin,e.useDropTimeMax=o.component.useDropTimeMax,e.dropnNomalSubLevel=o.component.dropnNomalSubLevel,e.dropnUpGradeChance=o.component.dropnUpGradeChance,e.dropnUpAddCount=o.component.dropnUpAddCount,e.dropnUpAddLevel=o.component.dropnUpAddLevel,e.dropnSuperAddLevel=o.component.dropnSuperAddLevel,e.nowWillUpgradeIndex=o.component.nowWillUpgradeIndex,e.willUpgradeIndex=o.component.willUpgradeIndex.concat(),e.willUpgradeWeapon=o.component.willUpgradeWeapon.concat(),e.trigerUpgrade=o.component.trigerUpgrade,e.addDropBoxNowCount=o.component.addDropBoxNowCount,a&&a.call(this,e),i.AddComponentAdv(Fp,e)}break;case this.MoveComponent:{let e=new w;e.InitComponentId(w.id),e.banDirCtrl=o.component.banDirCtrl,e.banDirRotationCtrl=o.component.banDirRotationCtrl,e.dir=new Laya.Vector3(o.component.dir.x,o.component.dir.y,o.component.dir.z),e.dir2FollowDir=o.component.dir2FollowDir,e.nowIsDragShootState=o.component.nowIsDragShootState,e.dir2=new Laya.Vector3(o.component.dir2.x,o.component.dir2.y,o.component.dir2.z),e.speed=o.component.speed,e.vec=new Laya.Vector3(o.component.vec.x,o.component.vec.y,o.component.vec.z),e.yRotationFollow=o.component.yRotationFollow,e.speedScale=o.component.speedScale,e.rotationLerp=o.component.rotationLerp,a&&a.call(this,e),i.AddComponentAdv(w,e)}break;case this.MySelfComponent:{let e=new _t;e.InitComponentId(_t.id),a&&a.call(this,e),i.AddComponentAdv(_t,e)}break;case this.NavigatorComponent:{let t=new gi;t.InitComponentId(gi.id),t.enable=o.component.enable;for(let e=0;e<o.component.path.lenght;e++)t.path.push(new Laya.Vector3(o.component.path[e].x,o.component.path[e].y,o.component.path[e].z));t.targetPos=new Laya.Vector3(o.component.targetPos.x,o.component.targetPos.y,o.component.targetPos.z),t.needFindPath=o.component.needFindPath,t.isArrive=o.component.isArrive,t.findPathFailed=o.component.findPathFailed,t.isPathing=o.component.isPathing,a&&a.call(this,t),i.AddComponentAdv(gi,t)}break;case this.PuppetComponent:{let e=new hp;e.InitComponentId(hp.id),e.ownerId=o.component.ownerId,e.distanceFromOwner=o.component.distanceFromOwner,e.f2=o.component.f2,e.f5=o.component.f5,e.f7=o.component.f7,e.f15=o.component.f15,e.f16=o.component.f16,e.invincible=o.component.invincible,e.effectId=o.component.effectId,e.isControlled=o.component.isControlled,a&&a.call(this,e),i.AddComponentAdv(hp,e)}break;case this.QuestComponent:{let e=new Cu;e.InitComponentId(Cu.id),a&&a.call(this,e),i.AddComponentAdv(Cu,e)}break;case this.SakeCameraComponent:{let e=new hc;e.InitComponentId(hc.id),e.shakeValue=o.component.shakeValue,e.shakeTime=o.component.shakeTime,a&&a.call(this,e),i.AddComponentAdv(hc,e)}break;case this.ShadowComponent:{let e=new fi;e.InitComponentId(fi.id),e.shadowTargetId=o.component.shadowTargetId,e.size=o.component.size,e.render=o.component.render,e.height=o.component.height,a&&a.call(this,e),i.AddComponentAdv(fi,e)}break;case this.SkillComponent:{let e=new L;e.InitComponentId(L.id),e.skillCdScale=o.component.skillCdScale,e.skillDmgScale=o.component.skillDmgScale,e.triggerSkllId=o.component.triggerSkllId,e.banTrigger=o.component.banTrigger,e.skillDrapEffectId=o.component.skillDrapEffectId,e.drapSkillId=o.component.drapSkillId,e.unlockPassiveList=o.component.unlockPassiveList.concat(),e.unlockItemList=o.component.unlockItemList.concat(),a&&a.call(this,e),i.AddComponentAdv(L,e)}break;case this.SkinComponent:{let e=new ti;e.InitComponentId(ti.id),e.BodySkin=o.component.BodySkin,e.WeaponSkin=o.component.WeaponSkin,e.weaponId=o.component.weaponId,e.weaponType=o.component.weaponType,e.skinId=o.component.skinId,e.skinSpEffect=o.component.skinSpEffect,e.skinSpEffectList=o.component.skinSpEffectList.concat(),e.skinSpEffect_F1=o.component.skinSpEffect_F1,e.skinSpEffect_F2=o.component.skinSpEffect_F2,e.skinSpEffect_F3=o.component.skinSpEffect_F3,e.skinSpEffect_F4=o.component.skinSpEffect_F4,e.skinSpEffect_F5=o.component.skinSpEffect_F5,e.skinSpEffect_F6=o.component.skinSpEffect_F6,e.skinSpEffect_F7=o.component.skinSpEffect_F7,e.weaponSkinID=o.component.weaponSkinID,e.weaponSkinSpEffect=o.component.weaponSkinSpEffect,e.weaponSkinSpEffect_F1=o.component.weaponSkinSpEffect_F1,e.weaponSkinSpEffect_F2=o.component.weaponSkinSpEffect_F2,e.weaponSkinSpEffect_F3=o.component.weaponSkinSpEffect_F3,e.weaponSkinSpEffect_F4=o.component.weaponSkinSpEffect_F4,a&&a.call(this,e),i.AddComponentAdv(ti,e)}break;case this.SoundComponent:{let e=new dc;e.InitComponentId(dc.id),e.showSound=o.component.showSound,e.destorySound=o.component.destorySound,e.usePos=o.component.usePos,e.delay=o.component.delay,e.optimize=o.component.optimize,a&&a.call(this,e),i.AddComponentAdv(dc,e)}break;case this.SummonComponent:{let e=new Pp;e.InitComponentId(Pp.id),e.puppetZombies=o.component.puppetZombies.concat(),e.maximum=o.component.maximum,a&&a.call(this,e),i.AddComponentAdv(Pp,e)}break;case this.TagComponent:{let e=new Kc;e.InitComponentId(Kc.id),e.tag=o.component.tag,a&&a.call(this,e),i.AddComponentAdv(Kc,e)}break;case this.TeamComponent:{let e=new E;e.InitComponentId(E.id),e.netId=o.component.netId,e.team=o.component.team,a&&a.call(this,e),i.AddComponentAdv(E,e)}break;case this.TentComponent:{let e=new Ct;e.InitComponentId(Ct.id),a&&a.call(this,e),i.AddComponentAdv(Ct,e)}break;case this.TriggerComponent:{let e=new ct;e.InitComponentId(ct.id),e.enableCollider=o.component.enableCollider,a&&a.call(this,e),i.AddComponentAdv(ct,e)}break;case this.TriggerHudComponent:{let e=new Bp;e.InitComponentId(Bp.id),e.banHud=o.component.banHud,e.nodeName=o.component.nodeName,e.isShow=o.component.isShow,e.isGetUi=o.component.isGetUi,e.useUICtrl=o.component.useUICtrl,e.useLerp=o.component.useLerp,a&&a.call(this,e),i.AddComponentAdv(Bp,e)}break;case this.TurretComponent:{let e=new Iu;e.InitComponentId(Iu.id),e.t1=o.component.t1,e.attCD=o.component.attCD,e.amg=o.component.amg,a&&a.call(this,e),i.AddComponentAdv(Iu,e)}break;case this.UnitComponent:{let e=new R;e.InitComponentId(R.id),e.canGetItem=o.component.canGetItem,e.canLevelUp=o.component.canLevelUp,e.baseSize=o.component.baseSize,e.sizeScale=o.component.sizeScale,e.invisible=o.component.invisible,e.isTriggerDeathLaser=o.component.isTriggerDeathLaser,e.hp=o.component.hp,e.maxHp=o.component.maxHp,e.exp=o.component.exp,e.oldexp=o.component.oldexp,e.maxExp=o.component.maxExp,e.nowLevel=o.component.nowLevel,e.dmg=o.component.dmg,e.addDmgLevel=o.component.addDmgLevel,e.boxDmg=o.component.boxDmg,e.basedmg=o.component.basedmg,e.attSpeedScale=o.component.attSpeedScale,e.suckBlood=o.component.suckBlood,e.critPer=o.component.critPer,e.dodgePer=o.component.dodgePer,e.parryChance=o.component.parryChance,e.heal=o.component.heal,e.healTime=o.component.healTime,e.speed=o.component.speed,e.speedScale=o.component.speedScale,e._speedScale=o.component._speedScale,e.attackInterval=o.component.attackInterval,e.attackTime=o.component.attackTime,e.useInput=o.component.useInput,e.triggerAtt=o.component.triggerAtt,e.attBtnState=o.component.attBtnState,e.skillBtnState=o.component.skillBtnState,e.attSoundIsPlay=o.component.attSoundIsPlay,e.isDead=o.component.isDead,e.anyScale=o.component.anyScale,e.isPlaySetPosOffSkill=o.component.isPlaySetPosOffSkill,e.hitRecovery=o.component.hitRecovery,e.willRandomSkill=o.component.willRandomSkill.concat(),e.upgRadeList=o.component.upgRadeList.concat(),e.upRadeCount=o.component.upRadeCount,e.chooseUpGrade=o.component.chooseUpGrade,e.getItem=o.component.getItem,e.superLevelUp=o.component.superLevelUp,e.intelligency=o.component.intelligency,e.needUIFreshChoose=o.component.needUIFreshChoose,e.skillState=o.component.skillState.concat(),e.invincible=o.component.invincible,e.superArmor=o.component.superArmor,e.noSap=o.component.noSap,e.noCtrlEffect=o.component.noCtrlEffect,e.fogHitedTimes=o.component.fogHitedTimes,e.dizz=o.component.dizz,e.banAtt=o.component.banAtt,e.rebound=o.component.rebound,e.deadState=o.component.deadState,e.reviveTime=o.component.reviveTime,e.turnRotation=o.component.turnRotation,e.areYouDriving=o.component.areYouDriving,a&&a.call(this,e),i.AddComponentAdv(R,e)}break;case this.WeaponComponent:{let e=new U;e.InitComponentId(U.id),e.nowAct=o.component.nowAct,e.maxAct=o.component.maxAct,e.comboTime=o.component.comboTime,e.gunMode=o.component.gunMode,e.isAR=o.component.isAR,e.shotCD=o.component.shotCD,e.shotCDTime=o.component.shotCDTime,e.shotCDScale=o.component.shotCDScale,e.bulletCount=o.component.bulletCount,e.nowBulletCount=o.component.nowBulletCount,e.consecutiveShots=o.component.consecutiveShots,e.consecutiveShotsTimes=o.component.consecutiveShotsTimes,e._bulletLoadCD=o.component._bulletLoadCD,e.bulletLoadTime=o.component.bulletLoadTime,e.ReloadTimeScale=o.component.ReloadTimeScale,e.Magazine=o.component.Magazine,e.recoilTime=o.component.recoilTime,e.bullet0=o.component.bullet0,e.bullet0Dis=o.component.bullet0Dis,e.bullet0height=o.component.bullet0height,e.act0Clip=o.component.act0Clip,e.act0Time=o.component.act0Time,e.act0Step1Time=o.component.act0Step1Time,e.act0Step2Time=o.component.act0Step2Time,e.act0Step3Time=o.component.act0Step3Time,e.att0Time=o.component.att0Time,e.superArmor0=o.component.superArmor0,e.singleShotLoading=o.component.singleShotLoading,e._singleShotLoadingCD=o.component._singleShotLoadingCD,e.singleShotLoadingTime=o.component.singleShotLoadingTime,e.singleShotLoadingCDTime=o.component.singleShotLoadingCDTime,e.bulletsFiredNumbers=o.component.bulletsFiredNumbers,e.attackRangeId=o.component.attackRangeId,e.attSpecialRangeId=o.component.attSpecialRangeId,e.readOnlyAttackRange=o.component.readOnlyAttackRange,e.attackRange=o.component.attackRange,e.isSniperRifle=o.component.isSniperRifle,e.sniperRifleattRange=o.component.sniperRifleattRange,e.randomShootingAngle=o.component.randomShootingAngle,e.bulletPathAimingEffect=o.component.bulletPathAimingEffect,e.aimingSpecialEffectId=o.component.aimingSpecialEffectId,e.bullet1=o.component.bullet1,e.bullet1Dis=o.component.bullet1Dis,e.bullet1height=o.component.bullet1height,e.act1Clip=o.component.act1Clip,e.act1Time=o.component.act1Time,e.act1Step1Time=o.component.act1Step1Time,e.act1Step2Time=o.component.act1Step2Time,e.act1Step3Time=o.component.act1Step3Time,e.att1Time=o.component.att1Time,e.superArmor1=o.component.superArmor1,e.bullet2=o.component.bullet2,e.bullet2Dis=o.component.bullet2Dis,e.bullet2height=o.component.bullet2height,e.act2Clip=o.component.act2Clip,e.act2Time=o.component.act2Time,e.act2Step1Time=o.component.act2Step1Time,e.act2Step2Time=o.component.act2Step2Time,e.act2Step3Time=o.component.act2Step3Time,e.att2Time=o.component.att2Time,e.superArmor2=o.component.superArmor2,e.idleClip=o.component.idleClip,e.runClip=o.component.runClip,e.aimingTargetId=o.component.aimingTargetId,e.penetratingShot=o.component.penetratingShot,e.splittingShot=o.component.splittingShot,e.bulletScatter=o.component.bulletScatter,e.bulletSpeed=o.component.bulletSpeed,e.bulletShotCounter=o.component.bulletShotCounter,a&&a.call(this,e),i.AddComponentAdv(U,e)}break;case this.ZombieComponent:{let e=new ut;e.InitComponentId(ut.id),e.enable=o.component.enable,e.StartState=o.component.StartState,e.thinkState=o.component.thinkState,e.time=o.component.time,e.brain=o.component.brain,e.dir=new Laya.Vector3(o.component.dir.x,o.component.dir.y,o.component.dir.z),e.enemyId=o.component.enemyId,e.patrolRange=o.component.patrolRange,e.attPathTime=o.component.attPathTime,e.searchEnemyTime=o.component.searchEnemyTime,e.attTimeCd=o.component.attTimeCd,e.attAnimTime=o.component.attAnimTime,e.triggerAttTime=o.component.triggerAttTime,e.triggerAttRange=o.component.triggerAttRange,e.allowOutOfRangDestroy=o.component.allowOutOfRangDestroy,e.isRangedUnit=o.component.isRangedUnit,e.killExp=o.component.killExp,e.zombieID=o.component.zombieID,e.freshMoveAnimCD=o.component.freshMoveAnimCD,e.useSkillTime=o.component.useSkillTime,e.skillTimeRangeMin=o.component.skillTimeRangeMin,e.skillTimeRangeMax=o.component.skillTimeRangeMax,e.skillOffset=o.component.skillOffset,e.viewRange_Day=o.component.viewRange_Day,e.viewRange_Night=o.component.viewRange_Night,e.viewRange_BloodNight=o.component.viewRange_BloodNight,e.angryChaseRangeRatio=o.component.angryChaseRangeRatio,e.angryChaseSpeedRatio=o.component.angryChaseSpeedRatio,e.angryChaseCallRange=o.component.angryChaseCallRange,e.hasTriggerAngryChase=o.component.hasTriggerAngryChase,e.bulletScale=o.component.bulletScale,e.bulletOffsetZ=o.component.bulletOffsetZ,a&&a.call(this,e),i.AddComponentAdv(ut,e)}break;case this.ZombieFactoryComponent:{let e=new pu;e.InitComponentId(pu.id),e.nowRemainZombie=o.component.nowRemainZombie,e.initCreateZombieRemainCDTime=o.component.initCreateZombieRemainCDTime,e.initActiveZombieRemainCDTime=o.component.initActiveZombieRemainCDTime,e.level=o.component.level,e.type=o.component.type,e.isUnderAttacked=o.component.isUnderAttacked,e.orginMat_model1=new Laya.Vector3(o.component.orginMat_model1.x,o.component.orginMat_model1.y,o.component.orginMat_model1.z),e.orginMat_model2=new Laya.Vector3(o.component.orginMat_model2.x,o.component.orginMat_model2.y,o.component.orginMat_model2.z),e.orginMat_danger=new Laya.Vector3(o.component.orginMat_danger.x,o.component.orginMat_danger.y,o.component.orginMat_danger.z),a&&a.call(this,e),i.AddComponentAdv(pu,e)}}}}),O=(N_.AutoDestoryComponent="AutoDestoryComponent",N_.FollowComponent="FollowComponent",N_.GroupComponent="GroupComponent",N_.Render3DComponent="Render3DComponent",N_.RigidBodyComponent="RigidBodyComponent",N_.TransformComponent="TransformComponent",N_.AIComponent="AIComponent",N_.AnimatorComponent="AnimatorComponent",N_.ArrowComponent="ArrowComponent",N_.ArrowHudComponent="ArrowHudComponent",N_.BackpackComponent="BackpackComponent",N_.BonusItemComponent="BonusItemComponent",N_.BossComponent="BossComponent",N_.BuffComponent="BuffComponent",N_.BuffTriggerComponent="BuffTriggerComponent",N_.BulletBuffComponent="BulletBuffComponent",N_.BulletComponent="BulletComponent",N_.BulletDropComponent="BulletDropComponent",N_.BunkerComponent="BunkerComponent",N_.BunkerDoorComponent="BunkerDoorComponent",N_.BunkerDoorTriggerComponent="BunkerDoorTriggerComponent",N_.BunkerTriggerComponent="BunkerTriggerComponent",N_.CameraComponent="CameraComponent",N_.CannonBodyComponent="CannonBodyComponent",N_.CarComponnent="CarComponnent",N_.CarDoorComponnent="CarDoorComponnent",N_.ChainComponent="ChainComponent",N_.ColliderComponent="ColliderComponent",N_.EquipComponent="EquipComponent",N_.ExpPointComponent="ExpPointComponent",N_.FogComponent="FogComponent",N_.FsmComponent="FsmComponent",N_.GunSoundComponent="GunSoundComponent",N_.HitInfoComponent="HitInfoComponent",N_.HpHudComponent="HpHudComponent",N_.ItemComponent="ItemComponent",N_.ItemCreatComponent="ItemCreatComponent",N_.ItemTriggerComponent="ItemTriggerComponent",N_.LinkComponent="LinkComponent",N_.MergeComponent="MergeComponent",N_.MoveComponent="MoveComponent",N_.MySelfComponent="MySelfComponent",N_.NavigatorComponent="NavigatorComponent",N_.PuppetComponent="PuppetComponent",N_.QuestComponent="QuestComponent",N_.SakeCameraComponent="SakeCameraComponent",N_.ShadowComponent="ShadowComponent",N_.SkillComponent="SkillComponent",N_.SkinComponent="SkinComponent",N_.SoundComponent="SoundComponent",N_.SummonComponent="SummonComponent",N_.TagComponent="TagComponent",N_.TeamComponent="TeamComponent",N_.TentComponent="TentComponent",N_.TriggerComponent="TriggerComponent",N_.TriggerHudComponent="TriggerHudComponent",N_.TurretComponent="TurretComponent",N_.UnitComponent="UnitComponent",N_.WeaponComponent="WeaponComponent",N_.ZombieComponent="ZombieComponent",N_.ZombieFactoryComponent="ZombieFactoryComponent",class{static LoadAllPrefabRes(t){for(let e=0;e<i.AllPrefabList.length;e++)t.Add3D(o.GetRes(i.AllPrefabList[e]))}static CreatAll3DPrefabPool(){for(let e=0;e<i.AllPrefabList.length;e++)this.Creat3DNodePool(i.AllPrefabList[e])}static Creat3DPrefabPoolBylist(t){for(let e=0;e<t.length;e++)this.Creat3DNodePool(t[e])}static Creat3DNodePool(e,t=0){q.Instance().EcsGameManager().nowGame.gameElementCreator.pool.Creat3DNodePool(e,K.ResModule().Get3DRes(o.GetRes(e)),q.Instance().EcsGameManager().nowGame.gameElementCreator.elementRoot,t)}static Creat3DNodePoolByPath(e,t,i=0){q.Instance().EcsGameManager().nowGame.gameElementCreator.pool.Creat3DNodePool(e,K.ResModule().Get3DRes(t),q.Instance().EcsGameManager().nowGame.gameElementCreator.elementRoot,i)}static CreatPrefabEntity(e,i=null,o=[]){if(""!=e){var a=q.Instance().EcsGameManager().nowGame.world.CreatEntity(),n=q.Instance().EcsGameManager().nowGame.gameElementCreator.GetPrefabData(e);if(0<o.length){let t=0;for(let e=0;e<n.list.length;e++)t<o.length&&n.list[e].name==o[t].name?(N_.AddComponentToEnity(a,o[t],i),t++):N_.AddComponentToEnity(a,n.list[e],i)}else for(let e=0;e<n.list.length;e++)N_.AddComponentToEnity(a,n.list[e],i);return a}console.error("创建预制体失败",e)}static CreatPrefabEntityUsePos(e,i=null,o=null,a=null){return this.CreatPrefabEntity(e,t=>{if(t.componentId==M.id){let e=t;i&&(e.pos.x=i.x,e.pos.y=i.y,e.pos.z=i.z),o&&(e.rotation.x=o.x,e.rotation.y=o.y,e.rotation.z=o.z),a&&(e.scale.x=a.x,e.scale.y=a.y,e.scale.z=a.z)}})}static BanGetLigt(e){}}),F_=class{static SkillInit(e,t,i){b.Warn("初始化技能"),K.DataModule().GetLocal().skill.Get(i.skillID),H.GetData(i,1,.01),i.range=10}static UseSkill(e,a,n){if(0!=a.GetComponent(R).GetAnyScale()&&0!=a.GetComponent(R).GetIsPlaySetPosOffSkill()&&(a.GetComponent(F).nowState==Mf.StateName||a.GetComponent(F).nowState==kf.StateName||a.GetComponent(F).nowState==ui.StateName)){n.cdTime=n.cdMaxTime,a.GetComponent(F).ChangeState(Tt.StateName),n.isSklling=!0,n.skillKeepTime=n.skillTime;let e=V.GetSkillAttRangle(a),t=S.AngleToDir(e),i=a.GetComponent(R),o=(Laya.Vector2.scale(t,n.f1,t),a.GetComponent(w).vec.x=t.x,a.GetComponent(w).vec.z=t.y,a.GetComponent(F).time=n.skillTime,O.CreatPrefabEntityUsePos(N.Bullet_DashBullet,a.GetComponent(M).pos,a.GetComponent(M).rotation));o.GetComponent(C).creatorId=a.id,o.GetComponent(M).rotation.y=a.GetComponent(M).rotation.y,o.GetComponent(C).dmg=n.f2*H.GetWeaponDmg(a)*a.GetComponent(L).skillDmgScale,o.AddComponent(Mt).followTargetId=a.id,o.GetComponent(Mt).followrotation=!1,o.GetComponent(Mt).offset.y=.8,o.GetComponent(kt).keepTime=n.skillTime,i.invincible++}}static SkillUpdate(e,t,i,o){}static SkillDispose(e,t,i,o){let a=t.GetComponent(R);t.GetComponent(F).ChangeState(Mf.StateName),a.invincible--}},O_=(F_.SkillName="Dash",class{static SkillInit(e,t,i){b.Warn("初始化技能"),H.GetData(i),i.range=10}static UseSkill(e,t,i){var o;0==t.GetComponent(R).GetAnyScale()||0==t.GetComponent(R).GetIsPlaySetPosOffSkill()||t.GetComponent(F).nowState!=Mf.StateName&&t.GetComponent(F).nowState!=kf.StateName&&t.GetComponent(F).nowState!=ui.StateName||(i.cdTime=i.cdMaxTime,t.GetComponent(F).ChangeState(gc.StateName),i.isSklling=!0,i.skillKeepTime=i.skillTime,o=V.GetSkillAttRangle(t),o=S.AngleToDir(o),t.GetComponent(R),Laya.Vector2.scale(o,i.f1,o),t.GetComponent(w).vec.x=o.x,t.GetComponent(w).vec.z=o.y,t.GetComponent(F).time=i.skillTime,t.GetComponent(R).invincible++)}static SkillUpdate(e,t,i,o){}static SkillDispose(e,t,i,o){t.GetComponent(R),t.GetComponent(F).ChangeState(Mf.StateName),t.GetComponent(R).invincible--}}),H_=(O_.SkillName="Roll",class{static SkillInit(e,t,i){b.Warn("初始化技能"),H.GetData(i,.001,1,.01),i.range=5}static UseSkill(t,i,o){if(0!=i.GetComponent(R).GetAnyScale()&&(i.GetComponent(F).nowState==Mf.StateName||i.GetComponent(F).nowState==kf.StateName||i.GetComponent(F).nowState==ui.StateName)){o.cdTime=o.cdMaxTime,i.GetComponent(F).ChangeState(pc.StateName),o.isSklling=!0,o.skillKeepTime=o.skillTime;let e=i.GetComponent(R);if(0==o.t3&&(e.attSpeedScale*=o.f4/100,o.t3=1),"EpicAss"==i.GetComponent(ti).weaponSkinSpEffect){let e=t.GetEntityByID(o.effectId2);e&&e.Destory(),e=O.CreatPrefabEntityUsePos(N.Effect_DustZone,i.GetComponent(M).pos),o.effectId2=e.id,e.AddComponent(Mt).followTargetId=i.id,e.GetComponent(Mt).offset.y=.05,e.GetComponent(Mt).followrotation=!1,e.GetComponent(Mt).followScale=!1;t=K.DataModule().GetLocal().skill.Get("AcidFog"),t=(t.F1+(o.level-1)*t.L1)/1.3*i.GetComponent(R).sizeScale;e.GetComponent(M).SetScale(t,t,t),o.t2=0}i.GetComponent(F).time=o.skillTime,o.t1=0}}static SkillUpdate(a,n,s,l){if(s.isSklling){if(s.t1-=l,s.t1<0){let e=O.CreatPrefabEntityUsePos(N.Bullet_SpinBullet,n.GetComponent(M).pos);e.GetComponent(C).creatorId=n.id,e.GetComponent(M).pos.y+=.5,e.GetComponent(C).dmg=s.f3*H.GetSkillDmg(n)*n.GetComponent(L).skillDmgScale,e.GetComponent(v).radius=s.f2*n.GetComponent(R).sizeScale;var r=s.f2/2*n.GetComponent(R).sizeScale;e.GetComponent(M).SetScale(r,r,r),s.t1=s.f1}if(n.GetComponent(F).nowState!=pc.StateName&&(s.skillKeepTime=0),"EpicAss"==n.GetComponent(ti).weaponSkinSpEffect&&(s.t2-=l,s.t2<=0)){r=n.GetComponent(R);s.t2=1;let e=n.GetComponent(v),t=K.DataModule().GetLocal().skill.Get("AcidFog"),i=V.GetUnitByRange(n.GetComponent(M).pos,e.nowMapPos.x,e.nowMapPos.y,t.F1*r.sizeScale,n.id),o=a.GetEntityByID(s.effectId2);o&&(l=(t.F1+(s.level-1)*t.L1)/1.3*r.sizeScale,o.GetComponent(M).SetScale(l,l,l));var h=.01*(t.F1+(s.level-1)*t.L1);for(let e=0;e<i.length;e++)H.HitTarget(i[e],n.id,h*n.GetComponent(R).maxHp*n.GetComponent(L).skillDmgScale,!0)}}}static SkillDispose(t,e,i,o){let a=e.GetComponent(R);if(1==i.t3&&(a.attSpeedScale/=i.f4/100,i.t3=0),e.GetComponent(F).nowState==pc.StateName&&e.GetComponent(F).ChangeState(Mf.StateName),"EpicAss"==e.GetComponent(ti).weaponSkinSpEffect){let e=t.GetEntityByID(i.effectId2);e&&e.Destory()}}}),V_=(H_.SkillName="Spin",class{static SkillInit(e,t,i){b.Warn("初始化技能"),H.GetData(i,1,.001,.01)}static UseSkill(e,o,a){if(0!=o.GetComponent(R).GetAnyScale()&&(o.GetComponent(F).nowState==Mf.StateName||o.GetComponent(F).nowState==kf.StateName||o.GetComponent(F).nowState==ui.StateName)){a.cdTime=a.cdMaxTime,a.isSklling=!0,a.skillKeepTime=a.skillTime;var t,n=o.GetComponent(M);if(o.GetComponent(F).ChangeState(Lc.StateName),a.t1=-10,o.HasComponent(ti.id)&&"SuperAirBlade"==(t=o.GetComponent(ti)).skinSpEffect&&"Dagger"==t.weaponType&&(V.IsInCameraArea(n.pos)&&K.AudioModule().PlayOnce(x.GetSound2("Ultraman")),a.t1=6,a.t2=0,ri.AddSAP(o,.7),a.skillKeepTime=.7,o.GetComponent(R).invincible+=1),-10==a.t1){let e=V.GetSkillAttRangle(o),t=S.AngleToDir(e),i=O.CreatPrefabEntityUsePos(N.Bullet_AirBlade,new Laya.Vector3(n.pos.x,.5,n.pos.z),new Laya.Vector3(0,n.rotation.y,0));i.GetComponent(C).dmg=a.f3*H.GetWeaponDmg(o)*o.GetComponent(L).skillDmgScale,i.GetComponent(w).speed=a.f1,i.GetComponent(kt).keepTime=a.f2,i.GetComponent(C).creatorId=o.id,i.GetComponent(w).dir.x=t.x,i.GetComponent(w).dir.z=t.y,o.GetComponent(F).time=a.skillTime}}}static SkillUpdate(e,a,n,t){if(0<n.t1&&(n.t2-=t,n.t2<=0)){n.t1--,n.t2=.1;let e=S.AngleToDir(a.GetComponent(M).rotation.y),t=a.GetComponent(M),i=a.GetComponent(ti),o=O.CreatPrefabEntityUsePos(N.Bullet_AirBlade,new Laya.Vector3(t.pos.x,.5,t.pos.z),new Laya.Vector3(0,t.rotation.y,0));o.GetComponent(C).dmg=n.f3*H.GetWeaponDmg(a)*a.GetComponent(L).skillDmgScale*i.skinSpEffect_F1*.01,o.GetComponent(w).speed=n.f1,o.GetComponent(kt).keepTime=n.f2,o.GetComponent(C).creatorId=a.id,o.GetComponent(w).dir.x=e.x,o.GetComponent(w).dir.z=e.y,a.GetComponent(F).time=n.skillTime}}static SkillDispose(e,t,i,o){t.GetComponent(F).ChangeState(Mf.StateName),-10!=i.t1&&--t.GetComponent(R).invincible}}),z_=(V_.SkillName="AirBlade",class{static SkillInit(e,t,i){b.Warn("初始化技能"),H.GetData(i,1,1,.001,.001),i.cdMaxTime=ci.SnowSceneCdCut(i.cdMaxTime)}static UseSkill(e,a,n){if(0!=a.GetComponent(R).GetAnyScale()&&(a.GetComponent(F).nowState==Mf.StateName||a.GetComponent(F).nowState==kf.StateName||a.GetComponent(F).nowState==ui.StateName)){n.cdTime=n.cdMaxTime,n.isSklling=!0,n.skillKeepTime=n.skillTime;var s=a.GetComponent(M);a.GetComponent(F).ChangeState(Lc.StateName);let e=V.GetSkillAttRangle(a),t=S.AngleToDir(e),i=N.Bullet_IceBall,o=(a.HasComponent(ti.id)&&"SnowBall"==a.GetComponent(ti).skinSpEffect&&(i=N.Bullet_SnowBall),ci.UseSnowBall()&&(i=N.Bullet_SnowBall),O.CreatPrefabEntityUsePos(i,new Laya.Vector3(s.pos.x,.5*n.f1,s.pos.z),new Laya.Vector3(0,s.rotation.y,0)));o.GetComponent(v).width=2*n.f1;s=2*n.f1/2;o.GetComponent(M).SetScale(s,s,s),o.GetComponent(w).speed=n.f2,o.GetComponent(kt).keepTime=n.f3,o.GetComponent(C).creatorId=a.id,o.GetComponent(oi).keepTime=n.f4,o.GetComponent(w).dir.x=t.x,o.GetComponent(w).dir.z=t.y,a.GetComponent(F).time=n.skillTime}}static SkillUpdate(e,t,i,o){}static SkillDispose(e,t,i,o){t.GetComponent(F).ChangeState(Mf.StateName)}}),W_=(z_.SkillName="IceBall",class{static SkillInit(e,t,i){b.Warn("初始化技能"),H.GetData(i,1,.001,.01,.001)}static UseSkill(e,o,a){if(0!=o.GetComponent(R).GetAnyScale()&&(o.GetComponent(F).nowState==Mf.StateName||o.GetComponent(F).nowState==kf.StateName||o.GetComponent(F).nowState==ui.StateName)){a.cdTime=a.cdMaxTime,a.isSklling=!0,a.skillKeepTime=a.skillTime;var n=o.GetComponent(M);o.GetComponent(F).ChangeState(Lc.StateName);let e=V.GetSkillAttRangle(o),t=S.AngleToDir(e),i=O.CreatPrefabEntityUsePos(N.Bullet_SuckBlood,new Laya.Vector3(n.pos.x,.5,n.pos.z),new Laya.Vector3(0,n.rotation.y,0));i.GetComponent(w).speed=a.f1,i.GetComponent(kt).keepTime=a.f2,i.GetComponent(C).creatorId=o.id,i.GetComponent(oi).keepTime=a.f4,i.GetComponent(oi).F1=a.f3*o.GetComponent(L).skillDmgScale,i.GetComponent(w).dir.x=t.x,i.GetComponent(w).dir.z=t.y,o.GetComponent(F).time=a.skillTime}}static SkillUpdate(e,t,i,o){}static SkillDispose(e,t,i,o){t.GetComponent(F).ChangeState(Mf.StateName)}}),Z_=(W_.SkillName="BloodNeedle",class{static SkillInit(e,t,i){b.Warn("初始化技能"),H.GetData(i)}static UseSkill(e,t,i){t.GetComponent(F).nowState!=bf.StateName&&(i.cdTime=i.cdMaxTime,i.isSklling=!0,i.skillKeepTime=i.skillTime,ri.AddBuffToTarget(t,Jt.BuffName,!1,1,i.f1,i.f2))}static SkillUpdate(e,t,i,o){}static SkillDispose(e,t,i,o){t.GetComponent(F).ChangeState(Mf.StateName)}}),j_=(Z_.SkillName="SelfHeal",class{static SkillInit(e,t,i){b.Warn("初始化技能"),H.GetData(i,1,.01)}static UseSkill(t,i,o){if(i.GetComponent(F).nowState!=bf.StateName){o.cdTime=o.cdMaxTime,o.isSklling=!0,o.skillKeepTime=o.skillTime;let e=t.GetEntityByID(o.effectId);e&&e.Destory(),e=O.CreatPrefabEntityUsePos(N.Effect_DustZone,i.GetComponent(M).pos),o.effectId=e.id,e.AddComponent(Mt).followTargetId=i.id,e.GetComponent(Mt).offset.y=.05,e.GetComponent(Mt).followrotation=!1,e.GetComponent(Mt).followScale=!1;t=o.f1/1.3*i.GetComponent(R).sizeScale;e.GetComponent(M).SetScale(t,t,t),o.t1=.5}}static SkillUpdate(o,a,n,s){if(n.isSklling&&(n.t1-=s,n.t1<=0)){var s=a.GetComponent(R);n.t1=1;let e=a.GetComponent(v),i=V.GetUnitByRange(a.GetComponent(M).pos,e.nowMapPos.x,e.nowMapPos.y,n.f1*s.sizeScale,a.id),t=o.GetEntityByID(n.effectId);t&&(s=n.f1/1.3*s.sizeScale,t.GetComponent(M).SetScale(s,s,s));for(let t=0;t<i.length;t++){let e=o.GetEntityByID(i[t]);V.IsGameMode_Nian()&&e.GetComponent(E).team==a.GetComponent(E).team||H.HitTarget(i[t],a.id,n.f2*a.GetComponent(R).maxHp*a.GetComponent(L).skillDmgScale,!0)}}}static SkillDispose(e,t,i,o){t.GetComponent(F).ChangeState(Mf.StateName);let a=e.GetEntityByID(i.effectId);a&&(i.effectId=-1,a.Destory())}}),K_=(j_.SkillName="AcidFog",class{static SkillInit(e,t,i){b.Warn("初始化技能"),H.GetData(i,1,.001)}static UseSkill(i,t,o){if(t.GetComponent(F).nowState==Mf.StateName||t.GetComponent(F).nowState==kf.StateName||t.GetComponent(F).nowState==ui.StateName){o.cdTime=o.cdMaxTime,o.isSklling=!0,o.skillKeepTime=o.skillTime;var a=t.GetComponent(R);ri.ClearBuffByName(t,Rf.BuffName);let e=O.CreatPrefabEntityUsePos(N.Effect_FrightenZone,t.GetComponent(M).pos);e.AddComponent(Mt).followTargetId=t.id,e.GetComponent(Mt).offset.y=.1,e.GetComponent(Mt).followrotation=!1,e.GetComponent(Mt).followScale=!1;var n,s=o.f1/1.5*a.sizeScale,s=(e.GetComponent(M).SetScale(s,s,s),t.GetComponent(v)),l=t.GetComponent(M),r=V.GetUnitByRange(t.GetComponent(M).pos,s.nowMapPos.x,s.nowMapPos.y,o.f1*a.sizeScale,t.id);for(let t=0;t<r.length;t++){let e=i.GetEntityByID(r[t]);e.GetComponent(R).GetIsNoCtrlEffect()||(ri.AddBuffToTarget(e,li.BuffName,!0,o.f2),n=e.GetComponent(M),K_.vec.x=n.pos.x-l.pos.x,K_.vec.y=n.pos.z-l.pos.z,Laya.Vector2.normalize(K_.vec,K_.vec),n=S.VecToAngle(K_.vec),e.GetComponent(F).ChangeState(uc.StateName),e.GetComponent(F).time=o.f1/20,Laya.Vector2.scale(K_.vec,20,K_.vec),e.GetComponent(w).vec.x=K_.vec.x,e.GetComponent(w).vec.z=K_.vec.y,e.GetComponent(M).rotation.y=n)}}}static SkillUpdate(e,t,i,o){}static SkillDispose(e,t,i,o){}}),q_=K_,Y_=(q_.SkillName="Frighten",q_.vec=new Laya.Vector2(0,0),class{static SkillInit(e,t,i){b.Warn("初始化技能"),H.GetData(i,1,.01)}static UseSkill(t,i,o){if(i.GetComponent(F).nowState!=bf.StateName){o.cdTime=o.cdMaxTime,o.isSklling=!0,o.skillKeepTime=o.skillTime;let e=t.GetEntityByID(o.effectId);e&&e.Destory(),e=O.CreatPrefabEntityUsePos(N.Effect_FrostZone,i.GetComponent(M).pos),o.effectId=e.id,e.AddComponent(Mt).followTargetId=i.id,e.GetComponent(Mt).offset.y=.05,e.GetComponent(Mt).followrotation=!1,e.GetComponent(Mt).followScale=!1;t=o.f1/1.3;e.GetComponent(M).SetScale(t,t,t),o.t1=0}}static SkillUpdate(o,a,n,e){if(n.isSklling&&(n.t1-=e,n.t1<=0)){n.t1=.5;var s,e=a.GetComponent(v),l=V.GetUnitByRange(a.GetComponent(M).pos,e.nowMapPos.x,e.nowMapPos.y,n.f1,a.id);!a.HasComponent(ti.id)||"SongofIce"==(e=a.GetComponent(ti)).skinSpEffect&&0<a.GetComponent(R).hp&&(ri.AddBuffToTarget(a,Jt.BuffName,!1,1,e.skinSpEffect_F1,0,1),n.t1=1);for(let i=0;i<l.length;i++){let e=o.GetEntityByID(l[i]),t=!1;e.HasComponent(ti.id)&&"SongofIce"==(s=e.GetComponent(ti)).skinSpEffect?0<e.GetComponent(R).hp&&(ri.AddBuffToTarget(e,Jt.BuffName,!1,1,s.skinSpEffect_F1,0,1),n.t1=1):t=!0,!t||V.IsGameMode_Nian()&&e.GetComponent(E).team==a.GetComponent(E).team||ri.AddBuffToTarget(e,ni.BuffName,!1,.5,n.f2)}}}static SkillDispose(e,t,i,o){t.GetComponent(F).ChangeState(Mf.StateName);let a=e.GetEntityByID(i.effectId);a&&(i.effectId=-1,a.Destory())}}),Q_=(Y_.SkillName="FrostAura",class{static SkillInit(e,t,i){b.Warn("初始化技能"),H.GetData(i,1,.01,.01,.001)}static UseSkill(e,t,i){0==t.GetComponent(R).GetAnyScale()||0==t.GetComponent(R).GetIsPlaySetPosOffSkill()||t.GetComponent(F).nowState!=Mf.StateName&&t.GetComponent(F).nowState!=kf.StateName&&t.GetComponent(F).nowState!=ui.StateName||(i.cdTime=i.cdMaxTime,i.isSklling=!0,i.skillKeepTime=i.skillTime,"TrampleSlash"==t.GetComponent(ti).weaponSkinSpEffect?t.GetComponent(F).ChangeState(nu.StateName):t.GetComponent(F).ChangeState(bc.StateName),i.t1=.5,t.GetComponent(R).invincible++)}static SkillUpdate(e,a,t,n){if(t.isSklling&&0<=t.t1&&(t.t1-=n,t.t1<0)){let i=a.GetComponent(R),o=a.GetComponent(M),e=O.CreatPrefabEntityUsePos(N.Bullet_Trample,new Laya.Vector3(o.pos.x,.01,o.pos.z));e.GetComponent(v).radius=t.f1*i.sizeScale,e.GetComponent(C).dmg=t.f2*H.GetSkillDmg(a)*a.GetComponent(L).skillDmgScale;n=t.f1/3*i.sizeScale;if(e.GetComponent(C).creatorId=a.id,e.GetComponent(M).SetScale(n,n,n),e.GetComponent(oi).keepTime=t.f4,e.GetComponent(oi).F1=t.f3,"TrampleSlash"==a.GetComponent(ti).weaponSkinSpEffect){let e=a.GetComponent(ti),t=O.CreatPrefabEntityUsePos(N.Bullet_PKBullet,new Laya.Vector3(o.pos.x,.3,o.pos.z));t.GetComponent(v).radius=e.weaponSkinSpEffect_F1*i.sizeScale,t.GetComponent(C).dmg=.01*e.weaponSkinSpEffect_F2*H.GetSkillDmg(a)*a.GetComponent(L).skillDmgScale;n=e.weaponSkinSpEffect_F1*i.sizeScale;t.GetComponent(C).creatorId=a.id,t.GetComponent(M).SetScale(n,n,n)}a.GetComponent(F).ChangeState(Mf.StateName)}}static SkillDispose(e,t,i,o){t.GetComponent(R).invincible--,t.GetComponent(F).ChangeState(Mf.StateName)}}),J_=(Q_.SkillName="Trample",class{static SkillInit(e,t,i){b.Warn("初始化技能"),H.GetData(i,.01)}static UseSkill(e,t,i){if(t.GetComponent(F).nowState!=bf.StateName){i.cdTime=i.cdMaxTime,i.isSklling=!0,i.skillKeepTime=i.skillTime;for(let e=0;e<i.f2;e++){let e=O.CreatPrefabEntityUsePos(N.Bullet_EnergyBall,t.GetComponent(M).pos);e.GetComponent(C).dmg=i.f1*H.GetSkillDmg(t)*t.GetComponent(L).skillDmgScale,e.GetComponent(C).creatorId=t.id,i.idList.push(e.id)}i.t1=0,i.t2=360/i.f2}}static SkillUpdate(t,i,n,s){if(n.isSklling){var l=i.GetComponent(M);n.t1+=360*s;let e=0,a=i.GetComponent(R);for(let o=0;o<n.idList.length;o++){let i=t.GetEntityByID(n.idList[o]);if(i){let e=i.GetComponent(M),t=S.AngleToDir(n.t1+n.t2*o);Laya.Vector2.scale(t,5*a.sizeScale,t),e.pos.x=l.pos.x+t.x,e.pos.y=.5,e.pos.z=l.pos.z+t.y,0<i.GetComponent(v).hasColliderList.length&&(i.GetComponent(C).t1+=s,.5<i.GetComponent(C).t1&&(i.GetComponent(C).t1=0,i.GetComponent(v).hasColliderList=[]))}else e++}n.idList.length==e&&(n.skillKeepTime=0)}}static SkillDispose(i,e,o,t){for(let t=0;t<o.idList.length;t++){let e=i.GetEntityByID(o.idList[t]);e&&e.Destory()}o.idList=[]}}),X_=(J_.SkillName="AroundBalls",class{static SkillInit(e,t,i){b.Warn("初始化技能"),H.GetData(i,.001)}static UseSkill(e,t,i){t.GetComponent(F).nowState!=bf.StateName&&(i.cdTime=i.cdMaxTime,i.isSklling=!0,i.skillKeepTime=i.skillTime,ri.AddBuffToTarget(t,Jf.BuffName,!0,i.f1))}static SkillUpdate(e,t,i,o){}static SkillDispose(e,t,i,o){}}),$_=(X_.SkillName="Invincible",class{static SkillInit(e,t,i){b.Warn("初始化技能"),H.GetData(i,.01,.001,1)}static UseSkill(e,a,n){if(0!=a.GetComponent(R).GetAnyScale()&&(a.GetComponent(F).nowState==Mf.StateName||a.GetComponent(F).nowState==kf.StateName||a.GetComponent(F).nowState==ui.StateName)){n.cdTime=n.cdMaxTime,n.isSklling=!0,n.skillKeepTime=n.skillTime;var s=a.GetComponent(M);a.GetComponent(F).ChangeState(Lc.StateName);let e=V.GetSkillAttRangle(a),t=S.AngleToDir(e),i=O.CreatPrefabEntityUsePos(N.Bullet_Gou,new Laya.Vector3(s.pos.x,.5,s.pos.z),new Laya.Vector3(0,s.rotation.y,0)),o=(i.GetComponent(C).dmg=n.f1*H.GetSkillDmg(a)*a.GetComponent(L).skillDmgScale,i.GetComponent(w).speed=30,i.GetComponent(kt).keepTime=1e3,i.GetComponent(C).creatorId=a.id,i.GetComponent(w).dir.x=t.x,i.GetComponent(w).dir.z=t.y,i.GetComponent(w).banDirCtrl++,i.GetComponent(w).banDirRotationCtrl++,a.GetComponent(F).time=.5,n.effectId=i.id,n.t2=0,n.t1=-1,n.t3=.1,O.CreatPrefabEntityUsePos(N.Effect_Chain));o.GetComponent(Np).soureId=a.id,o.GetComponent(Np).targetId=i.id,n.skillKeepTime=5}}static SkillUpdate(s,l,r,h){if(r.isSklling){let n=s.GetEntityByID(r.effectId);if(n){let i=!1,o=n.GetComponent(v);if(-1==r.t1&&0<o.hasColliderList.length)for(let t=0;t<o.hasColliderList.length;t++){let e=s.GetEntityByID(o.hasColliderList[t]);e&&e.HasComponent(R.id)&&e.id!=l.id&&(V.IsGameMode_Nian()||(ri.AddBuffToTarget(e,li.BuffName,!0,r.f2),e.GetComponent(R).GetIsNoCtrlEffect()||(i=!0,r.t1=e.id)))}let t=n.GetComponent(w),a=n.GetComponent(M),e=t.speed*h;if(Laya.Vector3.scale(t.dir,e,$_.vec3),a.pos.x+=$_.vec3.x,a.pos.z+=$_.vec3.z,r.t2+=e,0<t.speed&&(r.t2>r.f3&&(t.speed=-t.speed),o.isHitWall&&(t.speed=-t.speed,o.hitWithWall=!1,o.isHitWall=!1),i&&(t.speed=-t.speed,o.hitWithWall=!1,o.isHitWall=!1)),t.speed<0){o.isHitWall&&(t.speed=-t.speed,o.hitWithWall=!1,o.isHitWall=!1);var m=l.GetComponent(M);if(r.t2<1)a.pos.x=m.pos.x,a.pos.z=m.pos.z,r.t3-=h,r.t3<0&&(n.Destory(),r.skillKeepTime=0);else{$_.vec2.x=a.pos.x-m.pos.x,$_.vec2.y=a.pos.z-m.pos.z;h=Laya.Vector2.scalarLength($_.vec2),m=(r.t2=h,Laya.Vector2.normalize($_.vec2,$_.vec2),S.VecToAngle($_.vec2));a.rotation.y=m,t.dir.x=$_.vec2.x,t.dir.z=$_.vec2.y;let e=s.GetEntityByID(r.t1);e&&(e.GetComponent(M).pos.x=a.pos.x,e.GetComponent(M).pos.z=a.pos.z)}}}else r.skillKeepTime=0}}static SkillDispose(e,t,i,o){let a=e.GetEntityByID(i.effectId);a&&a.Destory()}}),eI=$_,tI=(eI.SkillName="Hook",eI.vec3=new Laya.Vector3(0,0,0),eI.vec2=new Laya.Vector2(0,0),class{static SkillInit(e,t,i){H.GetData(i,1,.01,.01,.001,.001,1),i.range=i.f1}static UseSkill(e,s,l){if(0!=s.GetComponent(R).GetAnyScale()&&(s.GetComponent(F).nowState==Mf.StateName||s.GetComponent(F).nowState==kf.StateName||s.GetComponent(F).nowState==ui.StateName)){l.cdTime=l.cdMaxTime,s.GetComponent(F).ChangeState(Tc.StateName),l.isSklling=!0,l.skillKeepTime=l.f5,s.GetComponent(R),l.t3=0;let e=N.Effect_PhotonBlade,t=(ci.IsSeaPower(s)&&(e=N.Effect_PhotonBlade3,s.GetComponent(M).isInCameraArea&&K.AudioModule().PlayOnce(x.GetSound2("Ultraman"))),ci.IsLandPower(s)&&(e=N.Effect_PhotonBlade2,s.GetComponent(M).isInCameraArea&&K.AudioModule().PlayOnce(x.GetSound2("Ultraman")),l.t3=2),O.CreatPrefabEntityUsePos(e,s.GetComponent(M).pos)),i=(t.GetComponent(Mt).followTargetId=s.id,t.GetComponent(B).sp.getChildByName("Root").getChildByName("Line")),o=(null!=i&&(i.particleRenderer.stretchedBillboardLengthScale=1.553*l.f1,t.GetComponent(B).sp.getChildByName("Root").getChildByName("p1").transform.localPositionZ=l.f1-.75,null==i.getComponent(n_)&&(i.addComponent(n_),e==N.Effect_PhotonBlade3&&(i.getComponent(n_).speed=.7))),l.effectId=t.id,l.t1=0,s.GetComponent(M)),a=S.AngleToDir(o.rotation.y),n=s.GetComponent(w);n.dir.x=a.x,n.dir.z=a.y,l.t1=0,s.HasComponent(Et.id)&&(l.skillKeepTime+=l.f5-l.f4)}}static SkillUpdate(e,o,a,n){if(a.isSklling){let e=o.GetComponent(w),i=o.GetComponent(M);if(tI.vec2.x=e.dir.x,tI.vec2.y=e.dir.z,0==tI.vec2.x&&0==tI.vec2.y||(i.rotation.y=S.MoveTowardsAngle(i.rotation.y,S.VecToAngle(tI.vec2),a.f6*n)),a.t1-=n,a.t1<0){a.t1=.25;n=S.AngleToDir(i.rotation.y);Laya.Vector2.scale(n,.5*a.f1+.67,n),tI.pos.x=i.pos.x+n.x,tI.pos.z=i.pos.z+n.y;let e=N.Bullet_LazerBullet,t=(2==a.t3&&(e=N.Bullet_LazerBullet2),O.CreatPrefabEntityUsePos(e,tI.pos,i.rotation));t.GetComponent(C).dmg=H.GetSkillDmg(o)*a.f3*.25,t.GetComponent(kt).keepTime=.25,t.GetComponent(M).scale.z=a.f1,t.GetComponent(v).height=a.f1,t.GetComponent(C).creatorId=o.id,t.GetComponent(oi).F1=a.f2,2==a.t3&&ci.LandPowerBullet(t,o)}if(a.f5-a.skillKeepTime>a.f4){let t=o.GetComponent(L).skillList,i=-1;for(let e=0;e<t.length;e++)t[e].skillName==tI.SkillName&&(i=e,i=1==o.GetComponent(R).skillState[i]?e:-1);-1==i&&(a.skillKeepTime=0)}o.GetComponent(F).nowState!=Tc.StateName&&(a.skillKeepTime=0)}}static SkillDispose(e,t,i,o){t.GetComponent(R);let a=e.GetEntityByID(i.effectId);a&&a.Destory(),t.GetComponent(F).nowState==Tc.StateName&&t.GetComponent(F).ChangeState(Mf.StateName)}}),iI=tI,oI=(iI.SkillName="PhotonBlade",iI.vec2=new Laya.Vector2(0,0),iI.pos=new Laya.Vector3(0,0,0),class{static SkillInit(e,t,i){H.GetData(i,.001,1,1),i.cdTime=i.cdMaxTime,i.range=i.f2+5}static UseSkill(e,o,a){if(0!=o.GetComponent(R).GetAnyScale()&&(o.GetComponent(F).nowState==Nc.StateName||o.GetComponent(F).nowState==Ec.StateName||o.GetComponent(F).nowState==Pc.StateName)){a.cdTime=a.cdMaxTime,a.isSklling=!0,a.skillKeepTime=a.f1+.6;let e=o.GetComponent(M),t=O.CreatPrefabEntityUsePos(N.Effect_Danger1,new Laya.Vector3(e.pos.x,.01,e.pos.z)),i=(t.GetComponent(Mt).followTargetId=o.id,t.GetComponent(kt).keepTime=a.f1,t.GetComponent(M).scale.x=2*a.f2,t.GetComponent(M).scale.z=2*a.f2,a.t2=a.f1,a.t1=a.f1+.5,o.GetComponent(R).invincible++,o.GetComponent(w));i.ChangeBanDir(1,!0),i.vec.x=0,i.vec.z=0}}static SkillUpdate(e,i,o,a){if(o.isSklling&&(0<=o.t2&&(o.t2-=a,o.t2<0&&i.GetComponent(F).ChangeState(bc.StateName)),0<=o.t1&&(o.t1-=a,o.t1<0))){let e=i.GetComponent(M),t=O.CreatPrefabEntityUsePos(N.Bullet_BossTrample,new Laya.Vector3(e.pos.x,.01,e.pos.z));t.GetComponent(v).radius=o.f2,t.GetComponent(C).dmg=o.f3;a=o.f2/3;t.GetComponent(C).creatorId=i.id,t.GetComponent(M).SetScale(a,a,a),i.GetComponent(F).ChangeState(Nc.StateName)}}static SkillDispose(e,t,i,o){t.GetComponent(R).invincible--,t.GetComponent(w).ChangeBanDir(-1,!0),t.GetComponent(F).ChangeState(Nc.StateName)}}),aI=(oI.SkillName="NianSkill1",class{static SkillInit(e,t,i){H.GetData(i,.001,1,1,1),i.cdTime=i.cdMaxTime,i.range=5,i.dangerAngle=180}static UseSkill(e,o,a){if(0!=o.GetComponent(R).GetAnyScale()&&(o.GetComponent(F).nowState==Nc.StateName||o.GetComponent(F).nowState==Ec.StateName||o.GetComponent(F).nowState==Pc.StateName)){a.cdTime=a.cdMaxTime,a.isSklling=!0,a.skillKeepTime=a.f1+.6;let e=o.GetComponent(M),t=O.CreatPrefabEntityUsePos(N.Effect_Danger2,new Laya.Vector3(e.pos.x,.01,e.pos.z)),i=(t.GetComponent(Mt).followTargetId=o.id,t.GetComponent(kt).keepTime=a.f1,t.GetComponent(M).scale.x=2*a.f2-.5,t.GetComponent(M).scale.z=2*a.f2-.5,a.t2=a.f1,a.t1=a.f1+.5,o.GetComponent(w));i.banDirRotationCtrl++,i.ChangeBanDir(1,!0),i.vec.x=0,i.vec.z=0}}static SkillUpdate(e,i,o,t){if(o.isSklling&&0<=o.t2&&(o.t2-=t,o.t2<0)){i.GetComponent(F).ChangeState(Hc.StateName);let e=i.GetComponent(M),t=(e.rotation.y=S.VecToAngle(S.AngleToDir(e.rotation.y)),O.CreatPrefabEntityUsePos(N.Bullet_NianSkill2Bullet,new Laya.Vector3(e.pos.x,1.45,e.pos.z),e.rotation));t.GetComponent(v).radius=o.f2,t.GetComponent(C).dmg=o.f4,t.GetComponent(C).creatorId=i.id}}static SkillDispose(e,t,i,o){t.GetComponent(w).banDirRotationCtrl--,t.GetComponent(w).ChangeBanDir(-1,!0),t.GetComponent(F).ChangeState(Nc.StateName)}}),nI=(aI.SkillName="NianSkill2",class{static SkillInit(e,t,i){H.GetData(i,.001,1,1,1,.001,1),i.cdTime=i.cdMaxTime,i.range=5,i.dangerAngle=180}static UseSkill(e,i,o){if(0!=i.GetComponent(R).GetAnyScale()&&(i.GetComponent(F).nowState==Nc.StateName||i.GetComponent(F).nowState==Ec.StateName||i.GetComponent(F).nowState==Pc.StateName)){o.cdTime=o.cdMaxTime,i.GetComponent(F).ChangeState(Oc.StateName),o.isSklling=!0,o.skillKeepTime=o.f5+o.f1;let e=i.GetComponent(M),t=O.CreatPrefabEntityUsePos(N.Effect_Danger3,new Laya.Vector3(e.pos.x,.01,e.pos.z));t.GetComponent(Mt).followTargetId=i.id,t.GetComponent(kt).keepTime=o.f1,t.GetComponent(M).scale.x=o.f3,t.GetComponent(M).scale.z=o.f2,o.t3=1,q.Random()<.5&&(o.t3=-1),o.t1=0,o.t2=o.f1}}static SkillUpdate(e,n,s,o){if(s.isSklling)if(0<=s.t2){if(s.t2-=o,s.t2<0){let e=N.Effect_NianSkill3Effect,t=O.CreatPrefabEntityUsePos(e,n.GetComponent(M).pos),i=(t.GetComponent(Mt).followTargetId=n.id,t.GetComponent(Mt).offset.y=1.6,s.effectId=t.id,n.GetComponent(F).ChangeState(Vc.StateName),n.GetComponent(M)),o=S.AngleToDir(i.rotation.y),a=n.GetComponent(w);a.dir.x=o.x,a.dir.z=o.y}}else{let e=n.GetComponent(w),i=n.GetComponent(M);if(nI.vec2.x=e.dir.x,nI.vec2.y=e.dir.z,0==nI.vec2.x&&0==nI.vec2.y||(i.rotation.y+=s.t3*s.f4*o,i.rotation.y=S.VecToAngle(S.AngleToDir(i.rotation.y))),s.t1-=o,s.t1<0){s.t1=.25;o=S.AngleToDir(i.rotation.y);Laya.Vector2.scale(o,.5*s.f2,o),nI.pos.x=i.pos.x+o.x,nI.pos.z=i.pos.z+o.y;let e=N.Bullet_NianSkill3Bullet,t=O.CreatPrefabEntityUsePos(e,nI.pos,i.rotation);t.GetComponent(C).dmg=.25*s.f6,t.GetComponent(kt).keepTime=.25,t.GetComponent(M).scale.z=s.f2,t.GetComponent(M).scale.x=s.f3,t.GetComponent(v).height=s.f2,t.GetComponent(C).creatorId=n.id}}}static SkillDispose(e,t,i,o){t.GetComponent(R);let a=e.GetEntityByID(i.effectId);a&&a.Destory(),t.GetComponent(F).nowState==Vc.StateName&&t.GetComponent(F).ChangeState(Nc.StateName)}}),sI=nI,lI=(sI.SkillName="NianSkill3",sI.vec2=new Laya.Vector2(0,0),sI.pos=new Laya.Vector3(0,0,0),class{static SkillInit(e,t,i){H.GetData(i,.001,1,1,1,.001,1),i.range=5,i.dangerAngle=180}static UseSkill(e,t,i){0!=t.GetComponent(R).GetAnyScale()&&(i.cdTime=i.cdMaxTime,i.isSklling=!0,i.skillKeepTime=i.f5+i.f1,i.t3=1,q.Random()<.5&&(i.t3=-1),i.t1=0,i.t2=i.f1,t.GetComponent(F).step1=0,t.GetComponent(F).ChangeState(lu.StateName))}static SkillUpdate(e,l,t,i){let r=l.GetComponent(R),h=l.GetComponent(U),m=l.GetComponent(F);if(h.gunMode){if(0==m.step1){l.GetComponent(xt).nowUpBodyClipName="",l.GetComponent(xt).useUpBodyClipName=h.act0Clip,m.step1=1,l.GetComponent(F).time=h.act0Time,h.shotCDTime=h.shotCD*(1/r.GetAttSpeedScale()),l.GetComponent(Qc).bulletCount+=1;let e=l.GetComponent(M).rotation.y,t=new Laya.Vector3(0,0,0),a=new Laya.Vector3(0,0,0),n=new Laya.Vector3(0,e,0),s=(lI.bulletScale.x=1,lI.bulletScale.y=1,lI.bulletScale.z=1);t.x=l.GetComponent(M).pos.x,t.y=l.GetComponent(M).pos.y+m.t6,t.z=l.GetComponent(M).pos.z,a.x=l.GetComponent(M).pos.x,a.y=l.GetComponent(M).pos.y+m.t6,a.z=l.GetComponent(M).pos.z;var o=S.VecRotate(new Laya.Vector2(0,1),e);Laya.Vector2.scale(o,m.t5,o),t.x-=o.x,t.z+=o.y,lI.color.x=1,lI.color.y=1,lI.color.z=1,lI.color.w=.82,1!=r.sizeScale&&(s*=r.sizeScale,lI.bulletScale.x=lI.bulletScale.x*r.sizeScale,lI.bulletScale.y=lI.bulletScale.y*r.sizeScale,lI.bulletScale.z=lI.bulletScale.z*r.sizeScale);let i=O.CreatPrefabEntityUsePos(N.Effect_FrieEffet2,t,n,lI.bulletScale);i.HasComponent(w.id)&&(Laya.Vector2.normalize(o,o),i.GetComponent(w).dir.x=-o.x,i.GetComponent(w).dir.z=o.y);var d=e;for(let o=0;o<11;o++){let t=d;{let e=0;t=o==(e=5)?d:(c=o+1,o<e?d-6*c:d+6*(c-(e+1)))}var c=S.VecRotate(new Laya.Vector2(0,1),t);Laya.Vector2.scale(c,m.t5,c);let i=O.CreatPrefabEntityUsePos(m.str1,a,n,lI.bulletScale);if(i.HasComponent(w.id)){let e=h.attackRange/i.GetComponent(w).speed;l.GetComponent(U).isSniperRifle&&(e=h.sniperRifleattRange/i.GetComponent(w).speed),i.GetComponent(kt).keepTime=e}if(null!=i.GetComponent(B).sp){let e=i.GetComponent(B).sp.particleSystem;e&&(e.startColorConstant.x=lI.color.x,e.startColorConstant.y=lI.color.y,e.startColorConstant.z=lI.color.z,e.startColorConstant.w=lI.color.w)}i.GetComponent(v).radius=i.GetComponent(v).radius*s,i.GetComponent(C).dmg=r.dmg,i.HasComponent(w.id)&&(Laya.Vector2.normalize(c,c),i.GetComponent(w).dir.x=-c.x,i.GetComponent(w).dir.z=c.y),i.GetComponent(C).creatorId=l.id}m.t8=.2}1==m.step1&&(m.t8-=i,m.t8<=0&&(m.step1=0))}}static SkillDispose(e,t,i,o){}}),rI=lI,hI=(rI.SkillName="RainOfBullets",rI.bulletScale=new Laya.Vector3(1,1,1),rI.color=new Laya.Vector4(1,1,1,1),class{static SkillInit(e,t,i){H.GetData(i,.001,1,1,.001),b.Warn("初始化技能",i)}static UseSkill(e,n,s){if(n.GetComponent(F).nowState!=bf.StateName){s.cdTime=s.cdMaxTime,s.isSklling=!0;let e=n.GetComponent(M),t=O.CreatPrefabEntityUsePos(N.Bullet_FrozenMine,new Laya.Vector3(e.pos.x,-.29,e.pos.z)),i=t.GetComponent(B).sp.meshRenderer.material,o=(i.albedoColor=new Laya.Vector4(1,1,1,1),i.renderMode=Laya.BlinnPhongMaterial.RENDERMODE_TRANSPARENT,t.GetComponent(B).sp.meshRenderer.material=i,s.effectId=t.id,s.t1=s.f1,n.GetComponent(E)),a=new E;a.netId=o.netId,a.team=o.team,t.AddComponentAdv(E,a),t.GetComponent(C).creatorId=n.id,t.GetComponent(oi).keepTime=s.f4,s.skillKeepTime=s.skillTime+s.t1,t.GetComponent(kt).keepTime=s.f1+1}}static SkillUpdate(e,t,o,i){if(o.isSklling&&(o.t1-=i,o.t1<0)){o.t1=0;let i=e.GetEntityByID(o.effectId);if(i&&!i.HasComponent(v.id)){if("Local"==t.GetComponent(E).netId){let e=i.GetComponent(B),t=e.sp.meshRenderer.material;t.albedoColor=new Laya.Vector4(1,1,1,.5),e.sp.meshRenderer.material=t}else i.GetComponent(M).SetScale(0,0,0);let e=new v;e.radius=o.f2,i.AddComponentAdv(v,e),i.GetComponent(kt).keepTime=5e7}}}static SkillDispose(e,t,i,o){}}),mI=(hI.SkillName="FrozenMine",class{static SkillInit(e,t,i){H.GetData(i,.001,.01,1,1),b.Warn("初始化技能",i)}static UseSkill(e,t,i){t.GetComponent(F).nowState!=bf.StateName&&(i.isSklling=!0,i.skillKeepTime=i.skillTime,i.cdTime=i.cdMaxTime,ri.AddBuffToTarget(t,Qf.BuffName,!0,i.f1))}static SkillUpdate(e,t,i,o){}static SkillDispose(e,t,i,o){}}),dI=(mI.SkillName="Shield",class{static SkillInit(e,t,i){b.Warn("初始化技能"),H.GetData(i,.001,1,1,.001,1,1)}static UseSkill(e,a,n){if(a.GetComponent(F).nowState==Mf.StateName||a.GetComponent(F).nowState==kf.StateName||a.GetComponent(F).nowState==ui.StateName){n.isSklling=!0,n.skillKeepTime=n.skillTime,n.cdTime=n.cdMaxTime;let e=a.GetComponent(M),t=O.CreatPrefabEntity(N.Item_Turret),i=(t.GetComponent(M).SetPos(e.pos),a.GetComponent(E)),o=new E;o.netId=i.netId,o.team=i.team,t.AddComponentAdv(E,o),t.GetComponent(y).createId=a.id,t.GetComponent(Iu).attCD=n.f4,t.GetComponent(Iu).amg=n.f5,t.GetComponent(Iu).t1=n.f4,t.GetComponent(kt).keepTime=n.f1,t.GetComponent(y).hp=n.f6,t.GetComponent(y).maxhp=n.f6,"Local"==o.netId?t.GetComponent(D).useUICtrl=D.MyTurret:t.GetComponent(D).useUICtrl=D.EnemyTurret}}static SkillUpdate(e,t,i,o){}static SkillDispose(e,t,i,o){}}),cI=(dI.SkillName="Turret",class{static SkillInit(e,t,i){H.GetData(i,.001,1,1,.001),b.Warn("初始化技能",i)}static UseSkill(e,t,i){t.GetComponent(F).nowState!=bf.StateName&&(i.cdTime=i.cdMaxTime,i.isSklling=!0,i.skillKeepTime=i.skillTime,i=t.GetComponent(M),O.CreatPrefabEntityUsePos(N.Item_Robot,new Laya.Vector3(i.pos.x,0,i.pos.z)).GetComponent(F).ChangeState(hu.StateName))}static SkillUpdate(e,t,i,o){}static SkillDispose(e,t,i,o){}});cI.SkillName="MechanicalTracking";var uI,pI=class{},gI=(pI.BuffMethod={},pI.SkillMethod={},(G=uI=uI||{}).SkillInit="SkillInit",G.SkillUpdate="SkillUpdate",G.SkillAddBuffUpdate="SkillAddBuffUpdate",G.UseSkill="UseSkill",G.SkillDispose="SkillDispose",function(){const e=[];for(var t in uI)e.push(t);return e}());function fI(t){for(let e=0;e<gI.length;e++){var i=gI[e];t[gI[e]]&&(pI.SkillMethod[i]||(pI.SkillMethod[i]={}),pI.SkillMethod[i][t.SkillName]=t[gI[e]])}}var _I=class{static SkillInit(e,t,i){b.Warn("初始化技能"),H.GetData(i,1,1,1,1,1)}static UseSkill(e,a,n){if(0!=a.GetComponent(R).GetAnyScale()&&(a.GetComponent(F).nowState==Mf.StateName||a.GetComponent(F).nowState==kf.StateName||a.GetComponent(F).nowState==ui.StateName)){n.isSklling=!0,n.cdTime=n.cdMaxTime,n.skillKeepTime=n.skillTime,a.GetComponent(F).ChangeState(Lc.StateName);let e=a.GetComponent(M),t=V.GetSkillAttRangle(a),i=S.AngleToDir(t),o=O.CreatPrefabEntityUsePos(N.Bullet_Grenade,new Laya.Vector3(e.pos.x,.5*n.f1,e.pos.z),new Laya.Vector3(0,e.rotation.y,0));o.GetComponent(C).creatorId=a.id,o.GetComponent(w).dir.x=i.x,o.GetComponent(w).dir.z=i.y,o.GetComponent(w).speed=n.f2,o.GetComponent(oi).F2=n.f1,o.GetComponent(oi).F1=n.f3,o.GetComponent(C).dmg=n.f4,K.AudioModule().PlayOnce(x.GetSound2("Grenade"));a=n.f1/n.f2;o.GetComponent(kt).keepTime=a}}static SkillUpdate(e,t,i,o){}static SkillDispose(e,t,i,o){}},II=(_I.SkillName="Grenade",class{static SkillInit(e,t,i){b.Warn("初始化技能"),H.GetData(i,1,1,1,1,1)}static UseSkill(e,i,o){if(0!=i.GetComponent(R).GetAnyScale()&&(i.GetComponent(F).nowState==Mf.StateName||i.GetComponent(F).nowState==kf.StateName||i.GetComponent(F).nowState==ui.StateName)){o.cdTime=o.cdMaxTime,o.isSklling=!0,o.skillKeepTime=o.skillTime;let e=new Laya.Vector3(0,0,0);e.x=0,e.y=0,e.z=0;var a=V.GetSkillAttRangle(i),n=(e.x=i.GetComponent(M).pos.x,e.y=i.GetComponent(M).pos.y,e.z=i.GetComponent(M).pos.z,new Laya.Vector2(0,1)),n=S.VecRotate(n,a);Laya.Vector2.scale(n,2,n),e.x-=n.x,e.z+=n.y,i.GetComponent(F).ChangeState(Lc.StateName);let t=O.CreatPrefabEntityUsePos(N.Item_RockWall,e,new Laya.Vector3(0,a,0));t.GetComponent(y).maxhp=o.f1,t.GetComponent(y).hp=o.f1}}static SkillUpdate(e,t,i,o){}static SkillDispose(e,t,i,o){}}),CI=(II.SkillName="RockWall",class{static SkillInit(e,t,i){b.Warn("初始化技能"),H.GetData(i,1,1)}static UseSkill(o,a,n){if(a.GetComponent(F).nowState==Mf.StateName||a.GetComponent(F).nowState==kf.StateName||a.GetComponent(F).nowState==ui.StateName){n.isSklling=!0,n.skillKeepTime=n.skillTime,n.cdTime=n.cdMaxTime;var e=a.GetComponent(v),s=V.GetUnitByRange(a.GetComponent(M).pos,e.nowMapPos.x,e.nowMapPos.y,n.f1,a.id);for(let i=0;i<s.length;i++){let e=s[i],t=o.GetEntityByID(e);H.HitTarget(t.id,a.id,n.f2,!0),O.CreatPrefabEntityUsePos(N.Effect_LightEffect,t.GetComponent(M).pos)}}}static SkillUpdate(e,t,i,o){}static SkillDispose(e,t,i,o){}}),GI=(CI.SkillName="JusticeFromHeaven",class{static SkillInit(e,t,i){b.Warn("初始化技能"),H.GetData(i,1,1)}static UseSkill(e,n,s){if(n.GetComponent(F).nowState==Mf.StateName||n.GetComponent(F).nowState==kf.StateName||n.GetComponent(F).nowState==ui.StateName){s.isSklling=!0,s.skillKeepTime=s.skillTime,s.cdTime=s.cdMaxTime;let e=N.Effect_NianSkill3Effect,t=O.CreatPrefabEntityUsePos(e,n.GetComponent(M).pos),i=(t.GetComponent(Mt).followTargetId=n.id,t.GetComponent(Mt).offset.y=1,s.effectId=t.id,n.GetComponent(M)),o=S.AngleToDir(i.rotation.y),a=n.GetComponent(w);a.dir.x=o.x,a.dir.z=o.y}}static SkillUpdate(e,t,i,o){}static SkillDispose(e,t,i,o){}}),SI=(GI.SkillName="ShamisenRealFire",class{static SkillInit(e,t,i){b.Warn("初始化技能",i.skillID,i),K.DataModule().GetLocal().skill.Get(i.skillID),H.GetItemData(i,1,.01,.001,.01),i.range=10}static UseSkill(e,n,s){if(0!=n.GetComponent(R).GetAnyScale()&&0!=n.GetComponent(R).GetIsPlaySetPosOffSkill()&&(n.GetComponent(F).nowState==Mf.StateName||n.GetComponent(F).nowState==kf.StateName||n.GetComponent(F).nowState==ui.StateName)){s.cdTime=s.cdMaxTime,n.GetComponent(F).ChangeState(Tt.StateName),s.isSklling=!0,s.skillKeepTime=s.f3;let e=V.GetSkillAttRangle(n),t=S.AngleToDir(e),i=n.GetComponent(R),a=(Laya.Vector2.scale(t,s.f1,t),n.GetComponent(w).vec.x=t.x,n.GetComponent(w).vec.z=t.y,n.GetComponent(F).time=s.f3,O.CreatPrefabEntityUsePos(N.Bullet_DashBullet,n.GetComponent(M).pos,n.GetComponent(M).rotation));a.GetComponent(C).creatorId=n.id,a.GetComponent(M).rotation.y=n.GetComponent(M).rotation.y,a.GetComponent(C).dmg=s.f2*H.GetWeaponDmg(n)*n.GetComponent(L).skillDmgScale,a.GetComponent(C).dmgDynamicFunc=function(e,t,i){let o=q.NowGameWorld.GetEntityByID(e);return o.GetComponent(ut)?(e=o.GetComponent(R),n.HasComponent(Lt.id)?e.hp*s.f4:e.hp*s.f2):a.GetComponent(C).dmg},a.AddComponent(Mt).followTargetId=n.id,a.GetComponent(Mt).followrotation=!1,a.GetComponent(Mt).offset.y=.8,a.GetComponent(kt).keepTime=s.f3,0==s.t3&&(n.GetComponent(v).colliderNoMove=!0,i.invincible++,s.t3=1)}}static SkillUpdate(e,t,i,o){}static SkillDispose(e,t,i,o){let a=t.GetComponent(R);t.GetComponent(F).ChangeState(Mf.StateName),1==i.t3&&(t.GetComponent(v).colliderNoMove=!1,a.invincible--,i.t3=0)}}),yI=(SI.SkillName="ZombieMode_Dash",class{static SkillInit(e,t,i){b.Warn("初始化技能",i.skillID),H.GetItemData(i,.001,1,.01,.01,.001),i.range=5}static UseSkill(t,i,o){if(0!=i.GetComponent(R).GetAnyScale()&&(i.GetComponent(F).nowState==Mf.StateName||i.GetComponent(F).nowState==kf.StateName||i.GetComponent(F).nowState==ui.StateName)){o.cdTime=o.cdMaxTime,i.GetComponent(F).ChangeState(pc.StateName),o.isSklling=!0,o.skillKeepTime=o.f5;let e=i.GetComponent(R);if(0==o.t3&&(e.attSpeedScale*=o.f4,e.superArmor++,o.t3=1),"EpicAss"==i.GetComponent(ti).weaponSkinSpEffect){let e=t.GetEntityByID(o.effectId2);e&&e.Destory(),e=O.CreatPrefabEntityUsePos(N.Effect_DustZone,i.GetComponent(M).pos),o.effectId2=e.id,e.AddComponent(Mt).followTargetId=i.id,e.GetComponent(Mt).offset.y=.05,e.GetComponent(Mt).followrotation=!1,e.GetComponent(Mt).followScale=!1;t=K.DataModule().GetLocal().skill.Get("AcidFog"),t=(t.F1+(o.level-1)*t.L1)/1.3*i.GetComponent(R).sizeScale;e.GetComponent(M).SetScale(t,t,t),o.t2=0}i.GetComponent(F).time=o.f5,o.t1=0}}static SkillUpdate(a,n,s,l){if(s.isSklling){if(s.t1-=l,s.t1<0){let e=O.CreatPrefabEntityUsePos(N.Bullet_SpinBullet,n.GetComponent(M).pos);e.GetComponent(C).creatorId=n.id,e.GetComponent(M).pos.y+=.5,e.GetComponent(C).dmg=s.f3*H.GetSkillDmg(n)*n.GetComponent(L).skillDmgScale,e.GetComponent(v).radius=s.f2*n.GetComponent(R).sizeScale;var r=s.f2/2*n.GetComponent(R).sizeScale;e.GetComponent(M).SetScale(r,r,r),s.t1=s.f1}if(n.GetComponent(F).nowState!=pc.StateName&&(s.skillKeepTime=0),"EpicAss"==n.GetComponent(ti).weaponSkinSpEffect&&(s.t2-=l,s.t2<=0)){r=n.GetComponent(R);s.t2=1;let e=n.GetComponent(v),t=K.DataModule().GetLocal().skill.Get("AcidFog"),i=V.GetUnitByRange(n.GetComponent(M).pos,e.nowMapPos.x,e.nowMapPos.y,t.F1*r.sizeScale,n.id),o=a.GetEntityByID(s.effectId2);o&&(l=(t.F1+(s.level-1)*t.L1)/1.3*r.sizeScale,o.GetComponent(M).SetScale(l,l,l));var h=.01*(t.F1+(s.level-1)*t.L1);for(let e=0;e<i.length;e++)H.HitTarget(i[e],n.id,h*n.GetComponent(R).maxHp*n.GetComponent(L).skillDmgScale,!0)}}}static SkillDispose(t,e,i,o){let a=e.GetComponent(R);if(1==i.t3&&(a.attSpeedScale/=i.f4,a.superArmor--,i.t3=0),e.GetComponent(F).nowState==pc.StateName&&e.GetComponent(F).ChangeState(Mf.StateName),"EpicAss"==e.GetComponent(ti).weaponSkinSpEffect){let e=t.GetEntityByID(i.effectId2);e&&e.Destory()}}}),wI=(yI.SkillName="ZombieMode_Spin",class{static SkillInit(e,t,i){b.Warn("初始化技能"),H.GetItemData(i,1,.001,1,.001)}static UseSkill(e,a,n){if(0!=a.GetComponent(R).GetAnyScale()&&(a.GetComponent(F).nowState==Mf.StateName||a.GetComponent(F).nowState==kf.StateName||a.GetComponent(F).nowState==ui.StateName)){n.cdTime=n.cdMaxTime,n.isSklling=!0,n.skillKeepTime=n.skillTime;var t,s=a.GetComponent(M);if(a.GetComponent(F).ChangeState(Lc.StateName),n.t1=-10,a.HasComponent(ti.id)&&"SuperAirBlade"==(t=a.GetComponent(ti)).skinSpEffect&&"Dagger"==t.weaponType&&(V.IsInCameraArea(s.pos)&&K.AudioModule().PlayOnce(x.GetSound2("Ultraman")),n.t1=6,n.t2=0,ri.AddSAP(a,.7),n.skillKeepTime=.7,a.GetComponent(R).invincible+=1),-10==n.t1){let e=V.GetSkillAttRangle(a),t=S.AngleToDir(e),i=O.CreatPrefabEntityUsePos(N.Bullet_ZombieMode_AirBlade,new Laya.Vector3(s.pos.x,.5,s.pos.z),new Laya.Vector3(0,s.rotation.y,0)),o=(i.GetComponent(C).dmg=0,i.GetComponent(w).speed=n.f1,i.GetComponent(kt).keepTime=n.f2,i.GetComponent(C).creatorId=a.id,i.GetComponent(w).dir.x=t.x,i.GetComponent(w).dir.z=t.y,i.GetComponent(oi));o.keepTime=n.f4,o.F1=t.x,o.F2=t.y,o.F3=n.f3/o.keepTime,a.GetComponent(F).time=n.skillTime}}}static SkillUpdate(e,o,a,t){if(0<a.t1&&(a.t2-=t,a.t2<=0)){a.t1--,a.t2=.1;let e=S.AngleToDir(o.GetComponent(M).rotation.y),t=o.GetComponent(M),i=(o.GetComponent(ti),O.CreatPrefabEntityUsePos(N.Bullet_ZombieMode_AirBlade,new Laya.Vector3(t.pos.x,.5,t.pos.z),new Laya.Vector3(0,t.rotation.y,0)));i.GetComponent(C).dmg=0,i.GetComponent(w).speed=a.f1,i.GetComponent(kt).keepTime=a.f2,i.GetComponent(C).creatorId=o.id,i.GetComponent(w).dir.x=e.x,i.GetComponent(w).dir.z=e.y,i.GetComponent(oi).keepTime=a.f4,i.GetComponent(oi).F1=e.x,i.GetComponent(oi).F2=e.y,i.GetComponent(oi).F3=a.f3/a.f4,o.GetComponent(F).time=a.skillTime}}static SkillDispose(e,t,i,o){t.GetComponent(F).ChangeState(Mf.StateName),-10!=i.t1&&--t.GetComponent(R).invincible}}),vI=(wI.SkillName="ZombieMode_AirBlade",class{static SkillInit(e,t,i){b.Warn("初始化技能",i.skillName),H.GetItemData(i,1,1,.001,.001,1),i.cdMaxTime=ci.SnowSceneCdCut(i.cdMaxTime)}static UseSkill(a,n,s){if(0!=n.GetComponent(R).GetAnyScale()&&(n.GetComponent(F).nowState==Mf.StateName||n.GetComponent(F).nowState==kf.StateName||n.GetComponent(F).nowState==ui.StateName)){s.cdTime=s.cdMaxTime,s.isSklling=!0,s.skillKeepTime=s.skillTime;var l=n.GetComponent(M);n.GetComponent(F).ChangeState(Lc.StateName);let e=V.GetSkillAttRangle(n),t=S.AngleToDir(e),i=N.Bullet_ZombieMode_IceBall,o=O.CreatPrefabEntityUsePos(i,new Laya.Vector3(l.pos.x,.5*s.f1,l.pos.z),new Laya.Vector3(0,l.rotation.y,0));o.GetComponent(v).width=2*s.f1;l=2*s.f1/2;o.GetComponent(M).SetScale(l,l,l),o.GetComponent(w).speed=s.f2,o.GetComponent(kt).keepTime=s.f3,o.GetComponent(C).creatorId=n.id,o.GetComponent(C).onDestroyFunc=function(){console.log("冰球引爆");var e=o.GetComponent(v),t=o.GetComponent(M),i=(O.CreatPrefabEntityUsePos(N.Effect_MagicNovaBlue,new Laya.Vector3(t.pos.x,0,t.pos.z),new Laya.Vector3(-90,0,0),new Laya.Vector3(s.f5/2,s.f5/2,s.f5/2)),V.GetUnitByRange(t.pos,e.nowMapPos.x,e.nowMapPos.y,s.f5,n.id));for(let t=0;t<i.length;t++){let e=a.GetEntityByID(i[t]);e.GetComponent(E).team==n.GetComponent(E).team||e.GetComponent(R).GetIsNoCtrlEffect()||ri.AddBuffToTarget(e,Rf.BuffName,!0,s.f4)}},o.GetComponent(w).dir.x=t.x,o.GetComponent(w).dir.z=t.y,n.GetComponent(F).time=s.skillTime}}static SkillUpdate(e,t,i,o){}static SkillDispose(e,t,i,o){t.GetComponent(F).ChangeState(Mf.StateName)}}),DI=(vI.SkillName="ZombieMode_IceBall",class{static SkillInit(e,t,i){b.Warn("初始化技能"),H.GetItemData(i,1,.001,1,.001,1)}static UseSkill(a,n,s){if(0!=n.GetComponent(R).GetAnyScale()&&(n.GetComponent(F).nowState==Mf.StateName||n.GetComponent(F).nowState==kf.StateName||n.GetComponent(F).nowState==ui.StateName)){s.cdTime=s.cdMaxTime,s.isSklling=!0,s.skillKeepTime=s.skillTime;var i=n.GetComponent(M);n.GetComponent(F).ChangeState(Lc.StateName);let e=V.GetSkillAttRangle(n),t=S.AngleToDir(e),o=O.CreatPrefabEntityUsePos(N.Bullet_ZombieMode_SuckBlood,new Laya.Vector3(i.pos.x,.5,i.pos.z),new Laya.Vector3(0,i.rotation.y,0));o.GetComponent(w).speed=s.f1,o.GetComponent(kt).keepTime=s.f2,o.GetComponent(C).creatorId=n.id,o.GetComponent(C).onDestroyFunc=function(){console.log("吸血针引爆");var e=o.GetComponent(v),t=o.GetComponent(M),i=(O.CreatPrefabEntityUsePos(N.Effect_MagicNovaRed,new Laya.Vector3(t.pos.x,.1,t.pos.z),new Laya.Vector3(-90,0,0),new Laya.Vector3(s.f5/2,s.f5/2,s.f5/2)),V.GetUnitByRange(t.pos,e.nowMapPos.x,e.nowMapPos.y,s.f5,n.id));for(let t=0;t<i.length;t++){let e=a.GetEntityByID(i[t]);e.GetComponent(E).team==n.GetComponent(E).team||e.GetComponent(R).GetIsNoCtrlEffect()||(console.log("加吸血buff"),ri.AddBuffToTarget(e,g_.BuffName,!0,s.f4,s.f3,0,0,0,n.id))}},o.GetComponent(w).dir.x=t.x,o.GetComponent(w).dir.z=t.y,n.GetComponent(F).time=s.skillTime}}static SkillUpdate(e,t,i,o){}static SkillDispose(e,t,i,o){t.GetComponent(F).ChangeState(Mf.StateName)}}),UI=(DI.SkillName="ZombieMode_BloodNeedle",class{static SkillInit(e,t,i){b.Warn("初始化技能"),H.GetItemData(i),i.range=10}static UseSkill(e,t,i){var o;0==t.GetComponent(R).GetAnyScale()||0==t.GetComponent(R).GetIsPlaySetPosOffSkill()||t.GetComponent(F).nowState!=Mf.StateName&&t.GetComponent(F).nowState!=kf.StateName&&t.GetComponent(F).nowState!=ui.StateName||(i.cdTime=i.cdMaxTime,t.GetComponent(F).ChangeState(gc.StateName),i.isSklling=!0,i.skillKeepTime=i.skillTime,o=V.GetSkillAttRangle(t),o=S.AngleToDir(o),t.GetComponent(R),Laya.Vector2.scale(o,i.f1,o),t.GetComponent(w).vec.x=o.x,t.GetComponent(w).vec.z=o.y,t.GetComponent(F).time=i.skillTime,0==i.t3&&(t.GetComponent(R).invincible++,i.t3=1))}static SkillUpdate(e,t,i,o){}static SkillDispose(e,t,i,o){t.GetComponent(R),t.GetComponent(F).ChangeState(Mf.StateName),1==i.t3&&(t.GetComponent(R).invincible--,i.t3=0)}}),LI=(UI.SkillName="ZombieMode_Roll",class{static SkillInit(e,t,i){b.Warn("初始化技能"),H.GetItemData(i)}static UseSkill(e,t,i){t.GetComponent(F).nowState!=bf.StateName&&(i.cdTime=i.cdMaxTime,i.isSklling=!0,i.skillKeepTime=i.skillTime,ri.AddBuffToTarget(t,Jt.BuffName,!1,1,i.f1,i.f2))}static SkillUpdate(e,t,i,o){}static SkillDispose(e,t,i,o){t.GetComponent(F).ChangeState(Mf.StateName)}}),BI=(LI.SkillName="ZombieMode_SelfHeal",class{static SkillInit(e,t,i){b.Warn("初始化技能"),H.GetItemData(i,1,.01,.01,.001)}static UseSkill(t,i,o){if(i.GetComponent(F).nowState!=bf.StateName){o.cdTime=o.cdMaxTime,o.isSklling=!0,o.skillKeepTime=o.f4;let e=t.GetEntityByID(o.effectId);e&&e.Destory(),e=O.CreatPrefabEntityUsePos(N.Effect_DustZone,i.GetComponent(M).pos),o.effectId=e.id;t=o.f1/1.3*i.GetComponent(R).sizeScale;e.GetComponent(M).SetScale(t,t,t),o.t1=.5}}static SkillUpdate(o,a,n,s){if(n.isSklling&&(n.t1-=s,n.t1<=0)){n.t1=1;let i=o.GetEntityByID(n.effectId);if(i){let e=n.f1/1.3,t=i.GetComponent(M);t.SetScale(e,e,e);var s=i.GetComponent(v),l=V.GetUnitByRange(t.pos,s.nowMapPos.x,s.nowMapPos.y,n.f1,a.id);for(let t=0;t<l.length;t++){let e=o.GetEntityByID(l[t]);e.GetComponent(E).team!=a.GetComponent(E).team&&(e.GetComponent(Lt)?H.HitTarget(l[t],a.id,n.f3*e.GetComponent(R).hp*a.GetComponent(L).skillDmgScale,!0):H.HitTarget(l[t],a.id,n.f2*e.GetComponent(R).hp*a.GetComponent(L).skillDmgScale,!0))}}}}static SkillDispose(e,t,i,o){t.GetComponent(F).ChangeState(Mf.StateName);let a=e.GetEntityByID(i.effectId);a&&(i.effectId=-1,a.Destory())}}),bI=(BI.SkillName="ZombieMode_AcidFog",class{static SkillInit(e,t,i){b.Warn("初始化技能"),H.GetItemData(i,1,.001)}static UseSkill(i,t,o){if(t.GetComponent(F).nowState==Mf.StateName||t.GetComponent(F).nowState==kf.StateName||t.GetComponent(F).nowState==ui.StateName){o.cdTime=o.cdMaxTime,o.isSklling=!0,o.skillKeepTime=o.skillTime;var a=t.GetComponent(R);ri.ClearBuffByName(t,Rf.BuffName);let e=O.CreatPrefabEntityUsePos(N.Effect_FrightenZone,t.GetComponent(M).pos);e.AddComponent(Mt).followTargetId=t.id,e.GetComponent(Mt).offset.y=.1,e.GetComponent(Mt).followrotation=!1,e.GetComponent(Mt).followScale=!1;var n,s=o.f1/1.5*a.sizeScale,s=(e.GetComponent(M).SetScale(s,s,s),t.GetComponent(v)),l=t.GetComponent(M),r=V.GetUnitByRange(t.GetComponent(M).pos,s.nowMapPos.x,s.nowMapPos.y,o.f1*a.sizeScale,t.id);for(let t=0;t<r.length;t++){let e=i.GetEntityByID(r[t]);e.GetComponent(R).GetIsNoCtrlEffect()||(ri.AddBuffToTarget(e,li.BuffName,!0,o.f2),n=e.GetComponent(M),bI.vec.x=n.pos.x-l.pos.x,bI.vec.y=n.pos.z-l.pos.z,Laya.Vector2.normalize(bI.vec,bI.vec),n=S.VecToAngle(bI.vec),e.GetComponent(F).ChangeState(uc.StateName),e.GetComponent(F).time=o.f1/20,Laya.Vector2.scale(bI.vec,20,bI.vec),e.GetComponent(w).vec.x=bI.vec.x,e.GetComponent(w).vec.z=bI.vec.y,e.GetComponent(M).rotation.y=n)}}}static SkillUpdate(e,t,i,o){}static SkillDispose(e,t,i,o){}}),AI=bI,xI=(AI.SkillName="ZombieMode_Frighten",AI.vec=new Laya.Vector2(0,0),class{static SkillInit(e,t,i){b.Warn("初始化技能"),H.GetItemData(i,1,.01)}static UseSkill(t,i,o){if(i.GetComponent(F).nowState!=bf.StateName){o.cdTime=o.cdMaxTime,o.isSklling=!0,o.skillKeepTime=o.skillTime;let e=t.GetEntityByID(o.effectId);e&&e.Destory(),e=O.CreatPrefabEntityUsePos(N.Effect_FrostZone,i.GetComponent(M).pos),o.effectId=e.id;t=o.f1/1.3;e.GetComponent(M).SetScale(t,t,t),o.t1=0}}static SkillUpdate(o,a,n,s){if(n.isSklling&&(n.t1-=s,n.t1<=0)){n.t1=.5;let i=o.GetEntityByID(n.effectId);if(i){let e=n.f1/1.3,t=i.GetComponent(M);t.SetScale(e,e,e);var s=i.GetComponent(v),l=V.GetUnitByRange(t.pos,s.nowMapPos.x,s.nowMapPos.y,n.f1,a.id);for(let t=0;t<l.length;t++){let e=o.GetEntityByID(l[t]);e.GetComponent(E).team!=a.GetComponent(E).team&&ri.AddBuffToTarget(e,ni.BuffName,!1,.5,n.f2)}}}}static SkillDispose(e,t,i,o){t.GetComponent(F).ChangeState(Mf.StateName);let a=e.GetEntityByID(i.effectId);a&&(i.effectId=-1,a.Destory())}}),TI=(xI.SkillName="ZombieMode_FrostAura",class{static SkillInit(e,t,i){b.Warn("初始化技能"),H.GetItemData(i,1,.01,.01,.001)}static UseSkill(e,t,i){0==t.GetComponent(R).GetAnyScale()||0==t.GetComponent(R).GetIsPlaySetPosOffSkill()||t.GetComponent(F).nowState!=Mf.StateName&&t.GetComponent(F).nowState!=kf.StateName&&t.GetComponent(F).nowState!=ui.StateName||(i.cdTime=i.cdMaxTime,i.isSklling=!0,i.skillKeepTime=i.skillTime,"TrampleSlash"==t.GetComponent(ti).weaponSkinSpEffect?t.GetComponent(F).ChangeState(nu.StateName):t.GetComponent(F).ChangeState(bc.StateName),i.t1=.5,0==i.t3&&(t.GetComponent(R).invincible++,t.GetComponent(v).isInAir=!0,i.t3=1))}static SkillUpdate(e,a,t,n){if(t.isSklling&&0<=t.t1&&(t.t1-=n,t.t1<0)){let i=a.GetComponent(R),o=a.GetComponent(M),e=O.CreatPrefabEntityUsePos(N.Bullet_Trample,new Laya.Vector3(o.pos.x,.01,o.pos.z));e.GetComponent(v).radius=t.f1*i.sizeScale,e.GetComponent(C).dmg=0,e.GetComponent(C).useDmg=!1;n=t.f1/3*i.sizeScale;if(e.GetComponent(C).creatorId=a.id,e.GetComponent(M).SetScale(n,n,n),e.GetComponent(oi).keepTime=t.f4,e.GetComponent(oi).F1=t.f3,"TrampleSlash"==a.GetComponent(ti).weaponSkinSpEffect){let e=a.GetComponent(ti),t=O.CreatPrefabEntityUsePos(N.Bullet_PKBullet,new Laya.Vector3(o.pos.x,.3,o.pos.z));t.GetComponent(v).radius=e.weaponSkinSpEffect_F1*i.sizeScale,t.GetComponent(C).dmg=.01*e.weaponSkinSpEffect_F2*H.GetSkillDmg(a)*a.GetComponent(L).skillDmgScale;n=e.weaponSkinSpEffect_F1*i.sizeScale;t.GetComponent(C).creatorId=a.id,t.GetComponent(M).SetScale(n,n,n)}a.GetComponent(F).ChangeState(Mf.StateName)}}static SkillDispose(e,t,i,o){1==i.t3&&(t.GetComponent(R).invincible--,t.GetComponent(v).isInAir=!1,i.t3=0),t.GetComponent(F).ChangeState(Mf.StateName)}}),kI=(TI.SkillName="ZombieMode_Trample",class{static SkillInit(e,t,i){b.Warn("初始化技能"),H.GetItemData(i,.01,1,.001)}static UseSkill(e,t,i){if(t.GetComponent(F).nowState!=bf.StateName){i.cdTime=i.cdMaxTime,i.isSklling=!0,i.skillKeepTime=i.f3;for(let e=0;e<i.f2;e++){let e=O.CreatPrefabEntityUsePos(N.Bullet_ZombieMode_EnergyBall,t.GetComponent(M).pos);e.GetComponent(C).dmg=i.f1*H.GetSkillDmg(t)*t.GetComponent(L).skillDmgScale,e.GetComponent(C).creatorId=t.id,i.idList.push(e.id)}i.t1=0,i.t2=360/i.f2}}static SkillUpdate(e,t,a,n){if(a.isSklling){var s=t.GetComponent(M),l=(a.t1+=360*n,t.GetComponent(R));for(let o=0;o<a.idList.length;o++){let i=e.GetEntityByID(a.idList[o]);if(i){let e=i.GetComponent(M),t=S.AngleToDir(a.t1+a.t2*o);Laya.Vector2.scale(t,2.5*l.sizeScale,t),e.pos.x=s.pos.x+t.x,e.pos.y=.5,e.pos.z=s.pos.z+t.y,0<i.GetComponent(v).hasColliderList.length&&(i.GetComponent(C).t1+=n,.5<i.GetComponent(C).t1&&(i.GetComponent(C).t1=0,i.GetComponent(v).hasColliderList=[]))}}}}static SkillDispose(i,e,o,t){for(let t=0;t<o.idList.length;t++){let e=i.GetEntityByID(o.idList[t]);e&&e.Destory()}o.idList=[]}}),MI=(kI.SkillName="ZombieMode_AroundBalls",class{static SkillInit(e,t,i){b.Warn("初始化技能"),H.GetItemData(i,.001)}static UseSkill(e,t,i){t.GetComponent(F).nowState!=bf.StateName&&(i.cdTime=i.cdMaxTime,i.isSklling=!0,i.skillKeepTime=i.skillTime,ri.AddBuffToTarget(t,Jf.BuffName,!0,i.f1))}static SkillUpdate(e,t,i,o){}static SkillDispose(e,t,i,o){}}),RI=(MI.SkillName="ZombieMode_Invincible",class{static SkillInit(e,t,i){b.Warn("初始化技能"),H.GetItemData(i,.01,.001,1)}static UseSkill(e,a,n){if(0!=a.GetComponent(R).GetAnyScale()&&(a.GetComponent(F).nowState==Mf.StateName||a.GetComponent(F).nowState==kf.StateName||a.GetComponent(F).nowState==ui.StateName)){n.cdTime=n.cdMaxTime,n.isSklling=!0,n.skillKeepTime=n.skillTime;var s=a.GetComponent(M);a.GetComponent(F).ChangeState(Lc.StateName);let e=V.GetSkillAttRangle(a),t=S.AngleToDir(e),i=O.CreatPrefabEntityUsePos(N.Bullet_Gou,new Laya.Vector3(s.pos.x,.5,s.pos.z),new Laya.Vector3(0,s.rotation.y,0)),o=(i.GetComponent(C).useDmg=!1,i.GetComponent(C).dmg=0,i.GetComponent(w).speed=30,i.GetComponent(kt).keepTime=1e3,i.GetComponent(C).creatorId=a.id,i.GetComponent(w).dir.x=t.x,i.GetComponent(w).dir.z=t.y,i.GetComponent(w).banDirCtrl++,i.GetComponent(w).banDirRotationCtrl++,a.GetComponent(F).time=.5,n.effectId=i.id,n.t2=0,n.t1=-1,n.t3=.1,O.CreatPrefabEntityUsePos(N.Effect_Chain));o.GetComponent(Np).soureId=a.id,o.GetComponent(Np).targetId=i.id,n.skillKeepTime=5}}static SkillUpdate(n,s,l,r){if(l.isSklling){let a=n.GetEntityByID(l.effectId);if(a){let i=a.GetComponent(v),e=a.GetComponent(w),o=a.GetComponent(M),t=e.speed*r;if(Laya.Vector3.scale(e.dir,t,RI.vec3),o.pos.x+=RI.vec3.x,o.pos.z+=RI.vec3.z,l.t2+=t,0<e.speed&&(l.t2>l.f3&&(e.speed=-e.speed),i.isHitWall&&(e.speed=-e.speed,i.hitWithWall=!1,i.isHitWall=!1)),e.speed<0){if(i.isHitWall&&(e.speed=-e.speed,i.hitWithWall=!1,i.isHitWall=!1),0<i.hasColliderList.length)for(let t=0;t<i.hasColliderList.length;t++){let e=n.GetEntityByID(i.hasColliderList[t]);e&&e.HasComponent(R.id)&&e.id!=s.id&&(V.IsGameMode_Nian()||e.GetComponent(E).team!=s.GetComponent(E).team&&(ri.AddBuffToTarget(e,li.BuffName,!0,l.f2),e.GetComponent(R).GetIsNoCtrlEffect()||-1==l.idList.indexOf(e.id)&&l.idList.push(e.id)))}var h=s.GetComponent(M);if(l.t2<1)o.pos.x=h.pos.x,o.pos.z=h.pos.z,l.t3-=r,l.t3<0&&(a.Destory(),l.skillKeepTime=0);else{RI.vec2.x=o.pos.x-h.pos.x,RI.vec2.y=o.pos.z-h.pos.z;r=Laya.Vector2.scalarLength(RI.vec2),h=(l.t2=r,Laya.Vector2.normalize(RI.vec2,RI.vec2),S.VecToAngle(RI.vec2));o.rotation.y=h,e.dir.x=RI.vec2.x,e.dir.z=RI.vec2.y;for(let e=0;e<l.idList.length;e++){let t=n.GetEntityByID(l.idList[e]);if(t){let e=t.GetComponent(M);e.pos.x=S.Lerp(e.pos.x,o.pos.x,.5),e.pos.z=S.Lerp(e.pos.z,o.pos.z,.5)}}}}}else l.skillKeepTime=0}}static SkillDispose(e,t,i,o){i.idList=[];let a=e.GetEntityByID(i.effectId);a&&a.Destory()}}),PI=RI,EI=(PI.SkillName="ZombieMode_Hook",PI.vec3=new Laya.Vector3(0,0,0),PI.vec2=new Laya.Vector2(0,0),class{static SkillInit(e,t,i){H.GetItemData(i,1,.01,.01,.001,.001,1),i.range=i.f1}static UseSkill(e,s,l){if(0!=s.GetComponent(R).GetAnyScale()&&(s.GetComponent(F).nowState==Mf.StateName||s.GetComponent(F).nowState==kf.StateName||s.GetComponent(F).nowState==ui.StateName)){l.cdTime=l.cdMaxTime,s.GetComponent(F).ChangeState(Tc.StateName),l.isSklling=!0,l.skillKeepTime=l.f5,s.GetComponent(R),l.t3=0;let e=N.Effect_PhotonBlade,t=(ci.IsSeaPower(s)&&(e=N.Effect_PhotonBlade3,s.GetComponent(M).isInCameraArea&&K.AudioModule().PlayOnce(x.GetSound2("Ultraman"))),ci.IsLandPower(s)&&(e=N.Effect_PhotonBlade2,s.GetComponent(M).isInCameraArea&&K.AudioModule().PlayOnce(x.GetSound2("Ultraman")),l.t3=2),O.CreatPrefabEntityUsePos(e,s.GetComponent(M).pos)),i=(t.GetComponent(Mt).followTargetId=s.id,t.GetComponent(B).sp.getChildByName("Root").getChildByName("Line")),o=(null!=i&&(i.particleRenderer.stretchedBillboardLengthScale=1.553*l.f1,t.GetComponent(B).sp.getChildByName("Root").getChildByName("p1").transform.localPositionZ=l.f1-.75,null==i.getComponent(n_)&&(i.addComponent(n_),e==N.Effect_PhotonBlade3&&(i.getComponent(n_).speed=.7))),l.effectId=t.id,l.t1=0,s.GetComponent(M)),a=S.AngleToDir(o.rotation.y),n=s.GetComponent(w);n.dir.x=a.x,n.dir.z=a.y,l.t1=0,s.HasComponent(Et.id)&&(l.skillKeepTime+=l.f5-l.f4)}}static SkillUpdate(e,o,a,n){if(a.isSklling){let e=o.GetComponent(w),i=o.GetComponent(M);if(EI.vec2.x=e.dir.x,EI.vec2.y=e.dir.z,0==EI.vec2.x&&0==EI.vec2.y||(i.rotation.y=S.MoveTowardsAngle(i.rotation.y,S.VecToAngle(EI.vec2),a.f6*n)),a.t1-=n,a.t1<0){a.t1=.25;n=S.AngleToDir(i.rotation.y);Laya.Vector2.scale(n,.5*a.f1+.67,n),EI.pos.x=i.pos.x+n.x,EI.pos.z=i.pos.z+n.y;let e=N.Bullet_LazerBullet,t=(2==a.t3&&(e=N.Bullet_LazerBullet2),O.CreatPrefabEntityUsePos(e,EI.pos,i.rotation));t.GetComponent(C).dmg=H.GetSkillDmg(o)*a.f3*.25,t.GetComponent(kt).keepTime=.25,t.GetComponent(M).scale.z=a.f1,t.GetComponent(v).height=a.f1,t.GetComponent(C).creatorId=o.id,t.GetComponent(oi).F1=a.f2,2==a.t3&&ci.LandPowerBullet(t,o)}if(a.f5-a.skillKeepTime>a.f4){let t=o.GetComponent(L).skillList,i=-1;for(let e=0;e<t.length;e++)t[e].skillName==EI.SkillName&&(i=e,i=1==o.GetComponent(R).skillState[i]?e:-1);-1==i&&(a.skillKeepTime=0)}o.GetComponent(F).nowState!=Tc.StateName&&(a.skillKeepTime=0)}}static SkillDispose(e,t,i,o){t.GetComponent(R);let a=e.GetEntityByID(i.effectId);a&&a.Destory(),t.GetComponent(F).nowState==Tc.StateName&&t.GetComponent(F).ChangeState(Mf.StateName)}}),NI=EI,FI=(NI.SkillName="ZombieMode_PhotonBlade",NI.vec2=new Laya.Vector2(0,0),NI.pos=new Laya.Vector3(0,0,0),class{static SkillInit(e,t,i){H.GetItemData(i,.001,1,1,.001),b.Warn("初始化技能",i)}static UseSkill(n,s,l){if(s.GetComponent(F).nowState!=bf.StateName){l.cdTime=l.cdMaxTime,l.isSklling=!0;let e=s.GetComponent(M),o=O.CreatPrefabEntityUsePos(N.Bullet_ZombieMode_FrozenMine,new Laya.Vector3(e.pos.x,-.29,e.pos.z)),t=o.GetComponent(B).sp.meshRenderer.material,i=(t.albedoColor=new Laya.Vector4(1,1,1,1),t.renderMode=Laya.BlinnPhongMaterial.RENDERMODE_TRANSPARENT,o.GetComponent(B).sp.meshRenderer.material=t,l.effectId=o.id,l.t1=l.f1,s.GetComponent(E)),a=new E;a.netId=i.netId,a.team=i.team,o.AddComponentAdv(E,a),o.GetComponent(C).creatorId=s.id,l.skillKeepTime=l.skillTime+l.t1,o.GetComponent(kt).keepTime=l.f1+1,o.GetComponent(C).onDestroyFunc=function(){console.log("冰冻地雷引爆");var e=o.GetComponent(v),t=o.GetComponent(M),i=(O.CreatPrefabEntityUsePos(N.Effect_MagicNovaBlue,new Laya.Vector3(t.pos.x,.1,t.pos.z),new Laya.Vector3(-90,0,0),new Laya.Vector3(l.f3/2,l.f3/2,l.f3/2)),V.GetUnitByRange(t.pos,e.nowMapPos.x,e.nowMapPos.y,l.f3,s.id));for(let t=0;t<i.length;t++){let e=n.GetEntityByID(i[t]);e.GetComponent(E).team==s.GetComponent(E).team||e.GetComponent(R).GetIsNoCtrlEffect()||(console.log("加冰冻buff"),ri.AddBuffToTarget(e,Rf.BuffName,!0,l.f4,0,0,0,0,s.id))}}}}static SkillUpdate(e,t,o,i){if(o.isSklling&&(o.t1-=i,o.t1<0)){o.t1=0;let i=e.GetEntityByID(o.effectId);if(i&&!i.HasComponent(v.id)){if("Local"==t.GetComponent(E).netId){let e=i.GetComponent(B),t=e.sp.meshRenderer.material;t.albedoColor=new Laya.Vector4(1,1,1,.5),e.sp.meshRenderer.material=t}else i.GetComponent(M).SetScale(0,0,0);let e=new v;e.radius=o.f2,i.AddComponentAdv(v,e),i.GetComponent(kt).keepTime=5e7}}}static SkillDispose(e,t,i,o){}}),OI=(FI.SkillName="ZombieMode_FrozenMine",class{static SkillInit(e,t,i){H.GetItemData(i,.001,.01,1,.001),b.Warn("初始化技能",i)}static UseSkill(e,t,i){t.GetComponent(F).nowState!=bf.StateName&&(i.isSklling=!0,i.skillKeepTime=i.f1,i.cdTime=i.cdMaxTime,ri.AddBuffToTarget(t,Qf.BuffName,!0,i.f1,i.f3,i.f4))}static SkillUpdate(e,t,i,o){}static SkillDispose(e,t,i,o){}}),HI=(OI.SkillName="ZombieMode_Shield",class{static SkillInit(e,t,i){b.Warn("初始化技能"),H.GetItemData(i,.001,1,1,.001,1,1)}static UseSkill(e,a,n){if(a.GetComponent(F).nowState==Mf.StateName||a.GetComponent(F).nowState==kf.StateName||a.GetComponent(F).nowState==ui.StateName){n.isSklling=!0,n.skillKeepTime=n.skillTime,n.cdTime=n.cdMaxTime;let e=a.GetComponent(M),t=O.CreatPrefabEntity(N.Item_Turret),i=(t.GetComponent(M).SetPos(e.pos),a.GetComponent(E)),o=new E;o.netId=i.netId,o.team=i.team,t.AddComponentAdv(E,o),t.GetComponent(y).createId=a.id,t.GetComponent(Iu).attCD=n.f4,t.GetComponent(Iu).amg=n.f5,t.GetComponent(Iu).t1=n.f4,t.GetComponent(kt).keepTime=n.f1,t.GetComponent(y).hp=n.f6,t.GetComponent(y).maxhp=n.f6,"Local"==o.netId?t.GetComponent(D).useUICtrl=D.MyTurret:t.GetComponent(D).useUICtrl=D.EnemyTurret}}static SkillUpdate(e,t,i,o){}static SkillDispose(e,t,i,o){}}),VI=(HI.SkillName="ZombieMode_Turret",class{static SkillInit(e,t,i){b.Warn("初始化技能"),H.GetItemData(i,1,1,1,1,1)}static UseSkill(e,i,o){if(0!=i.GetComponent(R).GetAnyScale()&&(i.GetComponent(F).nowState==Mf.StateName||i.GetComponent(F).nowState==kf.StateName||i.GetComponent(F).nowState==ui.StateName)){o.cdTime=o.cdMaxTime,o.isSklling=!0,o.skillKeepTime=o.skillTime;let e=new Laya.Vector3(0,0,0);e.x=0,e.y=0,e.z=0;var a=V.GetSkillAttRangle(i),n=(e.x=i.GetComponent(M).pos.x,e.y=i.GetComponent(M).pos.y,e.z=i.GetComponent(M).pos.z,new Laya.Vector2(0,1)),n=S.VecRotate(n,a);Laya.Vector2.scale(n,2,n),e.x-=n.x,e.z+=n.y,i.GetComponent(F).ChangeState(Lc.StateName);let t=O.CreatPrefabEntityUsePos(N.Item_ZombieMode_RockWall,e,new Laya.Vector3(0,a,0));t.GetComponent(y).maxhp=o.f1,t.GetComponent(y).hp=o.f1,t.GetComponent(E).team=i.GetComponent(E).team}}static SkillUpdate(e,t,i,o){}static SkillDispose(e,t,i,o){}}),zI=(VI.SkillName="ZombieMode_RockWall",class{static SkillInit(e,t,i){b.Warn("初始化技能"),H.GetItemData(i,1,1,1,1,1)}static UseSkill(e,a,n){if(0!=a.GetComponent(R).GetAnyScale()&&(a.GetComponent(F).nowState==Mf.StateName||a.GetComponent(F).nowState==kf.StateName||a.GetComponent(F).nowState==ui.StateName)){n.isSklling=!0,n.cdTime=n.cdMaxTime,n.skillKeepTime=n.skillTime,a.GetComponent(F).ChangeState(Lc.StateName);let e=a.GetComponent(M),t=V.GetSkillAttRangle(a),i=S.AngleToDir(t),o=O.CreatPrefabEntityUsePos(N.Bullet_Grenade,new Laya.Vector3(e.pos.x,.5*n.f1,e.pos.z),new Laya.Vector3(0,e.rotation.y,0));o.GetComponent(C).creatorId=a.id,o.GetComponent(w).dir.x=i.x,o.GetComponent(w).dir.z=i.y,o.GetComponent(w).speed=n.f2,o.GetComponent(oi).F2=n.f1,o.GetComponent(oi).F1=n.f3,o.GetComponent(C).dmg=n.f4,K.AudioModule().PlayOnce(x.GetSound2("Grenade"));a=n.f1/n.f2;o.GetComponent(kt).keepTime=a}}static SkillUpdate(e,t,i,o){}static SkillDispose(e,t,i,o){}}),WI=(zI.SkillName="ZombieMode_Grenade",class{static SkillInit(e,t,i){b.Warn("初始化技能"),H.GetData(i,.01,.001,1,.001),i.range=12}static UseSkill(e,o,a){if(0!=o.GetComponent(R).GetAnyScale()&&(o.GetComponent(F).nowState==Mf.StateName||o.GetComponent(F).nowState==kf.StateName||o.GetComponent(F).nowState==ui.StateName)){a.cdTime=a.cdMaxTime,a.isSklling=!0;var n=a.f4;a.skillKeepTime=a.skillTime+n,o.GetComponent(F).ChangeState(Oc.StateName),o.GetComponent(F).time=2*n;let e=o.GetComponent(M),t=O.CreatPrefabEntityUsePos(N.Effect_ZombieMode_Danger3,new Laya.Vector3(e.pos.x,.01,e.pos.z)),i=(t.GetComponent(Mt).followTargetId=o.id,t.GetComponent(kt).keepTime=n,t.GetComponent(M).scale.x=1.5,t.GetComponent(M).scale.z=a.f3+1,a.t1=n,o.GetComponent(w));i.banDirRotationCtrl++,i.banDirCtrl++,K.AudioModule().PlayOnce(x.GetSound2("Zombie_Anger1"))}}static SkillUpdate(n,s,l,r){if(l.isSklling)if(-1!=l.t1){if(s.GetComponent(F).nowState!=Oc.StateName)l.skillKeepTime=0;else if(l.t1-=r,l.t1<0){var h=s.GetComponent(M);s.GetComponent(F).ChangeState(Lc.StateName),s.GetComponent(F).time=10*l.skillTime;let e=V.GetSkillAttRangle(s),t=S.AngleToDir(e),i=O.CreatPrefabEntityUsePos(N.Bullet_ZombieMode_Gou,new Laya.Vector3(h.pos.x,.5,h.pos.z),new Laya.Vector3(0,h.rotation.y,0)),o=(i.GetComponent(C).dmg=l.f1*H.GetSkillDmg(s)*s.GetComponent(L).skillDmgScale,i.GetComponent(w).speed=2*l.f3/l.skillTime,i.GetComponent(kt).keepTime=1e3,i.GetComponent(C).creatorId=s.id,i.GetComponent(w).dir.x=t.x,i.GetComponent(w).dir.z=t.y,i.GetComponent(w).banDirCtrl++,i.GetComponent(w).banDirRotationCtrl++,l.effectId=i.id,l.t1=-1,l.t2=-1,l.t3=0,l.t4=.1,O.CreatPrefabEntityUsePos(N.Effect_ZombieMode_Chain));o.GetComponent(Np).soureId=s.id,o.GetComponent(Np).targetId=i.id,l.skillKeepTime=5}}else{let a=n.GetEntityByID(l.effectId);if(a){let i=a.GetComponent(v),e=a.GetComponent(w),o=a.GetComponent(M),t=e.speed*r;if(Laya.Vector3.scale(e.dir,t,WI.vec3),o.pos.x+=WI.vec3.x,o.pos.z+=WI.vec3.z,l.t3+=t,0<e.speed&&(l.t3>l.f3&&(e.speed=-e.speed),i.isHitWall&&(e.speed=-e.speed,i.hitWithWall=!1,i.isHitWall=!1)),e.speed<0){if(i.isHitWall&&(e.speed=-e.speed,i.hitWithWall=!1,i.isHitWall=!1),0<i.hasColliderList.length)for(let t=0;t<i.hasColliderList.length;t++){let e=n.GetEntityByID(i.hasColliderList[t]);e&&e.HasComponent(R.id)&&e.id!=s.id&&(V.IsGameMode_Nian()||(ri.AddBuffToTarget(e,li.BuffName,!0,l.f2),e.GetComponent(R).GetIsNoCtrlEffect()||-1==l.idList.indexOf(e.id)&&l.idList.push(e.id)))}h=s.GetComponent(M);if(l.t3<1)o.pos.x=h.pos.x,o.pos.z=h.pos.z,l.t4-=r,l.t4<0&&(a.Destory(),l.skillKeepTime=0);else{WI.vec2.x=o.pos.x-h.pos.x,WI.vec2.y=o.pos.z-h.pos.z;r=Laya.Vector2.scalarLength(WI.vec2),h=(l.t3=r,Laya.Vector2.normalize(WI.vec2,WI.vec2),S.VecToAngle(WI.vec2));o.rotation.y=h,e.dir.x=WI.vec2.x,e.dir.z=WI.vec2.y;for(let e=0;e<l.idList.length;e++){let t=n.GetEntityByID(l.idList[e]);if(t){let e=t.GetComponent(M);e.pos.x=S.Lerp(e.pos.x,o.pos.x,.5),e.pos.z=S.Lerp(e.pos.z,o.pos.z,.5)}}}}}else l.skillKeepTime=0}}static SkillDispose(e,t,i,o){i.idList=[];let a=e.GetEntityByID(i.effectId),n=(a&&a.Destory(),t.GetComponent(F).nowState!=Lc.StateName&&t.GetComponent(F).nowState!=Oc.StateName||t.GetComponent(F).ChangeState(Mf.StateName),t.GetComponent(w));n.banDirRotationCtrl--,n.banDirCtrl--}}),ZI=WI,jI=(ZI.SkillName="ZombieHook",ZI.vec3=new Laya.Vector3(0,0,0),ZI.vec2=new Laya.Vector2(0,0),class{static SkillInit(e,t,i){b.Warn("初始化技能"),K.DataModule().GetLocal().skill.Get(i.skillID),H.GetData(i,1,.01,.001,1,.001),i.range=15}static UseSkill(e,o,a){if(console.log("UseSkill"),0!=o.GetComponent(R).GetAnyScale()&&0!=o.GetComponent(R).GetIsPlaySetPosOffSkill()&&(o.GetComponent(F).nowState==Mf.StateName||o.GetComponent(F).nowState==kf.StateName||o.GetComponent(F).nowState==ui.StateName)){a.cdTime=a.cdMaxTime,a.isSklling=!0;var n=a.f5;a.skillKeepTime=a.skillTime+n,o.GetComponent(F).ChangeState(Oc.StateName),o.GetComponent(F).time=2*n;let e=o.GetComponent(M),t=O.CreatPrefabEntityUsePos(N.Effect_ZombieMode_Danger3,new Laya.Vector3(e.pos.x,.01,e.pos.z)),i=(t.GetComponent(Mt).followTargetId=o.id,t.GetComponent(kt).keepTime=n,t.GetComponent(M).scale.x=1.5*o.GetComponent(v).radius*2*1.2,t.GetComponent(M).scale.z=a.f1*a.skillTime,a.t1=n,a.t2=0,o.GetComponent(w));i.banDirRotationCtrl++,i.banDirCtrl++,K.AudioModule().PlayOnce(x.GetSound2("Zombie_Anger1"))}}static SkillUpdate(e,t,i,o){if(i.isSklling)if(0<i.t2)t.GetComponent(F).nowState!=Tt.StateName&&(i.skillKeepTime=0);else if(i.t1-=o,i.t1<0){i.t2=1;o=new Laya.Vector2(t.GetComponent(w).dir.x,t.GetComponent(w).dir.z);Laya.Vector2.scale(o,i.f1,o),t.GetComponent(w).vec.x=o.x,t.GetComponent(w).vec.z=o.y,t.GetComponent(F).ChangeState(Tt.StateName),t.GetComponent(F).time=i.skillTime;let e=O.CreatPrefabEntityUsePos(N.Bullet_DashBullet,t.GetComponent(M).pos,t.GetComponent(M).rotation);e.GetComponent(C).creatorId=t.id,e.GetComponent(M).rotation.y=t.GetComponent(M).rotation.y,e.GetComponent(C).dmg=i.f2*H.GetWeaponDmg(t)*t.GetComponent(L).skillDmgScale,e.GetComponent(C).sapTime=i.f3,e.GetComponent(C).useStiffness=!0,e.GetComponent(C).useStiffnessDis=i.f4,e.AddComponent(Mt).followTargetId=t.id,e.GetComponent(Mt).followrotation=!1,e.GetComponent(Mt).offset.y=.8,e.GetComponent(v).radius=1.5*t.GetComponent(v).radius,e.GetComponent(kt).keepTime=i.skillTime,i.effectId=e.id}}static SkillDispose(e,t,i,o){t.GetComponent(F).nowState!=Tt.StateName&&t.GetComponent(F).nowState!=Oc.StateName||t.GetComponent(F).ChangeState(Mf.StateName);let a=t.GetComponent(w),n=(a.banDirRotationCtrl--,a.banDirCtrl--,q.NowGameWorld.GetEntityByID(i.effectId));n&&n.Destory()}}),KI=(jI.SkillName="ZombieDash",class{static SkillInit(e,t,i){b.Warn("初始化技能",i.skillID),H.GetData(i,.001,1,.01,.01,.001,.001),i.range=12}static UseSkill(e,i,o){if(0!=i.GetComponent(R).GetAnyScale()&&(i.GetComponent(F).nowState==Mf.StateName||i.GetComponent(F).nowState==kf.StateName||i.GetComponent(F).nowState==ui.StateName)){o.isSklling=!0,o.cdTime=o.cdMaxTime;var a=o.f6;o.skillKeepTime=o.f5+a,i.GetComponent(F).ChangeState(Oc.StateName),i.GetComponent(F).time=2*a;let e=i.GetComponent(M),t=O.CreatPrefabEntityUsePos(N.Effect_ZombieMode_Danger1,new Laya.Vector3(e.pos.x,.01,e.pos.z));t.GetComponent(Mt).followTargetId=i.id,t.GetComponent(kt).keepTime=a,t.GetComponent(M).scale.x=2*o.f2,t.GetComponent(M).scale.z=2*o.f2,o.t1=a,K.AudioModule().PlayOnce(x.GetSound2("Zombie_Anger1"))}}static SkillUpdate(e,t,i,o){if(i.isSklling)if(-1!=i.t1){if(t.GetComponent(F).nowState!=Oc.StateName)i.skillKeepTime=0;else if(i.t1-=o,i.t1<0){i.t1=-1,i.skillKeepTime=i.f5,t.GetComponent(F).ChangeState(pc.StateName),t.GetComponent(F).time=i.skillKeepTime;let e=t.GetComponent(R);0==i.t3&&(e.attSpeedScale*=i.f4,e.superArmor++,i.t3=1),t.GetComponent(F).time=i.f5,i.t2=0}}else{if(i.t2-=o,i.t2<0){let e=O.CreatPrefabEntityUsePos(N.Bullet_SpinBullet,t.GetComponent(M).pos);e.GetComponent(C).creatorId=t.id,e.GetComponent(M).pos.y+=.5,e.GetComponent(C).dmg=i.f3*H.GetSkillDmg(t)*t.GetComponent(L).skillDmgScale,e.GetComponent(v).radius=i.f2*t.GetComponent(R).sizeScale;o=i.f2/2*t.GetComponent(R).sizeScale;e.GetComponent(M).SetScale(o,o,o),i.t2=i.f1}t.GetComponent(F).nowState!=pc.StateName&&(i.skillKeepTime=0)}}static SkillDispose(e,t,i,o){let a=t.GetComponent(R);1==i.t3&&(a.attSpeedScale/=i.f4,a.superArmor--,i.t3=0),t.GetComponent(F).nowState!=pc.StateName&&t.GetComponent(F).nowState!=Oc.StateName||t.GetComponent(F).ChangeState(Mf.StateName)}}),qI=(KI.SkillName="ZombieSpin",class{static SkillInit(e,t,i){b.Warn("初始化技能"),H.GetData(i,1,.01,.001,.001,1),i.range=18}static UseSkill(e,a,n){if(0!=a.GetComponent(R).GetAnyScale()&&0!=a.GetComponent(R).GetIsPlaySetPosOffSkill()&&(a.GetComponent(F).nowState==Mf.StateName||a.GetComponent(F).nowState==kf.StateName||a.GetComponent(F).nowState==ui.StateName)){n.isSklling=!0,n.cdTime=n.cdMaxTime;var s=n.f4,l=(n.skillKeepTime=n.f3+2*s,a.GetComponent(F).ChangeState(Oc.StateName),a.GetComponent(F).time=2*s,a.GetComponent(M).pos);let e=a.GetComponent(ut).enemyId,t=q.NowGameWorld.GetEntityByID(e);t&&(l=t.GetComponent(M).pos);var r=n.f5;n.t3=l.x+(2*Math.random()-1)*r,n.t4=l.z+(2*Math.random()-1)*r;let i=O.CreatPrefabEntityUsePos(N.Effect_ZombieMode_Danger1,new Laya.Vector3(n.t3,.01,n.t4)),o=(i.GetComponent(Mt).followTargetId=-1,i.GetComponent(Mt).isDestory=!1,i.GetComponent(kt).keepTime=s,i.GetComponent(M).scale.x=2*n.f1,i.GetComponent(M).scale.z=2*n.f1,n.t1=s,a.GetComponent(w));o.banDirRotationCtrl++,o.banDirCtrl++,K.AudioModule().PlayOnce(x.GetSound2("Zombie_Anger1"))}}static SkillUpdate(e,i,o,t){if(o.isSklling)if(-1!=o.t1)i.GetComponent(F).nowState!=Oc.StateName?o.skillKeepTime=0:(o.t1-=t,o.t1<0&&(o.t1=-1,i.GetComponent(F).ChangeState(bc.StateName),o.t2=o.f3,i.GetComponent(R).invincible++,a=i.GetComponent(M),qI.vec2.setValue(o.t3-a.pos.x,o.t4-a.pos.z),i.GetComponent(w).vec.setValue(qI.vec2.x/o.t2,0,qI.vec2.y/o.t2)));else{if(0<=o.t2){if(o.t2-=t,o.t2<0){i.GetComponent(R);let e=i.GetComponent(M),t=O.CreatPrefabEntityUsePos(N.Bullet_Trample,new Laya.Vector3(e.pos.x,.01,e.pos.z));t.GetComponent(v).radius=o.f1,t.GetComponent(C).dmg=o.f2*H.GetSkillDmg(i)*i.GetComponent(L).skillDmgScale;var a=o.f1/3;t.GetComponent(C).creatorId=i.id,t.GetComponent(M).SetScale(a,a,a),t.GetComponent(oi).keepTime=0,t.GetComponent(oi).F1=0,o.skillKeepTime=.5,i.GetComponent(w).vec.setValue(0,0,0)}i.GetComponent(xt).useSpeed=.5/o.f3}i.GetComponent(F).nowState!=bc.StateName&&(o.skillKeepTime=0)}}static SkillDispose(e,t,i,o){t.GetComponent(F).nowState!=bc.StateName&&t.GetComponent(F).nowState!=Oc.StateName||t.GetComponent(F).ChangeState(Mf.StateName),t.GetComponent(R).invincible--,t.GetComponent(w).vec.setValue(0,0,0);let a=t.GetComponent(w);a.banDirRotationCtrl--,a.banDirCtrl--}}),YI=qI,QI=(YI.SkillName="ZombieTrample",YI.vec2=new Laya.Vector2,class{static SkillInit(e,t,i){b.Warn("初始化技能",i.skillID),H.GetData(i,1,1,.001,1,.001,.01),i.range=12}static UseSkill(e,a,n){if(0!=a.GetComponent(R).GetAnyScale()&&(a.GetComponent(F).nowState==Mf.StateName||a.GetComponent(F).nowState==kf.StateName||a.GetComponent(F).nowState==ui.StateName)){n.isSklling=!0,n.cdTime=n.cdMaxTime;var s=n.skillTime;n.skillKeepTime=2*s,a.GetComponent(F).ChangeState(Oc.StateName),a.GetComponent(F).time=n.skillKeepTime;let e=n.f3*n.f4,t=a.GetComponent(M),i=O.CreatPrefabEntityUsePos(N.Effect_ZombieMode_Danger1,new Laya.Vector3(t.pos.x,.01,t.pos.z)),o=(i.GetComponent(Mt).followTargetId=a.id,i.GetComponent(kt).keepTime=s,i.GetComponent(M).scale.x=2*e,i.GetComponent(M).scale.z=2*e,n.t1=s,a.GetComponent(w));o.banDirRotationCtrl++,o.banDirCtrl++,a.GetComponent(R).superArmor++,K.AudioModule().PlayOnce(x.GetSound2("Zombie_Anger1"))}}static SkillUpdate(e,o,a,t){if(a.isSklling)if(-1!=a.t1)o.GetComponent(F).nowState!=Oc.StateName?a.skillKeepTime=0:(a.t1-=t,a.t1<0&&(a.t1=-1,a.skillKeepTime=a.f5*a.f1,o.GetComponent(F).ChangeState(Oc.StateName),o.GetComponent(F).time=a.skillKeepTime,a.t2=0,a.t3=a.f1,o.GetComponent(xt).SetAnimation("NianCreatItem")));else{if(a.t2-=t,a.t2<0&&0<a.t3){--a.t3,a.t2=a.f5;var n=new Laya.Vector2(1,0),s=360/a.f2,l=360*Math.random();for(let i=0;i<a.f2;i++){let e=S.VecRotate(n,l+s*i),t=O.CreatPrefabEntityUsePos(N.Bullet_Barrage,o.GetComponent(M).pos);t.GetComponent(C).creatorId=o.id,t.GetComponent(M).pos.y+=.5,t.GetComponent(C).dmg=a.f6*H.GetSkillDmg(o)*o.GetComponent(L).skillDmgScale,t.GetComponent(C).attackRange=a.f3*a.f4,t.GetComponent(w).dir.x=e.x,t.GetComponent(w).dir.z=e.y,t.GetComponent(w).speed=a.f4,t.GetComponent(kt).keepTime=a.f3;t.GetComponent(v).radius=1,t.GetComponent(M).SetScale(2,2,2)}K.AudioModule().PlayOnce(x.GetSound2("Zombie_Barrage"))}o.GetComponent(F).nowState!=Oc.StateName&&(a.skillKeepTime=0)}}static SkillDispose(e,t,i,o){let a=t.GetComponent(R),n=(1==i.t3&&(a.attSpeedScale/=i.f4,a.superArmor--,i.t3=0),t.GetComponent(F).nowState==Oc.StateName&&t.GetComponent(F).ChangeState(Mf.StateName),t.GetComponent(w));n.banDirRotationCtrl--,n.banDirCtrl--}}),JI=(QI.SkillName="ZombieBarrage",class{static SkillInit(e,t,i){b.Warn("初始化技能Skill_Zmode_ZombieMastery",i.skillName);var o=K.DataModule().GetLocal().skill.Get(i.skillID);i.cdMaxTime=.001*o.CD,i.skillTime=.001*o.keepTime,i.skillKeepTime=1e4,i.f3=10}static UseSkill(e,a,n){if(a.GetComponent(F).nowState==Mf.StateName||a.GetComponent(F).nowState==kf.StateName||a.GetComponent(F).nowState==ui.StateName){n.cdTime=n.cdMaxTime,n.isSklling=!0,n.skillKeepTime=n.skillTime;var s=a.GetComponent(M);a.GetComponent(F).ChangeState(Lc.StateName);let e=V.GetSkillAttRangle(a),t=S.AngleToDir(e),i=O.CreatPrefabEntityUsePos(N.Bullet_Gou,new Laya.Vector3(s.pos.x,.5,s.pos.z),new Laya.Vector3(0,s.rotation.y,0)),o=(i.GetComponent(C).dmg=n.f1*H.GetSkillDmg(a)*a.GetComponent(L).skillDmgScale,i.GetComponent(w).speed=30,i.GetComponent(kt).keepTime=1e3,i.GetComponent(C).creatorId=a.id,i.GetComponent(w).dir.x=t.x,i.GetComponent(w).dir.z=t.y,i.GetComponent(w).banDirCtrl++,i.GetComponent(w).banDirRotationCtrl++,a.GetComponent(F).time=.5,n.effectId=i.id,n.t2=0,n.t1=-1,n.t3=.1,O.CreatPrefabEntityUsePos(N.Effect_Chain));o.GetComponent(Np).soureId=a.id,o.GetComponent(Np).targetId=i.id,n.skillKeepTime=5}}static SkillUpdate(s,l,r,h){if(r.isSklling){let n=s.GetEntityByID(r.effectId);if(n){let i=!1,o=n.GetComponent(v);if(-1==r.t1&&0<o.hasColliderList.length)for(let t=0;t<o.hasColliderList.length;t++){let e=s.GetEntityByID(o.hasColliderList[t]);e&&e.HasComponent(R.id)&&e.id!=l.id&&e.GetComponent(E).team!=l.GetComponent(E).team&&(V.IsGameMode_Nian()||(ri.AddBuffToTarget(e,li.BuffName,!0,r.f2),e.GetComponent(R).GetIsNoCtrlEffect()||(i=!0,r.t1=e.id)))}let t=n.GetComponent(w),a=n.GetComponent(M),e=t.speed*h;if(Laya.Vector3.scale(t.dir,e,JI.vec3),a.pos.x+=JI.vec3.x,a.pos.z+=JI.vec3.z,r.t2+=e,0<t.speed&&(r.t2>r.f3&&(t.speed=-t.speed),o.isHitWall&&(t.speed=-t.speed,o.hitWithWall=!1,o.isHitWall=!1),i&&(t.speed=-t.speed,o.hitWithWall=!1,o.isHitWall=!1,JI.Line(n,l,s,r),i=!1)),t.speed<0){o.isHitWall&&(t.speed=-t.speed,o.hitWithWall=!1,o.isHitWall=!1),i&&(i=!1,JI.Line(n,l,s,r));var m=l.GetComponent(M);if(r.t2<1)a.pos.x=m.pos.x,a.pos.z=m.pos.z,r.t3-=h,r.t3<0&&(n.Destory(),r.skillKeepTime=0);else{JI.vec2.x=a.pos.x-m.pos.x,JI.vec2.y=a.pos.z-m.pos.z;h=Laya.Vector2.scalarLength(JI.vec2),m=(r.t2=h,Laya.Vector2.normalize(JI.vec2,JI.vec2),S.VecToAngle(JI.vec2));a.rotation.y=m,t.dir.x=JI.vec2.x,t.dir.z=JI.vec2.y;let e=s.GetEntityByID(r.t1);e&&(e.GetComponent(M).pos.x=a.pos.x,e.GetComponent(M).pos.z=a.pos.z)}}}else r.skillKeepTime=0}}static Line(e,l,r,h){e.Destory();let m=r.GetEntityByID(h.t1);if(!m.HasComponent(Lt.id)&&"Boss"!=m.GetComponent(ut).type){let e=K.DataModule().GetLocal().hero.Get("Michelle"),i=new hp,o=(i.distanceFromOwner=6,i.ownerId=l.id,i.f7=.01*parseInt(e.F7),i.f2=.001*e.F2,i.addMaxHp=.01*e.F3,i.addDmg=.01*e.F4,i.f5=e.F5,i.distanceFromOwner=e.F6,1),t=l.GetComponent(ti).skinSpEffectList,a=(i.addSize=l.GetComponent(R).sizeScale,-1!=t.indexOf("Zmode_ZombieMastery_2")&&(i.addMaxHp=.01*parseInt(e.F8),i.addDmg=.01*parseInt(e.F9),i.addSize=.01*e.F10,i.distanceFromOwner=e.F14,o=2),-1!=t.indexOf("Zmode_ZombieMastery_3")&&(i.addMaxHp=.01*e.F11,i.addDmg=.01*e.F12,i.addSize=.01*e.F13,i.f15=.001*e.F15,i.f16=.001*e.F16,i.invincible=!0),l.GetComponent(Pp).puppetZombies),n=[],s=!1;for(let e=0;e<a.length;e++){var d=r.GetEntityByID(a[e]);d&&m.id==d.id&&(s=!0)}if(!s&&0<o){m.AddComponentAdv(hp,i),ri.AddBuffToTarget(m,v_.BuffName,!0,-1),ri.ClearBuffByName(m,D_.BuffName),--o;let e=O.CreatPrefabEntityUsePos(N.Effect_Chain);e.GetComponent(Np).soureId=l.id,e.GetComponent(Np).targetId=h.t1,i.effectId=e.id,m.GetComponent(ut).allowOutOfRangDestroy=!1,n.push(m.id)}for(let t=0;t<a.length;t++){let e=r.GetEntityByID(a[t]);e&&!e.GetComponent(R).isDead&&(0<o?(n.push(e.id),--o):(e.GetComponent(D).useUICtrl=e.GetComponent(D).oldUICtrl,e.GetComponent(D).switchHpState=!0,ri.ClearBuffByName(e,v_.BuffName),ri.AddBuffToTarget(e,D_.BuffName,!0,-1,i.f7)))}l.GetComponent(Pp).puppetZombies=n}}static SkillDispose(e,t,i,o){let a=e.GetEntityByID(i.effectId);a&&a.Destory()}}),XI=JI;XI.SkillName="Zmode_ZombieMastery",XI.vec3=new Laya.Vector3(0,0,0),XI.vec2=new Laya.Vector2(0,0);var $I,eC=class{static SkillInit(e,t,i){i.skillName,eC.Invoke(uI.SkillInit,e,t,i,null)}static SkillUpdate(e,t,i,o){i.skillName,eC.Invoke(uI.SkillUpdate,e,t,i,o)}static SkillAddBuffUpdate(e,t,i,o){i.skillName,eC.Invoke(uI.SkillAddBuffUpdate,e,t,i,o)}static TriggerSkill(e,t,i,o){i.skillName,eC.Invoke(uI.UseSkill,e,t,i,o),i.isSklling&&z.Instance.LeYou_action(802)}static SkillDispose(e,t,i,o){i.skillName,eC.Invoke(uI.SkillDispose,e,t,i,o),V.IsGameMode_Zombie()&&H.TriggerItemSkillCallBack(t,i.skillID)}static Invoke(e,t,i,o,a){const n=pI.SkillMethod[e];n&&n[o.skillName]&&n[o.skillName](t,i,o,a)}static Register(){var t=[At,F_,O_,H_,V_,z_,W_,Z_,j_,q_,Y_,Q_,J_,X_,eI,iI,oI,aI,sI,rI,hI,mI,dI,cI,_I,II,CI,GI,yI,SI,UI,wI,vI,DI,LI,BI,AI,xI,TI,kI,MI,PI,NI,FI,OI,HI,VI,zI,jI,ZI,KI,YI,XI,QI];for(let e=0;e<t.length;e++)fI(t[e])}},tC=class extends lt{constructor(){super(...arguments),this.systemName="SkillSystem",this.grounp=new dt([L.id]),this.unitSkillGrounp=new dt([L.id,R.id]),this.buffTime=0}Init(){eC.Register(),P.onAddDay.Register(this,this.onAddDay)}onAddDay(){var i=this.grounp.GetEntitys(this.world),o=K.DataModule().GetLocal().gameRule.ZombieMode_ItemUpgrade();for(let e=0;e<i.length;e++){let t=i[e];if(!t.HasComponent(ut.id)){var a=Math.floor(Math.random()*o.F2)+o.F1;for(let e=0;e<a;e++){var n=t.GetComponent(L).zombieInGameItemDatas.filter(e=>e.NowLevel<e.MaxLv);if(0<n.length){let i=this.WeightRandom(n);i.Weight-=i.Weight*(.01*o.F3),i.NowLevel+=1,P.onSetInfoShow.Trigger(i.ItemID+"_"+i.Name+"_"+i.NowLevel,"2"),console.warn("升级的技能是",i);var s=t.GetComponent(L).skillList;for(let t=0;t<s.length;t++){let e=s[t];e.skillID==i.ItemID&&(e.level=i.NowLevel,e.refershIcon=!0)}}}}}}WeightRandom(t){let i=[],o=0;for(let e=0;e<t.length;e++)o+=t[e].Weight,i.push(o);let a=Math.random()*o,n=0;for(let e=0;e<i.length;e++)if(a<i[e]){n=e;break}return t[n]}Update(){}DealSkill(e,t,i,o){-1!=i.skillKeepTime&&(i.skillKeepTime-=o,i.skillKeepTime<=0&&(i.isSklling=!1,i.skillKeepTime=-1,eC.SkillDispose(this.world,t,i,o))),i.isSklling||0<i.cdTime&&(i.cdTime-=o*e.skillCdScale),eC.SkillUpdate(this.world,t,i,o),this.buffTime<0&&eC.SkillAddBuffUpdate(this.world,t,i,o)}FixedUpdate(){this.buffTime-=A.FixedTimeDelta;var t=this.grounp.GetEntitys(this.world);for(let e=0;e<t.length;e++){let i=t[e],o=i.GetComponent(L);if(0<o.skillList.length)for(let e=o.skillList.length-1;0<=e;e--){let t=o.skillList[e];this.DealSkill(o,i,t,A.FixedTimeDelta),t.useDesdtory&&(-1!=t.skillKeepTime&&(t.skillKeepTime=-1,t.isSklling=!1,eC.SkillDispose(this.world,i,t,A.FixedTimeDelta)),o.skillList=o.skillList.filter(e=>e.skillID!=t.skillID))}""!=o.triggerSkllId&&(o.IsBanSkillTrigger()||H.TriggerSkill(i,o.triggerSkllId),o.triggerSkllId="")}this.buffTime<0&&(this.buffTime=1)}LateUpdate(){}Destroy(){P.onAddDay.Remove(this,this.onAddDay)}OnAddComponent(e,t){}OnRemoveComponent(i,e){if(e.componentId==L.id){let t=i.GetComponent(L);if(0<t.skillList.length)for(let e=t.skillList.length-1;0<=e;e--)t.skillList[e].skillKeepTime=0,this.DealSkill(t,i,t.skillList[e],A.FixedTimeDelta)}}},iC=class{constructor(){this.skillName="",this.skillID="",this.skillKeepTime=-1,this.skillTime=0,this.isSklling=!1,this.cdTime=0,this.cdMaxTime=0,this.level=0,this.maxLevel=3,this.star=0,this.range=0,this.f1=0,this.f2=0,this.f3=0,this.f4=0,this.f5=0,this.f6=0,this.f7="",this.f8="",this.t1=0,this.t2=0,this.t3=0,this.t4=0,this.effectId=-1,this.effectId2=-1,this.useDesdtory=!1,this.idList=[],this.isItem=!1,this.itemLeftTimes=0,this.refershIcon=!1,this.skillPos=0,this.dangerAngle=360}},H=class{static HitTarget(l,a,n,s,r=0,h=null,m=0,d=N.Effect_Bleed,c=!1){let u=n,p=q.NowGameWorld.GetEntityByID(l),g=q.NowGameWorld.GetEntityByID(a);if(!p)return!1;let f=p.GetComponent(M),_=p.GetComponent(R);if(_.isDead)return!1;if(_.GetIsInvincible())return!1;if(!s){if(q.Random()<_.dodgePer)return p.GetComponent(D).ShowHpChanged(D.changeHpType_Miss,0),ci.IsSeaPower(p)&&!V.IsGameMode_Zombie()&&ri.AddBuffToTarget(p,zf.BuffName,!0,100,0,0,0,0,a),!1;g&&(ci.Qi_FlyingScissor(g)&&(C=H.GetSkillDmg(g)*g.GetComponent(ti).skinSpEffect_F2*.01,ri.AddBuffToTarget(p,Zf.BuffName,!1,5,C,1,1,1,g.id)),ci.Qi_FlyingScissor2(g)&&(C=H.GetSkillDmg(g)*g.GetComponent(ti).skinSpEffect_F3*.01,ri.AddBuffToTarget(p,Kf.BuffName,!1,5,C,1,1,1,g.id)))}let I="";if(I=d,0<r&&!_.GetIsSuperArmor()){let e=new Laya.Vector2(0,0),t=1;t=h.HasComponent(w.id)&&p.HasComponent(ut.id)?(C=h.GetComponent(w),e.x=C.dir.x,e.y=C.dir.z,-1):(d=h.GetComponent(M),e.x=d.pos.x-f.pos.x,e.y=d.pos.z-f.pos.z,1),Laya.Vector2.normalize(e,e);let i=S.VecToAngle(e),o=1,a=1;V.IsGameMode_Zombie()?a=r/(o=m/_.hitRecovery):o=r/(a=20)/_.hitRecovery,p.GetComponent(F).nowState==uc.StateName?p.GetComponent(F).time+=o:p.GetComponent(F).time=o,p.GetComponent(F).ChangeState(uc.StateName),Laya.Vector2.scale(e,a,e),p.HasComponent(ut.id)?(p.GetComponent(w).vec.x=e.x,p.GetComponent(w).vec.z=e.y):(p.GetComponent(w).vec.x=-e.x,p.GetComponent(w).vec.z=-e.y,p.GetComponent(M).rotation.y=t*i)}if(0<m&&(p.GetComponent(R).GetIsNoSap()||ri.AddSAP(p,m/_.hitRecovery)),0<_.hp){let e=!1;var C;if(g&&g.HasComponent(R.id)&&(C=g.GetComponent(R),q.Random()<C.critPer&&(e=!0,n*=1.5)),!s&&q.Random()<_.parryChance&&(I=N.Effect_Parry,p.GetComponent(D).ShowHpChanged(D.changeHpType_Parry,0),n*=.5,p.HasComponent(ti.id))){if("SnowShield"==p.GetComponent(ti).skinSpEffect){let e=O.CreatPrefabEntityUsePos(N.Effect_InvincibleEffect2,new Laya.Vector3(f.pos.x,f.pos.y,f.pos.z));e.GetComponent(M).rotation.y=p.GetComponent(M).rotation.y,e.GetComponent(Mt).followTargetId=p.id}if("SeaPower"==p.GetComponent(ti).skinSpEffect){ci.UseSeaPower();let e=O.CreatPrefabEntityUsePos(N.Effect_InvincibleEffect3,new Laya.Vector3(f.pos.x,f.pos.y,f.pos.z));e.GetComponent(M).rotation.y=p.GetComponent(M).rotation.y,e.GetComponent(Mt).followTargetId=p.id,n=u*(1-.01*p.GetComponent(ti).skinSpEffect_F1)}}if(f.isInCameraArea&&(s||ci.GuGuChicken(g),O.CreatPrefabEntityUsePos(I,new Laya.Vector3(f.pos.x,f.pos.y+.5,f.pos.z))),!V.banAllAttAndFog){if(V.IsGameMode_Nian()&&g){let e=V.GetInGamePlayerData(g.GetComponent(E).netId);e&&(_.hp<n?e.dmg+=_.hp:e.dmg+=n)}_.hp-=n,k.attVibrate&&!s&&g&&g.HasComponent(_t.id)&&K.PlatformModule().VibrateShort()}if(f.isInCameraArea&&(e?p.GetComponent(D).ShowHpChanged(D.changeHpType_SuperSub,n):p.GetComponent(D).ShowHpChanged(D.changeHpType_Sub,n)),p.HasComponent(_t.id)&&K.PlatformModule().VibrateLong(),g&&g.HasComponent(R.id)&&0<(d=g.GetComponent(R)).suckBlood&&0<d.hp&&(r=n*d.suckBlood,this.AddHp(g,r)),_.hp<=0){let o=V.GetInGamePlayerData(p.GetComponent(E).netId);if(V.gameMode==$I.Normal&&g&&g.HasComponent(_t.id)&&K.DataModule().GetUser().AddHuoYueDu(1),V.IsGameMode_Deathmatch()){var G=o.sourceDamages.filter(e=>e!=a);for(let t=0;t<G.length;t++){let e=G[t],i=q.NowGameWorld.GetEntityByID(e);if(i){let e=i.GetComponent(E).netId,t=V.GetInGamePlayerData(e);t.smashScore+=3,console.warn("助攻加分,",e,t.smashScore)}else console.error("死斗模式没找到这个助攻的人：",i,e)}if(-1!=a&&g){let e=g.GetComponent(E).netId,t=V.GetInGamePlayerData(e);t.smashScore+=10,console.warn("击杀加分,",e,t.smashScore)}o.sourceDamages=[]}if(o){let s=0;if(!V.IsGameMode_Nian()&&!V.IsGameMode_Deathmatch()){let a=o.userItemDatas,e=p.GetComponent(v),t=V.GetNestUnit(f.pos,e.nowMapPos.x,e.nowMapPos.y,6,l,0),n=q.NowGameWorld.GetEntityByID(t);if(V.IsGameMode_Zombie()&&p.HasComponent(ut.id)){m=K.DataModule().GetLocal().zombie.GetByKey(p.GetComponent(ut).zombieID);if(m.LotteryID)V.BonuseLotteryItem(p,null,m.LotteryID,3);else{let e=K.DataModule().GetUser().NewUserItemData(),t=Math.random();t<m.DropProbability[0]&&(e.id=Z.Bolt,e.type=Z.Bolt,e.tableID=Z.Bolt,a.push(e),t=1/0),(t-=m.DropProbability[0])<m.DropProbability[1]&&(e.id=Z.Battery,e.type=Z.Battery,e.tableID=Z.Battery,a.push(e),t=1/0),(t-=m.DropProbability[1])<m.DropProbability[2]&&(e.id=Z.AddItem,e.type=Z.AddItem,e.tableID=Z.AddItem,a.push(e),t=1/0),(t-=m.DropProbability[2])<m.DropProbability[3]&&(e.id=Z.AddWeapon,e.type=Z.AddWeapon,e.tableID=Z.AddWeapon,a.push(e),t=1/0),t-=m.DropProbability[3]}}else{if(k.isUseGridBoxKey)if(q.Instance().netFrame){if(q.Random()<Gp.InGame_KillProbability_ChestKey){let e=K.DataModule().GetUser().NewUserItemData();e.id=Z.ChestKey,e.type=Z.ChestKey,e.tableID=Z.ChestKey,a.push(e)}}else if(q.Random()<Gp.InGame_KillProbability_ChestKey){let e=K.DataModule().GetUser().NewUserItemData();e.id=Z.ChestKey,e.type=Z.ChestKey,e.tableID=Z.ChestKey,a.push(e)}g&&g.HasComponent(_t.id)&&k.useHeroNoUnlock&&(C=K.DataModule().GetLocal().lottery.GetChest("StrikeKillPeopleDebris"),d=K.DataModule().GetUser().GetUserItemDataList(C),a=a.concat(d))}for(let o=0;o<a.length;o++)if(V.IsGameMode_Zombie())V.BonuseItem(p,null,a,o);else if(V.IsGameMode_Nian())Jc.CreatBonuseItem(p.GetComponent(M).pos,a[o],1,1.5,!0);else{s++;let i=Jc.CreatBonuseItem(p.GetComponent(M).pos,a[o]);if(g){let e=V.GetInGamePlayerData(g.GetComponent(E).netId),t=g.id;g.HasComponent(y.id)&&(t=g.GetComponent(y).createId),i&&(i.GetComponent(Ht).targetId=t),e.userItemDatas.push(a[o])}else if(n){let e=V.GetInGamePlayerData(n.GetComponent(E).netId);i&&(i.GetComponent(Ht).targetId=n.id),e.userItemDatas.push(a[o])}else i&&(i.GetComponent(Ht).targetId=-1)}o.userItemDatas=[]}_.hp=0;let t=K.DataModule().GetLocal().gameRule.InGameKillExp(p.GetComponent(R).nowLevel),e=p.GetComponent(ut),i=(V.IsGameMode_Zombie()&&e&&(t=e.killExp),g);if(g){if(g.HasComponent(y.id)){let e=q.NowGameWorld.GetEntityByID(g.GetComponent(y).createId);e&&(e.GetComponent(R).canLevelUp&&(ri.DelayGetExp(e,.8,t),Jc.CreatExpEffect(p.GetComponent(M).pos,e)),i=e)}else if(g.HasComponent(hp.id)){let e=q.NowGameWorld.GetEntityByID(g.GetComponent(hp).ownerId);e&&(e.GetComponent(R).canLevelUp&&(ri.DelayGetExp(e,.8,t),Jc.CreatExpEffect(p.GetComponent(M).pos,e)),i=e)}else g.GetComponent(R).canLevelUp&&(ri.DelayGetExp(g,.8,t),Jc.CreatExpEffect(p.GetComponent(M).pos,g));let e=V.GetInGamePlayerData(g.GetComponent(E).netId);e&&(e.kill+=1)}o&&(o.rank=V.nowSavePlayer),k.isOpenNewInGameGuide&&V.guideAIID==p.id&&2==V.nowGuide&&(V.guideList.push(3),z.Instance.LeYou_Guidance(108)),V.IsGameMode_Zombie()&&p.HasComponent(ut.id)||V.nowSavePlayer--,_.isDead=!0,g&&P.onKill.Trigger(g,p,s,i),g&&g.HasComponent(ti.id)&&"WhiteLine"==g.GetComponent(ti).skinSpEffect&&Laya.timer.once(1500,this,()=>{f&&O.CreatPrefabEntityUsePos(N.Effect_DeadOutLine,new Laya.Vector3(f.pos.x,.1,f.pos.z),new Laya.Vector3(0,f.rotation.y,0))}),g&&g.HasComponent(ti.id)&&"SongofIce"==g.GetComponent(ti).skinSpEffect&&g.GetComponent(M).isInCameraArea&&K.AudioModule().PlayOnce(x.GetSound2("aini"))}}else if(V.IsGameMode_Deathmatch()&&-1!=a){let e=p.GetComponent(E).netId,t=V.GetInGamePlayerData(e);-1==t.sourceDamages.indexOf(a)&&t.sourceDamages.push(a)}let t=q.EcsGameMgr.World.CreatEntity(),i=new ai,o=1;if(g&&(c&&(o=g.GetComponent(R).specialCombo),i.attacker=g.id),h&&(i.bullectId=h.id),i.hitedTarget=p.id,i.toDeath=_.hp<=0?1:0,i.dmg=n,i.beforeTriggerDmg=!1,i.specialCombo=o,i.dmgType=s?1:0,g){let e=!1;g.HasComponent(Iu.id)&&g.HasComponent(y.id)&&g.GetComponent(y).createId==V.GetLocalPlayer().id&&(i.attacker=g.GetComponent(y).createId,e=!0),(e=g.HasComponent(_t.id)&&!s?!0:e)&&P.onBatterShow.Trigger(o)}t.AddComponentAdv(ai,i),t.Destory()}return!0}static AddSkill(t,e,i,o=0,a=0,n=3){console.warn("AddSkill",e),t.HasComponent(L.id)||t.AddComponent(L);let s=t.GetComponent(L);for(let e=0;e<s.skillList.length;e++)if(s.skillList[e].skillID==i)return s.skillList[e].level+=1,void eC.SkillInit(q.EcsGameMgr.nowGame.world,t,s.skillList[e]);let l=new iC;l.skillName=e,l.skillID=i,l.level=o,l.star=a,l.maxLevel=n,l.isItem=!1,l.skillPos=V.addSkillGetSkillPos(s.skillList,!0),eC.SkillInit(q.EcsGameMgr.nowGame.world,t,l),s.skillList.push(l)}static AddItem(t,i,o,a=0,n=0,s=3,l=0){console.warn("AddItem",i),t.HasComponent(L.id)||t.AddComponent(L);let r=t.GetComponent(L);for(let e=0;e<r.skillList.length;e++)if(r.skillList[e].skillID==o)return r.skillList[e].itemLeftTimes+=l,r.skillList[e].skillPos>r.unlockPosTimes&&(r.skillList[e].skillPos=V.addSkillGetSkillPos(r.skillList)),void eC.SkillInit(q.EcsGameMgr.nowGame.world,t,r.skillList[e]);if(r.skillList.filter(e=>1==e.isItem&&e.skillPos<=r.unlockPosTimes).length<r.unlockPosTimes){let e=new iC;e.skillName=i,e.skillID=o,e.level=a,e.star=n,e.maxLevel=s,e.itemLeftTimes=l,e.isItem=!0,e.skillPos=V.addSkillGetSkillPos(r.skillList),eC.SkillInit(q.EcsGameMgr.nowGame.world,t,e),r.skillList.push(e)}}static TriggerItemSkillCallBack(i,o){if(V.IsGameMode_Zombie()){var a=i.GetComponent(L).skillList.filter(e=>e.skillID==o);for(let t=0;t<a.length;t++){let e=a[t];e.skillID==o&&e.isItem&&(--e.itemLeftTimes,e.itemLeftTimes<=0&&(e.useDesdtory=!0),i.GetComponent(R).needUIFreshChoose=!0)}}}static TriggerSkill(t,o){if(t.HasComponent(L.id)||t.AddComponent(L),V.aiUseSkillWithMe&&t.HasComponent(R.id)){var e=V.GetInGamePlayerDataById(t.id);if(e&&e.isSelf){let i=q.NowGameWorld.GetEntitys([L.id,Et.id]);for(let t=0;t<i.length;t++){let e=i[t].GetComponent(L);Laya.timer.once(3e3*Math.random(),this,()=>{e.triggerSkllId=o})}}}var a=t.GetComponent(L);for(let e=0;e<a.skillList.length;e++)if(a.skillList[e].skillID==o){let i=a.skillList[e];if(i.cdTime<=0){eC.TriggerSkill(q.EcsGameMgr.nowGame.world,t,i,A.FixedTimeDelta);let e=V.GetInGamePlayerDataById(t.id);if(e&&e.useSkillCount++,i.isItem){let t=3;if(1==i.itemLeftTimes){for(let e=0;e<a.skillList.length;e++){var n=a.skillList[e];n.skillPos>t&&(t=n.skillPos)}i.skillPos=t+2}}}}}static AddHp(e,t){let i=e.GetComponent(R);i.hp+=t;var o=t/i.maxHp;if(e.HasComponent(Pp.id)){var a,n=e.GetComponent(Pp).puppetZombies;for(let i=0;i<n.length;i++){let e=n[i],t=q.NowGameWorld.GetEntityByID(e);t&&!t.GetComponent(R).isDead&&(a=t.GetComponent(R).maxHp*o,H.AddHp(t,a))}}e.GetComponent(M).isInCameraArea&&e.HasComponent(D.id)&&e.GetComponent(D).ShowHpChanged(D.changeHpType_Add,t),i.hp>i.maxHp&&(i.hp=i.maxHp)}static StopAllSkill(e){if(e.HasComponent(L.id)){let t=e.GetComponent(L).skillList;for(let e=0;e<t.length;e++)t[e].skillKeepTime=0}}static GetData(e,t=1,i=1,o=1,a=1,n=1,s=1){var l=K.DataModule().GetLocal().skill.Get(e.skillID),r=(e.cdMaxTime=.001*l.CD,e.skillTime=.001*l.keepTime,e.level-1);e.f1=(l.F1+r*l.L1)*t,e.f2=(l.F2+r*l.L2)*i,e.f3=(l.F3+r*l.L3)*o,e.f4=(l.F4+r*l.L4)*a,e.f5=(l.F5+r*l.L5)*n,e.f6=(l.F6+r*l.L6)*s}static GetItemData(e,t=1,i=1,o=1,a=1,n=1,s=1){var l=K.DataModule().GetLocal().item.Get(e.skillID),r=(e.cdMaxTime=.001*l.CD,e.skillTime=.001*l.keepTime,e.level-1);e.f1=(l.F1+r*l.L1)*t,e.f2=(l.F2+r*l.L2)*i,e.f3=(l.F3+r*l.L3)*o,e.f4=(l.F4+r*l.L4)*a,e.f5=(l.F5+r*l.L5)*n,e.f6=(l.F6+r*l.L6)*s}static GetBuffData(t,i=1,o=1,a=1,n=1,s=1,e,l=null){if(l)for(let e=1;e<=5;e++)l["f"+e]=t["f"+e];else{let e=null;var r;V.IsGameMode_Zombie()?e=K.DataModule().GetLocal().zModePassiveSkill.Get(t.buffName):null==(e=K.DataModule().GetLocal().zModePassiveSkill.Get(t.buffName))&&(e=K.DataModule().GetLocal().skill.Get(t.buffName)),e&&(r=t.level-1,t.f1=(e.F1+r*e.L1)*i,t.f2=(e.F2+r*e.L2)*o,t.f3=(e.F3+r*e.L3)*a,t.f4=(e.F4+r*e.L4)*n,t.f5=(e.F5+r*e.L5)*s)}}static GetSkillDmg(e){return e.GetComponent(R).dmg*e.GetComponent(R).GetAttSpeedScale()}static GetZModePassiveSkillDmg(e,t){t=K.DataModule().GetLocal().zModePassiveSkill.Get(t);return"Weapon"==t.DmgType?this.GetWeaponDmg(e):"Skill"==t.DmgType?this.GetSkillDmg(e):e.GetComponent(R).dmg*e.GetComponent(R).GetAttSpeedScale()}static GetWeaponDmg(e){return e.GetComponent(R).dmg}};(e=$I=$I||{}).Normal="Normal",e.Nian="Nian",e.Deathmatch="Deathmatch",e.Zombie="Zombie";var oC,aC,g,nC=class{static IsGameMode_Deathmatch(){return nC.gameMode==$I.Deathmatch}static get zombieMode_QuestStar(){return Math.min(5,Math.ceil(nC.CurrentDay/3))}static get zombieMode_ZombieSceneBirthCD(){let e=K.DataModule().GetLocal().gameRule,t=1,i=!1,o=nC.radiationLevel,a=0;switch(nC.ScenesTatus){case np.Daytime:a=nC.zombieMode_TodayZombieBirthCount/e.ZombieMode_ZombieCreateMaxCount_Day(o),t=e.ZombieMode_ZombieCreateCDRatio_Day(a),1<=a&&(i=!0);break;case np.Night:t=e.ZombieMode_ZombieCreateCDRatio_Night(nC.zombieMode_TonightZombieBirthCount,e.ZombieMode_ZombieCreateMaxCount_Night(o)),1<=a&&(i=!0);break;case np.BloodyNight:t=e.ZombieMode_ZombieCreateCDRatio_BloodNight(nC.zombieMode_TonightZombieBirthCount,e.ZombieMode_ZombieCreateMaxCount_BloodNight(o)),1<=a&&(i=!0)}return i&&(t*=e.ZombieMode_ZombieCreateMaxCount_LimitSpeedRatio()),t}static get zombieMode_DiffRatio(){let e=K.DataModule().GetLocal().gameRule;return Math.pow(e.ZombieMode_DiffRatio(),nC.radiationLevel)}static GetZombieRandomHitAnim(){var e=["Hited","Hited2"];return e[Math.floor(Math.random()*e.length)]}static GetZombieRandomGroupNoiseSound(){var e=["Zombie_GroupNoise1","Zombie_GroupNoise2","Zombie_GroupNoise3","Zombie_GroupNoise4"];return e[Math.floor(Math.random()*e.length)]}static GetZombieRandomNoiseSound(){var e=["Zombie_Noise1","Zombie_Noise2","Zombie_Noise3"];return e[Math.floor(Math.random()*e.length)]}static zombieMode_bunkerLevelHP(e){return K.DataModule().GetLocal().gameRule.ZombieMode_Bunker_HP(e)}static zombieMode_bunkerUpgradePrice(e){let t=K.DataModule().GetLocal().gameRule;return e<t.ZombieMode_Bunker_MaxLevel()?t.ZombieMode_Bunker_UpgradePrice(e):999999}static zombieMode_bunkerRepairPrice(e){return K.DataModule().GetLocal().gameRule.ZombieMode_Bunker_RepairPrice(e)}static get zombieMode_DayTime(){return K.DataModule().GetLocal().gameRule.ZombieMode_DayTime()}static get zombieMode_NightTime(){return K.DataModule().GetLocal().gameRule.ZombieMode_NightTime()}static ResetLoadTentShopUI(){let e=K.UIModule().GetUI(cf.UIName);e.view&&e.isShow&&e.resetLoad()}static GetDisFromLocalPlayer(e){let t=nC.GetLocalPlayer();var i;return t?(i=t.GetComponent(M),Laya.Vector3.distance(e,i.pos)):1/0}static GetLocalPlayer(){return q.NowGameWorld.GetEntitys([_t.id])[0]}static GetPlayerRange(i,e,t,o=-1){let a=q.NowGameWorld.GetEntitys([E.id]),n=(a=a.filter(e=>e.GetComponent(E).team!=t),-1),s=-99999,l=e*e,r=q.NowGameWorld.GetEntityByID(o);for(let e=0;e<a.length;e++){let t=a[e];if(!t.HasComponent(hp.id)||!r.HasComponent(hp.id)){let e=0;if(t.HasComponent(R.id)){if(t.GetComponent(R).hp<=0)continue;e=1}else if(t.HasComponent(y.id)){var h=t.GetComponent(y);if(h.hp<=0)continue;if(t.HasComponent(pt.id)){let e=t.GetComponent(pt);if(h.hp<=0||e.isDamage)continue;if(e.doorIsOpen)continue;if(0==e.residentIDList.length){if(-1==e.zombieIdList.indexOf(o))continue}else if(-1!=e.zombieIdList.indexOf(o))continue}if(t.HasComponent(pi.id)){var m=t.GetComponent(pi);if(m.isDamage)continue;if(-1==m.driverId&&m.passengerIdList.length<=0)continue}e=h.aimedPriority}e<s||(m=t.GetComponent(M),this.vec2.x=m.pos.x-i.x,this.vec2.y=m.pos.z-i.z,h=this.vec2.x*this.vec2.x+this.vec2.y*this.vec2.y,(e>s||h<l)&&(l=h,n=t.id,s=e))}}return n}static GetPlayerListRange(o,a,t,n=-1,e=[R.id,E.id]){let s=q.NowGameWorld.GetEntitys(e),l=(s=s.filter(e=>e.GetComponent(E).team!=t),[]);for(let i=0;i<s.length;i++){let e=s[i],t=e.GetComponent(M);this.vec2.x=t.pos.x-o.x,this.vec2.y=t.pos.z-o.z,Laya.Vector2.scalarLength(this.vec2)<a&&e.id!=n&&l.push(e.id)}return l}static AddGunBuff(e,t){t=K.DataModule().GetLocal().weapon.Get(t);t&&(t.Type==ot.Sniper&&ri.AddBuffToTarget(e,f_.BuffName,!0,-1,10,0,0,0,e.id,10),t.Type==ot.ShotGun&&ri.AddBuffToTarget(e,__.BuffName,!0,-1,10,0,0,0,e.id,10),t.Type==ot.Pistol&&ri.AddBuffToTarget(e,I_.BuffName,!0,-1,10,0,0,0,e.id,10),t.Type==ot.TommyGun&&ri.AddBuffToTarget(e,C_.BuffName,!0,-1,10,0,0,0,e.id,10),t.Type==ot.Rifle&&ri.AddBuffToTarget(e,G_.BuffName,!0,-1,10,0,0,0,e.id,10)),ri.AddBuffToTarget(e,m_.BuffName,!0,-1,1,1,1,1,1,1,1,1,1,0),ri.AddBuffToTarget(e,d_.BuffName,!0,-1,1,1,1,1,1,1,1,1,1,0)}static ChangeGun(e,t){var i=e.GetComponent(ti);e.RemoveComponent(ti);let o=K.DataModule().GetLocal().weapon.Get(t),a=(e.RemoveComponent(bt),e.GetComponent(R)),n=new ti,s=new bt,l=e.GetComponent(U),r=(null!=o&&(n.BodySkin=i.BodySkin,n.WeaponSkin=o.Res,n.weaponId=o.ID,n.weaponSkinID="",n.skinId=i.skinId,n.skinSpEffect=i.skinSpEffect,n.skinSpEffectList=i.skinSpEffectList,n.skinSpEffect_F1=i.skinSpEffect_F1,n.skinSpEffect_F2=i.skinSpEffect_F2,n.skinSpEffect_F3=i.skinSpEffect_F3,n.skinSpEffect_F4=i.skinSpEffect_F4,n.skinSpEffect_F5=i.skinSpEffect_F5,n.skinSpEffect_F6=i.skinSpEffect_F6,n.skinSpEffect_F7=i.skinSpEffect_F7,s.mainWeapon=o.BaseWeaponPrefab,nC.IsGameMode_Zombie()?a.dmg=o.Z_Dmg:a.dmg=o.Dmg,l.readOnlyAttackRange=o.AttackRange,""!=o.BulletPrefab?l.bullet0=o.BulletPrefab:l.bullet0=nC.GetWeaponDefulBulletPrefab(n.weaponId),l.shotCD=1/o.AttSpeed,l.sniperRifleattRange=o.AttackRange,l.attackRange=o.AttackRange,l.recoilTime=o.Recoil,""!=o.ClassFactor?l.consecutiveShots=o.ClassFactor.split(",").length:l.consecutiveShots=1,l.bulletLoadCD=o.LoadBulletTime,l.bulletCount=o.BulletCount,l.nowBulletCount=l.bulletCount,l.superReloadCount=0,l.bulletLoadTime=0,l.shotCDScale=1,nC.IsGameMode_Zombie()&&(l.bulletSapTime=o.ZombieMode_SapTime,l.bulletStiffnessDis=o.ZombieMode_StiffnessDis,a.attSpeedScale=o.AttSpeed)),e.AddComponentAdv(bt,s),e.AddComponentAdv(ti,n),a.basedmg=a.dmg,M_(e,R_.ChangeGun(e.id)),e.GetComponent(D).bulletLoadCD=l.bulletLoadCD,e.GetComponent(D).playReloadAni=!1,e.GetComponent(D).singleShotLoading=l.singleShotLoading,e.GetComponent(D).bulletCount=l.bulletCount,e.GetComponent(D).nowBulletCount=l.nowBulletCount,e.GetComponent(D).freshUI=!0,e.GetComponent(D).isChangeGun=!0,e.GetComponent(Qc).bulletCount=0,e.GetComponent(Qc).nowState=0,K.UIModule().GetUI(Uf.UIName));r.view&&r.isShow&&r.changGun(n.weaponId)}static GetWeaponDefulBulletPrefab(e){e=K.DataModule().GetLocal().weapon.Get(e);return e.Type==ot.Pistol?"Bullet_GunBullet1":e.Type==ot.TommyGun?"Bullet_GunBullet2":e.Type==ot.Rifle?"Bullet_GunBullet3":e.Type==ot.ShotGun?"Bullet_GunBullet4":e.Type==ot.Sniper?"Bullet_GunBullet5":void 0}static IsGameMode_Nian(){return nC.gameMode==$I.Nian}static IsGameMode_Zombie(){return nC.gameMode==$I.Zombie}static AddItem(t,i){i.split("_");let e=i,o=t.GetComponent(R).willRandomSkill;for(let e=0;e<o.length;e++)o[e]==i&&o.splice(e,1);let a=K.DataModule().GetLocal().item.Get(e),n=t.GetComponent(L).zombieInGameItemDatas.filter(e=>e.ItemID==a.ItemID),s=1;if(0<n.length&&(s=n[0].NowLevel),null!=a){if(""!=a.SkillFun)for(let e=0;e<1;e++)console.warn("吃到的道具等级",a.ItemID,s),H.AddItem(t,a.SkillFun,a.ItemID,s,1,a.MaxLv,a.Times);""!=a.BuffFun&&ri.AddBuffToTarget(t,a.BuffFun,a.IsOnlyBuff,.001*a.keepTime,a.F1,a.F2,a.F3,a.F4,a.L1,a.L2,a.L3,a.L4,a.MaxLv-1)}if(t.GetComponent(M).isInCameraArea){let e=O.CreatPrefabEntityUsePos(N.Effect_ChooseOneEffect,t.GetComponent(M).pos);e.AddComponent(Mt).followTargetId=t.id,e.GetComponent(Mt).followrotation=!1}}static GetOneUpGrade(t,i,o){if(0<o.length)for(let e=0;e<i.length;e++){var a=o[0].split("_")[0];if(i[e]==a)return t.push(o[0]),i.splice(e,1),void o.shift()}var e=Math.floor(q.Random()*i.length);t.push(i[e]),i.splice(e,1)}static GetZombiePatrolRange(e){return nC.ScenesTatus==np.Daytime?e:100*e}static GetChooses(){let t=[],i=nC.GetInGamePlayerData(this.myInGamePlayerData.netId);if(i)for(let e=0;e<i.unlockSkills.length;e++)t.push(i.unlockSkills[e]);else t=K.DataModule().GetLocal().skill.GetAllUpGrade();let e=q.NowGameWorld.GetSingleCompoentEntity(_t);if(e.HasComponent(L.id)){var o=e.GetComponent(L);if(o.skillList.length>=o.unlockPosTimes){t=K.DataModule().GetLocal().skill.GetNoSkillUpGrade();for(let e=0;e<o.skillList.length;e++)o.skillList[e].level<o.skillList[e].maxLevel&&t.push(o.skillList[e].skillID)}}var a=e.GetComponent(R).willRandomSkill.concat(),n=[];for(let e=0;e<3;e++)this.GetOneUpGrade(n,t,a);return n}static GetSmashScoreRank(){let t=[];for(let e=0;e<nC.ingamePlayerDatas.length;e++)t.push(nC.ingamePlayerDatas[e]);return t=t.sort(function(e,t){return t.smashScore-e.smashScore})}static GetSkillAttRangle(e){let t=e.GetComponent(M).rotation.y;return t="Local"==e.GetComponent(E).netId?nC.lastAttackAngle:t}static skillOffAtt(e){var t=e.GetComponent(bt),i=e.GetComponent(U);1==e.GetComponent(R).attBtnState&&nC.isPressButtonLaunch(t.mainWeapon,i.isAR)&&e.GetComponent(R).StartTriggerAtt()}static FeiJi(){if(nC.feiJiOn){let e=q.NowGameWorld.GetEntityByID(nC.feiJiId);e&&(e.GetComponent(M).pos.z+=1.4,200<e.GetComponent(M).pos.z&&(nC.feiJiOn=!1,console.warn("飞机坠毁")))}}static isPressButtonLaunch(e,t){return e!=N.Weapon_THInfantryGun&&!!t}static GetInGamePlayerDataById(e){let t=q.NowGameWorld.GetEntityByID(e);return t?(e=t.GetComponent(E).netId,this.GetInGamePlayerData(e)):null}static GetInGamePlayerData(t){for(let e=0;e<this.ingamePlayerDatas.length;e++)if(this.ingamePlayerDatas[e].netId==t)return this.ingamePlayerDatas[e];return null}static GetNianDmgRank(){let t=[];for(let e=0;e<nC.ingamePlayerDatas.length;e++)"Nian"!=nC.ingamePlayerDatas[e].netId&&t.push(nC.ingamePlayerDatas[e]);return t=t.sort((e,t)=>t.dmg-e.dmg)}static IsInCameraArea(e){return!(Math.abs(e.x-this.nowCameraPos.x)>this.CameraRange||Math.abs(e.z-this.nowCameraPos.z)>this.CameraRange)}static ClearPlayerCmd(t){if(0<this.cmds.length)for(let e=this.cmds.length-1;0<=e;e--)this.cmds[e].id==t&&this.cmds.splice(e,1)}static GetRoundTile(e,t){return vt.Instance.GetNeed9Title(e,t)}static GetNestItem(a,e,t,i){let n=vt.Instance.GetNeed9Title(e,t),s=i,l=-1;for(let o=0;o<n.length;o++)for(let i=0;i<n[o].itemList.length;i++){let e=q.NowGameWorld.GetEntityByID(n[o].itemList[i]),t=e.GetComponent(M);this.vec2.x=t.pos.x-a.x,this.vec2.y=t.pos.z-a.z;var r=Laya.Vector2.scalarLength(this.vec2),h=e.GetComponent(y);h.type==y.Type_Box&&h.hp<=0||h.type!=y.Type_WallBox&&r<s&&(s=r,l=e.id)}return l}static GetNestBoxItem(o,e,t,i,a){let n=vt.Instance.GetNeed9Title(e,t),s=i,l=-1;for(let i=0;i<n.length;i++)for(let t=0;t<n[i].itemList.length;t++){let e=q.NowGameWorld.GetEntityByID(n[i].itemList[t]);if(nC.IsGameMode_Zombie()){if(e.HasComponent(E.id)&&e.GetComponent(E).team==a.team)continue}else if(e.HasComponent(E.id)&&e.GetComponent(E).netId==a.netId)continue;var r=e.GetComponent(M),r=(this.vec3.x=r.pos.x-o.x,this.vec3.y=r.pos.z-o.z,Laya.Vector2.scalarLength(this.vec3)),h=e.GetComponent(y);h.type==y.Type_Box&&h.hp<=0||h.type==y.Type_BounesItem||h.type==y.Type_Eat||e.HasComponent(pt.id)||r<s&&(s=r,l=e.id)}return l}static GetFogDis(e){return Laya.Vector3.distance(e,nC.fogPos)}static BoxHitDetect(e,t,i,o,a){let n=a.x-e.x,s=a.z-e.z,l=S.DegToPi*o,r=(S.DegToPi,Math.sin(l)),h=Math.cos(l),m=n*h-s*r,d=n*r+s*h,c=!1,u=.5*t-Math.abs(m),p=.5*i-Math.abs(d);return c=0<u&&0<p?!0:c}static SectorHitDetect(i,e,o,a,n){this.hitvec2.x=o.x-i.x,this.hitvec2.y=o.z-i.z;var t=Laya.Vector2.scalarLength(this.hitvec2);if(t<=.5)return!0;if(t<=e){this.vec2.x=o.x-i.x,this.vec2.y=o.z-i.z;let e=S.VecToAngle(this.vec2),t=Math.abs(a-e);if((t=180<t?360-t:t)<=.5*n)return!0}return!1}static GetCurrentDirection(o,a,n,e,s,l,r=-1){let t=e.nowMapPos.x,i=e.nowMapPos.y,h=vt.Instance.GetNeed9Title(t,i),m=s,d=-1,c=[];for(let t=0;t<h.length;t++){for(let e=0;e<h[t].unitList.length;e++)c.push(h[t].unitList[e]);for(let e=0;e<h[t].itemList.length;e++)c.push(h[t].itemList[e])}for(let i=0;i<c.length;i++){let e=c[i],t=q.NowGameWorld.GetEntityByID(e);if(l!=t.id&&(-1==r||!t.HasComponent(E.id)||t.GetComponent(E).team==r)){var u=t.GetComponent(M),p=(this.vec2.x=u.pos.x-n.x,this.vec2.y=u.pos.z-n.z,Laya.Vector2.scalarLength(this.vec2));if(!(t.HasComponent(R.id)&&t.GetComponent(R).hp<=0)){if(t.HasComponent(y.id)){var g=t.GetComponent(y);if(g.hp<=0)continue;if(g.createId==l)continue}g=t.GetComponent(v);1==o&&!this.BoxHitDetect(n,.5+g.radius,2*s+g.radius,a,u.pos)||2==o&&!this.SectorHitDetect(n,5+g.radius,u.pos,a,60)||3==o&&!this.SectorHitDetect(n,5+g.radius,u.pos,a,200)||(u=S.AngleToDir(a),u=S.SignVecAngle(u,this.vec2),90<Math.abs(u)||p<m&&(m=p,d=t.id))}}}return d}static GetNestUnit(o,e,t,i,a,n=-1){let s=vt.Instance.GetNeed9Title(e,t),l=i,r=-1;for(let i=0;i<s.length;i++)for(let t=0;t<s[i].unitList.length;t++){let e=q.NowGameWorld.GetEntityByID(s[i].unitList[t]);var h;-1!=n&&e.GetComponent(E).team!=n||e.HasComponent(hp.id)||(h=e.GetComponent(M),this.vec2.x=h.pos.x-o.x,this.vec2.y=h.pos.z-o.z,h=Laya.Vector2.scalarLength(this.vec2),e.GetComponent(R).hp<=0||a!=e.id&&h<l&&(l=h,r=e.id))}return r}static GetBossByRange(o,e){let a=q.NowGameWorld.GetEntitys([Lt.id]),n=-1,s=e;for(let i=0;i<a.length;i++){let e=a[i],t=e.GetComponent(M);this.vec2.x=t.pos.x-o.x,this.vec2.y=t.pos.z-o.z;var l=Laya.Vector2.scalarLength(this.vec2);e.GetComponent(R).hp<=0||l<s&&(s=l,n=e.id)}return n}static GetUnitByRange(e,t,i,o,a){return nC.GetUnitByRangetoRange(e,t,i,0,o,a)}static GetUnitByRangetoRange(a,e,t,n,s,l){let r=vt.Instance.GetNeed9Title(e,t),h=[];for(let o=0;o<r.length;o++)for(let i=0;i<r[o].unitList.length;i++){let e=q.NowGameWorld.GetEntityByID(r[o].unitList[i]),t=e.GetComponent(M);this.vec2.x=t.pos.x-a.x,this.vec2.y=t.pos.z-a.z;var m=Laya.Vector2.scalarLength(this.vec2);e.GetComponent(R).hp<=0||e.HasComponent(hp.id)||l!=e.id&&m<s&&n<=m&&h.push(e.id)}return h}static GetByRangetoRange(a,e,t,n,s,l,i=!0){let r=vt.Instance.GetNeed9Title(e,t),h=[];for(let o=0;o<r.length;o++){for(let i=0;i<r[o].unitList.length;i++){let e=q.NowGameWorld.GetEntityByID(r[o].unitList[i]),t=e.GetComponent(M);this.vec2.x=t.pos.x-a.x,this.vec2.y=t.pos.z-a.z;var m=Laya.Vector2.scalarLength(this.vec2);e.GetComponent(R).hp<=0||-1===l.indexOf(e.id)&&m<s&&n<=m&&h.push(e.id)}if(!i)for(let i=0;i<r[o].itemList.length;i++){let e=q.NowGameWorld.GetEntityByID(r[o].itemList[i]),t=e.GetComponent(M);this.vec2.x=t.pos.x-a.x,this.vec2.y=t.pos.z-a.z;var d=Laya.Vector2.scalarLength(this.vec2),c=e.GetComponent(y);c.hp<=0||1===c.type||2===c.type||d<s&&n<=d&&h.push(e.id)}}return h}static IsInDangerAngle(e,t,i,o){this.vec2.x=t.x-e.x,this.vec2.y=t.z-e.z;let a=S.VecToAngle(this.vec2),n=Math.abs(i-a);return(n=180<n?360-n:n)<=.5*o}static GetSafeAngle(e,t){var i=360-t;return e+.5*t+q.Random()*i}static SetStartGetSkill(t){this.startGetSkill=t,this.myInGamePlayerData.startSkills=t;var i=this.ingamePlayerDatas.filter(e=>"Local"==e.netId);if(0<i.length){let e=i[0];e.startSkills=t,this.ingamePlayerDatas=this.ingamePlayerDatas.filter(e=>"Local"!=e.netId),this.ingamePlayerDatas.push(e)}for(let o=0;o<this.startGetSkill.length;o++){let e=this.startGetSkill[o],t=K.DataModule().GetLocal().skill.Get(e.split("_")[0]),i=q.NowGameWorld.GetSingleCompoentEntity(_t);if(console.warn("添加：",e,t),i){var a=Number(e.split("_")[1]);if(""!=t.SkillFun)for(let e=0;e<a;e++)H.AddSkill(i,t.SkillFun,t.SkillID,1,1,t.SkillMaxLevel);if(""!=t.BuffFun)for(let e=0;e<a;e++)ri.AddBuffToTarget(i,t.BuffFun,t.IsOnlyBuff,.001*t.keepTime,t.F1,t.F2,t.F3,t.F4)}}console.warn("当前设置的技能：",this.ingamePlayerDatas)}static CalState(){this.StateWeightTool=new Bt,this.StateWeightTool.AddWeightItem(oC.GD,172),this.StateWeightTool.AddWeightItem(oC.ZJ,66),this.StateWeightTool.AddWeightItem(oC.HNS,66),this.StateWeightTool.AddWeightItem(oC.JS,61),this.StateWeightTool.AddWeightItem(oC.SD,57),this.StateWeightTool.AddWeightItem(oC.HB,55),this.StateWeightTool.AddWeightItem(oC.FJ,52),this.StateWeightTool.AddWeightItem(oC.HN2,51),this.StateWeightTool.AddWeightItem(oC.SC,41),this.StateWeightTool.AddWeightItem(oC.JX,39),this.StateWeightTool.AddWeightItem(oC.AH,37),this.StateWeightTool.AddWeightItem(oC.HBS,36),this.StateWeightTool.AddWeightItem(oC.GX,28),this.StateWeightTool.AddWeightItem(oC.SX2,26),this.StateWeightTool.AddWeightItem(oC.GZ,25),this.StateWeightTool.AddWeightItem(oC.CQ,20),this.StateWeightTool.AddWeightItem(oC.SX,20),this.StateWeightTool.AddWeightItem(oC.SH,18),this.StateWeightTool.AddWeightItem(oC.YN,17),this.StateWeightTool.AddWeightItem(oC.LL,17),this.StateWeightTool.AddWeightItem(oC.BJ,16),this.StateWeightTool.AddWeightItem(oC.GS,12),this.StateWeightTool.AddWeightItem(oC.NM,11),this.StateWeightTool.AddWeightItem(oC.HLJ,10),this.StateWeightTool.AddWeightItem(oC.HN,9),this.StateWeightTool.AddWeightItem(oC.JL,8),this.StateWeightTool.AddWeightItem(oC.XJ,8),this.StateWeightTool.AddWeightItem(oC.TJ,8),this.StateWeightTool.AddWeightItem(oC.NX,5),this.StateWeightTool.AddWeightItem(oC.QH,3),this.StateWeightTool.AddWeightItem(oC.GX,3),this.StateWeightTool.AddWeightItem(oC.XJ,1),this.StateWeightTool.AddWeightItem(oC.XZ,1),this.StateWeightTool.AddWeightItem(oC.XG,1),this.StateWeightTool.AddWeightItem(oC.AM,1),this.StateWeightTool.AddWeightItem(oC.TW,1),this.StateWeightTool.Calculate()}static RandomChinaState(){return"ZH_CN"!=k.language?"":this.StateWeightTool.RandomItem()}static GetChinaState(e){if("ZH_CN"!=k.language)return"";switch(b.Warn(e),e){case"福建":return oC.FJ;case"澳门":return oC.AM;case"北京":return oC.BJ;case"重庆":return oC.CQ;case"安徽":return oC.AH;case"广东":return oC.GD;case"甘肃":return oC.GS;case"广西":return oC.GX;case"贵州":return oC.GZ;case"河北":return oC.HB;case"湖北":return oC.HBS;case"黑龙江":return oC.HLJ;case"海南":return oC.HN;case"湖南":return oC.HN2;case"河南":return oC.HNS;case"吉林":return oC.JL;case"江苏":return oC.JS;case"江西":return oC.JX;case"辽宁":return oC.LL;case"内蒙古":return oC.NM;case"宁夏":return oC.NX;case"青海":return oC.QH;case"四川":return oC.SC;case"山东":return oC.SD;case"上海":return oC.SH;case"山西":return oC.SX;case"陕西":return oC.SX2;case"天津":return oC.TJ;case"台湾":return oC.TW;case"香港":return oC.XG;case"新疆":return oC.XJ;case"西藏":return oC.XZ;case"云南":return oC.YN;case"浙江":return oC.ZJ}return""}static GetItemData(){var e=[Z.Chest,Z.Foot,Z.Ring,Z.Head,Z.Coin,Z.Diamond];return{id:"dd",type:Ut.RandomGet(e),count:1,data:"",tableID:"",buyCount:0,rare:Math.floor(5*Math.random())+1,level:2,res:""}}static openDoor(e,t){q.NowGameWorld.GetEntityByID(t).GetComponent(gt).nowState=3;let i=q.NowGameWorld.GetEntityByID(e);i.GetComponent(xt).SetAnimation("OpenBunkerDoor"),i.GetComponent(pt).doorIsOpen=!0,vu.UpdateBunkerWallCollider(i)}static offDoor(e,t){q.NowGameWorld.GetEntityByID(t).GetComponent(gt).nowState=1;let i=q.NowGameWorld.GetEntityByID(e);i.GetComponent(xt).SetAnimation("OffBunkerDoor"),i.GetComponent(pt).doorIsOpen=!1,vu.UpdateBunkerWallCollider(i)}static onBoarding(o,a){if(o){let e=o.GetComponent(ft),t=q.NowGameWorld.GetEntityByID(e.carId),i=t.GetComponent(pi);if(e.nowState=3,t){a.GetComponent(L).banTrigger+=1,-1==i.driverId?(i.driverId=a.id,ri.AddBuffToTarget(a,vp.BuffName,!0,60),a.GetComponent(R).areYouDriving=t.id):i.passengerIdList.push(a.id),a.GetComponent(R).banAtt=1;var n=t.GetComponent(M).pos.clone(),s=a.GetComponent(M).pos.clone().y;a.GetComponent(M).SetPos1(n.x,s,n.z),ri.AddBuffToTarget(a,wp.BuffName,!0,-1),a.GetComponent(B).render=!1;let e=new Mt;e.followTargetId=a.id,e.followrotation=!1,a.GetComponent(D).banHud=!0,t.AddComponentAdv(Mt,e),q.NowGameWorld.GetEntityByID(i.carDoorId).GetComponent(B).render=!1,console.warn("准备开车门了!!!!!",o.id),a.GetComponent(w).banDirRotationCtrl=1,a.GetComponent(F).ChangeState(Mf.StateName),a.GetComponent(v).colliderNoMove=!0,a.HasComponent(_t.id)&&(a.GetComponent(Ft).ban=!0)}}}static GetBonuseLotteryItemListByID(e){let n=[];return K.DataModule().GetLocal().lottery.GetChest(e).forEach(function(e){let t=e.split("_"),i=t[0],o=parseInt(t[1]),a=K.DataModule().GetUser().NewUserItemData();a.id=i,a.type=i,a.tableID=i,a.count=o,n.push(a)}),n}static BonuseLotteryItem(t,i,e,o){var a=nC.GetBonuseLotteryItemListByID(e);for(let e=0;e<a.length;e++)nC.BonuseItem(t,i,a,e,o)}static onGetOff(o,a){if(o){let e=o.GetComponent(ft),t=q.NowGameWorld.GetEntityByID(e.carId),i=t.GetComponent(pi);e.nowState=1,t&&(--a.GetComponent(L).banTrigger,i.driverId==a.id?(ri.ClearBuffByName(a,vp.BuffName),a.GetComponent(R).areYouDriving=-1):-1!=i.passengerIdList.indexOf(a.id)&&(i.passengerIdList=i.passengerIdList.filter(e=>e!=a.id)),ri.ClearBuffByName(a,wp.BuffName),a.GetComponent(R).banAtt=0,i.driverId=-1,a.GetComponent(D).banHud=!1,t.RemoveComponent(Mt),console.warn("下车了",o.id),a.GetComponent(F).ChangeState(Mf.StateName),q.NowGameWorld.GetEntityByID(i.carDoorId).GetComponent(B).render=!0,a.GetComponent(B).render=!0,a.GetComponent(w).banDirRotationCtrl=0,a.GetComponent(v).colliderNoMove=!0,a.HasComponent(_t.id)&&(a.GetComponent(Ft).ban=!1))}}static CreatInGamePlayerData(e,t,i,o,a,n,s,l,r,h,m,d,c){return T.IS_4399&&a&&-1!=e.indexOf("AI")&&(o+=e.split("AI")[1]),{netId:e,weaponId:t,heroId:i,name:o,isAI:a,isSelf:n,rank:-1,kill:0,props:s,level:l,aiId:r,userItemDatas:[],revengeTargetNetId:"",weaponSkinId:h,unlockSkills:m,heroLevel:d,dmg:0,chinaState:c,useSkillCount:0,startSkills:[],sourceDamages:[],smashScore:0}}static attFun(a,e,t=!1,i=!0){let n=a.GetComponent(R),s=a.GetComponent(U),l=a.GetComponent(F),r=(a.HasComponent(ut.id)||(a.GetComponent(xt).nowUpBodyClipName="",a.GetComponent(xt).useUpBodyClipName=s.act0Clip),a.GetComponent(F).time=s.act0Time,i?(M_(a,R_.TrigPreFire(a.id)),s.shotCDTime+=s.shotCDScale*(s.shotCD*(1/n.GetAttSpeedScale()))):s.shotCDTime+=s.shotCD*(1/n.GetAttSpeedScale()),a.GetComponent(Qc).bulletCount+=1,this.bulletEffetNeedPos.x=0,this.bulletEffetNeedPos.y=0,this.bulletEffetNeedPos.z=0,this.bulletNeedPos.x=0,this.bulletNeedPos.y=0,this.bulletNeedPos.z=0,this.needRot.y=e,this.bulletScale.x=1,this.bulletScale.y=1,this.bulletScale.z=1);this.bulletEffetNeedPos.x=a.GetComponent(M).pos.x,this.bulletEffetNeedPos.y=a.GetComponent(M).pos.y+l.t6,this.bulletEffetNeedPos.z=a.GetComponent(M).pos.z,this.bulletNeedPos.x=a.GetComponent(M).pos.x,this.bulletNeedPos.y=a.GetComponent(M).pos.y+l.t6,this.bulletNeedPos.z=a.GetComponent(M).pos.z;var h,m,i=S.VecRotate(new Laya.Vector2(0,1),e);Laya.Vector2.scale(i,l.t5,i),this.bulletEffetNeedPos.x-=i.x,this.bulletEffetNeedPos.z+=i.y,this.color.x=1,this.color.y=1,this.color.z=1,this.color.w=.82,1!=n.sizeScale&&(r*=n.sizeScale,this.bulletScale.x=this.bulletScale.x*n.sizeScale,this.bulletScale.y=this.bulletScale.y*n.sizeScale,this.bulletScale.z=this.bulletScale.z*n.sizeScale);let d=s.bulletsFiredNumbers,c=e,u=R_.TrigAftFire(a.id),p=(u.SubTargets=[],0);0<s.bulletScatter&&(p=(2*Math.random()-1)*s.bulletScatter),a.HasComponent(ut.id)?(i=a.GetComponent(ut),r*=i.bulletScale,Laya.Vector3.scale(this.bulletScale,i.bulletScale,this.bulletScale)):""!=a.GetComponent(ti).weaponId&&(i=K.DataModule().GetLocal().weapon.Get(a.GetComponent(ti).weaponId))&&(r*=i.BulletSize,Laya.Vector3.scale(this.bulletScale,i.BulletSize,this.bulletScale));for(let o=0;o<d;o++){let t=c;if(1==d)t=c;else{let e=0;d%2!=0?t=o==(e=(d-1)/2)?c:(h=o+1,o<e?c-10*h:c+10*(h-(e+1))):(h=o+1,o==(e=d/2)?t=c+5:o==e-1?t=c-5:o<e?t=c-5-10*h:o>e&&(t=c+5+10*(h-(e+1))))}let e=S.VecRotate(new Laya.Vector2(0,1),t);a.HasComponent(ut.id)&&(m=a.GetComponent(ut),Laya.Vector2.scale(e,l.t5*r*m.bulletOffsetZ,e),this.bulletNeedPos.x-=e.x,this.bulletNeedPos.z+=e.y);let i=O.CreatPrefabEntityUsePos(l.str1,this.bulletNeedPos,this.needRot,this.bulletScale);if(i.GetComponent(C).pos=i.GetComponent(M).pos.clone(),u&&u.SubTargets.push(i.id),nC.BullectScale(i,r),i.HasComponent(w.id)){""!=a.GetComponent(ti).weaponId&&K.DataModule().GetLocal().weapon.Get(a.GetComponent(ti).weaponId).Type==ot.Pistol&&(i.GetComponent(w).speed=1.3*i.GetComponent(w).speed),-1!=s.bulletSpeed&&(i.GetComponent(w).speed=s.bulletSpeed);let e=s.attackRange/i.GetComponent(w).speed;i.GetComponent(C).attackRange=s.attackRange,a.GetComponent(U).isSniperRifle&&(e=s.sniperRifleattRange/i.GetComponent(w).speed,i.GetComponent(C).attackRange=s.sniperRifleattRange),i.GetComponent(kt).keepTime=e}if(null!=i.GetComponent(B).sp){let e=i.GetComponent(B).sp.particleSystem;e&&(e.startColorConstant.x=this.color.x,e.startColorConstant.y=this.color.y,e.startColorConstant.z=this.color.z,e.startColorConstant.w=this.color.w)}i.GetComponent(C).dmg=n.dmg,-1!=n.boxDmg&&(i.GetComponent(C).boxDmg=n.boxDmg),i.HasComponent(w.id)&&(Laya.Vector2.normalize(e,e),0!=p&&(e=S.VecRotate(e,p)),i.GetComponent(w).dir.x=-e.x,i.GetComponent(w).dir.z=e.y),i.GetComponent(C).creatorId=a.id}M_(a,u),t||0==s.recoilTime||nC.IsGameMode_Zombie()||(i=S.VecRotate(new Laya.Vector2(0,1),e),Laya.Vector2.scale(i,l.t5,i),ri.AddBuffToTarget(a,yp.BuffName,!0,.2,i.x,i.y,s.recoilTime))}static BonuseItem(o,e,t,i,a=1.5){function n(t,i){if(t){let e=t.GetComponent(kt);e&&(e.keepTime=1.5*nC.zombieMode_NightTime)}if(i){let e=i.GetComponent(kt);e&&(e.keepTime=1.5*nC.zombieMode_NightTime)}}var s=t[i];switch(s.id){case Z.Exp:e&&(console.log("获得经验=",s.count),ri.DelayGetExp(e,.8,s.count));break;case Z.AddItem:for(let e=0;e<s.count;e++){let e=Jc.CreatBonuseItem(o.GetComponent(M).pos,s,1,a,!0),t=null,i=K.DataModule().GetLocal().item.GetZombieItemDatas();t=O.CreatPrefabEntityUsePos(N.Item_ItemTrigger,e.GetComponent(M).pos),e.GetComponent(y).ItemTriggerId=t.id,t.GetComponent(Gt).itemId=e.id;var l=i.filter(function(e){return e.Active}),l=l[Math.floor(Math.random()*l.length)];e.GetComponent(y).addBuff="Skill_"+l.ItemID,n(e,t)}break;case Z.AddWeapon:for(let e=0;e<s.count;e++){let e=Jc.CreatBonuseItem(o.GetComponent(M).pos,s,1,a,!0),t=null,i=K.DataModule().GetLocal().weapon.GetAllWeaponIds()[K.DataModule().GetLocal().gameRule.ZombieMode_ZombieDrop_WeaponLevel(nC.CurrentDay,Math.random())-1];e.GetComponent(y).addBuff=i,t=O.CreatPrefabEntityUsePos(N.Item_ItemTrigger,e.GetComponent(M).pos),e.GetComponent(y).ItemTriggerId=t.id,t.GetComponent(Gt).itemId=e.id,n(e,t)}break;case Z.Bolt:case Z.Battery:for(let e=0;e<s.count;e++){let e=Jc.CreatBonuseItem(o.GetComponent(M).pos,s,1,a,!0),t=null;t=O.CreatPrefabEntityUsePos(N.Item_ItemTrigger,e.GetComponent(M).pos),e.GetComponent(y).ItemTriggerId=t.id,t.GetComponent(Gt).itemId=e.id,t.GetComponent(Gt).iriggerImmediately=!0,e.GetComponent(y).addBuff=s.id,n(e,t)}break;case Z.ZombieCoin:{let e=Jc.CreatBonuseItem(o.GetComponent(M).pos,s,1,a,!0),t=null;t=O.CreatPrefabEntityUsePos(N.Item_ItemTrigger,e.GetComponent(M).pos),e.GetComponent(y).ItemTriggerId=t.id,t.GetComponent(Gt).itemId=e.id,t.GetComponent(Gt).iriggerImmediately=!0,e.GetComponent(y).addBuff=s.id+"_"+s.count,n(e,t);break}}}static changeBullectSkin(e,t){var i=e.GetComponent(M),o=S.VecRotate(this.startPoint,i.rotation.y);this.skinNeedRot.y=i.rotation.y,Laya.Vector2.scale(o,1,o),this.skinbulletNeedPos.x=i.pos.x,this.skinbulletNeedPos.y=i.pos.y,this.skinbulletNeedPos.z=i.pos.z;let a=O.CreatPrefabEntityUsePos(t,this.skinbulletNeedPos,this.skinNeedRot,this.skinBulletScale);a.HasComponent(w.id)&&(a.GetComponent(w).dir.x=e.GetComponent(w).dir.x,a.GetComponent(w).dir.z=e.GetComponent(w).dir.z),a.GetComponent(Mt).followTargetId=e.id,a.GetComponent(kt).keepTime=e.GetComponent(kt).keepTime;o=e.GetComponent(M).scale.clone(),i=o.x,t=o.y,e=o.z;a.GetComponent(M).SetScale(i,t,e),a.GetComponent(B).updateScale=!0,nC.BullectScale(a,o.X)}static BullectScale(e,t){e.HasComponent(v.id)&&(0==e.GetComponent(v).colliderType&&(e.GetComponent(v).radius=e.GetComponent(v).radius*t),1==e.GetComponent(v).colliderType&&(e.GetComponent(v).width=e.GetComponent(v).width*t,e.GetComponent(v).height=e.GetComponent(v).height*t))}static GetWeaponType(e){e=K.DataModule().GetLocal().weapon.Get(e);return e.Type==ot.Pistol?"手枪":e.Type==ot.TommyGun?"冲锋枪":e.Type==ot.Rifle?"步枪":e.Type==ot.ShotGun?"霰弹枪":e.Type==ot.Sniper?"狙击枪":void 0}static addSkillGetSkillPos(e,t=!1){return nC.IsGameMode_Zombie()&&t?4:!(0<e.length)||e.filter(e=>1==e.skillPos).length<=0?1:e.filter(e=>2==e.skillPos).length<=0?2:e.filter(e=>3==e.skillPos).length<=0?3:void 0}},V=nC;V.InGameIng=!1,V.gameMode="Normal",V.InGameTime=0,V.isNet=!1,V.isOnCar=!1,V.startGamePlayerCount=10,V.ingamePlayerDatas=[],V.guideAIID=-1,V.cmds=[],V.fogRange=0,V.fogPos=new Laya.Vector3(0,0,0),V.playerCounts=0,V.nowCameraPos=new Laya.Vector3(0,0,0),V.ZCoin=0,V.nowScene="BattleScene1",V.guideList=[1],V.nowGuide=1,V.playerGetItemDatas=[],V.nowSavePlayer=0,V.banAllAttAndFog=!1,V.UseSnowSpScene=!1,V.tryWeaponSkinId="",V.tryWeaponId="",V.tryHeroSkinId="",V.isFirstFight=!1,V.exitTime=0,V.exitMaxTime=60,V.MustUseScene="",V.overGame=!1,V.canCreatChestPos=[],V.showInGameGuide=!1,V.useSameHeroSkinId=!1,V.hasSameSkillAtStart="",V.aiUseSkillWithMe=!1,V.useSpCamera="Normal",V.isAutomaticAiming=!0,V.lastAttackAngle=-1,V.CameraRange=20,V.startGetSkill=[],V.chooseBattleSceneLevel=-1,V.isInFogRange=!1,V.feiJiId=-1,V.feiJiOn=!1,V.isGameOverBack=!1,V.inGameTimes=150,V.banFogMove=!1,V.isShowBanner=!0,V.nowSceneZombieFactoryNum=0,V.nowSceneZombieNum=0,V.zombieMode_ZombieBirthRandomRadius=5,V.zombieMode_PlayerVisualRange=20,V.zombieMode_ZombieActiveRange=25,V.zombieMode_ZombieInActiveRange=30,V.zombieMode_ZombieBirthRemainCount=0,V.zombieMode_TodayZombieBirthCount=0,V.zombieMode_TonightZombieBirthCount=0,V.zombieMode_TodaySpecZombieCreateList=[],V.zombieMode_TonightSpecZombieCreateList=[],V.triggerCarId=-1,V.triggerDoorId=-1,V.triggerTentId=-1,V.addCoinNum="0",V.showAddBoltUITimes=0,V.showAddBatteryUITimes=0,V.zombieMode_nowRemainBirthCD=0,V.zombieMode_ZombieNoiseRange=10,V.radiationLevel=1,V.ScenesTatus=np.Daytime,V.CurrentDay=1,V.ScenesTatusCountdown=0,V.zombieMode_ZombieTriggerAttRange=15,V.vec1=new Laya.Vector2(0,0),V.vec2=new Laya.Vector2(0,0),V.vec3=new Laya.Vector2(0,0),V.hitvec2=new Laya.Vector2(0,0),V.bulletScale=new Laya.Vector3(1,1,1),V.color=new Laya.Vector4(1,1,1,1),V.bulletEffetNeedPos=new Laya.Vector3(0,0,0),V.bulletNeedPos=new Laya.Vector3(0,0,0),V.needRot=new Laya.Vector3(0,0,0),V.needPos=new Laya.Vector3(0,0,0),V.skinbulletNeedPos=new Laya.Vector3(0,0,0),V.startPoint=new Laya.Vector2(0,1),V.skinBulletScale=new Laya.Vector3(1,1,1),V.skinNeedRot=new Laya.Vector3(0,0,0),(G=oC=oC||{}).AH="AH",G.AM="AM",G.BJ="BJ",G.CQ="CQ",G.FJ="FJ",G.GD="GD",G.GS="GS",G.GX="GX",G.GZ="GZ",G.HB="HB",G.HBS="HBS",G.HLJ="HLJ",G.HN="HN",G.HN2="HN2",G.HNS="HNS",G.JL="JL",G.JS="JS",G.JX="JX",G.LL="LL",G.NM="NM",G.NX="NX",G.QH="QH",G.SC="SC",G.SD="SD",G.SH="SH",G.SX="SX",G.SX2="SX2",G.TJ="TJ",G.TW="TW",G.XG="XG",G.XJ="XJ",G.XZ="XZ",G.YN="YN",G.ZJ="ZJ",(e=aC=aC||{}).GotOpenId="GotOpenId",e.LaunchScene="LaunchScene",e.HomeStartGame="HomeStartGame",e.PlayGame="PlayGame",e.GameEnd="GameEnd",e.GameStart="GameStart",e.GameSuccess="GameSuccess",e.GameFailed="GameFailed",e.TryPlayVideoAd="TryPlayVideoAd",e.VideoAdSuccess="VideoAdSuccess",e.VideoAdFailed="VideoAdFailed",e.VideoAdClosed="VideoAdClosed",e.VideoAdEnded="VideoAdEnded",e.onlinetime="onlinetime",e.RedirectClick="RedirectClick",(G=g=g||{}).dial="转盘_再一次",G.levelReward1="等级奖励_领取",G.levelReward2="等级奖励_一键领取",G.mergeNew="新武器_翻倍",G.offline="离线收益_翻倍",G.sign="签到_翻倍",G.shop1="商店_领取",G.shop2="商店_刷新",G.shop3="商店_宝箱",G.window_d="钻石不足",G.baozhuGift="每日爆竹",G.window_c="金币不足",G.revive="复活",G.getReward="海量装备",G.GameOverUI_star="结算页星星",G.NewYear2021UI="2021文字活动",G.weaponSkin="试用武器皮肤",G.tryHeroSkin="试用英雄皮肤",G.WeaponUpGrade="武器升级礼盒",G.buyHeroVideo="解锁英雄",G.CoverHeroVideo="首页领取英雄",G.ThousandBladesGetHeroPiece="结算页刺客7碎片",G.shop_box3CD="碎片宝箱CD",G.shop_box3Get="碎片宝箱领取",G.addToDesktop="添加到桌面",G.GetFreeGold="免费金币",G.task="每日任务",G.EggUIVideo="误触宝箱",G.randomSkill_ALL="技能_我都要",G.randomSkill_Change="技能_换一批",G.randomSkill_Lv="技能_高级",G.addGridBox="添加宝箱钥匙",G.LuanDou="乱斗模式",G.FeiTianBox="漂浮宝箱",G.FeiTianBox2="漂浮枪械宝箱",G.FeiTianBox3="漂浮金币宝箱",G.openHongBao="开红包",G.JiangShi="僵尸门票",G.JiangShiFuHuo="僵尸复活",G.JiangShiLuoSi="螺丝",G.JiangShiDianChi="电池",G.JiangShiTryQiang="僵尸模式试用枪",G.JiangShiTryQiangHuan="僵尸模式换一批",G.cover_speed="收益加速",G.JiangShiShopWeapon="僵尸商店武器",G.HuoYueBig="活跃大奖",G.subHeroDebris="英雄页面碎片",G.GetAllSkill="获取所有升级技能";var sC,lC,rC,z=class extends u{constructor(){super(...arguments),this.ModuleName="SDk模块",this.bottomAdList=[],this.drawerAdList=[],this.coverRightAdList=[],this.dialUIAdList=[],this.subHeroUIAdList=[],this.inGameUIAdList=[],this.gameOverDetailAdList=[],this.useTheConfig1=!1,this.leYouAllow=!1,this.leYouAllow_oppo=!1,this.ShareTagList=[],this.nowShareTimeList=[],this.nowShareRateList=[],this.nowTag="",this.list1=[],this.list2=[],this.list3=[],this.list4=[],this.list5=[]}Init(){z.Instance=this,super.Init(),this.InitOver(),Laya.timer.once(1e3,this,this.GetLoadConfig),k.Platform==T.WECHAT&&(j.LeYouSdkIsOn()&&this.LeYou_SDKLoad(),this.LeYou_Http_DiQu()),k.Platform==T.OPPO&&this.LeYou_Http_DiQu_oppo()}LeYou_Http_DiQu(){var e={appid:k.appid,channelId:1002,languageType:1,uid:"",version:"1.00.00"};K.NetModule().Request(e,"myurl://gw.gameley.com/gl-ms-mini-recommend/recommend/show",this,function(e){console.log("成功",e),null!=e&&0==e.info.provinceAllow&&(z.Instance.leYouAllow=!0,console.log("设为屏蔽"))},function(e){console.log("LeYou_Http_DiQu err",e)},!1)}LeYou_Http_DiQu_oppo(){K.NetModule().Request({appid:30623577,channelId:8001,languageType:1,uid:"",version:"1.00.00"},"myurl://gw.gameley.com/gl-ms-mini-recommend/recommend/show",this,function(e){console.log("成功",e),null!=e&&0==e.info.provinceAllow&&(z.Instance.leYouAllow_oppo=!0,console.log("设为屏蔽"))},function(e){console.log("err",e)},!1)}LeYou_SDKLoad(){k.IsInWebTest||(this.sdk=window.Getleuok,k.Platform==T.WECHAT&&(console.warn("初始化sdkInit"),this.sdk.init({gameId:2455,appId:"wx5f8624d4c7b67927",multiRegion:!1,adlog:!0,bilog:!0,env:"prod",log:!0},function(){console.log("init完成之后的回调方法,cp需要同时使用BI和cdb时，需要将自己的cdb登录逻辑放在此回调方法里")}),"Save"==Laya.LocalStorage.getItem("HasSaveUserData12")&&!W.newPlayer||z.Instance.LeYou_Guidance(101)),console.warn("初始化sdk",this.sdk))}LeYou_Guidance(e){k.IsInWebTest&&console.log("网页测试上报",e);try{!k.IsInWebTest&&j.LeYouSdkIsOn()&&this.sdk&&this.sdk.appOnce({actionNumber:e})}catch(e){console.error("LeYou_Guidance",e)}}LeYou_AdLogin(){try{!k.IsInWebTest&&j.LeYouSdkIsOn()&&this.sdk&&(console.warn("LeYou_AdLogin"),this.sdk.adLogin({nickName:""}))}catch(e){console.error("LeYou_Guidance",e)}}LeYou_Video(t,i){if(k.Platform==T.WECHAT){let e=0;t==g.offline?e=1:t==g.GetFreeGold?e=2:t==g.WeaponUpGrade?e=3:t==g.dial?e=4:t==g.shop2?e=5:t==g.shop1?e=6:t==g.shop3?e=7:t==g.shop_box3Get?e=8:t==g.levelReward1?e=9:t==g.levelReward2?e=10:t==g.randomSkill_Lv?e=11:t==g.randomSkill_Change?e=12:t==g.randomSkill_ALL?e=13:t==g.tryHeroSkin?e=14:t==g.revive?e=15:t==g.getReward?e=16:t==g.weaponSkin?e=18:t==g.sign?e=19:t==g.baozhuGift?e=20:t==g.addGridBox?e=21:t==g.shop_box3CD?e=22:t==g.window_c?e=23:t==g.window_d?e=24:t==g.GameOverUI_star?e=25:t==g.addToDesktop?e=26:t==g.CoverHeroVideo||t==g.buyHeroVideo?e=27:t==g.ThousandBladesGetHeroPiece?e=28:t==g.FeiTianBox?e=29:t==g.LuanDou?e=30:t==g.openHongBao?e=31:t==g.FeiTianBox2?e=32:t==g.FeiTianBox3?e=33:t==g.JiangShi?e=34:t==g.JiangShiFuHuo?e=35:t==g.JiangShiLuoSi?e=36:t==g.JiangShiDianChi?e=37:t==g.JiangShiTryQiang?e=38:t==g.JiangShiTryQiangHuan?e=39:t==g.cover_speed?e=40:t==g.JiangShiShopWeapon?e=41:t==g.HuoYueBig?e=42:t==g.subHeroDebris&&(e=43);t={type:e=1e3+e,subType:i};k.IsInWebTest||this.sdk.adVideo(t)}}LeYou_action(i,o=-1){try{if(!j.LeYouSdkIsOn())return;let e=i,t=Number(i.toString()[0]);var a={actionType:t=-1!=o?o:t,actionNumber:e};if(k.IsInWebTest)return;this.sdk&&this.sdk.action(a)}catch(i){console.error("LeYou_action",i)}}LeYou_battle(o,a,n=0,s=0){try{if(!j.LeYouSdkIsOn())return;let i;if(V.gameMode==$I.Deathmatch)i={logType:o,battleType:2,battleId:2001};else{n=Math.floor(n);var l=K.DataModule().GetUser().GetData().userMedal.level;console.log("玩家段位",l,"星星",K.DataModule().GetUser().GetData().userMedal.star);let t=1;for(let e=1;e<l;e++)t+=K.DataModule().GetLocal().medal.Get("Level"+e).Star;let e=1e3+(t+=K.DataModule().GetUser().GetData().userMedal.star);0!=s&&(e=s),console.log("最终上报",e),i=0==n?{logType:o,battleType:a,battleId:e}:{logType:o,battleType:a,battleId:e,time:n}}if(k.IsInWebTest)return;this.sdk&&(console.log("统计上报",i),this.sdk.battle(i))}catch(o){console.error("LeYou_battle",o)}}LeYou_equipDegree_Hero(e){var t={equipType:6,equipId:Number(rC[e]),equipOldDegree:1,equipNewDegree:2};console.log("获得英雄上报",e,t),k.IsInWebTest||k.Platform!=T.WECHAT||this.sdk.equipDegree(t)}LeYou_Equip_Hero(e,t){e={reason:e,equipType:6,equipId:Number(rC[t]),num:1,addOrReduce:1,sequenceId:W.openId};k.IsInWebTest||k.Platform!=T.WECHAT||this.sdk.equip(e)}LeYou_Equip_Hero_LevelUp(e,t){e={equipType:6,equipId:Number(rC[e]),equipOldLevel:t-1,equipNewLevel:t};console.log("统计上报",e),k.IsInWebTest||k.Platform!=T.WECHAT||this.sdk.equipLevel(e)}LeYou_Equip(a,e,n,s=1,l=1){try{let e=0,t=n.rare,i=n.level,o=(n.type==VC.Head?e=2:n.type==VC.Chest?e=3:n.type==VC.Foot?e=4:n.type==VC.Ring&&(e=5),e.toString()+t.toString()+"0"+i.toString());10<=i&&(o=e.toString()+t.toString()+i.toString());var r={reason:a,equipType:e,equipId:o,num:s,addOrReduce:l,sequenceId:W.openId};!k.IsInWebTest&&j.LeYouSdkIsOn()&&this.sdk&&(console.log("统计上报",r,n),this.sdk.equip(r))}catch(a){console.error("LeYou_Equip",a)}}LeYou_equipLevel(){try{if(!j.LeYouSdkIsOn())return;var e=K.DataModule().GetUser().GetData().mergeLevel,t={equipType:1,equipId:1e3+e,equipOldLevel:e-1,equipNewLevel:e};if(k.IsInWebTest)return;this.sdk&&(console.log("统计上报",t),this.sdk.equipLevel(t))}catch(e){console.error("LeYou_equipLevel",e)}}LeYou_Money(n,s,l){try{if(!j.LeYouSdkIsOn())return;let e=K.DataModule().GetUser().GetData(),t=0,i,o=(1==s?t=e.diamond:2==s&&(t=Number(e.coin)),10),a=(l<0&&(o=17),i=t+l,0);if(n==at.Dial?a=101:n==at.over?a=102:n==at.over_double?a=103:n==at.levelReward?a=104:n==at.sign?a=105:n==at.offline?a=106:n==at.window?a=107:n==at.online?a=108:n==at.recycle_wenpon?a=109:n==at.sellGear?a=110:n==at.addToDesktopUI?a=111:n==at.GridKey?a=112:n==at.TreasureBox3?a=113:n==at.TreasureBox4?a=114:n==at.TreasureBox1?a=l<0?3003:115:n==at.TreasureBox2?a=l<0?3004:116:n==at.mergeNew?a=117:n==at.buyWenpon?a=1001:n==at.buyHero?a=2001:n==at.levelUpHero?a=2002:n==at.Treasure2?a=3001:n==at.Treasure4&&(a=3002),0<l||2==s)return;if(k.IsInWebTest)return;this.sdk&&(console.log("统计货币上报",n,a,l,o,s,i,"old:",t),this.sdk.money({reason:n,shop:1,itemType:o,itemId:a,num:1,moneyType:s,oldMoney:t,newMoney:i,sequenceId:W.openId}))}catch(n){console.error("LeYou_Money",n)}}LW_StatisticsEvent(e,t="",i="",o="",a="",n=""){try{t=(t=8003<=e&&e<=8014?K.DataModule().GetUser().GetData().userLevel.level:t).toString(),i=i.toString(),e=e.toString(),k.IsInWebTest||k.Platform!=T.ANDROID||window.jsCallNative_stats(e,t,i,o,a,n)}catch(e){console.error("LW_StatisticsEvent",e)}}StatisticsEvent(e,t=0,i,o){}ChuanQuStatistics(e){console.log("统计",e),!k.IsInWebTest&&T.ProjectSubCode&&window.jsCallNative_stats(e)}reqSaveRedirect(e,t){e={Openid:W.openId,Channel:CC.Instance.channelId,Appid:k.appid,Type:e,TargetAppid:t.appid,Path:t.path};me.User_ReqSaveRedirect(e,function(e){e.code?console.warn("点击导量跳转成功"):console.warn("点击导量跳转失败:",e)})}redirectConfirm(e,t){t={userId:W.uuid,appid:t.appid};me.User_RedirectConfirm(t,function(e){e.code?console.warn("点击导量跳转成功"):console.warn("点击导量跳转失败:",e)}),this.RedirectADDataList(e,[])}RedirectADDataList(t,e=[]){console.warn("请求导量数据:",t,e);let i={userId:W.uuid,type:t,excludes:e},o=this;me.User_Redirectlist(i,function(e){0==e.code?(console.warn("RedirectADDataList success ",t,e),100==t&&(o.drawerAdList=e.data),7==t&&(o.coverRightAdList=e.data),350==t&&(o.dialUIAdList=e.data),262==t&&(o.bottomAdList=e.data),424==t&&(o.subHeroUIAdList=e.data),27==t&&(o.inGameUIAdList=e.data),59==t&&(o.gameOverDetailAdList=e.data)):console.warn("RedirectADDataList error code:",e.code," |msg:",e.msg)})}User_ReqShareStrategy(){let t=this;me.User_ReqShareStrategy(this,function(e){b.Warn("获得分享策略：",e),e.data&&(t.ShareTagList=e.data)})}GetShareStrategy(a){if(k.IsInWebTest||k.Platform!=T.WECHAT)return!1;let n=[];for(let e=0;e<this.ShareTagList.length;e++)if("SCORE_STRATEGY"==this.ShareTagList[e].tag){n=this.ShareTagList[e].rule;break}this.nowTag=a;for(let o=0;o<this.ShareTagList.length;o++)if(this.ShareTagList[o].tag==a){this.nowShareTimeList=this.ShareTagList[o].shareTime,this.nowShareRateList=this.ShareTagList[o].shareRate;var s=Laya.LocalStorage.getItem(a+"ShareCount");null!=s&&""!=s&&"NaN"!=s||(Laya.LocalStorage.setItem(a+"ShareCount","0"),Laya.LocalStorage.setItem(a+"VideoCount","0"));let t=parseInt(Laya.LocalStorage.getItem(a+"ShareCount")),i=parseInt(Laya.LocalStorage.getItem(a+"VideoCount")),e=0;for(;e<1e3;)if(e++,this.ShareTagList[o].rule.length<1){if(!(1<n.length))return!1;for(let e=0;e<n.length;e++)if(n[e].type==lC.share){if((t-=n[e].count)<0)return!0}else if((i-=n[e].count)<0)return!1}else for(let e=0;e<this.ShareTagList[o].rule.length;e++)if(this.ShareTagList[o].rule[e].type==lC.share){if((t-=this.ShareTagList[o].rule[e].count)<0)return!0}else if((i-=this.ShareTagList[o].rule[e].count)<0)return!1}return!1}DayShareStrategy_Add(e,t){t?(t=(parseInt(Laya.LocalStorage.getItem(e+"ShareCount"))+1).toString(),Laya.LocalStorage.setItem(e+"ShareCount",t)):(t=(parseInt(Laya.LocalStorage.getItem(e+"VideoCount"))+1).toString(),Laya.LocalStorage.setItem(e+"VideoCount",t))}GetConfig1(){return this.config1}GetConfig2(){return this.config2}GetGameConfig(){let t=this;me.User_gameConfig(this,function(e){console.log("云控值",e),e.data&&e.data.touch&&e.data.touch.touchValue&&(e=e.data.touch.touchValue,z.Instance.GameConfig=e,t.useTheConfig1?(K.DataModule().GetPlatform().PlatformData.HouseAd=z.Instance.GameConfig.RedirectAuditSwitch,K.DataModule().GetPlatform().PlatformData.InGameAd=z.Instance.GameConfig.RedirectGameAuditSwitch):(K.DataModule().GetPlatform().PlatformData.HouseAd=z.Instance.GameConfig.RedirectLineSwitch,K.DataModule().GetPlatform().PlatformData.InGameAd=z.Instance.GameConfig.RedirectGameLineSwitch),K.PlatformModule().isLoadConfigOk=!0,console.log("云控值data",z.Instance.GameConfig))})}GetLoadConfig(){if(k.Platform==T.WECHAT&&!k.IsInWebTest){let e=[],n=(e.push(k.VersionKey),e.push(k.GameAuditSwitchKey),e.push(k.GameLineSwitchKey),e.push(k.MpCheckChannelKey),this);me.User_ReqConfig(e,this,function(e){console.log("Conifg配置1:",e);var t=e.data,i=t[0].value,o=t[1].value,t=t[2].value;this.useTheConfig1=!1,console.log("Conifg配置2:",e),console.log("游戏版本",k.v,"sdk:",i),k.v>i&&(console.log("使用配置1"),n.useTheConfig1=!0);let a=null;null!=o&&n.useTheConfig1&&(a=o),null!=(a=null==t||n.useTheConfig1?a:t)&&(b.Warn("使用配置"+a),K.DataModule().GetLocal().platform.Parse(JSON.parse(a)),K.DataModule().GetLocal().platform.PlatformData.UseBanner&&K.PlatformModule().UseBanner()),z.Instance.GetGameConfig()})}}IoGameSDK_up(){let e=K.DataModule().GetUser().GetData(),t=e.lastUpTime,i=e.gameTime,o=!1;if(o=300<=i&&Math.floor(i/300)>Math.floor(t/300)?!0:o){var a=e.itemList;this.list1=[],this.list2=[],this.list3=[],this.list4=[],this.list5=[];for(let e=0;e<a.length;e++)a[e].type!=Z.Chest&&a[e].type!=Z.Foot&&a[e].type!=Z.Head&&a[e].type!=Z.Ring||this["list"+a[e].rare].push(a[e].level);var n={1:this.list1,2:this.list2,3:this.list3,4:this.list4,5:this.list5},n={name:e.name,icon:e.icon,id:e.id,loginDay:e.loginDay,loginTimes:e.loginTimes,gameTime:e.gameTime,videoCount:e.videoCount,shareCount:e.shareCount,invitFriendsCount:0,coin:Y.converStr(e.coin),diamond:e.diamond,nowGuide:e.nowGuide,nowGuideStep:e.nowGuideStep,unLockHeroList:e.unLockHeroList,heroList:e.heroList,nowChooseHero:e.nowChooseHero,mergeLevel:e.mergeLevel,userLevel:e.userLevel.level,userMedal:e.userMedal.level,userBattleInfo:e.userBattleInfo,equipmentInfo:n};ge.Instance.Report_UserAttr(n),K.DataModule().GetUser().GetData().lastUpTime=K.DataModule().GetUser().GetData().gameTime,K.DataModule().GetUser().SaveData()}}},hC=class{constructor(){this.TouchOnOff=!1,this.BannerValidTimes="0",this.NoTouchBox=[],this.cheatBoxNewOld="0",this.BannerOnOff=!1,this.BannerTime="0",this.NoTouchBanner="0",this.NoGoldShowBanner=!1,this.BoxBannerSwitch="0",this.RedirectAuditSwitch=!1,this.RedirectLineSwitch=!1,this.RedirectGameAuditSwitch=!1,this.RedirectGameLineSwitch=!1,this.ChapingLimitTimes="0"}};(e=sC=sC||{}).SCORE_STRATEGY="SCORE_STRATEGY",e.NOVIDEO_TO_SHARE="NOVIDEO_TO_SHARE",e.level_up="level_up",e.pannel_again="pannel_again",e.need_diamond="need_diamond",e.need_gold="need_gold",e.store_box="store_box",e.store_reward="store_reward",e.revive="revive",e.lot_equip="lot_equip",e.level_up_onekey="level_up_onekey",e.store_refresh="store_refresh",e.newweapon_double="newweapon_double",e.offline_double="offline_double",e.sign_double="sign_double",e.key_treasure="key_treasure",e.firecracker="firecracker",e.chose_skill_advance="chose_skill_advance",e.chose_skill_all="chose_skill_all",e.chose_skill_refresh="chose_skill_all",(G=lC=lC||{}).video="video",G.share="share",(e=rC=rC||{})[e.Farmer=6001]="Farmer",e[e.Gangster=6002]="Gangster",e[e.TikTokDude=6003]="TikTokDude",e[e.Squire=6004]="Squire",e[e.Burglar=6005]="Burglar",e[e.Sorc=6006]="Sorc",e[e.Assassin=6007]="Assassin",e[e.Troll=6008]="Troll",e[e.Suspects=6009]="Suspects",e[e.Snowman=6010]="Snowman",e[e.Santas=6011]="Santas",e[e.Barb=6012]="Barb",e[e.DarkWitch=6013]="DarkWitch",e[e.Elsa=6014]="Elsa",e[e.Sportsman=6015]="Sportsman",e[e.Ninja=6016]="Ninja",e[e.LichKing=6017]="LichKing",e[e.Ultraman=6018]="Ultraman",e[e.MonkeyKing=6019]="MonkeyKing",e[e.Seaman=6020]="Seaman",e[e.Landman=6021]="Landman",e[e.Assassin7=6022]="Assassin7",e[e.Plumber=6023]="Plumber";var mC=class extends te{constructor(){super(...arguments),this.isStop=!1,this.leftTime=0,this.nowVideoStatus=!1}Init(){eg.IsEnable(),mC.Instance=this,window.AndroidPlatform=this,ge.Instance.Report_Login("",""),Laya.timer.loop(500,this,this.Login),K.PlatformModule().UseBanner(),console.log("android init")}Login(){try{var e;""!=window.OpenId&&(Laya.timer.clear(this,this.Login),e=window.OpenId,W.openId=e,he.Instance.SetUserID(e),SC.GetOpenIdEnd(),console.log("android login "+W.openId))}catch(e){}}OnShow(){this.isStop=!1;let e=new Date;this.leftTime=.001*(e.getTime()-this.leftTime);try{V.exitTime=window.jsCallNative_HideTime(),console.log("onshow::"+V.exitTime+" "+e.getTime())}catch(e){}}OnHide(){this.isStop=!0;let e=new Date;this.leftTime=e.getTime(),console.log("onhide::"+this.leftTime)}WatchVideo(e,t,i=0,o=null){this.pos=t,this.watchFun=e,this.failFun=o,console.warn("开启看视频"),j.ShowShortWait(5);e=class{static Get(e){let t=0;switch(e){case g.dial:t=8001;break;case g.levelReward1:t=8002;break;case g.levelReward2:t=8003;break;case g.mergeNew:t=8004;break;case g.offline:t=8005;break;case g.sign:t=8006;break;case g.shop1:t=8007;break;case g.shop2:t=8008;break;case g.shop3:t=8009;break;case g.window_d:t=8010;break;case g.baozhuGift:t=8011;break;case g.window_c:t=8012;break;case g.revive:t=8013;break;case g.getReward:t=8014;break;case g.GameOverUI_star:t=8015;break;case g.NewYear2021UI:t=8016;break;case g.weaponSkin:t=8017;break;case g.tryHeroSkin:t=8018;break;case g.WeaponUpGrade:t=8019;break;case g.buyHeroVideo:t=8020;break;case g.CoverHeroVideo:t=8021;break;case g.ThousandBladesGetHeroPiece:t=8022;break;case g.shop_box3CD:t=8023;break;case g.shop_box3Get:t=8024;break;case g.addToDesktop:t=8025;break;case g.GetFreeGold:t=8026;break;case g.task:t=8027;break;case g.randomSkill_ALL:t=8028;break;case g.randomSkill_Change:t=8029;break;case g.randomSkill_Lv:t=8030;break;case g.addGridBox:t=8031;break;default:t=-1}return t}}.Get(t);window.jsCallNative_VideoStart(t,e),console.log("nowVideoStatus:"+this.nowVideoStatus),this.nowVideoStatus&&(no.Statistics_T0O(this.pos,1,"1"),eg.gt_ad_Show(j.GetNowVideoType(this.pos),this.pos))}chopOnly_nowVideoStatus(e){this.nowVideoStatus=e}LoadVideoSuccess(){console.log("LoadVideoSuccess");try{this.nowVideoStatus=!0}catch(e){console.error("关闭音效异常")}}LoadVideoStop(){console.log("LoadVideoStop"),null!=mC.Instance.failFun&&(mC.Instance.failFun.call(this),mC.Instance.failFun=null),j.HideShortWait();try{eg.gt_ad_show_end(j.GetNowVideoType(this.pos),this.pos,2)}catch(e){console.error("开启音效异常")}}LoadVideoError(){try{eg.gt_ad_show_end(j.GetNowVideoType(this.pos),this.pos,0),j.TopUI_TipShow(K.DataModule().GetLz().GetText("VideoErrorTip1")),j.HideShortWait()}catch(e){}}PlayVideoError(){try{this.nowVideoStatus=!1,no.Statistics_T0O(this.pos,0,"1"),eg.gt_ad_show_end(j.GetNowVideoType(this.pos),this.pos,0)}catch(e){}}OnCloseWatchVideo(){j.HideShortWait(),null!=mC.Instance.watchFun&&(eg.gt_ad_show_end(j.GetNowVideoType(this.pos),this.pos,1),mC.Instance.watchFun.call(this),mC.Instance.watchFun=null)}jsCallNative_setLoginSuccess(){window.jsCallNative_setLoginSuccess()}VibrateShort(){window.nativeVibrate(30)}VibrateLong(){window.nativeVibrate(400)}BannerAdShow(e=0,t){window.jsCallNative_ShowBanner(t)}BannerAdHide(){window.jsCallNative_HideBanner()}ShowInterstitialAd(){window.jsCallNative_ShowInterstitialAd()}ShowFlotIconAd(e,t){window.jsCallNative_ShowFlotIconAd(e,t)}HideFlotIconAd(){window.jsCallNative_HideFlotIconAd()}},dC=class extends te{constructor(){super(...arguments),this.isStop=!1,this.interstitialAdSwitch=0,this.onScreenAdSwitch=0,this.leftTime=0,this.pos=""}Init(){eg.IsEnable(),dC.Instance=this,window.IosPlatform=this;let e=window.devInfo,t=JSON.parse(e),i=(t.guid,t.dpi,t.resolution),o=t.os,a=t.osversion,n=t.phonemodel,s={};s.platform=o,s.system=a,s.model=n,s.screenWidth=i.split("*")[1],s.screenHeight=i.split("*")[0],console.log("devInfo:"+e),Laya.timer.loop(500,this,this.Login)}GetIosConfig(){let i=this;qt.User_GetConfig("ios_qsll_cq",this,function(e){console.warn("GetIosConfig success:"+e);var t=e.data.Config.interstitialAdSwitch,t=(t&&(i.interstitialAdSwitch=t),e.data.Config.onScreenAdSwitch);t&&(i.onScreenAdSwitch=t)},function(e){console.warn("GetIosConfig Error:"+e)})}Login(){try{"chop"==window.ProjectSubCode&&""!=window.OpenId&&(Laya.timer.clear(this,this.Login),W.openId=window.OpenId,SC.GetOpenIdEnd())}catch(e){}}OnShow(){this.isStop=!1;let e=new Date;this.leftTime=.001*(e.getTime()-this.leftTime),V.exitTime=this.leftTime}OnHide(){this.isStop=!0;let e=new Date;this.leftTime=e.getTime()}WatchVideo(e,t,i){this.pos=t,this.watchFun=e,this.errorFun=null,console.warn("开启看视频"),j.ShowShortWait(5),this.errorFun=function(){if(i)try{i.grayed=!0}catch(e){console.log("设置视频Btn错误",e)}},window.jsCallNative_VideoStart(t),no.Statistics_T0O(this.pos,1,"1")}LoadVideoSuccess(){console.log("LoadVideoSuccess 关闭所有声音");try{Laya.SoundManager.setMusicVolume(0)}catch(e){console.error("关闭音效异常")}}VideoPlaying_ohayoo(){eg.gt_ad_Show(j.GetNowVideoType(this.pos),this.pos)}LoadVideoStop(){console.log("LoadVideoStop 开启所有声音"),j.HideShortWait();try{Laya.SoundManager.setMusicVolume(1)}catch(e){console.error("开启音效异常")}}LoadVideoError(){j.TopUI_TipShow(K.DataModule().GetLz().GetText("VideoErrorTip1")),this.errorFun&&(this.errorFun.call(this),this.errorFun=null),j.HideShortWait()}PlayVideoError(){eg.gt_ad_show_end(j.GetNowVideoType(this.pos),this.pos,0),no.Statistics_T0O(this.pos,0,"1")}OnCloseWatchVideo(){j.HideShortWait(),null!=dC.Instance.watchFun&&(eg.gt_ad_show_end(j.GetNowVideoType(this.pos),this.pos,1),dC.Instance.watchFun.call(this),dC.Instance.watchFun=null)}jsCallNative_setLoginSuccess(){window.jsCallNative_setLoginSuccess()}VibrateShort(){window.nativeVibrate(30)}VibrateLong(){window.nativeVibrate(400)}BannerAdShow(e=0){"chuanqu"==window.ProjectSubCode&&window.jsCallNative_ShowBanner()}BannerAdHide(){"chuanqu"==window.ProjectSubCode&&window.jsCallNative_HideBanner()}ShowInterstitialAd(){"chuanqu"==window.ProjectSubCode&&window.jsCallNative_ShowInterstitialAd()}},cC=class extends te{constructor(){super(...arguments),this.retryCount=0,this.bannnerId="1352456341851164_1355954621501336",this.videoId="1352456341851164_1355955051501293",this.interAdId="1352456341851164_1355954918167973",this.startGameOk=!1,this.pos="",this.isWatchingVideo=!1,this.rewardReadyMap=[],this.lastTimeShow=0}Init(){let e=this;cC.Instance=this,window.FBInstantPlatform=this;var t=T.FaceBook.getPlatform();console.log("fb 当前运行的平台",t),T.FaceBookRunPLATFORM=t;try{W.openId=window.FBInstant.player.getID(),console.log("fb instant get openid:"+W.openId),this.gtag=window.gtag,this.gtag("event","enter_first_scene"),SC.GetOpenIdEnd()}catch(e){console.log("fb isntant 初始化失败")}setInterval(function(){e.setDataAsync()},6e4),e.getDataAsync(),setInterval(function(){e.retryCount<10&&(e.getDataAsync(),e.retryCount++)},1e3),this.preloadVideo2(),setInterval(function(){try{e.isWatchingVideo?(Laya.SoundManager.setSoundVolume(0),Laya.SoundManager.musicMuted=!0):(Laya.SoundManager.musicMuted=!1,Laya.SoundManager.setSoundVolume(1))}catch(e){}},2e3);var i,t=T.FaceBook.getEntryPointData();console.log("from share data:",t),t&&(i=t.openid,t.eventId&&"invite"==t.eventId&&i!=window.FBInstant.player.getID()&&(console.log("我"+window.FBInstant.player.getID()+"接受了"+i+"的邀请"),this.addInvitee(i,window.FBInstant.player.getID()))),this.getInvitees(W.openId)}getInvitees(t){(new Qd).Request({openId:t},"myurl://shoot.fb.api.data-eye.cn/getInvitees",this,e=>{console.log("getInvitees",e,t),e.times,this.addInvitee(t,"testInvitee")})}addInvitee(t,i){(new Qd).Request({inviter:t,invitee:i},"myurl://shoot.fb.api.data-eye.cn/addInvitee",this,e=>{console.log("addInvitee",t,i,e)})}getDataAsync(){let t=this;10!=t.retryCount&&T.FaceBook.player.getDataAsync(["userdata"]).then(function(e){t.retryCount=10,console.log("data is loaded",e);e=e.userdata;e&&null!=e&&null!=e&&e.hasOwnProperty("mergeLevel")&&(t.userdatas=e,Laya.timer.loop(1e3,t,t.checkStartGame))})}checkStartGame(){W.statrGame&&null!=this.userdatas&&(Laya.timer.clear(this,this.checkStartGame),SC.IsSetSaveEnd=!0,W.loginDataEnd=!0,W.userData_saveData=JSON.stringify(this.userdatas),console.log("userData_saveData:",JSON.parse(W.userData_saveData)),this.resetLocalData(this.userdatas))}resetLocalData(t){let i=setInterval(function(){var e=K.DataModule().GetUser().GetData();null!=e&&(console.log("从服务器读取数据后重置游戏"),t.mergeLevel>e.mergeLevel||t.heroList.length>e.heroList.length||t.itemList.length>e.itemList.length||t.equipList.length>e.equipList.length?(K.DataModule().GetUser().SetUserDataSaveForFB(JSON.stringify(t)),console.log("服务器数据较新，重置本地数据并重启游戏")):console.log("本地数据较新不处理"),clearInterval(i))},1e3)}setDataAsync(){var e=K.DataModule().GetUser().GetData();T.FaceBook.player.setDataAsync({userdata:e}).then(()=>{T.FaceBook.player.flushDataAsync()}).then(()=>{console.log(" FB 刷新到数据库")})}WatchVideo(e,t,i){this.pos=t,this.watchFun=e,this.errorFun=null,console.warn("开启看视频"),k.Platform,T.FBINSTANT;let o=this;if(j.ShowShortWait(5),this.errorFun=function(){if(i)try{i.grayed=!0}catch(e){console.log("设置视频Btn错误",e)}},this.rewardReadyMap&&0<this.rewardReadyMap.length){o.LoadVideoSuccess(),o.isWatchingVideo=!0;let t=this.rewardReadyMap[0];console.log("当前拥有实例:",JSON.stringify(this.rewardReadyMap)),t.rewardAd.showAsync().then(e=>{console.log("广告播放成功"),o.gtag("event","reward_video_play"),o.LoadVideoStop(),o.watchFun&&o.watchFun(),o.isWatchingVideo=!1}).catch(e=>{console.log("广告播放终止或播放失败:",e),o.LoadVideoStop(),o.isWatchingVideo=!1});for(let e=0;e<o.rewardReadyMap.length;e++)o.rewardReadyMap[e].rewardAd.adInstanceID===t.rewardAd.adInstanceID&&o.rewardReadyMap.splice(e,1);console.log("删除实例后剩余:",o.rewardReadyMap)}}preloadVideo2(){let e=this;setInterval(function(){e.rewardReadyMap.length<1&&e.readAd()},5e3)}readAd(){let o=this;console.log("开始创建实例:"),T.FaceBook.getRewardedVideoAsync(o.videoId).then(function(i){console.log("创建新视频实例成功:",JSON.stringify(i)),o.gtag("event","reward_video_get");let e=setInterval(function(){for(let e=0;e<o.rewardReadyMap.length;e++){var t=o.rewardReadyMap[e];if(t.rewardAd.adInstanceID===i.adInstanceID&&t.isReady)return}i.loadAsync().then(()=>{o.rewardReadyMap.push({rewardAd:i,isReady:!0}),console.log("fb 广告加载成功:",JSON.stringify(i)),o.gtag("event","reward_video_preload"),clearInterval(e)}).catch(e=>{})},3e3)})}LoadVideoSuccess(){console.log("LoadVideoSuccess 关闭所有声音");try{Laya.SoundManager.musicMuted=!0}catch(e){console.error("关闭音效异常")}}LoadVideoStop(){console.log("LoadVideoStop 开启所有声音"),j.HideShortWait();try{Laya.SoundManager.musicMuted=!1}catch(e){console.error("开启音效异常")}}loadInterAd(){let t=this;T.FaceBook.getInterstitialAdAsync(t.interAdId).then(function(e){console.log("fb 创建插屏成功",JSON.stringify(e)),t.gtag("event","interstitialAd_get"),e.loadAsync().then(()=>{console.log("fb 插屏加载成功"),t.gtag("event","interstitialAd_preload"),e.showAsync().then(e=>{t.gtag("event","interstitialAd_play"),console.log("fb 展示成功:",e)})}).catch(e=>{})})}logEvent(e){console.log("logEvent:",e),this.gtag("event",e),T.FaceBook.logEvent(e)}ShowInterstitialAd(){console.log("显示插屏"),this.loadInterAd()}VibrateShort(){console.log("VibrateShort"),"IOS"!=T.FaceBookRunPLATFORM&&window.navigator&&window.navigator.vibrate&&window.navigator.vibrate(30)}VibrateLong(){console.log("VibrateLong"),"IOS"!=T.FaceBookRunPLATFORM&&window.navigator&&window.navigator.vibrate&&window.navigator.vibrate(400)}BannerAdHide(){T.FaceBook.getSupportedAPIs().find(e=>"hideBannerAdAsync"===e)&&T.FaceBook.hideBannerAdAsync().then(()=>{console.log("banner hide success")}).catch(e=>{console.error("banner hide error",e)})}BannerAdShow(e,t,i){console.log("BannerAdShow:pos",t),0==t&&((t=(new Date).getTime())-this.lastTimeShow<3e4?console.log("30s内不调用"):(this.lastTimeShow=t,T.FaceBook.getSupportedAPIs().find(e=>"loadBannerAdAsync"===e)&&T.FaceBook.loadBannerAdAsync(this.bannnerId).then(()=>{console.log("banner load success")}).catch(e=>{console.error("banner error",e)})))}getBase64(e,o){var a,n=new Image;n.src=e,n.onload=function(){var e=document.createElement("canvas"),t=n.width,i=n.height;e.width=t,e.height=i,e.getContext("2d").drawImage(n,0,0,t,i),a=e.toDataURL("image/jpeg"),e=n=null,o&&o(a)}}InviteAsync(){let i=this;(new Qd).Request({id:"invite1"},"myurl://shoot.fb.api.data-eye.cn/getBase64Img",this,e=>{console.log("getBase64Img",e.responseValue);var t=e.responseValue,e=e.uri;0==t?i.InviteWithImg(e):i.getBase64("Icon.png",function(e){i.InviteWithImg(e)})},function(){i.getBase64("Icon.png",function(e){i.InviteWithImg(e)})})}ShareAsync(){let i=this;console.log("ShareAsync:"),(new Qd).Request({id:"share1"},"myurl://shoot.fb.api.data-eye.cn/getBase64Img",this,e=>{console.log("getBase64Img",e.responseValue);var t=e.responseValue,e=e.uri;0==t?i.ShareWithImg(e):i.getBase64("Icon.png",function(e){i.ShareWithImg(e)})},function(){i.getBase64("Icon.png",function(e){i.ShareWithImg(e)})})}InviteWithImg(e){T.FaceBook.inviteAsync({image:e,text:{default:T.FaceBook.player.getName()+" is asking for your help!",localizations:{en_US:T.FaceBook.player.getName()+" is asking for your help!",es_LA:"¡X pide tu ayuda!"}},data:{openid:W.openId,name:window.FBInstant.player.getName(),eventId:"invite",giftId:"testItem"}}).then(function(e){console.log("InviteAsync success REQUEST ",e)}).catch(e=>{console.error("InviteAsync err ",e)})}ShareWithImg(e){T.FaceBook.shareAsync({intent:"REQUEST",text:"X is asking for your help!",image:e,data:{openid:W.openId,name:window.FBInstant.player.getName()}}).then(function(e){console.log("share success REQUEST ",e)})}SubscribeBot(){}Match(){T.FaceBook.checkCanPlayerMatchAsync().then(e=>{console.warn("canMatch:"+e),e&&T.FaceBook.matchPlayerAsync(null,!0,!0).then(function(){console.warn("匹配成功:"+T.FaceBook.context.getID())})})}CreateShortcutAsync(){console.log("YLPlatform.FaceBook.canCreateShortcutAsync",T.FaceBook.canCreateShortcutAsync),T.FaceBook.canCreateShortcutAsync().then(function(e){e?T.FaceBook.createShortcutAsync().then(function(){console.error("Shortcut created")}).catch(function(){console.log("Shortcut not created")}):console.log("cannot create Shortcut")}).catch(e=>{console.log("cannot create Shortcut",e)})}createTournamentAsync(){T.FaceBook.tournament.createAsync({initialScore:4,data:{tournamentLevel:"hard"},config:{title:"Level X Tournament",sortOrder:"HIGHER_IS_BETTER",scoreFormat:"NUMERIC",endTime:parseInt(Date.now()/1e3+3600+"")}}).then(function(){}).catch(e=>{console.log("createTournamentAsync",e)})}getTournamentAsync(){T.FaceBook.getTournamentAsync().then(function(e){console.log("tournament",e),console.log("getEndTime",e.getEndTime()),console.log("getContextID",e.getContextID()),console.log("tournamentId",e.getID()),console.log("getPayload",e.getPayload())}).catch(e=>{console.error("getTournamentAsync err",e)})}postScoreAsync(t){T.FaceBook.tournament.postScoreAsync(t).then(function(e){console.log("score",e,t)}).catch(e=>{console.error("postScoreAsync err",e)})}getTournamentsAsync(){T.FaceBook.tournament.getTournamentsAsync().then(e=>{e.forEach(e=>{console.log("getTournamentsAsync:tournament",e.getID(),e.getContextID(),e)})})}joinTournamentAsync(e){T.FaceBook.tournament.joinAsync(e).then(function(){console.log("Context switch completed successfully.",e)}).catch(e=>{})}shareTournamentAsync(){T.FaceBook.tournament.shareAsync({score:Math.floor(200*Math.random()),data:{shareTournamentAsync:"..."}})}},uC=(0,class extends u{constructor(){super(...arguments),this.ModuleName="平台模块",this.isLoadHouseAds=!1,this.isLoadNewHouseAds=!1,this.isLoadConfigOk=!1,this.mpCheckChannel=!1,this.mpCheckChannelList=[],this.onShowBack=new t,this.useBanner=!0,this.useMistakeClick=!0,this.mistakeClickDelay=2.5,this.mistakeClickChance=1,this.broadRoadChance=.5,this.tryNewCarChance=.5,this.mistakeBannerCoverTime=0,this.noVideoChangeToShare=!0,this.isShowMan=!1,this.startUnbeatable=!1,this.trySkin=!1,this.trySkinStartPushTimes=1e3,this.trySkinPushInterval=1e3,this.tryPlaySkinGameIntervalTimes=0,this.trySkinCloseTimes=0,this.failturesTimes=0,this.key2="&krq_ssccc=0",this.isShowLabel=!1,this.isSendStatis=!0,this.SmallTestPlaySkin=!1,this.SettlementMarkers=!1,this.chinaState="",this.projectID="",this.useCustomAd=!1,this.nowZiBaoFialTime=0,this.oldCustomAdUI="",this.oldPushItUI="",this.oldUI="",this.bannerDelayTime=0,this.offSetScale=1,this.isHide=!1,this.InviteCount=0}Init(){switch(uC.Instance=this,super.Init(),k.Platform){case T.WECHAT:this.platform=new CC,this.useBanner=!1;break;case T.OPPO:this.useBanner=!1,this.platform=new Do;break;case T.VIVO:this.useBanner=!1,this.platform=new vo;break;case T.JR:break;case T.H5_4399:this.platform=new class extends te{constructor(){super(...arguments),this.apiIsReady=!1,this.pos=""}Init(){window.H54399=this,console.log("4399初始化"),null==window.h5api?(console.log("此时h5api undefined,定时等待，然后登录"),Laya.timer.loop(1e3,this,this.checkH5ApiReady)):(console.log("此时h5api已初始化",window.h5api),window.h5api&&Laya.timer.loop(1e3,this,this.checkApiReady))}checkH5ApiReady(){console.log("checkH5ApiReady begin");window.h5api&&(Laya.timer.clear(this,this.checkH5ApiReady),Laya.timer.loop(1e3,this,this.checkApiReady))}checkApiReady(){console.log("checkApiReady");null!=window.h5api.isLogin&&(this.apiIsReady=!0,Laya.timer.clear(this,this.checkApiReady),window.h5api.isLogin()?(console.log("已登录4399，仅测试"),window.h5api.login(function(e){console.log("userdata",e)})):window.h5api.login(function(e){console.log("userdata",e)}))}WatchVideo(e,t,i){this.pos=t,this.watchFun=e,this.errorFun=null;let o=this;this.errorFun=function(){if(i)try{i.grayed=!0}catch(e){console.log("设置视频Btn错误",e)}},window.h5api.canPlayAd?window.h5api.canPlayAd(function(e){console.log("是否可播放广告",e.canPlayAd,"剩余次数",e.remain),e.canPlayAd&&j.ShowShortWait(5),window.h5api.playAd(function(e){console.log("代码:"+e.code+",消息:"+e.message),1e4===e.code?console.log("开始播放"):10001===e.code?(console.log("播放结束"),o.watchFun&&o.watchFun()):console.log("广告异常")})}):console.error("canPlayAd 未初始化完成。")}VibrateShort(){console.log("VibrateShort")}VibrateLong(){console.log("VibrateLong")}};break;case T.ANDROID:this.platform=new mC;break;case T.IOS:this.platform=new dC;break;case T.QQ:this.platform=new Ko;break;case T.TT:this.platform=new hg;break;case T.KUAISHOU:this.platform=new Yt;break;case T.FBINSTANT:this.platform=new cC}console.warn("platform:"+k.Platform+" isWebTest:"+k.IsInWebTest),k.IsInWebTest&&(this.platform=null),this.platform&&this.platform.Init(),this.InitOver(),Laya.timer.frameLoop(1,this,this.update)}LoadConfig(){null!=this.platform&&this.platform.LoadConfig(),k.IsInWebTest&&(this.PlatformSettingData().UseShare=!0,this.isLoadConfigOk=!0,K.PlatformModule().projectID="webTest",qt.User_GetConfig(K.PlatformModule().projectID,this,function(e){try{console.warn("GetConfig success:",e.ip,e.data.Base.Area[1]),K.PlatformModule().chinaState=e.data.Base.Area[1]}catch(e){}},function(e){}))}LoadSubPack(i,o,a,n=null,s=null){if(b.Warn("加载子包"+i),k.IsInWebTest)a.call(o);else if(k.Platform==T.H5_4399)a.call(o);else if(k.Platform==T.FBINSTANT)a.call(o);else if(k.Platform==T.TT)a.call(o);else if(k.Platform==T.ANDROID)a.call(o);else if(k.Platform==T.IOS)a.call(o);else if(k.Platform==T.KUAISHOU)a.call(o);else{let e,t=this;k.Platform==T.OPPO&&(b.Warn("开始加载子包"+i),e=window.qg.loadSubpackage({name:i,success:function(){b.Warn("子包加载成功"),a.call(o)},fail:function(e){b.Warn("子包加载失败"+JSON.stringify(e)),t.nowZiBaoFialTime++,10<=t.nowZiBaoFialTime&&a.call(o),null!=n&&n.call(o)},complete:function(e){b.Warn("子包加载完成"+e)}})),k.Platform==T.VIVO&&(b.Warn("开始加载子包"+i),e=T.Vivo.loadSubpackage({name:i,success:function(){b.Warn("子包加载成功"),a.call(o)},fail:function(e){b.Warn("子包加载失败"+JSON.stringify(e)),null!=n&&n.call(o)},complete:function(e){b.Warn("子包加载完成"+e)}})),k.Platform==T.WECHAT?e=T.WX.loadSubpackage({name:i,success:function(e){a.call(o),b.Warn("子包加载成功")},fail:function(e){null!=n&&n.call(o),b.Warn("子包加载失败")}}):k.Platform==T.QQ&&(e=T.qq.loadSubpackage({name:i,success:function(e){a.call(o),b.Warn("子包加载成功")},fail:function(e){null!=n&&n.call(o),b.Warn("子包加载失败")}})),null!=e&&e.onProgressUpdate(e=>{null!=s&&s.call(o,e.progress)})}}CustomAdDel(){if(this.oldCustomAdUI!=K.UIModule().GetNowTopUIName()){var t=K.UIModule().GetNowTopUIName();console.warn("格子广告刷新！！！！！！！！！！！"),this.oldCustomAdUI=t,this.HideLeftCreateCustomAd(),this.HideRightCreateCustomAd();let e=K.DataModule().GetLocal().platform.GetGridType(t);if(0==(e=T.IsIPhoneXScreen?K.DataModule().GetLocal().platform.GetLongGridType(t):e))this.HideLeftCreateCustomAd(),this.HideRightCreateCustomAd();else{let e=K.DataModule().GetLocal().platform.GetUIPos(t);T.IsIPhoneXScreen&&(e=K.DataModule().GetLocal().platform.GetUILongPos(t)),console.warn("广告显示!!!!!!!!!!!",e),1==e&&this.ShowLeftCreateCustomAd(),2==e&&this.ShowRightCreateCustomAd(),3==e&&(this.ShowLeftCreateCustomAd(),this.ShowRightCreateCustomAd())}}}GetPlatformData(){return this.platform?this.platform.platformData:null}GetSystemInfo(){this.platform&&this.platform.GetSystemInfo()}GetSystem(){return this.platform?this.platform.GetSystem():""}GetChanleId(){return this.platform?this.platform.GetChanleId():""}GetAuthorize(){this.platform&&this.platform.GetAuthorize()}GetUserData(e,t){this.platform&&this.platform.GetUserData(e,t)}ShowRightCreateCustomAd(){this.platform&&this.platform.ShowRightCreateCustomAd()}HideRightCreateCustomAd(){this.platform&&this.platform.HideRightCreateCustomAd()}ShowLeftCreateCustomAd(){this.platform&&this.platform.ShowLeftCreateCustomAd()}HideLeftCreateCustomAd(){this.platform&&this.platform.HideLeftCreateCustomAd()}Login(e,t,i){this.platform&&this.platform.Login(e,t,i)}ShowInterstitialAd(){this.platform&&this.platform.ShowInterstitialAd()}BannerAd_up_Show(e=0,t=0){this.platform&&this.platform.BannerAd_up_Show(e,t)}BannerAdShow(e,t,i){b.Warn("显示"+e),this.platform&&this.platform.BannerAdShow(e,t,i)}BannerAdHide(){this.platform&&this.platform.BannerAdHide()}WatchVideo(e,t,i=null,o=null){b.Warn("调用看视频:"+t+" "),this.platform?this.platform.WatchVideo(e,t,i,o):e.call(this)}StartRecord(){this.platform&&this.platform.StartRecord()}EndRecord(){this.platform&&this.platform.EndRecord()}ShareVideo(e,t,i){this.platform&&this.platform.ShareVideo(e,t,i)}IsVideoRecording(){return!!this.platform&&this.platform.isInRecording}IsHaveVideo(){return!!this.platform&&this.platform.IsHaveVideoShare()}ShareBase(e,t=null,i){b.Warn("调用分享"),k.IsInWebTest?null!=e&&e.call(this):this.platform&&this.platform.ShareBase(e,t)}CustomerService(){this.platform&&this.platform.CustomerService()}VibrateShort(){(K.AudioModule().isVibratesOn||k.Platform!=T.OPPO)&&this.platform&&this.platform.VibrateShort()}VibrateLong(){K.AudioModule().isVibratesOn&&(T.IS_WECHAT_PLATFORM&&T.WX.vibrateLong(),k.Platform!=T.ANDROID&&k.Platform!=T.IOS&&k.Platform!=T.VIVO||this.platform&&this.platform.VibrateLong())}ShowFlotIconAd(e,t){this.platform&&this.platform.ShowFlotIconAd(e,t)}HideFlotIconAd(){this.platform&&this.platform.HideFlotIconAd()}NavigateToMiniProgram(e,t,i,o){this.platform&&this.platform.NavigateToMiniProgram(e,t,i,o)}update(){this.useBanner&&(T.IS_OPPO_PLATFORM?this.OppoBannerDel():this.BannerDel()),T.ProjectSubCode&&this.PushItAd(),this.useCustomAd&&this.CustomAdDel()}OppoBannerDel(e=!1,t=1){e&&(this.oldUI=""),this.oldUI!=K.UIModule().GetNowTopUIName()&&(this.offSetScale=1,this.bannerDelayTime=0,1!=t&&(this.offSetScale=t),this.oldUI=K.UIModule().GetNowTopUIName(),b.Warn("新ui"+this.oldUI),e=K.DataModule().GetLocal().platform.GetBannerType(this.oldUI),console.log("OppoBannerDel1",e,this.oldUI),0==e?(this.BannerAdHide(),console.log("OppoBannerDel3",e,this.oldUI)):(console.log("OppoBannerDel2",e,this.oldUI),this.BannerAdShow(this.offSetScale,0,this.oldUI)))}PushItAd(){var e,t,i=K.UIModule().GetNowTopUIName();this.oldPushItUI!=i&&(i==Zg.UIName&&(t=K.UIModule().GetUI(Zg.UIName)).view&&t.isShow&&K.DataModule().GetUser().GetData().nowGuide!=qp.LevelRewardGuide?(e=(t.view.m_signBtn.y-80)/t.view.height,t=(t.view.m_signBtn.x+10)/t.view.width,this.ShowFlotIconAd(e,t)):this.HideFlotIconAd(),this.oldPushItUI=i)}UseBanner(){this.useBanner=!0}UseCustomAd(){this.useCustomAd=!0}RandomMistakClick(){return!!this.useMistakeClick&&Math.random()<this.mistakeClickChance}protogenesis_GridAdDel(t){if(!k.IsInWebTest&&k.Platform==T.WECHAT){K.DataModule().GetLocal().platform.GetUIPos(t);let e=K.DataModule().GetLocal().platform.GetGridType(t);if(0==(e=T.IsIPhoneXScreen?K.DataModule().GetLocal().platform.GetLongGridType(t):e))CC.Instance.protogenesis_Grid_Hide();else{let e=K.DataModule().GetLocal().platform.GetUIPos(t);T.IsIPhoneXScreen&&(e=K.DataModule().GetLocal().platform.GetUILongPos(t)),CC.Instance.protogenesis_Grid_Show(e)}}}BannerDel(e=!1,i=1){if(e&&(this.oldUI=""),K.UIModule().GetNowTopUIName()==ef.UIName&&!V.isShowBanner)return this.oldUI="",void(this.isHide||(this.BannerAdHide(),this.isHide=!0));if(this.oldUI!=K.UIModule().GetNowTopUIName()){this.offSetScale=1,this.bannerDelayTime=0,1!=i&&(this.offSetScale=i),this.oldUI=K.UIModule().GetNowTopUIName(),b.Warn("新ui"+this.oldUI);let e=K.DataModule().GetLocal().platform.GetBannerPos(this.oldUI),t=K.DataModule().GetLocal().platform.GetBannerType(this.oldUI);T.IsIPhoneXScreen&&(e=K.DataModule().GetLocal().platform.GetLongBannerPos(this.oldUI),t=K.DataModule().GetLocal().platform.GetLongBannerType(this.oldUI)),k.Platform==T.WECHAT&&(uC.IsNextShowBanner||this.oldUI==Qg.UIName&&(t=0,uC.IsNextShowBanner=!0),z.Instance.leYouAllow&&(2==(e=this.oldUI==Kp.UIName?0:e)&&(e=0)),!K.PlatformModule().PlatformSettingData().WX_isWuChu&&K.PlatformModule().PlatformSettingData().Mp_BannerOff&&1095!=CC.Instance.sceneID&&(2==(e=this.oldUI==Kp.UIName?0:e)&&(e=0))),k.Platform==T.QQ&&this.oldUI==Yo.UIName&&(t=0),V.IsGameMode_Zombie()&&this.oldUI==Bf.UIName&&(t=0),this.protogenesis_GridAdDel(this.oldUI),console.log("BannerDel",t,this.oldUI,e),0==t?this.BannerAdHide():(this.BannerAdHide(),this.isHide=!1,this.BannerAdShow(this.offSetScale,e,this.oldUI))}}ShareUserID(){return this.platform?this.platform.shareOpenId:""}ShareID(){return this.platform?this.platform.shareId:""}GetBannerType(e){return K.DataModule().GetPlatform().GetBannerType(e)}GetUIOffset(e){return K.DataModule().GetPlatform().GetUIOffset(e)}RandomGetShareImage(){return K.DataModule().GetPlatform().RandomGetShareImage()}PlatformSettingData(){return K.DataModule().GetPlatform().PlatformData}LoadInviteCount(t,i){k.IsInWebTest?i.call(this,this.InviteCount):z.Api.getInviteCount({pos:"Share_Invite",success:function(e){b.Warn("邀请了"+e+"个好友"),uC.Instance.InviteCount=e,i.call(t,e)},fail:function(){b.Warn("邀请好友加载失败")}})}RefreshExtensionAds(){}recordScreenStart(){k.Platform!=T.TT&&k.Platform!=T.KUAISHOU||this.platform&&this.platform.recordScreenStart()}recordScreenEnd(){k.Platform!=T.TT&&k.Platform!=T.KUAISHOU||this.platform&&this.platform.recordScreenEnd()}shareRecordVideo(e,t=null){this.platform&&this.platform.shareRecordVideo(e,t)}}),W=uC,s=(W.openId="",W.uuid=-1,W.loginDataEnd=!1,W.userData_saveData="",W.isSuperAccount=!1,W.isCompensate=!1,W.OneGameTime=0,W.OneGameLv=0,W.OneGameRevive=0,W.OneGameOver=0,W.statrGame=!1,W.luandouReviveTime=0,W.luandouReviveTimeStop=!1,W.newPlayer=!1,W.Coin_DoubleTime=0,W.Chuanqu_isBoxTime3=!1,W.Grid_Hero_DarkWitch=!1,W.Guidance_TryHero=!1,W.Guidance_huoyue=!1,{debugMode:!(W.IsNextShowBanner=!0),gameId:0,channelId:0,uid:0,token:"",uniqueKey:"",sdkVersion:"2.0",channelType:{WX:1002,FACEBOOK:7001,MQQ:2003,OPPO:8001,vivo:9001,LYH5:10001},getServerTime(e){var t=s._url()+s._linkInfo.keyServerTime;s._check(e,s._linkInfo.keyServerTime)||s._httpRequest(t,e,"GET")},login(i){var e;s._check(i,s._linkInfo.keyLogin)||(i.data=i.data||"",e=s._url()+s._linkInfo.keyLogin,s.gameId=i.gameId,s.channelId=i.channelId,s._httpRequest(e,i,null,function(e){var t;0==e.state&&e.info&&(s.uid=e.info.uid,s.token=e.info.token,s.uniqueKey=e.info.uniqueKey,(t=s._getPlatObject())&&(t.cdb.uid=s.uid,t.cdb.token=s.token,t.cdb.openId=e.info.openId||i.data.openId||"",t.cdb.uniqueKey=s.uniqueKey)),s._logInfo()}))},getWxDecryptionData(e){var t;"object"==typeof e?(e.uniqueKey=s.uniqueKey,e.appid=s.gameId.toString(),e.channel=s.channelId.toString(),t=s._serviceUrl()+s._linkInfo.keyGetWxDecryptionData,s._check(e,s._linkInfo.keyGetWxDecryptionData)||s._httpRequest(t,e)):console.error("CDB getWxUnionKey ERROR params Type")},setPrivateData(e){var t=s._url()+s._linkInfo.keySavePrivateData;s._check(e,s._linkInfo.keySavePrivateData)||s._httpRequest(t,e)},setPrivateDatas(e){var t=s._url()+s._linkInfo.keySavePrivateDatas;s._check(e,s._linkInfo.keySavePrivateDatas)||s._httpRequest(t,e)},setPublicData(e){var t=s._url()+s._linkInfo.keySavePublicData;s._check(e,s._linkInfo.keySavePublicData)||s._httpRequest(t,e)},setOtherData(e){var t=s._url()+s._linkInfo.keySaveOhterData;s._check(e,s._linkInfo.keySaveOhterData)||s._httpRequest(t,e)},getUserData(e){var t=s._url()+s._linkInfo.keyGetUserData;s._check(e,s._linkInfo.keyGetUserData)||s._httpRequest(t,e)},getUserDatas(e){var t=s._url()+s._linkInfo.keyGetUserDatas;s._check(e,s._linkInfo.keyGetUserDatas)||s._httpRequest(t,e)},getUsers(e){var t=s._url()+s._linkInfo.keyGetUsers;s._check(e,s._linkInfo.keyGetUsers)||s._httpRequest(t,e)},deleteSelfDatasFromOthers(e){var t=s._url()+s._linkInfo.keyDeleteSelfDatasFromOthers;s._check(e,s._linkInfo.keyDeleteSelfDatasFromOthers)||s._httpRequest(t,e)},getRankListData(e){var t=s._url()+s._linkInfo.keyGetRankListData;s._check(e,s._linkInfo.keyGetRankListData)||s._httpRequest(t,e)},getMyRankData(e){var t=s._url()+s._linkInfo.keyGetMyRankData;s._check(e,s._linkInfo.keyGetMyRankData)||s._httpRequest(t,e)},setWorldRankData(e){var t=s._url()+s._linkInfo.keyAppendRankData;s._check(e,s._linkInfo.keyAppendRankData)||s._httpRequest(t,e)},getOthersData(e){var t=s._url()+s._linkInfo.keyGetOthersData;s._check(e,s._linkInfo.keyGetOthersData)||s._httpRequest(t,e)},getLocationInfo(e){var t=s._url()+s._linkInfo.keyGetLocation;s._check(e,s._linkInfo.keyGetLocation)||s._httpRequest(t,e)},getRandomUserInfos(e){var t=s._url()+s._linkInfo.keyGetRandomUsers;s._check(e,s._linkInfo.keyGetRandomUsers)||s._httpRequest(t,e)},updateWxUserInfo(e){var t=s._url()+s._linkInfo.keyUpdateUserInfo;s._check(e,s._linkInfo.keyUpdateUserInfo)||s._httpRequest(t,e)},deleteUserDatas(e){var t=s._url()+s._linkInfo.keyDeleteSelfDatas;s._check(e,s._linkInfo.keyDeleteSelfDatas)||s._httpRequest(t,e)},calculateUserData(e){var t=s._url()+s._linkInfo.keyCalculateData;s._check(e,s._linkInfo.keyCalculateData)||s._httpRequest(t,e)},calculateUserDatas(e){var t=s._url()+s._linkInfo.keyCalculateDatas;s._check(e,s._linkInfo.keyCalculateDatas)||s._httpRequest(t,e)},getOthersKeysData(e){var t=s._url()+s._linkInfo.keyGetOthersKeysData;s._check(e,s._linkInfo.keyGetOthersKeysData)||s._httpRequest(t,e)},verification(e){var t=s._url()+s._linkInfo.keyVerification;s._check(e,s._linkInfo.keyVerification)||s._httpRequest(t,e)},getCalRankListData(e){var t=s._url()+s._linkInfo.keyCalRankList;s._check(e,s._linkInfo.keyCalRankList)||s._httpRequest(t,e)},getSelfCalRankData(e){var t=s._url()+s._linkInfo.keySelfCalRank;s._check(e,s._linkInfo.keySelfCalRank)||s._httpRequest(t,e)},_check(e,t){function i(e){return null==e}function o(e){return"number"==typeof e}function a(e){return"string"==typeof e}function n(e){return"object"==typeof e}if(t==s._linkInfo.keyLogin){if(i(e.gameId)||i(e.channelId)||i(e.platId)||i(e.timestamps))return console.error("CDB Error Params : "+JSON.stringify(e)),!0;if(!(o(e.gameId)&&o(e.channelId)&&o(e.platId)&&a(e.timestamps)))return console.error("CDB Error Params Type : "+JSON.stringify(e)),!0}else if(t==s._linkInfo.keySavePrivateData){if(i(e.key)||i(e.value))return console.error("CDB Error Params : "+JSON.stringify(e)),!0;if(!o(e.key)||!a(e.value))return console.error("CDB Error Params Type : "+JSON.stringify(e)),!0}else if(t==s._linkInfo.keySavePrivateDatas){if(i(e.data))return console.error("CDB Error Params : "+JSON.stringify(e)),!0;if(!n(e.data))return console.error("CDB Error Params Type : "+JSON.stringify(e)),!0}else if(t==s._linkInfo.keyGetUserData){if(i(e.key)||i(e.sdType))return console.error("CDB Error Params : "+JSON.stringify(e)),!0;if(!o(e.key)||!o(e.sdType))return console.error("CDB Error Params Type : "+JSON.stringify(e)),!0}else if(t==s._linkInfo.keyGetUserDatas){if(i(e.keys)||i(e.sdType))return console.error("CDB Error Params : "+JSON.stringify(e)),!0;if(!n(e.keys)||!o(e.sdType))return console.error("CDB Error Params Type : "+JSON.stringify(e)),!0}else if(t==s._linkInfo.keySavePublicData){if(i(e.key)||i(e.score))return console.error("CDB Error Params : "+JSON.stringify(e)),!0;if(!o(e.key)||!o(e.score))return console.error("CDB Error Params Type : "+JSON.stringify(e)),!0}else if(t==s._linkInfo.keyGetOthersData){if(i(e.key)||i(e.otherUids))return console.error("CDB Error Params : "+JSON.stringify(e)),!0;if(!o(e.key)||!n(e.otherUids))return console.error("CDB Error Params Type : "+JSON.stringify(e)),!0}else if(t==s._linkInfo.keySaveOhterData){if(i(e.key)||i(e.otherUid)||i(e.value))return console.error("CDB Error Params : "+JSON.stringify(e)),!0;if(!o(e.key)||!a(e.otherUid)||!a(e.value))return console.error("CDB Error Params Type : "+JSON.stringify(e)),!0}else if(t==s._linkInfo.keyAppendRankData){if(i(e.key)||i(e.score))return console.error("CDB Error Params : "+JSON.stringify(e)),!0;if(!o(e.key)||!o(e.score))return console.error("CDB Error Params Type : "+JSON.stringify(e)),!0}else if(t==s._linkInfo.keyGetRankListData){if(i(e.key))return console.error("CDB Error Params : "+JSON.stringify(e)),!0;if(!o(e.key))return console.error("CDB Error Params Type : "+JSON.stringify(e)),!0;if(e.otherUserDataKeys&&!n(e.otherUserDataKeys))return console.error("CDB Error Params Type : "+JSON.stringify(e)),!0}else if(t==s._linkInfo.keyGetMyRankData){if(i(e.key))return console.error("CDB Error Params : "+JSON.stringify(e)),!0;if(!o(e.key))return console.error("CDB Error Params Type : "+JSON.stringify(e)),!0;if(e.otherUserDataKeys&&!n(e.otherUserDataKeys))return console.error("CDB Error Params Type : "+JSON.stringify(e)),!0}else if(t==s._linkInfo.keyGetUsers){if(i(e.otherUids))return console.error("CDB Error Params : "+JSON.stringify(e)),!0;if(!n(e.otherUids))return console.error("CDB Error Params Type : "+JSON.stringify(e)),!0}else if(t==s._linkInfo.keyGetRandomUsers){if(!i(e.num)&&!o(e.num))return console.error("CDB Error Params Type : "+JSON.stringify(e)),!0}else if(t==s._linkInfo.keyDeleteSelfDatasFromOthers){if(i(e.key)||i(e.values))return console.error("CDB Error Params : "+JSON.stringify(e)),!0;if(!o(e.key)||!n(e.values))return console.error("CDB Error Params Type : "+JSON.stringify(e)),!0}else if(t==s._linkInfo.keyDeleteSelfDatas){if(0==s.debugMode)return console.error("CDB Can not use DELETE DATA API by Release"),!0;if(e.sdTypes&&!Array.isArray(e.sdTypes))return console.error("CDB Error Params Type : "+JSON.stringify(e)),!0}else if(t==s._linkInfo.keyCalculateData){if(i(e.uid)||i(e.key))return console.error("CDB Error Params : "+JSON.stringify(e)),!0;if(!o(e.uid)||!o(e.key))return console.error("CDB Error Params Type : "+JSON.stringify(e)),!0}else if(t==s._linkInfo.keyCalculateDatas){if(i(e.uid)||i(e.data))return console.error("CDB Error Params : "+JSON.stringify(e)),!0;if(!o(e.uid)||!Array.isArray(e.data))return console.error("CDB Error Params Type : "+JSON.stringify(e)),!0}else if(t==s._linkInfo.keyGetWxDecryptionData){if(i(e.data)||i(e.uniqueKey))return console.error("CDB Error Params : "+JSON.stringify(e)),!0;if(!a(e.data)||!a(e.uniqueKey))return console.error("CDB Error Params Type : "+JSON.stringify(e)),!0}else if(t==s._linkInfo.keyUpdateUserInfo){if("undefined"==typeof wx)return console.error("CDB Error UpdateUserInfo is Wechat Only : "+JSON.stringify(e)),!0;if(i(e.nickname)||i(e.avatarUrl))return console.error("CDB Error Params : "+JSON.stringify(e)),!0;if(!a(e.nickname)||!a(e.avatarUrl))return console.error("CDB Error Params Type : "+JSON.stringify(e)),!0}else if(t==s._linkInfo.keyGetOthersKeysData){if(i(e.otherUids)||i(e.keys))return console.error("CDB Error Params : "+JSON.stringify(e)),!0;if(!n(e.otherUids)||!n(e.keys))return console.error("CDB Error Params Type : "+JSON.stringify(e)),!0}else if(t==s._linkInfo.keyVerification){if(i(e.name)||i(e.idCard))return console.error("CDB Error Params : "+JSON.stringify(e)),!0;if(!a(e.name)||!a(e.idCard))return console.error("CDB Error Params : "+JSON.stringify(e)),!0;if(e.name.length<=1||15!=e.idCard.length&&18!=e.idCard.length)return console.error("CDB Error Params : "+JSON.stringify(e)),!0}else if(t==s._linkInfo.keyCalRankList){if(i(e.key))return console.error("CDB Error Params : "+JSON.stringify(e)),!0;if(!o(e.key))return console.error("CDB Error Params Type : "+JSON.stringify(e)),!0;if(e.otherUserDataKeys&&!n(e.otherUserDataKeys))return console.error("CDB Error Params Type : "+JSON.stringify(e)),!0}else if(t==s._linkInfo.keySelfCalRank){if(i(e.key))return console.error("CDB Error Params : "+JSON.stringify(e)),!0;if(!o(e.key))return console.error("CDB Error Params Type : "+JSON.stringify(e)),!0;if(e.otherUserDataKeys&&!n(e.otherUserDataKeys))return console.error("CDB Error Params Type : "+JSON.stringify(e)),!0}return!1},_linkInfo:{keyServerTime:"/api/userCloudData/time",keyLogin:"/api/user/login",keySavePrivateData:"/api/userCloudData/setSelfNormalData",keySavePrivateDatas:"/api/userCloudData/setSelfMultipleData",keyGetUserData:"/api/userCloudData/getSelfData",keyGetUserDatas:"/api/userCloudData/getSelfDatas",keySavePublicData:"/api/userCloudData/setSelfScoreOtherReadData",keyGetOthersData:"/api/userCloudData/getOthersData",keySaveOhterData:"/api/userCloudData/appendOtherSetData",keyAppendRankData:"/api/userCloudData/appendRankList",keyGetRankListData:"/api/userCloudData/getRankList",keyGetMyRankData:"/api/userCloudData/getRank",keyGetUsers:"/api/user/getUsers",keyGetRandomUsers:"/api/user/getRandomUsers",keyDeleteSelfDatasFromOthers:"/api/userCloudData/deleteSelfDatasFromOthers",keyDeleteSelfDatas:"/cdb/test/resetUserData",keyCalculateData:"/api/userCloudData/calculateSingleKey",keyCalculateDatas:"/api/userCloudData/calculateMultipleKeys",keyGetWxDecryptionData:"/decryption",keyGetLocation:"/api/userCloudData/getLocation",keyUpdateUserInfo:"/api/userCloudData/refreshUserBasicInfo",keyGetOthersKeysData:"/api/userCloudData/getOthersKeysData",keyVerification:"/api/userCloudData/realCheck",keyCalRankList:"/api/userCloudData/getCalRankList",keySelfCalRank:"/api/userCloudData/getCalRank"},_url:()=>s.debugMode?"myurl://test.gw.leuok.com/gl-ms-single-server":"myurl://gw.lightlygame.com/gl-ms-single-server",_serviceUrl:()=>s.debugMode?"myurl://test.gw.leuok.com/gl-ms-minigame-service":"myurl://gw.lightlygame.com/gl-ms-minigame-service",_httpRequest(e,t,i,o){var a=s._getPlatObject()||{cdb:{}};try{i=i||"POST";var n=new XMLHttpRequest;n.open(i,e),n.onload=function(){var e;200<=this.status&&this.status<300?(0==(e=JSON.parse(n.response)).state?(o&&o(e),t.success&&t.success(e)):t.fail&&t.fail(e),t.complete&&t.complete(e)):(e={status:this.status,statusText:n.statusText},t.fail&&t.fail(e),t.complete&&t.complete(e))},n.onerror=function(){var e={status:this.status,statusText:n.statusText};t.fail&&t.fail(e),t.complete&&t.complete(e)},n.setRequestHeader("gameId",s.gameId.toString()),n.setRequestHeader("channelId",s.channelId.toString()),n.setRequestHeader("uid",a.cdb.uid||s.uid.toString()),n.setRequestHeader("token",a.cdb.token||s.token),n.setRequestHeader("Content-Type","application/json"),n.send(JSON.stringify(t))}catch(e){console.error("客户端发送失败:"+e)}},_logInfo(){console.log("[CDB INFO] gameId: "+s.gameId+" channelId: "+s.channelId+" uid: "+s.uid+" token: "+s.token)},_getPlatObject:()=>"object"==typeof wx?wx.leuok:"object"==typeof BK?BK.leuok:"object"==typeof qg?qg.leuok:"object"==typeof qq?qq.leuok:"object"==typeof window?window.leuok:void 0}),pC=(window.CDB=s,class extends ${Load(){null==this.view&&(this.view=this.CreatFGUIViewByView(_l.createInstance()),this.AllOnClick(),this.LoadImage()),this.SetLoadInfo()}LoadImage(){}AllOnClick(){this.view.m_Btn_Close.onClick(this,this.onBtn_Close),this.view.m_Btn_video.onClick(this,this.onVideo)}onBtn_Close(){K.UIModule().HideUI(pC.UIName)}onVideo(){K.UIModule().HideUI(pC.UIName),CC.Instance.WeChat_VideoAgain()}SetLoadInfo(){if(K.PlatformModule().PlatformSettingData().WX_isWuChu){this.view.m_Btn_Close.visible=!1;let e=this;Laya.timer.once(2e3,this,function(){e.view&&(e.view.m_Btn_Close.visible=!0)})}}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null)}Show(){super.Show(),this.Load()}SetHideInfo(){}Hide(){this.SetHideInfo(),super.Hide(),this.UnLoad()}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(pC);return e.name=pC.UIName,t.uiName=pC.UIName,t}}),gC=pC;gC.UIName="VideoColseUI";var fC=class extends ${constructor(){super(...arguments),this.List=[]}Load(){null==this.view&&(this.view=this.CreatFGUIViewByView(Pn.createInstance()),this.AllOnClick(),this.LoadImage()),this.SetLoadInfo()}LoadImage(){}SetInfoLoad(e){e&&(this.List=e.info),K.UIModule().ShowUI(fC.UIName)}AllOnClick(){this.view.m_Btn_Close.onClick(this,this.onBtn_Close)}onBtn_Close(){K.UIModule().HideUI(fC.UIName)}SetLoadInfo(){this.List_Refresh(),this.view.m_myCom.visible=!1,CC.Instance.CDB_getMyRankData(function(e){K.UIModule().GetUI(fC.UIName).SetMyRanK(e)})}SetMyRanK(a){if(console.log("获得自己数据1",a),a){this.userData=a.info;let e=this.userData.nickname,t=this.userData.score,i=this.userData.icon,o=this.userData.value+1+"";e=e||"",i=i||"",o=o||"",this.view.m_myCom.visible=!0,this.view.m_myCom.m_text_s.text=t.toString(),this.view.m_myCom.m_load_icon.url=i,this.view.m_myCom.m_text_name.text=e,this.view.m_myCom.m_text_rank.text=o.toString()}}List_Refresh(){this.view.m_list.itemRenderer=Laya.Handler.create(this,this.onRenderItem,null,!1),this.view.m_list.numItems=this.List.length}onRenderItem(e,t){let i=this.List[e];t.m_text_rank.text=(e+1).toString(),t.m_text_s.text=i.value.toString(),t.m_load_icon.url=i.icon,t.m_text_name.text=i.nickname}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null)}Show(){super.Show(),this.Load()}SetHideInfo(){}Hide(){this.SetHideInfo(),super.Hide(),this.UnLoad()}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(fC);return e.name=fC.UIName,t.uiName=fC.UIName,t}},_C=fC,IC=(_C.UIName="RankUI",0,class extends te{constructor(){super(...arguments),this.jscode="",this.openId="",this.sessionKey="",this.channelId="",this.playerName="",this.playerIcon="",this.hideTimestamp=0,this.useShareCallBack=!1,this.shareOKFun=null,this.shareNOFun=null,this.useFakeShare=!0,this.isShareCancel=!1,this.fromShareImage="",this.isInVideo=!1,this.changeAdTimer=30,this.shareNeedTime=3,this.adHeight=100,this.goto_id="",this.goto_Type="",this.bannerAdId="adunit-25c483d49ee36d72",this.bannerAdList=[],this.adUnitId_video="adunit-3c89144ff69a9fbe",this.interstitialAdId="adunit-8c8c2ed58a819ed6",this.LeftAdUnitId="adunit-69b1e883c90ebf15",this.RightAdUnitId="adunit-5823b9bf96a26fc4",this.adUnitId="adunit-ad0f45ed919bf786",this.miniBannerId="adunit-3b453f4bcc32f19c",this.ShareTm=0,this.shareList=[],this.leftCreateCustomAdId="adunit-cb3c43f8deb5d37d",this.leftCreateCustomAd=null,this.loadTimes2=0,this.isShow2=!1,this.isHide2=!0,this.rightCreateCustomAdId="adunit-127ec8276fbb7392",this.rightCreateCustomAd=null,this.loadTimes3=0,this.isShow3=!1,this.isHide3=!0,this.heroId="",this.shareIconList=["myurl://games.cdn.data-eye.cn/QiShiShoot/wx_share/share1.png","myurl://games.cdn.data-eye.cn/QiShiShoot/wx_share/share2.png","myurl://games.cdn.data-eye.cn/QiShiShoot/wx_share/share3.png","myurl://games.cdn.data-eye.cn/QiShiShoot/wx_share/share4.png"],this.shareTextList=["只有1%的选手才能在这个游戏获得胜利！","超级好玩的吃鸡游戏，等你和我一起","超级刺激的吃鸡游戏~邀你参赛！","百人吃鸡作战，我才是王者！","我吃鸡贼六，上车！带你飞！"],this.sceneID=0,this.touchEnd=!1,this.InterstitialAd_error=0,this.nowShow_InterstitialAd_Time=0,this.VideoLoadOne=!0,this.UserfInfo=null,this.WorldRankData_isOn=!1,this.ShareTextList=["分享失败","换个群试试吧","换个好友试试吧","分享成功","成功邀请好友，赠送珍贵新英雄"],this.isBannerOut=!1,this.isBannerLoadEnd=!1,this.ReCreatBannerErrorTime=0,this.isVideoWin=!1,this.customAd_bool=!1,this.customAd_centre_bool=!1,this.customAd_top_grids_bool=!1,this.customAd5_bool=!1,this.customAd_bottom_grids_bool=!1,this.One_AD_grid_adUnitId="adunit-15ebb1aa78bc788f",this.multi_AD_grid_adUnitId="adunit-9c46f4b58616c6dd",this.GiredErrorTime1=2,this.GiredErrorTime2=2,this.GiredErrorTime3=2,this.GiredErrorTime4=2,this.GiredErrorTime5=2,this.isGridShowIng=!1,this.nowGridShowType=0,this.nowPos="",this.ShareNowTag=""}Init(){null==(IC.Instance=this).lanuchData&&(this.lanuchData=T.WX.getLaunchOptionsSync()),null!=this.lanuchData.query.ShareTm&&(IC.Instance.ShareTm=this.lanuchData.query.ShareTm,b.Warn("获得分享TM"+IC.Instance.ShareTm)),null!=this.lanuchData.query.ShareId&&(IC.Instance.shareId=this.lanuchData.query.ShareId,b.Warn("获得分享id"+IC.Instance.shareId,this.lanuchData.query.ShareId)),null!=this.lanuchData.query.sourceOpenid&&(this.shareOpenId=this.lanuchData.query.sourceOpenid,b.Warn("获得分享者的openid"+this.shareOpenId)),null!=this.lanuchData.query.HeroId&&(this.heroId=this.lanuchData.query.HeroId,b.Warn("获得分享者的heroId"+this.heroId)),this.lanuchData.query.release_id&&(this.goto_id=this.lanuchData.query.release_id,this.goto_Type="1"),this.GetSystemInfo(),b.Log("登录数据",this.lanuchData),this.lanuchData&&(this.sceneID=this.lanuchData.scene,b.Log("登录场景值",this.sceneID)),this.sceneID=1095,T.WX.onShow(this.OnShow),T.WX.onHide(this.OnHide),T.WX.updateShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"]}),T.WX.setKeepScreenOn({keepScreenOn:!0}),T.WX.showShareMenu(),T.WX.onShareAppMessage(function(){var e=IC.Instance.GetShareData();return{title:e.title,imageUrl:e.imageurl,query:"ShareId="+e.shareid+"&ShareTm="+A.SystemTime+"&sourceOpenid="+W.openId}}),this.LoadVideo(),this.LoadABTest(),this.Load_InterstitialAd(),this.ReCreatBanner(!1,0,"");let o=this;setInterval(function(){let e=K.UIModule().GetNowTopUIName(),t=K.DataModule().GetLocal().platform.GetBannerType(e);if(0==(t=T.IsIPhoneXScreen?K.DataModule().GetLocal().platform.GetLongBannerType(e):t))for(let t=0;t<o.bannerAdList.length;t++){let e=o.bannerAdList[t];e.bannerAd.hide(),o.updateBannerData(e.bannerId,e.bannerAd,e.isLoad,!1)}let i=K.DataModule().GetLocal().platform.GetGridType(e);0==(i=T.IsIPhoneXScreen?K.DataModule().GetLocal().platform.GetLongGridType(e):i)&&(o.isHide2||o.HideLeftCreateCustomAd(),o.isHide3||o.HideRightCreateCustomAd())},300),this.initYouzi()}abTest2(){var e;return T.WX?void 0===(e=T.WX.getExptInfoSync(["expt_1634092271"])).expt_1634092271||"0"==e.expt_1634092271?0:"1"==e.expt_1634092271?1:"2"==e.expt_1634092271?2:0:k.IsInWebTest?2:(console.error("abTest Ylplatfor.WX null"),0)}abTest1(){var e;return T.WX?void 0===(e=T.WX.getExptInfoSync(["expt_1632907681"])).expt_1632907681||"0"==e.expt_1632907681?0:"1"==e.expt_1632907681?1:"2"==e.expt_1632907681?2:0:k.IsInWebTest?2:(console.error("abTest Ylplatfor.WX null"),0)}abTest(){var e;return T.WX?void 0===(e=T.WX.getExptInfoSync(["expt_1632712809"])).expt_1632712809||"0"==e.expt_1632712809?0:"1"==e.expt_1632712809?1:"2"==e.expt_1632712809?2:"3"==e.expt_1632712809?3:0:k.IsInWebTest?2:(console.error("abTest Ylplatfor.WX null"),0)}LoadABTest(){var e=this.GetAbTest("expt_1636981509");null!=e&&""!=e&&(k.AbTest_IsMode1=e)}GetAbTest(e){var t;return T.WX?(t=T.WX.getExptInfoSync([e]),console.warn("ABTest 返回值",e,t),void 0===t[e]?"0":t[e]):k.IsInWebTest?"1":(console.error("abTest Ylplatfor.WX null"),"0")}SubscribeMessage(e){e==pa.UIName&&(j.messageId="LXBEzXMmCJAgn-YcAaZKl5SQrs277eAt9xCKVbbkAoA"),e==ng.UIName&&(j.messageId="obBXy0GWYp46Yfs_gHSclmpSPs379EQVwttU4mWgwCU"),e==xg.UIName&&(j.messageId="7ipBXb7hlV1_1QlVueCTXUI2gNNFdxUD8utcxLTPLPM");let t=this;t.touchEnd=!1,console.warn("开始订阅消息",e,j.messageId),T.WX.onTouchEnd(function(){if(!t.touchEnd){t.touchEnd=!0;let i=j.messageId;console.log("开始订阅消息end touch ... start subscribe message",i),z.Instance.LeYou_action(901),T.WX.requestSubscribeMessage({tmplIds:[i],success:function(e){z.Instance.LeYou_action(902);var t={gameId:2455,templateIds:[i],uid:W.openId};console.log("订阅成功subscribeData:",t,e),T.WX.request({url:"myurl://gw.gameley.com/gl-ms-pay/subscribe/receivemsg",method:"POST",data:t,success:function(e){console.log("发送订阅成功params:",e)},fail:function(e){console.log("发送订阅失败params:",e)}})},fail:function(e){z.Instance.LeYou_action(903),console.log("订阅失败params:",e)}})}})}getOtherData(){let e=[];e.push("onejH5RSjOF0lIGVmSCae-dAw4Kw"),(void 0)({platId:0,key:1,otherUids:e,hasDetail:0,batchNullResultHandleType:1,success:function(e){console.log("CDB getOthersData Success 上行: 下行:"+JSON.stringify(e))},fail:function(e){console.error("CDB getOthersData Fail 上行: 下行:"+JSON.stringify(e))}})}setData(e){(void 0)({platId:0,key:1,otherUid:e,value:"HeroId:LichKing,Count:1",success:function(e){console.log("CDB setOtherData Success 上行: 下行:"+JSON.stringify(e))},fail:function(e){console.error("CDB setOtherData Fail 上行: 下行:"+JSON.stringify(e))}}),(void 0)({platId:0,key:1,value:"HeroId:LichKing,Count:1",success:function(e){console.log("CDB setPrivateData Success 上行: 下行:"+JSON.stringify(e))},fail:function(e){console.error("CDB setPrivateData Fail 上行: 下行:"+JSON.stringify(e))}}),""!=this.shareOpenId&&""!=this.heroId&&IC.Instance.shareOpenId}getData(){(void 0)({platId:0,key:1,sdType:2,success:function(e){console.log("CDB GetUserData Success 上行: 下行:"+JSON.stringify(e))},fail:function(e){console.error("CDB GetUserData Fail 上行: 下行:"+JSON.stringify(e))}})}initYouzi(){yo.getInstance().initYouzi(k.appid,"1.00.00",1002),console.warn("柚子中心化平台初始化",yo.getInstance())}LoadLeftCreateCustomAd(){if(T.IS_WECHAT_PLATFORM){this.platformData.screenHeight;let e=this.platformData.screenWidth,t=e/2-300;T.IsIPhoneXScreen&&(t=e/2-300),this.leftCreateCustomAd=T.WX.createCustomAd({adUnitId:this.leftCreateCustomAdId,adIntervals:300,style:{left:t,top:70,fixed:!0}}),this.leftCreateCustomAd&&(this.leftCreateCustomAd.offLoad(this.loadcustomAd2),this.leftCreateCustomAd.onLoad(this.loadcustomAd2)),this.leftCreateCustomAd.offError(this.customAdError2),this.leftCreateCustomAd.onError(this.customAdError2),this.leftCreateCustomAd.onHide(this.customAd2OnHide)}}customAd2OnHide(){console.warn("关闭左边的模板广告"),IC.Instance.isHide2=!0}loadcustomAd2(){let e=IC.Instance;console.warn("loadcustomAd2"),e.isShow2&&e.ShowLeftCreateCustomAd()}customAdError2(){let e=IC.Instance;--e.loadTimes2,0<e.loadTimes2&&e.LoadLeftCreateCustomAd()}ShowLeftCreateCustomAd(){if(console.warn("ShowLeftCreateCustomAd",this.leftCreateCustomAd),this.leftCreateCustomAd){let e=IC.Instance;this.leftCreateCustomAd.show().then(()=>{e.isHide2=!1,console.log("左边原生模板广告显示")})}else this.loadTimes2=2,this.isShow2=!0,this.LoadLeftCreateCustomAd()}HideLeftCreateCustomAd(){this.leftCreateCustomAd&&this.leftCreateCustomAd.hide()}LoadRightCreateCustomAd(){if(T.IS_WECHAT_PLATFORM){this.platformData.screenHeight;let e=this.platformData.screenWidth,t=e/2+240;T.IsIPhoneXScreen&&(t=e/2+250),this.rightCreateCustomAd||(this.rightCreateCustomAd=T.WX.createCustomAd({adUnitId:this.rightCreateCustomAdId,adIntervals:300,style:{left:t,top:70,fixed:!0}})),this.rightCreateCustomAd&&(this.rightCreateCustomAd.offLoad(this.loadcustomAd1),this.rightCreateCustomAd.onLoad(this.loadcustomAd1)),this.rightCreateCustomAd.offError(this.customAdError1),this.rightCreateCustomAd.onError(this.customAdError1),this.rightCreateCustomAd.onHide(this.customAd1OnHide)}}customAd1OnHide(){console.warn("关闭右边的模板广告"),IC.Instance.isHide3=!0}loadcustomAd1(){let e=IC.Instance;console.warn("loadcustomAd1"),e.isShow3&&e.ShowRightCreateCustomAd()}customAdError1(){let e=IC.Instance;--e.loadTimes3,0<e.loadTimes3&&e.LoadRightCreateCustomAd()}ShowRightCreateCustomAd(){if(console.warn("ShowRightCreateCustomAd",this.rightCreateCustomAd),this.rightCreateCustomAd){let e=IC.Instance;this.isShow3=!1,this.rightCreateCustomAd.show().then(()=>{e.isHide3=!1,console.log("右边原生模板广告显示")})}else this.loadTimes3=2,this.isShow3=!0,this.LoadRightCreateCustomAd()}HideRightCreateCustomAd(){this.rightCreateCustomAd&&this.rightCreateCustomAd.hide()}Load_InterstitialAd(){this.interstitialAd=T.WX.createInterstitialAd({adUnitId:this.interstitialAdId});let t=this;this.interstitialAd.onError(e=>{console.error("插屏加载失败",e),t.InterstitialAd_error++,t.InterstitialAd_error<3&&(t.interstitialAd=T.WX.createInterstitialAd({adUnitId:this.interstitialAdId}))})}LoadConfig(){K.PlatformModule().projectID="wx_ndskqa",qt.User_GetConfig(K.PlatformModule().projectID,this,function(e){var t=e.data.Config,i=t.KeyStr,o=e.data.Base,a=o.Area;console.warn("wx GetIosConfig success:",t,i,e,o,a),i==k.wxAuditKey&&((e=t.GameAuditSwitch)&&K.DataModule().GetLocal().platform.Parse(e),console.warn("wx Use GameAuditSwitch:",K.DataModule().GetPlatform().PlatformData)),i==k.wxLineKey&&(o=t.GameLineSwitch,console.warn("wx Use config2:",o),o&&K.DataModule().GetLocal().platform.Parse(o),console.warn("wx Use GameLineSwitch:",K.DataModule().GetPlatform().PlatformData)),K.DataModule().GetPlatform().PlatformData.UseBanner&&K.PlatformModule().UseBanner(),K.DataModule().GetPlatform().PlatformData.ShowCustomAd&&K.PlatformModule().UseCustomAd()},function(e){console.warn("wx GetIosConfig Error:"+e)})}Login(){let e=Laya.LocalStorage.getItem("SaveOpenId"),t=this;null!=e&&""!=e?(W.openId=e,console.log("获取本地openID",W.openId),t.LoadLoginEnd()):ge.Instance.WX_InitUserInfo(k.appid,1,function(e){console.error("获取微信OpenID成功",e),he.Instance.SetUserID(e),W.openId=e,Laya.LocalStorage.setItem("SaveOpenId",W.openId),t.LoadLoginEnd()},function(){console.error("获取微信OpenID失败")})}GetLoginData(e){let t=this;me.User_Login(e,this,function(e){e&&e.openid&&(console.log("获取openID",e.openid),W.openId=e.openid,Laya.LocalStorage.setItem("SaveOpenId",W.openId),t.LoadLoginEnd())})}LoadVideo(){let t=this;this.videoAd=T.WX.createRewardedVideoAd({adUnitId:this.adUnitId_video}),this.videoAd.onClose(this.OnCloseWatchVideo),this.videoAd.onError(function(e){ge.Instance.Report_AD_Video_LoadFail("default",e),IC.isVideoCreationError=!0,console.log("激励视频 广告加载失败1",e),z.Instance.StatisticsEvent(aC.VideoAdFailed,this.nowPos),j.HideShortWait(),null!=IC.Instance.failFunc&&(IC.Instance.failFunc.call(this),IC.Instance.failFunc=null)}),this.videoAd.onLoad(function(e){if(t.VideoLoadOne)t.VideoLoadOne=!1;else{if(IC.isVideoCreationError=!1,""==t.adUnitId_video)return IC.isVideoCreationError=!0,void console.log("设置加载成功1");console.log("激励视频 广告加载Load1"),IC.isVideoCreationError=!1}}),this.LoadVideoAd()}LoadVideoAd(){if(""==this.adUnitId_video)return IC.isVideoCreationError=!0,void console.log("设置加载失败");ge.Instance.Report_AD_Video_Load("default"),null!=this.videoAd&&this.videoAd.load().then(()=>{}).catch(e=>{})}OnCloseWatchVideo(e){if(b.Warn("关闭广告",e,IC.Instance.nowPos),Laya.SoundManager.setMusicVolume(1),Laya.SoundManager.setSoundVolume(1),K.AudioModule().PlayMusicAgain(),e&&e.isEnded||void 0===e){if(null!=IC.Instance.watchFun){b.Warn("视频展示成功给奖励"),z.Instance.LeYou_Video(IC.Instance.nowPos,4),z.Instance.LeYou_Video(IC.Instance.nowPos,5),K.DataModule().GetUser().SetVideoCount(),ge.Instance.Report_AD_Video_Reward(IC.Instance.nowPos),z.Instance.StatisticsEvent(aC.VideoAdEnded,IC.Instance.nowPos);try{IC.Instance.watchFun.call(this),IC.Instance.watchFun=null}catch(e){console.error("视频回调错误",e)}}j.HideShortWait()}else ge.Instance.Report_AD_Video_Giveup(IC.Instance.nowPos),z.Instance.StatisticsEvent(aC.VideoAdClosed,IC.Instance.nowPos),j.HideShortWait(),null!=IC.Instance.failFunc&&(IC.Instance.failFunc.call(this),IC.Instance.failFunc=null),z.Instance.LeYou_Video(IC.Instance.nowPos,3),IC.LoadVideoIng=!0,Laya.timer.once(2e3,this,function(){try{IC.LoadVideoIng=!1}catch(e){}}),K.UIModule().ShowUI(gC.UIName)}GetlanuchData(){let e=this.lanuchData.scene,t="";var i=e+"_"+(t=this.lanuchData.referrerInfo&&this.lanuchData.referrerInfo.appId?this.lanuchData.referrerInfo.appId:t);z.Instance.StatisticsEvent(aC.LaunchScene,i,-1,"scene"),ge.Instance.Report_Login(e,this.channelId,t,this.shareOpenId,"")}CDB_loginData(){let a=IC.Instance;T.WX.login({success:e=>{let o=e.code;console.warn("开始CDB登录登录成功,",o),T.WX.getUserInfo({withCredentials:!0,lang:"ZH_CN",success:function(e){IC.Instance.UserfInfo=e,console.log("获取个人信息成功",e.userInfo,e);let t="",i=(null!=IC.Instance.UserfInfo&&(e={encryptedData:IC.Instance.UserfInfo.encryptedData,iv:IC.Instance.UserfInfo.iv},t=JSON.stringify(e)),console.warn("开始CDB登录",t),{gameId:2455,channelId:1002,platId:0,code:o,data:t,timestamps:Math.floor((new Date).valueOf()/1e3).toString(),success:function(e){console.log("CDB login Success 上行:"+JSON.stringify(i)+" 下行:"+JSON.stringify(e)),IC.Instance.WorldRankData_isOn=!0;let t=e.info.uid;console.log("登录cdb",e,t),a.setData(t.toString()),j.ShowShortWait(),IC.Instance.CDB_getRankListData(function(e){j.HideShortWait(),K.UIModule().GetUI(_C.UIName).SetInfoLoad(e)})},fail:function(e){console.error("CDB login Fail 上行:"+JSON.stringify(i)+" 下行:"+JSON.stringify(e))}});(void 0)(i)},fail:function(e){},complete:function(e){}})},fail:e=>{console.log("登录login",e)}})}CDB_setWorldRankData(e){console.log("存储排行",e),(void 0)({key:1,score:e,success:function(e){console.log("存储自己的数据",e)},fail:function(e){console.log("err  setWorldRankData",e)}})}CDB_getUserData(){(void 0)({key:"",sdType:0,success:function(e){console.log("返回自己的数据",e)},fail:function(e){console.log("err_CDB_getUserData",e)}})}CDB_getRankListData(t){console.log("请求排行"),(void 0)({key:1,hasDetail:1,success:function(e){console.log("返回成功的数据世界",e),null!=t&&t(e)},fail:function(e){console.log("err  CDB_getRankListData",e)}})}CDB_getMyRankData(t){(void 0)({key:1,sortType:0,hasDetail:1,success:function(e){null!=t&&t(e),console.log("返回成功的数据我",e)},fail:function(e){console.log("err  getMyRankData",e)}})}ShareSucceed(){var e;IC.isVideoCreationError&&(e=parseInt(Laya.LocalStorage.getItem("VideoErrorShareTime")),Laya.LocalStorage.setItem("VideoErrorShareTime",(e+1).toString()))}GetVideoErrorShareTime2(){if(!IC.isVideoErrorShareTime)return!0;let e=Laya.LocalStorage.getItem("VideoErrorShareTime");return null!=e&&""!=e&&"NaN"!=e||(e="0"),!(parseInt(e)>K.PlatformModule().PlatformSettingData().VideoErrorShareTime)}GetShareData(){var e=IC.Instance.shareList;return e.length<1?{imageurl:this.shareIconList[Math.floor(Math.random()*this.shareIconList.length)],shareid:0,templateId:"",title:this.shareTextList[Math.floor(Math.random()*this.shareTextList.length)]}:e[f.GetF1_F2RandomValue(0,e.length-1)]}IsShareEnter(){""!=IC.Instance.shareOpenId&&me.User_clickShare(this,function(e){console.log("分享进入",e)})}LoadLoginEnd(){Laya.timer.loop(3e4,this,function(){try{let e=this.lanuchData.scene,t="";this.lanuchData.referrerInfo&&this.lanuchData.referrerInfo.appId&&(t=this.lanuchData.referrerInfo.appId);var i=e+"_"+t;z.Instance.StatisticsEvent(aC.onlinetime,i,30,"scene")}catch(e){}}),le.Instance.SetSystemInfo(this.systemData),ge.Instance.InitUserInfo(W.openId),le.Instance.SetUserID(W.openId),z.Instance.StatisticsEvent(aC.GotOpenId),me.User_ReqLogin(this,function(e){k.isTestLog&&console.log("逻辑登录成功",e),e&&e.data?(W.uuid=e.data.userId,SC.GetOpenIdEnd(),z.Instance.User_ReqShareStrategy(),A.SetSystemTime(e.data.timestamp)):A.SetSystemTime((new Date).getTime())},function(){})}GetChanleId(){return this.channelId}GameLoopBtnHide(){k.IsInWebTest||null!=this.GameLoopBtn&&this.GameLoopBtn.hide()}GameLoopBtnShow(){k.IsInWebTest||null!=this.GameLoopBtn&&this.GameLoopBtn.show()}CreateGameLoopBtn(){let e=0,t=this.systemData;null!=t&&2<t.screenHeight/t.screenWidth&&(e=20),this.GameLoopBtn=T.WX.createGameClubButton({style:{left:20,top:IC.Instance.platformData.windowHeight/7-40+e,width:40,height:43},image:"res/Image/GameLoopBg.png",icon:"light"})}OnShow(e){var t;b.Warn("开始显示",e),IC.Instance.useFakeShare&&IC.Instance.useShareCallBack&&(t=Math.floor((f.GetNewTime()-IC.Instance.hideTimestamp)/1e3),k.isTestLog&&b.Warn("假邀请间隔",t,IC.Instance.shareNeedTime),k.isTestLog&&console.warn("分享判断开始",IC.Instance.isShareCancel),t>IC.Instance.shareNeedTime&&!IC.Instance.isShareCancel?null!=IC.Instance.shareOKFun&&(IC.Instance.shareOKFun.call(this),IC.Instance.ShareSucceed(),IC.Instance.shareOKFun=null):(t=IC.Instance.ShareTextList[f.GetF1_F2RandomValue(0,IC.Instance.ShareTextList.length-1)],K.DataModule().GetPlatform().PlatformData.UseShare&&T.WX.showModal({title:"提示",content:t,cancelText:"取消",confirmText:"去分享",success(e){e.confirm?IC.Instance.WeChat_ShareAgain():e.cancel&&null!=IC.Instance.shareNOFun&&(IC.Instance.shareNOFun.call(this),IC.Instance.shareNOFun=null)}})));try{Laya.SoundManager.setMusicVolume(1),Laya.SoundManager.setSoundVolume(1),K.AudioModule().PlayMusicAgain()}catch(e){console.log("分成错误",e)}IC.Instance.useShareCallBack=!1}OnHide(){}GetSystemInfo(){let t=this;T.WX.getSystemInfo({success:function(e){b.Log("设备信息",e),t.systemData=e,t.sDKVersion=e.SDKVersion,t.system=e.system,b.Warn("屏幕比例",t.platformData.screenRatio,t.system),t.platformData.windowWidth=e.windowWidth,t.platformData.windowHeight=e.windowHeight,t.platformData.screenWidth=e.screenWidth,t.platformData.screenHeight=e.screenHeight,t.platformData.system=e.system,t.platformData.screenRatio=t.platformData.windowHeight/t.platformData.windowWidth,t.adHeight=.15*t.platformData.windowHeight*(t.platformData.windowHeight/t.platformData.windowWidth/(960/540)),b.Warn("屏幕比例",t.platformData.screenRatio,K.PlatformModule().GetPlatformData().system)}})}GetSystem(){return this.system}BannerErrorAgain(e=!1,t,i){try{this.ReCreatBannerErrorTime++,console.warn("重试拉取次数",this.ReCreatBannerErrorTime),this.ReCreatBanner(e,t,i)}catch(e){}}ReCreatBanner(t=!1,a,n){let s=this,e=s.platformData.windowHeight-100,l=s.platformData.windowWidth,r=(300<l&&(l=300),(s.platformData.windowWidth-l)/2),h=this.getBannerId(a,n);if(1==a?r=T.IsIPhoneXScreen?100:10:2==a&&(r=s.platformData.windowWidth-320),this.bannerAdList.filter(e=>e.bannerId==h&&1==e.isLoad).length<=0){this.bannerAdList=this.bannerAdList.filter(e=>e.bannerId!=h||0==e.isLoad);let i=T.WX.createBannerAd({adUnitId:h,adIntervals:30,style:{left:r,top:e,width:l,height:50}}),o=(this.bannerAdList.push({bannerId:h,bannerAd:i,isShow:!1,isLoad:!1}),i.offError(),i.onError(function(e){b.Erro(e),s.ReCreatBannerErrorTime<3&&Laya.timer.once(1e3,s,function(){s.BannerErrorAgain(t,a,n)})}),!1);i.offLoad(),i.onLoad(function(e){let t=1;T.IsIPhoneXScreen&&(t=10),console.warn("banner加载成功"),ge.Instance.Report_AD_Banner_LoadSucc("Default"),o=!0,s.updateBannerData(h,i,!0,!1),i.style.top=s.platformData.windowHeight-i.style.realHeight-t,i.style.left=0==a?(s.platformData.windowWidth-i.style.realWidth)/2:r}),null!=i&&(t?(s.updateBannerData(h,i,o,!0),i.show()):(s.updateBannerData(h,i,o,!1),i.hide()))}}updateBannerData(t,i,o,a){var n=this.bannerAdList.filter(e=>e.bannerId==t);if(0<n.length){let e=n[0];e.bannerAd=i,e.bannerId=t,e.isShow=a,e.isLoad=o,this.bannerAdList=this.bannerAdList.filter(e=>e.bannerId!=t),this.bannerAdList.push(e)}}BannerAd_IsMove(){}BannerAd_IsShow(){let e=!0,t=K.UIModule().GetNowTopUIName(),i=z.Instance.GameConfig;return null==i&&(i=new hC),e=t==Ho.UIName&&0==i.NoGoldShowBanner?!1:e}BannerAdShow(e,t,i){b.Warn("展示广告",this.isBannerLoadEnd);let o=this,a=this.getBannerId(t,i),n=this.bannerAdList.filter(e=>e.bannerId==a);if(0<n.length){let e=n[0];null!=e.bannerAd&&e.isLoad?(e.bannerAd.show(),this.updateBannerData(e.bannerId,e.bannerAd,e.isLoad,!0)):(Laya.timer.clear(this,function(){o.BannerErrorAgain(!0,t,i)}),this.ReCreatBannerErrorTime=0,this.ReCreatBanner(!0,t,i),console.log("重新拉取广告",this.isBannerLoadEnd))}else this.ReCreatBanner(!0,t,i)}getBannerId(e,t){return 0==e?this.adUnitId:1==e?this.LeftAdUnitId:this.RightAdUnitId}BannerAdHide(){for(let t=0;t<this.bannerAdList.length;t++){let e=this.bannerAdList[t];b.Warn("关闭广告",e),e.isShow&&(e.bannerAd.hide(),this.updateBannerData(e.bannerId,e.bannerAd,e.isLoad,!1))}}BannerAd_up_Show(e=0,t=0){null!=this.bannerAd_up&&(this.bannerAd_up.style.top=this.bannerAd_up_top+e,this.bannerAd_up.show(),0<t&&Laya.timer.once(t,this,function(){IC.Instance.BannerAd_up_Hide()}))}BannerAd_up_Hide(){null!=this.bannerAd_up&&this.bannerAd_up.hide()}gridError1(e){let t=IC.Instance;t.GiredErrorTime1--,t.customAd_bool||(0<t.GiredErrorTime1&&t.AD_grid1(),console.log("grid1初始化失败",e))}gridLoad1(e){console.log("grid1初始化成功",e),ge.Instance.Report_AD_Custom_LoadSucc("grid1");let t=IC.Instance;t.customAd_bool=!0,t.customAd&&t.isGridShowIng&&0==t.nowGridShowType&&t.customAd.show()}gridError2(e){let t=IC.Instance;t.customAd_centre_bool||(t.GiredErrorTime2--,0<t.GiredErrorTime2&&t.AD_grid2(!1),console.log("grid2初始化失败",e))}gridLoad2(e){ge.Instance.Report_AD_Custom_LoadSucc("grid2");let t=IC.Instance;console.log("grid2初始化成功",e),t.customAd_centre_bool=!0,t.customAd_centre&&(console.log("grid2初始化成功",e),t.isGridShowIng&&1==t.nowGridShowType&&t.customAd_centre.show())}gridError3(e){let t=IC.Instance;t.customAd_top_grids_bool||(t.GiredErrorTime3--,0<t.GiredErrorTime3&&t.AD_grid3(!1),console.log("grid3初始化失败",e))}gridLoad3(e){ge.Instance.Report_AD_Custom_LoadSucc("grid3");let t=IC.Instance;console.log("grid3初始化成功",e),t.customAd_top_grids_bool=!0,t.customAd_top_grids&&t.isGridShowIng&&3==t.nowGridShowType&&t.customAd_top_grids.show()}gridError4(e){let t=IC.Instance;t.customAd_bottom_grids_bool||(t.GiredErrorTime4--,0<t.GiredErrorTime4&&t.AD_grid4(!1),console.log("grid4初始化失败",e))}gridLoad4(e){ge.Instance.Report_AD_Custom_LoadSucc("grid4");let t=IC.Instance;console.log("grid4初始化成功",e),t.customAd_bottom_grids_bool=!0,t.customAd_bottom_grids&&t.isGridShowIng&&4==t.nowGridShowType&&t.customAd_bottom_grids.show()}gridError5(e){let t=IC.Instance;t.customAd5_bool||(t.GiredErrorTime5--,0<t.GiredErrorTime5&&t.AD_grid5(!1),console.log("grid5初始化失败",e))}gridLoad5(e){ge.Instance.Report_AD_Custom_LoadSucc("grid5");let t=IC.Instance;console.log("grid5初始化成功",e),t.customAd5_bool=!0,t.customAd5&&t.isGridShowIng&&5==t.nowGridShowType&&t.customAd5.show()}AD_grid1(e=0){let t=43;T.IsIPhoneXScreen&&(t=67),this.customAd=T.WX.createCustomAd({adUnitId:this.One_AD_grid_adUnitId,adIntervals:0,style:{left:25,top:t,fixed:!1}}),this.customAd.offError(this.gridError1),this.customAd.onError(this.gridError1),this.customAd.offLoad(this.gridLoad1),this.customAd.onLoad(this.gridLoad1)}AD_grid2(e){let t=this.platformData.screenWidth,i=this.platformData.screenHeight,o=t-65,a=i/2-80;T.IsIPhoneXScreen&&(a=i/2-100),this.customAd_centre=T.WX.createCustomAd({adUnitId:this.One_AD_grid_adUnitId,adIntervals:0,style:{left:o,top:a,fixed:!1}}),this.customAd_centre.offError(this.gridError2),this.customAd_centre.onError(this.gridError2),this.customAd_centre.offLoad(this.gridLoad2),this.customAd_centre.onLoad(this.gridLoad2)}AD_grid3(e){let t=this.platformData.screenWidth,i=(this.platformData.screenHeight,(t-288)/2),o=40;T.IsIPhoneXScreen&&(o=100),this.customAd_top_grids=T.WX.createCustomAd({adUnitId:this.multi_AD_grid_adUnitId,adIntervals:0,style:{left:i,top:o,fixed:!1}}),this.customAd_top_grids.offError(this.gridError3),this.customAd_top_grids.onError(this.gridError3),this.customAd_top_grids.offLoad(this.gridLoad3),this.customAd_top_grids.onLoad(this.gridLoad3)}AD_grid4(e){var t=this.platformData.screenWidth,i=this.platformData.screenHeight;T.IsIPhoneXScreen&&(this.customAd_bottom_grids=T.WX.createCustomAd({adUnitId:this.multi_AD_grid_adUnitId,adIntervals:0,style:{left:(t-288)/2,top:i-85-10,fixed:!1}}),this.customAd_bottom_grids.offError(this.gridError4),this.customAd_bottom_grids.onError(this.gridError4),this.customAd_bottom_grids.offLoad(this.gridLoad4),this.customAd_bottom_grids.onLoad(this.gridLoad4))}AD_grid5(e){this.platformData.screenWidth,this.platformData.screenHeight;let t=this.platformData.windowHeight/2-100;T.IsIPhoneXScreen&&(t=this.platformData.windowHeight/2-120),this.customAd5=T.WX.createCustomAd({adUnitId:this.One_AD_grid_adUnitId,adIntervals:0,style:{left:45,top:t,fixed:!1}}),this.customAd5.offError(this.gridError5),this.customAd5.onError(this.gridError5),this.customAd5.offLoad(this.gridLoad5),this.customAd5.onLoad(this.gridLoad5)}GameConfig_Grid(e){let t=K.UIModule().GetNowTopUIName(),i=z.Instance.GameConfig;var o=(i=null==i?new hC:i).BoxBannerSwitch;if("0"==o)return-1;let a=e;return t==pa.UIName?("1"==o&&(a=0),"2"==o&&(a=3)):t==Zg.UIName?("1"==o&&(a=1),"2"==o&&(a=4,T.IsIPhoneXScreen||(a=1))):t==Bf.UIName&&("1"==o&&(a=0),"2"==o&&(a=3)),a}protogenesis_Grid_Show(i){if(T.WX.createCustomAd)try{this.protogenesis_Grid_Hide();let e=Laya.LocalStorage.getItem("loadAdBtnInfo"),t=i;if("true"==e||-1!=(t=this.GameConfig_Grid(i))){console.log("显示格子",i),this.nowGridShowType=t,this.isGridShowIng=!0;if(t<2?t:t,0==t){if(!this.customAd_bool)return this.GiredErrorTime1=2,void this.AD_grid1(!0);this.customAd&&this.customAd.show()}else if(1==t){if(!this.customAd_centre_bool)return this.GiredErrorTime2=2,void this.AD_grid2(!0);this.customAd_centre&&this.customAd_centre.show()}else if(3==t){if(!this.customAd_top_grids_bool)return this.GiredErrorTime3=2,void this.AD_grid3(!0);this.customAd_top_grids&&this.customAd_top_grids.show()}else if(4==t){if(!this.customAd_bottom_grids_bool)return this.GiredErrorTime4=2,void this.AD_grid4(!0);this.customAd_bottom_grids&&this.customAd_bottom_grids.show()}else if(5==t){if(!this.customAd5_bool)return this.GiredErrorTime5=2,void this.AD_grid5(!0);this.customAd5&&this.customAd5.show()}}}catch(i){console.error(i),le.Instance.Error("显示格子时出错","Error",!0)}}protogenesis_Grid_Hide(){this.isGridShowIng=!1,this.customAdHide(),this.customAd_centreHide(),this.customAd_top_gridsHide(),this.customAd_bottom_gridsHide(),this.customAd5Hide()}customAd5Hide(){this.customAd5&&this.customAd5_bool&&this.customAd5.hide()}customAd_bottom_gridsHide(){this.customAd_bottom_grids&&this.customAd_bottom_grids_bool&&this.customAd_bottom_grids.hide()}customAd_top_gridsHide(){this.customAd_top_grids&&this.customAd_top_grids_bool&&this.customAd_top_grids.hide()}customAd_centreHide(){this.customAd_centre&&this.customAd_centre_bool&&this.customAd_centre.hide()}customAdHide(){this.customAd&&this.customAd_bool&&this.customAd.hide()}WatchVideo(e,t,i,o){this.nowPos=t,this.failFunc=o,this.watchFun=e,console.warn("开启看视频",t);let a=this;j.ShowShortWait(),IC.isVideoCreationError?(Laya.SoundManager.setMusicVolume(1),Laya.SoundManager.setSoundVolume(1),K.AudioModule().PlayMusicAgain(),null!=IC.Instance.failFunc&&(IC.Instance.failFunc.call(this),IC.Instance.failFunc=null),z.Instance.StatisticsEvent(aC.VideoAdFailed,t),j.HideShortWait(),K.PlatformModule().PlatformSettingData().UseShare&&(this.GetVideoErrorShareTime2()?j.GetRewardBtnFun(1,IC.Instance.watchFun,t,IC.Instance.failFunc):(z.Instance.LeYou_Video(IC.Instance.nowPos,6),j.TopUI_TipShow("暂无视频广告,请稍后再试")))):(ge.Instance.Report_AD_Video_Play(IC.Instance.nowPos),z.Instance.StatisticsEvent(aC.TryPlayVideoAd,t),IC.LoadVideoIng?Laya.timer.once(1500,this,function(){try{Laya.SoundManager.setMusicVolume(0),Laya.SoundManager.setSoundVolume(0),K.AudioModule().StopMusic(),a.videoAd.show(),a.LoadVideoAd()}catch(e){console.log("视频出了点问题")}}):(Laya.SoundManager.setMusicVolume(0),Laya.SoundManager.setSoundVolume(0),K.AudioModule().StopMusic(),this.videoAd.show(),this.LoadVideoAd()),z.Instance.StatisticsEvent(aC.VideoAdSuccess,t))}WX_createUserInfoButton(t,i){let o=T.WX.createUserInfoButton({type:"image",image:"Images/GameLoopBg.png",style:{left:0,top:0,width:this.platformData.windowWidth,height:this.platformData.windowHeight,lineHeight:40,backgroundColor:"#ffffff",color:"#ffffff",textAlign:"center",fontSize:16,borderRadius:4}});o.onTap(e=>{o.destroy(),b.Warn(e),null!=e.userInfo?(i.call(t,e.userInfo.nickName,e.userInfo.avatarUrl),this.playerName=e.userInfo.nickName,this.playerIcon=e.userInfo.avatarUrl):i.call(t,"","")})}ShareBase(e,t){IC.isVideoCreationError&&this.LoadVideoAd(),this.ShareNowTag!=z.Instance.nowTag&&(this.ShareNowTag=z.Instance.nowTag,IC.ShareTime=0),IC.Instance.shareNeedTime=Math.floor(2*Math.random())+2,b.Warn("隐藏时间",A.SystemTime),IC.Instance.hideTimestamp=f.GetNewTime(),IC.Instance.shareFunSave=e,this.useFakeShare&&(this.useShareCallBack=!0,this.shareOKFun=e,this.shareNOFun=t);t=IC.Instance.GetShareData();me.User_reqBeginShare(t,this,null),T.WX.shareAppMessage({title:t.title,imageUrl:t.imageurl,query:"ShareId="+t.shareid+"&ShareTm="+A.SystemTime+"&sourceOpenid="+W.openId,success:e=>{b.Warn("分享成功",e)},fail:e=>{b.Warn("分享失败",e)},cancel:e=>{b.Warn("取消分享",e),i.isShareCancel=!0}});let i=this;this.isShareCancel=!1,this.useFakeShare&&(this.useShareCallBack=!0,this.shareOKFun=e)}Shard(e,t,i=""){IC.Instance.shareNeedTime=Math.floor(2*Math.random())+2,b.Warn("隐藏时间",A.SystemTime),IC.Instance.hideTimestamp=f.GetNewTime(),IC.Instance.shareFunSave=e,this.useFakeShare&&(this.useShareCallBack=!0,this.shareOKFun=e,this.shareNOFun=t);t=IC.Instance.GetShareData();T.WX.shareAppMessage({title:t.title,imageUrl:t.imageurl,query:"ShareId="+t.shareid+"&ShareTm="+A.SystemTime+"&sourceOpenid="+W.openId+"&HeroId="+i,success:e=>{b.Warn("分享成功",e)},fail:e=>{b.Warn("分享失败",e)},cancel:e=>{b.Warn("取消分享",e),o.isShareCancel=!0}});let o=this;this.isShareCancel=!1,this.useFakeShare&&(this.useShareCallBack=!0,this.shareOKFun=e)}CustomerService(){T.WX.openCustomerServiceConversation({})}VibrateShort(){T.WX.vibrateShort()}NavigateToMiniProgram(e,t,i,o){if(T.IS_WECHAT_PLATFORM){b.Warn("跳转到"+t+i);let e=this;T.WX.navigateToMiniProgram({appId:t,path:i,envVersion:"release",success(){b.Warn("跳转成功"),null!=o&&o.call(e)},fail(e){b.Warn("跳转失败",e)}})}else b.Warn("跳转成功"),null!=o&&o.call(self)}ReCreatBannerUp(e=!1,t){let i=this,o=i.platformData.windowHeight-100,a=i.platformData.windowWidth;400<a&&(a=400);var n=(i.platformData.windowWidth-a)/2;null!=this.bannerAd_up&&this.bannerAd_up.destroy(),this.bannerAd_up=T.WX.createBannerAd({adUnitId:i.LeftAdUnitId,style:{left:n,top:o,width:a,height:50}}),this.bannerAd_up.offError(),this.bannerAd_up.onError(function(e){b.Erro(e),i.ReCreatBannerErrorTime<3&&Laya.timer.once(1e3,i,function(){i.BannerErrorAgain(!1,1,t)})}),this.bannerAd_up.offLoad(),this.bannerAd_up.onLoad(function(e){let t=1;T.IsIPhoneXScreen&&(t=10),console.warn("banner加载成功"),ge.Instance.Report_AD_Banner_LoadSucc("Default"),i.isBannerLoadEnd=!0,i.bannerAd_up.style.top=i.platformData.windowHeight-i.bannerAd_up.style.realHeight-t,i.bannerAd_up.style.left=(i.platformData.windowWidth-i.bannerAd_up.style.realWidth)/2,i.bannerAd_up_top=i.bannerAd_up.style.top}),null!=this.bannerAd_up&&(e?this.bannerAd_up.show():this.bannerAd_up.hide())}WeChat_ShareAgain(){IC.Instance.shareNeedTime=Math.floor(2*Math.random())+2,IC.Instance.ShareBase(IC.Instance.shareFunSave,IC.Instance.shareNOFun)}WeChat_VideoAgain(){IC.Instance.WatchVideo(IC.Instance.watchFun,IC.Instance.nowPos,null,IC.Instance.failFunc)}ShowInterstitialAd(){console.log("显示插屏广告");try{null!=this.interstitialAd&&this.interstitialAd.show().catch(e=>{Laya.LocalStorage.setItem("ShowInterstitialTime",IC.Instance.nowShow_InterstitialAd_Time.toString())})}catch(e){}}}),CC=IC,GC=(CC.LoadVideoIng=!1,CC.isVideoCreationError=!1,CC.NowIsWinAndFail=!0,CC.isVideoErrorShareTime=!0,CC.ShareTime=0,class{static GetTime(){A.SetSystemTime((new Date).getTime())}static GameBattleStart(){var e;k.IsInWebTest||(e=K.DataModule().GetUser().GetData(),V.InGameTime=0,k.Platform!=T.QQ&&k.Platform!=T.WECHAT||ge.Instance.Report_Level_Start("Level_"+e.userMedal.level))}static GameBattleEnd(e){var t;k.IsInWebTest||(t=Math.round(1e3*V.InGameTime),k.Platform!=T.QQ&&k.Platform!=T.WECHAT||ge.Instance.Report_Level_End("Level_"+K.DataModule().GetUser().GetData().userMedal.level,e,t,0))}static GetOpenIdEnd(){if(!k.IsInWebTest&&(GC.UserDateEnd&&GC.EndOpenIdAndUserData(),Laya.LocalStorage.setItem("saveOpenId",W.openId),k.Platform==T.QQ&&ge.Instance.InitUserInfo(W.openId),jC.GetIsIoGamesSavePlatform()))if(console.log("当前openID",W.openId),le.Instance.SetUserID(W.openId),he.Instance.SetUserID(W.openId),k.Platform!=T.TT&&k.Platform!=T.KUAISHOU){var e=Laya.LocalStorage.getItem("NewUserData"),t=Laya.LocalStorage.getItem("NewUserDataTT");"true"!=e&&"true"!=t||this.GetSaveUserData()}else{let o=this;me.User_IOG_AuthorityQuery(this,function(e){if(console.log("是否超级账号数据",e),e&&1==e.status&&e.data){let t=e.data,i=!1;console.log("是否超级账号数据2",e);for(let e=0;e<t.length;e++)"SuperAccount"==t[e].AuthorityID&&(i=!0,W.isSuperAccount=!0,k.IsFreeVideo=!0,W.userData_saveData=t[e].AuthorityData,o.Save_Refresh(),Laya.timer.loop(1e3,o,o.Save_Refresh));i||o.GetSaveUserData()}else try{le.Instance.Warn(JSON.stringify(e),"查询账号权限返回错误！",!0)}catch(e){console.warn(e)}},function(e){try{le.Instance.Warn(JSON.stringify(e),"查询账号权限出错！",!0)}catch(e){console.warn(e)}})}}static Save_Refresh(){W.statrGame&&(Laya.timer.clear(this,this.Save_Refresh),K.DataModule().GetUser().SetUserDataSave(W.userData_saveData))}static GetSaveUserData(){console.log("读取玩家数据请求"),W.isSuperAccount||GC.IsSetSave&&(GC.IsSetSaveEnd=!0,me.User_reqGetUser(this,function(e){W.isSuperAccount||(W.loginDataEnd=!0,W.userData_saveData=e.data.data,console.log("读取玩家数据成功",e))}))}static EndOpenIdAndUserData(){no.Statistics_T0F()}static UpNetData(){if(k.IsInWebTest)return K.PlatformModule().isLoadConfigOk=!0,K.DataModule().GetPlatform().PlatformData.HouseAd=!0,void(K.DataModule().GetLocal().platform.PlatformData.InGameAd=!0);k.Platform==T.WECHAT&&(ge.Instance.IsNeedReport_SystemInfo()&&ge.Instance.WX_Report_SystemInfo(CC.Instance.systemData),CC.Instance.GetlanuchData(),CC.Instance.IsShareEnter(),me.User_reqFenxiang(this,function(e){console.log("获取分享图",e),e&&e.data&&(CC.Instance.shareList=e.data)})),z.Instance.ChuanQuStatistics(40005);let e=new Date;var t,i;k.Platform==T.TT?(t=e.getDate(),i=e.getMonth(),(2021<e.getFullYear()||4<=i||3<=i&&18<t)&&(k.use2021NewYear=!1)):(2021<e.getFullYear()&&(k.use2021NewYear=!1),0<e.getMonth()&&(k.use2021NewYear=!1)),eg.gt_init_info()}static SetUserDataLoadEnd(){""!=W.openId&&GC.EndOpenIdAndUserData();let t=K.DataModule().GetUser().GetData();if(null==t.dialTime&&(K.DataModule().GetUser().GetData().dialTime=1),null==t.offLineTime&&(K.DataModule().GetUser().GetData().offLineTime=0),null==t.huoyue&&(K.DataModule().GetUser().GetData().huoyue=0),null==t.loginDay&&(K.DataModule().GetUser().GetData().loginDay=0),null==t.loginTimes&&(K.DataModule().GetUser().GetData().loginTimes=0),null==t.videoCount&&(K.DataModule().GetUser().GetData().videoCount=0),null==t.gameTime&&(K.DataModule().GetUser().GetData().gameTime=0),null==t.lastUpTime&&(K.DataModule().GetUser().GetData().lastUpTime=0),null==t.liveness&&(K.DataModule().GetUser().GetData().liveness=0),null==t.ZomBattleInfo&&(d={totalCount:0,MaxDay:0,killCount:0},K.DataModule().GetUser().GetData().ZomBattleInfo=d),null==t.userMedalMax&&(d={level:K.DataModule().GetUser().GetData().userMedal.level,star:K.DataModule().GetUser().GetData().userMedal.star,hasGetRewardLevel:[]},K.DataModule().GetUser().GetData().userMedalMax=d),null==t.signNewYearData){let t={nowDay:1,data:[]};for(let e=1;e<=7;e++)t.data.push({day:e+1,isSign:!1});K.DataModule().GetUser().GetData().signNewYearData=t}if(null==t.SkillUnlockList){K.DataModule().GetUser().GetData().SkillUnlockList=[];var i,e=K.DataModule().GetUser().GetData().userMedal.level;for(let t=1;t<=e;t++){let e=K.DataModule().GetLocal().playerLv.Get(t.toString());e&&(-1!=e.LevelReward[0].indexOf(Z.Skill)&&(i=K.DataModule().GetUser().GetUserItemData(e.LevelReward[0]),K.DataModule().GetUser().GetItem([i],"")),-1!=e.VideoReward[0].indexOf(Z.Skill)&&(i=K.DataModule().GetUser().GetUserItemData(e.VideoReward[0]),K.DataModule().GetUser().GetItem([i],"")))}}try{if(t.ZombieUnlockItemList.length<=0){let t=[];K.DataModule().GetLocal().item.GetZombieUnlockItemList(0).forEach(e=>{t.push(e.ItemID)}),K.DataModule().GetUser().GetData().ZombieUnlockItemList=t}else{var o=K.DataModule().GetLocal().item.GetZombieUnlockItemList(0);for(let e=0;e<o.length;e++){var a=o[e];-1==t.ZombieUnlockItemList.indexOf(a.ItemID)&&K.DataModule().GetUser().GetData().ZombieUnlockItemList.push(a.ItemID)}}if(t.ZombieUnlockZMpassiveSkills.length<=0){let t=[];K.DataModule().GetLocal().zModePassiveSkill.GetUnlockZmPassiveSkill(0).forEach(e=>{t.push(e.SkillID)}),K.DataModule().GetUser().GetData().ZombieUnlockZMpassiveSkills=t}else{var n=K.DataModule().GetLocal().zModePassiveSkill.GetUnlockZmPassiveSkill(0);for(let e=0;e<n.length;e++){var s=n[e];-1==t.ZombieUnlockZMpassiveSkills.indexOf(s.SkillID)&&K.DataModule().GetUser().GetData().ZombieUnlockZMpassiveSkills.push(s.SkillID)}}}catch(l){if(t.ZombieUnlockItemList=[],t.ZombieUnlockZMpassiveSkills=[],t.ZombieUnlockItemList.length<=0){let t=[];K.DataModule().GetLocal().item.GetZombieUnlockItemList(0).forEach(e=>{t.push(e.ItemID)}),K.DataModule().GetUser().GetData().ZombieUnlockItemList=t}if(t.ZombieUnlockZMpassiveSkills.length<=0){let t=[];K.DataModule().GetLocal().zModePassiveSkill.GetUnlockZmPassiveSkill(0).forEach(e=>{t.push(e.SkillID)}),K.DataModule().GetUser().GetData().ZombieUnlockZMpassiveSkills=t}}K.DataModule().GetUser().GetData().loginTimes+=1,"YouyuGirl"==t.nowChooseHero&&(t.nowChooseHero="Farmer"),K.DataModule().GetUser().TomorrowRefresh(),1<t.treasureItemList.length&&(t.treasureItemList.length<=5||"Box"==t.treasureItemList[3].data.type)&&(console.error("老玩家强制刷新",t.treasureItemList),K.DataModule().GetUser().GetData().treasureItemList=[],K.DataModule().GetUser().RefreshTreasureShop(!0)),GC.UserDateEnd=!0,K.DataModule().GetUser().IsFreeVideo()?k.IsFreeVideo=!0:k.IsFreeVideo=!1,null==K.DataModule().GetUser().GetSaveKey("login")&&K.DataModule().GetLocal().quest.LoadTaskInfo();let l=K.DataModule().GetUser().GetData().itemList;for(let e=0;e<l.length;e++){let i=l[e];if(""==l[e].data||-1==l[e].data.indexOf("LifeLeechPer")&&-1==l[e].data.indexOf("Heal")||(-1!=l[e].data.indexOf("LifeLeechPer")&&(K.DataModule().GetUser().GetData().itemList[e].data=f.StringReplace(l[e].data,"LifeLeechPer","Intelligency")),-1!=l[e].data.indexOf("Heal")&&(K.DataModule().GetUser().GetData().itemList[e].data=f.StringReplace(l[e].data,"Heal","SuperLevelUp"))),(i.type==Z.Head||i.type==Z.Chest||i.type==Z.Foot||i.type==Z.Ring)&&""!=i.data){let t=i.data.split(",");for(let e=0;e<t.length;e++){var r=t[e].split("_");if(3<=r.length&&"Skill"==r[0]){r=r[1];if(null==K.DataModule().GetLocal().skill.Get(r)){K.DataModule().GetUser().GetProp_UserItemData(i);break}}}}}let h=K.DataModule().GetUser(),m=h.GetData().equipList;for(let e=0;e<m.length;e++)null==h.GetItemByID(m[e])&&(h.GetData().equipList[e]="");if(null==t.coin||"NaN"==t.coin){let e=K.DataModule().GetUser().GetData().mergeLevel,t=e-2;t<1&&(t=1);var d=Number(K.DataModule().GetLocal().weapon.GetPrice(t))*(1-.01*e)*2;K.DataModule().GetUser().GetData().coin=Y.jia("0",d)}K.DataModule().GetUser().SaveData()}static AddOnlineTime(e){k.isTestLog&&console.log("统计在线时间",e);try{if(!K.DataModule().GetUser().GetData())return;if(K.DataModule().GetUser().GetData().gameTime+=e,K.DataModule().GetUser().SaveData(),k.IsInWebTest||""==W.openId)return;no.Statistics_T02(e),k.Platform!=T.WECHAT&&k.Platform!=T.QQ||z.Instance.IoGameSDK_up()}catch(e){console.log("时长",e)}}static CoverUI_Show(){k.IsInWebTest||k.Platform==T.WECHAT&&(k.Platform,T.WECHAT)}static CoverUI_Hide(){k.IsInWebTest||(K.UIModule().HideUI(cg.UIName),k.Platform==T.WECHAT&&CC.Instance.GameLoopBtnHide())}static CoverUI_update(){k.IsInWebTest||k.Platform!=T.WECHAT||(K.UIModule().GetNowTopUIName()==Zg.UIName?CC.Instance.GameLoopBtnShow():CC.Instance.GameLoopBtnHide())}static TomorrowRefresh(){if(!k.IsInWebTest){if(k.Platform==T.WECHAT){var t=Object.keys(sC);for(let e=0;e<t.length;e++){var i=sC[t[e]];Laya.LocalStorage.setItem(i+"ShareCount","0"),Laya.LocalStorage.setItem(i+"VideoCount","0"),Laya.LocalStorage.setItem("DayShareStrategy",A.GetNowDay().toString())}Laya.LocalStorage.setItem("VideoErrorShareTime","0"),Laya.LocalStorage.setItem("ShowInterstitialTime","0")}k.Platform!=T.TT&&k.Platform!=T.KUAISHOU||(K.DataModule().GetUser().AddSaveKey("BoxCoinLuackTime","0"),K.DataModule().GetUser().AddSaveKey("ShareKey","0")),k.Platform==T.OPPO&&K.DataModule().GetUser().resetBannerCloseTimesToday()}}static ModuleLoadOver(){k.IsInWebTest||(k.Platform==T.WECHAT&&CC.Instance.Login(),k.Platform==T.TT&&hg.Instance.Login(),k.Platform==T.QQ&&Ko.Instance.Login(),k.Platform==T.OPPO&&Do.Instance.Login(),k.Platform==T.VIVO&&vo.Instance.Login())}}),SC=GC,yC=(SC.UserDateEnd=!1,SC.IsSetSave=!1,SC.IsSetSaveEnd=!1,class extends ${constructor(){super(...arguments),this.isOne=!0,this.isUp=!0,this.isShowLaiwan=!0,this.isTipShow=0,this.isProgress=!1,this.simulationValue=0,this.simulationSpeed=6,this.nowShowProgress=0}Load(){if(null==this.view){this.view=this.CreatFGUIViewByView(tc.createInstance()),Laya.loader.getRes("res/BaseUI_atlas0.png").bitmap.lock=!0;let n=this;if(this.LoadTip(),this.isTipShow++,this.SetGameLoadInfo(),V.UseSnowSpScene?this.view.asCom.getController("newYear").setSelectedPage("1"):this.view.asCom.getController("newYear").setSelectedPage("0"),T.IS_QQ_PLATFORM&&this.view.asCom.getController("YLPlatform").setSelectedPage("QQ"),this.isOne&&(this.isOne=!1,"Save"==Laya.LocalStorage.getItem("HasSaveUserData12")&&!W.newPlayer||z.Instance.LeYou_Guidance(102),z.Instance.LW_StatisticsEvent(9002),no.Statistics_T01(),T.ProjectSubCode))try{window.jsCallNative_stats(40003),window.onerror=function(e,t,i,o,a){n.view&&n.isUp&&(n.isUp=!1,window.jsCallNative_stats(40004))}}catch(e){}"ZH_CN"!=k.language&&(this.view.m_TTHint.visible=!1)}}ErrorToStr(e){return e.stack||e.message}SetGameLoadInfo(){this.view.asCom.getChild("ver_Text").asLabel.text=k.v+"("+k.v_release+k.v_releaseMark.toString()+")",this.view.asCom.getChild("loadBgBule").asLoader.url=x.GetIcon("loadingBg",".jpg"),this.view.asCom.getChild("buleWaitAni").asCom.getChild("headBg").asLoader.url=x.GetIcon("loading_heroBg"),this.view.asCom.getChild("buleWaitAni").asCom.getChild("headIcon").asLoader.url=x.GetIcon("loading_hero")}LoadTip(){var e;SC.UserDateEnd&&K.DataModule().GetLz()&&2<=this.isTipShow&&(e="Tip_"+f.GetF1_F2RandomValue(1,10).toString(),e=K.DataModule().GetLz().GetText(e),this.view.asCom.getChild("tipInfo").asLabel.text=e)}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null)}Show(){super.Show(),this.Load()}Hide(){this.isUp=!1,super.Hide(),this.UnLoad()}onUpdate(){this.view&&(this.view.setSize(fairygui.GRoot.inst.width,fairygui.GRoot.inst.height),0==this.isProgress&&(this.simulationValue+=A.TimeDelta*this.simulationSpeed,100<=this.simulationValue&&(this.simulationValue=100),this.SetProgress(this.simulationValue/100)))}SetProgress(e){let t=581*e;t<30&&(t=30),this.view.m_LoadingBar.width=t,this.view.m_loadingLable.text=Math.floor(100*e)+"%"}ShowProgress(t){if(.1<(this.nowShowProgress=t)){this.isProgress=!0;let e=581*t;e<30&&(e=30),this.view.m_LoadingBar.width=e,this.view.m_loadingLable.text=Math.floor(100*t)+"%"}}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(yC);return e.name=yC.UIName,t.uiName=yC.UIName,t}}),wC=yC,vC=(wC.UIName="LoadingUI",class extends ${constructor(){super(...arguments),this.level=3,this.hasShowWeapon=!1,this.theShare=!1,this.DiamondCount=1,this.nowDouble=2,this.isShare=!1}Load(){let o=this;if(null==this.view){if(this.view=this.CreatFGUIViewByView(wd.createInstance()),this.theShare=!1,this.view.m_continueBtn.onClick(this,function(){o.onC()}),k.Platform!=T.OPPO&&k.Platform!=T.VIVO||(j.ShowNativeAd(this.view.m_OppoLookBtn,this.view.m_OppoBannerAdBtn,null,null),this.view.m_YLPlatform.setSelectedPage("Oppo"),j.skipBtnDelayTime(this.view.m_continueBtn)),k.Platform==T.WECHAT&&this.view.m_YLPlatform.setSelectedPage("TT"),this.view.m_continueBtn2.onClick(this,function(){let e=[];e.push("Diamond_Diamond_"+o.DiamondCount);var t=K.DataModule().GetUser().GetUserItemDataList(e);K.DataModule().GetUser().GetItem(t,at.mergeNew),K.UIModule().GetUI(Ua.UIName).ShowAddDiamond(new Laya.Vector2(o.view.m_continueBtn.x+o.view.m_continueBtn.width/2,o.view.m_continueBtn.y),10),K.UIModule().HideUI(vC.UIName),(T.ProjectSubCode||k.Platform==T.TT)&&4<=K.DataModule().GetUser().GetData().mergeLevel&&K.PlatformModule().ShowInterstitialAd()}),T.IS_WECHAT_PLATFORM){let e=K.DataModule().GetUser().GetShareWeaponTimes();this.view.m_Btn_Shard.m_weaponHit.visible=e<3,this.view.m_Btn_Shard.onClick(this,function(){CC.Instance.Shard(function(){if(e<3&&!o.theShare){o.theShare=!0,K.UIModule().ShowUI(Ua.UIName),K.UIModule().GetUI(Ua.UIName).ShowAddDiamond(new Laya.Vector2(o.view.m_Btn_Shard.x+o.view.m_Btn_Shard.width/2,o.view.m_Btn_Shard.y),10);let e=Z.Diamond+"_10",t=K.DataModule().GetUser().GetUserItemData(e),i=[];i.push(t),K.DataModule().GetUser().GetItem(i,at.ShareNewWeapon),K.DataModule().GetUser().addShareWeaponTimes(),o.view.m_Btn_Shard.m_weaponHit.visible=!1}},function(){})})}this.view.m_Btn_Video.onClick(this,function(){o.On_VideoBtn()}),this.view.m_OppoBtn_Video.onClick(this,function(){o.On_VideoBtn()}),this.hasShowWeapon=!1,this.view.m_MergeAni.play(),K.UIModule().HideUI(Zg.UIName),q.EcsGameMgr.nowGame.UseMergeNewBg();var e=K.DataModule().GetLocal().weapon.GetByLevel(this.level-1),e=(this.view.m_Weapon1.url=x.GetIcon(e.uiRes),this.view.m_Weapon2.url=this.view.m_Weapon1.url,this.DiamondCount=e.RewardDiamond,this.view.m_count.text=this.DiamondCount.toString(),K.DataModule().GetLocal().weapon.GetByLevel(this.level));q.EcsGameMgr.nowGame.CreatWeapon(e.ID),K.DataModule().GetUser().SetEquitWeapon(e.ID),this.view.m_weaponName.text=K.DataModule().GetLz().GetText("WN_"+e.ID),this.SetNewWeapon(e),Laya.timer.once(1500,this,function(){null!=o.view&&o.view.m_OppoBtn_Video&&j.RandomAdBtnPosTow(o.view.m_OppoLookBtn,o.view.m_OppoBtn_Video,o.view.width)})}this.SetFreeTry(),this.IsShareOrVideo(),this.LoadImage()}LoadImage(){this.view.m_text_speed.text=K.DataModule().GetLz().GetText("MergeNewUI_text1"),this.view.m_text_atk.text=K.DataModule().GetLz().GetText("MergeNewUI_text2"),this.view.m_text_skill.text=K.DataModule().GetLz().GetText("MergeNewUI_text3"),this.view.m_text_power.text=K.DataModule().GetLz().GetText("Equip_battleValue")}onC(){let e=[];e.push("Diamond_Diamond_"+this.DiamondCount);var t=K.DataModule().GetUser().GetUserItemDataList(e);K.DataModule().GetUser().GetItem(t,at.mergeNew),K.UIModule().GetUI(Ua.UIName).ShowAddDiamond(new Laya.Vector2(this.view.m_continueBtn.x+this.view.m_continueBtn.width/2,this.view.m_continueBtn.y),10),K.UIModule().HideUI(vC.UIName),(T.ProjectSubCode||k.Platform==T.TT)&&4<=K.DataModule().GetUser().GetData().mergeLevel&&K.PlatformModule().ShowInterstitialAd()}SetFreeTry(){}SetNewWeapon(e){var t=K.DataModule().GetLocal().gameRule.GetWeaponMergeGemVideoBonus();this.view.m_weaponTypeText.url="ui://InGameUI/"+e.Class,this.view.m_Value1.text=e.AttSpeed.toString(),this.view.m_Value2.text=e.Dmg.toString(),this.view.m_Value3.text=Math.ceil(e.Dmg*e.AttSpeed).toString(),this.view.m_ZhanDouLiText.text=K.DataModule().GetLocal().gameRule.GetBattlePoint_weapon(e.ID).toString(),4<e.Level&&f.GetRandomValue(t.F1)?(this.view.m_Video_C.setSelectedPage("0"),no.Statistics_T0R(g.mergeNew),e=f.GetF1_F2RandomValue(t.F2,t.F3),t="text_double"+(this.nowDouble=e),this.view.m_Btn_Video.m_icon.url=x.GetFairyGUI_Icon(t)):this.view.m_Video_C.setSelectedPage("1")}IsShareOrVideo(){this.isShare=z.Instance.GetShareStrategy(sC.newweapon_double),this.isShare?j.IsShare(this.view.m_Btn_Video):this.isShare=j.IsVideoAndShare(this.view.m_Btn_Video)}Video_Call(){let e=K.UIModule().GetUI(vC.UIName),t=[];t.push("Diamond_Diamond_"+e.DiamondCount*e.nowDouble);var i=K.DataModule().GetUser().GetUserItemDataList(t);K.DataModule().GetUser().GetItem(i,at.mergeNew),K.UIModule().GetUI(Ua.UIName).ShowAddDiamond(new Laya.Vector2(e.view.m_Btn_Video.x+e.view.m_Btn_Video.width/2,e.view.m_Btn_Video.y),10),K.UIModule().HideUI(vC.UIName)}On_VideoBtn(){let e=K.UIModule().GetUI(vC.UIName),t=sC.newweapon_double,i=g.mergeNew;e.isShare?j.GetRewardBtnFun(1,function(){z.Instance.DayShareStrategy_Add(t,!0),e.Video_Call()},i):j.GetRewardBtnFun(0,function(){z.Instance.DayShareStrategy_Add(t,!1),e.Video_Call()},i,e.view.m_Btn_Video)}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null,K.UIModule().ShowUI(Zg.UIName),q.EcsGameMgr.nowGame.ClearWeapon())}Show(){super.Show(),this.Load(),j.RandomAdBtnPosTow(this.view.m_OppoLookBtn,this.view.m_OppoBtn_Video,this.view.width)}Hide(){super.Hide(),this.UnLoad(),j.SetUnLock?j.SetUnLock=!1:j.Guidance_IsUnlock()}onUpdate(){!this.isShow||this.hasShowWeapon||this.view.m_MergeEffect.visible&&(b.Warn("展示2武器"),q.EcsGameMgr.nowGame.ShowWeapon(),this.hasShowWeapon=!0)}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(vC);return e.name=vC.UIName,t.uiName=vC.UIName,t}}),DC=vC,UC=(DC.UIName="MergeNewUI",class extends ${Load(){null==this.view&&(this.view=this.CreatFGUIViewByView(Zh.createInstance()),this.AllOnClick(),this.LoadImage()),this.SetLoadInfo()}LoadImage(){}SetFun(e,t){this.fun=t,this.view.m_n18.text=e}AllOnClick(){this.view.m_escBtn.onClick(this,this.m_escBtn),this.view.m_Btn_Yes.onClick(this,this.m_Btn_Yes)}m_escBtn(){K.UIModule().HideUI(UC.UIName)}m_Btn_Yes(){null!=this.fun&&(this.fun(),this.fun=null),K.UIModule().HideUI(UC.UIName)}SetLoadInfo(){}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null)}Show(){super.Show(),this.Load()}SetHideInfo(){}Hide(){this.SetHideInfo(),super.Hide(),this.UnLoad()}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(UC);return e.name=UC.UIName,t.uiName=UC.UIName,t}}),LC=UC,BC=(LC.UIName="WindowInfoUI",class extends ${constructor(){super(...arguments),this.List=[],this.nowUIName="",this.nowId="",this.nowSkinType="",this.fun=null}Load(){null==this.view&&(this.view=this.CreatFGUIViewByView(uh.createInstance()),this.AllOnClick(),this.LoadImage()),z.Instance.LeYou_action(601)}LoadImage(){}AllOnClick(){this.view.m_inputBg.onClick(this,this.onBtn_Close)}onBtn_Close(){K.UIModule().HideUI(BC.UIName)}SetLoadInfo(){this.nowId=K.DataModule().GetUser().GetData().equipList[0],this.nowData=K.DataModule().GetUser().GetItemByID(this.nowId),this.nowSkinType=K.DataModule().GetLocal().weapon.Get(this.nowId).Type,this.List_Refresh()}List_Refresh(){this.List=[],this.List.push("");var t=K.DataModule().GetLocal().weaponSkin.GetSkinByType(this.nowSkinType);for(let e=0;e<t.length;e++)this.List.push(t[e]);this.view.m_listCom.m_list.itemRenderer=Laya.Handler.create(this,this.onRenderItem,null,!1),this.view.m_listCom.m_list.numItems=this.List.length,this.view.m_listCom.m_list.on(fairygui.Events.CLICK_ITEM,this,this.On_Item)}onRenderItem(t,i){var o,t=this.List[t];if(i.touchable=!0,i.m_lock.visible=!1,i.m_tick.visible=!1,i.m_bar.visible=!1,i.m_selectBg.visible=!1,i.m_text_nowCount.text="",t==this.nowData.data&&(i.m_selectBg.visible=!0,i.m_tick.visible=!0),""==t)j.FreshRewardItem(i.m_rewardItem,this.nowData,!1),i.m_text_name.text=K.DataModule().GetLocal().localization.GetText("WeaponSkinName_Default"),i.m_text_info.text=K.DataModule().GetLocal().localization.GetText("WeaponSkinInfo_Default");else{let e=K.DataModule().GetUser().GetItemByTypeAndtableId(Z.WeaponSkin,t);e||(K.DataModule().GetUser().AddWeaponSkin(t,"0"),e=K.DataModule().GetUser().GetItemByTypeAndtableId(Z.WeaponSkin,t)),K.DataModule().GetLocal().weaponSkin.Get(t)&&(i.m_text_name.text=K.DataModule().GetLz().GetText("WeaponSkinName_"+t),i.m_text_info.text=K.DataModule().GetLz().GetText("WeaponSkinInfo_"+t)),j.FreshRewardItem(i.m_rewardItem,e,!1,"","",!1,"","","WeaponSkinComUI"),i.m_rewardItem.m_Count.text="",i.m_rewardItem.m_Image_Piece.visible=!1,"true"!=e.data&&((o=K.DataModule().GetUser().GetItemByTypeAndId(Z.WeaponTryCard,t))&&1<=o.count?(i.m_isTryCard.visible=!0,i.m_isTryCard.text=K.DataModule().GetLz().GetText("WeaponSkinTry")):i.m_isTryCard.visible=!1,i.m_isTryCardBG.visible=i.m_isTryCard.visible,i.m_bar.visible=!0,i.m_lock.visible=!0,i.m_bar.max=K.DataModule().GetLocal().weaponSkin.Get(t).Piece2Make,i.m_bar.value=e.count,i.m_text_nowCount.text=e.count+"/"+i.m_bar.max)}}On_Item(e){let t=this.view.m_listCom.m_list.getChildIndex(e),i=this.List[t],o=!1;if(""==i)this.nowData.data!=i&&(o=!0,K.AudioModule().PlayOnce(x.GetSound2("Equip"))),this.nowData.data="",this.List_Refresh(),K.DataModule().GetUser().SaveData();else if("true"==K.DataModule().GetUser().GetItemByTypeAndtableId(Z.WeaponSkin,i).data||e.m_isTryCard.visible)this.nowData.data!=i&&(o=!0,K.AudioModule().PlayOnce(x.GetSound2("Equip"))),this.nowData.data=i,this.List_Refresh(),K.DataModule().GetUser().SaveData();else{let t=this;if(!k.isWxNew)return K.AudioModule().OptimizePlayOnce(x.GetSound2("CuoWu")),void j.TopUI_TipShow(K.DataModule().GetLocal().localization.GetText("TryWeaponSkinUI_Info2"));if(!k.isNewTry){console.warn("");let e=K.UIModule().GetUI(lg.UIName);return K.UIModule().HideUI(BC.UIName),t.nowUIName==Pa.UIName&&K.UIModule().HideUI(Ha.UIName),void e.SetShowInfo(this.nowData,i,function(){q.EcsGameMgr.nowGame.ClearMerge(),q.EcsGameMgr.nowGame.ClearHero(),t.nowUIName==Zg.UIName&&K.UIModule().ShowUI(Zg.UIName);let e=K.UIModule().GetUI(BC.UIName);e.view&&e.isShow&&e.List_Refresh(),t.nowUIName==Pa.UIName&&(K.UIModule().GetUI(Ha.UIName).SetDefaultEquit(),K.UIModule().ShowUI(Ha.UIName))},!0)}}var a;o&&(z.Instance.LeYou_action(602),e=K.DataModule().GetUser().GetData().nowChooseHero,a=K.DataModule().GetUser().GetEquitWeapon(),q.EcsGameMgr.nowGame.ChangeHero(e,a))}SetShowInfo(e,t,i,o){this.Show(),this.fun=i,this.view.m_listCom.x=e+10,this.view.m_listCom.y=t-300,this.SetLoadInfo(),this.nowUIName=o}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null)}Show(){super.Show(),this.Load()}SetHideInfo(){null!=this.fun&&(this.fun.call(this),this.fun=null)}Hide(){this.SetHideInfo(),super.Hide(),this.UnLoad()}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(BC);return e.name=BC.UIName,t.uiName=BC.UIName,t.jointOrder=!1,t}}),bC=BC,AC=(bC.UIName="WeaponSkinComUI",class extends ${Load(){if(null==this.view){K.AudioModule().PlayOnce(x.GetSound2("Special")),this.view=this.CreatFGUIViewByView(bl.createInstance());let e=q.NowGameWorld.GetSingleCompoent(Fp),t=e.nowWillUpgradeIndex,i=K.DataModule().GetUser().GetData().mergeMap[t],o=K.DataModule().GetUser().GetItemByID(i);if(null==o)return b.Warn("没有此数据"),K.UIModule().HideUI(AC.UIName),void e.TriggerUpGrade(!1);T.WECHAT==k.Platform&&this.view.m_YLPlatform.setSelectedPage("TT"),j.FreshRewardItem(this.view.m_oldItem,o,!0),1==e.willUpgradeIndex.length&&this.controller(0),2==e.willUpgradeIndex.length&&this.controller(1),3==e.willUpgradeIndex.length&&this.controller(2);let a=K.DataModule().GetUser().GetItemByID(e.willUpgradeWeapon[0]);if(null==a)return b.Warn("没有此数据"),K.UIModule().HideUI(AC.UIName),void e.TriggerUpGrade(!1);j.FreshRewardItem(this.view.m_item1,a,!0),j.FreshRewardItem(this.view.m_item2,a,!0),j.FreshRewardItem(this.view.m_item3,a,!0);var s=K.DataModule().GetLocal().localization.GetTextByPar("WeaponUpgradeUI_Info",e.willUpgradeIndex.length.toString(),a.level.toString());this.view.m_info.text=s,1==e.willUpgradeIndex.length&&this.view.m_c2.setSelectedPage("Up3"),this.view.m_normalBtn.onClick(this,function(){K.UIModule().HideUI(AC.UIName),K.UIModule().GetUI(Hp.UIName).ShowSpEffect(t),K.AudioModule().PlayOnce(x.GetSound2("Merge")),e.TriggerUpGrade(!1),!T.ProjectSubCode&&k.Platform!=T.TT||K.PlatformModule().ShowInterstitialAd()}),this.view.m_normalBtn2.onClick(this,function(){K.UIModule().HideUI(AC.UIName),K.UIModule().GetUI(Hp.UIName).ShowSpEffect(t),K.AudioModule().PlayOnce(x.GetSound2("Merge")),e.TriggerUpGrade(!1),!T.ProjectSubCode&&k.Platform!=T.TT||K.PlatformModule().ShowInterstitialAd()});let n=this;this.view.m_UpgradeBtn.onClick(this,function(){n.UpgradeFun(e,t)}),k.Platform!=T.OPPO&&k.Platform!=T.VIVO||(j.ShowNativeAd(this.view.m_OppoLookBtn,this.view.m_OppoBannerAdBtn,null,null),this.view.m_YLPlatform.setSelectedPage("Oppo"),K.DataModule().GetPlatform().PlatformData,j.skipBtnDelayTime(this.view.m_normalBtn),this.view.m_OppoUpgradeBtn.onClick(this,function(){n.UpgradeFun(e,t)}))}z.Instance.LeYou_Video(g.WeaponUpGrade,0),no.Statistics_T0R(g.WeaponUpGrade)}UpgradeFun(e,t){j.GetRewardBtnFun(0,function(){z.Instance.LW_StatisticsEvent(8009),K.UIModule().HideUI(AC.UIName),K.UIModule().GetUI(Hp.UIName).ShowSpEffect(t),K.AudioModule().PlayOnce(x.GetSound2("Merge"),0,.5),K.AudioModule().PlayOnce(x.GetSound2("MergeNew"),0,.5),e.TriggerUpGrade(!0)},g.WeaponUpGrade)}controller(e){T.IS_OPPO_PLATFORM||T.IS_VIVO_PLATFORM?this.view.m_c1.setSelectedPage("Oppo_"+(e+1)):this.view.m_c1.setSelectedIndex(e)}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null)}Show(){super.Show(),this.Load(),j.RandomAdBtnPosTow(this.view.m_OppoLookBtn,this.view.m_OppoUpgradeBtn,this.view.width)}Hide(){super.Hide(),this.UnLoad()}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(AC);return e.name=AC.UIName,t.uiName=AC.UIName,t}}),xC=AC,TC=(xC.UIName="WeaponUpGradeUI",class extends ${Load(){null==this.view&&(this.view=this.CreatFGUIViewByView(Ml.createInstance()),this.AllOnClick(),this.LoadImage()),this.SetLoadInfo()}LoadImage(){}AllOnClick(){this.view.m_Btn_Close.onClick(this,this.onBtn_Close),this.view.m_textBtn.onClick(this,this.m_textBtn)}onBtn_Close(){K.UIModule().HideUI(TC.UIName)}m_textBtn(){K.UIModule().ShowUI(qa.UIName)}SetLoadInfo(){K.UIModule().GetUI(qa.UIName).isOne=!1,this.view.m_text_v.text=k.v,this.view.m_text_id.text=W.openId,this.view.m_copyBtn.visible=!1}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null)}Show(){super.Show(),this.Load()}SetHideInfo(){}Hide(){this.SetHideInfo(),super.Hide(),this.UnLoad()}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(TC);return e.name=TC.UIName,t.uiName=TC.UIName,t}}),kC=TC,MC=(kC.UIName="PlayerInfoUI",class extends ${Load(){let e=this;if(null==this.view){this.view=this.CreatFGUIViewByView(Hn.createInstance()),this.view.m_Btn_Close.onClick(this,function(){e.Hide()}),k.AuthorizationInterface&&(this.view.m_textBtn.visible=!0);this.view.m_copyBtn.onClick(this,function(){window.CopyText("zhengzeming@7477.com")}),this.view.m_textBtn.onClick(this,function(){window.privacyContent()})}}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null)}Show(){super.Show(),this.Load()}Hide(){super.Hide(),this.UnLoad()}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(MC);return e.name=MC.UIName,t.uiName=MC.UIName,t}}),RC=MC,PC=(RC.UIName="CustomerServiceUI",class extends ${constructor(){super(...arguments),this.isShare=!1,this.isShare2=!1,this.isShare3=!1,this.isSetNew=!1,this.timesList=[],this.itemList=[],this.isChange=!1,this.pDic={},this.iDic={},this.isZhiYU=!1,this.isNew=!1}Load(){null==this.view&&(this.view=this.CreatFGUIViewByView(us.createInstance()),this.AllOnClick(),this.LoadImage(),k.Platform!=T.OPPO&&k.Platform!=T.VIVO||(j.ShowNativeAd(this.view.m_OppoLookBtn,null,null,this.view.m_OppoIconAdBtn),this.view.m_YLPlatform.setSelectedPage("Oppo"))),this.SetLoadInfo()}LoadImage(){}AllOnClick(){this.view.m_btn_all.onClick(this,this.m_btn_all),this.view.m_btn_change.onClick(this,this.m_btn_change),this.view.m_OppoBtn_all.onClick(this,this.m_btn_all),this.view.m_oppoBtn_change.onClick(this,this.m_btn_change)}IsShareOrVideo(){this.isShare=z.Instance.GetShareStrategy(sC.chose_skill_all),this.isShare?j.IsShare(this.view.m_btn_all):this.isShare=j.IsVideoAndShare(this.view.m_btn_all),this.isShare2=z.Instance.GetShareStrategy(sC.chose_skill_refresh),this.isShare2?j.IsShare(this.view.m_btn_change):this.isShare2=j.IsVideoAndShare(this.view.m_btn_change)}Video_Call(){z.Instance.LW_StatisticsEvent(8022,K.DataModule().GetUser().GetData().userMedal.level,1),z.Instance.ChuanQuStatistics(80005);let t=K.UIModule().GetUI(PC.UIName),i=[];for(let e=0;e<t.itemList.length;e++)i.push(t.itemList[e].ItemID+"_"+t.timesList[e]);t.onList(i)}Video_Call2(){z.Instance.ChuanQuStatistics(80006),z.Instance.LW_StatisticsEvent(8022,K.DataModule().GetUser().GetData().userMedal.level,2);let e=K.UIModule().GetUI(PC.UIName);e.LoadList(1),e.isChange=!0}m_btn_all(){let e=g.randomSkill_ALL,t=K.UIModule().GetUI(PC.UIName),i=sC.chose_skill_all;t.isShare?j.GetRewardBtnFun(1,()=>{z.Instance.DayShareStrategy_Add(i,!0),t.Video_Call()},e):j.GetRewardBtnFun(0,()=>{z.Instance.DayShareStrategy_Add(i,!1),t.Video_Call()},e,t.view.m_btn_all)}m_btn_change(){let e=g.randomSkill_Change,t=K.UIModule().GetUI(PC.UIName),i=sC.chose_skill_refresh;t.isShare2?j.GetRewardBtnFun(1,()=>{z.Instance.DayShareStrategy_Add(i,!0),t.Video_Call2()},e):j.GetRewardBtnFun(0,()=>{z.Instance.DayShareStrategy_Add(i,!1),t.Video_Call2()},e,t.view.m_btn_change)}SetLoadInfo(){W.newPlayer&&0==this.isSetNew&&(this.isSetNew=!0,this.isNew=!0),T.ProjectSubCode&&A.TimeScaleZoom("ItemRandomUI",!0,1e-4),this.isChange=!1,this.LoadList(),no.Statistics_T0R(g.randomSkill_Lv),no.Statistics_T0R(g.randomSkill_ALL),no.Statistics_T0R(g.randomSkill_Change)}LoadList(e=0){this.IsShareOrVideo();let t=K.DataModule().GetLocal().item.GetZombieItemDatas(),i=(this.timesList=[],this.itemList=[],f.RandomF1F2Num(t.length-1,3));if(this.isNew&&0==this.isZhiYU){this.isZhiYU=!0;for(let e=0;e<t.length;e++)"SelfHeal"==t[e].ItemID&&(i[0]=e)}let o=[];for(let e=0;e<i.length;e++)o.push(t[i[e]]);this.itemList.push(o[0]),this.itemList.push(o[1]),this.itemList.push(o[2]);for(let e=0;e<1;e++){const t=o[e];this.iDic[t.SkillID]||(this.iDic[t.SkillID]=0),this.iDic[t.SkillID]++}for(let e=0;e<this.itemList.length;e++)this.timesList.push(1);this.List_Refresh()}List_Refresh(){this.view.m_list.itemRenderer=Laya.Handler.create(this,this.onRenderItem,null,!1),this.view.m_list.numItems=this.itemList.length,this.view.m_list.on(fairygui.Events.CLICK_ITEM,this,this.On_Item)}onRenderItem(e,t){let i=this.itemList[e],o=this.timesList[e],a=(t.m_Com.m_bg_text_one.visible=!1,t.m_Com.m_text_one.visible=!1);if(2<=o)a=!0;else{let t=!1;for(let e=0;e<this.timesList.length;e++)if(2<=this.timesList[e]){t=!0;break}t||""!=i.SkillFun&&(a=!0)}a&&(this.isShare3=z.Instance.GetShareStrategy(sC.chose_skill_advance),this.isShare3?j.IsShare(t.m_Com):this.isShare3=j.IsVideoAndShare(t.m_Com)),this.isNew&&(a=!1,2<=o&&(t.m_Com.m_bg_text_one.visible=!0,t.m_Com.m_text_one.visible=!0)),t.m_Com.m_type.visible=a,t.m_Com.m_LvType.setSelectedIndex(o-1),""==i.SkillFun?t.m_Com.m_SkillType.setSelectedIndex(0):t.m_Com.m_SkillType.setSelectedIndex(1),t.m_Com.m_load_icon.url=x.GetIcon("Icon_"+i.UIRes);let n=this,s=(t.m_Com.m_text_info.text=K.DataModule().GetLz().GetText("SkillName_"+i.ItemID)+" "+K.DataModule().GetLz().GetTextByPar("InGame_SkillLV",o.toString()),K.DataModule().GetLocal().item.Get(i.ItemID).F1),l=(s*=o,"");l="AddSpeed"==i.ItemID||"HitnRun"==i.ItemID?s.toString():s+"%",""!=i.SkillFun&&(l=""),t.m_Com.m_text_info2.text=K.DataModule().GetLz().GetText("SkillNameInfo2_"+i.ItemID)+l,t.scaleX=0,Laya.timer.once(300*(e+1),this,()=>{try{if(!n.view)return;t.scaleX=1,t.m_t0.play()}catch(e){console.log("err:",e)}})}On_Item(o){let a=this.view.m_list.getChildIndex(o),n=this.itemList[a],e=!1;if(2<=this.timesList[a])e=!0;else{let t=!1;for(let e=0;e<this.timesList.length;e++)if(2<=this.timesList[e]){t=!0;break}t||""!=n.SkillFun&&(e=!0)}if(e=this.isNew?!1:e){z.Instance.LW_StatisticsEvent(8022,K.DataModule().GetUser().GetData().userMedal.level,0),this.isChange?z.Instance.ChuanQuStatistics(80004):z.Instance.ChuanQuStatistics(80003);let e=g.randomSkill_Lv,t=K.UIModule().GetUI(PC.UIName),i=sC.chose_skill_advance;t.isShare3?j.GetRewardBtnFun(1,()=>{z.Instance.DayShareStrategy_Add(i,!0),t.onList([n.ItemID+"_"+t.timesList[a]])},e):j.GetRewardBtnFun(0,()=>{z.Instance.DayShareStrategy_Add(i,!1),t.onList([n.ItemID+"_"+t.timesList[a]])},e,o)}else{this.isChange?z.Instance.ChuanQuStatistics(80002):z.Instance.ChuanQuStatistics(80001),this.onList([n.ItemID+"_"+this.timesList[a]]);let e=K.DataModule().GetUser().GetData();z.Instance.LW_StatisticsEvent(1010,e.userMedal.level.toString(),e.userLevel.level.toString(),1..toString())}}SetShowInfo(e){this.Show(),this.hideFun=e}onList(e){T.ProjectSubCode?V.SetStartGetSkill(e):V.startGetSkill=e,K.UIModule().HideUI(PC.UIName)}UnLoad(){null!=this.view&&(this.view.dispose(),this.view=null)}Show(){super.Show(),this.Load(),j.RandomAdBtnPosThree(this.view.m_OppoLookBtn,this.view.m_OppoBtn_all,this.view.m_oppoBtn_change,this.view.width)}SetHideInfo(){this.isNew&&(this.isNew=!1),T.ProjectSubCode&&A.TimeScaleZoom("ItemRandomUI",!1),null!=this.hideFun&&(this.hideFun.call(this),this.hideFun=null)}Hide(){this.SetHideInfo(),super.Hide(),this.UnLoad()}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(PC);return e.name=PC.UIName,t.uiName=PC.UIName,t}}),EC=PC,NC=(EC.UIName="ItemRandomUI",class extends ${InitSubUI(){this.AddSubUI(Lp.CreatUINode()),this.AddSubUI(Uf.CreatUINode()),this.AddSubUI(yf.CreatUINode()),this.AddSubUI(ff.CreatUINode()),this.AddSubUI(If.CreatUINode()),this.AddSubUI(Gf.CreatUINode()),this.AddSubUI(cf.CreatUINode()),this.AddSubUI(mf.CreatUINode()),this.AddSubUI(Bf.CreatUINode()),this.AddSubUI(ef.CreatUINode()),this.AddSubUI(pf.CreatUINode()),this.AddSubUI(of.CreatUINode()),this.AddSubUI(sf.CreatUINode()),this.AddSubUI(kp.CreatUINode()),this.AddSubUI(Fa.CreatUINode()),this.AddSubUI(Zg.CreatUINode()),this.AddSubUI(Hp.CreatUINode()),this.AddSubUI(bg.CreatUINode()),this.AddSubUI(Ug.CreatUINode()),this.AddSubUI(kC.CreatUINode()),this.AddSubUI(RC.CreatUINode()),this.AddSubUI(ng.CreatUINode()),this.AddSubUI(ya.CreatUINode()),this.AddSubUI(Pa.CreatUINode()),this.AddSubUI(Ha.CreatUINode()),this.AddSubUI(Aa.CreatUINode()),this.AddSubUI(Ig.CreatUINode()),this.AddSubUI(pa.CreatUINode()),this.AddSubUI(xg.CreatUINode()),this.AddSubUI(ca.CreatUINode()),this.AddSubUI(ta.CreatUINode()),this.AddSubUI(Yo.CreatUINode()),this.AddSubUI(DC.CreatUINode()),this.AddSubUI(Xo.CreatUINode()),this.AddSubUI(va.CreatUINode()),this.AddSubUI(Kg.CreatUINode()),this.AddSubUI(ka.CreatUINode()),this.AddSubUI(_a.CreatUINode()),this.AddSubUI(cg.CreatUINode()),this.AddSubUI(Zp.CreatUINode()),this.AddSubUI(ra.CreatUINode()),this.AddSubUI(fg.CreatUINode()),this.AddSubUI(Ho.CreatUINode()),this.AddSubUI(Gg.CreatUINode()),this.AddSubUI(bC.CreatUINode()),this.AddSubUI(xC.CreatUINode()),this.AddSubUI(kg.CreatUINode()),this.AddSubUI(vg.CreatUINode()),this.AddSubUI(EC.CreatUINode()),this.AddSubUI(yg.CreatUINode()),this.AddSubUI(Xg.CreatUINode()),this.AddSubUI(Eg.CreatUINode()),this.AddSubUI(_C.CreatUINode()),this.AddSubUI(Kp.CreatUINode()),this.AddSubUI(Ua.CreatUINode()),this.AddSubUI(Ao.CreatUINode()),this.AddSubUI(LC.CreatUINode()),this.AddSubUI(Qp.CreatUINode()),this.AddSubUI(Lo.CreatUINode()),this.AddSubUI(lg.CreatUINode()),this.AddSubUI(pg.CreatUINode()),this.AddSubUI(Fg.CreatUINode()),this.AddSubUI(Hg.CreatUINode()),this.AddSubUI(Qg.CreatUINode()),this.AddSubUI(gC.CreatUINode()),this.AddSubUI(Xp.CreatUINode()),this.AddSubUI(Zo.CreatUINode()),this.AddSubUI(To.CreatUINode()),this.AddSubUI(Xi.CreatUINode())}static GetResPaths(){return[]}Load(){}UnLoad(){}Show(){super.Show()}Hide(){super.Hide()}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(NC);return e.name=NC.UIName,t.uiName=NC.UIName,t}}),FC=NC,OC=(FC.UIName="GameUI",class extends ${InitSubUI(){this.AddSubUI(FC.CreatUINode()),this.AddSubUI(sn.CreatUINode())}Load(){}UnLoad(){}Show(){super.Show()}Hide(){super.Hide()}onUpdate(){}static CreatUINode(){let e=new Laya.Box,t=e.addComponent(OC);return e.name=OC.UIName,t.uiName=OC.UIName,t.jointOrder=!1,t}}),HC=OC;HC.UIName="RootUI";var Z,VC,zC=class extends u{constructor(){super(...arguments),this.ModuleName="UI模块"}Init(){var e,t;"EN"==k.language&&(fairygui.UIPackage.branch="EN"),"TT"==k.Platform&&(fairygui.UIPackage.branch="TT"),zC.Instance=this,super.Init(),Laya.stage.addChild(fairygui.GRoot.inst.displayObject),T.IS_KuaiShou&&(e=tG.width,t=Laya.stage.height/Laya.stage.width*tG.width,fairygui.GRoot.inst.displayObject.width=e,fairygui.GRoot.inst.displayObject.height=t,fairygui.GRoot.inst.width=e,fairygui.GRoot.inst.height=t),fairygui.GRoot.inst.displayObject.zOrder=1e3,fairygui.UIConfig.defaultFont="SimHei",T.IS_4399?fairygui.UIConfig.packageFileExtension="png":fairygui.UIConfig.packageFileExtension="zip";let i=HC.CreatUINode(),o=i.owner;Laya.stage.addChild(o),o.top=0,o.left=0,o.right=0,o.bottom=0,o.mouseEnabled=!0,o.mouseThrough=!0,o.zOrder=1,zC.Instance.MasterUI().CreatUIList(i),b.Warn("生成结束"),Laya.timer.frameLoop(1,this,this.update),this.InitOver()}update(){this.MasterUI().Update()}ShowUI(e){this.MasterUI().UI_Show(e)}HideUI(e){this.MasterUI().UI_Hide(e)}GetUI(e){return this.MasterUI().GetUI(e)}GetNowTopUIName(){return this.MasterUI().GetNowTopUIName()}GetNowTopUI(){return this.MasterUI().GetNowTopUI()}AddSortFun(e,t,i){return this.MasterUI().AddSortFun(e,t,i)}HideAllUI(){this.MasterUI().UI_ALLHide()}MasterUI(){return J.Instance()}},WC=class{static GetFairyGuiImage(e){return"ui://InGameUI/"+e}static ShowLoading(e){zC.Instance.ShowUI(wC.UIName),zC.Instance.GetUI(wC.UIName).ShowProgress(e)}static HideLoading(){zC.Instance.HideUI(wC.UIName)}static ShowCheckDialog(e,t=null,i=null){zC.Instance.ShowUI(Ri.UIName),zC.Instance.GetUI(Ri.UIName).ShowCheckDialog(e,t,i)}static ShowSureDialog(e,t=null,i=null,o=null){zC.Instance.ShowUI(Ri.UIName),zC.Instance.GetUI(Ri.UIName).ShowSureDialog(e,t,i,o)}static ShowShortWait(e=0){zC.Instance.ShowUI(Ni.UIName)}static HideShortWait(){zC.Instance.HideUI(Ni.UIName)}static FixLabelWidth(e,t){t.asTextField.textWidth>e?t.scaleX=e/t.asTextField.textWidth:t.scaleX=1}static GetNowVideoType(e){let t="";return e==g.dial?t=$p.Type5:e==g.getReward||e==g.levelReward1||e==g.levelReward2||e==g.mergeNew?t=$p.Type1:e==g.offline||e==g.sign?t=$p.Type6:e==g.revive?t=$p.Type3:e==g.shop1?t=$p.Type1:e==g.shop2?t=$p.Type6:e==g.shop3||e==g.weaponSkin||e==g.window_c||e==g.window_d?t=$p.Type1:e==g.GameOverUI_star?t=$p.Type2:e==g.NewYear2021UI&&(t=$p.Type1),t}static GetRewardBtnFun(e,t,i="default",o=null,a=null){k.IsFreeVideo?t.call(this):(console.log("当前看视频pos:",i),eg.gt_ad_button_Click(WC.GetNowVideoType(i),i),z.Instance.LeYou_Video(i,2),K.DataModule().GetPlatform().PlatformData.UseShare||1==e&&(e=0),0==e&&K.PlatformModule().WatchVideo(t,i,o,a),1==e&&K.PlatformModule().ShareBase(t,a))}static InitRewardBtn(e,t){K.DataModule().GetPlatform().PlatformData.UseShare||1==t&&(t=0),0==t&&(e.url="ui://InGameUI/videoIcon",K.DataModule().GetPlatform().PlatformData.UseVideo||(e.url="ui://InGameUI/ShardIcon")),K.DataModule().GetPlatform().PlatformData.UseShare||K.DataModule().GetPlatform().PlatformData.UseVideo||(e.url="ui://InGameUI/videoIcon"),1==t&&(e.url="ui://InGameUI/ShardIcon")}static ShowMessage(e){K.UIModule().ShowUI(Wi.UIName),K.UIModule().GetUI(Wi.UIName).ShowMessage(e)}static FreshMedal(o,e,a,n=!0){var s=K.DataModule().GetLocal().medal.GetByLevel(e);if(s){if(o.m_icon.url=x.GetIcon(s.UIRes),o.m_medalName.text=K.DataModule().GetLz().GetText("MLN_"+s.ID),0==n)o.m_c1.setSelectedPage("star0");else if(4<a)o.m_c1.setSelectedIndex(6),o.m_starText.text="x"+(a+1);else{let e=s.Star;5<e&&(e=5),o.m_c1.setSelectedIndex(e-1)}o.m_s1.m_c1.setSelectedIndex(1),o.m_s2.m_c1.setSelectedIndex(1),o.m_s3.m_c1.setSelectedIndex(1),o.m_s4.m_c1.setSelectedIndex(1),o.m_s5.m_c1.setSelectedIndex(1),o.m_sEX.m_c1.setSelectedIndex(0);let t=a+1,i=[];i.push(o.m_s1),i.push(o.m_s2),i.push(o.m_s3),i.push(o.m_s4),i.push(o.m_s5);for(let e=0;e<t;e++)e<5&&e<s.Star&&i[e].m_c1.setSelectedIndex(0)}}static FreshProList(t,i,n=!1){t.removeChildren();for(let e=0;e<i.length;e++){var s,l=i[e].split("_"),r=l[0];if("SpecialEffect"!=r){let o=Number(l[1]),a=jm.createInstance();if(t.addChild(a),"BattlePoint"!=r){if("AdvEntry"!=r&&"RareUnLock"!=r&&"RareUp"!=r&&"Zmode"!=r){var h=K.DataModule().GetLocal().entryData.Get(r);if(h){a.m_icon.url="ui://InGameUI/"+h.UIRes;let e=h.ID,t=(n&&"MaxHp"==e&&(e="AddMaxHp"),K.DataModule().GetLz().GetTextByPar("Entry_"+e,o.toString()));"Skill"==r?3<=l.length?(m=K.DataModule().GetLocal().skill.Get(l[1]),t=K.DataModule().GetLz().GetTextByPar("Entry_"+h.ID,K.DataModule().GetLz().GetText("SkillName_"+m.SkillID)+" Lv"+l[2]),a.m_text.color=K.DataModule().GetLocal().gameRule.Get("GearGrade5").F6):t=l[1]:a.m_text.color="#FFFFFF",a.m_text.text=t}}if("AdvEntry"==r){h=K.DataModule().GetLocal().entryData.Get(l[3]);if(h){var m=Number(l[2]),d=K.DataModule().GetLocal().gameRule.Get("GearGrade"+m).F6;o=Number(l[4]);let e=K.DataModule().GetLz().GetTextByPar("Entry_"+h.ID,o.toString());-1!=(e="Lock"==l[1]?(a.m_icon.url="ui://InGameUI/"+h.UIRes+"_Dark",a.m_text.color="#A9A9A9",e+"/"+l[5]):(a.m_icon.url="ui://InGameUI/"+h.UIRes,a.m_text.color="#FFFFFF","[color="+d+"]"+e+"[/color]/"+l[5])).indexOf("%")&&(e+="%"),a.m_text.text=e}}if("RareUnLock"==r){let e=Number(l[2]),t=Number(l[3]),i=K.DataModule().GetLocal().gameRule.Get("GearGrade"+e).F6;a.m_c1.setSelectedIndex(1);var c,u,d=K.DataModule().GetLocal().localization.GetText("LevelUnlock").replace("[F1]",t.toString());"SpecialEffect"==l[4]||"Zmode"==l[4]?"Zmode"==l[4]?(c=d+K.DataModule().GetLocal().localization.GetText("Hero_SpecialEffect_"+l[4]+"_"+l[5]+"_"+l[6]),a.m_text.text=c):(c=d+K.DataModule().GetLocal().localization.GetText("Hero_SpecialEffect_"+l[5]),a.m_text.text=c):(u=K.DataModule().GetLocal().entryData.Get(l[4]),o=Number(l[5]),u&&(u=d+K.DataModule().GetLz().GetTextByPar("Entry_"+u.ID,o.toString()),a.m_text.text=u)),"Lock"==l[1]?a.m_text.color="#A9A9A9":a.m_text.color=i}"RareUp"==r&&(u=K.DataModule().GetLocal().localization.GetText("UpgradeTo"),r=K.DataModule().GetLocal().gameRule.Get("GearGrade"+l[1]).F6,s=K.DataModule().GetLocal().gameRule.Get("GearGrade"+l[2]).F6,r="[color="+r+"]【"+K.DataModule().GetLocal().localization.GetText("Rare"+l[1])+"】[/color] "+u+"[color="+s+"]【"+K.DataModule().GetLocal().localization.GetText("Rare"+l[2])+"】[/color]",a.m_c1.setSelectedIndex(1),a.m_text.text=r,a.m_text.fontSize=20)}else a.m_text.color="#FFDE17",a.m_text.text=K.DataModule().GetLz().GetText("Equip_battleValue")+" "+o,a.m_icon.url="ui://InGameUI/equitBg2"}}}static WindowUI_Show(e){K.UIModule().GetUI(Ho.UIName).SetShowInfo(e)}static GetUserItemDataGather(e){let o=e,a=[];for(let i=0;i<o.length;i++){let t=!0;for(let e=0;e<a.length;e++)if((o[i].type==Z.Diamond||o[i].type==Z.Coin)&&a[e].type==o[i].type){t=!1,a[e].count=Y.jia(a[e].count,o[i].count);break}t&&a.push(o[i])}return a}static GetItemDataAndIsShowBox(e,t,i=3,o="",a=!1,n=null){if(t.length<1)return[];t=K.DataModule().GetUser().GetUserItemDataList(t,a);return 0!=i&&1!=i||WC.ShowGetReward(t,o,!1,"",n),0!=i&&2!=i||K.DataModule().GetUser().GetItem(t,e),t}static FreshUserTopExp(e,t,i){let o=K.DataModule().GetUser().GetUserLevel(),a=o.exp/o.maxExp;(e.fillAmount=a)<.01&&(e.fillAmount=.01),t&&(t.text=Math.floor(o.exp)+"/"+Math.floor(o.maxExp)),i&&(i.text=o.level.toString()),-1==o.maxExp&&(t.text="Max",e.fillAmount=1)}static FreshRewardItem(t,i,e=!1,o="",a="",n=!1,s="",l="",r=""){if(t.m_Count.visible=!0,t.m_Image_Piece.visible=!1,t.m_gear.m_rare_bg.visible=!1,t.m_topIcon.visible=!1,t.m_effice_fluxes.visible=!1,t.m_bg_default.visible=!1,t.m_iconDefault.visible=!1,t.m_bg.visible=!1,t.m_gear.m_icon.scaleX=.7,t.m_gear.m_icon.scaleY=.7,i.type==Z.Ring||i.type==Z.Head||i.type==Z.Foot||i.type==Z.Chest||i.type==Z.Gear){t.m_c1.setSelectedPage("Gear");var h=K.DataModule().GetLocal().gear.Get(i.tableID);h&&(m="ui://InGameUI/rare_Image_"+i.rare,t.m_gear.m_rare_bg.visible=!0,t.m_gear.m_rare_bg.url="ui://InGameUI/text_rare_Image_"+i.rare,t.m_gear.m_icon.url=x.GetIcon(h.uiRes),k.isUseVer132?t.m_gear.m_leveltext.text="":t.m_gear.m_leveltext.text="Lv"+i.level,t.m_Count.visible=!1,t.m_gear.m_isEquited.visible=!1,t.m_ItemName.text=K.DataModule().GetLz().GetText("GN_"+h.ID),t.m_gear.m_icon.scaleX=1,t.m_gear.m_icon.scaleY=1,t.m_ItemName.color=K.DataModule().GetLocal().gameRule.Get("GearGrade"+h.Rare).F6,t.m_gear.m_bg.url=m)}else if(i.type==Z.Weapon){t.m_c1.setSelectedPage("Gear");h=K.DataModule().GetLocal().weapon.Get(i.tableID);h&&(m=x.GetIcon(nt.FGUI_rare+h.Rare),t.m_gear.m_icon.url=x.GetIcon(h.uiRes),k.isUseVer132?t.m_gear.m_leveltext.text="":t.m_gear.m_leveltext.text="WeaponSkinComUI"==r?"":"Lv"+h.Level,t.m_ItemName.text=K.DataModule().GetLz().GetText("WN_"+h.ID),t.m_Count.visible=!1,t.m_gear.m_isEquited.visible=!1,t.m_icon.scaleX=.7,t.m_icon.scaleY=.7,t.m_gear.m_bg.url=m)}else if(i.type==Z.NextDouble)t.m_c1.setSelectedPage("Other"),t.m_icon.url="ui://InGameUI/image_NextDouble",t.m_Count.visible=!1,t.m_ItemName.text="";else if(i.type==Z.Hero){t.m_c1.setSelectedPage("Other");r=K.DataModule().GetLocal().hero.Get(i.id);r&&(t.m_Count.visible=!1,t.m_icon.url=x.GetIcon("Hero_"+r.uiRes),t.m_ItemName.text=K.DataModule().GetLz().GetText("Hero_"+r.ID))}else if(i.type==Z.HeroTryTimeCard){t.m_c1.setSelectedPage("Other");h=K.DataModule().GetLocal().hero.Get(i.id);h&&(t.m_Count.visible=!1,t.m_icon.url=x.GetIcon("Hero_"+h.uiRes),t.m_ItemName.text=K.DataModule().GetLz().GetText("Hero_"+h.ID)+"体验卡")}else if(i.type==Z.UnlockHero){t.m_c1.setSelectedPage("Other");var m=K.DataModule().GetLocal().hero.Get(i.id);m&&(t.m_Count.visible=!1,t.m_icon.url=x.GetIcon("Hero_"+m.uiRes),t.m_ItemName.text=K.DataModule().GetLz().GetText("Hero_Unlock")+"\n"+K.DataModule().GetLz().GetText("Hero_"+m.ID))}else if(i.type==Z.Box){t.m_Count.visible=!1;r=i.id.split("_"),h=r[0]+"_"+r[1];t.m_icon.url=x.GetIcon("box_"+h),1<i.count&&(t.m_Count.visible=!0,t.m_Count.text="x"+i.count)}else if(i.type==Z.WeaponSkin){t.m_c1.setSelectedPage("Gear");m=K.DataModule().GetLocal().weaponSkin.Get(i.tableID).uiRes;t.m_gear.m_icon.url=x.GetIcon(m),t.m_ItemName.text="",t.m_Count.text="",1<i.count&&(t.m_Count.text="x"+i.count.toString()),t.m_gear.m_leveltext.text="",t.m_gear.m_rare_bg.visible=!0,t.m_gear.m_rare_bg.url="ui://InGameUI/text_rare_Image_"+i.rare,t.m_gear.m_isEquited.visible=!1,t.m_gear.m_isEquitedBg.visible=!1,t.m_gear.m_bg.url=x.GetIcon(nt.FGUI_rare+i.rare),t.m_ItemName.color=K.DataModule().GetLocal().gameRule.Get("GearGrade"+i.rare).F6,t.m_Image_Piece.visible=!0,0==i.count?(t.m_Image_Piece.visible=!1,t.m_ItemName.text=K.DataModule().GetLz().GetText("WeaponSkinName_"+i.tableID)):t.m_ItemName.text=K.DataModule().GetLz().GetText("WeaponSkinName_"+i.tableID)+K.DataModule().GetLz().GetText("debris")}else if(i.type==Z.HeroPiece){t.m_c1.setSelectedPage("Gear");r=K.DataModule().GetLocal().hero.Get(i.tableID);t.m_gear.m_icon.url=x.GetIcon("Hero_"+r.uiRes),t.m_gear.m_leveltext.text="",t.m_gear.m_rare_bg.visible=!0,t.m_gear.m_rare_bg.url="ui://InGameUI/text_rare_Image_"+i.rare,t.m_gear.m_isEquited.visible=!1,t.m_gear.m_isEquitedBg.visible=!1,t.m_gear.m_bg.url=x.GetIcon(nt.FGUI_rare+i.rare),t.m_gear.m_icon.scaleX=.574,t.m_gear.m_icon.scaleY=.574,r&&(t.m_Count.text="",1<i.count&&(t.m_Count.text="x"+i.count.toString()),t.m_ItemName.text=K.DataModule().GetLz().GetText("Hero_"+r.ID)+K.DataModule().GetLz().GetText("debris"),t.m_ItemName.color=K.DataModule().GetLocal().gameRule.Get("GearGrade"+i.rare).F6),o==va.UIName&&(t.m_icon.url=x.GetIcon("Hero_"+r.uiRes)),t.m_Image_Piece.visible=!0}else if(i.type==Z.Coin)t.m_c1.setSelectedPage("Other"),o==va.UIName||n||a==x.GetIcon("item_CoinHeap")?t.m_icon.url=x.GetIcon("item_CoinHeap"):(t.m_bg.visible=!0,t.m_topIcon.visible=!0,t.m_topIcon.url=x.GetIcon("Coin")),t.m_ItemName.text=K.DataModule().GetLz().GetText("Coin");else if(i.type==Z.Diamond)t.m_c1.setSelectedPage("Other"),o==va.UIName||n||a==x.GetIcon("item_DiamondHeap")?t.m_icon.url=x.GetIcon("item_DiamondHeap"):(t.m_bg.visible=!0,t.m_topIcon.visible=!0,t.m_topIcon.url=x.GetIcon("Diamond")),t.m_ItemName.text=K.DataModule().GetLz().GetText("Diamond"),t.m_Count.text=i.count.toString();else if(i.type==Z.Liveness)t.m_bg.visible=!0,t.m_c1.setSelectedPage("Other"),t.m_icon.url="",t.m_topIcon.visible=!0,t.m_topIcon.url=x.GetFairyGUI_Icon(Z.Liveness),t.m_ItemName.text="活跃度",t.m_Count.text=i.count.toString();else if(i.type==Z.Skill){h=K.DataModule().GetLocal().skill.Get(i.id);t.m_c1.setSelectedPage("Other"),t.m_icon.url=x.GetIcon("Icon_"+h.UIRes),t.m_ItemName.text=K.DataModule().GetLz().GetText("SkillName_"+i.id),t.m_Count.text=""}else if(i.type==Z.LuckyCoin)t.m_bg.visible=!0,t.m_c1.setSelectedPage("Other"),t.m_icon.url="",t.m_topIcon.visible=!0,t.m_topIcon.url=x.GetFairyGUI_Icon("Item_LuckyIcon"),t.m_effice_fluxes.visible=!0,t.m_ItemName.text="好运币",t.m_Count.text="1";else if(i.type==Z.TreasureFreeRefresh)t.m_bg.visible=!0,t.m_c1.setSelectedPage("Other"),t.m_icon.url=x.GetIcon("Item_onLineCoinSpeedUp"),t.m_topIcon.visible=!0,t.m_effice_fluxes.visible=!0,t.m_ItemName.text="宝物刷新卡",t.m_Count.text=i.count.toString();else if(i.type==Z.VipCard)t.m_bg.visible=!0,t.m_c1.setSelectedPage("Other"),t.m_icon.url=x.GetFairyGUI_Icon("icon_golden_pass"),t.m_topIcon.visible=!0,t.m_effice_fluxes.visible=!0,t.m_ItemName.text="Monthly Card",t.m_Count.text="";else if(i.type==Z.FreeVideoCard)t.m_bg.visible=!0,t.m_c1.setSelectedPage("Other"),t.m_icon.url=x.GetFairyGUI_Icon("Silver2"),t.m_topIcon.visible=!0,t.m_effice_fluxes.visible=!0,t.m_ItemName.text="VIP",t.m_Count.text="";else if(i.type==Z.DialFree)t.m_bg.visible=!0,t.m_c1.setSelectedPage("Other"),t.m_icon.url=x.GetIcon("Item_onLineCoinSpeedUp"),t.m_topIcon.visible=!0,t.m_effice_fluxes.visible=!0,t.m_ItemName.text="转盘免费券",t.m_Count.text=i.count.toString();else if(i.type==Z.onLineCoinSpeedUp)t.m_bg.visible=!0,t.m_c1.setSelectedPage("Other"),t.m_icon.url=x.GetIcon("Item_onLineCoinSpeedUp"),t.m_topIcon.visible=!0,t.m_effice_fluxes.visible=!0,t.m_ItemName.text=i.id+"倍金币收益\n"+i.count/60/60+"小时",t.m_Count.text="",t.m_ItemName.y+=27;else if(i.type==Z.HeroTryCard)t.m_bg.visible=!0,t.m_c1.setSelectedPage("Other"),t.m_icon.url=x.GetIcon("Item_HeroTryCard"),t.m_topIcon.visible=!0,t.m_effice_fluxes.visible=!0,t.m_ItemName.text="全英雄体验"+i.count+"次",t.m_Count.text="";else if(i.type==Z.BoxMerge)t.m_bg.visible=!0,t.m_c1.setSelectedPage("Other"),t.m_icon.url="",t.m_topIcon.visible=!0,t.m_topIcon.url=x.GetIcon("WeapenChest"),t.m_ItemName.text=K.DataModule().GetLz().GetText("Text_BoxMerge"),t.m_Count.text=i.count.toString();else if(i.type==Z.NewYearFont){t.m_bg_default.visible=!0,t.m_iconDefault.visible=!0,t.m_c1.setSelectedPage("Default_Icon");let e=t.m_Count.text="";i.data==it.NewYearFonta&&(e=K.DataModule().GetLocal().localization.GetText("newYear_a")),i.data==it.NewYearFontb&&(e=K.DataModule().GetLocal().localization.GetText("newYear_b")),i.data==it.NewYearFontc&&(e=K.DataModule().GetLocal().localization.GetText("newYear_c")),i.data==it.NewYearFontd&&(e=K.DataModule().GetLocal().localization.GetText("newYear_d")),i.data==it.NewYearFonte&&(e=K.DataModule().GetLocal().localization.GetText("newYear_e")),i.data==it.NewYearFontf&&(e=K.DataModule().GetLocal().localization.GetText("newYear_f")),i.data==it.NewYearFontg&&(e=K.DataModule().GetLocal().localization.GetText("newYear_g")),t.m_ItemName.text=K.DataModule().GetLz().GetTextByPar("NewYearKey_Tip2",e),"Default_Icon"!=o?(t.m_bg.visible=!0,t.m_effice_fluxes.visible=!0,t.m_topIcon.visible=!0,t.m_topIcon.url=x.GetFairyGUI_Icon(i.id),t.m_iconNotAutoSize.url=x.GetFairyGUI_Icon("NewYearFont_Bg")):(t.m_bg_default.url=x.GetFairyGUI_Icon("NewYearFont_Bg"),t.m_iconDefault.url=x.GetFairyGUI_Icon(i.id))}else i.type==Z.NewYearKey?(t.m_iconDefault.visible=!0,t.m_iconDefault.url=x.GetFairyGUI_Icon("NewYearKey"+i.id),t.m_bg.visible=!0,t.m_ItemName.text=K.DataModule().GetLz().GetText("NewYearKey_"+i.id),t.m_Count.text=i.count.toString()):i.type==Z.BaoZhu?(t.m_iconDefault.visible=!0,t.m_iconDefault.url=x.GetIcon("BaoZhu"),t.m_iconDefault.scaleX=1.5,t.m_iconDefault.scaleY=1.5,t.m_effice_fluxes.visible=!0,t.m_bg.visible=!0,t.m_ItemName.text=K.DataModule().GetLz().GetText("BaoZhu"),t.m_Count.text=i.count.toString()):i.type==Z.ZombieCoin&&(t.m_c1.setSelectedPage("Other"),t.m_bg.visible=!0,t.m_topIcon.visible=!0,t.m_topIcon.url=x.GetIcon("ZombieCoin"),t.m_Count.text=i.count.toString());i.type==Z.Coin&&(t.m_Count.text=Y.converStr(Y.jia(0,i.count))),""!=a&&(t.m_icon.url=a),""!=o&&(t.m_c1.setSelectedPage(o),t.m_iconNotAutoSize.url=t.m_icon.url),"EN"==k.language&&(20<t.m_ItemName.text.length?t.m_ItemName.fontSize=18:t.m_ItemName.fontSize=25,WC.FixLabelWidth(150,t.m_ItemName)),(t.m_ItemName.visible=e)&&""!=s&&(t.m_ItemName.text=s),""!=l&&(t.m_topIcon.url=l,t.m_topIcon.visible=!0)}static GetHaveChannel(t){if(""==t)return!1;var i=K.PlatformModule().mpCheckChannelList;for(let e=0;e<i.length;e++)if(t==i[e])return!0;return!1}static Guidance_IsUnlock(){if(k.isGuidance){var i=K.DataModule().GetUser().GetData().mergeLevel;if(5==i){K.UIModule().ShowUI(Qp.UIName);let e=K.UIModule().GetUI(Qp.UIName),t=i;5==t&&(t=4),e.SetIndex(t)}}}static Guidance_IsUnlock_Max(){if(k.isGuidance){var i=K.DataModule().GetUser().GetSaveKey("userMedalMax");if(console.log("进入段位解锁",i,K.DataModule().GetUser().GetData().userMedalMax),null!=i&&"false"!=i.data){i=K.DataModule().GetUser().GetData().userMedalMax;K.DataModule().GetUser().AddSaveKey("userMedalMax","false");let e=!1,t=0;1==i.level&&2==i.star&&(W.Guidance_TryHero=!0,e=!0,t=5),2==i.level&&1==i.star&&(e=!0,t=3),e&&(K.UIModule().ShowUI(Qp.UIName),K.UIModule().GetUI(Qp.UIName).SetIndex(t,""))}}}static ShowGuidance(e,t,i=!1,o=0,a=0,n=0,s=0,l=0){K.UIModule().ShowUI(Xp.UIName),K.UIModule().GetUI(Xp.UIName).ShowGuideByBtn(e,t,i,o,a,n,s,l)}static ShowGuidance2(e,t,i=!1,o=0,a=0,n=0,s=0,l=0){K.UIModule().ShowUI(Xp.UIName);let r=K.UIModule().GetUI(Xp.UIName);r.ShowGuideByBtn(e,t,i,o,a,n,s,l),r.SetHideF()}static FreshEquitItem(n,s,l=null,e,r=null,h=null,m=null,d=null,c=""){var u=K.DataModule().GetUser().GetItemByID(s);n.m_redDot.visible=!1,n.m_rare_bg.visible=!1,n.m_isEquitedBg.visible=!1;let p="#FFDE17",g=K.DataModule().GetLocal().gameRule.GetBattlePoint_player().toString(),f="[F1]([F2])",_="[F1]([F2])";if(n.m_c1.setSelectedPage("Other"),null!=u){let a="";if(u.type==Z.Weapon){var I=K.DataModule().GetLocal().weapon.Get(u.id);if(null==I)return;n.m_rare_bg.visible=!0,n.m_rare_bg.url="ui://InGameUI/WeaponType_"+I.Type,n.m_weaponTypeText.url="ui://InGameUI/"+I.Class,n.m_c1.setSelectedPage("Weapon"),n.m_icon.url=x.GetIcon(I.uiRes),n.m_leveltext.text="Lv"+I.Level,u.id==K.DataModule().GetUser().GetEquitWeapon()?n.m_isEquited.visible=!0:n.m_isEquited.visible=!1,n.data=u.id;n.m_bg.url="ui://InGameUI/rare_Image_1",n.m_icon.scaleX=.7,n.m_icon.scaleY=.7,null!=l&&(l.text=K.DataModule().GetLz().GetText("WN_"+I.ID),l.color="#FE7C09");let e=K.DataModule().GetUser().GetEquitWeapon(),t=K.DataModule().GetLocal().gameRule.GetBattlePoint_weapon(e),i=K.DataModule().GetLocal().gameRule.GetBattlePoint_weapon(s);s==e||t==i?a=g:t<i?(f=f.replace("[F1]",g),I=K.DataModule().GetLocal().gameRule.GetBattlePoint_player(i-t)-Number(g),a=f=f.replace("[F2]","+"+I),p="#4BFF60"):(p="#FF7070",_=_.replace("[F1]",g),I=K.DataModule().GetLocal().gameRule.GetBattlePoint_player(t-i)-Number(g),a=_=_.replace("[F2]","-"+I)),r&&(r.text=i.toString()),m&&(d&&(d.url="#4BFF60"==p?x.GetFairyGUI_Icon("arrows_up"):"#FF7070"==p?x.GetFairyGUI_Icon("arrows_down"):""),m.text=a.toString(),m.color=p)}else{I=K.DataModule().GetLocal().gear.Get(u.tableID);if(null==I)return;c==Pa.UIName&&1==u.buyCount&&(n.m_redDot.visible=!0),n.m_rare_bg.visible=!0,n.m_icon.url=x.GetIcon(I.uiRes),k.isUseVer132?n.m_leveltext.text="":n.m_leveltext.text="Lv"+u.level;var C,c="ui://InGameUI/rare_Image_"+I.Rare;n.m_rare_bg.url="ui://InGameUI/text_rare_Image_"+I.Rare,n.m_bg.url=c,n.m_icon.scaleX=1,n.m_icon.scaleY=1;let e,t="",i=(u.type==Z.Chest&&(t=K.DataModule().GetUser().GetEquitChest(),u.id==t?n.m_isEquited.visible=!0:n.m_isEquited.visible=!1),u.type==Z.Foot&&(t=K.DataModule().GetUser().GetEquitFoot(),u.id==K.DataModule().GetUser().GetEquitFoot()?n.m_isEquited.visible=!0:n.m_isEquited.visible=!1),u.type==Z.Head&&(t=K.DataModule().GetUser().GetEquitHead(),u.id==K.DataModule().GetUser().GetEquitHead()?n.m_isEquited.visible=!0:n.m_isEquited.visible=!1),0),o=(u.type==Z.Ring?(c=K.DataModule().GetUser().GetEquitRing1(),C=K.DataModule().GetUser().GetEquitRing2(),i=""==c||""==C?0:K.DataModule().GetLocal().gameRule.GetBattlePoint_gear(K.DataModule().GetUser().GetItemByID(C)),u.id!=c&&u.id!=C||(i=K.DataModule().GetLocal().gameRule.GetBattlePoint_gear(u)),u.id==c||u.id==C?n.m_isEquited.visible=!0:n.m_isEquited.visible=!1):i=""==t?0:(e=K.DataModule().GetUser().GetItemByID(t),K.DataModule().GetLocal().gameRule.GetBattlePoint_gear(e)),K.DataModule().GetLocal().gameRule.GetBattlePoint_gear(u));s==t||i==o?a=g:i<o?(f=f.replace("[F1]",g),c=K.DataModule().GetLocal().gameRule.GetBattlePoint_player(o-i)-Number(g),a=f=f.replace("[F2]","+"+c),p="#4BFF60"):(p="#FF7070",_=_.replace("[F1]",g),C=K.DataModule().GetLocal().gameRule.GetBattlePoint_player(i-o)-Number(g),a=_=_.replace("[F2]","-"+C)),d&&(d.url="#4BFF60"==p?x.GetFairyGUI_Icon("arrows_up"):"#FF7070"==p?x.GetFairyGUI_Icon("arrows_down"):""),r&&(r.text=o.toString()),m&&(m.text=a.toString(),m.color=p),n.data=u.id,null!=l&&(s=K.DataModule().GetLocal().gameRule.Get("GearGrade"+I.Rare),l.color=s.F6,h.color=s.F6,l.text=K.DataModule().GetLz().GetText("GN_"+I.ID),c=K.DataModule().GetLz().GetText("Rare"+I.Rare),h.text=c)}}n.m_isEquitedBg.visible=n.m_isEquited.visible}static IsShare(e){e.m_type.getController("showType").setSelectedPage("video")}static IsVideoAndShare(e){return e.m_type.getController("showType").setSelectedPage("video"),!1}static TopUI_TipShow(e){let t=K.UIModule().GetUI(Mo.UIName);null!=t&&t.SetTipShow(e)}static BannerAdUp_Show_Call(e){K.UIModule().GetUI(Mo.UIName).SetBannerUp_Call(e)}static WeaponSkinComShow_Refresh(e,t,i,o){K.UIModule().GetUI(bC.UIName).SetShowInfo(e,t,i,o)}static WeaponSkin_TryId(e,t,i,o=!0){K.UIModule().GetUI(lg.UIName).SetShowInfo(e,t,i,o)}static NameDisplayProcessing(e,t=5){return e.length>t?e.substr(0,t)+"...":e}static DetectAndShowUnlockUI(){let o=K.DataModule().GetUser().GetItemByType(Z.WeaponSkin);for(let i=0;i<o.length;i++)if("true"==o[i].data&&0==o[i].buyCount){WC.ShowGetReward([o[i]]);let t=K.UIModule().GetUI(Qg.UIName);if(t.BtnTypeController("2"),o[i].buyCount=1,0<t.view.m_rewardList.numChildren){let e=t.view.m_rewardList.getChildAt(0);e.m_Image_Piece.visible=!1,e.m_ItemName.text=K.DataModule().GetLz().GetText("WeaponSkinName_"+o[i].tableID),e.m_effice_fluxes.visible=!0}return void K.DataModule().GetUser().SaveData()}let i=K.DataModule().GetUser().GetItemByType(Z.HeroPiece);for(let e=0;e<i.length;e++)if("true"==i[e].data&&0==i[e].buyCount){let t=K.DataModule().GetUser().NewUserItemData();t.id=i[e].tableID,t.type=Z.UnlockHero,k.useHeroNoUnlock&&(t.type=Z.Hero),i[e].buyCount=1;var a=K.DataModule().GetLocal().hero.Get(i[e].tableID);if(a&&!k.useHeroNoUnlock){if(a.WatchVideo2Get){WC.ShowGetReward([t]);let e=K.UIModule().GetUI(Qg.UIName);k.useHeroNoUnlock||(e.BtnTypeController("3"),e.view.m_title.setSelectedIndex(2)),0<e.view.m_rewardList.numChildren&&(e.view.m_rewardList.getChildAt(0).m_effice_fluxes.visible=!0),e.videoCallBack.AddCallBack(this,function(){WC.GetRewardBtnFun(0,function(){K.UIModule().HideUI(Qg.UIName),WC.GetItemDataAndIsShowBox(at.coverHero,["Hero_"+t.id],0)},at.coverHero,e.view.m_videoGetBtn)})}}else if(k.useHeroNoUnlock){WC.GetItemDataAndIsShowBox("",["Hero_"+t.id],0);let e=K.UIModule().GetUI(ya.UIName);e&&e.view&&(a=t.id,K.DataModule().GetUser().GetData().nowChooseHero=a,e.RefreshList())}return void K.DataModule().GetUser().SaveData()}}static GetENStrSize(e){return 150<e.length?18:20}static showNativeAdoff(){}static hideNativeAd11(){}static GetInGameDebris(){}static Btn3Controller(e,t){(T.IS_OPPO_PLATFORM||T.IS_VIVO_PLATFORM)&&t&&(t.m_n75.visible=!1)}static GetRewardUI_BtnController(e){(T.IS_OPPO_PLATFORM||T.IS_VIVO_PLATFORM)&&(e.m_n75.visible=!1)}static OppoBtnAd(e){}static GetTextID(e){return K.DataModule().GetLz().GetText(e)}static GearSetLv(e,t,i,o){let a=K.DataModule().GetUser().GetData(),n=a.mergeLevel,s=a.userLevel.level,l=1,r=K.DataModule().GetLocal().gameRule.GetDropLevel(),h=Math.ceil((n+s)/r.F1),m=h-t;t=e+"_"+(l=(l=(l=(l=f.GetF1_F2RandomValue(3,h))>=h?h:l)<m?m:l)>=r.F2?r.F2-1:l)+"_"+i+"_1";return K.DataModule().GetUser().GetUserItemData(t,!1,o)}static ShowUI_WindowInfoUI(e,t){let i=K.UIModule().GetUI(LC.UIName);i.Show(),i.SetFun(e,t)}static skipBtnDelayTime(e){var t;e&&(0<(t=K.DataModule().GetPlatform().PlatformData.SkipBtnDelayTimes)?(e.visible=!1,Laya.timer.once(1e3*t,this,function(){try{e&&(e.visible=!0)}catch(e){console.log("resUI",e)}})):e.visible=!0)}static RandomAdBtnPosTow(e,t,i=0,o=!0){k.Platform!=T.OPPO&&k.Platform!=T.VIVO&&k.Platform!=T.WECHAT||(e.visible?(this.pos4=e.x,t.visible?(this.pos5=t.x,Math.random()<.5?(t.x=this.pos4,e.x=this.pos5):(t.x=this.pos5,e.x=this.pos4)):o&&(e.x=i/2-e.width/2)):o&&(t.x=i/2-t.width/2))}static UseCdk_key(r){let e={ProjectID:k.ProjectID,CDKEY:r,Version:"1.0.1"};T.ProjectSubCode&&(e={ProjectID:"cq_android_qsll",CDKEY:r,Version:""}),k.IsInWebTest&&(e.ProjectID="tt_ndskqa"),"paiwei"==r&&(e.Version="1.0.47"),console.log("请求cdk数据",e.ProjectID+"&&"+e.CDKEY+"&&"+e.Version),K.NetModule().Request(e,"myurl://"+k.isQQurl+"sh.fcapi.data-eye.cn/IOG_CDKEY/Check_V2",this,function(e){if(e)if(1==e.status){var t=A.SystemTime,i=e.serverTS;try{if(Math.abs(t-1e3*i)>=f.Time_OneDay)return void WC.TopUI_TipShow("时间效验失败");var o,a,n=K.DataModule().GetUser().GetItemByTypeAndId(Z.SaveDataItem,r);if(null!=n&&"-1"==n.data)return void("EN"==k.language?WC.TopUI_TipShow("Collected"):WC.TopUI_TipShow("Claimed!"));if(null!=n&&t/1e3<Number(n.data))return void WC.TopUI_TipShow("Today Claimed!");if(z.Instance.ChuanQuStatistics(70046),null==K.DataModule().GetUser().GetSaveKey("cdkKeyTime")&&K.DataModule().GetUser().AddSaveKey("cdkKeyTime",K.DataModule().GetUser().GetData().loginDay.toString()),"paiwei"==r&&K.DataModule().GetUser().AddSaveKey("btn_cq_cdk","true"),"vip520"==r)return o=["WaterGun","GuGuChicken","RubberGun","EpicAss"],a=[Z.WeaponSkin+"_"+o[f.GetF1_F2RandomValue(0,3)]+"_2",Z.Diamond+"_188"],WC.GetItemDataAndIsShowBox(at.CDK,a,0),void K.DataModule().GetUser().AddSaveKey(r,e.data.RefreshTS.toString());if(null!=e.data&&1<=e.data.ItemData.length){let t=e.data.ItemData;for(let e=0;e<t.length;e++)if(-1!=t[e].indexOf(Z.HeroTryTimeCard)&&-1!=t[e].indexOf("-")){t[e],t.splice(e,1);break}WC.GetItemDataAndIsShowBox(at.CDK,t,0),K.DataModule().GetUser().AddSaveKey(r,e.data.RefreshTS.toString())}if("SuperAccount"==e.data.ItemID){console.warn("使用超级用户"),K.DataModule().GetUser().GetData(),WC.TopUI_TipShow("获得超级账号成功,请刷新游戏!"),Laya.LocalStorage.setItem("SuperAccount",A.SystemTime.toString());var s=K.DataModule().GetUser().GetUserDataStr();Laya.LocalStorage.setItem("SuperAccountData",s),K.DataModule().GetUser().SetUserData(K.ResModule().GetJson(x.UserData2).user)}else if("HappyWeekend_0116"==e.data.ItemID)try{var l=K.DataModule().GetUser().GetItemByTypeAndId(Z.SaveDataItem,"HappyWeekend_0116");if(l&&"true"==l.data)return void WC.TopUI_TipShow("Claimed!");let e=[],t=(e.push(Z.NewYearKey+"_"+tt.Gold+"_1"),e.push("Diamond_188"),WC.GetItemDataAndIsShowBox(at.CDK,e,0),q.NowGameWorld.GetSingleCompoent(Fp).addDropBoxNowCount=5,K.DataModule().GetUser().GetMergeNowVacancy());if(0<(t=5<t?5:t)){let e=[];e.push(K.DataModule().GetUser().GetUserItemData(Z.BoxMerge+"_"+t)),WC.ShowGetReward(e)}K.DataModule().GetUser().AddSaveKey("HappyWeekend_0116","true")}catch(e){}else if("NewYear_Words_NotLe"==e.data.ItemID){let e=K.DataModule().GetLocal().lottery.CreationEquip("Item_Event_2021NewYear");for(;-1!=e.indexOf("NewYearFontg");)e=K.DataModule().GetLocal().lottery.CreationEquip("Item_Event_2021NewYear");let t=K.DataModule().GetUser().GetUserItemData(e),i=[];i.push(t),Laya.LocalStorage.setItem(r,"true"),WC.ShowGetReward(i),K.DataModule().GetUser().GetItem(i,at.CDK)}else if("NewYear_Words_Le"==e.data.ItemID){let e=K.DataModule().GetLocal().lottery.CreationEquip("Item_Event_2021NewYear");for(;-1==e.indexOf("NewYearFontg");)e=K.DataModule().GetLocal().lottery.CreationEquip("Item_Event_2021NewYear");Laya.LocalStorage.setItem(r,"true");let t=K.DataModule().GetUser().GetUserItemData(e),i=[];i.push(t),WC.ShowGetReward(i),K.DataModule().GetUser().GetItem(i,at.CDK)}}catch(e){console.warn("出错了",e)}}else"EN"==k.language?WC.TopUI_TipShow("There is an error in the input"):WC.TopUI_TipShow(e.data);console.log("请求cdk成功",e)},function(e){console.log("请求cdk失败",e)},!0)}static RandomAdBtnPosThree(e,t,i,o=0){var a,n;k.Platform!=T.OPPO&&k.Platform!=T.VIVO||(i.visible?e.visible?(this.pos1=e.x,this.pos2=t.x,this.pos3=i.x,0==(a=Math.floor(4*Math.random()))?(e.x=this.pos2,t.x=this.pos3,i.x=this.pos1):1==a?(e.x=this.pos3,t.x=this.pos2,i.x=this.pos1):2==a&&(e.x=this.pos1,t.x=this.pos3,i.x=this.pos2)):(n=(a=o/2)-t.width,a=10+a,t.x=n,i.x=a):e.visible?Math.random()<.5&&(i=(n=o/2)-t.width,e.x=10+n,t.x=i):(n=(a=o/2)-t.width,i=10+a,t.x=n,e.x=i))}static LeYouSdkIsOn(){return k.Platform==T.WECHAT||k.Platform==T.OPPO||k.Platform==T.VIVO}static ShowGetReward(e,t="",i=!1,o="",a=null){k.isTestLog&&console.log("展示奖励",e,t),e!=[]&&(K.UIModule().ShowUI(Qg.UIName),K.UIModule().GetUI(Qg.UIName).ShowReward(e,t,i,o,a))}static ShowMatchNewUI(){K.UIModule().ShowUI(Ja.UIName)}static ShowNativeAd(t,i,o,a){try{if(WC.isClickOppoAD=!0,k.Platform==T.VIVO||k.Platform==T.OPPO)if(K.DataModule().GetPlatform().PlatformData.NativeIsShow){let e=[];k.Platform==T.OPPO&&(e=Do.Instance.nativeAdList1),0<(e=k.Platform==T.VIVO?vo.Instance.nativeAdList1:e).length?(WC.refreashNativeAd(t,i,o,a),t&&t.onClick(this,function(){WC.isClickOppoAD&&t.visible&&WC.onClickAdData(t,i,o,a,"66666666666666")}),i&&(i.onClick(this,function(){i.visible&&WC.onClickAdData(t,i,o,a,"5555555555555")}),i.m_offBtn.onClick(this,function(){i.visible=!1,WC.closeBtnClickAd(t,i,o,a)})),o&&(o.m_offBtn.onClick(this,function(){o.visible=!1,WC.closeBtnClickAd(t,i,o,a)}),o.onClick(this,function(){o.visible&&WC.onClickAdData(t,i,o,a,"22222222222")}),o.m_OppoLookBtn.onClick(this,function(){o.visible&&WC.onClickAdData(t,i,o,a,"333333333333")})),a&&(a.onClick(this,function(){a.visible&&WC.onClickAdData(t,i,o,a,"4444444444444")}),a.m_ColseBannerNativeBtn.onClick(this,function(){a.visible=!1,WC.closeBtnClickAd(t,i,o,a)}))):(this.hideAllNativeAd(t,i,o,a),k.Platform==T.OPPO&&Do.Instance.resetLoad1(),k.Platform==T.VIVO&&vo.Instance.resetLoad1())}else this.hideAllNativeAd(t,i,o,a);else this.hideAllNativeAd(t,i,o,a)}catch(t){console.error("原生广告显示报错:",t)}}static closeBtnClickAd(e,t,i,o){WC.isClickOppoAD=!1;var a=K.DataModule().GetPlatform().PlatformData,n=Math.floor(100*Math.random());console.warn("原生点击关闭:",a.NativeBtnClickAdProBability,n),a.NativeBtnClickAdProBability>n&&(console.warn("原生点击关闭中奖了"),WC.onClickAdData(e,t,i,o,"111111111"))}static onClickAdData(t,i,o,a,e){if(console.warn("原生广告点击,",e),null!=this.adData){k.Platform==T.OPPO&&Do.Instance.ReportAdClick1(this.adData.adId),k.Platform==T.VIVO&&vo.Instance.ReportAdClick1(this.adData.adId);let e=this;k.Platform==T.OPPO&&Do.Instance.resetLoad1(function(){e.refreashNativeAd(t,i,o,a)}),k.Platform==T.VIVO&&vo.Instance.resetLoad1(function(){e.refreashNativeAd(t,i,o,a)})}}static refreashNativeAd(e,t,i,o){let a=K.DataModule().GetPlatform().PlatformData.NativeBtnLookText,n=[],s=(k.Platform==T.OPPO&&(n=Do.Instance.nativeAdList1),k.Platform==T.VIVO&&(n=vo.Instance.nativeAdList1),this.adData=n[Math.floor(Math.random()*n.length)],"ui://InGameUI/pdd");0<this.adData.imgUrlList.length&&(s=this.adData.imgUrlList[0],-1!=this.adData.imgUrlList[0].indexOf(".png")?s=s.split(".png")[0]+".png":-1!=this.adData.imgUrlList[0].indexOf(".jpg")&&(s=s.split(".jpg")[0]+".jpg"),console.warn("原生广告图片",s,this.adData,n)),e&&(a?e.m_textCollot.setSelectedPage("look"):e.m_textCollot.setSelectedPage("ad")),t&&(t.m_Icon.url=s,t.m_tab.url=this.adData.logoUrl),i&&(a?i.m_OppoLookBtn.m_textCollot.setSelectedPage("look"):i.m_OppoLookBtn.m_textCollot.setSelectedPage("ad"),i.m_Icon.url=s,i.m_tab.url=this.adData.logoUrl),o&&(o.m_Icon.url=s,o.m_tab.url=this.adData.logoUrl),k.Platform==T.OPPO&&Do.Instance.ReportAdShow1(this.adData.adId),k.Platform==T.VIVO&&vo.Instance.ReportAdShow1(this.adData.adId)}static hideAllNativeAd(e,t,i,o){k.Platform!=T.VIVO&&k.Platform!=T.OPPO||(e&&(e.visible=!1),t&&(t.visible=!1),i&&(i.visible=!1),o&&(o.visible=!1))}},j=WC,ZC=(j.messageId="",j.SetUnLock=!1,j.isClickOppoAD=!1,j.adData=null,(G=Z=Z||{}).Weapon="Weapon",G.Head="Head",G.Chest="Chest",G.Foot="Foot",G.Ring="Ring",G.Hero="Hero",G.UnlockHero="UnlockHero",G.Coin="Coin",G.Diamond="Diamond",G.Gear="Gear",G.Box="Box",G.NextDouble="NextDouble",G.NewYearFont="NewYearFont",G.NewYearKey="NewYearKey",G.WeaponSkin="WeaponSkin",G.WeaponTryCard="WeaponTryCard",G.HeroPiece="HeroPiece",G.HeroPiece_Random="HeroPiece_Random",G.WeaponSkinPiece_Random="WeaponSkinPiece_Random",G.LuckyCoin="LuckyCoin",G.BoxMerge="BoxMerge",G.InGameHongBao="InGameHongBao",G.BaoZhu="BaoZhu",G.GridKey="GridKey",G.Liveness="Liveness",G.SaveDataItem="SaveDataItem",G.HeroTryTimeCard="HeroTryTimeCard",G.ChestKey="ChestKey",G.onLineCoinSpeedUp="onLineCoinSpeedUp",G.TreasureFreeRefresh="TreasureFreeRefresh",G.DialFree="DialFree",G.FreeVideoCard="FreeVideoCard",G.VipCard="VipCard",G.HeroTryCard="HeroTryCard",G.DoubleStar="DoubleStar",G.Exp="EXP",G.Bolt="Bolt",G.Battery="Battery",G.TurretItem="TurretItem",G.AddItem="AddItem",G.AddWeapon="AddWeapon",G.AddSkill="AddSkill",G.ZombieCoin="ZombieCoin",G.Skill="Skill",(e=VC=VC||{}).Gear="Gear",e.Head="Head",e.Chest="Chest",e.Foot="Foot",e.Ring="Ring",class{constructor(){this.hasSaveUserDataKey="HasSaveUserData12",this.UserDataKey="UserData10",this.chooseModeId="",this.newGetHeroList=[],this.newGetBookList=[],this.userId="Player",this.InterstitialAdNumberGames=0,this.BannerCloseTimesTodayKey="BannerCloseTimesToday",this.InterstitialAdNumberBuyBox=0,this.InterstitialAdNumberBuyGem=0,this.InterstitialAdNumberSign=0,this.InterstitialAdNumberFreeLv=0,this.isShowSaveAppToDesktop=!1,this.isFistGame=!1,this.AuthorizationInterface=!1,this.ShareWeaponKey="ShareWeaponKey",this.ShareHeroKey="ShareHeroKey",this.LotteryDataKey="LotteryDataKey",this.ShowGetHerKey="ShowGetHerKey",this.ShowFeiTianBoxKey="ShowFeiTianBoxKey",this.NetSaveDataTime=0,this.nowHuoYueCont=0,this.speedTime=6e4,this.speedTimeDouble=10}Init(){this.LoadData(),this.SetMyGame()}SetMyGame(){k.IsInWebTest&&(k.isGuidance=!0),k.Platform,T.TT,K.DataModule().GetLocal().hero.hero_LimitList.push("PrincePorgy"),k.Platform==T.WECHAT&&(k.luandouNew=!0,k.isNew2=!0),k.Platform==T.QQ&&(k.isGuidance=!0)}GetShowFeiTianBoxTimes(){var e=Laya.LocalStorage.getItem(this.ShowFeiTianBoxKey);return null!=e&&""!=e?parseInt(e):(Laya.LocalStorage.setItem(this.ShowFeiTianBoxKey,"0"),0)}SetShowFeiTianBoxTimes(){var t=Laya.LocalStorage.getItem(this.ShowFeiTianBoxKey);if(null!=t&&""!=t){let e=parseInt(t)+1;Laya.LocalStorage.setItem(this.ShowFeiTianBoxKey,e.toString())}else Laya.LocalStorage.setItem(this.ShowFeiTianBoxKey,"1")}GetShowGetHerKey(){var e=Laya.LocalStorage.getItem(this.ShowGetHerKey);return null!=e&&""!=e?e:""}SetShowGetHerKey(t){var i=Laya.LocalStorage.getItem(this.ShowGetHerKey);if(null!=i&&""!=i){let e=i+","+t;Laya.LocalStorage.setItem(this.ShowGetHerKey,e.toString())}else Laya.LocalStorage.setItem(this.ShowGetHerKey,t)}GetLotteryData(){var e=Laya.LocalStorage.getItem(this.LotteryDataKey);return null!=e&&""!=e?e:""}SetLotteryData(e){Laya.LocalStorage.setItem(this.LotteryDataKey,e)}GetShareWeaponTimes(){var e=Laya.LocalStorage.getItem(this.ShareWeaponKey);return null!=e&&""!=e?parseInt(e):(Laya.LocalStorage.setItem(this.ShareWeaponKey,"0"),0)}addShareWeaponTimes(){var t=Laya.LocalStorage.getItem(this.ShareWeaponKey);if(null!=t&&""!=t){let e=parseInt(t)+1;Laya.LocalStorage.setItem(this.ShareWeaponKey,e.toString())}else Laya.LocalStorage.setItem(this.ShareWeaponKey,"1")}GetShareHeroTimes(){var e=Laya.LocalStorage.getItem(this.ShareHeroKey);return null!=e&&""!=e?parseInt(e):(Laya.LocalStorage.setItem(this.ShareHeroKey,"0"),0)}GetAgeinReaward(){var e=Laya.LocalStorage.getItem("IsGetAgeinReaward");return null!=e&&""!=e?e:(Laya.LocalStorage.setItem("IsGetAgeinReaward","0"),"0")}SetAgeinReaward(e){Laya.LocalStorage.getItem("IsGetAgeinReaward"),Laya.LocalStorage.setItem("IsGetAgeinReaward",e)}addShareHeroTimes(){var t=Laya.LocalStorage.getItem(this.ShareHeroKey);if(null!=t&&""!=t){let e=parseInt(t)+1;Laya.LocalStorage.setItem(this.ShareHeroKey,e.toString())}else Laya.LocalStorage.setItem(this.ShareHeroKey,"1")}LoadData(){if(k.AuthorizationInterface&&(null!=(e=Laya.LocalStorage.getItem("AuthorizationInterface"))&&""!=e?"true"==e&&(this.AuthorizationInterface=!0):Laya.LocalStorage.setItem("AuthorizationInterface","false")),SC.GetTime(),"Save"!=Laya.LocalStorage.getItem(this.hasSaveUserDataKey)||ZC.GetIsLoadSave()){if(ZC.GetIsIoGamesSavePlatform())return e=Laya.LocalStorage.getItem(this.UserDataKey),this.userData=null!=e&&""!=e?JSON.parse(e):K.ResModule().GetJson(x.UserData).user,SC.SetUserDataLoadEnd(),Laya.LocalStorage.setItem("NewUserDataTT","true"),SC.IsSetSave=!0,SC.IsSetSaveEnd||SC.GetSaveUserData(),void this.LoadNetSaveData();Laya.LocalStorage.setItem(this.hasSaveUserDataKey,"Save"),this.userData=K.ResModule().GetJson(x.UserData).user,Laya.LocalStorage.setItem(this.UserDataKey,JSON.stringify(this.userData)),SC.SetUserDataLoadEnd(),b.Warn("模版")}else{var e=Laya.LocalStorage.getItem("SuperAccount");null!=e&&""!=e?(console.log("超级账号",e),A.SystemTime-Number(e)>f.Time_Week?(e=Laya.LocalStorage.getItem("SuperAccountData"),this.userData=JSON.parse(e),Laya.LocalStorage.setItem("SuperAccount",""),Laya.LocalStorage.setItem("SuperAccountData",""),this.SaveData()):(e=Laya.LocalStorage.getItem(this.UserDataKey),this.userData=JSON.parse(e),b.Warn("储存1",this.userData))):(e=Laya.LocalStorage.getItem(this.UserDataKey),this.userData=JSON.parse(e),b.Warn("储存2",this.userData)),SC.SetUserDataLoadEnd()}}SetZombieUnlockItemList(e){this.userData.ZombieUnlockItemList=e,this.SaveData()}SetZombieUnlockZMpassiveSkills(e){this.userData.ZombieUnlockZMpassiveSkills=e,this.SaveData()}IsUseTryWeaponIng(){var t=K.DataModule().GetUser().GetData().equipList[0],t=K.DataModule().GetUser().GetItemByID(t);if(""!=t.data){var e=K.DataModule().GetUser().GetItemByTypeAndId(Z.WeaponSkin,t.data);if(!e||"true"!=e.data){let e=K.DataModule().GetUser().GetItemByTypeAndId(Z.WeaponTryCard,t.data);e&&1<=e.count&&(--e.count,this.SaveData())}}}GetAuthorizationInterface(){return this.AuthorizationInterface}setAuthorizationInterface(){Laya.LocalStorage.setItem("AuthorizationInterface","true")}GetUserDataStr(){return JSON.stringify(this.userData)}GetMaxUserData(){let e=this.userData,o=this.userData.itemList,a=[],n=e.equipList,t=JSON.stringify(this.userData);JSON.parse(t);for(let i=0;i<o.length;i++)if((o[i].type==Z.Weapon||o[i].type==Z.Head||o[i].type==Z.Chest||o[i].type==Z.Foot||o[i].type==Z.Ring)&&o[i].type!=Z.Weapon){let t=!1;for(let e=0;e<n.length;e++)if(o[i].id==n[e]){t=!0;break}0==t&&a.push(o[i])}}static GetIsLoadSave(){if(!ZC.GetIsIoGamesSavePlatform())return!1;var e=Laya.LocalStorage.getItem("NewUserDataTT"),t=Laya.LocalStorage.getItem("NewUserData");return console.log("存储数值s1 s2",t,e),"true"==t||"true"==e}static GetIsIoGamesSavePlatform(){return!(k.IsInWebTest||!T.IS_233&&k.Platform!=T.ANDROID&&k.Platform!=T.TT&&k.Platform!=T.WECHAT&&k.Platform!=T.QQ)}GetNowUserDataString(){return JSON.stringify(this.userData)}LoadNetSaveData(){this.NetSaveData(),Laya.timer.loop(1e3,this,this.NetSaveData)}NetSaveData(){this.NetSaveDataTime++,600<this.NetSaveDataTime||W.isSuperAccount?Laya.timer.clear(this,this.NetSaveData):(console.log("读取服务器数据中",W.loginDataEnd,W.statrGame),W.loginDataEnd&&W.statrGame&&(Laya.LocalStorage.setItem(this.hasSaveUserDataKey,"Save"),Laya.timer.clear(this,this.NetSaveData),Laya.LocalStorage.setItem("NewUserData","false"),Laya.LocalStorage.setItem("NewUserDataTT","false"),console.log("准备引用服务器存储",W.userData_saveData),""!=W.userData_saveData&&"x"!=W.userData_saveData&&((JSON.parse(W.userData_saveData).mergeLevel>=this.userData.mergeLevel||k.IsGM)&&(this.userData=JSON.parse(W.userData_saveData)),Laya.LocalStorage.setItem(this.UserDataKey,JSON.stringify(this.userData)),this.SaveData(),W.OneGameOver--,eG.ResetGame()),SC.SetUserDataLoadEnd()))}SetUserDataSave(e){e=JSON.parse(e);this.userData=e.user,SC.SetUserDataLoadEnd(),eG.ResetGame()}IsSuperAccount(){return null!=this.GetItemByTypeAndId(Z.SaveDataItem,"SuperAccount")}IsFreeVideo(){return null!=this.GetItemByTypeAndId(Z.SaveDataItem,"FreeVideo")}SetNowGuidance(e){var t=this.userData.nowGuide;""!=t&&(t==qp.MergeWeapon&&(ZC.isOneNewUser=!0),no.Statistics_T0A(t),eg.gt_guide(t),this.userData.nowGuide=e,this.SaveData())}BuyHero(e,t=!1){var i=K.DataModule().GetLocal().hero.Get(e);return t?(-1==this.userData.heroList.indexOf(e)&&this.AddHero(e,"购买英雄"),this.SaveData(),0):""!=i.Coin?Y.isGreaterThanOrEqualTo(this.userData.coin,i.Coin)?(this.SubCoin(i.Coin,at.buyHero),-1==this.userData.heroList.indexOf(e)&&this.AddHero(e,"购买英雄"),this.SaveData(),0):1:0!=i.ZCoin?0<(t=K.DataModule().GetUser().GetItemByType(Z.ZombieCoin)).length&&t[0].count>=i.ZCoin?(this.changeItem(Z.ZombieCoin,i.ZCoin),-1==this.userData.heroList.indexOf(e)&&this.AddHero(e,"购买英雄"),this.SaveData(),0):3:this.userData.diamond>=i.Diamond?(this.ChangeDiamond(-i.Diamond,at.buyHero),-1==this.userData.heroList.indexOf(e)&&this.AddHero(e,"购买英雄"),this.SaveData(),0):2}isBuyHero(e,t=!1){e=K.DataModule().GetLocal().hero.Get(e);return t?0:""!=e.Coin?Y.isGreaterThanOrEqualTo(this.userData.coin,e.Coin)?0:1:this.userData.diamond>=e.Diamond?0:2}ChangeHero(e){K.DataModule().GetUser().GetData().nowChooseHero=e,K.DataModule().GetUser().SaveData()}ResetData(){b.Warn("已重置数据请重启"),Laya.LocalStorage.clear()}GetWeaponBuyTimes(t){var i=this.GetData().itemList;for(let e=0;e<i.length;e++)if(i[e].id==t)return i[e].buyCount;return 0}AddWeaponBuyTimes(t){let i=this.GetData().itemList;for(let e=0;e<i.length;e++)if(i[e].id==t)return i[e].buyCount++,void this.SaveData()}UnlockWeapon(t){let i=this.GetData().itemList;for(let e=0;e<i.length;e++)if(i[e].id==t)return;K.DataModule().GetUser().AddTask("saveTask_"+zg.newWeapon);var e=K.DataModule().GetLocal().weapon.Get(t),o={id:t,type:"Weapon",count:1,data:"",tableID:t,buyCount:0,rare:e.Rare,level:e.Level,res:""};i.push(o),e.Level>this.GetData().mergeLevel&&(2==e.Level&&k.Platform==T.ANDROID&&"chuanqu"==k.ProjectSubCode&&window.jsCallNative_weaponLv2&&window.jsCallNative_weaponLv2(),this.GetData().mergeLevel=e.Level,k.Platform==T.QQ&&ge.Instance.Report_CustomEvent("武器_"+this.GetData().mergeLevel),z.Instance.LeYou_equipLevel(),z.Instance.LW_StatisticsEvent(1002,this.GetData().userLevel.level.toString())),this.SaveData()}WeaponIsUnlock(t){var i=this.GetData().itemList;for(let e=0;e<i.length;e++)if(i[e].id==t)return!0;return!1}BuyWeaponById_Coin(t){let i=this.userData.mergeMap,e=K.DataModule().GetLocal().weapon.Get(t),o=K.DataModule().GetLocal().weapon.GetPrice(e.Level);if(!Y.isGreaterThanOrEqualTo(K.DataModule().GetUser().GetData().coin,o))return-1;for(let e=0;e<i.length;e++)if(""==i[e])return K.DataModule().GetUser().SubCoin(o,at.buyWenpon),K.DataModule().GetUser().AddWeaponBuyTimes(t),i[e]=t,K.DataModule().GetUser().SaveData(),e;return-2}GetMergeNowVacancy(){let t=this.userData.mergeMap,i=0;for(let e=0;e<t.length;e++)""==t[e]&&(i+=1);return i}BuyWeaponById_Diamond(t){let i=this.userData.mergeMap,e=K.DataModule().GetLocal().weapon.Get(t),o=K.DataModule().GetLocal().weapon.GetPriceDiamond(e.Level);if(this.userData.diamond<o)return-1;for(let e=0;e<i.length;e++)if(""==i[e])return z.Instance.LW_StatisticsEvent(1006,t.split("Weapon")[1],1..toString(),o.toString()),K.DataModule().GetUser().ChangeDiamond(-o,at.buyWenpon),K.DataModule().GetUser().AddWeaponBuyTimes(t),i[e]=t,K.DataModule().GetUser().SaveData(),e;return-2}AddUserKey(e){"end"!=Laya.LocalStorage.getItem("AddUserKey")&&Laya.LocalStorage.setItem("AddUserKey",e.id),K.DataModule().GetUser().AddItemData(e,"");let t=K.UIModule().GetUI(Ua.UIName);t&&t.RefreshKey()}UseUserKey(e,t,i){this.GetItemByTypeAndId(e,t).count-=i,this.SaveData();let o=K.UIModule().GetUI(Ua.UIName);o&&o.RefreshKey()}GetSaveTaskList(){let t=[];for(let e=0;e<this.userData.itemList.length;e++)-1!=this.userData.itemList[e].id.indexOf("saveTask_")&&"-1"!=this.userData.itemList[e].data&&t.push(this.userData.itemList[e]);return t}GetItemByTypeAndId(t,i){for(let e=0;e<this.userData.itemList.length;e++){var o=this.userData.itemList[e];if(o.type==t&&o.id==i)return this.userData.itemList[e]}return null}GetItemByTypeAndtableId(t,i){for(let e=0;e<this.userData.itemList.length;e++){var o=this.userData.itemList[e];if(o.type==t&&o.tableID==i)return this.userData.itemList[e]}return null}GetItemByType(t){let i=[];for(let e=0;e<this.userData.itemList.length;e++){var o=this.userData.itemList[e];o.type==t&&i.push(o)}return i}GetItemByID(t){for(let e=0;e<this.userData.itemList.length;e++){var i=this.userData.itemList[e];if(i.id==t)return i}return null}changeItem(e,t){let i=this.GetItemByID(Z.ZombieCoin);null!=i&&(i.count-=t,this.SaveData())}GetEquitWeapon(){return this.userData.equipList[0]}SetEquitWeapon(e){z.Instance.LW_StatisticsEvent(1009,e.split("Weapon")[1]),this.userData.equipList[0]=e}GetEquitHead(){return this.userData.equipList[1]}SetEquitHead(e){this.userData.equipList[1]=e}GetEquitFoot(){return this.userData.equipList[2]}SetEquitFoot(e){this.userData.equipList[2]=e}GetEquitChest(){return this.userData.equipList[3]}SetEquitChest(e){this.userData.equipList[3]=e}GetEquitRing1(){return this.userData.equipList[4]}SetEquitRing1(e){this.userData.equipList[4]=e}GetEquitRing2(){return this.userData.equipList[5]}SetEquitRing2(e){this.userData.equipList[5]=e}Equip(e){e=K.DataModule().GetUser().GetItemByID(e);null!=e&&(e.type==Z.Weapon&&this.SetEquitWeapon(e.id),e.type==Z.Head&&this.SetEquitHead(e.id),e.type==Z.Chest&&this.SetEquitChest(e.id),e.type==Z.Foot&&this.SetEquitFoot(e.id),e.type==Z.Ring&&(""==this.GetEquitRing1()?this.SetEquitRing1(e.id):(this.GetEquitRing2(),this.SetEquitRing2(e.id)))),this.SaveData()}UnEquip(t){for(let e=0;e<this.userData.equipList.length;e++)this.userData.equipList[e]==t&&(this.userData.equipList[e]="");this.SaveData()}SaveData(){W.isSuperAccount||Laya.LocalStorage.setItem(this.UserDataKey,JSON.stringify(this.userData))}SetNullData(){this.userData=K.ResModule().GetJson(x.UserData).userData,Laya.LocalStorage.setItem(this.UserDataKey,JSON.stringify(this.userData)),Laya.LocalStorage.clear()}SetUserDataSaveForFB(e){var t=JSON.parse(e);this.userData=t;try{SC.SetUserDataLoadEnd(),eG.ResetGame()}catch(e){}}IsHeroUnlock(t){if(k.useHeroNoUnlock&&!this.HeroIsDebris(t))return!0;if(K.DataModule().GetLocal().hero.Get(t).IsUnlock)return!0;var i=this.GetData().unLockHeroList;for(let e=0;e<i.length;e++)if(i[e]==t)return!0;return!1}IsHeroBuy(t){var i=this.GetData().heroList;for(let e=0;e<i.length;e++)if(i[e]==t)return!0;return!1}AddHero(e,t){-1==this.GetData().heroList.indexOf(e)&&(this.GetData().heroList.push(e),no.Statistics_T0H(t,Z.Hero+"_"+e,1,1,0),z.Instance.LeYou_equipDegree_Hero(e),this.IsHeroUnlock(e)||z.Instance.LeYou_Equip_Hero(t,e),"Assassin7"==e?z.Instance.LW_StatisticsEvent(1013):"Plumber"==e&&z.Instance.LW_StatisticsEvent(1012)),this.SaveData()}AddUnLockHero(e,t){-1==this.GetData().unLockHeroList.indexOf(e)&&(this.GetData().unLockHeroList.push(e),no.Statistics_T0H(t,Z.UnlockHero+"_"+e,1,1,0),z.Instance.LeYou_Equip_Hero(t,e)),this.SaveData()}IsGetLevelReward(t,e){var i=this.userData.levelRewardList,o=0==e?i.freeList:i.videoList;for(let e=0;e<o.length;e++)if(o[e]==t)return!0;return!1}LevelReward_IsVideoReward(e){return this.userData.levelRewardList.videoList.length<e}LevelReward_IsFreeReward(e){return this.userData.levelRewardList.freeList.length<e}AddExp(e){this.userData.userLevel.exp+=e,this.GetUserLevel(),this.SaveData()}RefreshTreasureShop(e=!1){let t=1e3*K.DataModule().GetLocal().gameRule.GetShopResetTime(),i=A.SystemTime,o=Laya.LocalStorage.getItem("Treasure_Refresh_Time"),a=!1;if(null!=o&&""!=o&&Math.floor(i-Number(o))>t&&(a=!0),null==o||""==o||a||e){Laya.LocalStorage.setItem("Treasure_Refresh_Time",i.toString());e=K.DataModule().GetLocal().shop.GetShopData();if(k.isTestLog&&console.log("初始化商店数据",e),this.userData.treasureItemList=e,k.isGuidance&&K.DataModule().GetUser().GetData().nowGuide==qp.TreasureUIGuide){let e=K.DataModule().GetUser().GetUserItemData(Z.Head+"_1_2"),t=K.DataModule().GetUser().GetData().treasureItemList[0];t.isBuy=!1,t.data=e}}this.SaveData()}TomorrowRefresh(){let t=K.DataModule().GetUser().GetData().nowTime,i="",e=Laya.LocalStorage.getItem("TomorrowRefresh");if(null!=e&&""!=e)i=e;else{let e=new Date;e.setTime(t);var s=e.getDate(),l=e.getMonth();i=e.getFullYear()+"_"+l+"_"+s}let o=new Date;o.setTime(A.SystemTime);l=o.getDate(),s=o.getMonth(),s=o.getFullYear()+"_"+s+"_"+l;if(K.DataModule().GetUser().GetData().treasureItemList.length<1&&K.DataModule().GetUser().RefreshTreasureShop(),i!=s){this.SetLotteryData(""),Laya.LocalStorage.setItem(this.ShareHeroKey,"0"),Laya.LocalStorage.setItem(this.ShareWeaponKey,"0"),Laya.LocalStorage.setItem("IsGetAgeinReaward","0"),K.DataModule().GetUser().GetData().loginDay+=1,Laya.LocalStorage.setItem("TomorrowRefresh","");let e=K.DataModule().GetLocal().gameRule,o=K.DataModule().GetUser().GetData(),t=this.GetBaoZhuItem(),i=(t&&(b.Warn("爆竹重置"),t.buyCount=0),this.GetBaoZhuGiftSaveItem()),a=(i&&(b.Warn("重置每日爆竹"),i.buyCount=0),K.DataModule().GetUser().AddSaveKey("ModeUI_DayTime"+$I.Zombie,"",0),o.signData.nowDay%7),n=(0==a&&(a=7),o.signData.data[a-1].isSign&&o.signData.nowDay++,o.signNewYearData.nowDay);if(0==n&&(n=7),o.signNewYearData.data[n-1].isSign&&o.signNewYearData.nowDay<7&&o.signNewYearData.nowDay++,7<o.signData.nowDay&&o.signData.nowDay%7==1)for(let e=0;e<o.signData.data.length;e++)o.signData.data[e].isSign=!1;if(K.DataModule().GetUser().GetData().dialTime=1,o.treasureItemList&&5<o.treasureItemList.length){o.treasureItemList[4].repertory=e.GetShopBox1Pertory(),o.treasureItemList[5].repertory=e.GetShopBox2Pertory(),o.treasureItemList[4].data.buyCount=0;let t=K.DataModule().GetLocal().shop.GetAllIndex("Shop4"),i=[];for(let e=0;e<t.length;e++)i.push(t[e].Weight);l=f.GetWeightRandom(i),s=t[l].Bonus,s=(o.treasureItemList[4].data.id=s,o.treasureItemList[4].data.data="0",t[l].GemPrice.split(","));o.treasureItemList[4].price=s[0]}K.DataModule().GetUser().GetData().nowTime=A.SystemTime,K.DataModule().GetLocal().quest.LoadTaskInfo(),K.DataModule().GetUser().GetData().liveness=0,K.DataModule().GetUser().AddSaveKey("luanDouTime","",1),Laya.LocalStorage.setItem(this.ShowFeiTianBoxKey,"0"),SC.TomorrowRefresh(),this.SaveData()}}AddItemData(o,a=""){if(""==o.id&&""==o.type&&""==o.type&&k.isTestLog)console.log("跳过空的数据",o,a);else{let i=this.userData.itemList;for(let t=0;t<i.length;t++)if(o.type==i[t].type&&o.id==i[t].id){i[t].count+=o.count,o.type==Z.SaveDataItem&&(i[t]=o);let e=0;return o.count<0&&(e=1),""!=a&&no.Statistics_T0H(a,this.GetPosKey(o),o.count,i[t].count,e),void this.SaveData()}""!=a&&no.Statistics_T0H(a,this.GetPosKey(o),o.count,o.count,0),i.push(o),this.SaveData()}}GetPosKey(e){let t="";return e.type==Z.NewYearFont?t=e.type+"_"+e.data:e.type==Z.Hero||e.type==Z.UnlockHero?t=e.type+"_"+e.id:e.type==Z.NewYearKey?t=e.type+"_"+e.data:e.type==Z.WeaponSkin?t=e.type+"_"+e.id:e.type!=Z.Foot&&e.type!=Z.Chest&&e.type!=Z.Head&&e.type!=Z.Ring||(t=e.type+"_"+e.rare+"_"+e.level),t}GetUserLevel(){for(;;){var e=K.DataModule().GetLocal().playerLv.Get((this.userData.userLevel.level+1).toString());if(!e){this.userData.userLevel.exp=0,this.userData.userLevel.maxExp=-1;break}if(this.userData.userLevel.maxExp=e.NeedExp,!(this.userData.userLevel.exp>=this.userData.userLevel.maxExp))break;this.userData.userLevel.exp-=this.userData.userLevel.maxExp,this.userData.userLevel.level++;e=this.userData.userLevel.level;z.Instance.ChuanQuStatistics(Number(e<10?"1000"+e:"100"+e)),z.Instance.LW_StatisticsEvent(1001,this.GetData().userLevel.level.toString())}return this.userData.userLevel}AddStarToMedal(){var o=K.DataModule().GetLocal().medal.GetByLevel(this.userData.userMedal.level);if(o){this.SetXinShouGridKey(),this.userData.userMedal.star+1>=o.Star?K.DataModule().GetLocal().medal.GetByLevel(this.userData.userMedal.level+1)&&(this.userData.userMedal.level+=1,this.userData.userMedal.star=0,3==this.userData.userMedal.level&&null==K.DataModule().GetUser().GetSaveKey("ShowStr_scene")&&(K.DataModule().GetUser().AddSaveKey("ShowStr_scene","true"),z.Instance.LeYou_Guidance(18)),k.Platform==T.QQ&&"true"!=Laya.LocalStorage.getItem("dataR"+this.userData.userMedal.level)&&(Laya.LocalStorage.setItem("dataR"+this.userData.userMedal.level,"true"),ge.Instance.Report_CustomEvent("段位_"+this.userData.userMedal.level)),o=this.userData.userMedal.level,z.Instance.ChuanQuStatistics(Number(o<10?"3000"+o:"300"+o)),z.Instance.LW_StatisticsEvent(1003,this.userData.userLevel.level.toString())):this.userData.userMedal.star+=1,k.guidance_tow&&2==this.userData.userMedal.level&&2==this.userData.userMedal.star&&null==K.DataModule().GetUser().GetSaveKey("ShowStr_6")&&K.DataModule().GetUser().AddSaveKey("ShowStr_6","true");let e=0,t=0,i=this.userData.userMedal;(this.userData.userMedal.level>this.userData.userMedalMax.level||this.userData.userMedal.level==this.userData.userMedalMax.level&&this.userData.userMedal.star>this.userData.userMedalMax.star)&&(e=i.level,t=i.star),0==e&&0==t||(this.userData.userMedalMax.level=i.level,this.userData.userMedalMax.star=i.star,K.DataModule().GetUser().AddSaveKey("userMedalMax","true"),K.DataModule().GetUser().GetSaveKey("userMedalMax")),3==this.userData.userMedal.level&&2==this.userData.userMedal.star&&(z.Instance.LeYou_Guidance(17),"2"==k.AbTest_IsMode1?null==K.DataModule().GetUser().GetSaveKey("ShowStr_js")&&K.DataModule().GetUser().AddSaveKey("ShowStr_js","true"):null==K.DataModule().GetUser().GetSaveKey("ShowStr_luandou")&&K.DataModule().GetUser().AddSaveKey("ShowStr_luandou","true"))}this.SaveData()}AddHuoYueDu(t){if(!(K.DataModule().GetUser().GetData().userBattleInfo.totalCount<1)){switch(t){case 1:this.nowHuoYueCont+=2;break;case 2:this.nowHuoYueCont+=1}let e=K.UIModule().GetUI(Uf.UIName);e&&e.Set_T_huoyuePlay(this.nowHuoYueCont)}}GetOverHuoYueDu(){this.userData.huoyue+=this.nowHuoYueCont,200<=this.userData.huoyue&&(this.userData.huoyue=200),this.nowHuoYueCont=0,this.SaveData()}SetXinShouGridKey(){var e;2==this.userData.userMedalMax.level&&k.isUseGridBoxKey&&(e=K.DataModule().GetUser().GetUserItemData(Z.GridKey+"_"+Z.GridKey+"_3"),K.DataModule().GetUser().GetItem([e],at.GridKey),K.DataModule().GetUser().GetItemByTypeAndId(Z.GridKey,Z.GridKey).count=3,Zg.Cover_IsShowGridChestUI=!0)}GetNowFreeCoinCount(){let e=K.DataModule().GetUser().GetData().mergeLevel,t=e-2;return t<1&&(t=1),Number(K.DataModule().GetLocal().weapon.GetPrice(t))*(1-.01*e)*2}getBoxUpTime(){let e=0,t=K.DataModule().GetUser().GetSaveKey("TreasureUI_GetBoxTime");return e=null!=t?Number(t.data):e}getSpeedTime(){let e=0,t=K.DataModule().GetUser().GetSaveKey("m_btn_speed");return e=t&&(e=this.speedTime-(A.SystemTime-t.count))<0?0:e}GetNowAppointTime(i=1){let o=this.GetSaveKey("AppointTime");if(o=2==i?this.GetSaveKey("AppointTime2"):o){if("false"==o.data){let e=A.SystemTime-o.count,t=f.Time_OneDay-e;return 2==i&&(t=f.Time_Week-e),(t=k.IsGM?1e4-e:t)<0?0:t}if("true"==o.data)return-2}return-1}SubStarFromMedal(){var e;K.DataModule().GetLocal().medal.GetByLevel(this.userData.userMedal.level)&&(this.userData.userMedal.star-1<0?(e=K.DataModule().GetLocal().medal.GetByLevel(this.userData.userMedal.level-1))?(--this.userData.userMedal.level,this.userData.userMedal.star=e.Star-1):this.userData.userMedal.star=0:--this.userData.userMedal.star),this.SaveData()}AddCoin(t,i){if(k.isTestLog&&console.log("添加金币",t,i),0<this.getSpeedTime()&&i==at.online){for(let e=1;e<this.speedTimeDouble;e++)eg.ADD_gt_get_coins(Z.Coin,i,t,Y.jia(this.userData.coin,t)),this.userData.coin=Y.jia(this.userData.coin,t);this.SetAddSpeedCoin()}eg.ADD_gt_get_coins(Z.Coin,i,t,Y.jia(this.userData.coin,t)),no.Statistics_T0G(i,1,t,Y.jia(this.userData.coin,t),0),this.userData.coin=Y.jia(this.userData.coin,t),this.SaveData()}SetAddSpeedCoin(){var e;K.UIModule().GetNowTopUIName()==Zg.UIName&&(e=K.UIModule().GetUI(Zg.UIName),K.UIModule().GetUI(Ua.UIName).ShowAddCoin(new Laya.Vector2(e.view.m_btn_speed.x+e.view.m_btn_speed.width/2,e.view.m_btn_speed.y),20))}SubCoin(e,t){eg.SUB_gt_cost_coins(Z.Coin,t,"-"+e,Y.jian(this.userData.coin,e)),no.Statistics_T0G(t,1,e,Y.jian(this.userData.coin,e),1),this.userData.coin=Y.jian(this.userData.coin,e),Y.isGreaterThanOrEqualTo(0,this.userData.coin)&&(this.userData.coin="0"),this.SaveData()}ChangeDiamond(e,t){var i=(this.userData.diamond+e).toString();0<e?(eg.ADD_gt_get_coins(Z.Diamond,t,e.toString(),i),ge.Instance.Report_Prop_Get("钻石",t,e,Number(i)),no.Statistics_T0G(t,2,e,i,0)):(eg.SUB_gt_cost_coins(Z.Diamond,t,e.toString(),i),ge.Instance.Report_Prop_Cost("钻石",t,Math.abs(e),Number(i)),no.Statistics_T0G(t,2,e,i,1)),this.userData.diamond+=e,this.userData.diamond<0&&(this.userData.diamond=0),this.SaveData()}SetItemData(e,t,i){e=e+"_"+t+"_"+i;return k.isTestLog&&console.warn("返回key",e),e}GetGearNowMaxRare(t){let i=this.userData.itemList,o=0;for(let e=0;e<i.length;e++)i[e].type==t&&i[e].rare>o&&(o=i[e].rare);return o}GuidanceWindowIsOpen_Try(){var e=K.DataModule().GetUser().GetData().userMedalMax;return 2<e.level||2==e.level&&1<=e.star?(console.log("开启"),!0):(console.log("不开启"),!1)}GetGearNowMaxLv(t){let i=this.userData.itemList,o=0;for(let e=0;e<i.length;e++)i[e].type==t&&i[e].level>o&&(o=i[e].level);return o}GetGear_UserItemData(e,t){return t}GetProp_UserItemData(e){let t=e,i=e.type+e.rare+"_"+e.level,o=K.DataModule().GetLocal().gear.Get(i),a=K.DataModule().GetLocal().skill,n=(k.isTestLog&&console.log("传入prop",e,o),o.RandomProp),s=o.Level,l=o.PropLevelIncrease;var r,h,m,d;""!=l&&"0"!=l&&((e=l.split("-")).length<2?s+=Number(e[0]):(u=Number(e[0]),e=Number(e[1]),s+=f.GetF1_F2RandomValue(u,e)));let c=[];if(1<=o.Props.length){k.isTestLog&&console.log("额外词条逻辑进入");for(let t=0;t<o.Props.length;t++){let e=o.Props[t];-1!=o.Props[t].indexOf("|")&&(r=o.Props[t].split("|"),e=r[f.GetF1_F2RandomValue(0,r.length-1)],k.isTestLog&&console.log("随机props词缀|",o.Props[t],"随的值",e)),"Skill"==e?(h=(r=o.Props_Value[t].split("_"))[0],m=r[1],"Random"==r[0]?(d="Skill_"+(d=a.GetInitiativeSkllList())[f.GetF1_F2RandomValue(0,d.length-1)].SkillID+"_"+m,c.push(d)):(d=a.Get(h),"Random"!=r[0]&&d&&""!=d.SkillFun&&c.push("Skill_"+h+"_"+m)),k.isTestLog&&console.log("技能词条生成",c)):(c.push(e),k.isTestLog&&console.log("随机固定词条",e))}}k.isTestLog&&console.log("词条等级",s,"数量:",n,"额外数量",[],"固定词条",c,t);var u=t.type+s;return t.data=this.Get_Equip_affix(u,n,s,o.Rare,c),t.id=this.GetOnlyId(10),t}Get_Assign_Equip(e,t){t=Z.Gear+"_"+t+"_"+e+"_1",k.isTestLog&&console.log("生成的key",t),e=this.GetUserItemData(t);k.isTestLog&&console.log("生成的keyData",e);let i=[];i.push(e),this.GetItem(i,"")}Get_Assign_Equip_100(){var a,t=["Chest","Head","Foot","Ring"];for(let e=0;e<t.length;e++){a=t[e];for(let o=0;o<5;o++)for(let e=0;e<5;e++){let e=a+"_"+f.GetF1_F2RandomValue(1,8)+"_"+(o+1)+"_1",t=this.GetUserItemData(e,!0),i=[];i.push(t),this.GetItem(i,"")}}}Get_Equip_affix(o,e,t,i,a){let n=e+a.length,s=K.DataModule().GetLocal().prop,l=K.DataModule().GetLocal().prop.GetAllProp(),r=[],h="";for(let i=0;i<l.length;i++){var m=s.Get(o)[l[i]];if(m&&""!=m&&0!=m){let t=!0;for(let e=0;e<a.length;e++)if(a[e]==l[i]){t=!1;break}t&&r.push(l[i])}}let d=f.RandomF1F2Num(r.length-1,n),c=0;for(let t=0;t<d.length;t++){let e=r[d[t]];if(a.length>t&&(e=a[t],k.isTestLog&&console.log("设置固定key",e),-1!=e.indexOf("Skill")))h+=""!=h?","+e:e;else{var u=Number(s.Get("RandomMinUnit")[e]),p=(k.isTestLog&&console.log("key值",e,u,o,s.Get("RandomMinUnit")),s.Get(o)[e].split("-")),g=Number(p[0]),p=Number(p[1]),g=((c=f.GetF1_F2RandomValue(g,p,"invariant"))||(c=u,console.warn("数值null或者小于最小单位",e,c,u)),K.DataModule().GetLocal().gameRule.GetGradePropBonus()["F"+i]);if(g&&(c*=g/100),c%u>=u/2?c=c-c%u+u:c-=c%u,c%u!=0){let e=1;for(;u*e<1||u*e%1!=0;)e*=10;c=Math.floor(c/u)*(u*e)/e}p=e+"_"+c;h+=""!=h?","+p:p}}return k.isTestLog&&console.log("词缀数据",h),h}KeyTransition(e,t=1){var i=e;return"Gem"==e&&(e=Z.Diamond+"_"+Z.Diamond+"_"+t),i}NewUserItemData(){return{id:"",type:"",count:1,data:"",buyCount:0,tableID:"",rare:1,level:1,res:""}}NewUserShopItemDataData(){return{data:this.NewUserItemData(),repertory:-1,price:"0",isBuy:!1}}SkillUnlock_Add(e,t){this.userData.SkillUnlockList.push(e.id),this.SaveData()}SkillUnlock_IsUnlock(t){for(let e=0;e<this.userData.SkillUnlockList.length;e++)if(this.userData.SkillUnlockList[e]==t)return!0;return!1}SkillUnlock_GetList(){let i=[],e=K.DataModule().GetUser().GetData().userLevel.level;for(let t=1;t<=e;t++){let e=K.DataModule().GetLocal().playerLv.Get(t.toString());var o;e&&(-1!=e.LevelReward[0].indexOf(Z.Skill)&&(o=K.DataModule().GetUser().GetUserItemData(e.LevelReward[0]),this.SkillUnlock_IsUnlock(o.id)||i.push(o.id)),-1!=e.VideoReward[0].indexOf(Z.Skill)&&(o=K.DataModule().GetUser().GetUserItemData(e.VideoReward[0]),this.SkillUnlock_IsUnlock(o.id)||i.push(o.id)))}return i}ItemIsShowBox(e){return""}GetUserItemDataList(o,a=!1){k.isTestLog&&console.log("获取通用数据KEY",o);let n=[];for(let i=0;i<o.length;i++)if(""!=o[i]){let e=o[i].split(","),t=o[i];-1!=o[i].indexOf(Z.Gear)&&3==e.length&&-1!=e[1].indexOf("-")&&(t=K.DataModule().GetLocal().lottery.CreationEquip(o[i]));var s=K.DataModule().GetLocal().lottery.GetChest(t);if(k.isTestLog&&console.log("lotteryKey:",s),a&&1<s.length){var l=this.GetUserItemDataList(s);for(let e=0;e<l.length;e++)n.push(l[e])}else k.isTestLog&&console.log("通用数据KEY添加奖励",o[i]),n.push(this.GetUserItemData(o[i]))}return k.isTestLog&&console.log("通用数据KEY返回奖励",n),n}IsTransitionItem(e){return-1!=e.indexOf(Z.NextDouble)}GetSaveKey(e){return K.DataModule().GetUser().GetItemByTypeAndId(Z.SaveDataItem,e)}AddTask(e,t=1){var i=K.DataModule().GetUser().GetSaveKey(e);null!=i&&K.DataModule().GetUser().AddSaveKey(e,i.data,i.count+t,i.buyCount,i.tableID)}AddSaveKey(e,t,i=1,o=0,a=""){k.isTestLog&&console.log("添加保存",e,t);let n=K.DataModule().GetUser().NewUserItemData();n.id=e,n.type=Z.SaveDataItem,n.data=t,n.count=i,n.buyCount=o,n.tableID=a,K.DataModule().GetUser().AddItemData(n)}WeaponSkin_GetRare(t){let i=[],o=this.GetWeaponSkinList_Now();for(let e=0;e<o.length;e++)o[e].Rare<=t&&i.push(o[e]);return i}GetUserItemData(e,i=!1,n=!1){k.isTestLog&&console.log("创建数据key",e);let o=this.NewUserItemData();if(0==i){if(1==this.IsTransitionBox(e))return o.id=e,o.type=Z.Box,2<(i=o.id.split("_")).length&&(o.count=Number(i[2]),o.id=i[0]+"_"+i[1]),o;if(1==this.IsTransitionItem(e))return o.id=e,o.type=Z.NextDouble,o}var t,s=Object.keys(VC);for(t in s)if(-1!=e.indexOf(s[t])){if(s[t]==Z.Gear){let e=Object.keys(VC),t=[];for(var l in e)t.push(e[l]);k.isTestLog&&console.log("当前类型",t,t[2]),o.type=t[f.GetF1_F2RandomValue(1,t.length-1)]}else o.type=s[t];let a=e.split("_");for(let o=0;o<a.length;o++)if(-1!=a[o].indexOf("-")){let e=a[o].split("-"),t=Number(e[1]),i=Number(e[0]);n&&(i=(t-i)/2),a[o]=f.GetF1_F2RandomValue(i,t).toString()}var r=Number(a[3]);return o.level=Number(a[1]),o.rare=Number(a[2]),o.tableID=o.type+o.rare+"_"+o.level,k.isTestLog&&console.log("当前状态",a,o,r),o=this.GetProp_UserItemData(o),o=K.DataModule().GetLocal().gear.GetRandomID(o),k.isTestLog&&console.log("end装备数据",o),o}var a,i=e.split("_");if(i[0]==Z.ZombieCoin)o.type=Z.ZombieCoin,o.id=Z.ZombieCoin,o.count=Number(i[i.length-1]),o.tableID=i[i.length-1];else if(i[0]==Z.Coin)o.type=Z.Coin,o.id=Z.Coin,o.count=i[i.length-1],o.tableID=i[i.length-1];else if(i[0]==Z.Diamond||"Gem"==i[0]){var h=e.split("_");o.type=Z.Diamond,o.id=Z.Diamond,o.count=Number(h[h.length-1]),k.isTestLog&&console.log("解析为钻石",o.count.toString(),h)}else if(i[0]==Z.UnlockHero)o.id=i[1],o.type=i[0];else if(i[0]==Z.Hero)o.id=i[1],o.type=i[0];else if(i[0]==Z.NewYearKey)o.id=i[1],o.type=i[0],o.count=Number(i[2]);else if(i[0]==Z.NewYearFont)o.id=i[1],o.type=i[0],o.count=Number(i[2]),o.data=it[o.id];else if(i[0]==Z.WeaponSkin){let e=0;2<i.length&&(e=Number(i[2])),o=this.GetWeaponSkinUserItemData(i[1],e)}else if(i[0]==Z.HeroPiece)o=this.GetHeroSkinUserItemData(i[1],Number(i[2]));else if(i[0]==Z.LuckyCoin)o.id="",o.type=i[0],o.count=Number(i[1]);else if(i[0]==Z.Liveness)o.id="",o.type=i[0],o.count=Number(i[1]);else if(i[0]==Z.BoxMerge)o.id="",o.type=i[0],o.count=Number(i[1]);else if(i[0]==Z.Skill)o.id=i[1],o.type=i[0],o.count=1;else if(i[0]==Z.BaoZhu)o.id=i[1],o.type=i[0],o.count=Number(i[2]);else if(i[0]==Z.GridKey)o.id=i[1],o.type=i[0],o.count=Number(i[2]);else if(i[0]==Z.HeroTryTimeCard)o.id=i[1],o.type=i[0],o.count=Number(i[2]);else if(i[0]==Z.TreasureFreeRefresh)o.id=i[1],o.type=i[0],o.count=Number(i[2]);else if(i[0]==Z.FreeVideoCard)o.id=i[1],o.type=i[0],o.count=Number(i[2]);else if(i[0]==Z.VipCard)o.id=i[1],o.type=i[0],o.count=A.SystemTime+30*f.Time_OneDay;else if(i[0]==Z.DialFree)o.id=i[1],o.type=i[0],o.count=Number(i[2]);else if(i[0]==Z.HeroTryCard){o.id=i[1],o.type=i[0];let e=i[2];-1!=e.indexOf("-")&&(h=e.split("-"),a=Number(h[0]),h=Number(h[1]),e=f.GetF1_F2RandomValue(a,h).toString()),o.count=Number(e)}else if(i[0]==Z.onLineCoinSpeedUp){let e=i[1];-1!=e.indexOf("-")&&(a=e.split("-"),e=a[f.GetF1_F2RandomValue(0,a.length-1)]);let t=i[2];-1!=t.indexOf("-")&&(h=t.split("-"),t=h[f.GetF1_F2RandomValue(0,h.length-1)]),o.id=e,o.type=i[0],o.count=Number(t)}else o.id=i[1],o.type=i[0],o.count=Number(i[2]);return o}GetOffLineTime(){return this.userData.offLineTime}SetOffLineTime(e){this.userData.offLineTime=e}IsTransitionBox(e){let t=!1;return t="Chest_1"!=e&&"Chest_2"!=e&&"Chest_Endless"!=e&&-1==e.indexOf("Chest_2_")&&-1==e.indexOf("Chest_1_")&&-1==e.indexOf("Chest_Endless_")?t:!0}AddLiveness(e,t){this.userData.liveness+=e}GetItem(o,a){k.isTestLog&&b.Warn("getItEM奖励:",o);for(let i=0;i<o.length;i++){if(o[i].type==Z.Coin)this.AddCoin(o[i].count,a);else if(o[i].type==Z.Liveness)this.AddLiveness(o[i].count,a);else if(o[i].type==Z.Diamond)this.ChangeDiamond(o[i].count,a);else if(o[i].type==Z.Hero)this.IsHeroBuy(o[i].id)?this.ChangeDiamond(200,a):this.AddHero(o[i].id,a);else if(o[i].type==Z.UnlockHero)this.IsHeroUnlock(o[i].id)?this.ChangeDiamond(100,a):this.AddUnLockHero(o[i].id,a);else if(o[i].type==Z.BoxMerge)q.NowGameWorld.GetSingleCompoent(Fp).addDropBoxNowCount=o[i].count,K.DataModule().GetUser().GetMergeNowVacancy()>o[i].count&&o[i].count;else if(o[i].type==Z.NextDouble)k.isTestLog&&console.log("领取了下次双倍"),Laya.LocalStorage.setItem("NextDouble","true");else if(o[i].type==Z.NewYearFont)this.AddItemData(o[i],a);else if(o[i].type==Z.Skill)this.SkillUnlock_Add(o[i],a);else if(o[i].type==Z.NewYearKey)this.AddUserKey(o[i]);else if(o[i].type==Z.WeaponSkin){let e=o[i].count,t="false";0==e&&(t="true",e=K.DataModule().GetLocal().weaponSkin.Get(o[i].tableID).Piece2Make),this.AddWeaponSkin(o[i].tableID,e.toString(),a,t)}else if(o[i].type==Z.HeroPiece)this.AddHeroSkin(o[i].tableID,o[i].count.toString(),a);else if(o[i].type==Z.BaoZhu)this.AddBaoZhu(o[i].count,a);else if(o[i].type==Z.GridKey)this.AddItemData(o[i],a);else if(o[i].type==Z.onLineCoinSpeedUp)this.AddItemData(o[i],a);else if(o[i].type==Z.TreasureFreeRefresh)this.AddItemData(o[i],a);else if(o[i].type==Z.HeroTryTimeCard)this.AddItemData(o[i],a);else if(o[i].type==Z.DialFree)this.AddItemData(o[i],a);else if(o[i].type==Z.HeroTryCard){this.AddItemData(o[i],a);try{let e=K.UIModule().GetUI(Zg.UIName);e&&e.SetTryHeroInfo()}catch(o){}}else{var e,t;o[i].type!=Z.DoubleStar&&(o[i].type==Z.Ring||o[i].type==Z.Head||o[i].type==Z.Foot||o[i].type==Z.Chest||o[i].type==Z.Gear?(o[i].buyCount=0,e=this.GetGearNowMaxLv(o[i].type),t=this.GetGearNowMaxRare(o[i].type),(o[i].level>=e||o[i].rare>=t)&&(o[i].buyCount=1),3==o[i].rare?K.DataModule().GetUser().AddTask("saveTask_"+zg.getRareEquip_3):4==o[i].rare?K.DataModule().GetUser().AddTask("saveTask_"+zg.getRareEquip_4):5==o[i].rare&&K.DataModule().GetUser().AddTask("saveTask_"+zg.getRareEquip_5),z.Instance.LeYou_Equip(a,2,o[i],1,1),no.Statistics_T0H(a,this.GetPosKey(o[i]),o[i].count,o[i].count,0),this.userData.itemList.push(o[i])):this.AddItemData(o[i],a))}this.SaveData()}}AddBaoZhu(e,t){let i,o=this.GetItemByID(Z.BaoZhu);null==o&&((o=this.NewUserItemData()).id=Z.BaoZhu,o.type=Z.BaoZhu,o.count=0,this.userData.itemList.push(o)),null!=e&&(o.count+=e),i=o.count,ge.Instance.Report_Prop_Get("爆竹",t,e,i),this.SaveData()}UseBaoZhu(e){let t=this.GetItemByID(Z.BaoZhu);null==t&&((t=this.NewUserItemData()).id=Z.BaoZhu,t.type=Z.BaoZhu,t.count=0,this.userData.itemList.push(t)),t.count--,ge.Instance.Report_Prop_Cost("爆竹","年兽",Math.abs(e),Number(t.count)),this.SaveData()}GetBaoZhuItem(){let e=this.GetItemByID(Z.BaoZhu);return null==e&&((e=this.NewUserItemData()).id=Z.BaoZhu,e.type=Z.BaoZhu,e.count=0,this.userData.itemList.push(e)),e}GetBaoZhuGiftSaveItem(){let e=this.GetItemByID("BaoZhuGiftSave");return null==e&&((e=this.NewUserItemData()).id="BaoZhuGiftSave",e.type=Z.SaveDataItem,e.buyCount=0,this.userData.itemList.push(e)),e}AddLuackCoin(e,t){let i=this.NewUserItemData();i.type=Z.LuckyCoin,i.count=e,i.id=Z.LuckyCoin,this.AddItemData(i,t)}GetWeaponSkinUserItemData(e,t,i="false"){let o=this.NewUserItemData(),a=K.DataModule().GetLocal().weaponSkin.Get(e),n="WeaponSkin"+e;return o.id=n,o.buyCount=0,o.data=i,o.level=0,o.rare=a.Rare,o.tableID=e,o.type=Z.WeaponSkin,o.count=t,o}GetHeroSkinUserItemData(e,t){let i=this.NewUserItemData(),o=K.DataModule().GetLocal().hero.Get(e),a="HeroSkin"+e;return i.id=a,i.buyCount=0,i.data="false",i.level=0,i.rare=o.Rare,i.tableID=e,i.type=Z.HeroPiece,i.count=t,i}AddHeroSkin(s,l,r){if(!this.HeroIsDebris(s)&&k.isTestLog)console.log("不是碎片英雄",s);else{let t=Ca.RedDot_HeroDebrisList,i=!0;for(let e=0;e<t.length;e++)if(t[e]==s){i=!1;break}i&&Ca.RedDot_HeroDebrisList.push(s);let e=this.GetItemByTypeAndtableId(Z.HeroPiece,s),o=K.DataModule().GetLocal().hero.Get(s),a=0;-1!=o.UnlockCondition.indexOf("HeroPiece")&&(h=o.UnlockCondition.split("_"),a=Number(h[h.length-1]));let n=1;e&&(n=e.count);var h="英雄碎片_"+K.DataModule().GetLz().GetText("Hero_"+o.ID);if(ge.Instance.Report_Prop_Get(h,r,Number(l),n),null==e)this.userData.itemList.push(this.GetHeroSkinUserItemData(s,Number(l)));else if(e.count+=Number(l),e.count>=a){this.GetItemByTypeAndtableId(Z.HeroPiece,s).data="true";let e=[Z.UnlockHero+"_"+s];k.useHeroNoUnlock&&(e=[Z.Hero+"_"+s]),k.useHeroNoUnlock||j.GetItemDataAndIsShowBox(r,e,2);h="英雄_"+K.DataModule().GetLz().GetText("Hero_"+o.ID);ge.Instance.Report_Prop_Get(h,r,1,1)}this.SaveData()}}GetHeroSkinCount(e,t){return this.GetItemByTypeAndtableId(Z.HeroPiece,t)||null}HeroIsDebris(e){let t=K.DataModule().GetLocal().hero.Get(e);return!(!t||-1==t.UnlockCondition.indexOf(Z.HeroPiece))}GetHeroPieceList_Now(t=!1){let i=[],o=[],a=K.DataModule().GetLocal().hero,n=K.DataModule().GetLocal().hero.GetDatas();for(let e=0;e<n.length;e++)!t&&this.HeroIsDebris(n[e].ID)?o.push(n[e]):t&&n[e].HeroTryOut&&(k.useHeroNoUnlock?this.IsHeroBuy(n[e].ID)||i.push(n[e]):this.IsHeroUnlock(n[e].ID)||this.IsHeroBuy(n[e].ID)||a.IsHeroLimit(n[e].ID)||i.push(n[e]));for(let e=0;e<o.length;e++){var s=this.GetItemByTypeAndtableId(Z.HeroPiece,o[e].ID);s&&"true"==s.data||(k.useHeroNoUnlock?this.IsHeroBuy(o[e].ID)||i.push(o[e]):this.IsHeroBuy(o[e].ID)||this.IsHeroUnlock(n[e].ID)||a.IsHeroLimit(n[e].ID)||i.push(o[e]))}return i}GetRareDebrisHeroList(t){let i=[],o=this.GetHeroPieceList_Now();for(let e=0;e<o.length;e++)o[e].Rare==t&&i.push(o[e]);return i}GetWeaponSkinList_Now(e=""){let t=[],i=[];if(""!=e)i=K.DataModule().GetLocal().weaponSkin.GetWeaponSkinType(e);else{var o,a=Object.keys(ot);for(o in a){var n=a[o],s=K.DataModule().GetLocal().weaponSkin.GetWeaponSkinType(n);for(let e=0;e<s.length;e++)i.push(s[e])}}for(let e=0;e<i.length;e++){var l=this.GetItemByTypeAndtableId(Z.WeaponSkin,i[e].ID);l&&"true"==l.data||t.push(i[e])}return t}AddWeaponSkin(e,t,i="",o="false"){let a=this.GetItemByTypeAndtableId(Z.WeaponSkin,e),n=K.DataModule().GetLocal().weaponSkin.Get(e),s=1;a&&(s=a.count);var l="武器皮肤碎片_"+n.ChineseName;ge.Instance.Report_Prop_Get(l,i,Number(t),s),null==a?this.userData.itemList.push(this.GetWeaponSkinUserItemData(e,Number(t),o)):(a.count+=Number(t),a.count>=n.Piece2Make&&(this.GetItemByTypeAndtableId(Z.WeaponSkin,e).data="true",l="武器皮肤_"+n.ChineseName,ge.Instance.Report_Prop_Get(l,i,1,1))),this.SaveData()}GetWeaponSkinCount(e,t){return this.GetItemByTypeAndtableId(Z.WeaponSkin,t)||null}GetOnlyId(e){return Number(Math.random().toString().substr(3,e)+Date.now()).toString(36)}GetNextGetRewardMedalLevel(){var t=K.DataModule().GetLocal().medal.GetDatas();for(let e=1;e<t.length;e++)if(-1==this.userData.userMedal.hasGetRewardLevel.indexOf(t[e].Level))return t[e].Level;return-1}GetNextGetBigRewardMedalLevel(){var t=K.DataModule().GetLocal().medal.GetDatas();for(let e=1;e<t.length;e++)if(-1==this.userData.userMedal.hasGetRewardLevel.indexOf(t[e].Level)&&1<t[e].Bonus.length)return t[e].Level;return-1}IsCanGetMedalReward(){return-1==this.userData.userMedal.hasGetRewardLevel.indexOf(this.userData.userMedal.level)}IsGetMedalRewardEnd(t){var i=this.userData.userMedal.hasGetRewardLevel;for(let e=0;e<i.length;e++)if(i[e]==t)return!0;return!1}IsGetPlayerLvRewardEnd(t){var i=this.userData.userLevel.getLevel;for(let e=0;e<i.length;e++)if(i[e]==t)return!0;return!1}IsDaySign_newYear(){let e=K.DataModule().GetUser().GetData().signNewYearData,t=e.nowDay;return 7<t&&0==(t%=7)&&(t=7),e.data[t-1].isSign}IsDaySign(){let e=K.DataModule().GetUser().GetData().signData,t=e.nowDay;return 7<t&&0==(t%=7)&&(t=7),e.data[t-1].isSign}GetAllPros(e=""){let i=[];for(let t=1;t<this.userData.equipList.length;t++)if(""!=this.userData.equipList[t]){let e=this.GetItemByID(this.userData.equipList[t]);if(e&&""!=e.data){var o=e.data.split(",");for(let e=0;e<o.length;e++)i.push(o[e])}}let t=this.GetNowWeaponSkinId(),a=1,n=this.GetHeroItemData(this.userData.nowChooseHero);return n&&(a=n.level),""!=e?this.GetAllPropByData(this.userData.nowChooseHero,e,t,i,a):this.GetAllPropByData(this.userData.nowChooseHero,this.userData.equipList[0],t,i,a)}GetAllPropStrByData(e,t,i,o,a){var n=this.GetAllPropByData(e,t,i,o,a);if(0<n.length){let t="";for(let e=0;e<n.length;e++)e==n.length-1?t+=n[e]:t+=n[e]+",";return t}return""}GetNowWeaponSkinId(){var e=this.GetItemByID(this.GetEquitWeapon());return e?e.data:""}GetHeroItemData(t){if(this.IsHeroBuy(t)){var e=this.GetItemByID(t);if(e)return e;{let e=this.NewUserItemData();return e.level=1,e.tableID=t,e.id=t,e.type=Z.Hero,this.userData.itemList.push(e),this.SaveData(),e}}return null}GetAllPropByData(e,t,i,o,a=1){let n=[],s=[],l=K.DataModule().GetLocal().hero.GetHeroProps(e,a);for(let e=0;e<l.length;e++)s.push(l[e]);a=K.DataModule().GetLocal().weapon.Get(t);V.IsGameMode_Zombie()?s.push("Dmg_"+a.Z_Dmg):s.push("Dmg_"+a.Dmg),s.push("AttSpeed_"+a.AttSpeed),s.push("Speed_"+a.Speed);for(let e=0;e<o.length;e++)s.push(o[e]);if(""!=i){var r=K.DataModule().GetLocal().weaponSkin.Get(i);if(r)for(let e=0;e<r.Entrys.length;e++)s.push(r.Entrys[e])}ci.Qi_WieldThousandBlades(),-1!=s.indexOf("SpecialEffect_WieldThousandBlades")&&"ThousandBlades"==i&&(t=K.DataModule().GetLocal().hero.Get(e),s.push("SpeedPer_"+t.F4));let h=[],m=[],d=[];for(let e=0;e<s.length;e++){var c=s[e].split("_");"Skill"!=c[0]&&"SpecialEffect"!=c[0]&&"Zmode"!=c[0]?null==n[c[0]]?n[c[0]]=Number(c[1]):n[c[0]]+=Number(c[1]):("Skill"==c[0]&&(3<=c.length&&(null==m[c[1]]&&(m[c[1]]=Number(c[2])),m[c[1]]<Number(c[2])&&(m[c[1]]=Number(c[2]))),null==h[s[e]]&&(h[s[e]]=s[e])),"SpecialEffect"==c[0]&&d.push(s[e]),"Zmode"==c[0]&&d.push(s[e]))}n.MaxHpPer&&(n.MaxHp=(1+.01*n.MaxHpPer)*n.MaxHp),n.DmgPer&&(n.Dmg=(1+.01*n.DmgPer)*n.Dmg),n.SpeedPer&&(n.Speed=(1+.01*n.SpeedPer)*n.Speed),n.AttSpeedPer&&(n.AttSpeed=(1+.01*n.AttSpeedPer)*n.AttSpeed);let u=[];this.GetProFromList(n,"MaxHp",u),this.GetProFromList(n,"Dmg",u),this.GetProFromList(n,"Speed",u),this.GetProFromList(n,"AttSpeed",u),this.GetProFromList(n,"DodgePer",u),this.GetProFromList(n,"CritPer",u),this.GetProFromList(n,"SkillCD",u),this.GetProFromList(n,"ParryChance",u),this.GetProFromList(n,"FastHitRecovery",u),this.GetProFromList(n,"SkillDmgPer",u),this.GetProFromList(n,"Intelligency",u),this.GetProFromList(n,"SuperLevelUp",u);for(const e in m)Object.prototype.hasOwnProperty.call(m,e)&&u.push("Skill_"+e+"_"+m[e]);return u=u.concat(d)}GetNewYear2021_Font_Data(){let t=[],i=this.userData.itemList;for(let e=0;e<i.length;e++)i[e].type==Z.NewYearFont&&t.push(i[e])}GetNewYear2021_Key_Data(){let t=[],i=this.userData.itemList;for(let e=0;e<i.length;e++)i[e].type==Z.NewYearFont&&t.push(i[e])}GetAllPropsStrs(e=""){let t="",i=K.DataModule().GetUser().GetAllPros(e);for(let e=0;e<i.length;e++)e+1<i.length?t+=i[e]+",":t+=i[e];return t}GetProFromList(e,t,i){e[t]&&(e[t]%1==0?i.push(t+"_"+e[t]):i.push(t+"_"+e[t].toFixed(2)))}GetData(){return this.userData}ItemData_IsMax(e){if(e.type==Z.Hero)return this.IsHeroBuy(e.id);if(e.type==Z.WeaponSkin){e=this.GetItemByTypeAndtableId(e.type,e.tableID);if(e&&"true"==e.data)return!0}return!1}SetVideoCount(){this.userData.videoCount+=1,this.SaveData()}SetShareCount(e){this.userData.shareCount+=e,this.SaveData()}SetUserData(e){this.userData=e,this.SaveData()}getDayTime(e){let t=0,i=K.DataModule().GetUser().GetSaveKey("ModeUI_DayTime"+e);return t=i?i.count:t}resetBannerCloseTimesToday(){Laya.LocalStorage.setItem(this.BannerCloseTimesTodayKey,"0")}setBannerCloseTimesToday(){var e=this.getBannerCloseTimesToday();Laya.LocalStorage.setItem(this.BannerCloseTimesTodayKey,e+1+""),console.error("setBannerCloseTimesToday:"+this.getBannerCloseTimesToday())}getBannerCloseTimesToday(){var e=Laya.LocalStorage.getItem(this.BannerCloseTimesTodayKey);return"NaN"!==e&&void 0!==e&&e?parseInt(e):0}ItemData_IsMax_Str(a){let n=[];for(let o=0;o<a.length;o++){let e=1,t=a[o].split("_"),i=(3<=t.length&&(e=Number(t[t.length-1])),!0);if(-1!=a[o].indexOf(Z.WeaponSkinPiece_Random)){var s=K.DataModule().GetUser().GetWeaponSkinList_Now("");if(!(s.length<1)){n.push(Z.WeaponSkin+"_"+s[f.GetF1_F2RandomValue(0,s.length-1)].ID+"_"+e);continue}i=!1}else if(-1!=a[o].indexOf(Z.HeroPiece_Random)){s=K.DataModule().GetUser().GetHeroPieceList_Now();if(!(s.length<1)){n.push(Z.HeroPiece+"_"+s[f.GetF1_F2RandomValue(0,s.length-1)].ID+"_"+e);continue}i=!1}i&&n.push(a[o])}return n}SetTryHeroTimeCard(){let t=!1,i=this.userData.itemList;for(let e=0;e<i.length;e++)i[e].type==Z.HeroTryTimeCard&&Number(i[e].data)<=A.SystemTime&&(this.userData.itemList.splice(e,1),t=!0,e--);return t}}),jC=ZC,KC=(jC.isOneNewUser=!1,class{constructor(){this.uiId="",this.uiOffset=0,this.bannerType=0,this.bannerPos=0}}),qC=class{constructor(){this.path="",this.title=""}},YC=class extends u{constructor(){super(...arguments),this.ModuleName="数据模块",this.user=new jC,this.local=new class{constructor(){this.localization=new class{Parse(e){var t=e;this.datas=[],this.dictionary=[];for(var i=0;i<t.LocalizationDataList.length;i++)this.datas.push(t.LocalizationDataList[i]),this.dictionary[this.datas[i].code]=t.LocalizationDataList[i];this.Platform_Hero_End()}Platform_Hero_End(){if(T.IS_4399)for(let e=0;e<this.datas.length;e++)switch(this.datas[e].ZH_CN){case"刺客":this.datas[e].ZH_CN="猫女";break;case"刺客柒":this.datas[e].ZH_CN="柒柒柒";break;case"瓦斯翘臀":this.datas[e].ZH_CN="毒气枪"}}GetText(e){e=this.Get(e);return null==e?"":("ZH_CN"==k.language||k.language,e.EN)}GetTextByPar(e,...t){let i=this.GetText(e);for(let e=0;e<t.length;e++)for(var o="[F"+(e+1)+"]",a=t[e];-1!=i.indexOf(o);)i=i.replace(o,a);return i=-1!=i.indexOf("-")?i.replace("+",""):i}numberFixed2(e){return.01*Math.floor(100*e)}roundFun(e,t){return Math.round(e*Math.pow(10,t))/Math.pow(10,t)}GetLocalTextByWeaponValue(e){var i,o=K.DataModule().GetLocal().weapon.Get(e),e="WeapoTypeFunText_"+o.Type;if(this.Get(e)){let t=this.GetText(e);for(let e=1;e<9;e++)-1!=(t=-1!=t.indexOf("[F"+e+"]%")?t.replace("[F"+e+"]%","[color=#F7A402]"+o["F"+e]+"%[/color]"):t).indexOf("[F"+e+"]ms")&&(i=o["F"+e],t=t.replace("[F"+e+"]ms","[color=#F7A402]"+(i/1e3).toFixed(2).toString()+"[/color]秒"));return t}return""}GetLocalTextByZMSkillValue(e,a,n="#F7A402"){var s=K.DataModule().GetLocal().zModePassiveSkill.Get(e),e="ZModePassiveSkillInfo_"+s.SkillID;if(this.Get(e)){let o=this.GetText(e);for(let i=1;i<9;i++){let e=s["F"+i]+s["L"+i]*(a-1),t=!1;-1!=o.indexOf("[F"+i+"]%")&&(o=o.replace("[F"+i+"]%","[color="+n+"]"+e+"%[/color]"),t=!0),-1!=o.indexOf("[F"+i+"]ms")&&(t=!0,o=o.replace("[F"+i+"]ms","[color="+n+"]"+S.numberFixed2(e/1e3)+"[/color]秒")),-1!=o.indexOf("[F"+i+"][m]")&&(t=!0,o=o.replace("[F"+i+"][m]","[color="+n+"]"+e+"[/color]米")),-1!=o.indexOf("[F"+i+"]m/s")&&(t=!0,o=o.replace("[F"+i+"]m/s","[color="+n+"]"+e+"m/s[/color]")),-1==o.indexOf("[F"+i+"]")||t||(o=o.replace("[F"+i+"]","[color="+n+"]"+e+"[/color]"))}return o}return""}GetLocalTextBySkillValue(e,a,n="[color=#F7A402]"){var s=K.DataModule().GetLocal().skill.Get(e),e="SkillInfo_"+s.SkillID;if(this.Get(e)){let o=this.GetText(e);for(let i=1;i<9;i++){let e=s["F"+i]+s["L"+i]*(a-1),t=!1;-1!=o.indexOf("[F"+i+"]%")&&(o=o.replace("[F"+i+"]%","[color="+n+"]"+e+"%[/color]"),t=!0),-1!=o.indexOf("[F"+i+"]ms")&&(t=!0,o=o.replace("[F"+i+"]ms","[color="+n+"]"+S.numberFixed2(e/1e3)+"[/color]秒")),-1!=o.indexOf("[F"+i+"][m]")&&(t=!0,o=o.replace("[F"+i+"][m]","[color="+n+"]"+e+"[/color]米")),-1!=o.indexOf("[F"+i+"]m/s")&&(t=!0,o=o.replace("[F"+i+"]m/s","[color="+n+"]"+e+"m/s[/color]")),-1==o.indexOf("[F"+i+"]")||t||(o=o.replace("[F"+i+"]","[color="+n+"]"+e+"[/color]"))}return o}return""}Get(t){for(let e=0;e<this.datas.length;e++)if(this.datas[e].code==t)return this.datas[e];return console.warn("CanNotFind "+t+" in LocalizationDataHandler"),null}GetByKey(e){var t=this.dictionary[e];return null==t&&console.warn("CanNotFind "+e+" in LocalizationDataHandler"),t}GetTips(){var e=this.GetTipsList();return e.length<1?"":e[f.GetF1_F2RandomValue(0,e.length-1)].ZH_CN}GetTipsList(){let t=[];for(let e=0;e<this.datas.length;e++)-1!=this.datas[e].code.indexOf("Tip_")&&t.push(this.datas[e]);return t}GetDatas(){return this.datas}},this.gameRule=new Gp,this.platform=new class{constructor(){this.bannersettings=[],this.LongBannerSetting=[],this.shareList=[],this.gridsettings=[],this.LongGridSetting=[],this.nativeInterstitialUI=[]}Parse(s){if(!K.PlatformModule().isLoadConfigOk){var l=s;this.datas=[],this.dictionary=[],this.bannersettings=[],this.LongBannerSetting=[],this.gridsettings=[],this.LongGridSetting=[];for(var r=0;r<l.PlatformSettingDataList.length;r++)this.datas.push(l.PlatformSettingDataList[r]),this.dictionary[this.datas[r].ID]=l.PlatformSettingDataList[r];let e=this.PlatformData.BannerSetting;if(null!=e){let o=e.split("|");for(let i=0;i<o.length;i++){let e=o[i].split("_"),t=new KC;t.uiId=e[0],t.uiOffset=Number(e[1]),t.bannerType=Number(e[2]),t.bannerPos=Number(e[3]),this.bannersettings.push(t)}}let t=this.PlatformData.NativeInterstitialUI;if(null!=t&&""!=t)if(-1!=t.indexOf("|")){var h=t.split("|");for(let e=0;e<h.length;e++){var m=h[e];this.nativeInterstitialUI.push(m)}}else this.nativeInterstitialUI.push(t);let i=this.PlatformData.LongBannerSetting;if(null!=i){let o=i.split("|");for(let i=0;i<o.length;i++){let e=o[i].split("_"),t=new KC;t.uiId=e[0],t.uiOffset=Number(e[1]),t.bannerType=Number(e[2]),t.bannerPos=Number(e[3]),this.LongBannerSetting.push(t)}}let a=this.PlatformData.GridSetting;if(null!=a){let o=a.split("|");for(let i=0;i<o.length;i++){let e=o[i].split("_"),t=new KC;t.uiId=e[0],t.uiOffset=Number(e[1]),t.bannerType=Number(e[2]),this.gridsettings.push(t)}}let n=this.PlatformData.LongGridSetting;if(null!=n){let o=n.split("|");for(let i=0;i<o.length;i++){let e=o[i].split("_"),t=new KC;t.uiId=e[0],t.uiOffset=Number(e[1]),t.bannerType=Number(e[2]),this.LongGridSetting.push(t)}}let o=this.PlatformData.ShareList;for(let i=0;i<o.length;i++){let e=o[i].split("_"),t=new qC;t.path=e[0],t.title=e[1],this.shareList.push(t)}}}Get(t){for(let e=0;e<this.datas.length;e++)if(this.datas[e].ID==t)return this.datas[e];return console.warn("CanNotFind "+t+" in PlatformSettingDataHandler"),null}GetByKey(e){var t=this.dictionary[e];return null==t&&console.warn("CanNotFind "+e+" in PlatformSettingDataHandler",this.dictionary),t}GetDatas(){return this.datas}get PlatformData(){return this.Get(k.Platform)}GetBannerType(t){for(let e=0;e<this.bannersettings.length;e++)if(this.bannersettings[e].uiId==t)return this.bannersettings[e].bannerType;return 0}GetLongBannerType(t){for(let e=0;e<this.LongBannerSetting.length;e++)if(this.LongBannerSetting[e].uiId==t)return this.LongBannerSetting[e].bannerType;return 0}GetNativeInterstitialUI(e){return console.error("插屏显示的界面,",this.nativeInterstitialUI,e),-1!=this.nativeInterstitialUI.indexOf(e)}GetBannerPos(t){for(let e=0;e<this.bannersettings.length;e++)if(this.bannersettings[e].uiId==t)return this.bannersettings[e].bannerPos;return 0}GetLongBannerPos(t){for(let e=0;e<this.LongBannerSetting.length;e++)if(this.LongBannerSetting[e].uiId==t)return this.LongBannerSetting[e].bannerPos;return 0}GetGridType(t){for(let e=0;e<this.gridsettings.length;e++)if(this.gridsettings[e].uiId==t)return this.gridsettings[e].bannerType;return 0}GetLongGridType(t){for(let e=0;e<this.LongGridSetting.length;e++)if(this.LongGridSetting[e].uiId==t)return this.LongGridSetting[e].bannerType;return 0}GetUIPos(t){for(let e=0;e<this.gridsettings.length;e++)if(this.gridsettings[e].uiId==t)return this.gridsettings[e].uiOffset;return 0}GetUILongPos(t){for(let e=0;e<this.LongGridSetting.length;e++)if(this.LongGridSetting[e].uiId==t)return this.LongGridSetting[e].uiOffset;return 0}GetUIOffset(t){for(let e=0;e<this.bannersettings.length;e++)if(this.bannersettings[e].uiId==t)return this.bannersettings[e].uiOffset;return 0}RandomGetShareImage(){return this.shareList[Math.floor(Math.random()*this.shareList.length)]}},this.hero=new class{constructor(){this.hero_LimitList=[],this.platform_IdList=[]}Parse(e){var i=e;this.datas=[],this.dictionary=[],this.Platform_Hero_Start();for(var o=0;o<i.HeroDataList.length;o++){let t=!0;for(let e=0;e<this.platform_IdList.length;e++)if(i.HeroDataList[o].ID==this.platform_IdList[e]){t=!1;break}t&&(this.datas.push(i.HeroDataList[o]),this.dictionary[i.HeroDataList[o].ID]=i.HeroDataList[o])}this.Platform_Hero_End()}Platform_Hero_Start(){T.IS_4399&&(this.platform_IdList.push("YouyuGirl"),this.platform_IdList.push("Leo"),this.platform_IdList.push("Michelle")),k.Platform==T.OPPO&&this.platform_IdList.push("YouyuGirl")}Platform_Hero_End(){T.IS_4399}IsHeroLimit(t){for(let e=0;e<this.hero_LimitList.length;e++)if(this.hero_LimitList[e]==t)return!0;return!1}GetAllHeroIds(){let t=[];for(let e=0;e<this.datas.length;e++)t.push(this.datas[e].ID);return t}ResHero_Astrict(){var t=this.datas;for(let e=0;e<t.length;e++)"Seaman"==t[e].ID?(this.datas[e].Res="Ninja",this.datas[e].uiRes="Ninja"):"Plumber"==t[e].ID?(this.datas[e].Res="Barb",this.datas[e].uiRes="Barb"):"Assassin7"==t[e].ID?(this.datas[e].Res="Santa",this.datas[e].uiRes="Santas"):"Landman"==t[e].ID?(this.datas[e].Res="Troll",this.datas[e].uiRes="Troll"):"Ultraman"==t[e].ID||"Elsa"==t[e].ID?(this.datas[e].Res="Assassin",this.datas[e].uiRes="Assassin"):"Snowman"!=t[e].ID&&"Leo"!=t[e].ID||(this.datas[e].Res="Troll",this.datas[e].uiRes="Troll")}Get(t){for(let e=0;e<this.datas.length;e++)if(this.datas[e].ID==t)return this.datas[e];return console.warn("CanNotFind "+t+" in HeroDataHandler"),null}GetByKey(e){var t=this.dictionary[e];return null==t&&console.warn("CanNotFind "+e+" in HeroDataHandler"),t}GetHeroIDsByRare(t,i){let o=[];for(let e=0;e<this.datas.length;e++)this.datas[e].Rare>=t&&this.datas[e].Rare<=i&&o.push(this.datas[e].ID);return o}GetHeroProps(e,t=0){let i=this.Get(e),o=[];o.push("MaxHp_"+i.Hp),o=(o=o.concat(i.Entrys)).concat(K.DataModule().GetLocal().heroLv.GetAllPropByLevel(e,t));var e=i.RareUpLvl.split(","),a=Number(e[0]),n=Number(e[1]),s=Number(e[2]),e=Number(e[3]);return a<=t&&(o=o.concat(i.RareUpLvlBonus1)),n<=t&&(o=o.concat(i.RareUpLvlBonus2)),s<=t&&(o=o.concat(i.RareUpLvlBonus3)),e<=t&&(o=o.concat(i.RareUpLvlBonus4)),o=this.GetAllProp(o)}GetLevelReward(e,t,i){let o=[],a=this.Get(e),n=K.DataModule().GetLocal().heroLv.GetPropByLevel(e,i),s=this.GetHeroRare(e,t),l=this.GetHeroRare(e,i),r=a.RareUpLvl.split(","),h=Number(r[0]),m=Number(r[1]),d=Number(r[2]),c=Number(r[3]);o=o.concat(n),i==h&&(o=o.concat(a.RareUpLvlBonus1)),i==m&&(o=o.concat(a.RareUpLvlBonus2)),i==d&&(o=o.concat(a.RareUpLvlBonus3)),i==c&&(o=o.concat(a.RareUpLvlBonus4)),o=this.GetAllProp(o);for(let e=0;e<o.length;e++)"SpecialEffect"==o[e].split("_")[0]&&(o[e]="RareUnLock_UnLock_1_"+i+"_"+o[e]);let u=[];i==h&&u.push("RareUp_"+s+"_"+l),i==m&&u.push("RareUp_"+s+"_"+l),i==d&&u.push("RareUp_"+s+"_"+l),i==c&&u.push("RareUp_"+s+"_"+l);for(let e=0;e<o.length;e++)u.push(o[e]);return u}GetShowProp(e,t,i){let o=[],a=this.Get(e);if(0==a.MaxLvl){o.push("MaxHp_"+a.Hp);for(let e=0;e<a.Entrys.length;e++)o.push(a.Entrys[e]);return o}let n=this.GetHeroProps(e,t),s=this.GetHeroProps(e,i),l=this.GetHeroRare(e,t);for(let e=0;e<s.length;e++){var r,h=s[e].split("_");"SpecialEffect"!=h[0]&&"Zmode"!=h[0]&&(null==(r=this.GetPro(h[0],n))?o.push("AdvEntry_Lock_"+l+"_"+h[0]+"_0_"+h[1]):o.push("AdvEntry_UnLock_"+l+"_"+r+"_"+h[1]))}var e=a.RareUpLvl.split(","),m=Number(e[0]),d=Number(e[1]),c=Number(e[2]),u=Number(e[3]);if(i<m)o.push("RareUnLock_Lock_"+l+"_"+m+"_SpecialEffect_XX");else if(m<=t)for(let e=0;e<a.RareUpLvlBonus1.length;e++)o.push("RareUnLock_UnLock_"+l+"_"+m+"_"+a.RareUpLvlBonus1[e]);else for(let e=0;e<a.RareUpLvlBonus1.length;e++)o.push("RareUnLock_Lock_"+l+"_"+m+"_"+a.RareUpLvlBonus1[e]);if(i<d)o.push("RareUnLock_Lock_"+l+"_"+d+"_SpecialEffect_XX");else if(d<=t)for(let e=0;e<a.RareUpLvlBonus2.length;e++)o.push("RareUnLock_UnLock_"+l+"_"+d+"_"+a.RareUpLvlBonus2[e]);else for(let e=0;e<a.RareUpLvlBonus2.length;e++)o.push("RareUnLock_Lock_"+l+"_"+d+"_"+a.RareUpLvlBonus2[e]);if(i<c)o.push("RareUnLock_Lock_"+l+"_"+c+"_SpecialEffect_XX");else if(c<=t)for(let e=0;e<a.RareUpLvlBonus3.length;e++)o.push("RareUnLock_UnLock_"+l+"_"+c+"_"+a.RareUpLvlBonus3[e]);else for(let e=0;e<a.RareUpLvlBonus3.length;e++)o.push("RareUnLock_Lock_"+l+"_"+c+"_"+a.RareUpLvlBonus3[e]);if(i<u)o.push("RareUnLock_Lock_"+l+"_"+u+"_SpecialEffect_XX");else if(u<=t)for(let e=0;e<a.RareUpLvlBonus4.length;e++)o.push("RareUnLock_UnLock_"+l+"_"+u+"_"+a.RareUpLvlBonus4[e]);else for(let e=0;e<a.RareUpLvlBonus4.length;e++)o.push("RareUnLock_Lock_"+l+"_"+u+"_"+a.RareUpLvlBonus4[e]);let p=[];for(let e=0;e<o.length;e++)-1!=o[e].indexOf("_UnLock_")&&p.push(o[e]);for(let e=0;e<o.length;e++)-1==o[e].indexOf("_UnLock_")&&p.push(o[e]);return p}GetPro(t,i){for(let e=0;e<i.length;e++)if(i[e].split("_")[0]==t)return i[e];return null}GetHeroRare(e,t=0){let i=this.Get(e);if(0==i.MaxLvl)return i.Rare;var e=i.RareUpLvl.split(","),o=Number(e[0]),a=Number(e[1]),n=Number(e[2]);return t>=Number(e[3])?i.Rare+4:n<=t?i.Rare+3:a<=t?i.Rare+2:o<=t?i.Rare+1:i.Rare}GetHeroBp(e,t=0){e=this.Get(e);return 0==e.MaxLvl?e.BPFactor:e.BPFactor+t*e.BPFactorPerLvl}GetDatas(){return this.datas}GetAllProp(t){let i=[],o=[];for(let e=0;e<t.length;e++)o.push(t[e]);let a=[],n=[],s=[];for(let e=0;e<o.length;e++){var l=o[e].split("_");"Skill"!=l[0]&&"SpecialEffect"!=l[0]&&"Zmode"!=l[0]?null==i[l[0]]?i[l[0]]=Number(l[1]):i[l[0]]+=Number(l[1]):("Skill"==l[0]&&(3<=l.length&&(null==n[l[1]]&&(n[l[1]]=Number(l[2])),n[l[1]]<Number(l[2])&&(n[l[1]]=Number(l[2]))),null==a[o[e]]&&(a[o[e]]=o[e])),"SpecialEffect"==l[0]&&s.push(o[e]),"Zmode"==l[0]&&s.push(o[e]))}i.MaxHpPer&&(i.MaxHp=(1+.01*i.MaxHpPer)*i.MaxHp),i.DmgPer&&(i.Dmg=(1+.01*i.DmgPer)*i.Dmg),i.SpeedPer&&(i.Speed=(1+.01*i.SpeedPer)*i.Speed),i.AttSpeedPer&&(i.AttSpeed=(1+.01*i.AttSpeedPer)*i.AttSpeed);let e=[];this.GetProFromList(i,"MaxHp",e),this.GetProFromList(i,"MaxHpPer",e),this.GetProFromList(i,"DmgPer",e),this.GetProFromList(i,"SpeedPer",e),this.GetProFromList(i,"AttSpeedPer",e),this.GetProFromList(i,"Dmg",e),this.GetProFromList(i,"Speed",e),this.GetProFromList(i,"AttSpeed",e),this.GetProFromList(i,"Heal",e),this.GetProFromList(i,"DodgePer",e),this.GetProFromList(i,"CritPer",e),this.GetProFromList(i,"LifeLeechPer",e),this.GetProFromList(i,"SkillCD",e),this.GetProFromList(i,"ParryChance",e),this.GetProFromList(i,"FastHitRecovery",e),this.GetProFromList(i,"SkillDmgPer",e);for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e.push("Skill_"+t+"_"+n[t]);return e=e.concat(s)}GetProFromList(e,t,i){e[t]&&(e[t]%1==0?i.push(t+"_"+e[t]):i.push(t+"_"+e[t].toFixed(2)))}},this.skill=new class{Parse(e){var t=e;this.datas=[],this.dictionary=[],this.upGradeDatas=[],this.upGradeDatas_NoSkill=[],this.gameItem=[];for(var i=0;i<t.SkillDataList.length;i++)this.datas.push(t.SkillDataList[i]),this.dictionary[this.datas[i].SkillID]=t.SkillDataList[i],"Upgrade"==t.SkillDataList[i].Type&&(this.upGradeDatas.push(t.SkillDataList[i]),""==t.SkillDataList[i].SkillFun&&this.upGradeDatas_NoSkill.push(t.SkillDataList[i])),"GameItem"==t.SkillDataList[i].Type&&this.gameItem.push(t.SkillDataList[i])}GetAllUpGrade(){return this.GetUnlockSkillByStringList()}GetAllUpGradeOnlySkill(){let t=[];for(let e=0;e<this.upGradeDatas.length;e++)""!=this.upGradeDatas[e].SkillFun&&t.push(this.upGradeDatas[e].SkillID);return t}GetSkillByPlayerLv2Unlock(t){for(let e=0;e<this.upGradeDatas.length;e++)if(this.upGradeDatas[e].PlayerLv2Unlock==t)return this.upGradeDatas[e].SkillID;return""}GetPlayerLvUnlockSkill(e){return this.GetUnlockSkillByStringList()}GetAIUnlockSkill(){let t=[],i=(t=(t=t.concat(this.upGradeDatas)).concat(this.upGradeDatas_NoSkill),K.DataModule().GetUser().GetData().userBattleInfo.totalCount),o=[];for(let e=0;e<t.length;e++){var a=t[e];i>=a.AI_UnlockLvl&&o.push(a.SkillID)}return o}GetAIUnlockPassivitySkll(){let t=[],i=(t=t.concat(this.upGradeDatas_NoSkill),K.DataModule().GetUser().GetData().userBattleInfo.totalCount),o=[];for(let e=0;e<t.length;e++){var a=t[e];i>=a.AI_UnlockLvl&&o.push(a.SkillID)}return o}GetNoSkillUpGrade(){let t=this.GetPassivitySkllList(),i=[];for(let e=0;e<t.length;e++){var o=t[e];i.push(o.SkillID)}return i}GetALLItems(){let t=[];for(let e=0;e<this.gameItem.length;e++)t.push(this.gameItem[e].SkillID);return t}Get(t){for(let e=0;e<this.datas.length;e++)if(this.datas[e].SkillID==t)return this.datas[e];return null}GetByKey(e){var t=this.dictionary[e];return null==t&&console.warn("CanNotFind "+e+" in SkillDataHandler"),t}GetDatas(){return this.datas}GetUnlockSkill(){let e=[];return e=(e=e.concat(this.GetInitiativeSkllList())).concat(this.GetPassivitySkllList())}GetUnlockSkillByStringList(){let t=[],i=(t=(t=t.concat(this.GetInitiativeSkllList())).concat(this.GetPassivitySkllList()),[]);for(let e=0;e<t.length;e++){var o=t[e];i.push(o.SkillID)}return i}GetInitiativeSkllList(){let t=[];for(let e=0;e<this.upGradeDatas.length;e++)this.upGradeDatas[e].SkillFun&&""!=this.upGradeDatas[e].SkillFun&&(this.upGradeDatas[e].Active||K.DataModule().GetUser().SkillUnlock_IsUnlock(this.upGradeDatas[e].SkillID))&&t.push(this.upGradeDatas[e]);return t}GetPassivitySkllList(){let t=[];for(let e=0;e<this.upGradeDatas.length;e++)this.upGradeDatas[e].SkillFun&&""!=this.upGradeDatas[e].SkillFun||(this.upGradeDatas[e].Active||K.DataModule().GetUser().SkillUnlock_IsUnlock(this.upGradeDatas[e].SkillID))&&t.push(this.upGradeDatas[e]);return t}},this.weapon=new class{constructor(){this.maxLevel=0}Parse(e){var t=e;this.datas=[],this.dictionary=[],this.dictionarByLevel=[];for(var i=0;i<t.WeaponDataList.length;i++)this.datas.push(t.WeaponDataList[i]),this.dictionary[this.datas[i].ID]=t.WeaponDataList[i],this.dictionarByLevel[this.datas[i].Level]=t.WeaponDataList[i],t.WeaponDataList[i].Level>this.maxLevel&&(this.maxLevel=t.WeaponDataList[i].Level)}GetAllWeaponIds(){let t=[];for(let e=0;e<this.datas.length;e++)t.push(this.datas[e].ID);return t}Get(t){for(let e=0;e<this.datas.length;e++)if(this.datas[e].ID==t)return this.datas[e];return console.warn("CanNotFind "+t+" in WeaponDataHandler"),null}GetByKey(e){var t=this.dictionary[e];return null==t&&console.warn("CanNotFind "+e+" in WeaponDataHandler"),t}GetDatas(){return this.datas}GetByLevel(e){return this.dictionarByLevel[e]}GetPrice(e){var e=this.GetByLevel(e),t=K.DataModule().GetUser().GetWeaponBuyTimes(e.ID);return Y.integerValue(Y.cheng(Y.pow(1.07,t),e.Coin))}GetPriceDiamond(e){var e=this.GetByLevel(e),t=K.DataModule().GetUser().GetWeaponBuyTimes(e.ID),i=K.DataModule().GetLocal().gameRule.Get("WeaponGemPrice").F1;return e.Diamond+i*t}GetRecommendLevel(e){return Math.random()<.5?Math.max(1,e-6):Math.max(1,e-5)}},this.gear=new class{Parse(e){var t=e;this.datas=[],this.dictionary=[];for(var i=0;i<t.GearDataList.length;i++)this.datas.push(t.GearDataList[i]),this.dictionary[this.datas[i].ID]=t.GearDataList[i]}Get(t){for(let e=0;e<this.datas.length;e++)if(this.datas[e].ID==t)return this.datas[e];return console.warn("CanNotFind "+t+" in GearDataHandler"),null}GetByKey(e){var t=this.dictionary[e];return null==t&&console.warn("CanNotFind "+e+" in GearDataHandler"),t}GetDatas(){return this.datas}GetRandomID(e){let t=e,i=t.tableID.split("_")[0],o=[];for(let e=0;e<this.datas.length;e++){var a=this.datas[e].ID.split("_");1<a.length&&a[0]==i&&o.push(this.datas[e].ID)}e=f.GetF1_F2RandomValue(0,o.length-1);return t.tableID=o[e],t}},this.medal=new class{Parse(e){var t=e;this.datas=[],this.dictionary=[],this.datasByLevel=[];for(var i=0;i<t.MedalLevelDataList.length;i++)this.datas.push(t.MedalLevelDataList[i]),this.dictionary[this.datas[i].ID]=t.MedalLevelDataList[i],this.datasByLevel[this.datas[i].Level]=t.MedalLevelDataList[i]}GetByLevel(e){return this.datasByLevel[e]}Get(t){for(let e=0;e<this.datas.length;e++)if(this.datas[e].ID==t)return this.datas[e];return console.warn("CanNotFind "+t+" in MedalLevelDataHandler"),null}GetByKey(e){var t=this.dictionary[e];return null==t&&console.warn("CanNotFind "+e+" in MedalLevelDataHandler"),t}GetDatas(){return this.datas}},this.playerLv=new class{Parse(e){var t=e;this.datas=[],this.dictionary=[];for(var i=0;i<t.PlayerLvDataList.length;i++)this.datas.push(t.PlayerLvDataList[i]),this.dictionary[this.datas[i].PlayerLevel]=t.PlayerLvDataList[i]}Get(t){for(let e=0;e<this.datas.length;e++)if(this.datas[e].PlayerLevel==t)return this.datas[e];return null}GetByKey(e){var t=this.dictionary[e];return null==t&&console.warn("CanNotFind "+e+" in PlayerLvDataHandler"),t}GetDatas(){return this.datas}},this.entryData=new class{Parse(e){var t=e;this.datas=[],this.dictionary=[];for(var i=0;i<t.EntryDataList.length;i++)this.datas.push(t.EntryDataList[i]),this.dictionary[this.datas[i].ID]=t.EntryDataList[i]}Get(t){for(let e=0;e<this.datas.length;e++)if(this.datas[e].ID==t)return this.datas[e];return console.warn("CanNotFind "+t+" in EntryDataHandler"),null}GetByKey(e){var t=this.dictionary[e];return null==t&&console.warn("CanNotFind "+e+" in EntryDataHandler"),t}GetDatas(){return this.datas}},this.ai=new class{constructor(){this.minLevel=0,this.maxLevel=0}Parse(e){var t=e;this.datas=[],this.dictionary=[];for(var i=0;i<t.AIDataList.length;i++)this.datas.push(t.AIDataList[i]),this.dictionary[this.datas[i].AiID]=t.AIDataList[i];this.minLevel=this.datas[0].Level,this.maxLevel=this.datas[this.datas.length-1].Level}Get(t){for(let e=0;e<this.datas.length;e++)if(this.datas[e].AiID==t)return this.datas[e];return console.warn("CanNotFind "+t+" in AIDataHandler"),null}GetByKey(e){return this.dictionary[e]}GetDatas(){return this.datas}GetByLevel(t,i){let o=[];this.IsLegalLevel(t)&&o.push("Ai"+t);for(let e=0;e<i;e++){var a="Ai"+(t+e),a=(this.IsLegalLevel(t+e)&&-1==o.indexOf(a)&&o.push(a),"Ai"+(t-e));this.IsLegalLevel(t-e)&&-1==o.indexOf(a)&&o.push(a)}var e;return 0<o.length?(e=Math.floor(q.Random()*o.length),this.Get(o[e])):this.datas[this.datas.length-1]}IsLegalLevel(e){return e>=this.minLevel&&e<=this.maxLevel}},this.prop=new class{Parse(e){var t=e;this.datas=[],this.dictionary=[];for(var i=0;i<t.PropsDataList.length;i++)this.datas.push(t.PropsDataList[i]),this.dictionary[this.datas[i].PropID]=t.PropsDataList[i]}Get(t){for(let e=0;e<this.datas.length;e++)if(this.datas[e].PropID==t)return this.datas[e];return console.warn("CanNotFind "+t+" in PropsDataHandler"),null}GetByKey(e){var t=this.dictionary[e];return null==t&&console.warn("CanNotFind "+e+" in PropsDataHandler"),t}GetDatas(){return this.datas}GetAllProp(){let t=[],i=Object.keys(this.datas[0]);for(let e=0;e<i.length;e++)"PropID"!=i[e]&&"Level"!=i[e]&&"Res"!=i[e]&&t.push(i[e]);return t}},this.lottery=new class{Parse(e){var t=e;this.datas=[],this.dictionary=[];for(var i=0;i<t.LotteryDataList.length;i++)this.datas.push(t.LotteryDataList[i]),this.dictionary[this.datas[i].LotteryID]=t.LotteryDataList[i]}Get(t){for(let e=0;e<this.datas.length;e++)if(this.datas[e].LotteryID==t)return this.datas[e];return console.warn("CanNotFind "+t+" in LotteryDataHandler"),null}GetByKey(e){var t=this.dictionary[e];return null==t&&console.warn("CanNotFind "+e+" in LotteryDataHandler"),t}GetKeyIndex(t,e){let i=[];for(let e=0;e<this.datas.length;e++)this.datas[e].LotteryID==t&&i.push(this.datas[e]);return i[e]}GetAllIndex(t){let i=[];for(let e=0;e<this.datas.length;e++)this.datas[e].LotteryID==t&&i.push(this.datas[e]);return i}GetByLotteryIDAndBonus(i,o){let a=[];for(let t=0;t<this.datas.length;t++){let e=this.datas[t];-1!=e.LotteryID.indexOf(i)&&e.Bonus==o&&a.push(e)}return a}GetDatas(){return this.datas}GetChest(e,i=!1){let a=[],t=e,n=e.split("_"),s;if(2<n.length&&"Chest"==n[0]){if(t=n[0]+"_"+n[1],(s=Number(n[2]))&&1<=s)for(let e=0;e<s;e++){var l=this.GetChest(t);for(let e=0;e<l.length;e++)a.push(l[e])}let o=[];for(let e=0;e<a.length;e++){let t=!0,i=a[e].split("_");for(let e=0;e<o.length;e++){var r=o[e].split("_");3!=i.length||3!=r.length||i[0]!=r[0]||i[1]!=r[1]||i[0]!=Z.Coin&&i[0]!=Z.Diamond||(r=Number(i[2])+Number(r[2]),t=!1,o[e]=i[0]+"_"+i[1]+"_"+r)}t&&o.push(a[e])}return k.isTestLog&&console.log("返回多个箱子数据",o),o}for(let e=1;e<10;e++){var o=t+"_"+e,h=this.GetAllIndex(o);if(!(h&&0<h.length))break;{let t=[];for(let e=0;e<h.length;e++){var m=K.DataModule().GetLocal().gameRule.GetBoxEndless_Bonus().F5;i&&h[e].Bonus==m?t.push(0):"HeroPieceRare_3"==h[e].Bonus?K.DataModule().GetUser().GetRareDebrisHeroList(3).length<1?t.push(0):t.push(h[e].Weight):"HeroPieceRare_4"==h[e].Bonus?K.DataModule().GetUser().GetRareDebrisHeroList(4).length<1?t.push(0):t.push(h[e].Weight):"HeroPieceRare_5"==h[e].Bonus&&K.DataModule().GetUser().GetRareDebrisHeroList(5).length<1?t.push(0):t.push(h[e].Weight)}var d=f.GetWeightRandom(t);if("Null"==h[d].Bonus)continue;o=this.CreationEquip(h[d].Bonus,o,d);a.push(o)}}return k.isTestLog&&console.log("获得抽奖数据",a),a}GetDial(){let t=[];for(let e=1;e<=6;e++){var i="PrizeWheel_"+e,i=this.Get(i);t.push(i)}return t}CreationEquip(l,o="",a=0,e=!1){let r="",t=K.DataModule().GetUser().GetData(),h=t.mergeLevel,m=t.userLevel.level,n=h-4;if(-1!=l.indexOf("Gear")){let n=l.split("_"),s=1;if(-1!=n[1].indexOf("-")){var d=K.DataModule().GetLocal().gameRule.GetDropLevel();s=f.GetF1_F2RandomValue(1,Math.ceil((h+m)/d.F1)),k.isTestLog&&console.log("随机到的掉落等级",s,"最大值:",Math.ceil((h+m)/d.F1)),s<1?s=1:s>d.F2&&(s=d.F2);let e=n[1].split("-"),t=e[0],i=e[1],o=(-1!=t.indexOf("N")&&(t=t.replace("N","-")),-1!=i.indexOf("N")&&(i=i.replace("N","-")),t),a=i;Number(i)>Number(t)&&(o=i,a=t);var c=f.GetF1_F2RandomValue(Number(a),Number(o));k.isTestLog&&console.log("掉落标准等级",s,"随机+的等级",c,"品质随机",n,e[1],o,"key",l),(s+=c)<1?s=1:s>d.F2&&(s=d.F2)}r="Gear_"+s+"_"+n[2]+"_1"}else if("Chest1_Coin"==l||"Chest2_Coin"==l){let e=n;e<1&&(e=1),e=Number(K.DataModule().GetLocal().weapon.GetPrice(e));c="Chest1_Coin"==l?e*(1-.01*n)*1.1/1.3:e*(1-.01*n)*1.2/1.5,d=this.GetKeyIndex(o,a).Amount1;c=Math.round(c*d),k.isTestLog&&console.log("获得金币数值",c,"价格",e),r=Z.Coin+"_"+Z.Coin+"_"+c}else if("Gem"==l){d=this.GetKeyIndex(o,a),c=d.Amount1,d=d.Amount2,d=1<d?f.GetF1_F2RandomValue(c,d):c;r=Z.Diamond+"_"+Z.Diamond+"_"+d}else if(-1!=l.indexOf("HeroPieceRare_")){let e=l.split("_")[1],t=K.DataModule().GetUser().GetRareDebrisHeroList(Number(e)),i=t[f.GetF1_F2RandomValue(0,t.length-1)],o=1;f.GetRandomValue(30)&&(o=2),r=Z.HeroPiece+"_"+i.ID+"_"+o}else if("Chest_InGame1_Coin"==l){let e=n,t=(e<1&&(e=1),e=Number(K.DataModule().GetLocal().weapon.GetPrice(e)),1),i=this.GetKeyIndex(o,a);i&&(t=i.Amount1);var c=e*(1-.01*n)*.005,d=e*(1-.01*n)*.03,s=f.GetF1_F2RandomValue(c,d),s=Math.round(s*t);k.isTestLog&&console.log("获得Chest_InGame1_Coin金币数值",s,"价格",e,c,d,t,o),r=Z.Coin+"_"+Z.Coin+"_"+s}else if("Item_Event_2021NewYear"==l){c=[16,16,16,16,16,16,3],d="NewYearFonta,NewYearFontb,NewYearFontc,NewYearFontd,NewYearFonte,NewYearFontf,NewYearFontg".split(",")[f.GetWeightRandom(c)];r=Z.NewYearFont+"_"+d+"_1"}else if(l==Z.HeroPiece_Random){s=K.DataModule().GetUser().GetHeroPieceList_Now();1<=s.length?r=Z.HeroPiece+"_"+s[f.GetF1_F2RandomValue(0,s.length-1)].ID+"_1":e&&1<=(c=K.DataModule().GetUser().GetWeaponSkinList_Now()).length&&(r=Z.WeaponSkin+"_"+c[f.GetF1_F2RandomValue(0,c.length-1)].ID+"_1")}else if("Chest_Piece_Coin"==l){let e=n;e<1&&(e=1),e=Number(K.DataModule().GetLocal().weapon.GetPrice(e));d=this.GetKeyIndex(o,a),s=(d&&d.Amount1,e*(1-.01*n)*2),c=e*(1-.01*n)*5,d=f.GetF1_F2RandomValue(s,c);r=Z.Coin+"_"+Z.Coin+"_"+d}else if(l==Z.WeaponSkinPiece_Random){s=K.DataModule().GetUser().GetWeaponSkinList_Now();1<=s.length?r=Z.WeaponSkin+"_"+s[f.GetF1_F2RandomValue(0,s.length-1)].ID+"_1":e&&1<=(c=K.DataModule().GetUser().GetHeroPieceList_Now()).length&&(r=Z.HeroPiece+"_"+c[f.GetF1_F2RandomValue(0,c.length-1)].ID+"_1")}else if(-1!=l.indexOf(Z.HeroPiece)){d=l.split("_")[1];if(K.DataModule().GetUser().IsHeroUnlock(d)||K.DataModule().GetUser().IsHeroBuy(d)){if(e)return this.CreationEquip(Z.HeroPiece_Random,"",0,!0)}else r=Z.HeroPiece+"_"+d+"_1"}else if(-1!=l.indexOf("Hero")){s=l.split("_"),c=s[0];c==Z.Hero?r=Z.Hero+"_"+s[1]:c==Z.UnlockHero&&(r=Z.UnlockHero+"_"+s[1])}else if(l==Z.Exp){r=l;e=this.GetKeyIndex(o,a);if(e.Amount1){d=e.Amount1,c=e.Amount2;r+="_"+(1<c?f.GetF1_F2RandomValue(d,c):d)}else{let t=0,i=K.DataModule().GetLocal().zombie,o=f.GetF1_F2RandomValue(e.F1,e.F2);for(let e=0;e<o;e++)t+=i.GetRandomZombie(V.CurrentDay,q.Random()).KillExp;r+="_"+t}}else l==Z.Bolt?(r=l,(s=this.GetKeyIndex(o,a)).Amount1?(c=s.Amount1,d=s.Amount2,r+="_"+(1<d?f.GetF1_F2RandomValue(c,d):c)):r+="_"+Math.round(s.F1+q.Random()*Math.pow(V.CurrentDay,s.F2)*s.F3)):l==Z.Battery?(r=l,(e=this.GetKeyIndex(o,a)).Amount1?(d=e.Amount1,c=e.Amount2,r+="_"+(1<c?f.GetF1_F2RandomValue(d,c):d)):r+="_"+Math.round(e.F1+q.Random()*Math.pow(V.CurrentDay,e.F2)*e.F3)):l==Z.AddItem?(r=l,s=this.GetKeyIndex(o,a),-1!=o.indexOf("Chest_ZombieInGameFactory_")?r+="_"+Math.round(s.F1+q.Random()*Math.pow(V.CurrentDay,s.F2)*s.F3):(c=s.Amount1,d=s.Amount2,r+="_"+(1<d?f.GetF1_F2RandomValue(c,d):c))):l==Z.AddWeapon?(r=l,s=(e=this.GetKeyIndex(o,a)).Amount1,d=e.Amount2,r+="_"+(1<d?f.GetF1_F2RandomValue(s,d):s)):l==Z.ZombieCoin&&(r=l,(c=this.GetKeyIndex(o,a)).Amount1?(e=c.Amount1,d=c.Amount2,r+="_"+(1<d?f.GetF1_F2RandomValue(e,d):e)):r+="_"+Math.round(c.F1+q.Random()*Math.pow(V.CurrentDay,c.F2)*c.F3));return k.isTestLog&&console.log("创建的key",r),r}},this.shop=new class{Parse(e){var t=e;this.datas=[],this.dictionary=[];for(var i=0;i<t.ShopDataList.length;i++)this.datas.push(t.ShopDataList[i]),this.dictionary[this.datas[i].ShopID]=t.ShopDataList[i]}Get(t){for(let e=0;e<this.datas.length;e++)if(this.datas[e].ShopID==t)return this.datas[e];return console.warn("CanNotFind "+t+" in ShopDataHandler"),null}GetByKey(e){var t=this.dictionary[e];return null==t&&console.warn("CanNotFind "+e+" in ShopDataHandler"),t}GetDatas(){return this.datas}GetShopData(){let l=[],r=-1,h="0",m=K.DataModule().GetLocal().gameRule,s=[1,2,3,0];for(let n=0;n<s.length;n++){let e="Shop"+s[n],t=this.GetChest(e),i=("Shop0"==e&&(t.length<1||""==t[0].tableID)&&(t=this.GetChest("Shop3")),K.DataModule().GetUser().NewUserShopItemDataData()),o=(i.data=t[0],i.data.res.split("_")),a=o[1];var d;-1!=o[1].indexOf("Rare*")&&(d=o[1].split("*")[1],a=(i.data.rare*Number(d)).toString()),i.price=a,i.data.res="",l.push(i)}for(let s=4;s<6;s++){let e="Shop"+s,t=this.GetAllIndex(e),i=[];for(let e=0;e<t.length;e++)i.push(t[e].Weight);let o=f.GetWeightRandom(i),a=t[o].Bonus,n=K.DataModule().GetUser().NewUserShopItemDataData();var c;n.data.type=Z.Box,n.data.id=a,"Shop4"==e?(r=m.GetShopBox1Pertory(),h=t[o].GemPrice,K.DataModule().GetUser().GetData().treasureItemList[4]&&(r=K.DataModule().GetUser().GetData().treasureItemList[4].repertory,h=K.DataModule().GetUser().GetData().treasureItemList[4].price,n.data.id=K.DataModule().GetUser().GetData().treasureItemList[4].data.id,n.data.data=K.DataModule().GetUser().GetData().treasureItemList[4].data.data,n.data.buyCount=K.DataModule().GetUser().GetData().treasureItemList[4].data.buyCount)):"Shop5"==e&&(r=m.GetShopBox2Pertory(),h="0",K.DataModule().GetUser().GetData().treasureItemList[5]?(r=K.DataModule().GetUser().GetData().treasureItemList[5].repertory,0!=K.DataModule().GetUser().GetData().treasureItemList[5].data.buyCount?(n.data.buyCount=K.DataModule().GetUser().GetData().treasureItemList[5].data.buyCount,r=K.DataModule().GetUser().GetData().treasureItemList[5].repertory):(c=m.GetBoxEndless_Bonus().F1,n.data.buyCount=c)):(c=m.GetBoxEndless_Bonus().F1,n.data.buyCount=c)),n.repertory=r,n.price=h,n.isBuy=!1,l.push(n)}return l}GetChest(e){let n,s=[],t=e,l=this.GetAllIndex(t);if(l&&0<l.length){let t=[],i=!1,o=K.DataModule().GetUser().GetHeroPieceList_Now(),a=K.DataModule().GetUser().GetWeaponSkinList_Now();for(let e=0;e<l.length;e++){var r;l[e].Bonus==Z.HeroPiece_Random?1<=o.length?(t.push(l[e].Weight),i=!0):t.push(0):l[e].Bonus==Z.WeaponSkinPiece_Random?1<=a.length?(t.push(l[e].Weight),i=!0):t.push(0):-1!=l[e].Bonus.indexOf(Z.HeroPiece)?(r=l[e].Bonus.split("_")[1],!K.DataModule().GetUser().IsHeroUnlock(r)&&!K.DataModule().GetUser().IsHeroBuy(r)&&("Seaman"!=r||K.DataModule().GetUser().IsHeroUnlock("Landman"))?(t.push(l[e].Weight),i=!0):t.push(0)):(i=!0,t.push(l[e].Weight))}i||(t[0]=1);e=f.GetWeightRandom(t),e=(n=l[e],K.DataModule().GetLocal().lottery.CreationEquip(l[e].Bonus,"",0,!1));""!=e&&s.push(e)}let i=j.GetItemDataAndIsShowBox("",s,3);if(i.length<1)return i;e="0_"+n.GemPrice+"_false";return i[0].res=e,k.isTestLog&&console.log("获得商店权重数据",s),i}GetAllIndex(t){let i=[];for(let e=0;e<this.datas.length;e++)this.datas[e].ShopID==t&&i.push(this.datas[e]);return i}},this.quest=new class{Parse(e){var t=e;this.datas=[],this.dictionary=[];for(var i=0;i<t.QuestDataList.length;i++)this.datas.push(t.QuestDataList[i]),this.dictionary[this.datas[i].QuestID]=t.QuestDataList[i]}Get(t){for(let e=0;e<this.datas.length;e++)if(this.datas[e].QuestID==t)return this.datas[e];return console.warn("CanNotFind "+t+" in QuestDataHandler"),null}GetByKey(e){var t=this.dictionary[e];return null==t&&console.warn("CanNotFind "+e+" in QuestDataHandler"),t}GetDatas(){return this.datas}GetLoginSign(){let t=[];for(let e=1;e<=7;e++){var i="Login"+e,i=this.Get(i);t.push(i)}return t}GetLoginSign_Loop(){let t=[];for(let e=1;e<=7;e++){var i=this.Get("LoginAfterwards");t.push(i)}return t}GetFollowBonus_TikTok(){return this.Get("FollowBonus_TikTok").Bonus}GetAllIndex_Requirement(t,i){for(let e=0;e<this.datas.length;e++)if(this.datas[e].QuestID==t&&this.datas[e].Requirement==i)return this.datas[e];return null}GetAll(t){let i=[];for(let e=0;e<this.datas.length;e++)this.datas[e].QuestID==t&&i.push(this.datas[e]);return i}LoadTaskInfo(){let i=[];for(let e=1;e<30;e++){var o="DailyTask_"+e,a=this.GetAll(o);if(a.length<1)break;if(1==a.length&&(i.push(a[0]),K.DataModule().GetUser().AddSaveKey("saveTask_"+a[0].Requirement,i[0].RequirementValue,0,0,o)),1<a.length){let t=[];for(let e=0;e<a.length;e++)t.push(a[e].Weight),K.DataModule().GetUser().AddSaveKey("saveTask_"+a[e].Requirement,"-1",0,0,o);var n=f.GetWeightRandom(t);i.push(a[n])}}console.log("初始化任务列表",i);for(let t=0;t<i.length;t++){let e=0;"login"==i[t].Requirement&&(e=1),K.DataModule().GetUser().AddSaveKey("saveTask_"+i[t].Requirement,i[t].RequirementValue,e,0,i[t].QuestID)}}},this.event=new class{Parse(e){var t=e;this.datas=[],this.dictionary=[];for(var i=0;i<t.EventDataList.length;i++)this.datas.push(t.EventDataList[i]),this.dictionary[this.datas[i].EventID]=t.EventDataList[i]}Get(t){for(let e=0;e<this.datas.length;e++)if(this.datas[e].EventID==t)return this.datas[e];return console.warn("CanNotFind "+t+" in EventDataHandler"),null}GetByKey(e){var t=this.dictionary[e];return null==t&&console.warn("CanNotFind "+e+" in EventDataHandler"),t}GetDatas(){return this.datas}GetIntoSnowScene(){var e=this.Get("IntoSnowScene");return!!f.GetRandomValue(e.F1)}},this.weaponSkin=new class{constructor(){this.platform_IdList=[]}Parse(e){var i=e;this.datas=[],this.dictionary=[],this.Platform_Hero_Start();for(var o=0;o<i.WeaponSkinDataList.length;o++){let t=!0;for(let e=0;e<this.platform_IdList.length;e++)if(i.WeaponSkinDataList[o].ID==this.platform_IdList[e]){t=!1;break}t&&(this.datas.push(i.WeaponSkinDataList[o]),this.dictionary[this.datas[o].ID]=i.WeaponSkinDataList[o])}this.Platform_Hero_End()}Platform_Hero_Start(){}Platform_Hero_End(){if(T.IS_4399)for(let e=0;e<this.datas.length;e++)"EpicAss"===this.datas[e].ID&&(this.datas[e].uiRes="EpicAss1",this.datas[e].Res="WeaponSkin_PG1")}Get(t){for(let e=0;e<this.datas.length;e++)if(this.datas[e].ID==t)return this.datas[e];return console.warn("CanNotFind "+t+" in WeaponSkinDataHandler"),null}GetByKey(e){var t=this.dictionary[e];return null==t&&console.warn("CanNotFind "+e+" in WeaponSkinDataHandler"),t}GetSkinByType(t){let i=[];for(let e=0;e<this.datas.length;e++)t==this.datas[e].WeaponType&&i.push(this.datas[e].ID);return i}GetDatas(){return this.datas}GetWeaponSkinType(t){let i=[];for(let e=0;e<this.datas.length;e++)this.datas[e].WeaponType==t&&i.push(this.datas[e]);return i}ResSkin_Astrict(){var t=this.datas;for(let e=0;e<t.length;e++)"EpicAss"==t[e].ID&&(this.datas[e].Res="WeaponSkin_WJQ",this.datas[e].uiRes="RubberGun",this.datas[e].ID="RubberGun")}},this.heroLv=new class{Parse(e){var t=e;this.datas=[],this.dictionary=[];for(var i=0;i<t.HeroLvlDataList.length;i++)this.datas.push(t.HeroLvlDataList[i]),this.dictionary[this.datas[i].HeroID]=t.HeroLvlDataList[i]}Get(t){for(let e=0;e<this.datas.length;e++)if(this.datas[e].HeroID==t)return this.datas[e];return null}GetByKey(e){return this.dictionary[e]}GetDatas(){return this.datas}GetAllPropByLevel(e,t){let i=[],o=this.Get(e);return null==o?i:(2<=t&&(i=i.concat(o.Bonus2)),3<=t&&(i=i.concat(o.Bonus3)),4<=t&&(i=i.concat(o.Bonus4)),5<=t&&(i=i.concat(o.Bonus5)),6<=t&&(i=i.concat(o.Bonus6)),7<=t&&(i=i.concat(o.Bonus7)),8<=t&&(i=i.concat(o.Bonus8)),9<=t&&(i=i.concat(o.Bonus9)),10<=t&&(i=i.concat(o.Bonus10)),11<=t&&(i=i.concat(o.Bonus11)),12<=t&&(i=i.concat(o.Bonus12)),13<=t&&(i=i.concat(o.Bonus13)),14<=t&&(i=i.concat(o.Bonus14)),15<=t&&(i=i.concat(o.Bonus15)),16<=t&&(i=i.concat(o.Bonus16)),17<=t&&(i=i.concat(o.Bonus17)),18<=t&&(i=i.concat(o.Bonus18)),19<=t&&(i=i.concat(o.Bonus19)),20<=t&&(i=i.concat(o.Bonus20)),i=K.DataModule().GetLocal().hero.GetAllProp(i))}GetPropByLevel(e,t){let i=[],o=this.Get(e);return null==o?i:(2==t&&(i=i.concat(o.Bonus2)),3==t&&(i=i.concat(o.Bonus3)),4==t&&(i=i.concat(o.Bonus4)),5==t&&(i=i.concat(o.Bonus5)),6==t&&(i=i.concat(o.Bonus6)),7==t&&(i=i.concat(o.Bonus7)),8==t&&(i=i.concat(o.Bonus8)),9==t&&(i=i.concat(o.Bonus9)),10==t&&(i=i.concat(o.Bonus10)),11==t&&(i=i.concat(o.Bonus11)),12==t&&(i=i.concat(o.Bonus12)),13==t&&(i=i.concat(o.Bonus13)),14==t&&(i=i.concat(o.Bonus14)),15==t&&(i=i.concat(o.Bonus15)),16==t&&(i=i.concat(o.Bonus16)),17==t&&(i=i.concat(o.Bonus17)),18==t&&(i=i.concat(o.Bonus18)),19==t&&(i=i.concat(o.Bonus19)),20==t&&(i=i.concat(o.Bonus20)),i=K.DataModule().GetLocal().hero.GetAllProp(i))}GetCostByLevel(e,t){e=this.Get(e);return null==e?0:2==t?e.GemLv2:3==t?e.GemLv3:4==t?e.GemLv4:5==t?e.GemLv5:6==t?e.GemLv6:7==t?e.GemLv7:8==t?e.GemLv8:9==t?e.GemLv9:10==t?e.GemLv10:11==t?e.GemLv11:12==t?e.GemLv12:13==t?e.GemLv13:14==t?e.GemLv14:15==t?e.GemLv15:16==t?e.GemLv16:17==t?e.GemLv17:18==t?e.GemLv18:19==t?e.GemLv19:20==t?e.GemLv20:0}},this.zombie=new class{Parse(e){var t=e;this.datas=[],this.dictionary=[];for(var i=0;i<t.ZombieDataList.length;i++)this.datas.push(t.ZombieDataList[i]),this.dictionary[this.datas[i].ID]=t.ZombieDataList[i]}Get(t){for(let e=0;e<this.datas.length;e++)if(this.datas[e].ID==t)return this.datas[e];return console.warn("CanNotFind "+t+" in ZombieDataHandler"),null}GetByKey(e){var t=this.dictionary[e];return null==t&&console.warn("CanNotFind "+e+" in ZombieDataHandler"),t}GetDatas(){return this.datas}GetRandomZombie(t,i,o=null){let a=[],n=0;for(let e=0;e<this.datas.length;e++){var s=this.datas[e];o&&-1==o.indexOf(s.Type)||t>=s.UnlockDay&&(a.push(s),n+=s.Weight)}i*=n;for(let e=0;e<a.length;e++){var l=a[e];if((i-=l.Weight)<=0)return l}}},this.zombieSchedule=new class{Parse(e){var t=e;this.datas=[],this.dictionary=[];for(var i=0;i<t.ZombieScheduleDataList.length;i++)this.datas.push(t.ZombieScheduleDataList[i]),this.dictionary[this.datas[i].Day]=t.ZombieScheduleDataList[i]}Get(t){for(let e=0;e<this.datas.length;e++)if(this.datas[e].Day==t)return this.datas[e];return console.warn("CanNotFind "+t+" in ZombieScheduleDataHandler"),null}GetByKey(e){var t=this.dictionary[e];return null==t&&console.warn("CanNotFind "+e+" in ZombieScheduleDataHandler"),t}GetDatas(){return this.datas}},this.item=new class{constructor(){this.zombieItems=[]}Parse(e){var t=e;this.datas=[],this.dictionary=[];for(var i=0;i<t.ItemDataList.length;i++){var o=t.ItemDataList[i];o.Active&&(this.datas.push(o),this.dictionary[o.ItemID]=o,this.zombieItems.push(o))}}GetZombieItemIds(){let t=[];for(let e=0;e<this.zombieItems.length;e++)t.push(this.zombieItems[e].ItemID);return t}GetZombieItemDatas(){let o=[],a=K.DataModule().GetUser().GetData().ZombieUnlockItemList;for(let e=0;e<this.datas.length;e++){let t=this.datas[e],i=!1;for(let e=0;e<a.length;e++){var n=a[e];t.ItemID==n&&(i=!0)}i&&o.push(this.datas[e])}return o}GetZombieUnlockItemList(t){return this.datas.filter(e=>e.ActiveDay<=t)}Get(t){for(let e=0;e<this.datas.length;e++)if(this.datas[e].ItemID==t)return this.datas[e];return console.warn("CanNotFind "+t+" in ItemDataHandler"),null}GetByKey(e){var t=this.dictionary[e];return null==t&&console.warn("CanNotFind "+e+" in ItemDataHandler"),t}GetDatas(){return this.datas}},this.zModePassiveSkill=new class{Parse(e){var t=e;this.datas=[],this.dictionary=[];for(var i=0;i<t.ZModePassiveSkillDataList.length;i++)this.datas.push(t.ZModePassiveSkillDataList[i]),this.dictionary[this.datas[i].SkillID]=t.ZModePassiveSkillDataList[i]}Get(t){for(let e=0;e<this.datas.length;e++)if(this.datas[e].SkillID==t)return this.datas[e];return null}GetUnlockZmPassiveSkill(t){return this.datas.filter(e=>e.ActiveDay<=t)}GetByKey(e){return this.dictionary[e]}GetDatas(){return this.datas.filter(e=>1==e.Active)}GetUnlockDatas(){let o=this.GetDatas(),a=[],n=K.DataModule().GetUser().GetData().ZombieUnlockZMpassiveSkills;for(let e=0;e<o.length;e++){let t=o[e],i=!1;for(let e=0;e<n.length;e++){var s=n[e];if(t.SkillID==s){i=!0;break}}i&&a.push(o[e])}return a}},this.zQuest=new class{Parse(e){var t=e;this.datas=[],this.dictionary=[];for(var i=0;i<t.Z_QuestDataList.length;i++){var o=t.Z_QuestDataList[i];o.Active&&this.datas.push(o),this.dictionary[o.QuestID]=o}}Get(t){for(let e=0;e<this.datas.length;e++)if(this.datas[e].QuestID==t)return this.datas[e];return console.warn("CanNotFind "+t+" in Z_QuestDataHandler"),null}GetByKey(e){var t=this.dictionary[e];return null==t&&console.warn("CanNotFind "+e+" in Z_QuestDataHandler"),t}GetDatas(){return this.datas}GetRandomQuest(t,i){let o=[],a=0;for(let e=0;e<this.datas.length;e++){var n=this.datas[e];t>=n.UnlockDay&&(o.push(n),a+=n.Weight)}i*=a;for(let e=0;e<o.length;e++){var s=o[e];if((i-=s.Weight)<=0)return s}}}}Init(){this.event.Parse(K.ResModule().GetJson(x.EventData)),this.quest.Parse(K.ResModule().GetJson(x.QuestData)),this.shop.Parse(K.ResModule().GetJson(x.ShopData)),this.lottery.Parse(K.ResModule().GetJson(x.LotteryData)),this.prop.Parse(K.ResModule().GetJson(x.propData)),this.gameRule.Parse(K.ResModule().GetJson(x.GameRuleData)),this.platform.Parse(K.ResModule().GetJson(x.PlatformSettingData)),this.hero.Parse(K.ResModule().GetJson(x.HeroData)),this.skill.Parse(K.ResModule().GetJson(x.SkillData)),this.localization.Parse(K.ResModule().GetJson(x.localizationJsonData)),this.weapon.Parse(K.ResModule().GetJson(x.WeaponData)),this.gear.Parse(K.ResModule().GetJson(x.GearData)),this.medal.Parse(K.ResModule().GetJson(x.MedalLevelData)),this.playerLv.Parse(K.ResModule().GetJson(x.PlayerLvData)),this.entryData.Parse(K.ResModule().GetJson(x.EntryData)),this.ai.Parse(K.ResModule().GetJson(x.AIData)),this.weaponSkin.Parse(K.ResModule().GetJson(x.WeaponSkinData)),this.heroLv.Parse(K.ResModule().GetJson(x.HeroLvlData)),this.zombie.Parse(K.ResModule().GetJson(x.ZombieData)),this.zombieSchedule.Parse(K.ResModule().GetJson(x.ZombieSchedule)),this.item.Parse(K.ResModule().GetJson(x.ItemData)),this.zModePassiveSkill.Parse(K.ResModule().GetJson(x.ZModePassiveSkill)),this.zQuest.Parse(K.ResModule().GetJson(x.Z_Quest))}}}Init(){YC.Instance=this,super.Init(),this.InitOver()}GetLz(){return this.local.localization}GetUser(){return this.user}GetLocal(){return this.local}GetPlatform(){return this.local.platform}},QC=class extends u{constructor(){super(...arguments),this.ModuleName="数据模块",this.isInitOK=!1,this.name="玩家",this.roomPlayerCount=-1,this.frame=0,this.startFrame=0,this.frames=[],this.hasGetFirstFrame=!1}Init(){QC.Instance=this,super.Init(),this.InitOver()}RunFrame(e){if(this.frame++,this.frame!=e.id&&(this.startFrame=e.id),0<e.items.length){var t=e.items;for(let e=0;e<t.length;e++){var i=t[e],o=i.data,i={id:i.playerId,angle:o.angle,move:o.move,s:o.s,c:o.c};V.cmds.push(i)}}q.Instance().NetUpdate()}RequestFrame(e,t){let i=this;this.room.requestFrame({beginFrameId:e,endFrameId:t},t=>{b.Warn("补帧成功",t);for(let e=0;e<t.data.frames.length;e++)i.RunFrame(t.data.frames[e]);for(let e=0;e<i.frames.length;e++)i.RunFrame(i.frames[e]);i.hasGetFirstFrame=!0})}GetRoomInfo(){return this.room.roomInfo}IsSelf(e){return MGOBE.Player.id==e}Random(){return MGOBE.RandomUtil.random()}SendFrameCMD(e){this.room.sendFrame({data:e})}GetPlayerData(t){var i=this.room.roomInfo.playerList;for(let e=0;e<i.length;e++)if(i[e].id==t)return i[e];return null}StartMatch(){var e;this.isInitOK&&(this.hasGetFirstFrame=!1,this.frames=[],this.frame=0,this.roomPlayerCount=-1,e={playerInfo:{name:K.DataModule().GetUser().userId,customPlayerStatus:1,customProfile:K.DataModule().GetUser().GetData().nowChooseHero+"|"+K.DataModule().GetUser().GetEquitWeapon()+"|"+this.name+"|"+K.DataModule().GetUser().GetAllPropsStrs()+"|"+K.DataModule().GetUser().GetData().userMedal.level,matchAttributes:[{}]},maxPlayers:10,roomType:"2"},this.room.matchRoom(e,e=>{0===e.code?console.log("请求成功"):console.log("请求失败",e.code)}),this.room.onUpdate=e=>{if(0==this.room.roomInfo.frameSyncState){let t=0;for(let e=0;e<this.room.roomInfo.playerList.length;e++)this.room.roomInfo.playerList[e].id!=this.room.roomInfo.owner||1==this.room.roomInfo.playerList[e].commonNetworkState||this.IsRoomMaster()||this.Leave(),1==this.room.roomInfo.playerList[e].commonNetworkState&&t++;if(2<=(this.roomPlayerCount=t)&&!this.room.roomInfo.isForbidJoin&&this.IsRoomMaster()){let t=this;Laya.timer.once(5e3,this,function(){t.room.changeRoom({isForbidJoin:!0},e=>{b.Warn("准备完毕开始游戏"),t.room.startFrameSync({},e=>{0===e.code&&(console.log("开始帧同步成功"),this.roomPlayerCount=1e3)})})})}}})}IsRoomMaster(){return this.room.roomInfo.owner==MGOBE.Player.id}Leave(){}SetSeed(e){}},K=class{static ResModule(){return Q.Instance}static InputModule(){return rn.Instance}static UIModule(){return zC.Instance}static AudioModule(){return Rg.Instance}static DataModule(){return YC.Instance}static SDKModule(){return z.Instance}static PlatformModule(){return W.Instance}static NetModule(){return Jd.Instance}static MGOBEModule(){return QC.Instance}static Lz(e,...t){return K.DataModule().GetLocal().localization.GetTextByPar(e,...t)}},JC=class extends lt{constructor(){super(...arguments),this.systemName="MergeSystem"}Init(){}Update(){let n=this.world.GetSingleCompoent(Fp);if(n){if(K.DataModule().GetUser().GetData().nowGuide==qp.BuyWeapon){let e=K.UIModule().GetUI(Hp.UIName),t=(e.enterGuideBuy||(n.useMergeGuide=!1,e.HideGuideBuy(),e.ShowGuideBuy()),0);for(let e=0;e<n.mapList.length;e++)""!=n.mapList[e]&&1<++t&&K.DataModule().GetUser().SetNowGuidance(qp.MergeWeapon)}if(K.DataModule().GetUser().GetData().nowGuide==qp.MergeWeapon){let t=K.UIModule().GetUI(Hp.UIName);t.enterGuide||(n.useMergeGuide=!0,t.ShowGuide());for(let e=0;e<n.mapList.length;e++)"Weapon2"==n.mapList[e]&&t.HideGuide()}if(n.useMergeGuide&&(n.mergeGuideTime+=A.TimeDelta,10<n.mergeGuideTime)&&(n.mergeGuideTime=0,K.UIModule().GetUI(Hp.UIName).ShowGuide()),n.showAddCoinTime+=A.TimeDelta,5<n.showAddCoinTime){n.showAddCoinTime=0;let t=K.UIModule().GetUI(Hp.UIName),i=0,o=0;for(let e=0;e<n.mapList.length;e++){var a;""==n.mapList[e]||this.IsWeaponBox(n.mapList[e])||(a=K.DataModule().GetLocal().weapon.Get(n.mapList[e]))&&a.Produce_Gold&&(i+=a.Produce_Gold,0<a.Produce_Gold&&(n.nowState==Fp.State_Normal&&(0==o?t.AddCoinByItem(e,a.Produce_Gold,0):t.AddCoinByItem(e,a.Produce_Gold,4)),o++)),""!=n.mapList[e]&&this.IsWeaponBox(n.mapList[e])&&t.ShowShake(e)}t.SetCoinAddRewardText(i),ng.OffLineEnd&&(K.DataModule().GetUser().SetOffLineTime(A.SystemTime),K.DataModule().GetUser().AddCoin(i.toString(),at.online))}if(n.useDropBox){if(1<K.DataModule().GetUser().GetData().mergeLevel&&0==n.willUpgradeIndex.length){n.useDropLeftTime-=A.TimeDelta;var s=K.DataModule().GetUser().GetData().mergeLevel;if(n.useDropLeftTime<0){let o=0,t=0;for(let e=0;e<n.mapList.length;e++)this.IsWeaponBox(n.mapList[e])&&t++;if(t<n.dropBoxMaxCount)for(let i=0;i<n.mapList.length;i++)if(""==n.mapList[i]){let e=K.UIModule().GetUI(Hp.UIName),t=(Math.max(1,s-n.dropnNomalSubLevel),"Box_Weapon"+s);n.mapList[i]=t,K.DataModule().GetUser().GetData().mergeMap=n.mapList.concat(),K.DataModule().GetUser().SaveData(),e.FreshItems(),e.ShowDropBox(i),e.HideGuide(),K.AudioModule().PlayOnce(x.GetSound2("OpenWeaponBox")),o++;break}0<o&&(Fp.offsetTime+=30,n.useDropLeftTime=n.useDropTimeMin+Fp.offsetTime+(n.useDropTimeMax-n.useDropTimeMin)*Math.random(),b.Warn("等待",n.useDropLeftTime))}}if(0<n.addDropBoxNowCount&&K.UIModule().GetNowTopUIName()==Zg.UIName){let o=K.DataModule().GetUser().GetData().mergeLevel,a=0;for(let i=0;i<n.mapList.length;i++)if(""==n.mapList[i]&&0<n.addDropBoxNowCount){let e=K.UIModule().GetUI(Hp.UIName),t=Math.max(1,o-n.dropnNomalSubLevel);n.mapList[i]="Box_Weapon"+t,K.DataModule().GetUser().GetData().mergeMap=n.mapList.concat(),K.DataModule().GetUser().SaveData(),e.FreshItems(),e.ShowDropBox(i),e.HideGuide(),n.addDropBoxNowCount--,a++}0<a&&K.AudioModule().PlayOnce(x.GetSound2("OpenWeaponBox"))}}if(n.trigerUpgrade){n.trigerUpgrade=!1;let t=K.UIModule().GetUI(Hp.UIName);for(let e=0;e<n.willUpgradeIndex.length;e++){var i=n.willUpgradeIndex[e];n.mapList[i]=n.willUpgradeWeapon[e],null==n.mapList[i]&&(n.mapList[i]=""),t.ShowSpEffect(i,.5),t.ShowShake2(i,.5)}K.DataModule().GetUser().GetData().mergeMap=n.mapList.concat(),K.DataModule().GetUser().SaveData(),t.FreshItems(),t.HideGuide(),n.willUpgradeIndex=[],n.willUpgradeWeapon=[]}if(n.nowState!=n.oldState){if(n.nowState==Fp.State_Normal){let i=K.UIModule().GetUI(Hp.UIName),o=-1;if(n.sell){if(this.IsWeaponBox(n.mapList[n.nowChooseIndex]))return void(n.oldState=n.nowState);n.sell=!1;var l=K.DataModule().GetLocal().weapon.Get(n.mapList[n.nowChooseIndex]);l&&(n.mapList[n.nowChooseIndex]="",K.DataModule().GetUser().AddCoin(Y.cheng(l.Coin,.5),at.recycle_wenpon),K.DataModule().GetUser().GetData().mergeMap=n.mapList.concat(),K.DataModule().GetUser().SaveData(),K.UIModule().GetUI(Ua.UIName).ShowAddCoin(new Laya.Vector2(i.view.m_recyclePos.x,i.view.m_recyclePos.y),10))}else{l=n.PosToIndex(n.nowPos.x,n.nowPos.y);if(l==n.nowChooseIndex&&-1!=l){let e=n.mapList[l];if(this.IsWeaponBox(e)&&"Box"==e.split("_")[0]){var r=K.DataModule().GetUser().GetData().mergeLevel,h=Math.max(1,r-n.dropnNomalSubLevel);n.mapList[n.nowChooseIndex]="Weapon"+h;let e=K.UIModule().GetUI(Hp.UIName);if(e.FreshItems(),e.ShowSpEffect(n.nowChooseIndex),K.DataModule().GetUser().GetData().mergeMap=n.mapList.concat(),K.DataModule().GetUser().SaveData(),1<r)if(Math.random()<n.dropnUpGradeChance){n.willUpgradeIndex=[],n.willUpgradeWeapon=[];let t=h+n.dropnUpAddLevel,e=(t>r&&(t=r),h+n.dropnSuperAddLevel),i=(e>r&&(e=r),n.dropnUpAddCount);n.nowWillUpgradeIndex=l,n.willUpgradeIndex.push(l),n.willUpgradeWeapon.push("Weapon"+t);for(let e=0;e<n.mapList.length&&!(""==n.mapList[e]&&(0<i&&(n.willUpgradeIndex.push(e),n.willUpgradeWeapon.push("Weapon"+t),i--),i<=0));e++);1==n.willUpgradeIndex.length&&(n.willUpgradeWeapon[0]="Weapon"+e),b.Warn("触发掉落",n.willUpgradeIndex,n.willUpgradeWeapon),K.UIModule().ShowUI(xC.UIName)}else K.AudioModule().PlayOnce(x.GetSound2("Merge"));else K.AudioModule().PlayOnce(x.GetSound2("Merge"))}}if(this.IsWeaponBox(n.mapList[n.nowChooseIndex]))return void(n.oldState=n.nowState);if(n.dragEquipment){n.dragEquipment=!1;var h=K.DataModule().GetLocal().weapon.Get(n.mapList[n.nowChooseIndex]),r=K.DataModule().GetUser().GetItemByID(h.ID);if(r.type==Z.Weapon&&(K.AudioModule().PlayOnce(x.GetSound2("Equip")),K.DataModule().GetUser().Equip(h.ID),r.type==Z.Weapon)){b.Warn(K.DataModule().GetUser().GetData().nowChooseHero),q.EcsGameMgr.nowGame.ChangeHero(K.DataModule().GetUser().GetData().nowChooseHero,K.DataModule().GetUser().GetEquitWeapon());let e=K.UIModule().GetUI(Zg.UIName);e.view&&e.isShow&&e.showWeaponTips()}}else if(l!=n.nowChooseIndex&&-1!=l){let e=-1,t=n.mapList[l];if(""!=t?t==n.mapList[n.nowChooseIndex]&&(K.DataModule().GetUser().AddTask("saveTask_"+zg.compound),n.mergeGuideTime=0,i.HideGuide(),(h=K.DataModule().GetLocal().weapon.Get(t))&&(null!=(r=K.DataModule().GetLocal().weapon.GetByLevel(h.Level+1))?(n.mapList[n.nowChooseIndex]="",o=l,n.mapList[l]=r.ID,K.DataModule().GetUser().GetData().mergeLevel<h.Level+1&&(e=h.Level+1),K.DataModule().GetUser().UnlockWeapon(r.ID)):(console.warn("满级了"),j.TopUI_TipShow("Weapon Strongest!")))):(n.mergeGuideTime=0,i.HideGuide(),n.mapList[l]=n.mapList[n.nowChooseIndex],n.mapList[n.nowChooseIndex]=""),K.DataModule().GetUser().GetData().mergeMap=n.mapList.concat(),K.DataModule().GetUser().SaveData(),-1!=e)return K.UIModule().GetUI(DC.UIName).level=e,K.UIModule().ShowUI(DC.UIName),h="",2==e&&z.Instance.LeYou_Guidance(7),h=e<10?"2000"+e:"200"+e,void z.Instance.ChuanQuStatistics(Number(h))}}i.FreshItems(),i.ClearDragUI(),i.HideGuide(),-1!=o&&i.ShowCombieAni(o)}if(n.nowState==Fp.State_Touching)if(-1==n.nowChooseIndex)n.nowState=Fp.State_Normal;else{r=n.mapList[n.nowChooseIndex];if(""==r)n.nowState=Fp.State_Normal;else if(this.IsWeaponBox(r))K.UIModule().GetUI(Hp.UIName).ShowClick(n.nowChooseIndex);else{let e=K.UIModule().GetUI(Hp.UIName);e.FreshItems(),e.CreatDragUI()}}n.oldState=n.nowState}if(""!=n.buyId){l=K.DataModule().GetUser().BuyWeaponById_Coin(n.buyId);if(0<=l){K.AudioModule().OptimizePlayOnce(x.GetSound2("Purchase")),n.mapList=K.DataModule().GetUser().GetData().mergeMap.concat();let e=K.UIModule().GetUI(Hp.UIName);z.Instance.LW_StatisticsEvent(1006,n.buyId.split("Weapon")[1],1..toString(),"0"),e.FreshItems(),e.ShowNewOne(l),e.FreshBuyBtn(),e.HideGuide()}else-1==l?T.ProjectSubCode&&2<=K.DataModule().GetUser().GetData().userLevel.level?K.UIModule().GetUI(Hp.UIName).SetFreeGold(!0):(j.WindowUI_Show(Fo.Coin_Insufficient),K.AudioModule().OptimizePlayOnce(x.GetSound2("CuoWu"))):-2==l&&(h=K.DataModule().GetLz().GetText("ShowMessage_tip2"),j.ShowMessage(h),K.AudioModule().OptimizePlayOnce(x.GetSound2("CuoWu")));n.buyId=""}}}IsWeaponBox(e){return null!=e&&-1!=e.indexOf("Box")}FixedUpdate(){}LateUpdate(){}Destroy(){}OnAddComponent(e,t){if(t.componentId==Fp.id){let o=t,e=(K.UIModule().ShowUI(Hp.UIName),K.UIModule().GetUI(Hp.UIName));for(let e=0;e<o.mapList.length;e++)null==o.mapList[e]&&(o.mapList[e]="");if(K.DataModule().GetUser().GetData().mergeMap=o.mapList.concat(),K.DataModule().GetUser().SaveData(),e.Init(),e.FreshItems(),e.FreshBuyBtn(),0!=JC.saveTime){var t=(new Date).getTime()-JC.saveTime,a=Math.floor(t/1e3/5);if(0<a){let i="0";for(let t=0;t<o.mapList.length;t++)if(""!=o.mapList[t]){let e=K.DataModule().GetLocal().weapon.Get(o.mapList[t]);e&&e.Produce_Gold&&(K.DataModule().GetUser().AddCoin(e.Produce_Gold.toString(),at.online),i=Y.jia(i,Y.cheng(e.Produce_Gold,a)))}K.DataModule().GetUser().AddCoin(i,at.online)}}if(o.useDropBox){let e=K.DataModule().GetLocal().gameRule.Get("IdleRandomWeaponGift");k.wx133ber_box||(e.F7="2"),o.useDropTimeMin=e.F1,o.useDropTimeMax=e.F2,o.dropBoxMaxCount=e.F3,o.dropnNomalSubLevel=e.F4,o.dropnUpGradeChance=.01*Number(e.F5),o.dropnUpAddLevel=Number(e.F7),o.dropnUpAddCount=Number(e.F6)-1,o.dropnUpAddCount<0&&(o.dropnUpAddCount=0),o.dropnSuperAddLevel=Number(e.F8),o.useDropLeftTime=o.useDropTimeMin,-1!=Fp.saveDropLeftTime&&(o.useDropLeftTime=Fp.saveDropLeftTime,Fp.saveDropLeftTime=-1)}}}OnRemoveComponent(e,t){if(t.componentId==Fp.id){let e=new Date;JC.saveTime=e.getTime(),K.UIModule().HideUI(Hp.UIName),Fp.saveDropLeftTime=t.useDropLeftTime}}},XC=JC,$C=(XC.saveTime=0,class{static EnterState(e,t){var i=t.GetComponent(U);t.GetComponent(xt).SetAnimation(i.idleClip)}static StateUpdate(e,t,i){}static StateExit(e,t){}}),eG=($C.StateName="UIShow",class{static StartGame(){if(K.DataModule().GetUser().GetData().nowGuide==qp.FirstFight){if(k.isGuidance&&(K.DataModule().GetUser().GetData().coin="800",K.DataModule().GetUser().SaveData()),K.DataModule().GetUser().isFistGame=!0,V.isFirstFight=!0,V.showInGameGuide=!0,W.newPlayer=!0,Zg.isOneShowInterstitialAd=!0,K.DataModule().GetUser().SetNowGuidance(qp.BuyWeapon),V.MustUseScene="BattleScene1",k.Chuanqu_OnTask&&(V.tryWeaponSkinId="MKB",V.tryHeroSkinId="MonkeyKing"),k.Platform==T.QQ&&ge.Instance.Report_CustomEvent("新手引导"),V.tryWeaponId="Weapon42",this.StartMainGame(),eg.conversion(1),Ko.Instance)try{window.MMMSDK.regChar("test2","mxz",W.openId,"null")}catch(e){}}else this.StartCover();z.Instance.LeYou_AdLogin()}static StartCover(){q.EcsGameMgr.StartGame(class extends nc{constructor(){super(...arguments),this.gameName="ChooseGame",this.resList=[N.Weapon_THSubmachine,N.Weapon_THAssault,N.Weapon_THGun,N.Weapon_THHeavyGun,N.Weapon_THInfantryGun,N.DefaultSp,N.Weapon_THMachineGun,N.Shadow,i.Player,i.CoverCameraRoot,N.Weapon_THDagger,i.Weapon_THAxe,i.Weapon_THSword,N.Effect_LevelUp],this.heroUsePos=new Laya.Vector3(0,0,0),this.heroUseRot=new Laya.Vector3(0,0,0),this.heroRotationY=0}LoadProgress(e){j.ShowLoading(.5+.5*e)}GetScenePath(){return x.GetScene("Cover")}NecessaryRes(){let e=new Li;return e.AddJson(o.PrefabJson),e}InitNecessaryResPool(){this.isLoadFailed||(this.gameElementCreator.LoadPrefabJsonData(K.ResModule().GetJson(o.PrefabJson)),b.Warn("必要资源"))}OtherRes(){let t=new Li;O.LoadAllPrefabRes(t);for(let e=0;e<this.resList.length;e++)t.Add3D(o.GetRes(this.resList[e]));return t}InitOtherResPool(){if(!this.isLoadFailed){for(let e=0;e<this.resList.length;e++)O.Creat3DNodePool(this.resList[e]);b.Warn("其他资源")}}LoadFailed(){super.LoadFailed(),this.isLoadFailed=!0,b.Warn("加载失败"),Laya.loader.offAll(null),j.ShowCheckDialog("网络问题,请重新尝试!",this,function(){Laya.Loader.clearResByGroup("Game"),Laya.Resource.destroyUnusedResources()})}InitEcsSystem(){this.systemMgr.AddSystem(new gp),this.systemMgr.AddSystem(new mc),this.systemMgr.AddSystem(new class extends lt{constructor(){super(...arguments),this.systemName="RigidBodySystem",this.vecCache=new Laya.Vector3(0,0,0)}Init(){}Update(){var n=this.world.GetEntitys([Pt.id,M.id]);for(let a=0;a<n.length;a++){let e=n[a],t=e.GetComponent(Pt),i=e.GetComponent(M),o=A.LimitTimeDelta;t.igroneTimeScale&&(o=A.TimeDeltaNoScale),t.useGravity&&(t.vec.y+=yt.gravity*o),i.pos.x+=t.vec.x*o,i.pos.y+=t.vec.y*o,i.pos.z+=t.vec.z*o,i.rotation.x+=t.angleVec.x*o,i.rotation.y+=t.angleVec.y*o,i.rotation.z+=t.angleVec.z*o,t.useBounce&&(0<t.bounce?i.pos.y<=t.bounceY&&t.vec.y<0&&(t.vec.y=.8*-t.vec.y,i.pos.y=t.bounceY,t.bounce--,0==t.bounce&&(t.vec.y=0,t.useGravity=!1)):(t.vec.x=S.Lerp(t.vec.x,0,A.TimeDelta),t.vec.z=S.Lerp(t.vec.z,0,A.TimeDelta),t.angleVec.x=S.Lerp(t.angleVec.x,0,A.TimeDelta),t.angleVec.y=S.Lerp(t.angleVec.y,0,A.TimeDelta),t.angleVec.z=S.Lerp(t.angleVec.z,0,A.TimeDelta)))}}FixedUpdate(){}LateUpdate(){}Destroy(){}OnAddComponent(e,t){}OnRemoveComponent(e,t){}}),this.systemMgr.AddSystem(new _p),this.systemMgr.AddSystem(new Ip),this.systemMgr.AddSystem(new fp);let e=new sc;e.elementCreator=this.gameElementCreator,this.systemMgr.AddSystem(e),this.systemMgr.AddSystem(new cc),this.systemMgr.AddSystem(new tg),this.systemMgr.AddSystem(new Dp),this.systemMgr.AddSystem(new Ep),this.systemMgr.AddSystem(new XC)}Awake(){}Start(){T.screenRatio=Laya.Browser.clientWidth/Laya.Browser.clientHeight,j.HideLoading(),O.CreatPrefabEntity(N.CoverCameraRoot),K.AudioModule().PlayMusic(x.GetBGM("CoverBgm")),K.UIModule().ShowUI(Zg.UIName)}Dispose(){Laya.Resource.destroyUnusedResources()}ClearRes(){}CreatMerge(){let t=new Fp,i=K.DataModule().GetUser().GetData();for(let e=0;e<i.mergeMap.length;e++)t.mapList.push(i.mergeMap[e]);q.NowGameWorld.CreatEntity().AddComponentAdv(Fp,t)}ClearMerge(){let e=q.NowGameWorld.GetSingleCompoentEntity(Fp);null!=e&&e.Destory()}ChangeHero(e,t,i=""){this.ClearHero();let o=Jc.CreatHero(new Laya.Vector3(this.heroUsePos.x,this.heroUsePos.y,this.heroUsePos.z),e,t,!1,i,K.DataModule().GetUser().GetAllPropsStrs(),K.DataModule().GetUser().GetNowWeaponSkinId());o.GetComponent(F).ChangeState(Mf.StateName),o.GetComponent(fi).height=this.heroUsePos.y;e=K.DataModule().GetLocal().weapon.Get(t);"Sword"==e.Type&&(o.GetComponent(M).rotation.y=this.heroUseRot.y),"Axe"==e.Type&&(o.GetComponent(M).rotation.y=this.heroUseRot.y-25),"Dagger"==e.Type&&(o.GetComponent(M).rotation.y=this.heroUseRot.y-25),e.Type!=ot.TommyGun&&e.Type!=ot.Sniper&&e.Type!=ot.Rifle&&e.Type!=ot.Pistol&&"HeavyGun"!=e.Type&&e.Type!=ot.ShotGun||(o.GetComponent(M).rotation.y=this.heroUseRot.y),this.heroRotationY=o.GetComponent(M).rotation.y}LevelUpEffect(){O.CreatPrefabEntityUsePos(N.Effect_LevelUp,new Laya.Vector3(this.heroUsePos.x,this.heroUsePos.y,this.heroUsePos.z))}CreatWeapon(e,t=!1){let i=null,o="",a="",n="",s=(n=(a=t?(o=(i=K.DataModule().GetLocal().weaponSkin.Get(e)).WeaponType,i.Res):(o=(i=K.DataModule().GetLocal().weapon.Get(e)).Type,"WeaponSkin_"+i.Res),i.Res),new Laya.Vector3(0,0,0)),l=0,r=0,h=0,m=1.5,d=(t?o==ot.Pistol&&(s.x=-.3,s.y=0,h=0,l=170,r=220,m=1.5):o==ot.Pistol&&(s.x=-.3,s.y=.2,h=0,l=170,r=220,m=1.5),o==ot.TommyGun&&(s.x=-.2,s.y=0,h=0,l=200,r=190,h=0,m=1.2),o==ot.Rifle&&(s.x=-.2,s.y=0,h=0,l=200,r=200,m=1.2),o==ot.ShotGun&&(s.x=.526,s.y=.3,s.z=.286,h=0,l=190,r=0,m=1.2),o==ot.Sniper&&(s.x=.5,s.y=-.1,h=0,l=210,r=0,m=1.2),Jc.CreatWeapon(s,a,x.GetWeaponSkin(n))),c=(d.GetComponent(M).SetRotation2(l,r,0),d.GetComponent(M).SetScale(m,m,m),q.EcsGameMgr.nowGame.scene3D.getChildByName("WeaponShowRoot"));c.transform.localPositionX=0,c.addChild(d.GetComponent(B).sp),t||(d.GetComponent(B).render=!1,d.GetComponent(B).banCull=!0,d.GetComponent(B).sp.active=!1)}ShowWeapon(){let t=this.world.GetEntitys([Kc.id]);for(let e=0;e<t.length;e++)"Weapon"==t[e].GetComponent(Kc).tag&&(t[e].GetComponent(B).render=!0);let e=q.EcsGameMgr.nowGame.scene3D.getChildByName("WeaponShowRoot");e.transform.localScaleX=0,e.transform.localScaleY=0,e.transform.localScaleZ=0,Laya.Tween.to(e.transform,{localScaleX:1,localScaleY:1,localScaleZ:1},500,Laya.Ease.elasticOut)}ClearWeapon(){let t=this.world.GetEntitys([Kc.id]);for(let e=0;e<t.length;e++)"Weapon"==t[e].GetComponent(Kc).tag&&t[e].Destory()}ClearHero(){let t=this.world.GetEntitys([R.id]);for(let e=0;e<t.length;e++)t[e].Destory()}FreshHeroPos(){let t=this.world.GetEntitys([R.id]);for(let e=0;e<t.length;e++)t[e].GetComponent(M).SetPos(this.heroUsePos),t[e].GetComponent(M).SetRotation(this.heroUseRot)}UseCoverBG(){this.ChangeBG("CoverBg"),this.heroUsePos=new Laya.Vector3(-1.3,0,-.4),this.heroUseRot=new Laya.Vector3(0,0,0),this.FreshHeroPos()}UseTryHeroBG(){this.ChangeBG("MergeNewBg"),this.heroUsePos=new Laya.Vector3(.1,.4,-.2),this.heroUseRot=new Laya.Vector3(0,0,0),this.FreshHeroPos()}UseMergeNewBg(){this.ChangeBG("MergeNewBg")}UseEquipBg(){this.ChangeBG("EquipBg"),this.heroUsePos=new Laya.Vector3(1.55,-.24,-.51),this.heroUseRot=new Laya.Vector3(0,-22,0),this.FreshHeroPos()}ChangeBG(e){let t=q.EcsGameMgr.nowGame.scene3D.getChildByName("CoverBg");t.active=!1,(t=q.EcsGameMgr.nowGame.scene3D.getChildByName("MergeNewBg")).active=!1,(t=q.EcsGameMgr.nowGame.scene3D.getChildByName("EquipBg")).active=!1,q.EcsGameMgr.nowGame.scene3D.getChildByName(e).active=!0}ShowTryHero(e,t,i){this.ClearTryView(),this.tryCamera=O.CreatPrefabEntityUsePos(N.CoverCameraRoot),this.tryCamera.GetComponent(M).SetPos(new Laya.Vector3(1e3,.69,-.82)),this.tryCamera.GetComponent(M).SetRotation2(6.2,180,0),this.tryCamera.GetComponent(B).sp.transform.localPositionX=1e3;let o=this.tryCamera.GetComponent($i).camera;this.tryCameraTex=new Laya.RenderTexture(532,401,Laya.RenderTextureFormat.R16G16B16A16),o.renderTarget=this.tryCameraTex,o.renderingOrder=-1,o.clearFlag=Laya.CameraClearFlags.SolidColor,o.clearColor=new Laya.Vector4(0,0,0,0),this.trytarget=Jc.CreatHero(new Laya.Vector3(1e3,0,0),t,i,!1,"",K.DataModule().GetUser().GetAllPropsStrs(),K.DataModule().GetUser().GetNowWeaponSkinId()),this.trytarget.GetComponent(M).SetRotation2(0,0,0),this.trytarget.GetComponent(F).ChangeState($C.StateName),this.trytarget.AddComponent(Pt),this.trytarget.GetComponent(Pt).useGravity=!1,this.trytarget.GetComponent(Pt).angleVec.y=50,this.trytarget.GetComponent(fi).height=0;t=K.DataModule().GetLocal().weapon.Get(i);"Sword"==t.Type&&(this.trytarget.GetComponent(M).rotation.y=this.heroUseRot.y-25),"Axe"==t.Type&&(this.trytarget.GetComponent(M).rotation.y=this.heroUseRot.y-25-25),"Dagger"==t.Type&&(this.trytarget.GetComponent(M).rotation.y=this.heroUseRot.y-25-25),this.uiTex=new Laya.Texture(o.renderTarget,Laya.Texture.DEF_UV);let a=new Laya.Sprite;a.graphics.drawTexture(this.uiTex),e.addChild(a)}ShowTrySkinWeapon(e,t){this.ClearTryView(),this.tryCamera=O.CreatPrefabEntityUsePos(N.CoverCameraRoot),this.tryCamera.GetComponent(M).SetPos(new Laya.Vector3(1e3,1.23,-1.56)),this.tryCamera.GetComponent(M).SetRotation2(0,180,0),this.tryCamera.GetComponent(B).sp.transform.localPositionX=1e3;let i=this.tryCamera.GetComponent($i).camera,o=(this.tryCameraTex=new Laya.RenderTexture(532,401,Laya.RenderTextureFormat.R16G16B16A16),i.renderTarget=this.tryCameraTex,i.renderingOrder=-1,i.clearFlag=Laya.CameraClearFlags.SolidColor,i.clearColor=new Laya.Vector4(0,0,0,0),K.DataModule().GetLocal().weaponSkin.Get(t)),a=new Laya.Vector3(0,0,0),n=0,s=1,l=("Sword"==o.WeaponType&&(a.x=-.33,a.y=-.33,n=-138,s=1),"Axe"==o.WeaponType&&(a.x=-.202,a.y=-.12,n=-138,s=1,this.tryCamera.GetComponent(M).SetPos(new Laya.Vector3(1e3,1.23,-1))),"Dagger"==o.WeaponType&&(a.x=-.2,a.y=-.15,n=-138,s=1),"Keyboard"==t&&(s=1.173),"Keyboard"==t&&(s=1.173),this.trytarget=Jc.CreatWeapon(a,"WeaponSkin_"+o.Res,x.GetWeaponSkin(o.Res)),this.trytarget.GetComponent(M).SetRotation2(0,0,-n),this.trytarget.GetComponent(M).SetScale(s,s,s),q.EcsGameMgr.nowGame.scene3D.getChildByName("WeaponShowRoot")),r=(l.transform.localPositionX=1e3,l.addChild(this.trytarget.GetComponent(B).sp),this.trytarget.GetComponent(B).banCull=!0,this.uiTex=new Laya.Texture(i.renderTarget,Laya.Texture.DEF_UV),new Laya.Sprite);r.graphics.drawTexture(this.uiTex),e.addChild(r)}ClearTryView(){this.tryCamera&&(this.tryCamera.Destory(),this.tryCamera=null),this.trytarget&&(this.trytarget.Destory(),this.trytarget=null),this.tryCameraTex&&(this.tryCameraTex.destroy(),this.tryCameraTex=null),this.uiTex&&(this.uiTex.destroy(),this.uiTex=null)}})}static StartMainGame(){q.EcsGameMgr.StartGame(og)}static ResetGame(){try{"Main"!=q.EcsGameMgr.nowGame.gameName&&K.UIModule().HideAllUI()}catch(e){console.error("发生错误")}this.StartCover()}}),q=class extends Laya.Script{constructor(){super(...arguments),this.ecsGameManager=new class{constructor(){this.nowFixedTime=0,this.isGameLoad=!1,this.enterUpdate=!0}StartGame(e){e=new e;null!=this.nowGame?this.nowGame.gameName!=e.gameName?(this.DestoryGame(),this.nowGame=e,this.nowGame.root=this.root,b.Warn("替换并实例化一个新的 ECS游戏")):this.ClearGame():(b.Warn("实例化一个新的 ECS游戏"),this.nowGame=e,this.nowGame.root=this.root),this.nowGame.StartGame(),this.isGameLoad=!0,b.Warn("开始Ecs游戏")}get World(){return this.nowGame.world}ClearGame(){this.nowGame&&(this.nowGame.ClearGame(),this.nowGame.isDispose=!0,this.nowGame.Dispose(),b.Warn("清理Ecs游戏实体"))}DestoryGame(){this.nowGame&&(this.nowGame.DesoryGame(),this.nowGame.isDispose=!0,this.nowGame.Dispose(),this.nowGame=null,b.Warn("销毁Ecs游戏"),this.isGameLoad=!1)}FixedUpdate(){this.isGameLoad&&this.enterUpdate&&(this.nowFixedTime+=A.TimeDeltaNoScale,this.nowFixedTime>=A.FixedTime&&(this.nowFixedTime=this.nowFixedTime-A.FixedTime,this.nowGame.FixedUpdate()))}Update(){this.isGameLoad&&this.enterUpdate&&this.nowGame.Update()}LateUpdate(){this.isGameLoad&&this.enterUpdate&&this.nowGame.LateUpdate()}},this.netFrame=!1}onAwake(){(q.instance=this).ecsGameManager.root=this.owner,k.Platform==T.OPPO?K.DataModule().GetUser().GetData().nowGuide==qp.FirstFight?K.UIModule().ShowUI(qa.UIName):this.StartCore():k.Platform==T.QQ&&K.DataModule().GetUser().GetData().nowGuide==qp.FirstFight?K.UIModule().ShowUI(an.UIName):this.StartCore()}StartCore(){eG.StartGame()}EcsGameManager(){return this.ecsGameManager}static Instance(){return q.instance}static get EcsGameMgr(){return q.Instance().ecsGameManager}static get NowGameWorld(){return q.Instance().ecsGameManager.nowGame.world}onUpdate(){for(let e=0;e<A.ExUpDateCount;e++)this.netFrame||this.ecsGameManager.FixedUpdate(),this.ecsGameManager.Update()}NetUpdate(){this.netFrame&&this.ecsGameManager.nowGame.FixedUpdate()}onLateUpdate(){this.ecsGameManager.LateUpdate()}static Random(){return q.instance&&q.instance.netFrame?K.MGOBEModule().Random():Math.random()}static SetRandomSeed(e){K.MGOBEModule().SetSeed(e)}},tG=class{constructor(){}static init(){(0,Laya.ClassUtils.regClass)("script/GameScript/Game/GameCore/GameCore.ts",q)}},iG=(tG.width=1280,tG.height=720,tG.scaleMode="fixedheight",tG.screenMode="horizontal",tG.alignV="top",tG.alignH="left",tG.startScene="Scene/Main.scene",tG.sceneRoot="",tG.debug=!1,tG.stat=!1,tG.physicsDebug=!1,tG.exportSceneToJson=!0,tG.init(),class{static Init(){if(k.Platform==T.TT&&(LayaZip.Init(),LayaZip.BasePathMode=0),k.Platform!=T.QQ||k.IsInWebTest)if(k.Platform!=T.WECHAT||k.IsInWebTest)if(k.Platform!=T.TT||k.IsInWebTest)if(k.Platform!=T.OPPO||k.IsInWebTest){if(k.Platform==T.VIVO&&!k.IsInWebTest){console.warn("Vivo加载cdn和白名单");let e=Laya.VVMiniAdapter;e.AutoCacheDownFile=!0,console.warn("设置白名单"),e.nativefiles=["BattleScene1/","BattleScene2/","BattleScene3/","BattleScene4/","BattleScene5/","BattleScene6/","BattleSceneNian/","Cover/","3DRes/BGM1.mp3","3DRes/CoverBgm.mp3","3DRes/EcsPrefabRes/","3DRes/Skin/","GameData/","3DRes/res/InGameUI.zip","3DRes/res/InGameUI_atlas0.png","3DRes/res/InGameUI_atlas0_1.png","3DRes/res/InGameUI_atlas0_2.png","3DRes/res/InGameUI_atlas10.png","res/Image","Scene/","res/BaseUI.zip","res/BaseUI_atlas0.png","Sound/"],Laya.URL.basePath=k.httpResServerPath}}else{console.warn("oppo加载cdn和白名单");let e=Laya.QGMiniAdapter;e.AutoCacheDownFile=!0,console.warn("设置白名单"),e.nativefiles=["BattleScene1/","BattleScene2/","BattleScene3/","BattleScene4/","BattleScene5/","BattleScene6/","BattleSceneNian/","Cover/","3DRes/EcsPrefabRes/","3DRes/Skin/","3DRes/BGM1.mp3","3DRes/CoverBgm.mp3","3DRes/GameData/","3DRes/res/InGameUI.zip","3DRes/res/InGameUI_atlas0.png","3DRes/res/InGameUI_atlas0_1.png","3DRes/res/InGameUI_atlas0_2.png","3DRes/res/InGameUI_atlas10.png","res/Image","Scene/","res/BaseUI.zip","res/BaseUI_atlas0.png","Sound/"],Laya.URL.basePath=k.httpResServerPath}else{let e=Laya.TTMiniAdapter;e.AutoCacheDownFile=!0,console.warn("设置TT白名单"),e.nativefiles=["BattleScene1/","BattleScene2/Conventional/","BattleScene3/Conventional/","BattleScene4/Conventional/","BattleScene5/Conventional/","BattleScene6/Conventional/","BattleSceneNian/Conventional/","Cover/","3DRes/EcsPrefabRes/","3DRes/Skin/","GameData/","3DRes/res/InGameUI.zip","3DRes/res/InGameUI_atlas0.png","3DRes/res/InGameUI_atlas0_1.png","3DRes/res/InGameUI_atlas0_2.png","3DRes/res/InGameUI_atlas10.png","res/Image","Scene/","res/BaseUI.zip","res/BaseUI_atlas0.png"],Laya.URL.basePath=k.httpResServerPath}else Laya.MiniAdpter.AutoCacheDownFile=!0,console.warn("设置白名单"),Laya.MiniAdpter.nativefiles=["BattleScene1/","BattleScene2/","BattleScene3/","BattleScene4/","BattleScene5/","BattleScene6/","BattleSceneNian/","Cover/","3DRes/EcsPrefabRes/","3DRes/Skin/","3DRes/GameData/","3DRes/res/InGameUI.zip","3DRes/res/InGameUI_atlas0.png","3DRes/res/InGameUI_atlas0_1.png","3DRes/res/InGameUI_atlas0_2.png","3DRes/res/InGameUI_atlas10.png","res/Image/","Scene/","res/BaseUI.zip","res/BaseUI_atlas0.png","res/atlas/"],Laya.URL.basePath=k.httpResServerPath;else Laya.QQMiniAdapter.AutoCacheDownFile=!0,console.warn("设置白名单"),Laya.QQMiniAdapter.nativefiles=["BattleScene1/","BattleScene2/","BattleScene3/","BattleScene4/","BattleScene5/","BattleScene6/","BattleSceneNian/","Cover/","3DRes/EcsPrefabRes/","3DRes/Skin/","3DRes/GameData/","3DRes/res/InGameUI.zip","3DRes/res/InGameUI_atlas0.png","3DRes/res/InGameUI_atlas0_1.png","3DRes/res/InGameUI_atlas0_2.png","3DRes/res/InGameUI_atlas10.png","Scene/","res/BaseUI.zip","res/BaseUI_atlas0.png"],Laya.URL.basePath=k.httpResServerPath;k.Platform==T.QQ&&Laya.loader.load(["res/atlas/test.atlas"],Laya.Handler.create(null,function(){Laya.QQMiniAdapter.sendAtlasToOpenDataContext("res/atlas/test.atlas")})),(new Jd).Init(),(new ge).Init(),(new he).Init(),(new le).Init(),(new W).Init(),(new z).Init(),(new Q).Init(),(new zC).Init(),(new Rg).Init(),(new rn).Init(),(new YC).Init(),(new QC).Init(),SC.ModuleLoadOver(),(new ac).Init()}static ScreenAutoFit(){T.screenRatio=Laya.Browser.clientWidth/Laya.Browser.clientHeight,b.Warn("屏幕比例",T.screenRatio);try{var e,t,i,o;null!=window.qq?(e=window.qq.getSystemInfoSync()).screenWidth/e.screenHeight<1.77?(console.warn("qq平板比例使用强制拉伸模式",e),tG.width=1920,tG.height=1080,k.isIpad=!0):console.warn("qq手机比例使用默认适配方式"):null!=window.tt?(t=window.tt.getSystemInfoSync()).screenWidth/t.screenHeight<1.77?(console.warn("tt平板比例使用强制拉伸模式"),tG.width=1920,tG.height=1080,k.isIpad=!0):console.warn("tt手机比例使用默认适配方式"):null!=window.wx?(i=wx.getSystemInfoSync()).screenWidth/i.screenHeight<1.77?(console.warn("wx平板比例使用强制拉伸模式"),tG.width=1920,tG.height=1080,k.isIpad=!0):console.warn("wx手机比例使用默认适配方式"):null!=window.qg&&((o=window.qg.getSystemInfoSync()).screenWidth/o.screenHeight<1.77?(console.warn("qg平板比例使用强制拉伸模式"),tG.width=1920,tG.height=1080,k.isIpad=!0):console.warn("qg手机比例使用默认适配方式"))}catch(e){console.error("set rotio ",e)}}});new class{constructor(){var e,t;iG.ScreenAutoFit(),window.Laya3D?Laya3D.init(tG.width,tG.height):Laya.init(tG.width,tG.height,Laya.WebGL),Laya.Physics&&Laya.Physics.enable(),Laya.DebugPanel&&Laya.DebugPanel.enable(),Laya.stage.scaleMode=tG.scaleMode,Laya.stage.screenMode=tG.screenMode,Laya.stage.alignV=tG.alignV,Laya.stage.alignH=tG.alignH,T.IS_KuaiShou&&(e=Laya.stage,t=window.getAdapterInfo({width:tG.width,height:tG.height,scaleMode:tG.scaleMode}),e.designWidth=t.w,e.designHeight=t.h,e.width=t.rw,e.height=t.rh,e.scale(t.scaleX,t.scaleY),console.log("getAdapterInfo3:",JSON.stringify(t)),console.log("stage::",e.designWidth,e.designHeight,e.width,e.height,e.scaleX,e.scaleY)),Laya.URL.exportSceneToJson=tG.exportSceneToJson,null!=window.qg&&(Laya.stage.useRetinalCanvas=!0),!tG.debug&&"true"!=Laya.Utils.getQueryString("debug")||Laya.enableDebugPanel(),tG.physicsDebug&&Laya.PhysicsDebugDraw&&Laya.PhysicsDebugDraw.enable(),tG.stat&&Laya.Stat.show(),Laya.alertGlobalError(!0),Laya.ResourceVersion.enable("version.json",Laya.Handler.create(this,this.onVersionLoaded),Laya.ResourceVersion.FILENAME_VERSION)}onVersionLoaded(){Laya.AtlasInfoManager.enable("fileconfig.json",Laya.Handler.create(this,this.onConfigLoaded))}onConfigLoaded(){iG.Init()}}})();